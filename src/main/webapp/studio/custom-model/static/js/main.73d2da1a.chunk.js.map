{"version":3,"sources":["Properties/widgetList.js","Properties/propertyFields.js","Properties/properties.helper.js","Properties/fieldTypes.js","Properties/fa-icons.js","constants.js","Toolbar/api.js","Editor/utils.js","Editor/index.js","Panels/MainPanel.js","common.func.js","components/SearchView.js","Toolbar/Select.js","Toolbar/customModelSearch.js","Toolbar/ViewSelection.js","custom-hooks/useKeyPress.js","Toolbar/Toolbar.js","custom-hooks/useComponentVisible.js","Toolbar/DeleteConfirmation.js","store/optimizeExtension.js","Toolbar/ToolbarContainer.js","components/SelectComponent.js","components/TranslationGrid.js","Properties/widgets/StaticSelection.js","Properties/widgets/Select.js","Properties/widgets/Content.js","Properties/widgets/CheckboxField.js","Properties/widgets/SelectionWidget.js","Properties/widgets/OnlyIf.js","Properties/index.js","Panels/PropertiesPanel/PropertiesView.js","Panels/PropertiesPanel/PropertiesPanelView.js","components/FieldComponent.js","Panels/AttributesPanel/Field.js","Panels/AttributesPanel/AddPanelView.js","App.js","index.js","store/context.js","services/http.js","services/axelor.rest.js","store/xpathGenerator.js","utils.js","components/Grid.js","components/Panel.js","store/computeXML.js","store/validation.js","Properties/list.js","components/Menu.js","components/Registery.js","components/PopoverAlert.js","components/Widget.js","components/Form.js","components/RelationalFieldGridView.js","components/Field.js","fields.js","store/extensionGenerator.js","components/TabPanel.js"],"names":["selectWidget","data","boolean","integer","string","text","binary","date","datetime","time","button","decimal","canCollapse","name","title","type","parentField","modelType","MODEL_TYPE","CUSTOM","dependModelType","collapseIf","isGenerateMenu","isTab","Name","props","StringField","required","readOnly","regex","regexErrorMessage","unique","isDisabled","properties","editWidgetType","metaFieldStore","isStudioLite","BASE","id","requiredFor","Type","column","selection","formatter","value","tab","entityIndex","indexOf","substring","SelectableType","StaticSelectField","defaultOption","disableClearable","DummyType","DataTypes","CanCollapse","BooleanField","CollapseIf","Title","translationView","requiredWhen","DefaultValue","StudioApp","ObjectSelectionField","ref","Help","Sequence","IntegerField","Roles","multiple","ValueExpression","Selection","SelectField","valueField","Widget","widgetList","OnChange","canAddNew","commaSeparated","OnNew","Min","Max","JsonRelationalField","getValue","change","_type","serverType","length","Domain","Prompt","SelectionIn","showInCustomField","Value","ValueAdd","ValueDel","Refresh","Active","shouldRender","list","xPath","includes","TargetJsonModel","displayField","TargetModel","property","GridView","needsTargetModel","relationalFields","OneToMany","ManyToMany","ManyToOne","FormView","Required","defaultValue","ColumnSequence","ReadOnly","Hidden","VisibleInGrid","ShowIf","HideIf","If","RequiredIf","ReadOnlyIf","IncludeIf","ValidIf","OnlyIf","_domain","showInBaseView","Css","Editable","ColSpan","Array","fill","map","_","i","toString","getOptionLabel","option","parentPanel","TYPE","toolbar","menubar","ItemSpan","IsGenerateMenu","MenuBuilderTitle","depends","dependValue","MenuBuilderParent","shouldFetchInStart","limit","getMenuBuilderTitle","parent","find","item","parentText","filter","f","ShowTitle","CanSearch","IfModule","Height","Action","Field","CanMove","OrderBy","IncludeView","IncludeFrom","Sidebar","mainItems","isHidden","Model","Color","Background","Strong","Image","fontAwesome","panel","tabs","field","dumpField","form","panelStack","panelDashlet","panelRelated","panelInclude","menu","menuItem","divider","ItemTypes","CONTAINER","ROOTCONTAINER","ITEM","DUMMY","FIELD_TYPE","number","spacer","separator","hilite","PANEL_TYPE","stack","flow","grid","custom","GRID_SIZE","max","IDS","createWidgets","Symbol","customForm","PANEL_PROPS","colSpan","cols","image","items","layout","mappedBy","undefined","model","modelField","relationship","widgetAttrs","JSON","stringify","showTitle","OneToOne","typeReplacer","include","MANY_TO_MANY","MANY_TO_ONE","ONE_TO_ONE","ONE_TO_MANY","ENTITY_TYPE","META","DEFAULT_VALUE","readonly","hidden","sidebar","stacked","canMove","canSearch","multiline","conditionProperties","readonlyIf","requiredIf","hideIf","otherNoQuoteProps","ACTIONS","MODEL","GLOBAL","OTHER","metaJsonFieldService","AxelorService","metaModelService","appStudioService","appUserService","metaViewService","modelService","metaAttrsService","metaSelectService","selectionBuilderService","metaTranslationService","fetchCustomFields","fullName","search","sortBy","saveCustomModel","a","save","res","status","fields","getFields","all","$version","version","e","Promise","updatedField","response","updatedFields","fetchJSONFields","ids","update","record","criteria","push","fieldName","operator","then","schema","generateCustomModelSchema","draft","l","widgets","getMenuBuilder","studioMenu","0","loader","removeCustomModel","removeAll","getEnableAppBuilder","payload","_domainContext","code","offset","studioResult","isArray","enableStudioApp","generateMenuChange","customModel","_context","_model","_id","action","context","fetchCustomModel","modelId","handleError","fetch","related","result","fetchViews","view","viewCriteria","viewList","views","Utils","getViews","fetchAttrsList","conditionPropertiesKeys","Object","keys","conditionPropertiesValues","values","startsWith","endsWith","replace","saveAttrsList","saveAll","deleteAttrsList","fetchLanguages","d","getTranslationList","keyList","saveTranslationList","deleteTranslationList","fetchUserPreferences","info","userInfo","userResponse","getSelectionText","metaSelect","selectionText","payloadData","actionResponse","_properties","customScrollTo","element","scrollableParent","includeHidden","style","getComputedStyle","excludeStaticParent","position","overflowRegex","document","body","parentElement","test","overflow","overflowY","overflowX","getScrollParent","window","requestAnimationFrame","scrollTo","top","offsetTop","behavior","useStyles","makeStyles","uiContainer","display","flexDirection","alignSelf","container","height","loaderContainer","justifyContent","zIndex","border","backgroundColor","bottom","left","right","alignItems","emptyFormInfo","minHeight","FormViewUI","design","store","useStore","classes","customPanelRef","useRef","state","customFieldWidgets","errorList","formInfo","customFieldWidgetsExists","useEffect","current","focus","className","classNames","CircularProgress","index","attrs","onSelect","dragWidget","hoverWidget","editWidget","onMove","onDrag","onHover","onWidgetChange","setHoverAttr","addTabPanel","Form","tabIndex","customFieldItems","React","memo","toolbarOffset","useState","width","paddingRight","Editor","useDebounceEffect","handler","interval","isMounted","timer","setTimeout","clearTimeout","theme","root","palette","background","paper","input","borderRadius","borderColor","titleHeader","borderBottom","listItem","paddingTop","paddingBottom","closeText","textTransform","tabContainer","labelStyle","centerElement","padding","tabsLabel","TabPanel","children","other","role","aria-labelledby","ResponsiveDialog","onChange","handleClose","total","isTypeOnClick","isDataLoading","useTheme","fullScreen","useMediaQuery","breakpoints","down","handleItemClick","useCallback","canNext","canPrev","getLabel","Dialog","maxWidth","fullWidth","open","onClose","DialogTitle","DialogContent","Grid","xs","flex","TextField","size","searchText","variant","setSearchText","target","InputProps","startAdornment","InputAdornment","Search","placeholder","IconButton","onClick","onPrevious","disabled","onNext","Tabs","orientation","currentTab","onTabChange","label","Tab","key","Box","List","ListItem","dense","ListItemText","primary","Typography","DialogActions","Button","autoFocus","color","autoComplete","fontSize","autoCompleteRoot","marginLeft","inputView","popperView","searchFilter","options","filterData","onSearch","handleHighlightChange","handleOutsideClick","getOptionSelected","loading","setLoading","setList","searchMore","setSearchMore","setOffset","setTotal","models","translate","uniqueList","uniqBy","service","_data","handleNext","newOffset","handlePrevious","debounceHandler","handleChange","handleTextChange","Fragment","clearOnEscape","inputFocused","clearIndicator","popupIndicator","endAdornment","popper","noOptions","onInputChange","reason","renderInput","params","inputProps","modelSearch","modelResult","modelIndex","findIndex","m","packageName","splice","entityType","actualType","modelTypes","startLoader","clearHistory","reset","selectedView","runIfConfirmed","baseHasChanges","customFieldHasChanges","modelName","handleModelSelect","useMemo","exView","initialItems","initialWidgets","customFields","extensionXML","extensionView","originalXML","metaFields","extensionMoves","attrsList","translationList","initialTranslationList","removedTranslationList","highlightedOption","rest","_fields","parse","typeName","toLowerCase","targetModel","doesViewExists","handleViewSelect","generateXMLToViewSchema","translationNames","widget","originalViewData","convert","xml2json","xml","compact","fullTagEmptyElement","_viewSearch","fieldList","generateXpath","viewFilter","modelFilter","metaFieldFilter","doesModelFieldExists","handleMetaFieldSelect","newId","uniqueId","handleTypeSelect","updater","handleViewFilterData","computed","extension","filterSelectedOptions","useKeyPress","callback","node","callbackRef","useLayoutEffect","handleKeyPress","event","some","ctrlKey","preventDefault","targetNode","addEventListener","removeEventListener","toolbarContainer","flexWrap","toolItemView","crudIcon","cursor","selectionContainer","toolbarActions","disableBtn","searchContainer","ToolbarButton","saveView","saveCustomFieldView","removeView","onNew","showAlert","past","future","tabPanelItems","initialIsVisible","isComponentVisible","setIsComponentVisible","handleHideDropdown","handleClickOutside","contains","useComponentVisible","isRemoveDisabled","xmlId","Boolean","isNewDisabled","isSaveDisabled","obj","setOptions","getSearchOptions","forEach","autoTitle","handleSearch","allOptions","parentId","x","customParentId","tabId","customTabId","skipGenerateHistory","split","panelName","handleHighlightChangeRef","timerRef","onHighlightChange","showConfirmation","onOK","dialog","message","isDirty","fn","skipConfirm","args","onNewWithConfirmation","handleRefreshWithConfirmation","refresh","classnames","autoHighlight","undo","redo","minWidth","DeleteConfirmation","onOk","aria-describedby","DialogContentText","hasIndex","path","isSameAsOriginal","originalWidgets","attributes","itemExplore","exploreTarget","widgetExplore","self","attributeName","dashToCamelCase","widgetValue","maskedValue","maskName","getUpdatedAttrsList","newAttrsList","removedAttrsList","moves","movesMap","Map","currentWidgets","widgetId","eGeneratePath","getWidgets","move","convertConditionName","newMove","assign","set","moveExplore","pathText","endIndex","getName","fieldIndex","attr","isOriginal","isCurrent","selectValueRegEx","newAttrsIndex","match","changedAttrsList","optimizeExtension","processed","explore","flag","p","_list","_item","lastItem","k","filterListForAttribute","canRemoveReplace","insertIndex","elements","source","moveIndex","removeIndex","filterListForRemove","customFieldService","getChangedTranslationList","initialList","deletedTranslationList","changedTranslationList","initialItem","language","deleteConfirmationDialog","setDeleteConfirmationDialog","queryModel","closeLoader","callbackfn","getDefaultProperties","clearView","error","removedCustomFields","isTabsPanelEmpty","panelTab","v","isOnlySidePanel","sideItems","studioOutput","isSave","getCustomModelFields","propertyValues","Set","formProperties","getFormProperties","menuBuilderTitle","parentMenu","menuBuilderParent","reload","errorMessage","exemptAttributes","isCreatedFromStudio","viewSearch","patch","generateView","processXML","json2xml","fetchResult","metaView","originalSchema","generateViewFromJson","getXML","isAttrsChanged","conditionalValues","isTranslationChanged","getExistingExtension","json","handleNew","customWidgets","fromEntries","entries","isPanelTab","extraProps","failedRes","r","handleConfirmationClose","deleteView","handleRemoveConfirmation","dangerouslySetInnerHTML","__html","renderDialog","createFilterOptions","marginTop","popperAutoComplete","marginBottom","groupTitle","fontWeight","SelectComponent","_props","preData","propertyList","setPropertyList","val","setData","setsearchText","moreDialog","setMoreDialog","initialFetch","setInitialFetch","isLoading","setIsLoading","stateModelType","setTabIndex","handleInputChange","getSelectValue","join","fetchOptions","currentModel","modelFilters","uniqueData","getActions","fetchedData","flat","optionDebounceHandler","getInputAsOption","_value","fromDialog","inputValue","updatedValue","gridView","getDefaultGridFormName","formView","contextFieldTarget","contextFieldTargetName","contextFieldValue","contextFieldTitle","handleTabChange","onOpen","groupBy","forcePopupIcon","freeSolo","clearOnBlur","filterOptions","filtered","showMore","o","camleCaseString","InputLabelProps","renderGroup","group","row","languageText","textAlign","TranslationGrid","keyValue","translations","setTranslations","handleTranslationChange","_translations","newList","translationIndex","handleTranslationUpdate","languageList","lang","onBlur","autoCompleteInput","autoCompleteOption","StaticSelection","helper","ColorTag","groupLabel","getProperty","renderOption","marginRight","select","StaticSelect","selectClassName","optionLabel","optionValue","setVal","Autocomplete","renderValue","Chip","defaultProps","WKF_COLORS","textField","Content","forwardRef","connectDragSource","connectDropTarget","handleRow","deleteRow","updateSelection","addRow","rowsCount","elementRef","useImperativeHandle","getNode","onKeyDown","aria-label","iconButton","clsx","whiteSpace","textOverflow","editable","icon","fontAwesomeList","DropTarget","hover","monitor","component","dragIndex","getItem","hoverIndex","hoverBoundingRect","getBoundingClientRect","hoverMiddleY","hoverClientY","getClientOffset","y","moveCard","connect","dropTarget","DragSource","beginDrag","dragSource","isDragging","CheckboxField","openAlert","setAlertOpen","uncheckDialog","alertMessage","handleDialogOk","isHistoryGenerated","markHistoryGenerated","getPropertyValue","fieldValue","handleOnChange","Checkbox","checked","resize","alertPaper","checkbox","content","dialogContent","ok","btn","dialogActions","paddingLeft","SelectionWidget","rows","setRows","openGrid","setOpenGrid","setIsHistoryGenerated","isSelectionField","cloneRows","dragCard","saveRow","createRows","trim","optionKeyValue","titleLower","pop","addOptions","validateErrors","CardContent","FormControlLabel","control","startIcon","updateWidget","translationInput","translationInputView","outlinedRoot","borderWidth","notchedOutline","focused","switchBase","track","iconOutlined","panelTitle","panelMargin","margin","disableInput","translateButton","staticSelectMenuItem","textFieldInput","booleanInputLabel","PropertiesContext","createContext","isValueGenerated","StringInput","onTranslationRemove","clearable","confirm","setConfirm","min","useContext","Label","handleTranslationClick","newValue","generateFieldUniqueTitle","handleTranslationRemove","removeTranslation","savedValue","helperText","minRows","onFocus","isNaN","Number","hide","Switch","RenderPropertyField","errors","checkDepend","checkModel","PropertiesProvider","Provider","Properties","selectedType","tz","typeFieldIndex","overview","fieldOptions","widgetAttributes","inputLabel","labelWidth","setLabelWidth","changedPropertyName","newProperties","offsetWidth","w","hasPropertyToShow","capitalizeFirst","resizeStyle","borderLeft","drawerPaper","propertyToggle","transform","transformOrigin","userSelect","boxShadow","drawerOpen","setDrawerOpen","setWidth","setHeight","setCSSWidth","checkWindowSize","prev","innerWidth","onResizeStop","direction","enable","Drawer","anchor","transitionDuration","fieldImage","backgroundRepeat","backgroundSize","backgroundPosition","getImageURL","FieldComponent","targetName","Tooltip","arrow","placement","backgroundImage","attributeItem","isResponsive","fieldTypes","modelFields","Container","fieldType","editorType","showField","isCoreField","isPalleteField","Divider","toolbarWrapper","panelContainer","propertiesPanel","mainPanel","createTheme","typography","fontFamily","AppContent","toolbarHeight","setToolbarHeight","gridRef","mainContainerRef","toolbarSelector","alertUser","returnValue","querySelector","resizeObserver","ResizeObserver","offsetHeight","observe","unobserve","scope","angular","$viewScope","confirmDirty","cancelCallback","axelor","dialogs","_t","confirmed","console","URL","location","searchParams","get","modelTitle","getParams","menuBuilder","init","App","DndProvider","backend","Backend","ThemeProvider","ReactDOM","render","getElementById","StoreContext","useStoreState","StoreProvider","setState","produce","useMutableState","hoverAttr","getAllChildrenIds","widgetType","collectIds","reduce","concat","onExtension","moveIds","generateExtension","generateHistory","isCustomField","extendList","setErrorList","caseConverter","isExtensionView","keyReplacer","valueConverter","Math","itemSpan","child","_widgets","panelId","setPresent","object","original","destination","resolver","isMoved","isNew","checkExclusive","isDrop","_extendList","_attrs","dragWidgetProps","extraAttr","_eWidgetAttr","_attrsWidgetAttr","reorderGrid","validateParentPanelItems","allWidgets","onRemove","isPanelRequired","widgetItems","isPanel","childrenIds","arrangeItems","arrangeGrid","validateOnRemove","unshift","lastCookieString","headers","Accept","lastCookies","readCookie","cookieString","cookie","parts","joinURL","subURL","services","this","baseURL","url","method","axios","request","credential","localStorage","username","password","login","interceptor","resolve","catch","relogin","setItem","removeItem","post","_subURL","records","logout","getItemType","itemId","isFirstLevel","hasSameNameInParentItems","originalName","getSameItemIndex","getTypeWiseItemIndex","getWidgetType","isUniquePanel","canStopParentLink","findRoot","widgetIds","_widget","itemPath","itemIndex","word","str","toUpperCase","isCamelCase","convertedText","camelCase","textToConvert","slice","charAt","getSpacer","removeWidget","isLastItemRemove","isLastItemSpacer","lastWidget","deleteItem","otherProps","targetWidget","validate","dragWidgetItems","_items","destinationItems","meta","hoverCellRowIndex","relatedColSpan","dragWidgetIndex","cellIndice","removedWidgetAttrsColSpan","dragWidgetAttrs","spacerWidgetAttrsColSpan","hoverType","existingColspan","newIds","widgetIndex","beforeWidgets","afterWidgets","cell","cellIndex","rowIndex","isSpacer","lastItemIndex","_beforeWidgets","el","acc","collectWidgets","isRemovedFromSameList","sourcePanel","sourceItems","sourceItemIndex","isLastItem","isLastItemInSamePanel","hoverParent","isLastItemRemovable","lastItemMetaGrid","columnIndex","colIndex","horizontal","ceil","hoverPath","newWidgetIds","hoverWidgetParentItems","hoverWidgetId","actualHoverWidget","shouldInsertInParent","hoverPathInfo","targetInfo","isCreateWidget","shouldAdd","parentPanelItemSpan","processMoves","exclusive","getColSpan","defaultColspan","getCols","_panelId","typeLateral","formType","formItems","tabItems","_ID","replacer","minSize","maxSize","camelToDashCase","editorKeyReplacer","_keyIndex","isDummyField","types","getCustomWidget","exempt","exemptedAttrs","isAttrHasDefaultValue","parentValue","shouldCheckParent","_obj","caseString","g","isDefaultValue","targetSplit","getElementToWidget","itemList","fieldTarget","itemTarget","_key","elementType","getElementName","TYPE_REPLACER","getElementTypes","getTitle","getSpecialType","getXMLToViewItems","exclude","getExtensionElements","chars","floor","random","randomString","isForm","isJson","modelString","viewName","dasherize","xmlString","indent","format","getWidgetAttrs","isModelField","squareIndex","additionalProps","countSequence","sequence","except","formWidth","getPatchList","xmlJson","filterFormPatch","patchList","getCurrentFormAttributes","mergeFormAttributes","formPatch","targetIndex","remove","isSamePositionInOriginal","hoverItemIndex","defaultType","getReferenceProperty","checkTarget","checkString","which","getChangeList","extensionXml","elems","moveElement","DEFAULTS","col","parentItemSpan","GridContainer","useGridWidget","WidgetComponent","setWidgetComponent","module","default","draggedWidgetAttrsColSpan","span","gridSize","columns","isStackLayout","spacerWidth","colWidth","isStack","_parentItemSpan","getItemColspan","remainingSpan","$cell","dummy","dummyPanel","fillColspan","addItem","occupiedSpan","remainSpan","fullGrid","isSidePanelDummy","draggable","upRow","midRow","addCell","$row","j","totalSpan","getFullGrid","c","gridRows","arr","getHighlightedOptionStatus","cellPadding","cellSpacing","indice","isSeparator","panelColumns","canRemove","isBase","inline","setAttributeOnNewWidget","inserted","_inserted","exemptedAttributes","attrIndex","cleatVirtualAction","generateNestedView","_subItems","getWidgetObject","getExtendJson2","insertOnNewPanel","lst","addErrorMessage","every","prop","RegExp","stringOption","existsCheck","uiOptions","conditions","valueExpr","roles","integerOption","decimalOption","booleanOption","datetimeOption","panelOption","panelStackOption","panelTabOption","buttonOption","seperatorOption","spacerOption","labelOption","viewerOption","manyToOneOption","manyToManyAndOneToManyOption","customRelationOption","formOption","actions","commonOption","dummyOption","viewOption","gridOption","panelDashletOption","menuItemOption","dividerOption","menuOption","panelRelatedOption","panelIncludeOption","hiliteOption","openMenu","setOpenMenu","handleToggleMenu","stopPropagation","Registery","dump_field","Panel","Menu","dialogContainer","PopoverAlert","anchorEl","handleYes","Popover","anchorOrigin","vertical","CardSource","canDrag","WIDGET_TYPE","isGrid","endDrag","didDrop","newProps","CardTarget","maybeOutdatedDragIndex","dragPanelId","dragId","dragAttrs","hoverPanelId","hoverId","hoverAttrs","panelSet","maxIndex","gridTab","rowCount","stateItems","widgetKey","isOver","shallow","parentWidgetAttrs","dragAttrsWidgetAttrs","canDrop","highlighted","hovered","DefaultWidgetComponent","isSidePanelDrg","setAnchorEl","section","scrollIntoView","block","scrollToWidgetView","visible","registryField","Registry","componentProps","isFormField","isEdit","isTabWidget","isTabWidgetContent","showRemove","isExist","_isTab","isDummy","edit","active","dragWidgetAttrsColSpan","hoverWidgetParentItemSpan","canWidgetFit","currentTarget","SimpleWidget","DraggableWidget","compose","FormComponent","allItems","isSidePanel","rootPanel","gap","excludedUITypes","showInGrid","visibleInGrid","RelationalFieldGridView","targetJsonModel","gridItems","setGridItems","gridTitle","setGridTitle","actionResult","jsonFields","jsonAttrs","displayFields","allFields","getGrid","TextInput","MultiTextInput","Spacer","Separator","MenuItem","Hilite","strong","DefaultWidget","alt","src","getWidgetAttrsObject","itemSource","uiFields","subViews","panelAttrs","TabPanelComponent","getTabAttributes","activeTabIndex"],"mappings":"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CA,YACA,aACA,eACA,uBACA,uBACA,wBACA,qBACA,gBACA,gBACA,iBACA,cACA,WACA,aACA,gBACA,uBACA,uBACA,yBACA,yBACA,0BACA,uBACA,wBACA,qBACA,gBACA,gBACA,iBACA,cACA,YACA,gBACA,cACA,cACA,sBACA,iCACA,cACA,QACA,uBACA,gBACA,cACA,mBACA,SACA,cACA,UACA,eACA,iBACA,aACA,UACA,UACA,aACA,aACA,eACA,eACA,eACA,eACA,eACA,mBACA,kBACA,kBACA,qBACA,4BACA,SACA,UACA,aACA,oBACA,UACA,YACA,gBACA,kBACA,aACA,gBACA,mBACA,eACA,sBACA,aACA,eACA,WACA,eACA,iBACA,UACA,UACA,UACA,UACA,cACA,gBACA,aACA,eACA,SACA,SACA,cACA,gBACA,cACA,cACA,SACA,gBACA,SACA,gBACA,cACA,sBACA,sBACA,gBACA,qBACA,sBACA,YACA,kBACA,SACA,gBACA,gBACA,iBACA,yBACA,yBACA,0BACA,uBACA,cACA,qBACA,eACA,QACA,aACA,oBACA,iBACA,YACA,mBACA,eACA,eACA,aACA,iBACA,WACA,kBACA,WACA,kBACA,oBACA,kBACA,oBACA,yBACA,yBACA,0BACA,uBACA,kBACA,kBACA,mBACA,gBACA,WACA,YACA,YACA,cACA,oBACA,iBACA,eACA,aACA,WACA,WACA,WACA,oBACA,kBACA,SACA,UACA,eACA,aACA,cACA,YACA,SACA,UACA,aACA,aACA,eACA,gBACA,kBACA,cACA,gBACA,aACA,cACA,oBACA,YACA,UACA,eACA,sBACA,iBACA,qBACA,UACA,gBACA,UACA,UACA,WACA,SACA,aACA,eACA,cACA,cACA,UACA,cACA,YACA,eACA,aACA,gBACA,aACA,UACA,YACA,kBACA,cACA,cACA,qBACA,uBACA,aACA,YACA,UACA,UACA,aACA,WACA,gBACA,gBACA,YACA,cACA,gBACA,mBACA,qBACA,qBACA,YACA,YACA,UACA,SACA,UACA,cACA,iBACA,wBACA,0BACA,YACA,kBACA,mBACA,0BACA,SACA,eACA,gBACA,QACA,cACA,gBACA,uBACA,qBACA,mBACA,kBACA,SACA,UACA,YACA,iBACA,UACA,oBACA,kBACA,iBACA,kBACA,kBACA,kBACA,YACA,gBACA,kBACA,oBACA,uBACA,kBACA,eACA,iBACA,kBACA,iBACA,gBACA,aACA,UACA,YACA,UACA,uBACA,aACA,iBACA,UACA,oBACA,YACA,WACA,WACA,YACA,cACA,YACA,cACA,iBACA,mBACA,UACA,kBACA,eACA,kBACA,cACA,aACA,gBACA,oBACA,aACA,cACA,aACA,WACA,SACA,QACA,UACA,WACA,gBACA,gBACA,QACA,eACA,UACA,SACA,gBACA,YACA,gBACA,mBACA,YACA,YACA,WACA,WACA,aACA,WACA,YACA,iBACA,wBACA,0BACA,wBACA,mBACA,oBACA,cACA,UACA,WACA,cACA,iBACA,iBACA,mBACA,iBACA,iBACA,kBACA,eACA,kBACA,kBACA,oBACA,iBACA,qBACA,kBACA,iBACA,iBACA,qBACA,aACA,WACA,YACA,gBACA,WACA,aACA,eACA,aACA,UACA,gBACA,WACA,eACA,iBACA,iBACA,iBACA,mBACA,oBACA,iBACA,qBACA,WACA,WACA,cACA,cACA,aACA,eACA,SACA,WACA,UACA,WACA,YACA,cACA,UACA,iBACA,SACA,eACA,iBACA,uBACA,cACA,aACA,YACA,YACA,SACA,cACA,SACA,gBACA,SACA,cACA,YACA,YACA,mBACA,UACA,aACA,WACA,aACA,gBACA,cACA,eACA,eACA,eACA,gBACA,iBACA,gBACA,UACA,cACA,qBACA,YACA,WACA,UACA,cACA,aACA,aACA,oBACA,UACA,qBACA,qBACA,sBACA,mBACA,gBACA,WACA,YACA,kBACA,gBACA,oBACA,UACA,SACA,gBACA,WACA,aACA,eACA,UACA,iBACA,iBACA,mBACA,mBACA,YACA,cACA,YACA,YACA,YACA,WACA,aACA,eACA,gBACA,sBACA,WACA,kBACA,kBACA,oBACA,cACA,YACA,kBACA,UACA,WACA,YACA,kBACA,gBACA,mBACA,WACA,aACA,YACA,iBACA,kBACA,oBACA,mBACA,0BACA,cACA,YACA,WACA,mBACA,aACA,eACA,iBACA,iBACA,mBACA,eACA,eACA,WACA,WACA,kBACA,oBACA,SACA,YACA,YACA,mBACA,qBACA,aACA,WACA,kBACA,WACA,eACA,eACA,gBACA,oBACA,mBACA,eACA,iBACA,sBACA,WACA,UACA,iBACA,mBACA,UACA,UACA,iBACA,iBACA,mBACA,aACA,eACA,WACA,kBACA,kBACA,QACA,YACA,cACA,qBACA,uBACA,WACA,gBACA,iBACA,QACA,YACA,aACA,WACA,aACA,YACA,kBACA,mBACA,aACA,gBACA,YACA,YACA,aACA,YACA,WACA,eACA,gBACA,aACA,SACA,UACA,YACA,iBACA,kBACA,YACA,SACA,gBACA,SACA,WACA,WACA,SACA,YACA,UACA,cACA,YACA,YACA,kBACA,iBACA,YACA,UACA,YACA,YACA,WACA,eACA,sBACA,kBACA,oBACA,YACA,YACA,YACA,UACA,kBACA,kBACA,qBACA,mBACA,YACA,aACA,mBACA,cACA,YACA,aACA,iBACA,aACA,cACA,WACA,WACA,aACA,gBACA,aACA,cACA,oBACA,qBACA,iBACA,mBACA,UACA,oBACA,qBACA,qBACA,sBACA,cACA,eACA,eACA,sBACA,uBACA,aACA,gBACA,mBACA,aACA,WACA,aACA,YACA,cACA,oBACA,oBACA,UACA,eACA,qBACA,oBACA,iBACA,YACA,WACA,kBACA,mBACA,kBACA,iBACA,iBACA,mBACA,UACA,iBACA,mBACA,iBACA,mBACA,iBACA,wBACA,eACA,YACA,cACA,WACA,iBACA,iBACA,aACA,WACA,YACA,gBACA,SACA,UACA,WACA,UACA,cACA,gBACA,mBACA,cACA,iBACA,gBACA,QACA,cACA,aACA,eACA,iBACA,mBACA,mBACA,mBACA,mBACA,mBACA,uBACA,sBACA,sBACA,yBACA,gCACA,gBACA,iBACA,mBACA,iBACA,eACA,YACA,WACA,kBACA,oBACA,qBACA,uBACA,UACA,iBACA,iBACA,gBACA,eACA,kBACA,eACA,eACA,WACA,iBACA,qBACA,WACA,aACA,UACA,YACA,iBACA,YACA,WACA,SACA,SACA,YACA,mBACA,kBACA,QACA,YACA,aACA,oBACA,cACA,eACA,UACA,sBACA,gBACA,YACA,YACA,gBACA,cACA,YACA,SACA,SACA,UACA,iBACA,mBACA,aACA,YACA,eACA,iBACA,gBACA,WACA,WACA,aACA,WACA,kBACA,gBACA,aACA,YACA,mBACA,kBACA,WACA,kBACA,UACA,QACA,0BACA,iBACA,gBACA,eACA,aACA,YACA,WACA,YACA,cACA,gBACA,oBACA,UACA,iBACA,kBACA,oBACA,qBACA,qBACA,oBACA,aACA,SACA,eACA,gBACA,gBACA,aACA,YACA,UACA,iBACA,kBACA,yBACA,WACA,QACA,eACA,UACA,SACA,WACA,aACA,kBACA,sB,+BClxBD,giBACO,IAAMpC,EAAO,CACnBqC,MAAO,QACPC,KAAM,aACNC,MAAO,QACPC,UAAW,aACXC,KAAM,OACNC,WAAY,cACZC,aAAc,gBACdC,aAAc,gBACdC,aAAc,gBACdC,KAAM,OACNC,SAAU,OACVC,QAAS,UACT9C,QAAS,UACTD,QAAS,WAGGgD,EAAY,CACxBC,UAAW,QACXC,cAAe,iBACfC,KAAM,OACNC,MAAO,SAIKC,EAAa,CACzB9L,OAAQ,SACR+L,OAAQ,SACRzL,OAAQ,SACR0L,OAAQ,SACRlM,QAAS,UACTmM,UAAW,YACXC,OAAQ,UAIIC,EAAa,CACzBC,MAAO,QACPC,KAAM,OACNC,KAAM,OACNC,OAAQ,UAIIC,EAAY,CACxBC,IAAK,IAIOC,EAAM,CAClBC,cAAe,CACd7B,KAAM8B,SACN/B,MAAO+B,SACP7B,MAAO6B,UAER3B,MAAO,EACP4B,YAAa,EACb7B,UAAW,GAGC8B,EAAc,CAC1BC,QAAS,GACTC,KAAM,GACN9K,GAAIwK,EAAIC,cAAc9B,MACtBoC,MAAO,Y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","file":"static/js/main.73d2da1a.chunk.js","sourcesContent":["const selectWidget = [\n\t\"NavSelect\",\n\t\"CheckboxSelect\",\n\t\"RadioSelect\",\n\t\"MultiSelect\",\n\t\"ImageSelect\",\n];\nconst data = {\n\tboolean: [\n\t\t\"InlineCheckbox\",\n\t\t\"Toggle\",\n\t\t\"BooleanSelect\",\n\t\t\"BooleanRadio\",\n\t\t\"BooleanSwitch\",\n\t\t...selectWidget,\n\t],\n\tinteger: [\n\t\t\"RelativeTime\",\n\t\t\"Duration\",\n\t\t\"Progress\",\n\t\t\"SelectProgress\",\n\t\t...selectWidget,\n\t],\n\tstring: [\n\t\t\"Email\",\n\t\t\"Url\",\n\t\t\"Password\",\n\t\t\"Html\",\n\t\t\"CodeEditor\",\n\t\t\"ImageLine\",\n\t\t...selectWidget,\n\t],\n\ttext: [\"Html\", \"CodeEditor\", ...selectWidget],\n\t\"many-to-one\": [\"SuggestBox\", \"Image\", \"binary-link\"],\n\t\"json-many-to-one\": [\"SuggestBox\", \"Image\", \"binary-link\"],\n\t\"one-to-one\": [\"SuggestBox\", \"Image\"],\n\t\"json-one-to-one\": [\"SuggestBox\", \"Image\"],\n\t\"many-to-many\": [\"TagSelect\"],\n\t\"json-many-to-many\": [\"TagSelect\"],\n\tbinary: [\"Image\", \"BinaryLink\", ...selectWidget],\n\tdate: [...selectWidget],\n\tdatetime: [...selectWidget],\n\ttime: [...selectWidget],\n\tbutton: [\"Button\", \"InfoButton\", \"ToolButton\"],\n\tdecimal: [\n\t\t\"RelativeTime\",\n\t\t\"Duration\",\n\t\t\"Progress\",\n\t\t\"SelectProgress\",\n\t\t...selectWidget,\n\t],\n};\n\nexport default data;\n","import {\n\tStringField,\n\tObjectSelectionField,\n\tIntegerField,\n\tSelectField,\n\tStaticSelectField,\n\tBooleanField,\n} from \"./fieldTypes\";\nimport widgetList from \"./widgetList\";\nimport { MODEL_TYPE, DataTypes, relationalFields, TYPE } from \"../constants\";\nimport { getMenuBuilderTitle } from \"./properties.helper\";\n\nconst canCollapse = {\n\tname: \"canCollapse\",\n\ttitle: \"Can Collapse\",\n\ttype: \"boolean\",\n\tparentField: \"widgetAttrs\",\n\tmodelType: MODEL_TYPE.CUSTOM,\n\tdependModelType: MODEL_TYPE.CUSTOM,\n};\nconst collapseIf = {\n\tname: \"collapseIf\",\n\ttitle: \"Collapse If\",\n\ttype: \"string\",\n\tparentField: \"widgetAttrs\",\n\tmodelType: MODEL_TYPE.CUSTOM,\n\tdependModelType: MODEL_TYPE.CUSTOM,\n};\n\nconst isGenerateMenu = {\n\tname: \"isGenerateMenu\",\n\ttitle: \"Generate menu\",\n\ttype: \"boolean\",\n};\n\nconst isTab = {\n\tname: \"tab\",\n\ttype: \"boolean\",\n\tparentField: \"widgetAttrs\",\n\tmodelType: MODEL_TYPE.CUSTOM,\n\tdependModelType: MODEL_TYPE.CUSTOM,\n};\n\n/** Overview Fields */\nexport const Name = ({ ...props } = {}) =>\n\tStringField({\n\t\tname: \"name\",\n\t\ttitle: \"Name\",\n\t\trequired: true,\n\t\treadOnly: true,\n\t\tregex: /^[a-z]/i,\n\t\tregexErrorMessage: \"First Letter of the name should always be alphabet\",\n\t\tunique: true,\n\t\tisDisabled: ({\n\t\t\tproperties,\n\t\t\tmetaFieldStore,\n\t\t\teditWidgetType,\n\t\t\tmodelType,\n\t\t\tisStudioLite,\n\t\t}) => {\n\t\t\tif (modelType === MODEL_TYPE.BASE && editWidgetType !== \"customField\") {\n\t\t\t\treturn true;\n\t\t\t}\n\t\t\tif (\n\t\t\t\tmodelType === MODEL_TYPE.CUSTOM &&\n\t\t\t\tproperties &&\n\t\t\t\t(properties.id || isStudioLite) &&\n\t\t\t\tproperties.type === \"form\"\n\t\t\t) {\n\t\t\t\treturn true;\n\t\t\t}\n\t\t\treturn false;\n\t\t},\n\t\trequiredFor: [\n\t\t\t\"button\",\n\t\t\t\"label\",\n\t\t\t\"panel\",\n\t\t\t\"string\",\n\t\t\t\"panel-dashlet\",\n\t\t\t\"separator\",\n\t\t\t\"panel-stack\",\n\t\t\t\"integer\",\n\t\t\t\"date\",\n\t\t\t\"time\",\n\t\t\t\"datetime\",\n\t\t\t\"decimal\",\n\t\t\t\"one-to-many\",\n\t\t\t\"many-to-many\",\n\t\t\t\"boolean\",\n\t\t\t\"label\",\n\t\t\t\"viewer\",\n\t\t\t\"editor\",\n\t\t\t\"one-to-one\",\n\t\t\t\"spacer\",\n\t\t\t\"long\",\n\t\t\t\"hilite\",\n\t\t],\n\t\t...props,\n\t});\n\nexport const Type = StringField({\n\tname: \"type\",\n\tcolumn: \"type_name\",\n\ttitle: \"Type\",\n\trequired: true,\n\tselection: \"json.field.type\",\n\treadOnly: \"true\",\n\tformatter: (value, properties) => {\n\t\tif (properties.tab) {\n\t\t\treturn \"panel-tabs\";\n\t\t}\n\t\tconst entityIndex = value.indexOf(\"entity\");\n\t\tif (entityIndex !== -1) {\n\t\t\treturn value.substring(0, entityIndex);\n\t\t}\n\t\treturn value;\n\t},\n});\n\nexport const SelectableType = StaticSelectField({\n\tname: \"type\",\n\ttitle: \"Type\",\n\tcolumn: \"type_name\",\n\trequired: true,\n\tdata: [\"string\", \"integer\"],\n\tdefaultOption: false,\n\tdisableClearable: true,\n\tisDisabled: ({ properties, metaFieldStore, editWidgetType, modelType }) => {\n\t\tif (modelType === MODEL_TYPE.BASE && editWidgetType !== \"customField\") {\n\t\t\treturn true;\n\t\t}\n\t},\n});\n\nexport const DummyType = StaticSelectField({\n\tname: \"dummyType\",\n\ttitle: \"Type\",\n\tdata: [...DataTypes],\n});\n\nexport const CanCollapse = BooleanField(canCollapse);\n\nexport const CollapseIf = StringField(collapseIf);\n\nexport const Title = StringField({\n\tname: \"title\",\n\ttitle: \"Title\",\n\ttranslationView: false,\n\trequiredWhen: [canCollapse, collapseIf, isTab],\n});\n\nexport const DefaultValue = StringField({\n\tname: \"defaultValue\",\n\tdependModelType: MODEL_TYPE.CUSTOM,\n\ttitle: \"Default value\",\n});\n\nexport const StudioApp = ObjectSelectionField({\n\tname: \"studioApp\",\n\ttitle: \"App name\",\n\tref: \"com.axelor.studio.db.StudioApp\",\n\tdependModelType: MODEL_TYPE.CUSTOM,\n});\n\nexport const Help = StringField({\n\tname: \"help\",\n\ttitle: \"Help\",\n\tdependModelType: MODEL_TYPE.CUSTOM,\n});\n\nexport const Sequence = IntegerField({\n\tname: \"sequence\",\n\ttitle: \"Sequence\",\n\tdependModelType: MODEL_TYPE.CUSTOM,\n});\n\n/** Roles Fields */\nexport const Roles = ObjectSelectionField({\n\tname: \"roles\",\n\ttitle: \"Roles\",\n\tref: \"com.axelor.auth.db.Role\",\n\tmultiple: true,\n\tdependModelType: MODEL_TYPE.CUSTOM,\n});\n\n/** ValueExpr Fields */\nexport const ValueExpression = {\n\tname: \"valueExpr\",\n\ttitle: \"Value expr\",\n\ttype: \"text\",\n\tdependModelType: MODEL_TYPE.CUSTOM,\n};\n\n/** Field Options Fields */\nexport const Selection = SelectField({\n\tname: \"selection\",\n\ttitle: \"Selection\",\n\tref: \"com.axelor.meta.db.MetaSelect\",\n\tvalueField: \"name\",\n\tdependModelType: MODEL_TYPE.CUSTOM,\n\ttype: \"selection\",\n});\n\nexport const Widget = StaticSelectField({\n\tname: \"widget\",\n\tdata: widgetList,\n\ttitle: \"Widget\",\n\tdependModelType: MODEL_TYPE.CUSTOM,\n});\n\nexport const OnChange = SelectField({\n\tname: \"onChange\",\n\tref: \"com.axelor.meta.db.MetaAction\",\n\tdependModelType: MODEL_TYPE.CUSTOM,\n\ttitle: \"On change\",\n\tmultiple: true,\n\tcanAddNew: true,\n\tcommaSeparated: true,\n});\n\nexport const OnNew = SelectField({\n\ttitle: \"On new\",\n\tname: \"onNew\",\n\tref: \"com.axelor.meta.db.MetaAction\",\n\tdependModelType: MODEL_TYPE.CUSTOM,\n\tmultiple: true,\n\tcommaSeparated: true,\n\tcanAddNew: true,\n});\n\nexport const OnLoad = SelectField({\n\ttitle: \"On load\",\n\tname: \"onLoad\",\n\tref: \"com.axelor.meta.db.MetaAction\",\n\tmultiple: true,\n\tcommaSeparated: true,\n\tcanAddNew: true,\n});\n\nexport const OnSave = SelectField({\n\tname: \"onSave\",\n\tref: \"com.axelor.meta.db.MetaAction\",\n\tmultiple: true,\n\tcommaSeparated: true,\n\ttitle: \"On save\",\n\tcanAddNew: true,\n});\n\nexport const Min = IntegerField({\n\tname: \"minSize\",\n\ttitle: \"Min\",\n\tdependModelType: MODEL_TYPE.CUSTOM,\n});\n\nexport const Max = IntegerField({\n\tname: \"maxSize\",\n\ttitle: \"Max\",\n\tdependModelType: MODEL_TYPE.CUSTOM,\n});\n\nexport const JsonRelationalField = BooleanField({\n\tname: \"isJsonRelationalField\",\n\ttitle: \"Is json relational field\",\n\tdependModelType: MODEL_TYPE.CUSTOM,\n\tgetValue: (properties) => {\n\t\tconst type = properties[\"type\"];\n\t\tif (type) {\n\t\t\tconst hasJSONField = type.indexOf(\"json\") === 0;\n\t\t\tif (hasJSONField) {\n\t\t\t\treturn true;\n\t\t\t}\n\t\t}\n\t\treturn false;\n\t},\n\tchange: (value, properties) => {\n\t\tconst type = properties[\"type\"];\n\t\tif (value === true) {\n\t\t\tconst has = type.indexOf(\"json\") === 0;\n\t\t\tif (!has) {\n\t\t\t\tconst _type = `json-${type}`;\n\t\t\t\treturn {\n\t\t\t\t\ttype: _type,\n\t\t\t\t\tserverType: _type,\n\t\t\t\t};\n\t\t\t}\n\t\t} else if (value === false) {\n\t\t\tconst has = type.indexOf(\"json\") === 0;\n\t\t\tif (has) {\n\t\t\t\tconst _type = type.substring(\"json-\".length);\n\t\t\t\treturn {\n\t\t\t\t\ttype: _type,\n\t\t\t\t\tserverType: _type,\n\t\t\t\t};\n\t\t\t}\n\t\t}\n\t\treturn {};\n\t},\n});\n\nexport const Domain = StringField({\n\tname: \"domain\",\n\ttitle: \"Domain\",\n});\n\nexport const Prompt = StringField({\n\tname: \"prompt\",\n\ttitle: \"Prompt\",\n\tparentField: \"widgetAttrs\",\n});\n\nexport const SelectionIn = StringField({\n\tname: \"selection-in\",\n\tdependModelType: MODEL_TYPE.BASE,\n\tshowInCustomField: false,\n\ttitle: \"Selection in\",\n});\n\nexport const Value = StringField({\n\tname: \"value\",\n\ttitle: \"Value\",\n\tdependModelType: MODEL_TYPE.BASE,\n\tshowInCustomField: false,\n});\n\nexport const ValueAdd = StringField({\n\tname: \"value:add\",\n\ttitle: \"Value:add\",\n\tdependModelType: MODEL_TYPE.BASE,\n\tshowInCustomField: false,\n});\n\nexport const ValueDel = StringField({\n\tname: \"value:del\",\n\ttitle: \"Value:del\",\n\tdependModelType: MODEL_TYPE.BASE,\n\tshowInCustomField: false,\n});\n\nexport const Refresh = BooleanField({\n\tname: \"refresh\",\n\ttitle: \"Refresh\",\n\tdependModelType: MODEL_TYPE.BASE,\n\tshowInCustomField: false,\n});\n\nexport const Active = BooleanField({\n\tname: \"active\",\n\ttitle: \"Active\",\n\tdependModelType: MODEL_TYPE.BASE,\n\tshowInCustomField: false,\n\tshouldRender: (list) => {\n\t\treturn list.xPath && list.xPath.includes(\"panel-tabs\");\n\t},\n});\n\nexport const TargetJsonModel = ObjectSelectionField({\n\tname: \"targetJsonModel\",\n\trequired: true,\n\tref: \"com.axelor.meta.db.MetaJsonModel\",\n\tdisplayField: \"title\",\n\tdependModelType: MODEL_TYPE.CUSTOM,\n\ttitle: \"Target json model\",\n});\n\nexport const TargetModel = SelectField({\n\tname: \"targetModel\",\n\ttitle: \"Target model\",\n\trequired: true,\n\tref: \"com.axelor.meta.db.MetaModel\",\n\tvalueField: \"fullName\",\n\tcanAddNew: false,\n\tisDisabled: (property, editWidgetType, modelType) => {\n\t\treturn (\n\t\t\teditWidgetType !== \"customField\" &&\n\t\t\tproperty.serverType !== \"field\" &&\n\t\t\tmodelType !== MODEL_TYPE.CUSTOM\n\t\t);\n\t},\n});\n\nexport const GridView = SelectField({\n\tname: \"gridView\",\n\ttitle: \"Grid view\",\n\tref: \"com.axelor.meta.db.MetaView\",\n\tvalueField: \"name\",\n\tdependModelType: MODEL_TYPE.CUSTOM,\n\tneedsTargetModel: [\n\t\trelationalFields.OneToMany,\n\t\trelationalFields.ManyToMany,\n\t\trelationalFields.ManyToOne,\n\t],\n});\n\nexport const FormView = SelectField({\n\tname: \"formView\",\n\ttitle: \"Form view\",\n\tref: \"com.axelor.meta.db.MetaView\",\n\tvalueField: \"name\",\n\tdependModelType: MODEL_TYPE.CUSTOM,\n\tneedsTargetModel: [\n\t\trelationalFields.OneToMany,\n\t\trelationalFields.ManyToMany,\n\t\trelationalFields.ManyToOne,\n\t],\n});\n\n/** Ui options fields */\nexport const Required = BooleanField({\n\tname: \"required\",\n\ttitle: \"Required\",\n\tdefaultValue: \"false\",\n\tisDisabled: ({ properties, metaFieldStore, editWidgetType, modelType }) => {\n\t\tif (modelType === MODEL_TYPE.BASE && editWidgetType !== \"customField\") {\n\t\t\tif (properties[\"requiredIf\"] && properties[\"requiredIf\"].length) {\n\t\t\t\treturn true;\n\t\t\t}\n\t\t}\n\t\treturn false;\n\t},\n});\n\nexport const ColumnSequence = IntegerField({\n\tname: \"columnSequence\",\n\ttitle: \"Column sequence\",\n\tdependModelType: MODEL_TYPE.CUSTOM,\n});\n\nexport const ReadOnly = BooleanField({\n\tname: \"readonly\",\n\ttitle: \"Readonly\",\n\tisDisabled: ({ properties, metaFieldStore, editWidgetType, modelType }) => {\n\t\tif (modelType === MODEL_TYPE.BASE && editWidgetType !== \"customField\") {\n\t\t\tif (properties[\"readonlyIf\"] && properties[\"readonlyIf\"].length) {\n\t\t\t\treturn true;\n\t\t\t}\n\t\t}\n\t\treturn false;\n\t},\n});\n\nexport const Hidden = BooleanField({\n\tname: \"hidden\",\n\ttitle: \"Hidden\",\n\tisDisabled: ({ properties }) => {\n\t\tif (properties[\"hideIf\"] && properties[\"hideIf\"].length) {\n\t\t\treturn true;\n\t\t}\n\t\treturn false;\n\t},\n});\n\nexport const VisibleInGrid = BooleanField({\n\tname: \"visibleInGrid\",\n\ttitle: \"Visible in grid\",\n\tdependModelType: MODEL_TYPE.CUSTOM,\n});\n\n/** Conditions Fields*/\nexport const ShowIf = StringField({\n\tname: \"showIf\",\n\ttitle: \"Show if\",\n\tdependModelType: MODEL_TYPE.CUSTOM,\n});\n\nexport const HideIf = StringField({\n\tname: \"hideIf\",\n\ttitle: \"Hide if\",\n\tisDisabled: ({ properties }) => {\n\t\tif (properties[\"hidden\"]) {\n\t\t\treturn true;\n\t\t}\n\t\treturn false;\n\t},\n});\n\nexport const If = StringField({\n\tname: \"if\",\n\ttitle: \"If\",\n\tdependModelType: MODEL_TYPE.CUSTOM,\n});\n\nexport const RequiredIf = StringField({\n\tname: \"requiredIf\",\n\ttitle: \"Required if\",\n\tisDisabled: ({ properties, metaFieldStore, editWidgetType, modelType }) => {\n\t\tif (modelType === MODEL_TYPE.BASE && editWidgetType !== \"customField\") {\n\t\t\tif (properties[\"required\"]) {\n\t\t\t\treturn true;\n\t\t\t}\n\t\t}\n\t\treturn false;\n\t},\n});\n\nexport const ReadOnlyIf = StringField({\n\tname: \"readonlyIf\",\n\ttitle: \"Readonly if\",\n\tisDisabled: ({ properties, metaFieldStore, editWidgetType, modelType }) => {\n\t\tif (modelType === MODEL_TYPE.BASE && editWidgetType !== \"customField\") {\n\t\t\tif (properties[\"readonly\"]) {\n\t\t\t\treturn true;\n\t\t\t}\n\t\t}\n\t\treturn false;\n\t},\n});\n\nexport const IncludeIf = StringField({\n\tname: \"includeIf\",\n\ttitle: \"Include if\",\n\tdependModelType: MODEL_TYPE.CUSTOM,\n});\n\nexport const ValidIf = StringField({\n\tname: \"validIf\",\n\ttitle: \"Valid if\",\n\tparentField: \"widgetAttrs\",\n\tmodelType: MODEL_TYPE.CUSTOM,\n\tdependModelType: MODEL_TYPE.CUSTOM,\n});\n\nexport const OnlyIf = SelectField({\n\tname: \"contextField\",\n\ttitle: \"Only if\",\n\tref: \"com.axelor.meta.db.MetaField\",\n\tvalueField: \"name\",\n\ttype: \"onlyIf\",\n\t_domain:\n\t\t\"self.name not in ('createdBy', 'updatedBy') and self.relationship = 'ManyToOne' and self.metaModel.fullName = :model\",\n\tdependModelType: MODEL_TYPE.BASE,\n\tshowInBaseView: false,\n});\n\nexport const CanSave = StringField({\n\tname: \"canSave\",\n\tdependModelType: MODEL_TYPE.CUSTOM,\n\ttitle: \"Can save\",\n});\n\nexport const Css = StringField({\n\tname: \"css\",\n\ttitle: \"Css\",\n\tparentField: \"widgetAttrs\",\n\tmodelType: MODEL_TYPE.CUSTOM,\n});\n\nexport const Editable = BooleanField({\n\tname: \"editable\",\n\ttitle: \"Editable\",\n\tdependModelType: MODEL_TYPE.CUSTOM,\n});\n\n/** Widget Fields*/\nexport const ColSpan = StaticSelectField({\n\tname: \"colSpan\",\n\ttitle: \"Colspan\",\n\tparentField: \"widgetAttrs\",\n\tdata: [\n\t\t\"\",\n\t\t...Array(12)\n\t\t\t.fill()\n\t\t\t.map((_, i) => (i + 1).toString()),\n\t],\n\tmodelType: MODEL_TYPE.CUSTOM,\n\tdependModelType: MODEL_TYPE.CUSTOM,\n\tgetOptionLabel: (option) => {\n\t\treturn option ? option.toString() : \"\";\n\t},\n\tisDisabled: ({ properties, parentPanel }) => {\n\t\tif (parentPanel) {\n\t\t\tif ([TYPE.toolbar, TYPE.menubar].includes(parentPanel.serverType)) {\n\t\t\t\treturn true;\n\t\t\t}\n\t\t}\n\t\treturn false;\n\t},\n});\n\nexport const ItemSpan = StaticSelectField({\n\tname: \"itemSpan\",\n\ttitle: \"Itemspan\",\n\tparentField: \"widgetAttrs\",\n\tdata: [\n\t\t\"\",\n\t\t...Array(12)\n\t\t\t.fill()\n\t\t\t.map((_, i) => (i + 1).toString()),\n\t],\n\tmodelType: MODEL_TYPE.CUSTOM,\n\tdependModelType: MODEL_TYPE.CUSTOM,\n\tgetOptionLabel: (option) => {\n\t\treturn option ? option.toString() : \"\";\n\t},\n\tisDisabled: ({ properties, parentPanel }) => {\n\t\tif (\n\t\t\tparentPanel &&\n\t\t\t[TYPE.toolbar, TYPE.menubar].includes(parentPanel.serverType)\n\t\t) {\n\t\t\treturn true;\n\t\t}\n\t\treturn false;\n\t},\n});\n\nexport const IsGenerateMenu = BooleanField(isGenerateMenu);\n\nexport const MenuBuilderTitle = StringField({\n\tname: \"menuBuilderTitle\",\n\ttitle: \"Menu title\",\n\tdepends: \"isGenerateMenu\",\n\tdependValue: true,\n\trequiredWhen: [isGenerateMenu],\n});\n\nexport const MenuBuilderParent = ObjectSelectionField({\n\tname: \"menuBuilderParent\",\n\tref: \"com.axelor.meta.db.MetaMenu\",\n\ttitle: \"Parent\",\n\tdepends: \"isGenerateMenu\",\n\tdependValue: true,\n\tvalueField: \"id\",\n\tdisplayField: \"title\",\n\tshouldFetchInStart: true,\n\tlimit: null,\n\tgetOptionLabel: (option, data) => {\n\t\treturn getMenuBuilderTitle(option, data);\n\t},\n});\n\nexport const ShowTitle = BooleanField({\n\tname: \"showTitle\",\n\tparentField: \"widgetAttrs\",\n\tdefaultValue: true,\n\tmodelType: MODEL_TYPE.CUSTOM,\n\tdependModelType: MODEL_TYPE.CUSTOM,\n\ttitle: \"Show title\",\n});\n\nexport const CanSearch = BooleanField({\n\tname: \"canSearch\",\n\tdependModelType: MODEL_TYPE.CUSTOM,\n\ttitle: \"Can search\",\n});\n\nexport const IfModule = StringField({\n\tname: \"if-module\",\n\ttitle: \"If-module\",\n\tdependModelType: MODEL_TYPE.CUSTOM,\n});\n\nexport const Height = StringField({\n\tname: \"height\",\n\tdependModelType: MODEL_TYPE.CUSTOM,\n});\n\nexport const Action = SelectField({\n\tname: \"action\",\n\ttitle: \"Action\",\n\tref: \"com.axelor.meta.db.MetaAction\",\n\trequiredFor: [\"panel-dashlet\", \"item\"],\n\tdependModelType: MODEL_TYPE.CUSTOM,\n\tmultiple: true,\n\tcommaSeparated: true,\n\tcanAddNew: true,\n});\n\nexport const Field = StringField({\n\tname: \"field\",\n\ttitle: \"Field\",\n\trequired: true,\n\trequiredFor: [\"panel-related\"],\n\tdependModelType: MODEL_TYPE.CUSTOM,\n});\n\nexport const CanMove = BooleanField({\n\tname: \"canMove\",\n\tdependModelType: MODEL_TYPE.CUSTOM,\n\ttitle: \"Can move\",\n});\n\nexport const OrderBy = StringField({\n\tname: \"orderBy\",\n\tdependModelType: MODEL_TYPE.CUSTOM,\n\ttitle: \"Order by\",\n});\n\nexport const IncludeView = SelectField({\n\tname: \"view\",\n\ttitle: \"View\",\n\tref: \"com.axelor.meta.db.MetaView\",\n\tvalueField: \"name\",\n\trequiredFor: [\"panel-include\"],\n\tdependModelType: MODEL_TYPE.CUSTOM,\n});\n\nexport const IncludeFrom = StringField({\n\tname: \"from\",\n\ttitle: \"From\",\n});\n\nexport const Sidebar = BooleanField({\n\tname: \"sidebar\",\n\ttitle: \"Sidebar\",\n\tparentField: \"widgetAttrs\",\n\tmodelType: MODEL_TYPE.CUSTOM,\n\tdependModelType: MODEL_TYPE.CUSTOM,\n\tshowInCustomField: false,\n\tisDisabled: ({ mainItems, id }) => {\n\t\treturn mainItems.length === 1 && mainItems[0] === id;\n\t},\n\tisHidden: ({ parentPanel }) => {\n\t\treturn parentPanel ? true : false;\n\t},\n});\n\nexport const Password = BooleanField({\n\tname: \"password\",\n\ttitle: \"Password\",\n});\n\nexport const Model = SelectField({\n\tname: \"model\",\n\ttitle: \"Model\",\n\trequired: true,\n\tref: \"com.axelor.meta.db.MetaModel\",\n\tvalueField: \"fullName\",\n});\n\nexport const Color = StaticSelectField({\n\tname: \"color\",\n\ttitle: \"Color\",\n\tdata: [\"default\", \"primary\", \"warning\", \"success\", \"danger\", \"info\"],\n});\n\nexport const Background = StaticSelectField({\n\tname: \"background\",\n\ttitle: \"Background\",\n\tdata: [\"default\", \"primary\", \"warning\", \"success\", \"danger\", \"info\"],\n});\n\nexport const Strong = BooleanField({\n\tname: \"strong\",\n\ttitle: \"Strong\",\n\tdependModelType: MODEL_TYPE.BASE,\n});\n\nexport default {\n\tName,\n\tType,\n\tTitle,\n\tDefaultValue,\n\tStudioApp,\n\tHelp,\n\tSequence,\n\tRoles,\n\tValueExpression,\n\tSelection,\n\tWidget,\n\tOnChange,\n\tMin,\n\tMax,\n\tJsonRelationalField,\n\tDomain,\n\tTargetJsonModel,\n\tTargetModel,\n\tGridView,\n\tFormView,\n\tRequired,\n\tColumnSequence,\n\tReadOnly,\n\tHidden,\n\tVisibleInGrid,\n\tShowIf,\n\tHideIf,\n\tRequiredIf,\n\tReadOnlyIf,\n\tIncludeIf,\n\tValidIf,\n\tOnlyIf,\n\tColSpan,\n\tShowTitle,\n\tOnNew,\n\tOnLoad,\n\tOnSave,\n\tEditable,\n\tDummyType,\n\tIfModule,\n\tAction,\n\tHeight,\n\tCanSearch,\n\tField,\n\tCanMove,\n\tOrderBy,\n\tIncludeFrom,\n\tIncludeView,\n\tPassword,\n\tImage,\n\tIsGenerateMenu,\n\tMenuBuilderParent,\n\tMenuBuilderTitle,\n\tModel,\n\tColor,\n\tStrong,\n\tBackground,\n\tItemSpan,\n\tCss,\n};\n","export const getMenuBuilderTitle = (option, data) => {\n\tlet text = option.title || \"\";\n\tif (option.parent) {\n\t\tconst parent = data.find((item) => item.id === option.parent.id);\n\t\tif (parent) {\n\t\t\tconst parentText = getMenuBuilderTitle(\n\t\t\t\tparent,\n\t\t\t\t(data && data.filter((f) => f.id !== parent.id)) || []\n\t\t\t);\n\t\t\tif (parentText) {\n\t\t\t\ttext = `${parentText} > ${text}`;\n\t\t\t}\n\t\t}\n\t}\n\treturn text;\n};\n","/** Set field types */\nexport const StringField = ({ ...props }) => ({\n\ttype: \"string\",\n\t...props,\n});\n\nexport const ObjectSelectionField = ({ ...props }) => ({\n\ttype: \"objectSelection\",\n\t...props,\n});\n\nexport const IntegerField = ({ ...props }) => ({\n\ttype: \"integer\",\n\t...props,\n});\n\nexport const SelectField = ({ ...props }) => ({\n\ttype: \"select\",\n\tvalueField: \"name\",\n\t...props,\n});\n\nexport const StaticSelectField = ({ ...props }) => ({\n\ttype: \"staticSelect\",\n\t...props,\n});\n\nexport const BooleanField = ({ ...props }) => ({\n\ttype: \"boolean\",\n\t...props,\n});\n\nexport default {\n\tStringField,\n\tObjectSelectionField,\n\tIntegerField,\n\tSelectField,\n\tStaticSelectField,\n\tBooleanField,\n};\n","const fontAwesome = [\n\t\"fa-500px\",\n\t\"fa-address-book\",\n\t\"fa-address-book-o\",\n\t\"fa-address-card\",\n\t\"fa-address-card-o\",\n\t\"fa-adjust\",\n\t\"fa-adn\",\n\t\"fa-align-center\",\n\t\"fa-align-justify\",\n\t\"fa-align-left\",\n\t\"fa-align-right\",\n\t\"fa-amazon\",\n\t\"fa-ambulance\",\n\t\"fa-american-sign-language-interpreting\",\n\t\"fa-anchor\",\n\t\"fa-android\",\n\t\"fa-angellist\",\n\t\"fa-angle-double-down\",\n\t\"fa-angle-double-left\",\n\t\"fa-angle-double-right\",\n\t\"fa-angle-double-up\",\n\t\"fa-angle-down\",\n\t\"fa-angle-left\",\n\t\"fa-angle-right\",\n\t\"fa-angle-up\",\n\t\"fa-apple\",\n\t\"fa-archive\",\n\t\"fa-area-chart\",\n\t\"fa-arrow-circle-down\",\n\t\"fa-arrow-circle-left\",\n\t\"fa-arrow-circle-o-down\",\n\t\"fa-arrow-circle-o-left\",\n\t\"fa-arrow-circle-o-right\",\n\t\"fa-arrow-circle-o-up\",\n\t\"fa-arrow-circle-right\",\n\t\"fa-arrow-circle-up\",\n\t\"fa-arrow-down\",\n\t\"fa-arrow-left\",\n\t\"fa-arrow-right\",\n\t\"fa-arrow-up\",\n\t\"fa-arrows\",\n\t\"fa-arrows-alt\",\n\t\"fa-arrows-h\",\n\t\"fa-arrows-v\",\n\t\"fa-asl-interpreting\",\n\t\"fa-assistive-listening-systems\",\n\t\"fa-asterisk\",\n\t\"fa-at\",\n\t\"fa-audio-description\",\n\t\"fa-automobile\",\n\t\"fa-backward\",\n\t\"fa-balance-scale\",\n\t\"fa-ban\",\n\t\"fa-bandcamp\",\n\t\"fa-bank\",\n\t\"fa-bar-chart\",\n\t\"fa-bar-chart-o\",\n\t\"fa-barcode\",\n\t\"fa-bars\",\n\t\"fa-bath\",\n\t\"fa-bathtub\",\n\t\"fa-battery\",\n\t\"fa-battery-0\",\n\t\"fa-battery-1\",\n\t\"fa-battery-2\",\n\t\"fa-battery-3\",\n\t\"fa-battery-4\",\n\t\"fa-battery-empty\",\n\t\"fa-battery-full\",\n\t\"fa-battery-half\",\n\t\"fa-battery-quarter\",\n\t\"fa-battery-three-quarters\",\n\t\"fa-bed\",\n\t\"fa-beer\",\n\t\"fa-behance\",\n\t\"fa-behance-square\",\n\t\"fa-bell\",\n\t\"fa-bell-o\",\n\t\"fa-bell-slash\",\n\t\"fa-bell-slash-o\",\n\t\"fa-bicycle\",\n\t\"fa-binoculars\",\n\t\"fa-birthday-cake\",\n\t\"fa-bitbucket\",\n\t\"fa-bitbucket-square\",\n\t\"fa-bitcoin\",\n\t\"fa-black-tie\",\n\t\"fa-blind\",\n\t\"fa-bluetooth\",\n\t\"fa-bluetooth-b\",\n\t\"fa-bold\",\n\t\"fa-bolt\",\n\t\"fa-bomb\",\n\t\"fa-book\",\n\t\"fa-bookmark\",\n\t\"fa-bookmark-o\",\n\t\"fa-braille\",\n\t\"fa-briefcase\",\n\t\"fa-btc\",\n\t\"fa-bug\",\n\t\"fa-building\",\n\t\"fa-building-o\",\n\t\"fa-bullhorn\",\n\t\"fa-bullseye\",\n\t\"fa-bus\",\n\t\"fa-buysellads\",\n\t\"fa-cab\",\n\t\"fa-calculator\",\n\t\"fa-calendar\",\n\t\"fa-calendar-check-o\",\n\t\"fa-calendar-minus-o\",\n\t\"fa-calendar-o\",\n\t\"fa-calendar-plus-o\",\n\t\"fa-calendar-times-o\",\n\t\"fa-camera\",\n\t\"fa-camera-retro\",\n\t\"fa-car\",\n\t\"fa-caret-down\",\n\t\"fa-caret-left\",\n\t\"fa-caret-right\",\n\t\"fa-caret-square-o-down\",\n\t\"fa-caret-square-o-left\",\n\t\"fa-caret-square-o-right\",\n\t\"fa-caret-square-o-up\",\n\t\"fa-caret-up\",\n\t\"fa-cart-arrow-down\",\n\t\"fa-cart-plus\",\n\t\"fa-cc\",\n\t\"fa-cc-amex\",\n\t\"fa-cc-diners-club\",\n\t\"fa-cc-discover\",\n\t\"fa-cc-jcb\",\n\t\"fa-cc-mastercard\",\n\t\"fa-cc-paypal\",\n\t\"fa-cc-stripe\",\n\t\"fa-cc-visa\",\n\t\"fa-certificate\",\n\t\"fa-chain\",\n\t\"fa-chain-broken\",\n\t\"fa-check\",\n\t\"fa-check-circle\",\n\t\"fa-check-circle-o\",\n\t\"fa-check-square\",\n\t\"fa-check-square-o\",\n\t\"fa-chevron-circle-down\",\n\t\"fa-chevron-circle-left\",\n\t\"fa-chevron-circle-right\",\n\t\"fa-chevron-circle-up\",\n\t\"fa-chevron-down\",\n\t\"fa-chevron-left\",\n\t\"fa-chevron-right\",\n\t\"fa-chevron-up\",\n\t\"fa-child\",\n\t\"fa-chrome\",\n\t\"fa-circle\",\n\t\"fa-circle-o\",\n\t\"fa-circle-o-notch\",\n\t\"fa-circle-thin\",\n\t\"fa-clipboard\",\n\t\"fa-clock-o\",\n\t\"fa-clone\",\n\t\"fa-close\",\n\t\"fa-cloud\",\n\t\"fa-cloud-download\",\n\t\"fa-cloud-upload\",\n\t\"fa-cny\",\n\t\"fa-code\",\n\t\"fa-code-fork\",\n\t\"fa-codepen\",\n\t\"fa-codiepie\",\n\t\"fa-coffee\",\n\t\"fa-cog\",\n\t\"fa-cogs\",\n\t\"fa-columns\",\n\t\"fa-comment\",\n\t\"fa-comment-o\",\n\t\"fa-commenting\",\n\t\"fa-commenting-o\",\n\t\"fa-comments\",\n\t\"fa-comments-o\",\n\t\"fa-compass\",\n\t\"fa-compress\",\n\t\"fa-connectdevelop\",\n\t\"fa-contao\",\n\t\"fa-copy\",\n\t\"fa-copyright\",\n\t\"fa-creative-commons\",\n\t\"fa-credit-card\",\n\t\"fa-credit-card-alt\",\n\t\"fa-crop\",\n\t\"fa-crosshairs\",\n\t\"fa-css3\",\n\t\"fa-cube\",\n\t\"fa-cubes\",\n\t\"fa-cut\",\n\t\"fa-cutlery\",\n\t\"fa-dashboard\",\n\t\"fa-dashcube\",\n\t\"fa-database\",\n\t\"fa-deaf\",\n\t\"fa-deafness\",\n\t\"fa-dedent\",\n\t\"fa-delicious\",\n\t\"fa-desktop\",\n\t\"fa-deviantart\",\n\t\"fa-diamond\",\n\t\"fa-digg\",\n\t\"fa-dollar\",\n\t\"fa-dot-circle-o\",\n\t\"fa-download\",\n\t\"fa-dribbble\",\n\t\"fa-drivers-license\",\n\t\"fa-drivers-license-o\",\n\t\"fa-dropbox\",\n\t\"fa-drupal\",\n\t\"fa-edge\",\n\t\"fa-edit\",\n\t\"fa-eercast\",\n\t\"fa-eject\",\n\t\"fa-ellipsis-h\",\n\t\"fa-ellipsis-v\",\n\t\"fa-empire\",\n\t\"fa-envelope\",\n\t\"fa-envelope-o\",\n\t\"fa-envelope-open\",\n\t\"fa-envelope-open-o\",\n\t\"fa-envelope-square\",\n\t\"fa-envira\",\n\t\"fa-eraser\",\n\t\"fa-etsy\",\n\t\"fa-eur\",\n\t\"fa-euro\",\n\t\"fa-exchange\",\n\t\"fa-exclamation\",\n\t\"fa-exclamation-circle\",\n\t\"fa-exclamation-triangle\",\n\t\"fa-expand\",\n\t\"fa-expeditedssl\",\n\t\"fa-external-link\",\n\t\"fa-external-link-square\",\n\t\"fa-eye\",\n\t\"fa-eye-slash\",\n\t\"fa-eyedropper\",\n\t\"fa-fa\",\n\t\"fa-facebook\",\n\t\"fa-facebook-f\",\n\t\"fa-facebook-official\",\n\t\"fa-facebook-square\",\n\t\"fa-fast-backward\",\n\t\"fa-fast-forward\",\n\t\"fa-fax\",\n\t\"fa-feed\",\n\t\"fa-female\",\n\t\"fa-fighter-jet\",\n\t\"fa-file\",\n\t\"fa-file-archive-o\",\n\t\"fa-file-audio-o\",\n\t\"fa-file-code-o\",\n\t\"fa-file-excel-o\",\n\t\"fa-file-image-o\",\n\t\"fa-file-movie-o\",\n\t\"fa-file-o\",\n\t\"fa-file-pdf-o\",\n\t\"fa-file-photo-o\",\n\t\"fa-file-picture-o\",\n\t\"fa-file-powerpoint-o\",\n\t\"fa-file-sound-o\",\n\t\"fa-file-text\",\n\t\"fa-file-text-o\",\n\t\"fa-file-video-o\",\n\t\"fa-file-word-o\",\n\t\"fa-file-zip-o\",\n\t\"fa-files-o\",\n\t\"fa-film\",\n\t\"fa-filter\",\n\t\"fa-fire\",\n\t\"fa-fire-extinguisher\",\n\t\"fa-firefox\",\n\t\"fa-first-order\",\n\t\"fa-flag\",\n\t\"fa-flag-checkered\",\n\t\"fa-flag-o\",\n\t\"fa-flash\",\n\t\"fa-flask\",\n\t\"fa-flickr\",\n\t\"fa-floppy-o\",\n\t\"fa-folder\",\n\t\"fa-folder-o\",\n\t\"fa-folder-open\",\n\t\"fa-folder-open-o\",\n\t\"fa-font\",\n\t\"fa-font-awesome\",\n\t\"fa-fonticons\",\n\t\"fa-fort-awesome\",\n\t\"fa-forumbee\",\n\t\"fa-forward\",\n\t\"fa-foursquare\",\n\t\"fa-free-code-camp\",\n\t\"fa-frown-o\",\n\t\"fa-futbol-o\",\n\t\"fa-gamepad\",\n\t\"fa-gavel\",\n\t\"fa-gbp\",\n\t\"fa-ge\",\n\t\"fa-gear\",\n\t\"fa-gears\",\n\t\"fa-genderless\",\n\t\"fa-get-pocket\",\n\t\"fa-gg\",\n\t\"fa-gg-circle\",\n\t\"fa-gift\",\n\t\"fa-git\",\n\t\"fa-git-square\",\n\t\"fa-github\",\n\t\"fa-github-alt\",\n\t\"fa-github-square\",\n\t\"fa-gitlab\",\n\t\"fa-gittip\",\n\t\"fa-glass\",\n\t\"fa-glide\",\n\t\"fa-glide-g\",\n\t\"fa-globe\",\n\t\"fa-google\",\n\t\"fa-google-plus\",\n\t\"fa-google-plus-circle\",\n\t\"fa-google-plus-official\",\n\t\"fa-google-plus-square\",\n\t\"fa-google-wallet\",\n\t\"fa-graduation-cap\",\n\t\"fa-gratipay\",\n\t\"fa-grav\",\n\t\"fa-group\",\n\t\"fa-h-square\",\n\t\"fa-hacker-news\",\n\t\"fa-hand-grab-o\",\n\t\"fa-hand-lizard-o\",\n\t\"fa-hand-o-down\",\n\t\"fa-hand-o-left\",\n\t\"fa-hand-o-right\",\n\t\"fa-hand-o-up\",\n\t\"fa-hand-paper-o\",\n\t\"fa-hand-peace-o\",\n\t\"fa-hand-pointer-o\",\n\t\"fa-hand-rock-o\",\n\t\"fa-hand-scissors-o\",\n\t\"fa-hand-spock-o\",\n\t\"fa-hand-stop-o\",\n\t\"fa-handshake-o\",\n\t\"fa-hard-of-hearing\",\n\t\"fa-hashtag\",\n\t\"fa-hdd-o\",\n\t\"fa-header\",\n\t\"fa-headphones\",\n\t\"fa-heart\",\n\t\"fa-heart-o\",\n\t\"fa-heartbeat\",\n\t\"fa-history\",\n\t\"fa-home\",\n\t\"fa-hospital-o\",\n\t\"fa-hotel\",\n\t\"fa-hourglass\",\n\t\"fa-hourglass-1\",\n\t\"fa-hourglass-2\",\n\t\"fa-hourglass-3\",\n\t\"fa-hourglass-end\",\n\t\"fa-hourglass-half\",\n\t\"fa-hourglass-o\",\n\t\"fa-hourglass-start\",\n\t\"fa-houzz\",\n\t\"fa-html5\",\n\t\"fa-i-cursor\",\n\t\"fa-id-badge\",\n\t\"fa-id-card\",\n\t\"fa-id-card-o\",\n\t\"fa-ils\",\n\t\"fa-image\",\n\t\"fa-imdb\",\n\t\"fa-inbox\",\n\t\"fa-indent\",\n\t\"fa-industry\",\n\t\"fa-info\",\n\t\"fa-info-circle\",\n\t\"fa-inr\",\n\t\"fa-instagram\",\n\t\"fa-institution\",\n\t\"fa-internet-explorer\",\n\t\"fa-intersex\",\n\t\"fa-ioxhost\",\n\t\"fa-italic\",\n\t\"fa-joomla\",\n\t\"fa-jpy\",\n\t\"fa-jsfiddle\",\n\t\"fa-key\",\n\t\"fa-keyboard-o\",\n\t\"fa-krw\",\n\t\"fa-language\",\n\t\"fa-laptop\",\n\t\"fa-lastfm\",\n\t\"fa-lastfm-square\",\n\t\"fa-leaf\",\n\t\"fa-leanpub\",\n\t\"fa-legal\",\n\t\"fa-lemon-o\",\n\t\"fa-level-down\",\n\t\"fa-level-up\",\n\t\"fa-life-bouy\",\n\t\"fa-life-buoy\",\n\t\"fa-life-ring\",\n\t\"fa-life-saver\",\n\t\"fa-lightbulb-o\",\n\t\"fa-line-chart\",\n\t\"fa-link\",\n\t\"fa-linkedin\",\n\t\"fa-linkedin-square\",\n\t\"fa-linode\",\n\t\"fa-linux\",\n\t\"fa-list\",\n\t\"fa-list-alt\",\n\t\"fa-list-ol\",\n\t\"fa-list-ul\",\n\t\"fa-location-arrow\",\n\t\"fa-lock\",\n\t\"fa-long-arrow-down\",\n\t\"fa-long-arrow-left\",\n\t\"fa-long-arrow-right\",\n\t\"fa-long-arrow-up\",\n\t\"fa-low-vision\",\n\t\"fa-magic\",\n\t\"fa-magnet\",\n\t\"fa-mail-forward\",\n\t\"fa-mail-reply\",\n\t\"fa-mail-reply-all\",\n\t\"fa-male\",\n\t\"fa-map\",\n\t\"fa-map-marker\",\n\t\"fa-map-o\",\n\t\"fa-map-pin\",\n\t\"fa-map-signs\",\n\t\"fa-mars\",\n\t\"fa-mars-double\",\n\t\"fa-mars-stroke\",\n\t\"fa-mars-stroke-h\",\n\t\"fa-mars-stroke-v\",\n\t\"fa-maxcdn\",\n\t\"fa-meanpath\",\n\t\"fa-medium\",\n\t\"fa-medkit\",\n\t\"fa-meetup\",\n\t\"fa-meh-o\",\n\t\"fa-mercury\",\n\t\"fa-microchip\",\n\t\"fa-microphone\",\n\t\"fa-microphone-slash\",\n\t\"fa-minus\",\n\t\"fa-minus-circle\",\n\t\"fa-minus-square\",\n\t\"fa-minus-square-o\",\n\t\"fa-mixcloud\",\n\t\"fa-mobile\",\n\t\"fa-mobile-phone\",\n\t\"fa-modx\",\n\t\"fa-money\",\n\t\"fa-moon-o\",\n\t\"fa-mortar-board\",\n\t\"fa-motorcycle\",\n\t\"fa-mouse-pointer\",\n\t\"fa-music\",\n\t\"fa-navicon\",\n\t\"fa-neuter\",\n\t\"fa-newspaper-o\",\n\t\"fa-object-group\",\n\t\"fa-object-ungroup\",\n\t\"fa-odnoklassniki\",\n\t\"fa-odnoklassniki-square\",\n\t\"fa-opencart\",\n\t\"fa-openid\",\n\t\"fa-opera\",\n\t\"fa-optin-monster\",\n\t\"fa-outdent\",\n\t\"fa-pagelines\",\n\t\"fa-paint-brush\",\n\t\"fa-paper-plane\",\n\t\"fa-paper-plane-o\",\n\t\"fa-paperclip\",\n\t\"fa-paragraph\",\n\t\"fa-paste\",\n\t\"fa-pause\",\n\t\"fa-pause-circle\",\n\t\"fa-pause-circle-o\",\n\t\"fa-paw\",\n\t\"fa-paypal\",\n\t\"fa-pencil\",\n\t\"fa-pencil-square\",\n\t\"fa-pencil-square-o\",\n\t\"fa-percent\",\n\t\"fa-phone\",\n\t\"fa-phone-square\",\n\t\"fa-photo\",\n\t\"fa-picture-o\",\n\t\"fa-pie-chart\",\n\t\"fa-pied-piper\",\n\t\"fa-pied-piper-alt\",\n\t\"fa-pied-piper-pp\",\n\t\"fa-pinterest\",\n\t\"fa-pinterest-p\",\n\t\"fa-pinterest-square\",\n\t\"fa-plane\",\n\t\"fa-play\",\n\t\"fa-play-circle\",\n\t\"fa-play-circle-o\",\n\t\"fa-plug\",\n\t\"fa-plus\",\n\t\"fa-plus-circle\",\n\t\"fa-plus-square\",\n\t\"fa-plus-square-o\",\n\t\"fa-podcast\",\n\t\"fa-power-off\",\n\t\"fa-print\",\n\t\"fa-product-hunt\",\n\t\"fa-puzzle-piece\",\n\t\"fa-qq\",\n\t\"fa-qrcode\",\n\t\"fa-question\",\n\t\"fa-question-circle\",\n\t\"fa-question-circle-o\",\n\t\"fa-quora\",\n\t\"fa-quote-left\",\n\t\"fa-quote-right\",\n\t\"fa-ra\",\n\t\"fa-random\",\n\t\"fa-ravelry\",\n\t\"fa-rebel\",\n\t\"fa-recycle\",\n\t\"fa-reddit\",\n\t\"fa-reddit-alien\",\n\t\"fa-reddit-square\",\n\t\"fa-refresh\",\n\t\"fa-registered\",\n\t\"fa-remove\",\n\t\"fa-renren\",\n\t\"fa-reorder\",\n\t\"fa-repeat\",\n\t\"fa-reply\",\n\t\"fa-reply-all\",\n\t\"fa-resistance\",\n\t\"fa-retweet\",\n\t\"fa-rmb\",\n\t\"fa-road\",\n\t\"fa-rocket\",\n\t\"fa-rotate-left\",\n\t\"fa-rotate-right\",\n\t\"fa-rouble\",\n\t\"fa-rss\",\n\t\"fa-rss-square\",\n\t\"fa-rub\",\n\t\"fa-ruble\",\n\t\"fa-rupee\",\n\t\"fa-s15\",\n\t\"fa-safari\",\n\t\"fa-save\",\n\t\"fa-scissors\",\n\t\"fa-scribd\",\n\t\"fa-search\",\n\t\"fa-search-minus\",\n\t\"fa-search-plus\",\n\t\"fa-sellsy\",\n\t\"fa-send\",\n\t\"fa-send-o\",\n\t\"fa-server\",\n\t\"fa-share\",\n\t\"fa-share-alt\",\n\t\"fa-share-alt-square\",\n\t\"fa-share-square\",\n\t\"fa-share-square-o\",\n\t\"fa-shekel\",\n\t\"fa-sheqel\",\n\t\"fa-shield\",\n\t\"fa-ship\",\n\t\"fa-shirtsinbulk\",\n\t\"fa-shopping-bag\",\n\t\"fa-shopping-basket\",\n\t\"fa-shopping-cart\",\n\t\"fa-shower\",\n\t\"fa-sign-in\",\n\t\"fa-sign-language\",\n\t\"fa-sign-out\",\n\t\"fa-signal\",\n\t\"fa-signing\",\n\t\"fa-simplybuilt\",\n\t\"fa-sitemap\",\n\t\"fa-skyatlas\",\n\t\"fa-skype\",\n\t\"fa-slack\",\n\t\"fa-sliders\",\n\t\"fa-slideshare\",\n\t\"fa-smile-o\",\n\t\"fa-snapchat\",\n\t\"fa-snapchat-ghost\",\n\t\"fa-snapchat-square\",\n\t\"fa-snowflake-o\",\n\t\"fa-soccer-ball-o\",\n\t\"fa-sort\",\n\t\"fa-sort-alpha-asc\",\n\t\"fa-sort-alpha-desc\",\n\t\"fa-sort-amount-asc\",\n\t\"fa-sort-amount-desc\",\n\t\"fa-sort-asc\",\n\t\"fa-sort-desc\",\n\t\"fa-sort-down\",\n\t\"fa-sort-numeric-asc\",\n\t\"fa-sort-numeric-desc\",\n\t\"fa-sort-up\",\n\t\"fa-soundcloud\",\n\t\"fa-space-shuttle\",\n\t\"fa-spinner\",\n\t\"fa-spoon\",\n\t\"fa-spotify\",\n\t\"fa-square\",\n\t\"fa-square-o\",\n\t\"fa-stack-exchange\",\n\t\"fa-stack-overflow\",\n\t\"fa-star\",\n\t\"fa-star-half\",\n\t\"fa-star-half-empty\",\n\t\"fa-star-half-full\",\n\t\"fa-star-half-o\",\n\t\"fa-star-o\",\n\t\"fa-steam\",\n\t\"fa-steam-square\",\n\t\"fa-step-backward\",\n\t\"fa-step-forward\",\n\t\"fa-stethoscope\",\n\t\"fa-sticky-note\",\n\t\"fa-sticky-note-o\",\n\t\"fa-stop\",\n\t\"fa-stop-circle\",\n\t\"fa-stop-circle-o\",\n\t\"fa-street-view\",\n\t\"fa-strikethrough\",\n\t\"fa-stumbleupon\",\n\t\"fa-stumbleupon-circle\",\n\t\"fa-subscript\",\n\t\"fa-subway\",\n\t\"fa-suitcase\",\n\t\"fa-sun-o\",\n\t\"fa-superpowers\",\n\t\"fa-superscript\",\n\t\"fa-support\",\n\t\"fa-table\",\n\t\"fa-tablet\",\n\t\"fa-tachometer\",\n\t\"fa-tag\",\n\t\"fa-tags\",\n\t\"fa-tasks\",\n\t\"fa-taxi\",\n\t\"fa-telegram\",\n\t\"fa-television\",\n\t\"fa-tencent-weibo\",\n\t\"fa-terminal\",\n\t\"fa-text-height\",\n\t\"fa-text-width\",\n\t\"fa-th\",\n\t\"fa-th-large\",\n\t\"fa-th-list\",\n\t\"fa-themeisle\",\n\t\"fa-thermometer\",\n\t\"fa-thermometer-0\",\n\t\"fa-thermometer-1\",\n\t\"fa-thermometer-2\",\n\t\"fa-thermometer-3\",\n\t\"fa-thermometer-4\",\n\t\"fa-thermometer-empty\",\n\t\"fa-thermometer-full\",\n\t\"fa-thermometer-half\",\n\t\"fa-thermometer-quarter\",\n\t\"fa-thermometer-three-quarters\",\n\t\"fa-thumb-tack\",\n\t\"fa-thumbs-down\",\n\t\"fa-thumbs-o-down\",\n\t\"fa-thumbs-o-up\",\n\t\"fa-thumbs-up\",\n\t\"fa-ticket\",\n\t\"fa-times\",\n\t\"fa-times-circle\",\n\t\"fa-times-circle-o\",\n\t\"fa-times-rectangle\",\n\t\"fa-times-rectangle-o\",\n\t\"fa-tint\",\n\t\"fa-toggle-down\",\n\t\"fa-toggle-left\",\n\t\"fa-toggle-off\",\n\t\"fa-toggle-on\",\n\t\"fa-toggle-right\",\n\t\"fa-toggle-up\",\n\t\"fa-trademark\",\n\t\"fa-train\",\n\t\"fa-transgender\",\n\t\"fa-transgender-alt\",\n\t\"fa-trash\",\n\t\"fa-trash-o\",\n\t\"fa-tree\",\n\t\"fa-trello\",\n\t\"fa-tripadvisor\",\n\t\"fa-trophy\",\n\t\"fa-truck\",\n\t\"fa-try\",\n\t\"fa-tty\",\n\t\"fa-tumblr\",\n\t\"fa-tumblr-square\",\n\t\"fa-turkish-lira\",\n\t\"fa-tv\",\n\t\"fa-twitch\",\n\t\"fa-twitter\",\n\t\"fa-twitter-square\",\n\t\"fa-umbrella\",\n\t\"fa-underline\",\n\t\"fa-undo\",\n\t\"fa-universal-access\",\n\t\"fa-university\",\n\t\"fa-unlink\",\n\t\"fa-unlock\",\n\t\"fa-unlock-alt\",\n\t\"fa-unsorted\",\n\t\"fa-upload\",\n\t\"fa-usb\",\n\t\"fa-usd\",\n\t\"fa-user\",\n\t\"fa-user-circle\",\n\t\"fa-user-circle-o\",\n\t\"fa-user-md\",\n\t\"fa-user-o\",\n\t\"fa-user-plus\",\n\t\"fa-user-secret\",\n\t\"fa-user-times\",\n\t\"fa-users\",\n\t\"fa-vcard\",\n\t\"fa-vcard-o\",\n\t\"fa-venus\",\n\t\"fa-venus-double\",\n\t\"fa-venus-mars\",\n\t\"fa-viacoin\",\n\t\"fa-viadeo\",\n\t\"fa-viadeo-square\",\n\t\"fa-video-camera\",\n\t\"fa-vimeo\",\n\t\"fa-vimeo-square\",\n\t\"fa-vine\",\n\t\"fa-vk\",\n\t\"fa-volume-control-phone\",\n\t\"fa-volume-down\",\n\t\"fa-volume-off\",\n\t\"fa-volume-up\",\n\t\"fa-warning\",\n\t\"fa-wechat\",\n\t\"fa-weibo\",\n\t\"fa-weixin\",\n\t\"fa-whatsapp\",\n\t\"fa-wheelchair\",\n\t\"fa-wheelchair-alt\",\n\t\"fa-wifi\",\n\t\"fa-wikipedia-w\",\n\t\"fa-window-close\",\n\t\"fa-window-close-o\",\n\t\"fa-window-maximize\",\n\t\"fa-window-minimize\",\n\t\"fa-window-restore\",\n\t\"fa-windows\",\n\t\"fa-won\",\n\t\"fa-wordpress\",\n\t\"fa-wpbeginner\",\n\t\"fa-wpexplorer\",\n\t\"fa-wpforms\",\n\t\"fa-wrench\",\n\t\"fa-xing\",\n\t\"fa-xing-square\",\n\t\"fa-y-combinator\",\n\t\"fa-y-combinator-square\",\n\t\"fa-yahoo\",\n\t\"fa-yc\",\n\t\"fa-yc-square\",\n\t\"fa-yelp\",\n\t\"fa-yen\",\n\t\"fa-yoast\",\n\t\"fa-youtube\",\n\t\"fa-youtube-play\",\n\t\"fa-youtube-square\",\n];\n\nexport default fontAwesome;\n","// TYPE define all elements\nexport const TYPE = {\n\tpanel: \"panel\",\n\ttabs: \"panel-tabs\",\n\tfield: \"field\",\n\tdumpField: \"dump_field\",\n\tform: \"form\",\n\tpanelStack: \"panel-stack\",\n\tpanelDashlet: \"panel-dashlet\",\n\tpanelRelated: \"panel-related\",\n\tpanelInclude: \"panel-include\",\n\tmenu: \"menu\",\n\tmenuItem: \"item\",\n\tdivider: \"divider\",\n\tmenubar: \"menubar\",\n\ttoolbar: \"toolbar\",\n};\n\nexport const ItemTypes = {\n\tCONTAINER: \"panel\",\n\tROOTCONTAINER: \"root-container\",\n\tITEM: \"item\",\n\tDUMMY: \"dummy\",\n};\n\n// FIELD_TYPE define all field types(manage on server end)\nexport const FIELD_TYPE = {\n\tstring: \"string\",\n\tnumber: \"number\",\n\tbutton: \"button\",\n\tspacer: \"spacer\",\n\tboolean: \"boolean\",\n\tseparator: \"separator\",\n\thilite: \"hilite\",\n};\n\n// Panel Container Types\nexport const PANEL_TYPE = {\n\tstack: \"stack\",\n\tflow: \"flow\",\n\tgrid: \"grid\",\n\tcustom: \"custom\",\n};\n\n// define Grid Size constants\nexport const GRID_SIZE = {\n\tmax: 12,\n};\n\n// contains all unique ids for special widgets\nexport const IDS = {\n\tcreateWidgets: {\n\t\ttabs: Symbol(),\n\t\tpanel: Symbol(),\n\t\tfield: Symbol(),\n\t},\n\tform: -1,\n\tcustomForm: -2,\n\tdumpField: 0,\n};\n\nexport const PANEL_PROPS = {\n\tcolSpan: 12,\n\tcols: 12,\n\tid: IDS.createWidgets.panel,\n\timage: \"panel.png\",\n\titems: [],\n\tlayout: \"grid\",\n\tmappedBy: undefined,\n\tmodel: \"com.axelor.meta.db.MetaJsonRecord\",\n\tmodelField: \"attrs\",\n\trelationship: undefined,\n\ttitle: undefined,\n\ttype: ItemTypes.CONTAINER,\n\twidgetAttrs: JSON.stringify({\n\t\tshowTitle: \"false\",\n\t}),\n};\n\nexport const relationalFields = {\n\tOneToMany: \"one-to-many\",\n\tManyToMany: \"many-to-many\",\n\tManyToOne: \"many-to-one\",\n\tOneToOne: \"one-to-one\",\n};\n\nexport const typeReplacer = {\n\tinclude: TYPE.panelInclude,\n\tMANY_TO_MANY: \"many-to-many\",\n\tMANY_TO_ONE: \"many-to-one\",\n\tONE_TO_ONE: \"one-to-one\",\n\tONE_TO_MANY: \"one-to-many\",\n};\n\nexport const MODEL_TYPE = {\n\tBASE: \"BASE\",\n\tCUSTOM: \"CUSTOM\",\n};\n\nexport const ENTITY_TYPE = {\n\tMETA: \"META\",\n};\n\nexport const DEFAULT_VALUE = {\n\tshowTitle: true,\n\treadonly: false,\n\trequired: false,\n\thidden: false,\n\tsidebar: false,\n\tcanCollapse: false,\n\tstacked: false,\n\tcanMove: false,\n\tcanSearch: false,\n\tmultiline: false,\n};\n\nexport const DataTypes = [\n\t\"string\",\n\t\"integer\",\n\t\"decimal\",\n\t\"boolean\",\n\t\"datetime\",\n\t\"date\",\n\t\"time\",\n\t\"many-to-one\",\n\t\"one-to-many\",\n\t\"many-to-many\",\n];\n\nexport const conditionProperties = {\n\treadonlyIf: \"readonly\",\n\trequiredIf: \"required\",\n\thideIf: \"hidden\",\n\tcollapseIf: \"canCollapse\",\n};\n\nexport const otherNoQuoteProps = [\n\t\"value:add\",\n\t\"value:del\",\n\t\"refresh\",\n\t\"active\",\n];\n\nexport const ACTIONS ={\n\tMODEL: 0,\n\tGLOBAL: 1,\n\tOTHER: 2,\n}\n","import { conditionProperties } from \"../constants\";\nimport AxelorService from \"./../services/axelor.rest\";\nimport Utils, { generateCustomModelSchema, getMenuBuilder } from \"./../utils\";\n\nexport const metaJsonFieldService = new AxelorService({\n\tmodel: \"com.axelor.meta.db.MetaJsonField\",\n});\nexport const metaModelService = new AxelorService({\n\tmodel: \"com.axelor.meta.db.MetaJsonModel\",\n});\nconst appStudioService = new AxelorService({\n\tmodel: \"com.axelor.studio.db.AppStudio\",\n});\nconst appUserService = new AxelorService({ model: \"com.axelor.auth.db.User\" });\n\nconst metaViewService = new AxelorService({\n\tmodel: \"com.axelor.meta.db.MetaView\",\n});\nexport const modelService = new AxelorService({\n\tmodel: \"com.axelor.meta.db.MetaModel\",\n});\n\nexport const metaAttrsService = new AxelorService({\n\tmodel: \"com.axelor.meta.db.MetaAttrs\",\n});\n\nexport const metaSelectService = new AxelorService({\n\tmodel: \"com.axelor.meta.db.MetaSelect\",\n});\n\nexport const selectionBuilderService = new AxelorService({\n\tmodel: \"com.axelor.studio.db.StudioSelection\",\n});\n\nexport const metaTranslationService = new AxelorService({\n\tmodel: \"com.axelor.meta.db.MetaTranslation\",\n});\n\nexport async function getCustomModel(options) {\n\tconst result = await metaModelService.search(options);\n\tconst { data = [] } = result;\n\treturn data[0];\n}\n\nexport function fetchCustomFields(modelField, model) {\n\tconst _domain = `self.jsonModel = null and self.modelField='${modelField.name}' and self.model='${model.fullName}'`;\n\treturn metaJsonFieldService.search({\n\t\tdata: { _domain },\n\t\tsortBy: [\"sequence\"],\n\t});\n}\n\n/**\n * selection fields are needs to be save seperately to save selections\n */\nexport async function saveCustomModel(model) {\n\tif (!model) return;\n\tconst res = await metaModelService.save(model);\n\tconst { data, status } = res || {};\n\tif (status === -1) {\n\t\treturn res;\n\t}\n\tconst { fields } = (data && data[0]) || {};\n\tconst getFields = (all) => {\n\t\tconst fields = all\n\t\t\t.map((res) => {\n\t\t\t\tconst { data = [] } = res;\n\t\t\t\tif (data[0]) {\n\t\t\t\t\treturn { id: data[0].id, $version: data[0].version };\n\t\t\t\t}\n\t\t\t\treturn undefined;\n\t\t\t})\n\t\t\t.filter((e) => e);\n\t\treturn fields;\n\t};\n\tconst response = await Promise.all(\n\t\tmodel.fields.map((field) => {\n\t\t\tconst updatedField = fields && fields.find((f) => f.name === field.name);\n\t\t\treturn metaJsonFieldService.save({\n\t\t\t\t...field,\n\t\t\t\tid: updatedField?.id,\n\t\t\t\tversion: updatedField?.version,\n\t\t\t});\n\t\t})\n\t);\n\tconst updatedFields = getFields(response);\n\treturn {\n\t\tdata: [\n\t\t\t{\n\t\t\t\t...((data && data[0]) || {}),\n\t\t\t\tfields: updatedFields,\n\t\t\t},\n\t\t],\n\t};\n}\n\nexport function fetchJSONFields(ids, update, record = {}) {\n\tconst criteria = [];\n\tif (ids.length) {\n\t\tcriteria.push({ fieldName: \"id\", operator: \"in\", value: ids });\n\n\t\tconst data = {\n\t\t\tcriteria,\n\t\t};\n\t\tmetaJsonFieldService.search({ data, sortBy: [\"sequence\"] }).then((res) => {\n\t\t\tif (res.data) {\n\t\t\t\tconst list = res.data || [];\n\t\t\t\tconst schema = generateCustomModelSchema(list, record);\n\t\t\t\tupdate((draft) => {\n\t\t\t\t\tdraft.items = list.filter((l) => l.type === \"panel\").map((e) => e.id);\n\t\t\t\t\tdraft.widgets = {\n\t\t\t\t\t\t...schema.widgets,\n\t\t\t\t\t};\n\t\t\t\t\tdraft.items = schema.items;\n\t\t\t\t});\n\t\t\t}\n\t\t});\n\t} else {\n\t\tupdate((draft) => {\n\t\t\tdraft.widgets = {\n\t\t\t\t\"-1\": {\n\t\t\t\t\ttype: \"form\",\n\t\t\t\t\t...record,\n\t\t\t\t\t...getMenuBuilder(record ? record.studioMenu : undefined),\n\t\t\t\t},\n\t\t\t\t0: { type: \"dump_field\", name: \"\" },\n\t\t\t};\n\t\t\tdraft.items = [];\n\t\t\tdraft.loader = false;\n\t\t});\n\t}\n}\n\nexport function removeCustomModel(model) {\n\treturn metaModelService.removeAll([model]);\n}\n\nexport async function getEnableAppBuilder() {\n\tconst payload = {\n\t\tdata: {\n\t\t\t_domain: \"self.app.code = :code\",\n\t\t\t_domainContext: { code: \"studio\" },\n\t\t},\n\t\tfields: [\"enableStudioApp\"],\n\t\tlimit: 1,\n\t\toffset: 0,\n\t};\n\tconst studioResult = await appStudioService.search({ ...payload });\n\tif (\n\t\tArray.isArray(studioResult && studioResult.data) &&\n\t\tstudioResult.data[0]\n\t) {\n\t\treturn studioResult.data[0].enableStudioApp;\n\t}\n\treturn false;\n}\n\nexport async function generateMenuChange(customModel) {\n\tconst _context = {\n\t\t_model: \"com.axelor.meta.db.MetaJsonModel\",\n\t\t_id: null,\n\t\t...customModel,\n\t};\n\tconst changeAction =\n\t\t\"action-studio-json-model-method-isgeneratemenu-onchange\";\n\tconst data = {\n\t\taction: changeAction,\n\t\tmodel: \"com.axelor.meta.db.MetaJsonModel\",\n\t\tdata: {\n\t\t\tcontext: _context,\n\t\t},\n\t};\n\treturn await metaModelService.action(data);\n}\n\nexport async function fetchCustomModel(modelId, handleError = () => {}) {\n\tconst result = await metaModelService.fetch(modelId, {\n\t\trelated: {\n\t\t\tstudioMenu: [\"title\", \"parentMenu\"],\n\t\t},\n\t});\n\tif (result?.status === -1) {\n\t\thandleError(result.data || {});\n\t\treturn;\n\t}\n\tconst { data = [] } = result || {};\n\treturn data[0];\n}\n\nexport async function fetchViews(view) {\n\tconst viewCriteria = {\n\t\toperator: \"and\",\n\t\tcriteria: [{ fieldName: \"name\", operator: \"=\", value: `${view.name}` }],\n\t};\n\tconst viewList = await metaViewService.search({ data: viewCriteria });\n\tlet views;\n\tif (viewList.data) {\n\t\tviews = Utils.getViews(viewList.data, view.name);\n\t}\n\treturn views;\n}\n\nexport async function fetchModelFields(model) {\n\tif (!model || (model && (!model.packageName || !model.name))) return [];\n\tlet fields = [];\n\tconst _data = {\n\t\t_domain: `self.packageName = '${model.packageName}' and self.name = '${model.name}'`,\n\t};\n\tconst result = await modelService.search({ data: _data });\n\tif (result.data && result.data[0]) {\n\t\tconst record = result.data[0];\n\t\tconst data = {\n\t\t\tfields: [\"metaFields\"],\n\t\t\trelated: {\n\t\t\t\tmetaFields: [\n\t\t\t\t\t\"typeName\",\n\t\t\t\t\t\"label\",\n\t\t\t\t\t\"mappedBy\",\n\t\t\t\t\t\"relationship\",\n\t\t\t\t\t\"name\",\n\t\t\t\t\t\"packageName\",\n\t\t\t\t\t\"typeName\",\n\t\t\t\t],\n\t\t\t},\n\t\t};\n\t\tconst modelData = await modelService.fetch(record.id, data);\n\n\t\tif (modelData && modelData.data[0]) {\n\t\t\tfields = modelData.data[0].metaFields;\n\t\t\treturn fields;\n\t\t}\n\t}\n\treturn fields;\n}\n\nexport async function fetchAttrsList({ model, view }) {\n\tconst criteria = [\n\t\t{ fieldName: \"model\", operator: \"=\", value: model },\n\t\t{ fieldName: \"view\", operator: \"=\", value: view },\n\t];\n\tconst result = await metaAttrsService.search({\n\t\tdata: { criteria },\n\t\tlimit: null,\n\t});\n\tif (result.data && Array.isArray(result.data)) {\n\t\tconst conditionPropertiesKeys = Object.keys(conditionProperties);\n\t\tconst conditionPropertiesValues = Object.values(conditionProperties);\n\n\t\tconst data = [...result.data].map((item) => {\n\t\t\tif (conditionPropertiesValues.includes(item.name)) {\n\t\t\t\tif (item.value.startsWith('\"') && item.value.endsWith('\"')) {\n\t\t\t\t\titem.value = item.value.replace(`\"`, \"\");\n\t\t\t\t\titem.value = item.value.replace(`\"`, \"\");\n\t\t\t\t} else {\n\t\t\t\t\tif (![\"true\", \"false\"].includes(item.value)) {\n\t\t\t\t\t\titem.name =\n\t\t\t\t\t\t\tconditionPropertiesKeys[\n\t\t\t\t\t\t\t\tconditionPropertiesValues.indexOf(item.name)\n\t\t\t\t\t\t\t];\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t} else {\n\t\t\t\titem.value = item.value.replace(`\"`, \"\");\n\t\t\t\titem.value = item.value.replace(`\"`, \"\");\n\t\t\t}\n\t\t\treturn item;\n\t\t});\n\t\treturn data;\n\t}\n\treturn [];\n}\n\nexport async function saveAttrsList(list, handleError = () => {}) {\n\tconst result = await metaAttrsService.saveAll([...list]);\n\n\tif (result?.status === -1) {\n\t\thandleError(result.data || {});\n\t\treturn [];\n\t}\n\tif (result.data && Array.isArray(result.data)) {\n\t\treturn result.data;\n\t}\n\treturn [];\n}\n\nexport async function deleteAttrsList(list, handleError = () => {}) {\n\tconst result = await metaAttrsService.removeAll(list);\n\tif (result?.status === -1) {\n\t\thandleError(result.data || {});\n\t\treturn [];\n\t}\n\tif (result.data && Array.isArray(result.data)) {\n\t\treturn result.data;\n\t}\n\treturn [];\n}\n\nexport async function fetchLanguages() {\n\tconst criteria = [\n\t\t{ fieldName: \"name\", operator: \"=\", value: \"select.language\" },\n\t];\n\tconst result = await metaSelectService.search({\n\t\tdata: { criteria },\n\t\tfields: [\"items.value\", \"items.title\"],\n\t});\n\tif (result && result.data && Array.isArray(result.data)) {\n\t\treturn result.data.map((d) => {\n\t\t\treturn { title: d[\"items.title\"], value: d[\"items.value\"] };\n\t\t});\n\t}\n\treturn [];\n}\n\nexport async function getTranslationList(keyList) {\n\tconst criteria = [{ fieldName: \"key\", operator: \"in\", value: keyList }];\n\tconst result = await metaTranslationService.search({ data: { criteria } });\n\tif (result.data && Array.isArray(result.data)) {\n\t\treturn result.data;\n\t}\n\treturn [];\n}\n\nexport async function saveTranslationList(list, handleError = () => {}) {\n\tconst result = await metaTranslationService.saveAll([...list]);\n\tif (result?.status === -1) {\n\t\thandleError(result.data || {});\n\t\treturn [];\n\t}\n\tif (result.data && Array.isArray(result.data)) {\n\t\treturn result.data;\n\t}\n\treturn [];\n}\n\nexport async function deleteTranslationList(list, handleError = () => {}) {\n\tconst result = await metaTranslationService.removeAll(list);\n\tif (result?.status === -1) {\n\t\thandleError(result.data || {});\n\t\treturn [];\n\t}\n\tif (result.data && Array.isArray(result.data)) {\n\t\treturn result.data;\n\t}\n\treturn [];\n}\n\nexport async function fetchUserPreferences() {\n\tconst userInfo = await appUserService.info();\n\tif (userInfo && userInfo[\"user.id\"]) {\n\t\tconst userResponse = await appUserService.fetch(userInfo[\"user.id\"], {\n\t\t\tfields: [\"theme\"],\n\t\t});\n\t\tif (userResponse && userResponse.data && userResponse.data[0]) {\n\t\t\treturn userResponse.data[0];\n\t\t}\n\t}\n\treturn null;\n}\n\nexport async function getSelectionText(metaSelect) {\n\tlet selectionText = \"\";\n\tif (metaSelect) {\n\t\tconst context = {\n\t\t\tmetaSelect: {\n\t\t\t\t...metaSelect,\n\t\t\t},\n\t\t};\n\t\tconst payloadData = {\n\t\t\tdata: { context },\n\t\t\taction: \"action-studio-selection-method-fill-selection-text\",\n\t\t\tmodel: \"com.axelor.studio.db.StudioSelection\",\n\t\t};\n\t\tconst actionResponse = await selectionBuilderService.action(payloadData);\n\t\tconst { data = [] } = actionResponse;\n\t\tif (data[0]) {\n\t\t\tconst _properties = data[0].values || {};\n\t\t\tif (_properties.selectionText) {\n\t\t\t\tselectionText = _properties.selectionText;\n\t\t\t}\n\t\t}\n\t}\n\treturn selectionText;\n}\n","export function getScrollParent(element, includeHidden = false) {\n\tvar style = getComputedStyle(element);\n\tvar excludeStaticParent = style.position === \"absolute\";\n\tvar overflowRegex = includeHidden ? /(auto|scroll|hidden)/ : /(auto|scroll)/;\n\n\tif (style.position === \"fixed\") return document.body;\n\tfor (var parent = element; (parent = parent.parentElement); ) {\n\t\tstyle = getComputedStyle(parent);\n\t\tif (excludeStaticParent && style.position === \"static\") {\n\t\t\tcontinue;\n\t\t}\n\t\tif (overflowRegex.test(style.overflow + style.overflowY + style.overflowX))\n\t\t\treturn parent;\n\t}\n\n\treturn document.body;\n}\n\nexport function customScrollTo(element) {\n\tconst scrollableParent = getScrollParent(element);\n\tif (scrollableParent) {\n\t\twindow.requestAnimationFrame(() => {\n\t\t\tscrollableParent.scrollTo({\n\t\t\t\ttop: element.offsetTop + 14, //14 is top padding of div\n\t\t\t\tbehavior: \"smooth\",\n\t\t\t});\n\t\t});\n\t}\n}\n","import React, { useRef, useEffect } from \"react\";\nimport CircularProgress from \"@material-ui/core/CircularProgress\";\nimport { makeStyles } from \"@material-ui/core/styles\";\nimport classNames from \"classnames\";\n\nimport { Widget, Form } from \"../components\";\nimport { IDS, MODEL_TYPE } from \"../constants\";\nimport { useStore } from \"../store/context\";\nimport { customScrollTo } from \"./utils\";\n\nconst useStyles = makeStyles({\n\tuiContainer: {\n\t\tdisplay: \"flex\",\n\t\tflexDirection: \"column\",\n\t\talignSelf: \"baseline\",\n\t},\n\tcontainer: {\n\t\tdisplay: \"flex\",\n\t\tflexDirection: \"column\",\n\t\theight: \"fit-content\",\n\t\tposition: \"relative\",\n\t},\n\tloaderContainer: {\n\t\tdisplay: \"flex\",\n\t\tflexDirection: \"column\",\n\t\tjustifyContent: \"center\",\n\t\theight: \"100%\",\n\t\tposition: \"absolute\",\n\t\tzIndex: 1000,\n\t\tborder: \"0px\",\n\t\tbackgroundColor: \"rgba(0,0,0,0.05)\",\n\t\tbottom: 0,\n\t\ttop: 0,\n\t\tleft: 0,\n\t\tright: 0,\n\t\talignItems: \"center\",\n\t},\n\temptyFormInfo: {\n\t\tminHeight: \"24vh !important\",\n\t},\n});\n// Render Main Form UI View\nfunction FormViewUI({ design }) {\n\tconst store = useStore();\n\tconst classes = useStyles();\n\tconst customPanelRef = useRef(null);\n\tconst {\n\t\twidgets,\n\t\tcustomFieldWidgets,\n\t\tloader,\n\t\terrorList,\n\t\tmodelField,\n\t\tmodelType,\n\t} = store.state;\n\tconst formInfo = (store.state.widgets || [])[-1];\n\n\tconst customFieldWidgetsExists = !!customFieldWidgets;\n\tuseEffect(() => {\n\t\tconst grid = customPanelRef.current;\n\t\tif (grid && customFieldWidgetsExists) {\n\t\t\tcustomScrollTo(grid);\n\t\t\tgrid && grid.focus();\n\t\t}\n\t}, [customFieldWidgetsExists]);\n\n\treturn (\n\t\t<div className={classNames(classes.uiContainer)}>\n\t\t\t<div\n\t\t\t\tid=\"form-view\"\n\t\t\t\tclassName={classNames(classes.container, {\n\t\t\t\t\t[classes.emptyFormInfo]: !formInfo && !customFieldWidgets,\n\t\t\t\t})}\n\t\t\t>\n\t\t\t\t{loader && (\n\t\t\t\t\t<div className={classNames(classes.loaderContainer)}>\n\t\t\t\t\t\t<CircularProgress />\n\t\t\t\t\t</div>\n\t\t\t\t)}\n\t\t\t\t{widgets && (\n\t\t\t\t\t<Widget\n\t\t\t\t\t\tindex={0}\n\t\t\t\t\t\tid={IDS.form}\n\t\t\t\t\t\tattrs={store.state.widgets[IDS.form]}\n\t\t\t\t\t\tonSelect={store.onSelect}\n\t\t\t\t\t\t{...{\n\t\t\t\t\t\t\titems: store.state.items,\n\t\t\t\t\t\t\tdragWidget: store.state.dragWidget,\n\t\t\t\t\t\t\thoverWidget: store.state.hoverWidget,\n\t\t\t\t\t\t\teditWidget: store.state.editWidget,\n\t\t\t\t\t\t\twidgets: store.state.widgets,\n\t\t\t\t\t\t\tonSelect: store.onSelect,\n\t\t\t\t\t\t\tonMove: store.onMove,\n\t\t\t\t\t\t\tonDrag: store.onDrag,\n\t\t\t\t\t\t\tonHover: store.onHover,\n\t\t\t\t\t\t\tonWidgetChange: store.onWidgetChange,\n\t\t\t\t\t\t\tsetHoverAttr: store.setHoverAttr,\n\t\t\t\t\t\t\taddTabPanel: store.addTabPanel,\n\t\t\t\t\t\t\tcanRemove: modelType === MODEL_TYPE.BASE ? false : true,\n\t\t\t\t\t\t\tisBase: modelType === MODEL_TYPE.BASE,\n\t\t\t\t\t\t\terrorList,\n\t\t\t\t\t\t}}\n\t\t\t\t\t\tdesign={design}\n\t\t\t\t\t\tcomponent={Form}\n\t\t\t\t\t/>\n\t\t\t\t)}\n\t\t\t\t{customFieldWidgets && (\n\t\t\t\t\t<div\n\t\t\t\t\t\tclassName=\"custom-field-pallett-view\"\n\t\t\t\t\t\tref={customPanelRef}\n\t\t\t\t\t\ttabIndex={1}\n\t\t\t\t\t>\n\t\t\t\t\t\t<div className=\"custom-field-view-header\">\n\t\t\t\t\t\t\t{modelField?.name || \"attrs\"}\n\t\t\t\t\t\t</div>\n\t\t\t\t\t\t<Widget\n\t\t\t\t\t\t\t_type=\"customField\"\n\t\t\t\t\t\t\tindex={0}\n\t\t\t\t\t\t\tid={IDS.customForm}\n\t\t\t\t\t\t\tattrs={store.state.customFieldWidgets[IDS.customForm]}\n\t\t\t\t\t\t\tonSelect={store.onSelect}\n\t\t\t\t\t\t\t{...{\n\t\t\t\t\t\t\t\titems: store.state.customFieldItems,\n\t\t\t\t\t\t\t\tdragWidget: store.state.dragWidget,\n\t\t\t\t\t\t\t\thoverWidget: store.state.hoverWidget,\n\t\t\t\t\t\t\t\teditWidget: store.state.editWidget,\n\t\t\t\t\t\t\t\twidgets: store.state.customFieldWidgets,\n\t\t\t\t\t\t\t\tonSelect: store.onSelect,\n\t\t\t\t\t\t\t\tonMove: store.onMove,\n\t\t\t\t\t\t\t\tonDrag: store.onDrag,\n\t\t\t\t\t\t\t\taddTabPanel: store.addTabPanel,\n\t\t\t\t\t\t\t\tonHover: store.onHover,\n\t\t\t\t\t\t\t\tonWidgetChange: store.onWidgetChange,\n\t\t\t\t\t\t\t\tsetHoverAttr: store.setHoverAttr,\n\t\t\t\t\t\t\t\terrorList,\n\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t\tdesign={design}\n\t\t\t\t\t\t\tcomponent={Form}\n\t\t\t\t\t\t/>\n\t\t\t\t\t</div>\n\t\t\t\t)}\n\t\t\t</div>\n\t\t</div>\n\t);\n}\n\nexport default FormViewUI;\n","import React from \"react\";\nimport classNames from \"classnames\";\nimport Editor from \"./../Editor\";\n\nexport default React.memo(function MainPanel({ toolbarOffset }) {\n\tconst [design] = React.useState(true);\n\n\treturn (\n\t\t<div\n\t\t\tclassName={classNames(\"form-layout-container\", {\n\t\t\t\t\"form-layout-design\": design,\n\t\t\t})}\n\t\t\tstyle={{\n\t\t\t\tdisplay: \"flex\",\n\t\t\t\twidth: \"100%\",\n\t\t\t\theight: `calc(100vh - ${toolbarOffset}px)`,\n\t\t\t\tjustifyContent: \"center\",\n\t\t\t\toverflow: \"auto\",\n\t\t\t\tposition: \"relative\",\n\t\t\t\tpaddingRight: \"1em\",\n\t\t\t}}\n\t\t>\n\t\t\t<Editor design={design} />\n\t\t</div>\n\t);\n});\n","import React from \"react\";\n\nexport function useDebounceEffect(handler, interval) {\n\tconst isMounted = React.useRef(false);\n\tReact.useEffect(() => {\n\t\tif (isMounted.current) {\n\t\t\tconst timer = setTimeout(() => handler(), interval);\n\t\t\treturn () => clearTimeout(timer);\n\t\t}\n\t\tisMounted.current = true;\n\t}, [handler, interval]);\n}\n","import React from \"react\";\nimport { makeStyles } from \"@material-ui/core/styles\";\nimport Button from \"@material-ui/core/Button\";\nimport Grid from \"@material-ui/core/Grid\";\nimport ChevronLeft from \"@material-ui/icons/ChevronLeft\";\nimport ChevronRight from \"@material-ui/icons/ChevronRight\";\nimport Typography from \"@material-ui/core/Typography\";\nimport Dialog from \"@material-ui/core/Dialog\";\nimport DialogActions from \"@material-ui/core/DialogActions\";\nimport DialogContent from \"@material-ui/core/DialogContent\";\nimport DialogTitle from \"@material-ui/core/DialogTitle\";\nimport useMediaQuery from \"@material-ui/core/useMediaQuery\";\nimport List from \"@material-ui/core/List\";\nimport ListItem from \"@material-ui/core/ListItem\";\nimport ListItemText from \"@material-ui/core/ListItemText\";\nimport { useTheme } from \"@material-ui/core/styles\";\nimport IconButton from \"@material-ui/core/IconButton\";\nimport { Search } from \"@material-ui/icons\";\nimport {\n\tTabs,\n\tTab,\n\tCircularProgress,\n\tBox,\n\tInputAdornment,\n\tTextField,\n} from \"@material-ui/core\";\n\nconst useStyles = makeStyles((theme) => ({\n\troot: {\n\t\twidth: \"100%\",\n\t\tbackgroundColor: theme.palette.background.paper,\n\t\theight: 300,\n\t\toverflow: \"auto\",\n\t},\n\tinput: {\n\t\t\"& .MuiOutlinedInput-root\": {\n\t\t\tborderRadius: 20,\n\t\t\t\"& fieldset\": {\n\t\t\t\tborderColor: \"#bdbdbd\",\n\t\t\t},\n\t\t\t\"&:hover fieldset\": {\n\t\t\t\tborderColor: \"#bdbdbd\",\n\t\t\t},\n\t\t\t\"&.Mui-focused fieldset\": {\n\t\t\t\tborderColor: \"#bdbdbd\",\n\t\t\t},\n\t\t},\n\t},\n\ttitleHeader: {\n\t\tborderBottom: \"0.5px solid #ddd\",\n\t},\n\tlistItem: {\n\t\tborderBottom: \"1px solid #ddd\",\n\t\tpaddingTop: 10,\n\t\tpaddingBottom: 10,\n\t},\n\tcloseText: {\n\t\ttextTransform: \"capitalize\",\n\t},\n\ttabContainer: {\n\t\t\"& .MuiTabs-indicator\": {\n\t\t\tbackgroundColor: \"#3f51b5\",\n\t\t},\n\t},\n\tlabelStyle: {\n\t\ttextTransform: \"none\",\n\t},\n\tcenterElement: {\n\t\theight: 300,\n\t\tpadding: \"8px\",\n\t\tdisplay: \"flex\",\n\t\talignItems: \"center\",\n\t\tjustifyContent: \"center\",\n\t},\n}));\n\nconst tabsLabel = [\"Model actions\", \"Global actions\", \"Other actions\"];\n\nfunction TabPanel(props) {\n\tconst { children, value, index, ...other } = props;\n\n\treturn (\n\t\t<div\n\t\t\trole=\"tabpanel\"\n\t\t\thidden={value !== index}\n\t\t\tid={`horizontal-tabpanel-${index}`}\n\t\t\taria-labelledby={`horizontal-tab-${index}`}\n\t\t\t{...other}\n\t\t>\n\t\t\t{value === index && <>{children}</>}\n\t\t</div>\n\t);\n}\n\nexport default function ResponsiveDialog(props) {\n\tconst {\n\t\tlist = [],\n\t\tonChange,\n\t\thandleClose,\n\t\toffset,\n\t\ttotal,\n\t\tdisplayField,\n\t\tgetOptionLabel,\n\t\tisTypeOnClick = false,\n\t\tisDataLoading,\n\t} = props;\n\tconst theme = useTheme();\n\tconst classes = useStyles();\n\tconst fullScreen = useMediaQuery(theme.breakpoints.down(\"sm\"));\n\n\tconst handleItemClick = React.useCallback(\n\t\t(item) => {\n\t\t\tonChange(item);\n\t\t\thandleClose();\n\t\t},\n\t\t[onChange, handleClose]\n\t);\n\n\tconst canNext = list.length > 0 && offset + list.length < total;\n\tconst canPrev = offset > 0;\n\n\tconst getLabel = (item) => {\n\t\treturn getOptionLabel ? getOptionLabel(item) : item[displayField || \"name\"];\n\t};\n\n\treturn (\n\t\t<div>\n\t\t\t<Dialog\n\t\t\t\tfullScreen={fullScreen}\n\t\t\t\tmaxWidth=\"sm\"\n\t\t\t\tfullWidth={true}\n\t\t\t\topen={props.open}\n\t\t\t\tonClose={props.handleClose}\n\t\t\t\taria-labelledby=\"responsive-dialog-title\"\n\t\t\t>\n\t\t\t\t<DialogTitle\n\t\t\t\t\tid=\"responsive-dialog-title\"\n\t\t\t\t\tclassName={classes.titleHeader}\n\t\t\t\t>{`Search ${props.title || \"item\"}`}</DialogTitle>\n\t\t\t\t<DialogContent>\n\t\t\t\t\t<Grid container>\n\t\t\t\t\t\t<Grid container item alignItems=\"center\">\n\t\t\t\t\t\t\t{/* Add tabbed view for distinguising between different types of models */}\n\t\t\t\t\t\t\t<Grid\n\t\t\t\t\t\t\t\titem\n\t\t\t\t\t\t\t\txs={10}\n\t\t\t\t\t\t\t\tstyle={{\n\t\t\t\t\t\t\t\t\tflex: 1,\n\t\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t<TextField\n\t\t\t\t\t\t\t\t\tsize=\"small\"\n\t\t\t\t\t\t\t\t\tfullWidth\n\t\t\t\t\t\t\t\t\tclassName={classes.input}\n\t\t\t\t\t\t\t\t\tvalue={props.searchText}\n\t\t\t\t\t\t\t\t\tvariant=\"outlined\"\n\t\t\t\t\t\t\t\t\tonChange={(e) => props.setSearchText(e.target.value)}\n\t\t\t\t\t\t\t\t\tInputProps={{\n\t\t\t\t\t\t\t\t\t\tstartAdornment: (\n\t\t\t\t\t\t\t\t\t\t\t<InputAdornment position=\"start\">\n\t\t\t\t\t\t\t\t\t\t\t\t<Search style={{ fill: \"#bdbdbd\" }} />\n\t\t\t\t\t\t\t\t\t\t\t</InputAdornment>\n\t\t\t\t\t\t\t\t\t\t),\n\t\t\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t\t\t\tplaceholder={\"Search\"}\n\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t</Grid>\n\t\t\t\t\t\t\t<Grid item>\n\t\t\t\t\t\t\t\t<IconButton onClick={props.onPrevious} disabled={!canPrev}>\n\t\t\t\t\t\t\t\t\t<ChevronLeft />\n\t\t\t\t\t\t\t\t</IconButton>\n\t\t\t\t\t\t\t\t<IconButton onClick={props.onNext} disabled={!canNext}>\n\t\t\t\t\t\t\t\t\t<ChevronRight />\n\t\t\t\t\t\t\t\t</IconButton>\n\t\t\t\t\t\t\t</Grid>\n\t\t\t\t\t\t</Grid>\n\t\t\t\t\t\t{isTypeOnClick && (\n\t\t\t\t\t\t\t<Grid item xs={12}>\n\t\t\t\t\t\t\t\t<Tabs\n\t\t\t\t\t\t\t\t\torientation=\"horizontal\"\n\t\t\t\t\t\t\t\t\tvariant=\"fullWidth\"\n\t\t\t\t\t\t\t\t\tvalue={props.currentTab}\n\t\t\t\t\t\t\t\t\tonChange={props.onTabChange}\n\t\t\t\t\t\t\t\t\tclassName={classes.tabContainer}\n\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t{tabsLabel.map((label, i) => (\n\t\t\t\t\t\t\t\t\t\t<Tab\n\t\t\t\t\t\t\t\t\t\t\tkey={`${i}-${label}`}\n\t\t\t\t\t\t\t\t\t\t\tlabel={label}\n\t\t\t\t\t\t\t\t\t\t\tclassName={classes.labelStyle}\n\t\t\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t\t))}\n\t\t\t\t\t\t\t\t</Tabs>\n\t\t\t\t\t\t\t</Grid>\n\t\t\t\t\t\t)}\n\t\t\t\t\t</Grid>\n\t\t\t\t\t{isDataLoading ? (\n\t\t\t\t\t\t<Box className={classes.centerElement}>\n\t\t\t\t\t\t\t<CircularProgress size={20} />\n\t\t\t\t\t\t</Box>\n\t\t\t\t\t) : list.length !== 0 ? (\n\t\t\t\t\t\t!isTypeOnClick ? (\n\t\t\t\t\t\t\t<List className={classes.root}>\n\t\t\t\t\t\t\t\t{list\n\t\t\t\t\t\t\t\t\t.filter((item) => item.id !== \"studio_show_More_View\")\n\t\t\t\t\t\t\t\t\t.map((item, i) => (\n\t\t\t\t\t\t\t\t\t\t<ListItem\n\t\t\t\t\t\t\t\t\t\t\tclassName={classes.listItem}\n\t\t\t\t\t\t\t\t\t\t\tkey={`${i}-${getLabel(item)}`}\n\t\t\t\t\t\t\t\t\t\t\trole={undefined}\n\t\t\t\t\t\t\t\t\t\t\tdense\n\t\t\t\t\t\t\t\t\t\t\tbutton\n\t\t\t\t\t\t\t\t\t\t\tonClick={() => handleItemClick(item)}\n\t\t\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t\t\t<ListItemText id={i} primary={getLabel(item)} />\n\t\t\t\t\t\t\t\t\t\t</ListItem>\n\t\t\t\t\t\t\t\t\t))}\n\t\t\t\t\t\t\t</List>\n\t\t\t\t\t\t) : (\n\t\t\t\t\t\t\ttabsLabel.map(\n\t\t\t\t\t\t\t\t(_, index) =>\n\t\t\t\t\t\t\t\t\tprops.currentTab === index && (\n\t\t\t\t\t\t\t\t\t\t<Grid item>\n\t\t\t\t\t\t\t\t\t\t\t<TabPanel value={index} index={index}>\n\t\t\t\t\t\t\t\t\t\t\t\t<Grid item>\n\t\t\t\t\t\t\t\t\t\t\t\t\t<List className={classes.root}>\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t{list\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t.filter(\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t(item) => item.id !== \"studio_show_More_View\"\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t)\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t.map((item, i) => (\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<ListItem\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tclassName={classes.listItem}\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tkey={`${i}-${getLabel(item)}`}\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\trole={undefined}\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tdense\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tbutton\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tonClick={() => handleItemClick(item)}\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<ListItemText\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tid={i}\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tprimary={getLabel(item)}\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t</ListItem>\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t))}\n\t\t\t\t\t\t\t\t\t\t\t\t\t</List>\n\t\t\t\t\t\t\t\t\t\t\t\t</Grid>\n\t\t\t\t\t\t\t\t\t\t\t</TabPanel>\n\t\t\t\t\t\t\t\t\t\t</Grid>\n\t\t\t\t\t\t\t\t\t)\n\t\t\t\t\t\t\t)\n\t\t\t\t\t\t)\n\t\t\t\t\t) : (\n\t\t\t\t\t\t<Box className={classes.centerElement}>\n\t\t\t\t\t\t\t<Typography variant=\"body2\">No data found</Typography>\n\t\t\t\t\t\t</Box>\n\t\t\t\t\t)}\n\t\t\t\t</DialogContent>\n\t\t\t\t<DialogActions>\n\t\t\t\t\t<Button autoFocus onClick={props.handleClose} color=\"primary\">\n\t\t\t\t\t\t<Typography className={classes.closeText}>Close</Typography>\n\t\t\t\t\t</Button>\n\t\t\t\t</DialogActions>\n\t\t\t</Dialog>\n\t\t</div>\n\t);\n}\n","import React, { useState, useEffect } from \"react\";\nimport { TextField } from \"@material-ui/core\";\nimport AutoComplete from \"@material-ui/lab/Autocomplete\";\nimport _ from \"lodash\";\nimport { makeStyles } from \"@material-ui/core/styles\";\n\nimport AxelorService from \"./../services/axelor.rest\";\nimport { useDebounceEffect } from \"./../common.func\";\nimport SearchView from \"../components/SearchView\";\nimport { translate } from \"../utils\";\n\nconst useStyles = makeStyles({\n\tautoComplete: {\n\t\t\"& > div > label\": {\n\t\t\tcolor: \"#e7eaec !important\",\n\t\t\tfontSize: 12,\n\t\t},\n\t},\n\tautoCompleteRoot: {\n\t\twidth: 200,\n\t\tmarginLeft: 10,\n\t\tcolor: \"#e7eaec\",\n\t},\n\tinputView: {\n\t\tcolor: \"#fff\",\n\t\tfontSize: 13,\n\t\t\"& > *\": {\n\t\t\tcolor: \"#fff\",\n\t\t},\n\t},\n\tpopperView: {\n\t\t\"& ul, .MuiAutocomplete-noOptions\": {\n\t\t\tbackgroundColor: \"rgb(41, 56, 70) !important\",\n\t\t\t\".modern-dark &\": {\n\t\t\t\tbackgroundColor: \"#1b1b1b !important\",\n\t\t\t},\n\t\t},\n\t\t\"& li, .MuiAutocomplete-noOptions\": {\n\t\t\tcolor: \"#e7eaec !important\",\n\t\t\tbackgroundColor: \"rgb(41, 56, 70) !important\",\n\t\t\t\".modern-dark &\": {\n\t\t\t\tbackgroundColor: \"#1b1b1b !important\",\n\t\t\t},\n\t\t},\n\t\t\"& li:hover, .MuiAutocomplete-noOptions\": {\n\t\t\tcolor: \"#e7eaec !important\",\n\t\t\tbackgroundColor: \"#2f4050 !important\",\n\t\t\t\".modern-dark &\": {\n\t\t\t\tbackgroundColor: \"#323232 !important\",\n\t\t\t},\n\t\t},\n\t\t'& li[data-focus=\"true\"]': {\n\t\t\tbackgroundColor: \"#2f4050 !important\",\n\t\t\t\".modern-dark &\": {\n\t\t\t\tbackgroundColor: \"#323232 !important\",\n\t\t\t},\n\t\t},\n\t},\n\toption: {\n\t\tfontSize: 13,\n\t},\n});\n\nfunction Select({\n\tvalue,\n\tlabel,\n\tmodel,\n\tsearchFilter = () => {},\n\tonChange = () => {},\n\toptions,\n\tfilterData,\n\tlimit = 10,\n\tonSearch,\n\tmodelType,\n\tonClose = () => {},\n\thandleHighlightChange = () => {},\n\thandleOutsideClick = () => {},\n\tgetOptionSelected = (option, value) => option.name === value.name,\n\t...props\n}) {\n\tconst classes = useStyles();\n\tconst [searchText, setSearchText] = useState(\"\");\n\tconst [loading, setLoading] = useState(false);\n\tconst [list, setList] = useState([...(options ? options : [])]);\n\tconst [searchMore, setSearchMore] = useState(false);\n\tconst [offset, setOffset] = useState(0);\n\tconst [total, setTotal] = useState(0);\n\n\tconst search = React.useCallback(\n\t\tasync (searchText = \"\") => {\n\t\t\tif (!props.open)\n\t\t\t\tif (onSearch) {\n\t\t\t\t\tsetLoading(true);\n\t\t\t\t\tconst { models, total } = await onSearch({\n\t\t\t\t\t\tlimit,\n\t\t\t\t\t\tsearchText,\n\t\t\t\t\t\tsearchFilter,\n\t\t\t\t\t\tfilterData,\n\t\t\t\t\t\tmodelType,\n\t\t\t\t\t\toffset,\n\t\t\t\t\t});\n\t\t\t\t\t!searchMore &&\n\t\t\t\t\t\ttotal > limit &&\n\t\t\t\t\t\tmodels.push({\n\t\t\t\t\t\t\tname: translate(\"Show more...\"),\n\t\t\t\t\t\t\tid: \"studio_show_More_View\",\n\t\t\t\t\t\t});\n\t\t\t\t\tconst uniqueList = _.uniqBy(models, \"name\");\n\t\t\t\t\tsetList(uniqueList);\n\t\t\t\t\tsetLoading(false);\n\t\t\t\t\tsetTotal(total);\n\t\t\t\t} else {\n\t\t\t\t\tconst service = new AxelorService({ model });\n\t\t\t\t\tsetLoading(true);\n\t\t\t\t\tconst _data = searchFilter(searchText) || {};\n\t\t\t\t\tconst criteria = [];\n\t\t\t\t\tif (searchText) {\n\t\t\t\t\t\tcriteria.push({\n\t\t\t\t\t\t\tfieldName: \"name\",\n\t\t\t\t\t\t\toperator: \"like\",\n\t\t\t\t\t\t\tvalue: searchText,\n\t\t\t\t\t\t});\n\t\t\t\t\t}\n\t\t\t\t\tconst data = {\n\t\t\t\t\t\t...(_data._domain && { _domain: _data._domain }),\n\t\t\t\t\t\t...(_data._domainContext && {\n\t\t\t\t\t\t\t_domainContext: _data._domainContext,\n\t\t\t\t\t\t}),\n\t\t\t\t\t\tcriteria: [...criteria, ...(_data.criteria || [])],\n\t\t\t\t\t\toperator: \"and\",\n\t\t\t\t\t};\n\t\t\t\t\tconst fields = _data.fields || [];\n\t\t\t\t\tservice\n\t\t\t\t\t\t.search({ fields, data, limit, offset: offset })\n\t\t\t\t\t\t.then((response = {}) => {\n\t\t\t\t\t\t\tconst { data = [], total } = response;\n\t\t\t\t\t\t\tsetLoading(false);\n\t\t\t\t\t\t\tconst list = filterData ? filterData([...data]) : [...data];\n\t\t\t\t\t\t\t!searchMore &&\n\t\t\t\t\t\t\t\ttotal > limit &&\n\t\t\t\t\t\t\t\tlist.push({\n\t\t\t\t\t\t\t\t\tname: translate(\"Show more...\"),\n\t\t\t\t\t\t\t\t\tid: \"studio_show_More_View\",\n\t\t\t\t\t\t\t\t});\n\t\t\t\t\t\t\tsetTotal(total);\n\t\t\t\t\t\t\tconst uniqueList = _.uniqBy(list, \"name\");\n\t\t\t\t\t\t\tsetList(uniqueList);\n\t\t\t\t\t\t});\n\t\t\t\t}\n\t\t},\n\t\t[\n\t\t\tprops.open,\n\t\t\tonSearch,\n\t\t\tlimit,\n\t\t\tsearchFilter,\n\t\t\tfilterData,\n\t\t\tmodelType,\n\t\t\toffset,\n\t\t\tsearchMore,\n\t\t\tmodel,\n\t\t]\n\t);\n\n\t//to render the options in search component on press of Ctrl+F\n\tuseEffect(() => {\n\t\tif (props.open) {\n\t\t\tsetList(options);\n\t\t}\n\t}, [list, options, props.open]);\n\n\tconst handleNext = React.useCallback(() => {\n\t\tconst newOffset = offset + limit;\n\t\tif (newOffset <= total) {\n\t\t\tsetOffset(newOffset);\n\t\t}\n\t}, [limit, total, offset]);\n\n\tconst handlePrevious = React.useCallback(() => {\n\t\tsetOffset((offset) => {\n\t\t\tconst newOffset = offset - limit;\n\t\t\treturn newOffset > 0 ? newOffset : 0;\n\t\t});\n\t}, [limit]);\n\n\tconst debounceHandler = React.useCallback(() => {\n\t\t!options && search(searchText);\n\t}, [searchText, search, options]);\n\n\tconst handleChange = React.useCallback(\n\t\t(e, value) => {\n\t\t\tif (value?.id === \"studio_show_More_View\") {\n\t\t\t\tsetSearchMore(true);\n\t\t\t} else {\n\t\t\t\tonChange(value);\n\t\t\t}\n\t\t},\n\t\t[onChange]\n\t);\n\n\tconst handleTextChange = React.useCallback((value) => {\n\t\tsetSearchText(value);\n\t\tsetOffset(0);\n\t}, []);\n\n\tconst handleClose = React.useCallback(() => {\n\t\tsetSearchMore(false);\n\t\tsetOffset(0);\n\t}, []);\n\n\tuseDebounceEffect(debounceHandler, 500);\n\n\tuseEffect(() => {\n\t\t!options && search();\n\t}, [search, options, model]);\n\n\tuseEffect(() => {\n\t\tif (!value && !props.open) {\n\t\t\tsetSearchText(\"\");\n\t\t}\n\t}, [value, props.open]);\n\n\treturn (\n\t\t<React.Fragment>\n\t\t\t<AutoComplete\n\t\t\t\tclearOnEscape\n\t\t\t\tautoComplete\n\t\t\t\tclasses={{\n\t\t\t\t\troot: classes.autoCompleteRoot,\n\t\t\t\t\tinputFocused: classes.input,\n\t\t\t\t\tclearIndicator: classes.input,\n\t\t\t\t\tpopupIndicator: classes.input,\n\t\t\t\t\tinput: classes.inputView,\n\t\t\t\t\tendAdornment: classes.inputView,\n\t\t\t\t\tpopper: classes.popperView,\n\t\t\t\t\toption: classes.option,\n\t\t\t\t\tnoOptions: classes.option,\n\t\t\t\t}}\n\t\t\t\tsize=\"small\"\n\t\t\t\tclassName={classes.autoComplete}\n\t\t\t\tonInputChange={(e, value) => setSearchText(value)}\n\t\t\t\tonClose={(e, reason) => {\n\t\t\t\t\tif (reason === \"blur\") {\n\t\t\t\t\t\treturn handleOutsideClick(false);\n\t\t\t\t\t}\n\t\t\t\t}}\n\t\t\t\trenderInput={(params) => {\n\t\t\t\t\tparams.inputProps.value = searchText;\n\t\t\t\t\treturn (\n\t\t\t\t\t\t<TextField\n\t\t\t\t\t\t\t{...params}\n\t\t\t\t\t\t\tplaceholder={translate(label)}\n\t\t\t\t\t\t\tfullWidth\n\t\t\t\t\t\t\tautoFocus={props.open}\n\t\t\t\t\t\t/>\n\t\t\t\t\t);\n\t\t\t\t}}\n\t\t\t\toptions={[...list]}\n\t\t\t\tloading={loading}\n\t\t\t\tgetOptionLabel={(option) =>\n\t\t\t\t\ttypeof option === \"string\"\n\t\t\t\t\t\t? option\n\t\t\t\t\t\t: props.getOptionLabel\n\t\t\t\t\t\t? props.getOptionLabel(option)\n\t\t\t\t\t\t: option.name\n\t\t\t\t}\n\t\t\t\tonChange={handleChange}\n\t\t\t\tvalue={value}\n\t\t\t\tgetOptionSelected={getOptionSelected}\n\t\t\t\t{...props}\n\t\t\t/>\n\t\t\t<SearchView\n\t\t\t\tsearchText={searchText}\n\t\t\t\tlist={list}\n\t\t\t\tmodel={model}\n\t\t\t\ttotal={total}\n\t\t\t\toffset={offset}\n\t\t\t\topen={searchMore}\n\t\t\t\tonNext={handleNext}\n\t\t\t\tonPrevious={handlePrevious}\n\t\t\t\thandleClose={handleClose}\n\t\t\t\tsetSearchText={handleTextChange}\n\t\t\t\tonChange={onChange}\n\t\t\t\ttitle={translate(label)}\n\t\t\t\tgetOptionLabel={props.getOptionLabel}\n\t\t\t/>\n\t\t</React.Fragment>\n\t);\n}\n\nexport default React.memo(Select);\n","import { modelService, metaModelService } from \"./api\";\nimport { ENTITY_TYPE, MODEL_TYPE } from \"../constants\";\n\nexport async function modelSearch({\n\tsearchFilter,\n\tlimit,\n\tsearchText,\n\tmodelType,\n\toffset,\n}) {\n\tconst _data = searchFilter(searchText) || {};\n\tconst criteria = [];\n\tif (searchText) {\n\t\tcriteria.push({\n\t\t\tfieldName: \"name\",\n\t\t\toperator: \"like\",\n\t\t\tvalue: searchText,\n\t\t});\n\t}\n\tconst data = {\n\t\t...(_data._domain && { _domain: _data._domain }),\n\t\t...(_data._domainContext && { _domainContext: _data._domainContext }),\n\t\tcriteria: [...criteria, ...(_data.criteria || [])],\n\t\toperator: \"and\",\n\t};\n\tconst fields = _data.fields || [];\n\tconst service =\n\t\tmodelType === MODEL_TYPE.CUSTOM ? metaModelService : modelService;\n\tconst modelResult = await service.search({ fields, data, limit, offset });\n\tconst models = [];\n\tif (modelResult && modelResult.data && Array.isArray(modelResult.data)) {\n\t\tconst list = modelResult.data\n\t\t\t.map((record) => {\n\t\t\t\tconst modelIndex = models.findIndex(\n\t\t\t\t\t(m) => m.name === record.name && m.packageName === record.packageName\n\t\t\t\t);\n\t\t\t\tif (modelIndex === -1 || modelType === MODEL_TYPE.BASE) {\n\t\t\t\t\tif (modelType === MODEL_TYPE.BASE && modelIndex !== -1) {\n\t\t\t\t\t\tmodels.splice(modelIndex, 1);\n\t\t\t\t\t}\n\t\t\t\t\treturn { ...record, entityType: ENTITY_TYPE.META };\n\t\t\t\t} else {\n\t\t\t\t\tmodels.splice(modelIndex, 1, {\n\t\t\t\t\t\t...models[modelIndex],\n\t\t\t\t\t\tactualType: ENTITY_TYPE.META,\n\t\t\t\t\t});\n\t\t\t\t}\n\t\t\t\treturn undefined;\n\t\t\t})\n\t\t\t.filter((e) => e);\n\t\tmodels.push(...list);\n\t}\n\treturn { models, total: modelResult && modelResult.total };\n}\n","import React from \"react\";\n\nimport AxelorService from \"./../services/axelor.rest\";\nimport Utils, { generateCustomModelSchema, translate } from \"./../utils\";\nimport Select from \"./Select\";\nimport { relationalFields, MODEL_TYPE, PANEL_PROPS } from \"./../constants\";\nimport {\n\tfetchCustomFields,\n\tgetEnableAppBuilder,\n\tfetchViews,\n\tfetchAttrsList,\n\tgetTranslationList,\n\tmetaJsonFieldService,\n} from \"./api\";\nimport { modelSearch } from \"./customModelSearch\";\nimport { generateXpath } from \"./../store/xpathGenerator\";\nimport convert from \"xml-js\";\nimport _ from \"lodash\";\n\nconst metaViewService = new AxelorService({\n\tmodel: \"com.axelor.meta.db.MetaView\",\n});\n\nconst modelTypes = [\n\t{ name: translate(\"View\"), value: MODEL_TYPE.BASE },\n\t{ name: translate(\"Custom\"), value: MODEL_TYPE.CUSTOM },\n];\n\nfunction ViewSelection({\n\tmodel,\n\tupdate,\n\tmodelType,\n\tmodelField,\n\tstartLoader,\n\tentityType,\n\tmetaFieldStore,\n\tclearHistory,\n\treset,\n\tselectedView,\n\trunIfConfirmed,\n\tbaseHasChanges,\n\tcustomFieldHasChanges,\n}) {\n\tconst modelName = `com.axelor.meta.db.${\n\t\tmodelType !== MODEL_TYPE.CUSTOM ? \"MetaModel\" : \"MetaJsonModel\"\n\t}`;\n\n\tconst fetchJSONFields = React.useCallback(\n\t\t(ids, record) => {\n\t\t\tconst criteria = [];\n\t\t\tif (ids.length) {\n\t\t\t\tcriteria.push({ fieldName: \"id\", operator: \"in\", value: ids });\n\t\t\t\tconst data = {\n\t\t\t\t\tcriteria,\n\t\t\t\t};\n\t\t\t\tmetaJsonFieldService\n\t\t\t\t\t.search({ data, sortBy: [\"sequence\"] })\n\t\t\t\t\t.then((res) => {\n\t\t\t\t\t\tif (res.data) {\n\t\t\t\t\t\t\tconst list = res.data || [];\n\t\t\t\t\t\t\tconst schema = generateCustomModelSchema(list, record);\n\t\t\t\t\t\t\tupdate((draft) => {\n\t\t\t\t\t\t\t\tdraft.widgets = {\n\t\t\t\t\t\t\t\t\t...schema.widgets,\n\t\t\t\t\t\t\t\t};\n\t\t\t\t\t\t\t\tdraft.items = schema.items;\n\t\t\t\t\t\t\t\tdraft.loader = false;\n\t\t\t\t\t\t\t});\n\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\tupdate((draft) => {\n\t\t\t\t\t\t\t\tdraft.loader = false;\n\t\t\t\t\t\t\t});\n\t\t\t\t\t\t}\n\t\t\t\t\t});\n\t\t\t} else {\n\t\t\t\tconst schema = generateCustomModelSchema([], record);\n\t\t\t\tupdate((draft) => {\n\t\t\t\t\tdraft.widgets = {\n\t\t\t\t\t\t...schema.widgets,\n\t\t\t\t\t};\n\t\t\t\t\tdraft.items = schema.items;\n\t\t\t\t\tdraft.loader = false;\n\t\t\t\t\tdraft.model = record;\n\t\t\t\t\tdraft.customModel = record;\n\t\t\t\t\tdraft.editWidget = -1;\n\t\t\t\t\tdraft.editWidgetType = null;\n\t\t\t\t});\n\t\t\t}\n\t\t},\n\t\t[update]\n\t);\n\n\tconst handleModelSelect = React.useMemo(\n\t\t() =>\n\t\t\trunIfConfirmed(async (model) => {\n\t\t\t\tconst metaModelService = new AxelorService({ model: modelName });\n\t\t\t\tif (!model) {\n\t\t\t\t\tif (modelType === MODEL_TYPE.CUSTOM) {\n\t\t\t\t\t\treset((draft) => clearHistory(draft));\n\t\t\t\t\t\treturn;\n\t\t\t\t\t}\n\t\t\t\t\tupdate((draft) => {\n\t\t\t\t\t\tclearHistory(draft);\n\t\t\t\t\t\tdraft.model = null;\n\t\t\t\t\t\tdraft.customModel = null;\n\t\t\t\t\t\tdraft.items = [];\n\t\t\t\t\t\tdraft.exView = null;\n\t\t\t\t\t\tdraft.view = null;\n\t\t\t\t\t\tdraft.widgets = null;\n\t\t\t\t\t\tdraft.initialItems = null;\n\t\t\t\t\t\tdraft.initialWidgets = null;\n\t\t\t\t\t\tdraft.customFieldWidgets = null;\n\t\t\t\t\t\tdraft.customFieldItems = null;\n\t\t\t\t\t\tdraft.customFields = [];\n\t\t\t\t\t\tdraft.modelField = null;\n\t\t\t\t\t\tdraft.extensionXML = null;\n\t\t\t\t\t\tdraft.extensionView = null;\n\t\t\t\t\t\tdraft.originalXML = null;\n\t\t\t\t\t\tdraft.selectedView = null;\n\t\t\t\t\t\tdraft.metaFields = [];\n\t\t\t\t\t\tdraft.metaFieldStore = [];\n\t\t\t\t\t\tdraft.extensionMoves = [];\n\t\t\t\t\t\tdraft.errorList = {};\n\t\t\t\t\t\tdraft.attrsList = [];\n\t\t\t\t\t\tdraft.translationList = [];\n\t\t\t\t\t\tdraft.initialTranslationList = [];\n\t\t\t\t\t\tdraft.removedTranslationList = [];\n\t\t\t\t\t\tdraft.baseHasChanges = false;\n\t\t\t\t\t\tdraft.customFieldHasChanges = false;\n\t\t\t\t\t\tdraft.highlightedOption = null;\n\t\t\t\t\t});\n\t\t\t\t\treturn;\n\t\t\t\t}\n\t\t\t\tlet data = {\n\t\t\t\t\tfields: [\"metaFields\", \"packageName\", \"name\", \"fullName\"],\n\t\t\t\t\trelated: {\n\t\t\t\t\t\tmetaFields: [\n\t\t\t\t\t\t\t\"typeName\",\n\t\t\t\t\t\t\t\"label\",\n\t\t\t\t\t\t\t\"mappedBy\",\n\t\t\t\t\t\t\t\"relationship\",\n\t\t\t\t\t\t\t\"name\",\n\t\t\t\t\t\t\t\"packageName\",\n\t\t\t\t\t\t],\n\t\t\t\t\t},\n\t\t\t\t};\n\t\t\t\tif (modelType === MODEL_TYPE.CUSTOM) {\n\t\t\t\t\tupdate((draft) => {\n\t\t\t\t\t\tdraft.loader = true;\n\t\t\t\t\t});\n\t\t\t\t\tdata = {\n\t\t\t\t\t\trelated: {\n\t\t\t\t\t\t\tstudioMenu: [\"title\", \"parentMenu\"],\n\t\t\t\t\t\t},\n\t\t\t\t\t};\n\t\t\t\t}\n\t\t\t\tmetaModelService.fetch(model.id, data).then((res) => {\n\t\t\t\t\tif (res.data) {\n\t\t\t\t\t\tconst record = res.data[0];\n\t\t\t\t\t\tconst { fields = [], ...rest } = record;\n\t\t\t\t\t\tupdate((draft) => {\n\t\t\t\t\t\t\tclearHistory(draft);\n\t\t\t\t\t\t\tdraft.model = model;\n\t\t\t\t\t\t\tdraft.entityType = model.entityType;\n\t\t\t\t\t\t\tdraft.widgets = null;\n\t\t\t\t\t\t\tdraft.initialWidgets = null;\n\t\t\t\t\t\t\tdraft.items = [];\n\t\t\t\t\t\t\tdraft.initialItems = null;\n\t\t\t\t\t\t\tdraft.view = null;\n\t\t\t\t\t\t\tdraft.exView = null;\n\t\t\t\t\t\t\tdraft.modelField = null;\n\t\t\t\t\t\t\tdraft.customFields = [];\n\t\t\t\t\t\t\tdraft.customFieldWidgets = null;\n\t\t\t\t\t\t\tdraft.originalXML = null;\n\t\t\t\t\t\t\tdraft.extensionXML = null;\n\t\t\t\t\t\t\tdraft.extensionView = null;\n\t\t\t\t\t\t\tdraft.extensionMoves = [];\n\t\t\t\t\t\t\tdraft.errorList = {};\n\t\t\t\t\t\t\tdraft.attrsList = [];\n\t\t\t\t\t\t\tdraft.translationList = [];\n\t\t\t\t\t\t\tdraft.initialTranslationList = [];\n\t\t\t\t\t\t\tdraft.removedTranslationList = [];\n\t\t\t\t\t\t\tdraft.selectedView = null;\n\t\t\t\t\t\t\tdraft.editWidget = -1;\n\t\t\t\t\t\t\tdraft.editWidgetType = null;\n\t\t\t\t\t\t\tdraft.tabIndex = 0;\n\t\t\t\t\t\t\tdraft.baseHasChanges = false;\n\t\t\t\t\t\t\tdraft.customFieldHasChanges = false;\n\t\t\t\t\t\t\tdraft.highlightedOption = null;\n\t\t\t\t\t\t\tconst _fields = (record.metaFields || []).map((f) => {\n\t\t\t\t\t\t\t\treturn JSON.parse(\n\t\t\t\t\t\t\t\t\tJSON.stringify({\n\t\t\t\t\t\t\t\t\t\t...f,\n\t\t\t\t\t\t\t\t\t\ttype:\n\t\t\t\t\t\t\t\t\t\t\trelationalFields[f.relationship] ||\n\t\t\t\t\t\t\t\t\t\t\t(f.typeName || \"\").toLowerCase(),\n\t\t\t\t\t\t\t\t\t\t...(f.relationship && {\n\t\t\t\t\t\t\t\t\t\t\ttargetModel: `${f.packageName}.${f.typeName}`,\n\t\t\t\t\t\t\t\t\t\t}),\n\t\t\t\t\t\t\t\t\t\tpackageName: undefined,\n\t\t\t\t\t\t\t\t\t})\n\t\t\t\t\t\t\t\t);\n\t\t\t\t\t\t\t});\n\t\t\t\t\t\t\tif (modelType === MODEL_TYPE.BASE) {\n\t\t\t\t\t\t\t\tdraft.metaFieldStore = [..._fields];\n\t\t\t\t\t\t\t\tdraft.metaFields = [..._fields];\n\t\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\t\tfetchJSONFields(\n\t\t\t\t\t\t\t\t\tfields.map((f) => f.id),\n\t\t\t\t\t\t\t\t\trest\n\t\t\t\t\t\t\t\t);\n\t\t\t\t\t\t\t\tdraft.customModel = record;\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t});\n\t\t\t\t\t}\n\t\t\t\t});\n\t\t\t}),\n\t\t[\n\t\t\tupdate,\n\t\t\tmodelName,\n\t\t\tmodelType,\n\t\t\tfetchJSONFields,\n\t\t\tclearHistory,\n\t\t\treset,\n\t\t\trunIfConfirmed,\n\t\t]\n\t);\n\n\tconst doesViewExists = !!selectedView;\n\tconst handleViewSelect = React.useMemo(\n\t\t() =>\n\t\t\trunIfConfirmed(async (view) => {\n\t\t\t\tstartLoader();\n\t\t\t\tif (!view) {\n\t\t\t\t\tupdate((draft) => {\n\t\t\t\t\t\tdoesViewExists && clearHistory(draft);\n\t\t\t\t\t\tdraft.items = [];\n\t\t\t\t\t\tdraft.exView = null;\n\t\t\t\t\t\tdraft.view = null;\n\t\t\t\t\t\tdraft.widgets = null;\n\t\t\t\t\t\tdraft.initialItems = null;\n\t\t\t\t\t\tdraft.initialWidgets = null;\n\t\t\t\t\t\tdraft.extensionXML = null;\n\t\t\t\t\t\tdraft.extensionView = null;\n\t\t\t\t\t\tdraft.originalXML = null;\n\t\t\t\t\t\tdraft.loader = false;\n\t\t\t\t\t\tdraft.metaFields = draft.metaFieldStore;\n\t\t\t\t\t\tdraft.selectedView = null;\n\t\t\t\t\t\tdraft.extensionMoves = [];\n\t\t\t\t\t\tdraft.errorList = {};\n\t\t\t\t\t\tdraft.attrsList = [];\n\t\t\t\t\t\tdraft.translationList = [];\n\t\t\t\t\t\tdraft.initialTranslationList = [];\n\t\t\t\t\t\tdraft.removedTranslationList = [];\n\t\t\t\t\t\tdraft.baseHasChanges = false;\n\t\t\t\t\t});\n\t\t\t\t\treturn;\n\t\t\t\t}\n\t\t\t\tconst views = await fetchViews(view);\n\t\t\t\tconst attrsList = await fetchAttrsList({\n\t\t\t\t\tmodel: model.name,\n\t\t\t\t\tview: view.name,\n\t\t\t\t});\n\t\t\t\tconst schema = Utils.generateXMLToViewSchema({\n\t\t\t\t\tview: views.view,\n\t\t\t\t\tfields: metaFieldStore,\n\t\t\t\t\textensionXML: views.extensionXML,\n\t\t\t\t\tattrsList,\n\t\t\t\t});\n\t\t\t\tconst translationNames = Object.values(schema.widgets)\n\t\t\t\t\t.filter(\n\t\t\t\t\t\t(widget) => widget.title && widget.title.startsWith(\"studio:\")\n\t\t\t\t\t)\n\t\t\t\t\t.map((widget) => widget.title);\n\t\t\t\tconst translationList = await getTranslationList(translationNames);\n\t\t\t\tconst originalViewData = {\n\t\t\t\t\toperator: \"and\",\n\t\t\t\t\tcriteria: [\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\toperator: \"or\",\n\t\t\t\t\t\t\tcriteria: [\n\t\t\t\t\t\t\t\t{ fieldName: \"computed\", operator: \"=\", value: false },\n\t\t\t\t\t\t\t\t{ fieldName: \"computed\", operator: \"isNull\" },\n\t\t\t\t\t\t\t],\n\t\t\t\t\t\t},\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\toperator: \"or\",\n\t\t\t\t\t\t\tcriteria: [\n\t\t\t\t\t\t\t\t{ fieldName: \"extension\", operator: \"=\", value: false },\n\t\t\t\t\t\t\t\t{ fieldName: \"extension\", operator: \"isNull\" },\n\t\t\t\t\t\t\t],\n\t\t\t\t\t\t},\n\t\t\t\t\t\t{ fieldName: \"name\", operator: \"=\", value: `${view.name}` },\n\t\t\t\t\t],\n\t\t\t\t};\n\t\t\t\tmetaViewService.search({ data: originalViewData }).then((res) => {\n\t\t\t\t\tconst { data = [] } = res;\n\t\t\t\t\tif (data[0]) {\n\t\t\t\t\t\tupdate((draft) => {\n\t\t\t\t\t\t\tdraft.originalXML = JSON.parse(\n\t\t\t\t\t\t\t\tconvert.xml2json(data[0].xml, {\n\t\t\t\t\t\t\t\t\tcompact: false,\n\t\t\t\t\t\t\t\t\tfullTagEmptyElement: false,\n\t\t\t\t\t\t\t\t})\n\t\t\t\t\t\t\t);\n\t\t\t\t\t\t});\n\t\t\t\t\t}\n\t\t\t\t});\n\t\t\t\t// fetch studio extension view\n\t\t\t\tconst _viewSearch = {\n\t\t\t\t\t_domain: `self.xmlId = 'studio-${view.name}' and self.extension = true`,\n\t\t\t\t};\n\t\t\t\tconst res = await metaViewService.search({ data: _viewSearch });\n\t\t\t\tconst { data: resData = [] } = res;\n\t\t\t\tconst record = resData[0];\n\t\t\t\tif (record) {\n\t\t\t\t\tupdate((draft) => {\n\t\t\t\t\t\tdraft.extensionView = record;\n\t\t\t\t\t\tdraft.extensionXML = JSON.parse(\n\t\t\t\t\t\t\tconvert.xml2json(record.xml, {\n\t\t\t\t\t\t\t\tcompact: false,\n\t\t\t\t\t\t\t\tfullTagEmptyElement: false,\n\t\t\t\t\t\t\t})\n\t\t\t\t\t\t);\n\t\t\t\t\t});\n\t\t\t\t}\n\t\t\t\tupdate((draft) => {\n\t\t\t\t\tdoesViewExists && clearHistory(draft);\n\t\t\t\t\tdraft.attrsList = attrsList;\n\t\t\t\t\tdraft.translationList = translationList;\n\t\t\t\t\tdraft.initialTranslationList = translationList;\n\t\t\t\t\tdraft.removedTranslationList = [];\n\t\t\t\t\tif (schema) {\n\t\t\t\t\t\tdraft.widgets = schema.widgets;\n\t\t\t\t\t\tdraft.initialWidgets = schema.widgets;\n\t\t\t\t\t\tdraft.items = schema.items;\n\t\t\t\t\t\tdraft.initialItems = schema.items;\n\t\t\t\t\t\tdraft.metaFields = [...draft.metaFieldStore].filter(\n\t\t\t\t\t\t\t(field) =>\n\t\t\t\t\t\t\t\tschema.fieldList.findIndex((f) => f.name === field.name) === -1\n\t\t\t\t\t\t);\n\t\t\t\t\t}\n\t\t\t\t\tdraft.selectedView = view;\n\t\t\t\t\tif (views.view) {\n\t\t\t\t\t\tdraft.view = { fields: draft.metaFields, view: views.view };\n\t\t\t\t\t\tdraft.exView = views.view;\n\t\t\t\t\t}\n\t\t\t\t\tdraft.loader = false;\n\t\t\t\t\tdraft.extensionMoves = [];\n\t\t\t\t\tdraft.errorList = {};\n\t\t\t\t\tdraft.baseHasChanges = false;\n\t\t\t\t\tgenerateXpath(draft);\n\t\t\t\t});\n\t\t\t}, !doesViewExists || !baseHasChanges),\n\t\t[\n\t\t\tupdate,\n\t\t\tstartLoader,\n\t\t\tmetaFieldStore,\n\t\t\tclearHistory,\n\t\t\tmodel,\n\t\t\trunIfConfirmed,\n\t\t\tdoesViewExists,\n\t\t\tbaseHasChanges,\n\t\t]\n\t);\n\n\tconst viewFilter = React.useCallback(() => {\n\t\tlet _domain = `self.type='form'`;\n\t\tlet _model = `${model ? model.fullName : \"\"}`;\n\t\t_domain = `${_domain} and self.model='${_model}' and (self.computed = true OR self.name NOT IN (select meta.name from MetaView meta where meta.computed = true))`;\n\t\treturn {\n\t\t\t_domain,\n\t\t\tfields: [\n\t\t\t\t\"name\",\n\t\t\t\t\"model\",\n\t\t\t\t\"title\",\n\t\t\t\t\"type\",\n\t\t\t\t\"extension\",\n\t\t\t\t\"xmlId\",\n\t\t\t\t\"computed\",\n\t\t\t\t\"xml\",\n\t\t\t],\n\t\t};\n\t}, [model]);\n\n\tconst modelFilter = React.useCallback(() => {\n\t\treturn {\n\t\t\tfields: [\"name\", \"fullName\", \"packageName\"],\n\t\t};\n\t}, []);\n\n\tconst metaFieldFilter = React.useCallback(() => {\n\t\tconst _domain = `self.json = true and self.metaModel.id='${\n\t\t\tmodel ? model.id : -1\n\t\t}'`;\n\t\treturn {\n\t\t\t_domain,\n\t\t\tfields: [\"name\"],\n\t\t};\n\t}, [model]);\n\n\tconst doesModelFieldExists = !!modelField;\n\tconst handleMetaFieldSelect = React.useMemo(\n\t\t() =>\n\t\t\trunIfConfirmed((field) => {\n\t\t\t\tif (field) {\n\t\t\t\t\tfetchCustomFields(field, model).then((res) => {\n\t\t\t\t\t\tconst { data = [] } = res;\n\t\t\t\t\t\tconst schema = generateCustomModelSchema(\n\t\t\t\t\t\t\tdata,\n\t\t\t\t\t\t\tundefined,\n\t\t\t\t\t\t\t\"\",\n\t\t\t\t\t\t\t\"customForm\"\n\t\t\t\t\t\t);\n\t\t\t\t\t\tupdate((draft) => {\n\t\t\t\t\t\t\tdoesModelFieldExists && clearHistory(draft);\n\t\t\t\t\t\t\tconst newId = _.uniqueId();\n\t\t\t\t\t\t\tdraft.customFieldWidgets =\n\t\t\t\t\t\t\t\tObject.keys(schema.widgets)?.length > 2\n\t\t\t\t\t\t\t\t\t? schema.widgets\n\t\t\t\t\t\t\t\t\t: {\n\t\t\t\t\t\t\t\t\t\t\t...schema.widgets,\n\t\t\t\t\t\t\t\t\t\t\t[newId]: {\n\t\t\t\t\t\t\t\t\t\t\t\tname: `panel${newId}`,\n\t\t\t\t\t\t\t\t\t\t\t\t...PANEL_PROPS,\n\t\t\t\t\t\t\t\t\t\t\t\tmodel: draft.model.fullName,\n\t\t\t\t\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t\t\t  };\n\t\t\t\t\t\t\tdraft.customFieldItems =\n\t\t\t\t\t\t\t\tschema.items?.length > 0 ? schema.items : [`${newId}`];\n\t\t\t\t\t\t\tdraft.customFields = data;\n\t\t\t\t\t\t\tdraft.modelField = field;\n\t\t\t\t\t\t\tdraft.customFieldHasChanges = false;\n\t\t\t\t\t\t});\n\t\t\t\t\t});\n\t\t\t\t} else {\n\t\t\t\t\tupdate((draft) => {\n\t\t\t\t\t\tdoesModelFieldExists && clearHistory(draft);\n\t\t\t\t\t\tdraft.customFieldWidgets = null;\n\t\t\t\t\t\tdraft.customFieldItems = null;\n\t\t\t\t\t\tdraft.customFields = [];\n\t\t\t\t\t\tdraft.modelField = field;\n\t\t\t\t\t\tdraft.customFieldHasChanges = false;\n\t\t\t\t\t});\n\t\t\t\t}\n\t\t\t}, !doesModelFieldExists || !customFieldHasChanges),\n\t\t[\n\t\t\tmodel,\n\t\t\tupdate,\n\t\t\trunIfConfirmed,\n\t\t\tdoesModelFieldExists,\n\t\t\tclearHistory,\n\t\t\tcustomFieldHasChanges,\n\t\t]\n\t);\n\n\tconst handleTypeSelect = React.useMemo(\n\t\t() =>\n\t\t\trunIfConfirmed((type) => {\n\t\t\t\tconst { value } = type;\n\t\t\t\tif ([MODEL_TYPE.CUSTOM, MODEL_TYPE.BASE].includes(value)) {\n\t\t\t\t\tgetEnableAppBuilder().then((res) => {\n\t\t\t\t\t\tupdate((draft) => {\n\t\t\t\t\t\t\tdraft.enableStudioApp = res;\n\t\t\t\t\t\t});\n\t\t\t\t\t});\n\t\t\t\t}\n\t\t\t\tconst updater = (draft) => {\n\t\t\t\t\tdraft.modelType = type ? type.value : null;\n\t\t\t\t\tdraft.entityType = null;\n\t\t\t\t\tdraft.initialWidgets = null;\n\t\t\t\t\tdraft.initialItems = null;\n\t\t\t\t\tdraft.modelField = null;\n\t\t\t\t\tdraft.customFields = [];\n\t\t\t\t\tdraft.customFieldWidgets = null;\n\t\t\t\t\tdraft.metaFieldStore = [];\n\t\t\t\t\tdraft.extensionMoves = [];\n\t\t\t\t\tdraft.removedTranslationList = [];\n\t\t\t\t\tdraft.baseHasChanges = false;\n\t\t\t\t\tdraft.customFieldHasChanges = false;\n\t\t\t\t\tclearHistory(draft);\n\t\t\t\t};\n\t\t\t\tif (value === MODEL_TYPE.CUSTOM) {\n\t\t\t\t\treset(updater);\n\t\t\t\t\treturn;\n\t\t\t\t}\n\t\t\t\tupdate((draft) => {\n\t\t\t\t\tclearHistory(draft);\n\t\t\t\t\tupdater(draft);\n\t\t\t\t\tdraft.model = null;\n\t\t\t\t\tdraft.customModel = null;\n\t\t\t\t\tdraft.widgets = null;\n\t\t\t\t\tdraft.items = [];\n\t\t\t\t\tdraft.view = null;\n\t\t\t\t\tdraft.exView = null;\n\t\t\t\t\tdraft.metaFields = [];\n\t\t\t\t\tdraft.metaFields = [];\n\t\t\t\t\tdraft.selectedView = null;\n\t\t\t\t\tdraft.errorList = {};\n\t\t\t\t\tdraft.attrsList = [];\n\t\t\t\t\tdraft.translationList = [];\n\t\t\t\t\tdraft.initialTranslationList = [];\n\t\t\t\t\tdraft.baseHasChanges = false;\n\t\t\t\t\tdraft.customFieldHasChanges = false;\n\t\t\t\t});\n\t\t\t}),\n\t\t[update, reset, clearHistory, runIfConfirmed]\n\t);\n\n\tconst handleViewFilterData = React.useCallback((list) => {\n\t\tconst newList = list.filter((view) => {\n\t\t\tif (!view.computed) {\n\t\t\t\tconst index = list.findIndex((e) => e.name === view.name && e.computed);\n\t\t\t\tif (index !== -1) {\n\t\t\t\t\treturn false;\n\t\t\t\t}\n\t\t\t}\n\t\t\tif (view.extension === true) {\n\t\t\t\treturn false;\n\t\t\t}\n\t\t\treturn true;\n\t\t});\n\t\treturn newList;\n\t}, []);\n\n\tconst getOptionLabel = (option) => {\n\t\tif (option.extension === true) {\n\t\t\treturn `${option.name} (Extension)`;\n\t\t}\n\t\tif (option.computed === true) {\n\t\t\treturn `${option.name} (Computed)`;\n\t\t}\n\t\treturn option.name;\n\t};\n\treturn (\n\t\t<>\n\t\t\t<Select\n\t\t\t\toptions={modelTypes}\n\t\t\t\tvalue={modelTypes.find((e) => e.value === modelType) || null}\n\t\t\t\tfilterSelectedOptions={true}\n\t\t\t\tlabel=\"Type\"\n\t\t\t\tonChange={handleTypeSelect}\n\t\t\t\tdisableClearable\n\t\t\t/>\n\t\t\t<Select\n\t\t\t\tonChange={handleModelSelect}\n\t\t\t\tlabel=\"Model\"\n\t\t\t\tmodel={modelName}\n\t\t\t\tsearchFilter={modelFilter}\n\t\t\t\tvalue={model || null}\n\t\t\t\tonSearch={modelSearch}\n\t\t\t\tmodelType={modelType}\n\t\t\t/>\n\t\t\t{modelType === MODEL_TYPE.BASE && (\n\t\t\t\t<React.Fragment>\n\t\t\t\t\t<Select\n\t\t\t\t\t\tonChange={handleViewSelect}\n\t\t\t\t\t\tlabel=\"View\"\n\t\t\t\t\t\tmodel=\"com.axelor.meta.db.MetaView\"\n\t\t\t\t\t\tsearchFilter={viewFilter}\n\t\t\t\t\t\tgetOptionLabel={getOptionLabel}\n\t\t\t\t\t\tvalue={selectedView || null}\n\t\t\t\t\t\tfilterData={handleViewFilterData}\n\t\t\t\t\t/>\n\t\t\t\t\t<Select\n\t\t\t\t\t\tlabel=\"Custom fields\"\n\t\t\t\t\t\tmodel=\"com.axelor.meta.db.MetaField\"\n\t\t\t\t\t\tsearchFilter={metaFieldFilter}\n\t\t\t\t\t\tonChange={handleMetaFieldSelect}\n\t\t\t\t\t\tvalue={modelField || null}\n\t\t\t\t\t/>\n\t\t\t\t</React.Fragment>\n\t\t\t)}\n\t\t</>\n\t);\n}\n\nexport default React.memo(ViewSelection);\n","import { useEffect, useRef, useLayoutEffect, useCallback } from \"react\";\n\nexport const useKeyPress = (keys, callback, node = null) => {\n\t// implement the callback ref pattern\n\tconst callbackRef = useRef(callback);\n\tuseLayoutEffect(() => {\n\t\tcallbackRef.current = callback;\n\t});\n\n\t// handle what happens on key press\n\tconst handleKeyPress = useCallback(\n\t\t(event) => {\n\t\t\t// check if one of the key is part of the ones we want\n\t\t\tif (keys.some((key) => event.key === key && event.ctrlKey)) {\n\t\t\t\tevent.preventDefault();\n\t\t\t\tcallbackRef.current(event);\n\t\t\t}\n\t\t},\n\t\t[keys]\n\t);\n\n\tuseEffect(() => {\n\t\t// target is either the provided node or the document\n\t\tconst targetNode = node ?? document;\n\t\t// attach the event listener\n\t\ttargetNode && targetNode.addEventListener(\"keydown\", handleKeyPress);\n\n\t\t// remove the event listener\n\t\treturn () =>\n\t\t\ttargetNode && targetNode.removeEventListener(\"keydown\", handleKeyPress);\n\t}, [handleKeyPress, node]);\n};\n","import React, { useCallback, useState } from \"react\";\nimport { IconButton } from \"@material-ui/core\";\nimport { makeStyles } from \"@material-ui/core/styles\";\nimport classnames from \"classnames\";\nimport ViewSelection from \"./ViewSelection\";\nimport { MODEL_TYPE, TYPE } from \"./../constants\";\nimport { useKeyPress } from \"../custom-hooks/useKeyPress\";\nimport { useComponentVisible } from \"../custom-hooks/useComponentVisible\";\nimport { translate } from \"../utils\";\n\nimport Select from \"./Select\";\nimport { useStore } from \"../store/context\";\n\nconst useStyles = makeStyles({\n\ttoolbarContainer: {\n\t\tdisplay: \"flex\",\n\t\tflexWrap: \"wrap\",\n\t\twidth: \"100%\",\n\t\theight: \"inherit\",\n\t\tbackgroundColor: \"rgb(41, 56, 70)\",\n\t\tpadding: \"0.5rem 0.75rem\",\n\t\t\".modern-dark &\": {\n\t\t\tbackgroundColor: \"#323232\",\n\t\t},\n\t},\n\ttoolItemView: {\n\t\tcolor: \"#fff\",\n\t\tpadding: \"5px 10px\",\n\t},\n\tcrudIcon: {\n\t\theight: \"1em\",\n\t\twidth: \"1em\",\n\t\tfontSize: 14,\n\t\tcursor: \"pointer\",\n\t},\n\tselectionContainer: {\n\t\tflex: 1,\n\t\tdisplay: \"flex\",\n\t\talignItems: \"center\",\n\t\tflexWrap: \"wrap\",\n\t},\n\ttoolbarActions: {\n\t\tdisplay: \"flex\",\n\t\talignItems: \"center\",\n\t},\n\tdisableBtn: {\n\t\tcolor: \"#555 !important\",\n\t},\n\tsearchContainer: {\n\t\twidth: 300,\n\t},\n});\n\nfunction isStudioView(view) {\n\tif (view && view.xmlId && view.xmlId.indexOf(\"studio-\") === 0) {\n\t\treturn true;\n\t}\n\treturn false;\n}\n\nfunction ToolbarButton(props) {\n\tconst classes = useStyles();\n\treturn (\n\t\t<IconButton\n\t\t\tclassName={classes.toolItemView}\n\t\t\tclasses={{ disabled: classes.disableBtn }}\n\t\t\t{...props}\n\t\t/>\n\t);\n}\n\nconst getOptionLabel = (option) => {\n\tif (option.title === null) {\n\t\treturn `${option?.type} (${option?.name})`;\n\t} else if (!option.name) {\n\t\treturn `${option?.title} `;\n\t}\n\treturn `${option?.title} (${option?.name})`;\n};\n\nconst getOptionSelected = (option, value) => {\n\tif (option && option.name) {\n\t\treturn option?.name === value?.name;\n\t} else {\n\t\treturn option?.title === value?.title;\n\t}\n};\n\nfunction Toolbar({\n\tupdate,\n\tsaveView,\n\tsaveCustomFieldView,\n\tremoveView,\n\tonNew,\n\treset,\n\tshowAlert,\n\tonSelect,\n\tisStudioLite,\n\tonWidgetChange,\n\t...props\n}) {\n\tconst classes = useStyles();\n\tconst {\n\t\tstate: {\n\t\t\textensionView,\n\t\t\tmodel,\n\t\t\tmodelType,\n\t\t\tcustomModel,\n\t\t\twidgets,\n\t\t\tcustomFieldWidgets,\n\t\t\thighlightedOption,\n\t\t\tselectedView,\n\t\t\terrorList,\n\t\t\tpast,\n\t\t\tfuture,\n\t\t\tmodelField,\n\t\t\tentityType,\n\t\t\tmetaFieldStore,\n\t\t\ttabPanelItems = [],\n\t\t\tbaseHasChanges,\n\t\t\tcustomFieldHasChanges,\n\t\t},\n\t} = useStore();\n\n\tconst { isComponentVisible, setIsComponentVisible } =\n\t\tuseComponentVisible(false);\n\n\tconst isRemoveDisabled = !(\n\t\textensionView ||\n\t\tisStudioView(selectedView) ||\n\t\t(modelType === MODEL_TYPE.CUSTOM && Boolean(customModel))\n\t);\n\tconst isNewDisabled = modelType === MODEL_TYPE.BASE && !model;\n\tconst isSaveDisabled = Object.keys(errorList).length > 0;\n\tconst getValue = (obj) => Object.values(obj || {});\n\tconst save = React.useCallback(() => {\n\t\tif (isSaveDisabled) {\n\t\t\tshowAlert((getValue((getValue(errorList) || [])[0]) || [])[0]);\n\t\t\treturn;\n\t\t}\n\t\tsaveView();\n\t\tif (modelType === MODEL_TYPE.BASE) {\n\t\t\tsaveCustomFieldView();\n\t\t}\n\t\tonSelect({ id: -1 });\n\t}, [\n\t\tsaveView,\n\t\tsaveCustomFieldView,\n\t\tmodelType,\n\t\tisSaveDisabled,\n\t\tshowAlert,\n\t\terrorList,\n\t\tonSelect,\n\t]);\n\tconst [options, setOptions] = useState([]);\n\n\tconst getSearchOptions = useCallback((widgets) => {\n\t\tconst options = [];\n\t\tObject.keys(widgets || {}).forEach((widget) => {\n\t\t\tconst { name, title, type, autoTitle = \"\" } = widgets[widget];\n\n\t\t\tif ((name || title) && ![\"form\", \"panel-tabs\"].includes(type)) {\n\t\t\t\tlet option = {\n\t\t\t\t\tid: widget || null,\n\t\t\t\t\tname,\n\t\t\t\t\ttitle: title || autoTitle || null,\n\t\t\t\t\ttype,\n\t\t\t\t\tisTab: type === \"panel\" && true,\n\t\t\t\t};\n\t\t\t\toptions.push(option);\n\t\t\t}\n\t\t});\n\t\treturn options;\n\t}, []);\n\n\tconst handleSearch = useCallback(\n\t\t(event) => {\n\t\t\tif (modelType === MODEL_TYPE.BASE && !model) {\n\t\t\t\treturn;\n\t\t\t} else if (\n\t\t\t\tmodelType === MODEL_TYPE.BASE &&\n\t\t\t\t!widgets &&\n\t\t\t\t!customFieldWidgets\n\t\t\t) {\n\t\t\t\treturn;\n\t\t\t}\n\t\t\tsetIsComponentVisible(true);\n\t\t\tupdate((draft) => {\n\t\t\t\tdraft.editWidget = -1;\n\t\t\t});\n\n\t\t\tconst allOptions = [];\n\t\t\tlet options = getSearchOptions(widgets);\n\t\t\tallOptions.push(...options);\n\t\t\tif (customFieldWidgets) {\n\t\t\t\tlet options = getSearchOptions(customFieldWidgets);\n\t\t\t\tallOptions.push(...options);\n\t\t\t}\n\t\t\tsetOptions(allOptions);\n\t\t},\n\t\t[\n\t\t\tmodel,\n\t\t\tmodelType,\n\t\t\tsetIsComponentVisible,\n\t\t\tupdate,\n\t\t\tgetSearchOptions,\n\t\t\twidgets,\n\t\t\tcustomFieldWidgets,\n\t\t]\n\t);\n\n\tuseKeyPress([\"s\"], save);\n\n\tuseKeyPress([\"f\"], handleSearch);\n\n\tconst handleOutsideClick = useCallback(\n\t\t(status) => {\n\t\t\tsetIsComponentVisible(status);\n\t\t\tupdate((draft) => {\n\t\t\t\tdraft.highlightedOption = null;\n\t\t\t\tdraft.editWidget = -1;\n\t\t\t});\n\t\t},\n\t\t[setIsComponentVisible, update]\n\t);\n\n\tconst handleChange = useCallback(\n\t\t(option) => {\n\t\t\tupdate((draft) => {\n\t\t\t\tdraft.highlightedOption = null;\n\t\t\t\tdraft.editWidget = option?.id;\n\t\t\t\tsetIsComponentVisible(false);\n\t\t\t});\n\t\t},\n\t\t[setIsComponentVisible, update]\n\t);\n\n\tconst handleHighlightChange = useCallback(\n\t\t(option) => {\n\t\t\tconst parentId = Object.keys(widgets || {}).find(\n\t\t\t\t(x) => (widgets[x].items || []).indexOf(option?.id) > -1\n\t\t\t);\n\t\t\tconst customParentId = Object.keys(customFieldWidgets || {})?.find(\n\t\t\t\t(x) => (customFieldWidgets[x].items || []).indexOf(option?.id) > -1\n\t\t\t);\n\t\t\tconst tabId = Object.keys(widgets || {})?.find(\n\t\t\t\t(key) => widgets[key]?.type === TYPE.tabs\n\t\t\t);\n\t\t\tconst customTabId = Object.keys(customFieldWidgets || {})?.find(\n\t\t\t\t(key) => customFieldWidgets[key]?.type === TYPE.tabs\n\t\t\t);\n\n\t\t\tif (option) {\n\t\t\t\tupdate((draft) => {\n\t\t\t\t\tdraft.highlightedOption = option;\n\t\t\t\t});\n\n\t\t\t\tif (modelType === MODEL_TYPE.CUSTOM) {\n\t\t\t\t\tupdate((draft) => {\n\t\t\t\t\t\tdraft.editWidgetType = -1;\n\t\t\t\t\t});\n\t\t\t\t\tif (option?.isTab && tabId === parentId && (tabId || parentId)) {\n\t\t\t\t\t\tonWidgetChange({\n\t\t\t\t\t\t\tid: parentId,\n\t\t\t\t\t\t\tprops: {\n\t\t\t\t\t\t\t\tcurrent: option && option.id,\n\t\t\t\t\t\t\t\t_type: null,\n\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\tskipGenerateHistory: true,\n\t\t\t\t\t\t});\n\t\t\t\t\t} else {\n\t\t\t\t\t\tonWidgetChange({\n\t\t\t\t\t\t\tid: tabId,\n\t\t\t\t\t\t\tprops: {\n\t\t\t\t\t\t\t\tcurrent: parentId,\n\t\t\t\t\t\t\t\t_type: null,\n\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\tskipGenerateHistory: true,\n\t\t\t\t\t\t});\n\t\t\t\t\t}\n\t\t\t\t} else if (modelType === MODEL_TYPE.BASE) {\n\t\t\t\t\tif (customFieldWidgets && customParentId) {\n\t\t\t\t\t\tupdate((draft) => {\n\t\t\t\t\t\t\tdraft.editWidgetType = \"customField\";\n\t\t\t\t\t\t});\n\t\t\t\t\t\tonWidgetChange({\n\t\t\t\t\t\t\tid: option?.isTab ? customParentId : customTabId,\n\t\t\t\t\t\t\tprops: {\n\t\t\t\t\t\t\t\tcurrent: option?.isTab ? option?.id : customParentId,\n\t\t\t\t\t\t\t\t_type: \"customField\",\n\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\tskipGenerateHistory: true,\n\t\t\t\t\t\t});\n\t\t\t\t\t} else if (\n\t\t\t\t\t\t!option?.isTab &&\n\t\t\t\t\t\tparentId &&\n\t\t\t\t\t\ttabId &&\n\t\t\t\t\t\t(!customParentId || !customTabId)\n\t\t\t\t\t) {\n\t\t\t\t\t\tupdate((draft) => {\n\t\t\t\t\t\t\tdraft.editWidgetType = null;\n\t\t\t\t\t\t});\n\t\t\t\t\t\tif (!tabPanelItems?.includes(parentId)) {\n\t\t\t\t\t\t\tObject.keys(widgets || {}).forEach((widget) => {\n\t\t\t\t\t\t\t\tif (\n\t\t\t\t\t\t\t\t\twidgets[widget].type === \"panel\" &&\n\t\t\t\t\t\t\t\t\twidgets[widget].items?.includes(option?.id)\n\t\t\t\t\t\t\t\t) {\n\t\t\t\t\t\t\t\t\tlet string = widgets[widget]?.xPath.split(\"/panel\")[1];\n\t\t\t\t\t\t\t\t\tlet panelName = string?.substring(8, string.length - 2);\n\t\t\t\t\t\t\t\t\tObject.keys(widgets || {}).forEach((widget) => {\n\t\t\t\t\t\t\t\t\t\tif (widgets[widget].name === panelName) {\n\t\t\t\t\t\t\t\t\t\t\tonWidgetChange({\n\t\t\t\t\t\t\t\t\t\t\t\tid: tabId,\n\t\t\t\t\t\t\t\t\t\t\t\tprops: {\n\t\t\t\t\t\t\t\t\t\t\t\t\tcurrent: widget,\n\t\t\t\t\t\t\t\t\t\t\t\t\t_type: null,\n\t\t\t\t\t\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t\t\t\t\t\tskipGenerateHistory: true,\n\t\t\t\t\t\t\t\t\t\t\t});\n\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t});\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t});\n\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\tonWidgetChange({\n\t\t\t\t\t\t\t\tid: tabId,\n\t\t\t\t\t\t\t\tprops: {\n\t\t\t\t\t\t\t\t\tcurrent: parentId,\n\t\t\t\t\t\t\t\t\t_type: null,\n\t\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t\tskipGenerateHistory: true,\n\t\t\t\t\t\t\t});\n\t\t\t\t\t\t}\n\t\t\t\t\t} else if (\n\t\t\t\t\t\toption?.isTab &&\n\t\t\t\t\t\tparentId &&\n\t\t\t\t\t\ttabId &&\n\t\t\t\t\t\t(!customParentId || !customTabId)\n\t\t\t\t\t) {\n\t\t\t\t\t\tupdate((draft) => {\n\t\t\t\t\t\t\tdraft.editWidgetType = null;\n\t\t\t\t\t\t});\n\t\t\t\t\t\tonWidgetChange({\n\t\t\t\t\t\t\tid: tabId === parentId ? parentId : tabId,\n\t\t\t\t\t\t\tprops: {\n\t\t\t\t\t\t\t\tcurrent: tabId === parentId ? option?.id : parentId,\n\t\t\t\t\t\t\t\t_type: null,\n\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\tskipGenerateHistory: true,\n\t\t\t\t\t\t});\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t},\n\t\t[\n\t\t\twidgets,\n\t\t\tcustomFieldWidgets,\n\t\t\tupdate,\n\t\t\tmodelType,\n\t\t\tonWidgetChange,\n\t\t\ttabPanelItems,\n\t\t]\n\t);\n\n\tconst handleClose = useCallback(() => {\n\t\tupdate((draft) => {\n\t\t\tdraft.editWidget = draft.highlightedOption?.id\n\t\t\t\t? draft.highlightedOption?.id\n\t\t\t\t: -1;\n\t\t\tdraft.highlightedOption = null;\n\t\t});\n\t}, [update]);\n\n\tconst handleHighlightChangeRef = React.useRef(handleHighlightChange);\n\tconst timerRef = React.useRef(null);\n\n\tReact.useEffect(() => {\n\t\thandleHighlightChangeRef.current = handleHighlightChange;\n\t}, [highlightedOption, handleHighlightChange]);\n\n\tconst onHighlightChange = React.useCallback((event, option) => {\n\t\tclearTimeout(timerRef.current);\n\t\ttimerRef.current = setTimeout(\n\t\t\t() => {\n\t\t\t\toption && handleHighlightChangeRef.current(option);\n\t\t\t},\n\t\t\tevent ? 100 : 200\n\t\t);\n\t}, []);\n\n\tReact.useEffect(() => {\n\t\treturn () => {\n\t\t\tclearTimeout(timerRef.current);\n\t\t};\n\t}, []);\n\n\tconst showConfirmation = React.useCallback(\n\t\t(onOK) => {\n\t\t\tconst dialog = {\n\t\t\t\tmessage: translate(\n\t\t\t\t\t\"Current changes will be lost. Do you really want to proceed?\"\n\t\t\t\t),\n\t\t\t\ttitle: translate(\"Question\"),\n\t\t\t\tonOK,\n\t\t\t\ttype: \"confirm\",\n\t\t\t};\n\t\t\tupdate((draft) => {\n\t\t\t\tdraft.loader = false;\n\t\t\t\tdraft.dialog = dialog;\n\t\t\t});\n\t\t},\n\t\t[update]\n\t);\n\n\tconst isDirty =\n\t\tpast.length > 0 ||\n\t\tfuture.length > 0 ||\n\t\tbaseHasChanges ||\n\t\tcustomFieldHasChanges;\n\n\tconst runIfConfirmed = React.useCallback(\n\t\t(fn, skipConfirm) =>\n\t\t\t(...args) => {\n\t\t\t\tif (isDirty && !skipConfirm) {\n\t\t\t\t\tshowConfirmation(() => fn(...args));\n\t\t\t\t} else fn(...args);\n\t\t\t},\n\t\t[showConfirmation, isDirty]\n\t);\n\n\tconst onNewWithConfirmation = React.useMemo(\n\t\t() => runIfConfirmed(onNew),\n\t\t[onNew, runIfConfirmed]\n\t);\n\n\tconst handleRefreshWithConfirmation = React.useMemo(\n\t\t() => runIfConfirmed(props.refresh),\n\t\t[props.refresh, runIfConfirmed]\n\t);\n\n\treturn (\n\t\t<div className={classes.toolbarContainer}>\n\t\t\t<div className={classes.toolbarActions}>\n\t\t\t\t{modelType !== MODEL_TYPE.BASE && (\n\t\t\t\t\t<ToolbarButton\n\t\t\t\t\t\tclassName={classes.toolItemView}\n\t\t\t\t\t\tonClick={onNewWithConfirmation}\n\t\t\t\t\t\tdisabled={isNewDisabled}\n\t\t\t\t\t>\n\t\t\t\t\t\t<i className={classnames(\"fa fa-plus\", classes.crudIcon)} />\n\t\t\t\t\t</ToolbarButton>\n\t\t\t\t)}\n\t\t\t\t<ToolbarButton\n\t\t\t\t\tclassName={classes.toolItemView}\n\t\t\t\t\tonClick={save}\n\t\t\t\t\tdisabled={isSaveDisabled}\n\t\t\t\t>\n\t\t\t\t\t<i className={classnames(\"fa fa-floppy-o\", classes.crudIcon)} />\n\t\t\t\t</ToolbarButton>\n\t\t\t\t{modelType === MODEL_TYPE.CUSTOM && (\n\t\t\t\t\t<ToolbarButton\n\t\t\t\t\t\tclassName={classes.toolItemView}\n\t\t\t\t\t\tonClick={removeView}\n\t\t\t\t\t\tdisabled={isRemoveDisabled}\n\t\t\t\t\t>\n\t\t\t\t\t\t<i className={classnames(\"fa fa-trash-o\", classes.crudIcon)} />\n\t\t\t\t\t</ToolbarButton>\n\t\t\t\t)}\n\t\t\t</div>\n\t\t\t{!isStudioLite && (\n\t\t\t\t<div className={classes.selectionContainer}>\n\t\t\t\t\t<ViewSelection\n\t\t\t\t\t\tmodel={model}\n\t\t\t\t\t\tupdate={update}\n\t\t\t\t\t\tmodelType={modelType}\n\t\t\t\t\t\treset={reset}\n\t\t\t\t\t\tmodelField={modelField}\n\t\t\t\t\t\tselectedView={selectedView}\n\t\t\t\t\t\tentityType={entityType}\n\t\t\t\t\t\tmetaFieldStore={metaFieldStore}\n\t\t\t\t\t\trunIfConfirmed={runIfConfirmed}\n\t\t\t\t\t\tbaseHasChanges={baseHasChanges}\n\t\t\t\t\t\tcustomFieldHasChanges={customFieldHasChanges}\n\t\t\t\t\t\t{...props}\n\t\t\t\t\t/>\n\t\t\t\t</div>\n\t\t\t)}\n\t\t\t<div className={classes.toolbarActions}>\n\t\t\t\t{isComponentVisible ? (\n\t\t\t\t\t<Select\n\t\t\t\t\t\toptions={options}\n\t\t\t\t\t\tclassName={classes.searchContainer}\n\t\t\t\t\t\tautoHighlight={true}\n\t\t\t\t\t\topen={true}\n\t\t\t\t\t\tonChange={handleChange}\n\t\t\t\t\t\tonClose={handleClose}\n\t\t\t\t\t\tonHighlightChange={onHighlightChange}\n\t\t\t\t\t\thandleOutsideClick={handleOutsideClick}\n\t\t\t\t\t\tgetOptionLabel={getOptionLabel}\n\t\t\t\t\t\tgetOptionSelected={getOptionSelected}\n\t\t\t\t\t/>\n\t\t\t\t) : (\n\t\t\t\t\t<ToolbarButton\n\t\t\t\t\t\tclassName={classes.toolItemView}\n\t\t\t\t\t\tonClick={handleSearch}\n\t\t\t\t\t\tdisabled={\n\t\t\t\t\t\t\tmodelType === MODEL_TYPE.BASE && !model\n\t\t\t\t\t\t\t\t? true\n\t\t\t\t\t\t\t\t: modelType === MODEL_TYPE.BASE &&\n\t\t\t\t\t\t\t\t  !widgets &&\n\t\t\t\t\t\t\t\t  !customFieldWidgets\n\t\t\t\t\t\t\t\t? true\n\t\t\t\t\t\t\t\t: false\n\t\t\t\t\t\t}\n\t\t\t\t\t>\n\t\t\t\t\t\t<i className={classnames(\"fa fa-search\", classes.crudIcon)} />\n\t\t\t\t\t</ToolbarButton>\n\t\t\t\t)}\n\t\t\t\t<ToolbarButton\n\t\t\t\t\tclassName={classes.toolItemView}\n\t\t\t\t\tonClick={handleRefreshWithConfirmation}\n\t\t\t\t\tdisabled={!customModel && !model}\n\t\t\t\t>\n\t\t\t\t\t<i className={classnames(\"fa fa-refresh\", classes.crudIcon)} />\n\t\t\t\t</ToolbarButton>\n\t\t\t\t<ToolbarButton\n\t\t\t\t\tclassName={classes.toolItemView}\n\t\t\t\t\tonClick={() => props.undo()}\n\t\t\t\t\tdisabled={past.length <= 0}\n\t\t\t\t>\n\t\t\t\t\t<i className={classnames(\"fa fa-reply\", classes.crudIcon)} />\n\t\t\t\t</ToolbarButton>\n\t\t\t\t<ToolbarButton\n\t\t\t\t\tonClick={() => props.redo()}\n\t\t\t\t\tdisabled={future.length <= 0}\n\t\t\t\t>\n\t\t\t\t\t<i className={classnames(\"fa fa-share\", classes.crudIcon)} />\n\t\t\t\t</ToolbarButton>\n\t\t\t</div>\n\t\t</div>\n\t);\n}\n\nexport default React.memo(Toolbar);\n","import { useState, useEffect, useRef } from \"react\";\nimport { useStore } from \"../store/context\";\n\nexport function useComponentVisible(initialIsVisible) {\n\tconst [isComponentVisible, setIsComponentVisible] =\n\t\tuseState(initialIsVisible);\n\tconst { update } = useStore();\n\tconst ref = useRef(null);\n\n\tconst handleHideDropdown = (event) => {\n\t\tif (event.key === \"Escape\") {\n\t\t\tsetIsComponentVisible(false);\n\t\t\tupdate((draft) => {\n\t\t\t\tdraft.highlightedOption = null;\n\t\t\t});\n\t\t}\n\t};\n\n\tconst handleClickOutside = (event) => {\n\t\tif (ref.current && !ref.current.contains(event.target)) {\n\t\t\tsetIsComponentVisible(false);\n\t\t}\n\t};\n\n\tuseEffect(() => {\n\t\tdocument.addEventListener(\"keydown\", handleHideDropdown, true);\n\t\tdocument.addEventListener(\"click\", handleClickOutside, true);\n\t\treturn () => {\n\t\t\tdocument.removeEventListener(\"keydown\", handleHideDropdown, true);\n\t\t\tdocument.removeEventListener(\"click\", handleClickOutside, true);\n\t\t};\n\t});\n\n\treturn { ref, isComponentVisible, setIsComponentVisible };\n}\n","import React from \"react\";\nimport Button from \"@material-ui/core/Button\";\nimport Dialog from \"@material-ui/core/Dialog\";\nimport DialogActions from \"@material-ui/core/DialogActions\";\nimport DialogContent from \"@material-ui/core/DialogContent\";\nimport DialogContentText from \"@material-ui/core/DialogContentText\";\nimport DialogTitle from \"@material-ui/core/DialogTitle\";\nimport { makeStyles } from \"@material-ui/core/styles\";\n\nimport { translate } from \"../utils\";\n\nconst useStyles = makeStyles({\n\tpaper: {\n\t\tminWidth: 300,\n\t},\n\tbutton: {\n\t\ttextTransform: \"none\",\n\t\tbackgroundColor: \"#0275d8\",\n\t\tborderColor: \"#0275d8\",\n\t\tcolor: \"#fff\",\n\t\t\"&:hover\": {\n\t\t\tbackgroundColor: \"#0275d8\",\n\t\t\tborderColor: \"#0275d8\",\n\t\t\tcolor: \"#fff\",\n\t\t},\n\t},\n});\n\nexport default function DeleteConfirmation({\n\tonOk,\n\tonClose,\n\topen,\n\tmessage,\n\ttitle = \"Delete Confirmation\",\n}) {\n\tconst classes = useStyles();\n\treturn (\n\t\t<Dialog\n\t\t\topen={open}\n\t\t\tonClose={onClose}\n\t\t\taria-labelledby=\"alert-dialog-title\"\n\t\t\taria-describedby=\"alert-dialog-description\"\n\t\t\tclasses={{\n\t\t\t\tpaper: classes.paper,\n\t\t\t}}\n\t\t>\n\t\t\t<DialogTitle id=\"alert-dialog-title\">{translate(title)}</DialogTitle>\n\t\t\t<DialogContent>\n\t\t\t\t<DialogContentText id=\"alert-dialog-description\">\n\t\t\t\t\t{translate(message)}\n\t\t\t\t</DialogContentText>\n\t\t\t</DialogContent>\n\t\t\t<DialogActions>\n\t\t\t\t<Button onClick={onOk} color=\"primary\" className={classes.button}>\n\t\t\t\t\t{translate(\"Yes\")}\n\t\t\t\t</Button>\n\t\t\t\t<Button onClick={onClose} color=\"primary\" autoFocus className={classes.button}>\n\t\t\t\t\t{translate(\"No\")}\n\t\t\t\t</Button>\n\t\t\t</DialogActions>\n\t\t</Dialog>\n\t);\n}\n","import Utils from \"../utils\";\nimport { DEFAULT_VALUE, conditionProperties } from \"../constants\";\nimport { eGeneratePath } from \"./../store/xpathGenerator\";\n\nfunction hasIndex(path) {\n\treturn path.split(\"[\").length - 1 > 1;\n}\n\nfunction convertConditionName(name) {\n\tconst propertyName = conditionProperties[name];\n\treturn propertyName;\n}\n\nconst getWidgets = ({ widgets, items }) => {\n\tObject.keys(widgets).forEach((widgetId) => {\n\t\tconst path = eGeneratePath(widgets, items, widgetId);\n\t\twidgets[widgetId].xPath = path;\n\t});\n\treturn widgets;\n};\n\nfunction getName({ self, parent }) {\n\tlet name = \"\";\n\tconst pathText = self || parent;\n\tif (pathText) {\n\t\tconst finder = \"@name='\";\n\t\tconst index = pathText.indexOf(finder) + finder.length;\n\t\tconst endIndex = pathText.indexOf(\"']\");\n\t\tname = pathText.substring(index, endIndex);\n\t}\n\treturn name;\n}\n\nconst isSameAsOriginal = (item, originalWidgets) => {\n\tif (item) {\n\t\tconst { attributes } = item;\n\t\tconst itemExplore = Utils.exploreTarget(item.target);\n\t\tconst widget = Object.values(originalWidgets).find((widget) => {\n\t\t\tconst widgetExplore = Utils.exploreTarget(widget.xPath);\n\t\t\tif (widgetExplore.self || itemExplore.self) {\n\t\t\t\treturn widgetExplore.self === itemExplore.self;\n\t\t\t} else if (widgetExplore.parent || itemExplore.parent) {\n\t\t\t\treturn widgetExplore.parent === itemExplore.parent;\n\t\t\t}\n\t\t\treturn false;\n\t\t});\n\t\tconst attributeName = Utils.dashToCamelCase(attributes.name);\n\t\tif (widget) {\n\t\t\tlet widgetValue = widget[attributeName];\n\t\t\tlet maskedValue = widget[attributes.maskName];\n\t\t\tif (maskedValue === undefined) {\n\t\t\t\tmaskedValue = \"\";\n\t\t\t}\n\t\t\tif (widgetValue === undefined) {\n\t\t\t\twidgetValue = false;\n\t\t\t}\n\t\t\tif (attributes.maskName !== attributes.name) {\n\t\t\t\tif (`${maskedValue}` === `${attributes.value}`) {\n\t\t\t\t\treturn true;\n\t\t\t\t}\n\t\t\t} else if (`${widgetValue}` === `${attributes.value}`) {\n\t\t\t\treturn true;\n\t\t\t} else if (\n\t\t\t\t[\"\", undefined, null].includes(widget[attributeName]) &&\n\t\t\t\t[\"\", undefined, null].includes(attributes.value)\n\t\t\t) {\n\t\t\t\treturn true;\n\t\t\t} else if (\n\t\t\t\tattributes.maskName !== attributes.name &&\n\t\t\t\t[\"\", undefined, null].includes(widget[attributes.maskName]) &&\n\t\t\t\t[\"\", undefined, null].includes(attributes.value)\n\t\t\t) {\n\t\t\t\treturn true;\n\t\t\t}\n\t\t}\n\t}\n\treturn false;\n};\n\nexport function getUpdatedAttrsList(state, originalWidgets) {\n\tconst newAttrsList = [];\n\tconst removedAttrsList = [];\n\tconst { attrsList = [] } = state;\n\tconst moves = state.extensionMoves.filter((m) => m.name === \"attribute\");\n\tconst view = state.selectedView;\n\tconst model = state.model;\n\tconst movesMap = new Map();\n\tconst currentSchema = Utils.generateXMLToViewSchema({\n\t\tview: state.view.view,\n\t\tfields: state.metaFieldStore,\n\t\tattrsList: state.attrsList,\n\t});\n\tconst currentWidgets = getWidgets(currentSchema);\n\n\tmoves.forEach((move) => {\n\t\tconst convertedName = convertConditionName(move.attributes.name);\n\t\tconst name = convertedName || move.attributes.name;\n\t\tconst id = move.id;\n\t\tconst value = move.attributes.value;\n\t\tconst newMove = Object.assign(\n\t\t\t{},\n\t\t\t{\n\t\t\t\t...move,\n\t\t\t\tattributes: {\n\t\t\t\t\t...move.attributes,\n\t\t\t\t\tname,\n\t\t\t\t\tvalue,\n\t\t\t\t\tmaskName: move.attributes.name,\n\t\t\t\t},\n\t\t\t}\n\t\t);\n\t\tmovesMap.set(name + id, newMove);\n\t});\n\tmovesMap.forEach((value) => {\n\t\tconst move = value;\n\t\tconst moveExplore = Utils.exploreTarget(move.target);\n\t\tconst { attributes } = move;\n\t\tconst fieldName = getName(moveExplore);\n\t\tconst fieldIndex = attrsList.findIndex(\n\t\t\t(attr) =>\n\t\t\t\tfieldName.includes(attr.field) &&\n\t\t\t\t(attr.name === attributes.name ||\n\t\t\t\t\tconditionProperties[attr.name] === attributes.name)\n\t\t);\n\t\tconst field = attrsList[fieldIndex];\n\t\tconst isOriginal = isSameAsOriginal(move, originalWidgets);\n\t\tconst isCurrent = isSameAsOriginal(move, currentWidgets);\n\t\tconst selectValueRegEx = /(['\"])(?:(?!\\1|\\\\).|\\\\.)*\\1/;\n\t\tconst newAttrsIndex = newAttrsList.findIndex(\n\t\t\t(attr) =>\n\t\t\t\tmoveExplore.self &&\n\t\t\t\tmoveExplore.self.match(selectValueRegEx)?.[0].includes(attr.field) &&\n\t\t\t\tattr.name === attributes.name\n\t\t);\n\t\tlet defaultValue = DEFAULT_VALUE[attributes.name];\n\t\tif (isOriginal || isCurrent) {\n\t\t\tif (newAttrsIndex !== -1) {\n\t\t\t\tnewAttrsList.splice(newAttrsIndex, 1);\n\t\t\t} else if (field && field.id) {\n\t\t\t\tremovedAttrsList.push({ id: field.id, version: field.version });\n\t\t\t}\n\t\t} else {\n\t\t\tif (field) {\n\t\t\t\tif ([null, undefined].includes(attributes.value)) {\n\t\t\t\t\tif (defaultValue) {\n\t\t\t\t\t\tif (defaultValue === attributes.value) {\n\t\t\t\t\t\t\tremovedAttrsList.push({ id: field.id, version: field.version });\n\t\t\t\t\t\t}\n\t\t\t\t\t} else {\n\t\t\t\t\t\tremovedAttrsList.push({ id: field.id, version: field.version });\n\t\t\t\t\t}\n\t\t\t\t} else if (field.value !== attributes.value) {\n\t\t\t\t\tif (defaultValue) {\n\t\t\t\t\t\tif (defaultValue === attributes.value) {\n\t\t\t\t\t\t\tremovedAttrsList.push({ id: field.id, version: field.version });\n\t\t\t\t\t\t}\n\t\t\t\t\t} else {\n\t\t\t\t\t\tif (newAttrsIndex === -1) {\n\t\t\t\t\t\t\tnewAttrsList.push({\n\t\t\t\t\t\t\t\t...field,\n\t\t\t\t\t\t\t\tname: attributes.name,\n\t\t\t\t\t\t\t\tvalue: attributes.value,\n\t\t\t\t\t\t\t\tmaskName: attributes.maskName,\n\t\t\t\t\t\t\t});\n\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\tnewAttrsList[newAttrsIndex].value = attributes.value;\n\t\t\t\t\t\t\tnewAttrsList[newAttrsIndex].maskName = attributes.maskName;\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t} else {\n\t\t\t\tif (fieldName) {\n\t\t\t\t\tif (newAttrsIndex === -1) {\n\t\t\t\t\t\tnewAttrsList.push({\n\t\t\t\t\t\t\tview: view.name,\n\t\t\t\t\t\t\tmodel: model.fullName,\n\t\t\t\t\t\t\tname: attributes.name,\n\t\t\t\t\t\t\tmaskName: attributes.maskName,\n\t\t\t\t\t\t\tvalue: attributes.value,\n\t\t\t\t\t\t\tfield: fieldName,\n\t\t\t\t\t\t});\n\t\t\t\t\t} else {\n\t\t\t\t\t\tnewAttrsList[newAttrsIndex].value = attributes.value;\n\t\t\t\t\t\tnewAttrsList[newAttrsIndex].maskName = attributes.maskName;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t});\n\treturn { changedAttrsList: newAttrsList, removedAttrsList };\n}\n\nexport function optimizeExtension(state, originalWidgets) {\n\tconst processed = [];\n\tconst moves = state.extensionMoves.filter((m) => m.name !== \"attribute\");\n\tlet list = [...moves];\n\tconst filterListForAttribute = (move) => {\n\t\tif (\n\t\t\tprocessed.findIndex(\n\t\t\t\t(p) => p.target === move.target && p.name === move.attributes.name\n\t\t\t) === -1\n\t\t) {\n\t\t\tconst _list = list\n\t\t\t\t.map((_item, i) => {\n\t\t\t\t\tif (\n\t\t\t\t\t\t_item.target === move.target &&\n\t\t\t\t\t\t_item.attributes &&\n\t\t\t\t\t\tmove.attributes.name === _item.attributes.name\n\t\t\t\t\t) {\n\t\t\t\t\t\treturn i;\n\t\t\t\t\t}\n\t\t\t\t\treturn undefined;\n\t\t\t\t})\n\t\t\t\t.filter((e) => e !== undefined);\n\t\t\tconst lastItem = _list[_list.length - 1];\n\t\t\tprocessed.push({ target: move.target, name: move.attributes.name });\n\t\t\tlist = list.filter((item, k) => {\n\t\t\t\tif (item.target === move.target) {\n\t\t\t\t\tif (\n\t\t\t\t\t\tmove.attributes &&\n\t\t\t\t\t\titem.attributes &&\n\t\t\t\t\t\tmove.attributes.name === item.attributes.name\n\t\t\t\t\t) {\n\t\t\t\t\t\treturn lastItem === k ? true : false;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\treturn true;\n\t\t\t});\n\t\t}\n\t};\n\n\tconst filterListForRemove = (move) => {\n\t\tlet canRemoveReplace = false;\n\t\tconst explore = Utils.exploreTarget(move.target);\n\t\t// check for insert nodes\n\t\tconst insertIndex = list.findIndex((item) => {\n\t\t\tif (item.name === \"insert\") {\n\t\t\t\treturn item.elements && item.elements[0] && explore.self\n\t\t\t\t\t? explore.self.includes(`'${item.elements[0].name}'`)\n\t\t\t\t\t: explore.parent && explore.parent.includes(item.elements[0].name);\n\t\t\t}\n\t\t\treturn false;\n\t\t});\n\t\tconst depends = list.filter((item) => {\n\t\t\tif (item.target) {\n\t\t\t\tconst itemExplore = Utils.exploreTarget(item.target);\n\t\t\t\treturn (\n\t\t\t\t\t[\"insert\", \"move\"].includes(item.name) &&\n\t\t\t\t\titemExplore.self &&\n\t\t\t\t\titemExplore.self.includes(explore.self)\n\t\t\t\t);\n\t\t\t}\n\t\t\treturn false;\n\t\t});\n\t\tif (insertIndex !== -1 && !depends.length) {\n\t\t\tcanRemoveReplace = true;\n\t\t\tlist.splice(insertIndex, 1);\n\t\t\t// check for move\n\t\t\t[...list].forEach((item) => {\n\t\t\t\tif (\n\t\t\t\t\titem.name === \"move\" &&\n\t\t\t\t\titem.source &&\n\t\t\t\t\titem.source === move.target\n\t\t\t\t) {\n\t\t\t\t\tconst moveIndex = list.findIndex(\n\t\t\t\t\t\t(_item) =>\n\t\t\t\t\t\t\t_item.name === \"move\" &&\n\t\t\t\t\t\t\t_item.source &&\n\t\t\t\t\t\t\t_item.source === move.target\n\t\t\t\t\t);\n\t\t\t\t\tif (moveIndex !== -1) {\n\t\t\t\t\t\tlist.splice(moveIndex, 1);\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t});\n\t\t}\n\t\t// remove attribute changes\n\t\tlist = list.filter((item) => {\n\t\t\tif (item.name === \"attribute\" && item.target === move.target) {\n\t\t\t\treturn false;\n\t\t\t}\n\t\t\treturn true;\n\t\t});\n\t\tif (canRemoveReplace) {\n\t\t\tconst removeIndex = list.findIndex(\n\t\t\t\t(item) => item.name === \"replace\" && item.target === move.target\n\t\t\t);\n\t\t\tif (removeIndex !== -1) {\n\t\t\t\tlist.splice(removeIndex, 1);\n\t\t\t}\n\t\t}\n\t};\n\n\tmoves.forEach((move, i) => {\n\t\tif (move.target) {\n\t\t\tconst explore = Utils.exploreTarget(move.target);\n\t\t\tlet flag = true;\n\t\t\tif (explore.self && hasIndex(explore.self)) {\n\t\t\t\tflag = false;\n\t\t\t}\n\t\t\tif (explore.parent && hasIndex(explore.parent)) {\n\t\t\t\tflag = false;\n\t\t\t}\n\t\t\tif (move.name === \"attribute\" && flag) {\n\t\t\t\tfilterListForAttribute(move);\n\t\t\t}\n\t\t\tif (move.name === \"replace\" && flag) {\n\t\t\t\tif (\n\t\t\t\t\t!(\n\t\t\t\t\t\t(explore?.self && explore.self.includes(\"panel\")) ||\n\t\t\t\t\t\t(!explore?.self && explore?.parent.includes(\"panel\"))\n\t\t\t\t\t)\n\t\t\t\t) {\n\t\t\t\t\tfilterListForRemove(move);\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t});\n\treturn list;\n}\n","import React from \"react\";\nimport convert from \"xml-js\";\nimport {\n\tDialog,\n\tDialogTitle,\n\tDialogContent,\n\tDialogActions,\n\tButton,\n} from \"@material-ui/core\";\nimport _ from \"lodash\";\nimport { makeStyles } from \"@material-ui/core/styles\";\n\nimport Toolbar from \"./Toolbar\";\nimport { useStore } from \"../store/context\";\nimport { generateView } from \"../store/extensionGenerator\";\nimport AxelorService from \"./../services/axelor.rest\";\nimport Utils, {\n\tgenerateCustomModelSchema,\n\ttranslate,\n\tisPanelTab,\n} from \"../utils\";\nimport {\n\tMODEL_TYPE,\n\tconditionProperties,\n\totherNoQuoteProps,\n\tItemTypes,\n\tPANEL_PROPS,\n\tTYPE,\n} from \"../constants\";\nimport {\n\tsaveCustomModel,\n\tfetchJSONFields,\n\tremoveCustomModel,\n\tgenerateMenuChange,\n\tfetchCustomModel,\n\tfetchCustomFields,\n\tfetchViews,\n\tsaveAttrsList,\n\tfetchAttrsList,\n\tsaveTranslationList,\n\tgetTranslationList,\n\tdeleteAttrsList,\n\tdeleteTranslationList,\n} from \"./api\";\nimport DeleteConfirmation from \"./DeleteConfirmation\";\nimport { getXML } from \"./../store/computeXML\";\nimport { generateXpath, eGeneratePath } from \"./../store/xpathGenerator\";\nimport {\n\toptimizeExtension,\n\tgetUpdatedAttrsList,\n} from \"../store/optimizeExtension\";\n\nconst metaViewService = new AxelorService({\n\tmodel: \"com.axelor.meta.db.MetaView\",\n});\nconst customFieldService = new AxelorService({\n\tmodel: \"com.axelor.meta.db.MetaJsonField\",\n});\n\nconst useStyles = makeStyles(() => ({\n\tpaper: {\n\t\tminWidth: 300,\n\t},\n\tbutton: {\n\t\ttextTransform: \"none\",\n\t\tbackgroundColor: \"#0275d8\",\n\t\tborderColor: \"#0275d8\",\n\t\tcolor: \"#fff\",\n\t\t\"&:hover\": {\n\t\t\tbackgroundColor: \"#0275d8\",\n\t\t\tborderColor: \"#0275d8\",\n\t\t\tcolor: \"#fff\",\n\t\t},\n\t},\n}));\n\nconst getWidgets = ({ widgets, items }) => {\n\tObject.keys(widgets).forEach((widgetId) => {\n\t\tconst path = eGeneratePath(widgets, items, widgetId);\n\t\twidgets[widgetId].xPath = path;\n\t});\n\treturn widgets;\n};\n\nconst getChangedTranslationList = (\n\tlist,\n\tinitialList,\n\tremovedTranslationList\n) => {\n\tconst deletedTranslationList = [];\n\tconst changedTranslationList = list.filter((item) => {\n\t\tif (removedTranslationList.indexOf(item.key) !== -1) {\n\t\t\titem.id &&\n\t\t\t\tdeletedTranslationList.push({ id: item.id, version: item.version });\n\t\t\treturn false;\n\t\t}\n\t\tif (item.id) {\n\t\t\tconst initialItem = initialList.find(\n\t\t\t\t(i) => i.language === item.language && i.key === item.key\n\t\t\t);\n\t\t\tif (initialItem && initialItem.message !== item.message) {\n\t\t\t\treturn true;\n\t\t\t}\n\t\t\treturn false;\n\t\t}\n\t\treturn true;\n\t});\n\treturn { changedTranslationList, deletedTranslationList };\n};\n\nfunction ToolbarContainer(props) {\n\tconst {\n\t\tstate,\n\t\tupdate,\n\t\tstartLoader,\n\t\tundo,\n\t\tredo,\n\t\tclearHistory,\n\t\tonSelect,\n\t\tonWidgetChange,\n\t} = useStore();\n\tconst [deleteConfirmationDialog, setDeleteConfirmationDialog] =\n\t\tReact.useState(false);\n\tconst { customFieldWidgets, widgets, modelType, isStudioLite, queryModel } =\n\t\tstate;\n\tconst classes = useStyles();\n\n\tconst closeLoader = React.useCallback(() => {\n\t\tupdate((draft) => {\n\t\t\tdraft.loader = false;\n\t\t});\n\t}, [update]);\n\n\tconst showAlert = React.useCallback(\n\t\t(message, title) => {\n\t\t\tconst dialog = {\n\t\t\t\tmessage: translate(message) || translate(\"Some error occurred\"),\n\t\t\t\t...(title ? { title: translate(title) } : {}),\n\t\t\t\ttype: \"alert\",\n\t\t\t};\n\t\t\tupdate((draft) => {\n\t\t\t\tdraft.loader = false;\n\t\t\t\tdraft.dialog = dialog;\n\t\t\t});\n\t\t},\n\t\t[update]\n\t);\n\n\tconst reset = React.useCallback(\n\t\t(updater, draft) => {\n\t\t\tconst callbackfn = (draft) => {\n\t\t\t\tupdater && updater(draft);\n\t\t\t\tdraft.errorList = {};\n\t\t\t\tdraft.customModel = null;\n\t\t\t\tdraft.exView = null;\n\t\t\t\tdraft.view = null;\n\t\t\t\tdraft.extensionXML = null;\n\t\t\t\tdraft.extensionView = null;\n\t\t\t\tdraft.loader = false;\n\t\t\t\tdraft.metaFields = draft.metaFieldStore || [];\n\t\t\t\tdraft.selectedView = null;\n\t\t\t\tdraft.translationList = [];\n\t\t\t\tdraft.initialTranslationList = [];\n\t\t\t\tdraft.attrsList = [];\n\t\t\t\tdraft.model = null;\n\t\t\t\tconst newId = _.uniqueId();\n\t\t\t\tdraft.widgets = {\n\t\t\t\t\t\"-1\": {\n\t\t\t\t\t\ttype: \"form\",\n\t\t\t\t\t\tcols: 12,\n\t\t\t\t\t\textension: false,\n\t\t\t\t\t\tname: isStudioLite ? queryModel?.name : null,\n\t\t\t\t\t\ttitle: isStudioLite ? queryModel?.title : null,\n\t\t\t\t\t\t...Utils.getDefaultProperties(draft.modelType),\n\t\t\t\t\t},\n\t\t\t\t\t0: { type: \"dump_field\", name: \"\" },\n\t\t\t\t\t[newId]: {\n\t\t\t\t\t\tname: `panel${newId}`,\n\t\t\t\t\t\t...PANEL_PROPS,\n\t\t\t\t\t},\n\t\t\t\t};\n\t\t\t\tdraft.items = [`${newId}`];\n\t\t\t\tdraft.editWidget = -1;\n\t\t\t\tdraft.editWidgetType = null;\n\t\t\t\tdraft.tabIndex = 0;\n\t\t\t};\n\t\t\tif (draft) {\n\t\t\t\tcallbackfn(draft);\n\t\t\t} else {\n\t\t\t\tupdate(callbackfn);\n\t\t\t}\n\t\t},\n\t\t[update, isStudioLite, queryModel]\n\t);\n\n\tconst removeView = React.useCallback(\n\t\tfunction removeView() {\n\t\t\tstartLoader();\n\t\t\tconst clearView = (dialog) => {\n\t\t\t\tupdate((draft) => {\n\t\t\t\t\tclearHistory(draft);\n\t\t\t\t\tdraft.customModel = null;\n\t\t\t\t\tdraft.dialog = dialog;\n\t\t\t\t\tdraft.widgets = null;\n\t\t\t\t\tdraft.initialItems = null;\n\t\t\t\t\tdraft.initialWidgets = null;\n\t\t\t\t\tdraft.items = [];\n\t\t\t\t\tdraft.view = null;\n\t\t\t\t\tdraft.metaFields = [];\n\t\t\t\t\tdraft.selectedView = null;\n\t\t\t\t\tdraft.originalXML = null;\n\t\t\t\t\tdraft.extensionXML = null;\n\t\t\t\t\tdraft.selectedView = null;\n\t\t\t\t\tdraft.loader = false;\n\t\t\t\t\tdraft.extensionView = null;\n\t\t\t\t\tdraft.errorList = {};\n\t\t\t\t\tif (draft.modelType === MODEL_TYPE.CUSTOM) {\n\t\t\t\t\t\treset(null, draft);\n\t\t\t\t\t}\n\t\t\t\t});\n\t\t\t};\n\t\t\tif (state.modelType === MODEL_TYPE.CUSTOM) {\n\t\t\t\tif (state.model || state.customModel) {\n\t\t\t\t\tremoveCustomModel(state.model || state.customModel).then((res) => {\n\t\t\t\t\t\tconst { data, status } = res || {};\n\t\t\t\t\t\tif (status === -1) {\n\t\t\t\t\t\t\tconst { message = \"\" } = data || {};\n\t\t\t\t\t\t\tshowAlert(message);\n\t\t\t\t\t\t\treturn;\n\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\tclearView(null);\n\t\t\t\t\t\t}\n\t\t\t\t\t});\n\t\t\t\t}\n\t\t\t} else {\n\t\t\t\tlet record;\n\t\t\t\tif (state.extensionView) {\n\t\t\t\t\trecord = {\n\t\t\t\t\t\tid: state.extensionView.id,\n\t\t\t\t\t\tversion: state.extensionView.version,\n\t\t\t\t\t};\n\t\t\t\t} else if (\n\t\t\t\t\tstate.selectedView &&\n\t\t\t\t\tstate.selectedView.xmlId &&\n\t\t\t\t\tstate.selectedView.xmlId.indexOf(\"studio-\") === 0\n\t\t\t\t) {\n\t\t\t\t\trecord = {\n\t\t\t\t\t\tid: state.selectedView.id,\n\t\t\t\t\t\tversion: state.selectedView.version,\n\t\t\t\t\t};\n\t\t\t\t}\n\t\t\t\tif (record) {\n\t\t\t\t\tmetaViewService.removeAll([record]).then((e) => {\n\t\t\t\t\t\tclearView(null);\n\t\t\t\t\t});\n\t\t\t\t}\n\t\t\t}\n\t\t},\n\t\t[update, state, startLoader, clearHistory, reset, showAlert]\n\t);\n\n\tconst refresh = React.useCallback(async () => {\n\t\tif (state.modelType === MODEL_TYPE.CUSTOM) {\n\t\t\tconst { customModel } = state;\n\t\t\tif (!customModel) return;\n\t\t\tconst record =\n\t\t\t\t(await fetchCustomModel(customModel.id, (error) => {\n\t\t\t\t\tshowAlert(error?.message, error?.title);\n\t\t\t\t})) || {};\n\t\t\tconst { fields = [], ...rest } = record;\n\t\t\tif (rest.studioMenu) {\n\t\t\t\trest.studioMenu = {\n\t\t\t\t\t...customModel.studioMenu,\n\t\t\t\t\t...rest.studioMenu,\n\t\t\t\t};\n\t\t\t}\n\t\t\tfetchJSONFields(\n\t\t\t\tfields.map((f) => f.id),\n\t\t\t\tupdate,\n\t\t\t\trest\n\t\t\t);\n\t\t\tupdate((draft) => {\n\t\t\t\tdraft.customModel = {\n\t\t\t\t\t...(record || {}),\n\t\t\t\t\tstudioMenu: rest?.studioMenu,\n\t\t\t\t};\n\t\t\t\tdraft.model = record;\n\t\t\t\tdraft.loader = false;\n\t\t\t\tdraft.removedCustomFields = [];\n\t\t\t\tdraft.errorList = {};\n\t\t\t\tclearHistory(draft);\n\t\t\t});\n\t\t} else {\n\t\t\tif (state.widgets) {\n\t\t\t\tconst { view } = state;\n\t\t\t\tconst res = await metaViewService.fetch(view?.view?.id);\n\t\t\t\tif (res && res.status === -1) {\n\t\t\t\t\tconst { message, title } = res.data || {};\n\t\t\t\t\tshowAlert(message, title);\n\t\t\t\t\treturn;\n\t\t\t\t}\n\t\t\t\tconst record = res && res.data && res.data[0];\n\t\t\t\tconst attrsList = await fetchAttrsList({\n\t\t\t\t\tmodel: state.model.fullName,\n\t\t\t\t\tview: state.selectedView.name,\n\t\t\t\t});\n\t\t\t\tupdate((draft) => {\n\t\t\t\t\tdraft.loader = false;\n\t\t\t\t\tconst views = draft.view;\n\t\t\t\t\tconst schema = Utils.generateXMLToViewSchema({\n\t\t\t\t\t\tview: record,\n\t\t\t\t\t\tfields: draft.metaFieldStore,\n\t\t\t\t\t\textensionXML: views.extensionXML,\n\t\t\t\t\t\tattrsList: attrsList || [],\n\t\t\t\t\t});\n\t\t\t\t\tdraft.widgets = schema.widgets;\n\t\t\t\t\tdraft.initialWidgets = schema.widgets;\n\t\t\t\t\tdraft.items = schema.items;\n\t\t\t\t\tdraft.initialItems = schema.items;\n\t\t\t\t\tdraft.extensionMoves = [];\n\t\t\t\t\tdraft.attrsList = attrsList || [];\n\t\t\t\t\tdraft.errorList = {};\n\t\t\t\t\tdraft.baseHasChanges = false;\n\t\t\t\t\tgenerateXpath(draft);\n\t\t\t\t\tclearHistory(draft);\n\t\t\t\t});\n\t\t\t}\n\t\t\tif (\n\t\t\t\t(state.customFieldItems || state.removedCustomFields.length) &&\n\t\t\t\tstate.modelField?.name\n\t\t\t) {\n\t\t\t\tstartLoader();\n\t\t\t\tfetchCustomFields(state.modelField, state.model).then((res) => {\n\t\t\t\t\tif (res && res.status === -1) {\n\t\t\t\t\t\tconst { message, title } = res.data || {};\n\t\t\t\t\t\tshowAlert(message, title);\n\t\t\t\t\t\treturn;\n\t\t\t\t\t}\n\t\t\t\t\tconst { data = [] } = res;\n\t\t\t\t\tconst schema = generateCustomModelSchema(\n\t\t\t\t\t\tdata,\n\t\t\t\t\t\tundefined,\n\t\t\t\t\t\t\"\",\n\t\t\t\t\t\t\"customForm\"\n\t\t\t\t\t);\n\t\t\t\t\tupdate((draft) => {\n\t\t\t\t\t\tconst newId = _.uniqueId();\n\t\t\t\t\t\tdraft.customFieldWidgets =\n\t\t\t\t\t\t\tObject.keys(schema.widgets)?.length > 2\n\t\t\t\t\t\t\t\t? schema.widgets\n\t\t\t\t\t\t\t\t: {\n\t\t\t\t\t\t\t\t\t\t...schema.widgets,\n\t\t\t\t\t\t\t\t\t\t[newId]: {\n\t\t\t\t\t\t\t\t\t\t\tname: `panel${newId}`,\n\t\t\t\t\t\t\t\t\t\t\t...PANEL_PROPS,\n\t\t\t\t\t\t\t\t\t\t\tmodel: draft.model.fullName,\n\t\t\t\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t\t  };\n\t\t\t\t\t\tdraft.customFieldItems =\n\t\t\t\t\t\t\tschema.items?.length > 0 ? schema.items : [`${newId}`];\n\t\t\t\t\t\tdraft.customFields = data;\n\t\t\t\t\t\tdraft.loader = false;\n\t\t\t\t\t\tdraft.removedCustomFields = [];\n\t\t\t\t\t\tdraft.errorList = {};\n\t\t\t\t\t\tdraft.customFieldHasChanges = false;\n\t\t\t\t\t\tclearHistory(draft);\n\t\t\t\t\t});\n\t\t\t\t});\n\t\t\t} else {\n\t\t\t\tcloseLoader();\n\t\t\t}\n\t\t}\n\t}, [update, state, closeLoader, startLoader, showAlert, clearHistory]);\n\n\tconst isTabsPanelEmpty = React.useCallback(() => {\n\t\tconst propertyValues =\n\t\t\tObject.values(\n\t\t\t\t(modelType === MODEL_TYPE.BASE ? customFieldWidgets : widgets) || {}\n\t\t\t) || [];\n\t\tconst panelTab = propertyValues.find((v) => v.type === TYPE.tabs);\n\t\tif (panelTab && !panelTab?.items?.length) {\n\t\t\tshowAlert(\"Tabs should have atleast one panel\");\n\t\t\treturn false;\n\t\t} else {\n\t\t\treturn true;\n\t\t}\n\t}, [customFieldWidgets, widgets, modelType, showAlert]);\n\n\tconst isOnlySidePanel = React.useCallback(() => {\n\t\tconst { sideItems, mainItems } = state;\n\t\tif (sideItems.length && !mainItems.length) {\n\t\t\tshowAlert(\"Main panel is required to have side panels\");\n\t\t\treturn true;\n\t\t}\n\t\treturn false;\n\t}, [state, showAlert]);\n\n\tconst saveView = React.useCallback(async () => {\n\t\tif (!state.widgets) {\n\t\t\treturn;\n\t\t}\n\t\tif (!isTabsPanelEmpty() || isOnlySidePanel()) return;\n\t\tstartLoader();\n\t\tif (window.parent) {\n\t\t\twindow.parent.studioOutput = JSON.stringify({\n\t\t\t\tisSave: true,\n\t\t\t\tform: state.widgets[-1]?.title,\n\t\t\t});\n\t\t}\n\t\tif (state.modelType === MODEL_TYPE.CUSTOM) {\n\t\t\tconst { fields } = Utils.getCustomModelFields(\n\t\t\t\tstate.items,\n\t\t\t\tstate.widgets,\n\t\t\t\tnull,\n\t\t\t\ttrue\n\t\t\t);\n\t\t\tconst propertyValues = Object.values(state.widgets || {}) || [];\n\t\t\tconst uniqueValues = new Set(propertyValues.map((v) => v.name)) || [];\n\t\t\tif (uniqueValues.size < propertyValues.length) {\n\t\t\t\tshowAlert(\"Field name should be unique\");\n\t\t\t\treturn;\n\t\t\t}\n\t\t\tconst formProperties = state.widgets[-1];\n\t\t\tif (!formProperties.name || !formProperties.title) {\n\t\t\t\tshowAlert(\"Please enter form name and title\");\n\t\t\t\treturn;\n\t\t\t}\n\t\t\tif (state.removedCustomFields.length) {\n\t\t\t\tconst res = await customFieldService.removeAll(\n\t\t\t\t\tstate.removedCustomFields\n\t\t\t\t);\n\t\t\t\tif (res && res.status === -1) {\n\t\t\t\t\tconst { message, title } = res.data || {};\n\t\t\t\t\tshowAlert(message, title);\n\t\t\t\t\treturn;\n\t\t\t\t}\n\t\t\t}\n\t\t\tlet customModel = {\n\t\t\t\t...state.customModel,\n\t\t\t\t...Utils.getFormProperties(formProperties),\n\t\t\t\tfields,\n\t\t\t\t...(state.customModel && { version: state.customModel.version }),\n\t\t\t};\n\t\t\tif (formProperties.isGenerateMenu === true) {\n\t\t\t\tcustomModel[\"studioMenu\"] = {\n\t\t\t\t\t...(state.customModel || {}).studioMenu,\n\t\t\t\t\ttitle: formProperties.menuBuilderTitle,\n\t\t\t\t\tparentMenu: formProperties.menuBuilderParent,\n\t\t\t\t\tversion: ((state.customModel || {}).studioMenu || {}).$version,\n\t\t\t\t};\n\t\t\t}\n\t\t\tconst { isGenerateMenu } = state.customModel || {};\n\t\t\tif (formProperties.isGenerateMenu !== isGenerateMenu) {\n\t\t\t\tconst res = await generateMenuChange(customModel);\n\t\t\t\tconst { data = [] } = res;\n\t\t\t\tif (data[0] && data[0].reload) {\n\t\t\t\t\tconst modelResult = await fetchCustomModel(\n\t\t\t\t\t\tcustomModel.id,\n\t\t\t\t\t\t(error) => {\n\t\t\t\t\t\t\tshowAlert(error?.message, error?.title);\n\t\t\t\t\t\t}\n\t\t\t\t\t);\n\t\t\t\t\tif (!modelResult) return;\n\t\t\t\t\tcustomModel = {\n\t\t\t\t\t\t...customModel,\n\t\t\t\t\t\tstudioMenu: null,\n\t\t\t\t\t\tversion: modelResult.version,\n\t\t\t\t\t};\n\t\t\t\t}\n\t\t\t}\n\t\t\tsaveCustomModel(customModel).then((res) => {\n\t\t\t\tconst { data, status } = res || {};\n\t\t\t\tif (status === -1) {\n\t\t\t\t\tconst { message = \"\", title } = data || {};\n\t\t\t\t\tlet errorMessage = message;\n\t\t\t\t\tif (\n\t\t\t\t\t\ttitle &&\n\t\t\t\t\t\ttitle.includes(translate(\"Unique constraint violation\"))\n\t\t\t\t\t) {\n\t\t\t\t\t\terrorMessage = translate(\"Model name should be unique\");\n\t\t\t\t\t\tif (message.includes(\"com.axelor.meta.db.MetaJsonRecord\")) {\n\t\t\t\t\t\t\terrorMessage = translate(\"Field name should be unique\");\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t\tshowAlert(errorMessage);\n\t\t\t\t\treturn;\n\t\t\t\t}\n\t\t\t\tconst record = data && data[0];\n\t\t\t\tconst { fields = [], ...rest } = record;\n\t\t\t\tif (rest.studioMenu) {\n\t\t\t\t\trest.studioMenu = {\n\t\t\t\t\t\t...customModel.studioMenu,\n\t\t\t\t\t\t...rest.studioMenu,\n\t\t\t\t\t};\n\t\t\t\t}\n\t\t\t\tfetchJSONFields(\n\t\t\t\t\tfields.map((f) => f.id),\n\t\t\t\t\tupdate,\n\t\t\t\t\trest\n\t\t\t\t);\n\t\t\t\tupdate((draft) => {\n\t\t\t\t\tdraft.customModel = record;\n\t\t\t\t\tdraft.model = record;\n\t\t\t\t\tdraft.loader = false;\n\t\t\t\t\tdraft.removedCustomFields = [];\n\t\t\t\t\tclearHistory(draft);\n\t\t\t\t});\n\t\t\t});\n\t\t} else {\n\t\t\tif (state.widgets) {\n\t\t\t\tconst exemptAttributes = [\n\t\t\t\t\t\"viewId\",\n\t\t\t\t\t\"modelId\",\n\t\t\t\t\t\"version\",\n\t\t\t\t\t\"helpOverride\",\n\t\t\t\t\t\"menubar\",\n\t\t\t\t\t\"xml\",\n\t\t\t\t\t\"computed\",\n\t\t\t\t\t\"xmlId\",\n\t\t\t\t\t\"type\",\n\t\t\t\t\t\"cols\",\n\t\t\t\t\t\"colSpan\",\n\t\t\t\t\t\"serverType\",\n\t\t\t\t];\n\t\t\t\tif (!state.exView || Utils.isCreatedFromStudio(state.exView)) {\n\t\t\t\t\tconst formProperties = state.widgets[-1];\n\t\t\t\t\tif (!formProperties.name || !formProperties.title) {\n\t\t\t\t\t\tshowAlert(\"Please enter form name and title\");\n\t\t\t\t\t\treturn;\n\t\t\t\t\t}\n\t\t\t\t\tconst viewSearch = await metaViewService.search({\n\t\t\t\t\t\tdata: { _domain: `self.name = '${formProperties.name}'` },\n\t\t\t\t\t});\n\t\t\t\t\tif (\n\t\t\t\t\t\tviewSearch &&\n\t\t\t\t\t\tviewSearch.total &&\n\t\t\t\t\t\tviewSearch.total > 0 &&\n\t\t\t\t\t\t!state.exView?.id\n\t\t\t\t\t) {\n\t\t\t\t\t\tshowAlert(\"View name already exists\");\n\t\t\t\t\t\treturn;\n\t\t\t\t\t}\n\t\t\t\t\tconst patch = generateView(\n\t\t\t\t\t\tstate.widgets,\n\t\t\t\t\t\tstate.items,\n\t\t\t\t\t\tstate.modelType\n\t\t\t\t\t);\n\t\t\t\t\tconst model = state.model.fullName;\n\t\t\t\t\tconst form = {\n\t\t\t\t\t\telements: [\n\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\tname: \"form\",\n\t\t\t\t\t\t\t\ttype: \"element\",\n\t\t\t\t\t\t\t\tattributes: {\n\t\t\t\t\t\t\t\t\tmodel,\n\t\t\t\t\t\t\t\t\t...Utils.getFormProperties(formProperties, [\n\t\t\t\t\t\t\t\t\t\t...exemptAttributes,\n\t\t\t\t\t\t\t\t\t\t\"extension\",\n\t\t\t\t\t\t\t\t\t\t\"id\",\n\t\t\t\t\t\t\t\t\t]),\n\t\t\t\t\t\t\t\t\tid:\n\t\t\t\t\t\t\t\t\t\tstate.exView && state.exView.xmlId\n\t\t\t\t\t\t\t\t\t\t\t? state.exView.xmlId\n\t\t\t\t\t\t\t\t\t\t\t: `studio-${formProperties.name}`,\n\t\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t\telements: [...patch],\n\t\t\t\t\t\t\t},\n\t\t\t\t\t\t],\n\t\t\t\t\t};\n\t\t\t\t\tconst xml = Utils.processXML(\n\t\t\t\t\t\tconvert.json2xml(form, {\n\t\t\t\t\t\t\tcompact: false,\n\t\t\t\t\t\t\tfullTagEmptyElement: false,\n\t\t\t\t\t\t})\n\t\t\t\t\t);\n\t\t\t\t\tlet data = {\n\t\t\t\t\t\txml,\n\t\t\t\t\t\textension: formProperties.extension,\n\t\t\t\t\t\ttype: \"form\",\n\t\t\t\t\t\tname: formProperties.name,\n\t\t\t\t\t\ttitle: formProperties.title,\n\t\t\t\t\t\tmodel,\n\t\t\t\t\t\txmlId: `studio-${formProperties.name}`,\n\t\t\t\t\t};\n\t\t\t\t\tif (state.exView && state.exView.id) {\n\t\t\t\t\t\tdata[\"id\"] = state.exView.id;\n\t\t\t\t\t\tdata[\"version\"] = state.exView.version;\n\t\t\t\t\t\tdata[\"xmlId\"] = state.exView.xmlId || data.xmlId;\n\t\t\t\t\t}\n\t\t\t\t\tmetaViewService.save(data).then(async (res) => {\n\t\t\t\t\t\tif (res.status === -1) {\n\t\t\t\t\t\t\tconst error = res.data;\n\t\t\t\t\t\t\tshowAlert(error?.string || error?.message, error?.title);\n\t\t\t\t\t\t} else if (res.data && res.data[0]) {\n\t\t\t\t\t\t\tconst fetchResult = await metaViewService.fetch(res.data[0].id);\n\t\t\t\t\t\t\tif (fetchResult.data && fetchResult.data[0]) {\n\t\t\t\t\t\t\t\tconst record = fetchResult.data[0];\n\t\t\t\t\t\t\t\tupdate((draft) => {\n\t\t\t\t\t\t\t\t\tconst schema = Utils.generateXMLToViewSchema({\n\t\t\t\t\t\t\t\t\t\tview: record,\n\t\t\t\t\t\t\t\t\t\tfields: draft.metaFieldStore,\n\t\t\t\t\t\t\t\t\t});\n\t\t\t\t\t\t\t\t\tdraft.widgets = schema.widgets;\n\t\t\t\t\t\t\t\t\tdraft.initialWidgets = schema.widgets;\n\t\t\t\t\t\t\t\t\tdraft.items = schema.items;\n\t\t\t\t\t\t\t\t\tdraft.initialItems = schema.items;\n\t\t\t\t\t\t\t\t\tdraft.metaView = record;\n\t\t\t\t\t\t\t\t\tdraft.exView = record;\n\t\t\t\t\t\t\t\t\tdraft.selectedView = { ...record };\n\t\t\t\t\t\t\t\t\tdraft.loader = false;\n\t\t\t\t\t\t\t\t\tdraft.baseHasChanges = false;\n\t\t\t\t\t\t\t\t\tclearHistory(draft);\n\t\t\t\t\t\t\t\t});\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t});\n\t\t\t\t} else {\n\t\t\t\t\tconst { view } = state.view;\n\t\t\t\t\tconst model = state.model.fullName;\n\t\t\t\t\tconst originalSchema = Utils.generateViewFromJson({\n\t\t\t\t\t\tview: state.originalXML,\n\t\t\t\t\t\tfields: state.metaFieldStore,\n\t\t\t\t\t});\n\t\t\t\t\tconst widgets = getWidgets(originalSchema);\n\t\t\t\t\tconst moves = optimizeExtension(state, widgets);\n\t\t\t\t\tconst { changedAttrsList, removedAttrsList } = getUpdatedAttrsList(\n\t\t\t\t\t\tstate,\n\t\t\t\t\t\twidgets\n\t\t\t\t\t);\n\t\t\t\t\tconst extension = getXML(moves, state);\n\t\t\t\t\tlet isAttrsChanged = false;\n\t\t\t\t\tlet attrsList = [];\n\t\t\t\t\tif (changedAttrsList.length) {\n\t\t\t\t\t\tisAttrsChanged = true;\n\t\t\t\t\t\tconst conditionalValues = Object.values(conditionProperties);\n\t\t\t\t\t\tconst list = changedAttrsList.map((attr) => {\n\t\t\t\t\t\t\tif (\n\t\t\t\t\t\t\t\t[...conditionalValues, ...otherNoQuoteProps].includes(attr.name)\n\t\t\t\t\t\t\t) {\n\t\t\t\t\t\t\t\treturn attr;\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\treturn { ...attr, value: `\"${attr.value}\"` };\n\t\t\t\t\t\t});\n\t\t\t\t\t\tawait saveAttrsList(list, (error) => {\n\t\t\t\t\t\t\tshowAlert(error?.message, error?.title);\n\t\t\t\t\t\t});\n\t\t\t\t\t}\n\t\t\t\t\tif (removedAttrsList.length) {\n\t\t\t\t\t\tisAttrsChanged = true;\n\t\t\t\t\t\tawait deleteAttrsList(removedAttrsList, (error) => {\n\t\t\t\t\t\t\tshowAlert(error?.message, error?.title);\n\t\t\t\t\t\t});\n\t\t\t\t\t}\n\t\t\t\t\tif (isAttrsChanged) {\n\t\t\t\t\t\tattrsList = await fetchAttrsList({\n\t\t\t\t\t\t\tmodel: state.model.fullName,\n\t\t\t\t\t\t\tview: state.selectedView.name,\n\t\t\t\t\t\t});\n\t\t\t\t\t}\n\t\t\t\t\tconst { changedTranslationList, deletedTranslationList } =\n\t\t\t\t\t\tgetChangedTranslationList(\n\t\t\t\t\t\t\tstate.translationList,\n\t\t\t\t\t\t\tstate.initialTranslationList,\n\t\t\t\t\t\t\tstate.removedTranslationList\n\t\t\t\t\t\t);\n\t\t\t\t\tlet translationList = [];\n\t\t\t\t\tlet isTranslationChanged = false;\n\t\t\t\t\tif (changedTranslationList.length) {\n\t\t\t\t\t\tisTranslationChanged = true;\n\t\t\t\t\t\tawait saveTranslationList(changedTranslationList, (error) => {\n\t\t\t\t\t\t\tshowAlert(error?.message, error?.title);\n\t\t\t\t\t\t});\n\t\t\t\t\t}\n\t\t\t\t\tif (deletedTranslationList.length) {\n\t\t\t\t\t\tisTranslationChanged = true;\n\t\t\t\t\t\tawait deleteTranslationList(deletedTranslationList, (error) => {\n\t\t\t\t\t\t\tshowAlert(error?.message, error?.title);\n\t\t\t\t\t\t});\n\t\t\t\t\t}\n\t\t\t\t\tif (isTranslationChanged) {\n\t\t\t\t\t\tconst translationNames = Object.values(state.widgets)\n\t\t\t\t\t\t\t.filter(\n\t\t\t\t\t\t\t\t(widget) => widget.title && widget.title.startsWith(\"studio:\")\n\t\t\t\t\t\t\t)\n\t\t\t\t\t\t\t.map((widget) => widget.title);\n\t\t\t\t\t\ttranslationList = await getTranslationList(translationNames);\n\t\t\t\t\t\tupdate((draft) => {\n\t\t\t\t\t\t\tdraft.translationList = translationList;\n\t\t\t\t\t\t\tdraft.initialTranslationList = translationList;\n\t\t\t\t\t\t\tdraft.removedTranslationList = [];\n\t\t\t\t\t\t});\n\t\t\t\t\t}\n\t\t\t\t\tif (!extension.length && !state.extensionXML) {\n\t\t\t\t\t\tif (state.extensionView) {\n\t\t\t\t\t\t\tremoveView();\n\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\tupdate((draft) => {\n\t\t\t\t\t\t\t\tdraft.loader = false;\n\t\t\t\t\t\t\t\tconst views = draft.view;\n\t\t\t\t\t\t\t\tif (isAttrsChanged) {\n\t\t\t\t\t\t\t\t\tconst schema = Utils.generateXMLToViewSchema({\n\t\t\t\t\t\t\t\t\t\tview: views.view,\n\t\t\t\t\t\t\t\t\t\tfields: draft.metaFieldStore,\n\t\t\t\t\t\t\t\t\t\textensionXML: views.extensionXML,\n\t\t\t\t\t\t\t\t\t\tattrsList,\n\t\t\t\t\t\t\t\t\t});\n\t\t\t\t\t\t\t\t\tdraft.widgets = schema.widgets;\n\t\t\t\t\t\t\t\t\tdraft.initialWidgets = schema.widgets;\n\t\t\t\t\t\t\t\t\tdraft.items = schema.items;\n\t\t\t\t\t\t\t\t\tdraft.initialItems = schema.items;\n\t\t\t\t\t\t\t\t\tdraft.extensionMoves = [];\n\t\t\t\t\t\t\t\t\tdraft.attrsList = attrsList;\n\t\t\t\t\t\t\t\t\tdraft.baseHasChanges = false;\n\t\t\t\t\t\t\t\t\tgenerateXpath(draft);\n\t\t\t\t\t\t\t\t\tclearHistory(draft);\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t});\n\t\t\t\t\t\t}\n\t\t\t\t\t\treturn;\n\t\t\t\t\t}\n\t\t\t\t\tconst getExistingExtension = (json) => {\n\t\t\t\t\t\tif (!json) {\n\t\t\t\t\t\t\treturn [];\n\t\t\t\t\t\t}\n\t\t\t\t\t\tconst { elements } = json;\n\t\t\t\t\t\tif (elements[0] && elements[0].elements) {\n\t\t\t\t\t\t\treturn elements[0].elements;\n\t\t\t\t\t\t}\n\t\t\t\t\t};\n\t\t\t\t\tconst form = {\n\t\t\t\t\t\telements: [\n\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\ttype: \"element\",\n\t\t\t\t\t\t\t\tname: state.widgets[-1].type,\n\t\t\t\t\t\t\t\tattributes: {\n\t\t\t\t\t\t\t\t\tmodel,\n\t\t\t\t\t\t\t\t\tid: `studio-${view.name}`,\n\t\t\t\t\t\t\t\t\ttitle: state.widgets[-1].title,\n\t\t\t\t\t\t\t\t\tname: view.name,\n\t\t\t\t\t\t\t\t\textension: \"true\",\n\t\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t\telements: [\n\t\t\t\t\t\t\t\t\t...getExistingExtension(state.extensionXML),\n\t\t\t\t\t\t\t\t\t...extension,\n\t\t\t\t\t\t\t\t],\n\t\t\t\t\t\t\t},\n\t\t\t\t\t\t],\n\t\t\t\t\t};\n\t\t\t\t\tconst xml = Utils.processXML(\n\t\t\t\t\t\tconvert.json2xml(form, {\n\t\t\t\t\t\t\tcompact: false,\n\t\t\t\t\t\t\tfullTagEmptyElement: false,\n\t\t\t\t\t\t})\n\t\t\t\t\t);\n\t\t\t\t\tlet data = {\n\t\t\t\t\t\txml,\n\t\t\t\t\t\textension: true,\n\t\t\t\t\t\ttype: state.widgets[-1].type,\n\t\t\t\t\t};\n\t\t\t\t\tif (state.extensionView) {\n\t\t\t\t\t\tdata = {\n\t\t\t\t\t\t\t...data,\n\t\t\t\t\t\t\tid: state.extensionView.id,\n\t\t\t\t\t\t\tversion: state.extensionView.version,\n\t\t\t\t\t\t};\n\t\t\t\t\t} else {\n\t\t\t\t\t\tdata = {\n\t\t\t\t\t\t\t...data,\n\t\t\t\t\t\t\tmodel,\n\t\t\t\t\t\t\tname: view.name,\n\t\t\t\t\t\t\ttitle: view.title,\n\t\t\t\t\t\t\txmlId: `studio-${view.name}`,\n\t\t\t\t\t\t};\n\t\t\t\t\t}\n\t\t\t\t\tif (state.extensionView) {\n\t\t\t\t\t\tif (state.extensionView.xml === data.xml) {\n\t\t\t\t\t\t\tupdate((draft) => {\n\t\t\t\t\t\t\t\tdraft.loader = false;\n\t\t\t\t\t\t\t\tif (isAttrsChanged) {\n\t\t\t\t\t\t\t\t\tupdate((draft) => {\n\t\t\t\t\t\t\t\t\t\tdraft.loader = false;\n\t\t\t\t\t\t\t\t\t\tconst views = draft.view;\n\t\t\t\t\t\t\t\t\t\tconst schema = Utils.generateXMLToViewSchema({\n\t\t\t\t\t\t\t\t\t\t\tview: views.view,\n\t\t\t\t\t\t\t\t\t\t\tfields: draft.metaFieldStore,\n\t\t\t\t\t\t\t\t\t\t\textensionXML: views.extensionXML,\n\t\t\t\t\t\t\t\t\t\t\tattrsList,\n\t\t\t\t\t\t\t\t\t\t});\n\t\t\t\t\t\t\t\t\t\tdraft.widgets = schema.widgets;\n\t\t\t\t\t\t\t\t\t\tdraft.initialWidgets = schema.widgets;\n\t\t\t\t\t\t\t\t\t\tdraft.items = schema.items;\n\t\t\t\t\t\t\t\t\t\tdraft.initialItems = schema.items;\n\t\t\t\t\t\t\t\t\t\tif (isAttrsChanged) {\n\t\t\t\t\t\t\t\t\t\t\tdraft.attrsList = attrsList;\n\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\tdraft.baseHasChanges = false;\n\t\t\t\t\t\t\t\t\t\tgenerateXpath(draft);\n\t\t\t\t\t\t\t\t\t\tclearHistory(draft);\n\t\t\t\t\t\t\t\t\t});\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t});\n\t\t\t\t\t\t\treturn;\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t\tmetaViewService.save(data).then(async (res) => {\n\t\t\t\t\t\tif (res.status === -1) {\n\t\t\t\t\t\t\tshowAlert(res.data?.string);\n\t\t\t\t\t\t} else if (res.data && res.data[0]) {\n\t\t\t\t\t\t\tconst record = res.data[0];\n\t\t\t\t\t\t\tconst { view } = state.view;\n\t\t\t\t\t\t\tconst views = await fetchViews(view);\n\t\t\t\t\t\t\tupdate((draft) => {\n\t\t\t\t\t\t\t\tconst schema = Utils.generateXMLToViewSchema({\n\t\t\t\t\t\t\t\t\tview: views.view,\n\t\t\t\t\t\t\t\t\tfields: draft.metaFieldStore,\n\t\t\t\t\t\t\t\t\textensionXML: views.extensionXML,\n\t\t\t\t\t\t\t\t\tattrsList,\n\t\t\t\t\t\t\t\t});\n\t\t\t\t\t\t\t\tdraft.widgets = schema.widgets;\n\t\t\t\t\t\t\t\tdraft.initialWidgets = schema.widgets;\n\t\t\t\t\t\t\t\tdraft.items = schema.items;\n\t\t\t\t\t\t\t\tdraft.initialItems = schema.items;\n\t\t\t\t\t\t\t\tdraft.exView = res.data[0];\n\t\t\t\t\t\t\t\tdraft.extensionMoves = [];\n\t\t\t\t\t\t\t\tdraft.loader = false;\n\t\t\t\t\t\t\t\tif (isAttrsChanged) {\n\t\t\t\t\t\t\t\t\tdraft.attrsList = attrsList;\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\tdraft.extensionView = {\n\t\t\t\t\t\t\t\t\t...draft.extensionView,\n\t\t\t\t\t\t\t\t\t...record,\n\t\t\t\t\t\t\t\t\tversion:\n\t\t\t\t\t\t\t\t\t\tviews.extensionXML.id === record.id\n\t\t\t\t\t\t\t\t\t\t\t? views.extensionXML.version\n\t\t\t\t\t\t\t\t\t\t\t: record.version,\n\t\t\t\t\t\t\t\t};\n\t\t\t\t\t\t\t\tdraft.baseHasChanges = false;\n\t\t\t\t\t\t\t\tgenerateXpath(draft);\n\t\t\t\t\t\t\t\tclearHistory(draft);\n\t\t\t\t\t\t\t});\n\t\t\t\t\t\t}\n\t\t\t\t\t});\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}, [\n\t\tstate,\n\t\tupdate,\n\t\tstartLoader,\n\t\tisTabsPanelEmpty,\n\t\tisOnlySidePanel,\n\t\tremoveView,\n\t\tclearHistory,\n\t\tshowAlert,\n\t]);\n\n\tconst handleClose = React.useCallback(() => {\n\t\tupdate((draft) => {\n\t\t\tdraft.dialog = null;\n\t\t});\n\t}, [update]);\n\n\tconst handleNew = React.useCallback(() => {\n\t\tstartLoader();\n\t\treset((draft) => {\n\t\t\tclearHistory(draft);\n\t\t});\n\t}, [reset, startLoader, clearHistory]);\n\n\tReact.useEffect(() => {\n\t\treset((draft) => {\n\t\t\tdraft.modelType = MODEL_TYPE.CUSTOM;\n\t\t});\n\t}, [reset]);\n\n\tconst saveCustomFieldView = React.useCallback(async () => {\n\t\tif (\n\t\t\t(state.customFieldItems || state.removedCustomFields.length) &&\n\t\t\tstate.modelField?.name\n\t\t) {\n\t\t\tif (!isTabsPanelEmpty()) return;\n\t\t\tconst customWidgets = Object.fromEntries(\n\t\t\t\tObject.entries(state.customFieldWidgets).filter(\n\t\t\t\t\t([, value]) =>\n\t\t\t\t\t\t(value.type === ItemTypes.CONTAINER && value.items?.length > 0) ||\n\t\t\t\t\t\tisPanelTab(value) || //allowing empty panel tab\n\t\t\t\t\t\tvalue.type !== ItemTypes.CONTAINER ||\n\t\t\t\t\t\ttypeof value.id === \"number\"\n\t\t\t\t)\n\t\t\t);\n\t\t\tconst propertyValues = Object.values(customWidgets || {}) || [];\n\t\t\tconst uniqueValues = new Set(propertyValues.map((v) => v.name)) || [];\n\t\t\tif (\n\t\t\t\tuniqueValues.size <\n\t\t\t\t(\n\t\t\t\t\t(propertyValues &&\n\t\t\t\t\t\tpropertyValues.filter((f) => f.type !== \"customForm\")) ||\n\t\t\t\t\t[]\n\t\t\t\t).length\n\t\t\t) {\n\t\t\t\tshowAlert(\"Field name should be unique\");\n\t\t\t\treturn;\n\t\t\t}\n\t\t\tstartLoader();\n\t\t\tconst extraProps = {\n\t\t\t\tmodelField: state.modelField.name,\n\t\t\t\tmodel: state.model.fullName,\n\t\t\t};\n\t\t\tconst { fields } = Utils.getCustomModelFields(\n\t\t\t\tstate.customFieldItems,\n\t\t\t\tcustomWidgets,\n\t\t\t\textraProps,\n\t\t\t\ttrue\n\t\t\t);\n\t\t\tif (fields.length || state.removedCustomFields.length) {\n\t\t\t\tif (state.removedCustomFields.length) {\n\t\t\t\t\tconst res = await customFieldService.removeAll(\n\t\t\t\t\t\tstate.removedCustomFields\n\t\t\t\t\t);\n\t\t\t\t\tif (res && res.status === -1) {\n\t\t\t\t\t\tconst { message, title } = res.data || {};\n\t\t\t\t\t\tshowAlert(message, title);\n\t\t\t\t\t\treturn;\n\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t\tconst all = fields.map((field) => customFieldService.save(field));\n\t\t\t\tconst res = await Promise.all(all);\n\t\t\t\tconst failedRes = res && res.find((r) => r.status === -1);\n\t\t\t\tif (failedRes && failedRes.data) {\n\t\t\t\t\tconst { title, message } = failedRes.data || {};\n\t\t\t\t\tlet errorMessage = message;\n\t\t\t\t\tif (\n\t\t\t\t\t\ttitle &&\n\t\t\t\t\t\ttitle.includes(translate(\"Unique constraint violation\"))\n\t\t\t\t\t) {\n\t\t\t\t\t\terrorMessage = \"Field name should be unique\";\n\t\t\t\t\t}\n\t\t\t\t\tshowAlert(errorMessage);\n\t\t\t\t\treturn;\n\t\t\t\t}\n\t\t\t\tfetchCustomFields(state.modelField, state.model).then((res) => {\n\t\t\t\t\tconst { data = [] } = res;\n\t\t\t\t\tconst schema = generateCustomModelSchema(\n\t\t\t\t\t\tdata,\n\t\t\t\t\t\tundefined,\n\t\t\t\t\t\t\"\",\n\t\t\t\t\t\t\"customForm\"\n\t\t\t\t\t);\n\t\t\t\t\tupdate((draft) => {\n\t\t\t\t\t\tconst newId = _.uniqueId();\n\t\t\t\t\t\tdraft.customFieldWidgets =\n\t\t\t\t\t\t\tObject.keys(schema.widgets)?.length > 2\n\t\t\t\t\t\t\t\t? schema.widgets\n\t\t\t\t\t\t\t\t: {\n\t\t\t\t\t\t\t\t\t\t...schema.widgets,\n\t\t\t\t\t\t\t\t\t\t[newId]: {\n\t\t\t\t\t\t\t\t\t\t\tname: `panel${newId}`,\n\t\t\t\t\t\t\t\t\t\t\t...PANEL_PROPS,\n\t\t\t\t\t\t\t\t\t\t\tmodel: draft.model.fullName,\n\t\t\t\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t\t  };\n\t\t\t\t\t\tdraft.customFieldItems =\n\t\t\t\t\t\t\tschema.items?.length > 0 ? schema.items : [`${newId}`];\n\t\t\t\t\t\tdraft.customFields = data;\n\t\t\t\t\t\tdraft.loader = false;\n\t\t\t\t\t\tdraft.removedCustomFields = [];\n\t\t\t\t\t\tdraft.customFieldHasChanges = false;\n\t\t\t\t\t\tclearHistory(draft);\n\t\t\t\t\t});\n\t\t\t\t});\n\t\t\t} else {\n\t\t\t\tcloseLoader();\n\t\t\t\tconst schema = generateCustomModelSchema(\n\t\t\t\t\t[],\n\t\t\t\t\tundefined,\n\t\t\t\t\t\"\",\n\t\t\t\t\t\"customForm\"\n\t\t\t\t);\n\t\t\t\tconst newId = _.uniqueId();\n\t\t\t\tupdate((draft) => {\n\t\t\t\t\tdraft.customFieldWidgets = {\n\t\t\t\t\t\t...schema.widgets,\n\t\t\t\t\t\t[newId]: {\n\t\t\t\t\t\t\tname: `panel${newId}`,\n\t\t\t\t\t\t\t...PANEL_PROPS,\n\t\t\t\t\t\t\tmodel: draft.model.fullName,\n\t\t\t\t\t\t},\n\t\t\t\t\t};\n\t\t\t\t\tdraft.customFieldItems = [`${newId}`];\n\t\t\t\t\tdraft.customFieldHasChanges = false;\n\t\t\t\t\tclearHistory(draft);\n\t\t\t\t});\n\t\t\t}\n\t\t}\n\t}, [\n\t\tupdate,\n\t\tcloseLoader,\n\t\tstate,\n\t\tstartLoader,\n\t\tisTabsPanelEmpty,\n\t\tclearHistory,\n\t\tshowAlert,\n\t]);\n\n\tconst handleConfirmationClose = React.useCallback(() => {\n\t\tsetDeleteConfirmationDialog(false);\n\t}, []);\n\n\tconst deleteView = React.useCallback(() => {\n\t\tsetDeleteConfirmationDialog(true);\n\t}, []);\n\n\tconst handleRemoveConfirmation = React.useCallback(() => {\n\t\thandleConfirmationClose();\n\t\tremoveView();\n\t}, [removeView, handleConfirmationClose]);\n\n\tfunction renderDialog() {\n\t\tconst { dialog } = state;\n\t\tconst { message, title, type, onOK } = dialog ?? {};\n\n\t\tconst handleOK = () => {\n\t\t\ttype === \"confirm\" && onOK && onOK();\n\t\t\thandleClose();\n\t\t};\n\t\treturn (\n\t\t\tdialog && (\n\t\t\t\t<Dialog\n\t\t\t\t\topen={!!message}\n\t\t\t\t\tclasses={{\n\t\t\t\t\t\tpaper: classes.paper,\n\t\t\t\t\t}}\n\t\t\t\t>\n\t\t\t\t\t<DialogTitle>{translate(title || \"Alert\")}</DialogTitle>\n\t\t\t\t\t<DialogContent>\n\t\t\t\t\t\t<div dangerouslySetInnerHTML={{ __html: translate(message) }}></div>\n\t\t\t\t\t</DialogContent>\n\t\t\t\t\t<DialogActions>\n\t\t\t\t\t\t<Button\n\t\t\t\t\t\t\tonClick={handleOK}\n\t\t\t\t\t\t\tclassName={classes.button}\n\t\t\t\t\t\t\tcolor=\"primary\"\n\t\t\t\t\t\t\tautoFocus={type !== \"confirm\"}\n\t\t\t\t\t\t>\n\t\t\t\t\t\t\tOK\n\t\t\t\t\t\t</Button>\n\t\t\t\t\t\t{type === \"confirm\" && (\n\t\t\t\t\t\t\t<Button\n\t\t\t\t\t\t\t\tonClick={handleClose}\n\t\t\t\t\t\t\t\tclassName={classes.button}\n\t\t\t\t\t\t\t\tvariant=\"outlined\"\n\t\t\t\t\t\t\t\tcolor=\"primary\"\n\t\t\t\t\t\t\t\tautoFocus\n\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t{translate(\"Cancel\")}\n\t\t\t\t\t\t\t</Button>\n\t\t\t\t\t\t)}\n\t\t\t\t\t</DialogActions>\n\t\t\t\t</Dialog>\n\t\t\t)\n\t\t);\n\t}\n\n\treturn (\n\t\t<React.Fragment>\n\t\t\t{renderDialog()}\n\t\t\t<Toolbar\n\t\t\t\tupdate={update}\n\t\t\t\tisStudioLite={isStudioLite}\n\t\t\t\tsaveView={saveView}\n\t\t\t\tsaveCustomFieldView={saveCustomFieldView}\n\t\t\t\tremoveView={deleteView}\n\t\t\t\tonNew={handleNew}\n\t\t\t\tstartLoader={startLoader}\n\t\t\t\tundo={undo}\n\t\t\t\tredo={redo}\n\t\t\t\trefresh={refresh}\n\t\t\t\tclearHistory={clearHistory}\n\t\t\t\treset={reset}\n\t\t\t\tshowAlert={showAlert}\n\t\t\t\tonSelect={onSelect}\n\t\t\t\tonWidgetChange={onWidgetChange}\n\t\t\t/>\n\t\t\t<DeleteConfirmation\n\t\t\t\topen={deleteConfirmationDialog}\n\t\t\t\tonClose={handleConfirmationClose}\n\t\t\t\tonOk={handleRemoveConfirmation}\n\t\t\t\tmessage=\"Are you sure? Do you want to delete it?\"\n\t\t\t/>\n\t\t</React.Fragment>\n\t);\n}\n\nexport default React.memo(ToolbarContainer);\n","import React, { useState, useEffect, useCallback, useMemo } from \"react\";\nimport AutoComplete, {\n\tcreateFilterOptions,\n} from \"@material-ui/lab/Autocomplete\";\nimport _ from \"lodash\";\nimport { TextField, Typography, Box } from \"@material-ui/core\";\nimport { makeStyles } from \"@material-ui/core/styles\";\nimport AxelorService from \"../services/axelor.rest\";\nimport { camleCaseString, getDefaultGridFormName, translate } from \"../utils\";\nimport { useDebounceEffect } from \"./../common.func\";\nimport SearchView from \"./SearchView\";\nimport { useStore } from \"../store/context\";\nimport { ACTIONS } from \"../constants\";\n\nconst filter = createFilterOptions();\nconst useStyles = makeStyles({\n\tautoComplete: {\n\t\tbackgroundColor: \"#293846\",\n\t\tmarginTop: 15,\n\t\t\".modern-dark &\": {\n\t\t\tbackgroundColor: \"#323232\",\n\t\t},\n\t},\n\tlabel: {\n\t\tcolor: \"#e7eaec !important\",\n\t\tfontSize: 12,\n\t},\n\tpopperAutoComplete: {\n\t\t\"& ul, .MuiAutocomplete-noOptions\": {\n\t\t\tbackgroundColor: \"rgb(41, 56, 70) !important\",\n\t\t\t\".modern-dark &\": {\n\t\t\t\tbackgroundColor: \"#1b1b1b !important\",\n\t\t\t},\n\t\t},\n\t\t\"& li, .MuiAutocomplete-noOptions\": {\n\t\t\tcolor: \"#e7eaec !important\",\n\t\t\tbackgroundColor: \"rgb(41, 56, 70) !important\",\n\t\t\t\".modern-dark &\": {\n\t\t\t\tbackgroundColor: \"#1b1b1b !important\",\n\t\t\t},\n\t\t},\n\t\t\"& li:hover, .MuiAutocomplete-noOptions\": {\n\t\t\tcolor: \"#e7eaec !important\",\n\t\t\tbackgroundColor: \"#2f4050 !important\",\n\t\t\t\".modern-dark &\": {\n\t\t\t\tbackgroundColor: \"#323232 !important\",\n\t\t\t},\n\t\t},\n\t},\n\tinput: {\n\t\tcolor: \"#e7eaec\",\n\t\tfontSize: 13,\n\t},\n\troot: {\n\t\tcolor: \"#e7eaec\",\n\t},\n\terror: {\n\t\tcolor: \"red\",\n\t\tmarginBottom: 5,\n\t\tfontSize: 13,\n\t},\n\toption: {\n\t\tfontSize: 13,\n\t},\n\tdisabled: {\n\t\tcolor: \"#a3a3a3 !important\",\n\t\tfontSize: 12,\n\t},\n\tgroupTitle: {\n\t\tposition: \"sticky\",\n\t\ttop: \"-8px\",\n\t\tpadding: \"4px 10px\",\n\t\tcolor: \"white\",\n\t\tfontSize: 14,\n\t\tfontWeight: \"bold\",\n\t\tbackgroundColor: \"#293846\",\n\t},\n});\n\nexport default function SelectComponent(_props) {\n\tconst {\n\t\tname,\n\t\tref,\n\t\ttitle,\n\t\tvalueField = \"id\",\n\t\ttype,\n\t\tmultiple = false,\n\t\tcommaSeparated,\n\t\tdisplayField = \"name\",\n\t\tlimit = 10,\n\t\tdata: preData = [],\n\t\tisDisabled,\n\t\tneedsTargetModel,\n\t\tcanAddNew = false,\n\t\tgetOptionLabel,\n\t\tshouldFetchInStart = false,\n\t\t_domain,\n\t} = _props.field;\n\tconst { props, error } = _props;\n\tconst { propertyList, setPropertyList, onChange, editWidgetType, modelType } =\n\t\tprops;\n\tconst value = useMemo(() => {\n\t\tlet value = propertyList[name] || \"\";\n\t\tif (commaSeparated && type === \"select\") {\n\t\t\tconst values = value ? value.split(\",\") : [];\n\t\t\tvalue = values.map((val) => {\n\t\t\t\treturn { [valueField]: val };\n\t\t\t});\n\t\t}\n\t\treturn value;\n\t}, [propertyList, name, commaSeparated, type, valueField]);\n\n\tconst [data, setData] = useState([...preData]);\n\tconst [searchText, setsearchText] = useState(null);\n\tconst isMounted = React.useRef(true);\n\tconst [moreDialog, setMoreDialog] = useState(false);\n\tconst [offset, setOffset] = useState(0);\n\tconst [total, setTotal] = useState(0);\n\tconst [initialFetch, setInitialFetch] = useState(false);\n\tconst { targetModel } = propertyList;\n\tconst classes = useStyles();\n\tconst disabled = isDisabled\n\t\t? isDisabled(propertyList, editWidgetType, modelType)\n\t\t: false;\n\tconst isTypeOnClick = name === \"onClick\" && type === \"select\";\n\tconst [isLoading, setIsLoading] = useState(true);\n\tconst { state } = useStore();\n\tconst { model, modelType: stateModelType } = state;\n\tconst [tabIndex, setTabIndex] = useState(state.model ? 0 : 1);\n\n\tconst handleInputChange = useCallback(\n\t\t(e, value, reason) => {\n\t\t\tif (reason !== \"reset\") {\n\t\t\t\tif (type === \"objectSelection\" && typeof value === \"object\") {\n\t\t\t\t\tsetsearchText(value[displayField]);\n\t\t\t\t} else {\n\t\t\t\t\tsetsearchText(value);\n\t\t\t\t}\n\t\t\t}\n\t\t},\n\t\t[type, displayField]\n\t);\n\n\tconst getSelectValue = useCallback(\n\t\t(value = []) => {\n\t\t\tif (commaSeparated) {\n\t\t\t\treturn value ? value.map((e) => e.name).join(\",\") : \"\";\n\t\t\t}\n\t\t\treturn ref ? value[valueField] : value;\n\t\t},\n\t\t[valueField, commaSeparated, ref]\n\t);\n\n\tconst fetchOptions = useCallback(\n\t\t(searchText = \"\", offset = 0) => {\n\t\t\tconst currentModel =\n\t\t\t\tstateModelType === \"CUSTOM\"\n\t\t\t\t\t? \"com.axelor.meta.db.MetaJsonRecord\"\n\t\t\t\t\t: model?.fullName;\n\t\t\tconst modelFilters = [\n\t\t\t\t{\n\t\t\t\t\ttype: \"Model actions\",\n\t\t\t\t\tcriteria: {\n\t\t\t\t\t\tfieldName: \"model\",\n\t\t\t\t\t\toperator: \"=\",\n\t\t\t\t\t\tvalue: currentModel || \"\",\n\t\t\t\t\t},\n\t\t\t\t},\n\t\t\t\t{\n\t\t\t\t\ttype: \"Global actions\",\n\t\t\t\t\tcriteria: {\n\t\t\t\t\t\tfieldName: \"model\",\n\t\t\t\t\t\toperator: \"isNull\",\n\t\t\t\t\t},\n\t\t\t\t},\n\t\t\t\t{\n\t\t\t\t\ttype: \"Other actions\",\n\t\t\t\t\tcriteria: {\n\t\t\t\t\t\tfieldName: \"model\",\n\t\t\t\t\t\toperator: \"!=\",\n\t\t\t\t\t\tvalue: currentModel || \"\",\n\t\t\t\t\t},\n\t\t\t\t},\n\t\t\t];\n\t\t\tconst criteria = [];\n\t\t\tif (searchText) {\n\t\t\t\tcriteria.push({\n\t\t\t\t\tfieldName: \"name\",\n\t\t\t\t\toperator: \"like\",\n\t\t\t\t\tvalue: searchText,\n\t\t\t\t});\n\t\t\t}\n\t\t\tif (\n\t\t\t\t(name === \"gridView\" || name === \"formView\") &&\n\t\t\t\tneedsTargetModel.includes(props.type)\n\t\t\t) {\n\t\t\t\tif (!targetModel) return;\n\t\t\t}\n\t\t\tif (name === \"gridView\") {\n\t\t\t\tneedsTargetModel.includes(props.type) &&\n\t\t\t\t\tcriteria.push({\n\t\t\t\t\t\tfieldName: \"model\",\n\t\t\t\t\t\toperator: \"=\",\n\t\t\t\t\t\tvalue: targetModel,\n\t\t\t\t\t});\n\t\t\t\tcriteria.push({ fieldName: \"type\", operator: \"=\", value: \"grid\" });\n\t\t\t}\n\t\t\tif (name === \"formView\") {\n\t\t\t\tneedsTargetModel.includes(props.type) &&\n\t\t\t\t\tcriteria.push({\n\t\t\t\t\t\tfieldName: \"model\",\n\t\t\t\t\t\toperator: \"=\",\n\t\t\t\t\t\tvalue: targetModel,\n\t\t\t\t\t});\n\t\t\t\tcriteria.push({ fieldName: \"type\", operator: \"=\", value: \"form\" });\n\t\t\t}\n\t\t\tif (isTypeOnClick && moreDialog) {\n\t\t\t\ttabIndex === ACTIONS.GLOBAL\n\t\t\t\t\t? criteria.push(modelFilters[ACTIONS.GLOBAL].criteria)\n\t\t\t\t\t: tabIndex === ACTIONS.MODEL\n\t\t\t\t\t? criteria.push(modelFilters[ACTIONS.MODEL].criteria)\n\t\t\t\t\t: criteria.push(modelFilters[ACTIONS.OTHER].criteria);\n\t\t\t}\n\t\t\tconst data = {\n\t\t\t\t...(_domain\n\t\t\t\t\t? {\n\t\t\t\t\t\t\t_domain,\n\t\t\t\t\t\t\t_domainContext: { model: model?.fullName },\n\t\t\t\t\t  }\n\t\t\t\t\t: {}),\n\t\t\t\tcriteria,\n\t\t\t\toperator: \"and\",\n\t\t\t};\n\t\t\tconst fields = [\n\t\t\t\t\"name\",\n\t\t\t\t\"fullName\",\n\t\t\t\tvalueField,\n\t\t\t\tdisplayField,\n\t\t\t\t\"parent\",\n\t\t\t].filter((e) => e);\n\t\t\tif (shouldFetchInStart && initialFetch) {\n\t\t\t\t// setData(data);\n\t\t\t} else if (isTypeOnClick && !moreDialog) {\n\t\t\t\tconst getActions = async () => {\n\t\t\t\t\tconst fetchedData = await Promise.all([\n\t\t\t\t\t\tnew AxelorService({ model: ref }).search({\n\t\t\t\t\t\t\tfields,\n\t\t\t\t\t\t\tdata: {\n\t\t\t\t\t\t\t\tcriteria: [...criteria, modelFilters[ACTIONS.MODEL].criteria],\n\t\t\t\t\t\t\t\toperator: \"and\",\n\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\tlimit: 5,\n\t\t\t\t\t\t\toffset,\n\t\t\t\t\t\t}),\n\t\t\t\t\t\tnew AxelorService({ model: ref }).search({\n\t\t\t\t\t\t\tfields,\n\t\t\t\t\t\t\tdata: {\n\t\t\t\t\t\t\t\tcriteria: [...criteria, modelFilters[ACTIONS.GLOBAL].criteria],\n\t\t\t\t\t\t\t\toperator: \"and\",\n\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\tlimit: 5,\n\t\t\t\t\t\t\toffset,\n\t\t\t\t\t\t}),\n\t\t\t\t\t\tnew AxelorService({ model: ref }).search({\n\t\t\t\t\t\t\tfields,\n\t\t\t\t\t\t\tdata: {\n\t\t\t\t\t\t\t\tcriteria: [...criteria, modelFilters[ACTIONS.OTHER].criteria],\n\t\t\t\t\t\t\t\toperator: \"and\",\n\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\tlimit: 5,\n\t\t\t\t\t\t\toffset,\n\t\t\t\t\t\t}),\n\t\t\t\t\t]);\n\n\t\t\t\t\tconst data = await Promise.all(\n\t\t\t\t\t\tfetchedData.map((result, index) =>\n\t\t\t\t\t\t\tresult.data\n\t\t\t\t\t\t\t\t? result.data.map((action) => ({\n\t\t\t\t\t\t\t\t\t\t...action,\n\t\t\t\t\t\t\t\t\t\ttype: modelFilters[index].type,\n\t\t\t\t\t\t\t\t  }))\n\t\t\t\t\t\t\t\t: {\n\t\t\t\t\t\t\t\t\t\ttype: modelFilters[index].type,\n\t\t\t\t\t\t\t\t\t\tname: translate(\"No data found\"),\n\t\t\t\t\t\t\t\t\t\tid: \"no_data_found\",\n\t\t\t\t\t\t\t\t  }\n\t\t\t\t\t\t)\n\t\t\t\t\t);\n\t\t\t\t\tdata.push({\n\t\t\t\t\t\tname: translate(\"Show more...\"),\n\t\t\t\t\t\tid: \"studio_show_More_View\",\n\t\t\t\t\t});\n\t\t\t\t\tsetData(data.flat());\n\t\t\t\t};\n\t\t\t\tgetActions();\n\t\t\t} else {\n\t\t\t\treturn new AxelorService({ model: ref })\n\t\t\t\t\t.search({ fields, data, limit, offset })\n\t\t\t\t\t.then(({ data, total } = {}) => {\n\t\t\t\t\t\tshouldFetchInStart && setInitialFetch(true);\n\t\t\t\t\t\tif (data && data.length) {\n\t\t\t\t\t\t\tif (isMounted.current) {\n\t\t\t\t\t\t\t\t!moreDialog &&\n\t\t\t\t\t\t\t\t\t!shouldFetchInStart &&\n\t\t\t\t\t\t\t\t\ttotal > limit &&\n\t\t\t\t\t\t\t\t\tdata.push({\n\t\t\t\t\t\t\t\t\t\t[displayField]: translate(\"Show more...\"),\n\t\t\t\t\t\t\t\t\t\tid: \"studio_show_More_View\",\n\t\t\t\t\t\t\t\t\t});\n\t\t\t\t\t\t\t\tsetTotal(total);\n\t\t\t\t\t\t\t\tconst uniqueData = _.uniqBy(data, displayField);\n\t\t\t\t\t\t\t\tsetData(uniqueData);\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\tsetData([]);\n\t\t\t\t\t\t}\n\t\t\t\t\t\tsetIsLoading(false);\n\t\t\t\t\t});\n\t\t\t}\n\t\t},\n\t\t[\n\t\t\tname,\n\t\t\tref,\n\t\t\ttargetModel,\n\t\t\tvalueField,\n\t\t\tdisplayField,\n\t\t\tlimit,\n\t\t\tneedsTargetModel,\n\t\t\tprops.type,\n\t\t\tmoreDialog,\n\t\t\tinitialFetch,\n\t\t\tshouldFetchInStart,\n\t\t\tisTypeOnClick,\n\t\t\ttabIndex,\n\t\t\tmodel,\n\t\t\tstateModelType,\n\t\t\t_domain,\n\t\t]\n\t);\n\n\tconst optionDebounceHandler = React.useCallback(() => {\n\t\tref && searchText != null && fetchOptions(searchText);\n\t}, [fetchOptions, searchText, ref]);\n\n\tconst getValue = useCallback(\n\t\t(value) => {\n\t\t\treturn typeof value === \"string\" && ref\n\t\t\t\t? {\n\t\t\t\t\t\t[valueField]: value,\n\t\t\t\t\t\t[displayField]: value,\n\t\t\t\t  }\n\t\t\t\t: value;\n\t\t},\n\t\t[valueField, ref, displayField]\n\t);\n\n\tconst getInputAsOption = React.useCallback(\n\t\t(value) => {\n\t\t\tif (value && typeof value === \"string\" && ref) {\n\t\t\t\tvalue = { [valueField]: value };\n\t\t\t}\n\t\t\treturn value;\n\t\t},\n\t\t[ref, valueField]\n\t);\n\n\tconst handleSearch = React.useCallback((value) => {\n\t\tsetsearchText(value);\n\t\tsetOffset(0);\n\t}, []);\n\n\tconst handleNext = React.useCallback(() => {\n\t\tconst newOffset = offset + limit;\n\t\tif (newOffset <= total) {\n\t\t\tsetOffset(newOffset);\n\t\t\tfetchOptions(searchText, newOffset);\n\t\t}\n\t}, [limit, total, offset, fetchOptions, searchText]);\n\n\tconst handlePrevious = React.useCallback(() => {\n\t\tlet newOffset = offset - limit;\n\t\tnewOffset = newOffset > 0 ? newOffset : 0;\n\t\tsetOffset(newOffset);\n\t\tfetchOptions(searchText, newOffset);\n\t}, [offset, limit, searchText, fetchOptions]);\n\n\tconst handleClose = React.useCallback(() => {\n\t\tsetMoreDialog(false);\n\t\tsetsearchText(null);\n\t\tsetOffset(0);\n\t}, []);\n\n\tconst handleChange = React.useCallback(\n\t\tasync (e, _value) => {\n\t\t\tif (_value?.id === \"studio_show_More_View\") {\n\t\t\t\tsetMoreDialog(true);\n\t\t\t\treturn;\n\t\t\t}\n\t\t\tif (multiple) {\n\t\t\t\tif (e.fromDialog) {\n\t\t\t\t\t_value = [...value, _value];\n\t\t\t\t\thandleSearch(\"\");\n\t\t\t\t} else {\n\t\t\t\t\tconst hasMoreView =\n\t\t\t\t\t\t_value.findIndex((v) => v?.id === \"studio_show_More_View\") !== -1;\n\t\t\t\t\tif (hasMoreView) {\n\t\t\t\t\t\tsetMoreDialog(true);\n\t\t\t\t\t\treturn;\n\t\t\t\t\t} else {\n\t\t\t\t\t\thandleSearch(\"\");\n\t\t\t\t\t}\n\t\t\t\t\tconst isNoDataFound =\n\t\t\t\t\t\t_value.findIndex((v) => v?.id === \"no_data_found\") !== -1;\n\t\t\t\t\tif (isNoDataFound) return;\n\t\t\t\t}\n\t\t\t\t_value = _value\n\t\t\t\t\t.map((val) => {\n\t\t\t\t\t\tif (val?.id !== \"studio_show_More_View\") {\n\t\t\t\t\t\t\treturn getInputAsOption(val);\n\t\t\t\t\t\t}\n\t\t\t\t\t\treturn undefined;\n\t\t\t\t\t})\n\t\t\t\t\t.filter((e) => e);\n\t\t\t} else {\n\t\t\t\tif (_value && _value.inputValue && _value.inputValue.length && ref) {\n\t\t\t\t\t_value[valueField] = _value.inputValue;\n\t\t\t\t}\n\t\t\t}\n\t\t\tlet updatedValue = {\n\t\t\t\t...propertyList,\n\t\t\t\t[name]:\n\t\t\t\t\ttype === \"objectSelection\"\n\t\t\t\t\t\t? _value\n\t\t\t\t\t\t: _value && getSelectValue(_value),\n\t\t\t};\n\t\t\tlet payload = {};\n\t\t\tif (name === \"targetModel\") {\n\t\t\t\tconst { targetModel } = updatedValue || {};\n\t\t\t\tpayload = {\n\t\t\t\t\tgridView: _value ? getDefaultGridFormName(targetModel) : null,\n\t\t\t\t\tformView: _value ? getDefaultGridFormName(targetModel, true) : null,\n\t\t\t\t};\n\t\t\t}\n\t\t\tif (name === \"contextField\") {\n\t\t\t\tif (updatedValue[name]) {\n\t\t\t\t\tconst res = await new AxelorService({ model: ref }).action({\n\t\t\t\t\t\taction: \"com.axelor.meta.web.MetaController:contextFieldChange\",\n\t\t\t\t\t\tdata: {\n\t\t\t\t\t\t\tcontext: {\n\t\t\t\t\t\t\t\t...updatedValue,\n\t\t\t\t\t\t\t\t...(!updatedValue.model ? { model: model?.fullName } : {}),\n\t\t\t\t\t\t\t},\n\t\t\t\t\t\t},\n\t\t\t\t\t\tmodel: \"com.axelor.meta.db.MetaJsonField\",\n\t\t\t\t\t});\n\t\t\t\t\tif (res?.data?.[0]?.values) {\n\t\t\t\t\t\tupdatedValue = {\n\t\t\t\t\t\t\t...updatedValue,\n\t\t\t\t\t\t\t...res.data[0].values,\n\t\t\t\t\t\t};\n\t\t\t\t\t}\n\t\t\t\t} else {\n\t\t\t\t\tupdatedValue = {\n\t\t\t\t\t\t...updatedValue,\n\t\t\t\t\t\tcontextFieldTarget: null,\n\t\t\t\t\t\tcontextFieldTargetName: null,\n\t\t\t\t\t\tcontextFieldValue: null,\n\t\t\t\t\t\tcontextFieldTitle: null,\n\t\t\t\t\t};\n\t\t\t\t}\n\t\t\t}\n\t\t\tif (name === \"contextFieldTitle\") {\n\t\t\t\tupdatedValue.contextFieldValue = _value?.id?.toString() || null;\n\t\t\t}\n\t\t\tsetPropertyList({ ...(updatedValue || {}), ...payload });\n\t\t\tonChange(\n\t\t\t\t{ ...(updatedValue || {}), ...payload },\n\t\t\t\tname !== \"selection\" ? name : undefined\n\t\t\t);\n\t\t},\n\t\t[\n\t\t\tgetSelectValue,\n\t\t\tmultiple,\n\t\t\tname,\n\t\t\tonChange,\n\t\t\tsetPropertyList,\n\t\t\tpropertyList,\n\t\t\tvalue,\n\t\t\ttype,\n\t\t\tref,\n\t\t\tgetInputAsOption,\n\t\t\tvalueField,\n\t\t\thandleSearch,\n\t\t\tmodel,\n\t\t]\n\t);\n\n\tconst handleTabChange = useCallback((_, value) => {\n\t\tsetTabIndex(value);\n\t}, []);\n\n\tuseDebounceEffect(optionDebounceHandler, 500);\n\n\tuseEffect(() => {\n\t\tisMounted.current = true;\n\t\treturn () => {\n\t\t\tisMounted.current = false;\n\t\t};\n\t}, []);\n\n\tconst _value = useMemo(\n\t\t() => (multiple ? value || [] : getValue(value)),\n\t\t[value, multiple, getValue]\n\t);\n\n\tuseEffect(() => {\n\t\tif (moreDialog) {\n\t\t\tsetIsLoading(true);\n\t\t\tfetchOptions(searchText);\n\t\t\tsetOffset(0);\n\t\t\tsetData([]);\n\t\t}\n\t}, [fetchOptions, moreDialog, searchText]);\n\n\treturn (\n\t\t<div style={{ display: \"flex\", flexDirection: \"column\", width: \"100%\" }}>\n\t\t\t<AutoComplete\n\t\t\t\tclasses={{\n\t\t\t\t\tinputFocused: disabled ? classes.disabled : classes.input,\n\t\t\t\t\tclearIndicator: classes.input,\n\t\t\t\t\tpopupIndicator: disabled ? classes.disabled : classes.input,\n\t\t\t\t\tpopper: classes.popperAutoComplete,\n\t\t\t\t\toption: classes.option,\n\t\t\t\t\tnoOptions: classes.option,\n\t\t\t\t}}\n\t\t\t\tclassName={classes.autoComplete}\n\t\t\t\tonOpen={() => {\n\t\t\t\t\tref && !shouldFetchInStart && !initialFetch && setData([]);\n\t\t\t\t\tref && fetchOptions(searchText);\n\t\t\t\t}}\n\t\t\t\tdisabled={disabled}\n\t\t\t\tmultiple={multiple}\n\t\t\t\toptions={data}\n\t\t\t\tgroupBy={(option) => option.type}\n\t\t\t\tforcePopupIcon={true}\n\t\t\t\tfreeSolo={type !== \"objectSelection\"}\n\t\t\t\tclearOnBlur={moreDialog}\n\t\t\t\tvalue={_value}\n\t\t\t\tsize=\"small\"\n\t\t\t\tonInputChange={handleInputChange}\n\t\t\t\t{...{\n\t\t\t\t\tfilterOptions: (options, params) => {\n\t\t\t\t\t\tconst filtered = filter(options, params);\n\t\t\t\t\t\t// Suggest the creation of a new value\n\t\t\t\t\t\tif (searchText && canAddNew) {\n\t\t\t\t\t\t\tfiltered.splice(0, 0, {\n\t\t\t\t\t\t\t\tinputValue: searchText,\n\t\t\t\t\t\t\t\tname: searchText,\n\t\t\t\t\t\t\t\ttitle: `Add \"${searchText}\"`,\n\t\t\t\t\t\t\t\ttype: \"Add new\",\n\t\t\t\t\t\t\t});\n\t\t\t\t\t\t}\n\t\t\t\t\t\tconst showMore = options.find(\n\t\t\t\t\t\t\t(o) => o.id === \"studio_show_More_View\"\n\t\t\t\t\t\t);\n\t\t\t\t\t\tif (\n\t\t\t\t\t\t\tshowMore &&\n\t\t\t\t\t\t\t![\"\", null, undefined].includes(params.inputValue)\n\t\t\t\t\t\t) {\n\t\t\t\t\t\t\tconst hasShowMore =\n\t\t\t\t\t\t\t\tfiltered.findIndex((o) => o.id === \"studio_show_More_View\") !==\n\t\t\t\t\t\t\t\t-1;\n\n\t\t\t\t\t\t\t!hasShowMore && filtered.push({ ...showMore });\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\treturn filtered;\n\t\t\t\t\t},\n\t\t\t\t}}\n\t\t\t\tonChange={handleChange}\n\t\t\t\trenderInput={(params) => (\n\t\t\t\t\t<TextField\n\t\t\t\t\t\t{...params}\n\t\t\t\t\t\tautoComplete=\"off\"\n\t\t\t\t\t\terror={Boolean(error)}\n\t\t\t\t\t\tvariant=\"outlined\"\n\t\t\t\t\t\tlabel={translate(camleCaseString(title || name))}\n\t\t\t\t\t\tInputLabelProps={{\n\t\t\t\t\t\t\tclassName: disabled ? classes.disabled : classes.label,\n\t\t\t\t\t\t}}\n\t\t\t\t\t/>\n\t\t\t\t)}\n\t\t\t\trenderGroup={(params) => (\n\t\t\t\t\t<Box key={params.key}>\n\t\t\t\t\t\t<Typography\n\t\t\t\t\t\t\tclassName={classes.groupTitle}\n\t\t\t\t\t\t\tstyle={{\n\t\t\t\t\t\t\t\tborderBottom: `${isTypeOnClick ? \"2px solid gray\" : \"none\"}`,\n\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t>\n\t\t\t\t\t\t\t{params.group}\n\t\t\t\t\t\t</Typography>\n\t\t\t\t\t\t{params.children}\n\t\t\t\t\t</Box>\n\t\t\t\t)}\n\t\t\t\tgetOptionLabel={(option) => {\n\t\t\t\t\tif (getOptionLabel) {\n\t\t\t\t\t\treturn getOptionLabel(option, data);\n\t\t\t\t\t}\n\t\t\t\t\treturn option.type === \"Add new\"\n\t\t\t\t\t\t? option[\"title\"]\n\t\t\t\t\t\t: typeof option === \"string\"\n\t\t\t\t\t\t? option\n\t\t\t\t\t\t: option[displayField] || \"\";\n\t\t\t\t}}\n\t\t\t/>\n\t\t\t{error && <Typography className={classes.error}>{error}</Typography>}\n\t\t\t{moreDialog && isTypeOnClick ? (\n\t\t\t\t<SearchView\n\t\t\t\t\tsearchText={searchText}\n\t\t\t\t\tlist={data}\n\t\t\t\t\ttotal={total}\n\t\t\t\t\toffset={offset}\n\t\t\t\t\tdisplayField={displayField}\n\t\t\t\t\topen={moreDialog}\n\t\t\t\t\tonNext={handleNext}\n\t\t\t\t\tonPrevious={handlePrevious}\n\t\t\t\t\thandleClose={handleClose}\n\t\t\t\t\tsetSearchText={handleSearch}\n\t\t\t\t\ttitle={translate(camleCaseString(title || name))}\n\t\t\t\t\tonChange={(value) => handleChange({ fromDialog: true }, value)}\n\t\t\t\t\tcurrentTab={tabIndex}\n\t\t\t\t\tonTabChange={handleTabChange}\n\t\t\t\t\tisTypeOnClick={isTypeOnClick}\n\t\t\t\t\tisDataLoading={isLoading}\n\t\t\t\t/>\n\t\t\t) : (\n\t\t\t\t<SearchView\n\t\t\t\t\tsearchText={searchText}\n\t\t\t\t\tlist={data}\n\t\t\t\t\ttotal={total}\n\t\t\t\t\toffset={offset}\n\t\t\t\t\tdisplayField={displayField}\n\t\t\t\t\topen={moreDialog}\n\t\t\t\t\tonNext={handleNext}\n\t\t\t\t\tonPrevious={handlePrevious}\n\t\t\t\t\thandleClose={handleClose}\n\t\t\t\t\tsetSearchText={handleSearch}\n\t\t\t\t\ttitle={translate(camleCaseString(title || name))}\n\t\t\t\t\tonChange={(value) => handleChange({ fromDialog: true }, value)}\n\t\t\t\t\tisDataLoading={isLoading}\n\t\t\t\t/>\n\t\t\t)}\n\t\t</div>\n\t);\n}\n","import React from \"react\";\nimport { TextField, Typography } from \"@material-ui/core\";\nimport { makeStyles } from \"@material-ui/core/styles\";\nimport { useStore } from \"../store/context\";\nconst useStyles = makeStyles({\n\tcontainer: {\n\t\tmarginBottom: 15,\n\t},\n\trow: {\n\t\tdisplay: \"flex\",\n\t},\n\tlanguageText: {\n\t\twidth: \"15%\",\n\t\tmarginTop: 8,\n\t\ttextTransform: \"capitalize\",\n\t\ttextAlign: \"center\",\n\t},\n});\n\nfunction TranslationGrid(props) {\n\tconst classes = useStyles();\n\tconst { state, update } = useStore();\n\tconst { keyValue, ...rest } = props;\n\tconst { translationList } = state;\n\tconst [translations, setTranslations] = React.useState([]);\n\n\tconst handleTranslationChange = React.useCallback(\n\t\t({ key, message, language }) => {\n\t\t\tsetTranslations((_translations) => {\n\t\t\t\tlet newList = [..._translations];\n\t\t\t\tconst translationIndex = newList.findIndex(\n\t\t\t\t\t(e) => e.key === key && e.language === language\n\t\t\t\t);\n\n\t\t\t\tif (translationIndex !== -1) {\n\t\t\t\t\tnewList[translationIndex] = { ...newList[translationIndex], message };\n\t\t\t\t} else {\n\t\t\t\t\tnewList.push({ key, message, language });\n\t\t\t\t}\n\t\t\t\treturn [...newList];\n\t\t\t});\n\t\t},\n\t\t[]\n\t);\n\n\tconst handleTranslationUpdate = React.useCallback(\n\t\t({ key, message, language }) => {\n\t\t\tupdate((draft) => {\n\t\t\t\tconst translationIndex = draft.translationList.findIndex(\n\t\t\t\t\t(e) => e.key === key && e.language === language\n\t\t\t\t);\n\n\t\t\t\tif (translationIndex !== -1) {\n\t\t\t\t\tdraft.translationList[translationIndex].message = message;\n\t\t\t\t} else {\n\t\t\t\t\tdraft.translationList.push({ key, message, language });\n\t\t\t\t}\n\t\t\t});\n\t\t},\n\t\t[update]\n\t);\n\n\tReact.useEffect(() => {\n\t\tsetTranslations([...translationList]);\n\t}, [translationList]);\n\n\treturn (\n\t\t<div className={classes.container}>\n\t\t\t{state.languageList.map((lang, i) => (\n\t\t\t\t<div key={i} className={classes.row}>\n\t\t\t\t\t<Typography classes={{ root: classes.languageText }}>\n\t\t\t\t\t\t{lang.value}\n\t\t\t\t\t</Typography>\n\t\t\t\t\t<TextField\n\t\t\t\t\t\tvariant=\"outlined\"\n\t\t\t\t\t\t{...rest}\n\t\t\t\t\t\tvalue={\n\t\t\t\t\t\t\ttranslations.find(\n\t\t\t\t\t\t\t\t(e) => e.key === keyValue && e.language === lang.value\n\t\t\t\t\t\t\t)?.message || \"\"\n\t\t\t\t\t\t}\n\t\t\t\t\t\tonChange={(e) =>\n\t\t\t\t\t\t\thandleTranslationChange({\n\t\t\t\t\t\t\t\tkey: keyValue,\n\t\t\t\t\t\t\t\tmessage: e.target.value,\n\t\t\t\t\t\t\t\tlanguage: lang.value,\n\t\t\t\t\t\t\t})\n\t\t\t\t\t\t}\n\t\t\t\t\t\tonBlur={(e) =>\n\t\t\t\t\t\t\te.target.value &&\n\t\t\t\t\t\t\thandleTranslationUpdate({\n\t\t\t\t\t\t\t\tkey: keyValue,\n\t\t\t\t\t\t\t\tmessage: e.target.value,\n\t\t\t\t\t\t\t\tlanguage: lang.value,\n\t\t\t\t\t\t\t})\n\t\t\t\t\t\t}\n\t\t\t\t\t/>\n\t\t\t\t</div>\n\t\t\t))}\n\t\t</div>\n\t);\n}\n\nexport default TranslationGrid;\n","import React from \"react\";\nimport TextField from \"@material-ui/core/TextField\";\nimport AutoComplete from \"@material-ui/lab/Autocomplete\";\nimport { makeStyles } from \"@material-ui/core/styles\";\nimport { camleCaseString, translate, getProperty } from \"../../utils\";\nimport { typeReplacer } from \"../../constants\";\n\nconst useStyles = makeStyles({\n\tselection: {\n\t\tcolor: \"#ffffff\",\n\t\tbackgroundColor: \"#293846\",\n\t\t\".modern-dark &\": {\n\t\t\tbackgroundColor: \"#323232\",\n\t\t},\n\t},\n\tautoComplete: {\n\t\twidth: \"100%\",\n\t\tmarginTop: 15,\n\t\tbackgroundColor: \"#293846\",\n\t\t\"& > div > label\": {\n\t\t\tcolor: \"#ffffff !important\",\n\t\t\tfontSize: 13,\n\t\t},\n\t\t\".modern-dark &\": {\n\t\t\tbackgroundColor: \"#323232\",\n\t\t},\n\t},\n\tautoCompleteInput: {\n\t\tcolor: \"#ffffff\",\n\t\tfontSize: 13,\n\t},\n\tautoCompleteOption: {\n\t\tfontSize: 13,\n\t\t\"& ul, .MuiAutocomplete-noOptions\": {\n\t\t\tbackgroundColor: \"rgb(41, 56, 70) !important\",\n\t\t\t\".modern-dark &\": {\n\t\t\t\tbackgroundColor: \"#1b1b1b !important\",\n\t\t\t},\n\t\t},\n\t\t\"& li, .MuiAutocomplete-noOptions\": {\n\t\t\tcolor: \"#ffffff !important\",\n\t\t\tbackgroundColor: \"rgb(41, 56, 70) !important\",\n\t\t\t\".modern-dark &\": {\n\t\t\t\tbackgroundColor: \"#1b1b1b !important\",\n\t\t\t},\n\t\t},\n\t\t\"& li:hover, .MuiAutocomplete-noOptions\": {\n\t\t\tcolor: \"#ffffff !important\",\n\t\t\tbackgroundColor: \"#2f4050 !important\",\n\t\t\t\".modern-dark &\": {\n\t\t\t\tbackgroundColor: \"#323232 !important\",\n\t\t\t},\n\t\t},\n\t},\n\n\tdisabled: {\n\t\tcolor: \"#a3a3a3 !important\",\n\t\tfontSize: 12,\n\t},\n});\n\nexport default function StaticSelection(_props) {\n\tconst { index } = _props;\n\tlet {\n\t\tname,\n\t\trequired,\n\t\tdata,\n\t\thelper,\n\t\ttitle,\n\t\tcolor,\n\t\tdisableClearable = false,\n\t\tparentField,\n\t\tparentPanel,\n\t\tgetOptionLabel,\n\t\t...rest\n\t} = _props.field;\n\tconst { props } = _props;\n\tconst {\n\t\tpropertyList,\n\t\tsetPropertyList,\n\t\ttype,\n\t\tonChange,\n\t\tmodelType,\n\t\tmetaFieldStore,\n\t\teditWidgetType,\n\t} = props || {};\n\tconst classes = useStyles();\n\n\tif (typeof data === \"object\" && !Array.isArray(data)) {\n\t\tdata = data[(typeReplacer[type] || type).toLowerCase()] || [];\n\t}\n\ttitle = translate(camleCaseString(title || name));\n\n\tconst ColorTag = ({ color }) => (\n\t\t<div style={{ width: 15, height: 15, backgroundColor: color }}></div>\n\t);\n\tlet value = propertyList[name] || \"\";\n\tif (\n\t\t(modelType === rest.modelType || props.editWidgetType === \"customField\") &&\n\t\tparentField\n\t) {\n\t\tconst field = propertyList[parentField]\n\t\t\t? JSON.parse(propertyList[parentField])\n\t\t\t: {};\n\t\tvalue = field[name] || \"\";\n\t}\n\tlet disabled = false;\n\tif (rest.isDisabled) {\n\t\tdisabled = rest.isDisabled({\n\t\t\tproperties: propertyList,\n\t\t\tmetaFieldStore,\n\t\t\teditWidgetType,\n\t\t\tmodelType,\n\t\t});\n\t}\n\treturn (\n\t\t<AutoComplete\n\t\t\toptions={data}\n\t\t\tclasses={{\n\t\t\t\troot: classes.selection,\n\t\t\t\tinputFocused: disabled ? classes.disabled : classes.autoCompleteInput,\n\t\t\t\tclearIndicator: classes.autoCompleteInput,\n\t\t\t\tpopupIndicator: disabled ? classes.disabled : classes.autoCompleteInput,\n\t\t\t\toption: classes.autoCompleteOption,\n\t\t\t\tgroupLabel: classes.autoCompleteOption,\n\t\t\t\tpopper: classes.autoCompleteOption,\n\t\t\t\tnoOptions: classes.autoCompleteOption,\n\t\t\t}}\n\t\t\tdisableClearable={disableClearable}\n\t\t\tsize=\"small\"\n\t\t\tclassName={classes.autoComplete}\n\t\t\tautoHighlight\n\t\t\tdisabled={disabled}\n\t\t\tonChange={(e, _value) => {\n\t\t\t\tconst value = {\n\t\t\t\t\t...propertyList,\n\t\t\t\t\t...getProperty(\n\t\t\t\t\t\tname,\n\t\t\t\t\t\t_value,\n\t\t\t\t\t\tparentField,\n\t\t\t\t\t\tpropertyList[parentField],\n\t\t\t\t\t\tmodelType === rest.modelType ||\n\t\t\t\t\t\t\tprops.editWidgetType === \"customField\"\n\t\t\t\t\t),\n\t\t\t\t};\n\t\t\t\tif (name === \"colSpan\") {\n\t\t\t\t\tvalue.colSpan = _value;\n\t\t\t\t}\n\t\t\t\tsetPropertyList(value);\n\t\t\t\tonChange(value, name);\n\t\t\t}}\n\t\t\tgetOptionLabel={(option) =>\n\t\t\t\tgetOptionLabel\n\t\t\t\t\t? getOptionLabel(option)\n\t\t\t\t\t: typeof option === \"object\"\n\t\t\t\t\t? option.text\n\t\t\t\t\t: option\n\t\t\t}\n\t\t\trenderOption={(option) =>\n\t\t\t\ttypeof option === \"object\" ? (\n\t\t\t\t\t<div key={index} value={option.value}>\n\t\t\t\t\t\t<i className={`fa ${option}`} style={{ marginRight: 4 }} />\n\t\t\t\t\t\t{translate(option.text)}\n\t\t\t\t\t</div>\n\t\t\t\t) : (\n\t\t\t\t\t<div key={index} value={option}>\n\t\t\t\t\t\t{color && <ColorTag color={option} />}\n\t\t\t\t\t\t<i className={`fa ${option}`} style={{ marginRight: 4 }} />\n\t\t\t\t\t\t<span>{translate(option)}</span>\n\t\t\t\t\t</div>\n\t\t\t\t)\n\t\t\t}\n\t\t\tvalue={value}\n\t\t\trenderInput={(params) => (\n\t\t\t\t<TextField\n\t\t\t\t\t{...params}\n\t\t\t\t\tlabel={translate(camleCaseString(title || name))}\n\t\t\t\t\tvariant=\"outlined\"\n\t\t\t\t\tclasses={{\n\t\t\t\t\t\troot: classes.selection,\n\t\t\t\t\t}}\n\t\t\t\t\tautoComplete=\"off\"\n\t\t\t\t\tinputProps={{\n\t\t\t\t\t\t...params.inputProps,\n\t\t\t\t\t\tautoComplete: \"new-password\", // disable autocomplete and autofill\n\t\t\t\t\t}}\n\t\t\t\t/>\n\t\t\t)}\n\t\t/>\n\t);\n}\n","import React, { useEffect, useState } from \"react\";\nimport classnames from \"classnames\";\nimport { makeStyles } from \"@material-ui/core/styles\";\nimport { TextField, Chip } from \"@material-ui/core\";\nimport Autocomplete from \"@material-ui/lab/Autocomplete\";\n\nconst useStyles = makeStyles(() => ({\n\tselect: {\n\t\twidth: \"100%\",\n\t\tbackground: \"white\",\n\t},\n\tinput: {\n\t\tfontSize: 13,\n\t},\n}));\n\nexport default function StaticSelect({\n\tvalue,\n\tonChange,\n\toptions = [],\n\tselectClassName,\n\tclassName,\n\toptionLabel,\n\toptionValue,\n\tname,\n\ttitle,\n}) {\n\tconst classes = useStyles();\n\tconst [val, setVal] = useState(value[optionValue] || value || \"\");\n\n\tconst onSelectUpdate = (e, value) => {\n\t\tonChange(value, e);\n\t\tsetVal(value);\n\t};\n\n\tconst renderChip = (value) => {\n\t\tlet option = options.find((option) => option[optionValue] === value);\n\t\tif (!option) return <React.Fragment>{value}</React.Fragment>;\n\t\treturn (\n\t\t\t<Chip\n\t\t\t\tlabel={option[optionLabel]}\n\t\t\t\tsize=\"small\"\n\t\t\t\tstyle={{\n\t\t\t\t\tbackground: option && option.color,\n\t\t\t\t\tcolor: (option && option.border) || \"white\",\n\t\t\t\t}}\n\t\t\t/>\n\t\t);\n\t};\n\n\tuseEffect(() => {\n\t\tif (optionValue) {\n\t\t\tsetVal(value[optionValue]);\n\t\t} else {\n\t\t\tsetVal(value);\n\t\t}\n\t}, [optionValue, value]);\n\n\treturn (\n\t\t<Autocomplete\n\t\t\tclassName={classnames(classes.select, className)}\n\t\t\tvalue={val || \"\"}\n\t\t\tonChange={onSelectUpdate}\n\t\t\trenderValue={renderChip}\n\t\t\tclasses={{\n\t\t\t\tselect: selectClassName,\n\t\t\t\tinput: classes.input\n\t\t\t}}\n\t\t\toptions={options}\n\t\t\tgetOptionLabel={(option) =>\n\t\t\t\ttypeof option === \"object\" ? option[optionValue] : option\n\t\t\t}\n\t\t\tlabel={title}\n\t\t\trenderOption={(option) => {\n\t\t\t\treturn !optionValue && option ? (\n\t\t\t\t\t<div>\n\t\t\t\t\t\t{name === \"icon\" && (\n\t\t\t\t\t\t\t<i className={`fa ${option}`} style={{ marginRight: 4 }} />\n\t\t\t\t\t\t)}\n\t\t\t\t\t\t{option}\n\t\t\t\t\t</div>\n\t\t\t\t) : (\n\t\t\t\t\t<div>\n\t\t\t\t\t\t<Chip\n\t\t\t\t\t\t\tkey={option[optionValue]}\n\t\t\t\t\t\t\tlabel={option[optionLabel]}\n\t\t\t\t\t\t\tsize=\"small\"\n\t\t\t\t\t\t\tstyle={{\n\t\t\t\t\t\t\t\tbackground: option && option.color,\n\t\t\t\t\t\t\t\tcolor: (option && option.border) || \"white\",\n\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t/>\n\t\t\t\t\t</div>\n\t\t\t\t);\n\t\t\t}}\n\t\t\trenderInput={(params) => (\n\t\t\t\t<TextField\n\t\t\t\t\t{...params}\n\t\t\t\t\tlabel={title}\n\t\t\t\t\tautoComplete=\"off\"\n\t\t\t\t/>\n\t\t\t)}\n\t\t/>\n\t);\n}\n\nStaticSelect.defaultProps = {\n\tvalue: {},\n\tonChange: () => {},\n};\n","import React, { useImperativeHandle, useRef } from \"react\";\nimport Chip from \"@material-ui/core/Chip\";\nimport IconButton from \"@material-ui/core/IconButton\";\nimport clsx from \"clsx\";\nimport { DragSource, DropTarget } from \"react-dnd\";\nimport { makeStyles } from \"@material-ui/core/styles\";\n\nimport TextField from \"@material-ui/core/TextField\";\nimport Select from \"./Select\";\nimport fontAwesomeList from \"../fa-icons\";\n\nconst ItemTypes = {\n\tCARD: \"card\",\n};\n\nexport const WKF_COLORS = [\n\t{ name: \"red\", title: \"Red\", color: \"#f44336\", border: \"#fff\" },\n\t{ name: \"pink\", title: \"Pink\", color: \"#e91e63\", border: \"#fff\" },\n\t{ name: \"purple\", title: \"Purple\", color: \"#9c27b0\", border: \"#fff\" },\n\t{\n\t\tname: \"deeppurple\",\n\t\ttitle: \"Deep Purple\",\n\t\tcolor: \"#673ab7\",\n\t\tborder: \"#fff\",\n\t},\n\t{ name: \"indigo\", title: \"Indigo\", color: \"#3f51b5\", border: \"#fff\" },\n\t{ name: \"blue\", title: \"Blue\", color: \"#2196f3\", border: \"#fff\" },\n\t{ name: \"lightblue\", title: \"Light Blue\", color: \"#03a9f4\", border: \"#fff\" },\n\t{ name: \"cyan\", title: \"Cyan\", color: \"#00bcd4\", border: \"#fff\" },\n\t{ name: \"teal\", title: \"Teal\", color: \"#009688\", border: \"#fff\" },\n\t{ name: \"green\", title: \"Green\", color: \"#4caf50\", border: \"#fff\" },\n\t{\n\t\tname: \"lightgreen\",\n\t\ttitle: \"Light Green\",\n\t\tcolor: \"#8bc34a\",\n\t\tborder: \"black\",\n\t},\n\t{ name: \"lime\", title: \"Lime\", color: \"#cddc39\", border: \"black\" },\n\t{ name: \"yellow\", title: \"Yellow\", color: \"#ffeb3b\", border: \"black\" },\n\t{ name: \"amber\", title: \"Amber\", color: \"#ffc107\", border: \"black\" },\n\t{ name: \"orange\", title: \"Orange\", color: \"#ff9800\", border: \"black\" },\n\t{\n\t\tname: \"deeporange\",\n\t\ttitle: \"Deep Orange\",\n\t\tcolor: \"#ff5722\",\n\t\tborder: \"#fff\",\n\t},\n\t{ name: \"brown\", title: \"Brown\", color: \"#795548\", border: \"#fff\" },\n\t{ name: \"grey\", title: \"Grey\", color: \"#9e9e9e\", border: \"black\" },\n\t{ name: \"bluegrey\", title: \"Blue Grey\", color: \"#607d8b\", border: \"#fff\" },\n\t{ name: \"black\", title: \"Black\", color: \"black\", border: \"#fff\" },\n\t{ name: \"white\", title: \"White\", color: \"whitesmoke\", border: \"black\" },\n];\n\nconst useStyles = makeStyles(() => ({\n\tcrudIcon: {\n\t\theight: \"1.5em\",\n\t\twidth: \"1.5em\",\n\t\tfontSize: 16,\n\t\tcursor: \"pointer\",\n\t\tcolor: \"#000\",\n\t\tdisplay: \"flex\",\n\t\talignItems: \"center\",\n\t\tjustifyContent: \"center\",\n\t},\n\ttextField: {\n\t\tfontSize: 13,\n\t},\n}));\n\nconst Content = React.forwardRef(\n\t(\n\t\t{\n\t\t\trow = {},\n\t\t\tindex,\n\t\t\tconnectDragSource,\n\t\t\tconnectDropTarget,\n\t\t\thandleRow,\n\t\t\tdeleteRow,\n\t\t\thandleChange,\n\t\t\tupdateSelection,\n\t\t\taddRow,\n\t\t\trowsCount,\n\t\t},\n\t\tref\n\t) => {\n\t\tconst elementRef = useRef(null);\n\t\tconnectDragSource(elementRef);\n\t\tconnectDropTarget(elementRef);\n\n\t\tuseImperativeHandle(ref, () => ({\n\t\t\tgetNode: () => elementRef.current,\n\t\t}));\n\n\t\tconst classes = useStyles();\n\t\treturn (\n\t\t\t<tr\n\t\t\t\tstyle={{ display: \"flex\", alignItems: \"center\" }}\n\t\t\t\tkey={row.id || index}\n\t\t\t\tref={elementRef}\n\t\t\t\tonKeyDown={(e) => {\n\t\t\t\t\tif (e.key === \"Enter\" && rowsCount - 1 === index) {\n\t\t\t\t\t\thandleRow(rowsCount-1)\n\t\t\t\t\t\taddRow();\n\t\t\t\t\t}\n\t\t\t\t}}\n\t\t\t>\n\t\t\t\t<td\n\t\t\t\t\tclassName=\"one-to-many-col one-to-many-col-border\"\n\t\t\t\t\tstyle={{ maxWidth: \"4%\", display: 'flex', justifyContent: \"center\" }}\n\t\t\t\t>\n\t\t\t\t\t<IconButton\n\t\t\t\t\t\tonClick={() => handleRow(row.id)}\n\t\t\t\t\t\taria-label=\"add\"\n\t\t\t\t\t\tsize=\"small\"\n\t\t\t\t\t\tclassName={classes.iconButton}\n\t\t\t\t\t\tdisabled={!updateSelection}\n\t\t\t\t\t>\n\t\t\t\t\t\t<i\n\t\t\t\t\t\t\tclassName={clsx(\"fa fa-pencil\", classes.crudIcon)}\n\t\t\t\t\t\t\tstyle={{\n\t\t\t\t\t\t\t\tcolor: updateSelection ? \"black\" : \"rgba(0, 0, 0, 0.26)\",\n\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t/>\n\t\t\t\t\t</IconButton>\n\t\t\t\t</td>\n\t\t\t\t<td\n\t\t\t\t\tclassName=\"one-to-many-col one-to-many-col-border\"\n\t\t\t\t\tstyle={{\n\t\t\t\t\t\tmaxWidth: \"22%\",\n\t\t\t\t\t\toverflow: \"hidden\",\n\t\t\t\t\t\twhiteSpace: \"nowrap\",\n\t\t\t\t\t\ttextOverflow: \"ellipsis\",\n\t\t\t\t\t}}\n\t\t\t\t>\n\t\t\t\t\t{row.editable ? (\n\t\t\t\t\t\t<TextField\n\t\t\t\t\t\t\tvalue={row?.value || \"\"}\n\t\t\t\t\t\t\tname=\"value\"\n\t\t\t\t\t\t\tonChange={(e) => {\n\t\t\t\t\t\t\t\thandleChange(row.id, \"value\", e.target.value);\n\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t\tstyle={{ width: \"100%\" }}\n\t\t\t\t\t\t\tInputProps={{\n\t\t\t\t\t\t\t\tclasses: { input: classes.textField },\n\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t\tautoFocus={true}\n\t\t\t\t\t\t/>\n\t\t\t\t\t) : (\n\t\t\t\t\t\trow.value\n\t\t\t\t\t)}\n\t\t\t\t</td>\n\t\t\t\t<td\n\t\t\t\t\tclassName=\"one-to-many-col one-to-many-col-border\"\n\t\t\t\t\tstyle={{\n\t\t\t\t\t\tmaxWidth: \"22%\",\n\t\t\t\t\t\toverflow: \"hidden\",\n\t\t\t\t\t\twhiteSpace: \"nowrap\",\n\t\t\t\t\t\ttextOverflow: \"ellipsis\",\n\t\t\t\t\t}}\n\t\t\t\t>\n\t\t\t\t\t{row.editable ? (\n\t\t\t\t\t\t<TextField\n\t\t\t\t\t\t\tvalue={row?.title || \"\"}\n\t\t\t\t\t\t\tname=\"title\"\n\t\t\t\t\t\t\tonChange={(e) => {\n\t\t\t\t\t\t\t\thandleChange(row.id, \"title\", e.target.value);\n\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t\tstyle={{ width: \"100%\" }}\n\t\t\t\t\t\t\tInputProps={{\n\t\t\t\t\t\t\t\tclasses: { input: classes.textField },\n\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t/>\n\t\t\t\t\t) : (\n\t\t\t\t\t\trow.title\n\t\t\t\t\t)}\n\t\t\t\t</td>\n\t\t\t\t<td\n\t\t\t\t\tclassName={\"one-to-many-col one-to-many-col-border\"}\n\t\t\t\t\tstyle={{ overflow: \"hidden\", maxWidth: \"22%\" }}\n\t\t\t\t>\n\t\t\t\t\t{row.editable ? (\n\t\t\t\t\t\t<Select\n\t\t\t\t\t\t\tname=\"color\"\n\t\t\t\t\t\t\tonChange={(value) => {\n\t\t\t\t\t\t\t\thandleChange(row.id, \"color\", value);\n\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t\tvalue={row?.color || \"\"}\n\t\t\t\t\t\t\toptions={WKF_COLORS}\n\t\t\t\t\t\t\toptionLabel=\"title\"\n\t\t\t\t\t\t\toptionValue=\"name\"\n\t\t\t\t\t\t/>\n\t\t\t\t\t) : (\n\t\t\t\t\t\trow?.color && (\n\t\t\t\t\t\t\t<Chip\n\t\t\t\t\t\t\t\tlabel={row.color?.title}\n\t\t\t\t\t\t\t\tsize=\"small\"\n\t\t\t\t\t\t\t\tstyle={{\n\t\t\t\t\t\t\t\t\tbackground: row.color?.color,\n\t\t\t\t\t\t\t\t\tcolor: row.color?.border || \"white\",\n\t\t\t\t\t\t\t\t\tfontWeight: 800,\n\t\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t)\n\t\t\t\t\t)}\n\t\t\t\t</td>\n\t\t\t\t<td\n\t\t\t\t\tclassName=\"one-to-many-col one-to-many-col-border\"\n\t\t\t\t\tstyle={{\n\t\t\t\t\t\tmaxWidth: \"22%\",\n\t\t\t\t\t\toverflow: \"hidden\",\n\t\t\t\t\t\twhiteSpace: \"nowrap\",\n\t\t\t\t\t\ttextOverflow: \"ellipsis\",\n\t\t\t\t\t}}\n\t\t\t\t>\n\t\t\t\t\t{row.editable ? (\n\t\t\t\t\t\t<Select\n\t\t\t\t\t\t\tname=\"icon\"\n\t\t\t\t\t\t\tonChange={(value) => {\n\t\t\t\t\t\t\t\thandleChange(row.id, \"icon\", value);\n\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t\tvalue={row?.icon || \"\"}\n\t\t\t\t\t\t\toptions={fontAwesomeList}\n\t\t\t\t\t\t/>\n\t\t\t\t\t) : (\n\t\t\t\t\t\trow.icon\n\t\t\t\t\t)}\n\t\t\t\t</td>\n\t\t\t\t<td\n\t\t\t\t\tclassName=\"one-to-many-col one-to-many-col-border\"\n\t\t\t\t\tstyle={{ maxWidth: \"4%\" }}\n\t\t\t\t>\n\t\t\t\t\t<IconButton\n\t\t\t\t\t\tonClick={() => deleteRow(row.id)}\n\t\t\t\t\t\taria-label=\"add\"\n\t\t\t\t\t\tsize=\"small\"\n\t\t\t\t\t\tclassName={classes.iconButton}\n\t\t\t\t\t\tdisabled={!updateSelection}\n\t\t\t\t\t>\n\t\t\t\t\t\t<i\n\t\t\t\t\t\t\tclassName={clsx(\"fa fa-trash-o\", classes.crudIcon)}\n\t\t\t\t\t\t\tstyle={{\n\t\t\t\t\t\t\t\tcolor: updateSelection ? \"black\" : \"rgba(0, 0, 0, 0.26)\",\n\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t/>\n\t\t\t\t\t</IconButton>\n\t\t\t\t</td>\n\t\t\t\t<td\n\t\t\t\t\tclassName=\"one-to-many-col one-to-many-col-border\"\n\t\t\t\t\tstyle={{ maxWidth: \"4%\" }}\n\t\t\t\t>\n\t\t\t\t\t<IconButton\n\t\t\t\t\t\tonClick={() => handleRow(row.id)}\n\t\t\t\t\t\taria-label=\"add\"\n\t\t\t\t\t\tsize=\"small\"\n\t\t\t\t\t\tclassName={classes.iconButton}\n\t\t\t\t\t\tdisabled={!updateSelection}\n\t\t\t\t\t>\n\t\t\t\t\t\t<i\n\t\t\t\t\t\t\tclassName={clsx(\"fa fa-bars\", classes.crudIcon)}\n\t\t\t\t\t\t\tstyle={{\n\t\t\t\t\t\t\t\tcolor: updateSelection ? \"black\" : \"rgba(0, 0, 0, 0.26)\",\n\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t/>\n\t\t\t\t\t</IconButton>\n\t\t\t\t</td>\n\t\t\t</tr>\n\t\t);\n\t}\n);\n\nexport default DropTarget(\n\tItemTypes.CARD,\n\t{\n\t\thover(props, monitor, component) {\n\t\t\tif (!component) {\n\t\t\t\treturn null;\n\t\t\t}\n\t\t\tconst node = component.getNode();\n\t\t\tif (!node) {\n\t\t\t\treturn null;\n\t\t\t}\n\t\t\tconst dragIndex = monitor.getItem().index;\n\t\t\tconst hoverIndex = props.index;\n\t\t\tif (dragIndex === hoverIndex) {\n\t\t\t\treturn;\n\t\t\t}\n\t\t\tconst hoverBoundingRect = node.getBoundingClientRect();\n\t\t\tconst hoverMiddleY =\n\t\t\t\t(hoverBoundingRect.bottom - hoverBoundingRect.top) / 2;\n\t\t\tconst clientOffset = monitor.getClientOffset();\n\t\t\tconst hoverClientY = clientOffset.y - hoverBoundingRect.top;\n\n\t\t\tif (dragIndex < hoverIndex && hoverClientY < hoverMiddleY) {\n\t\t\t\treturn;\n\t\t\t}\n\t\t\tif (dragIndex > hoverIndex && hoverClientY > hoverMiddleY) {\n\t\t\t\treturn;\n\t\t\t}\n\t\t\tprops.moveCard(dragIndex, hoverIndex);\n\t\t\tmonitor.getItem().index = hoverIndex;\n\t\t},\n\t},\n\t(connect) => ({\n\t\tconnectDropTarget: connect.dropTarget(),\n\t})\n)(\n\tDragSource(\n\t\tItemTypes.CARD,\n\t\t{\n\t\t\tbeginDrag: (props) => ({\n\t\t\t\tid: props.id,\n\t\t\t\tindex: props.index,\n\t\t\t}),\n\t\t},\n\t\t(connect, monitor) => ({\n\t\t\tconnectDragSource: connect.dragSource(),\n\t\t\tisDragging: monitor.isDragging(),\n\t\t})\n\t)(Content)\n);\n","import React, { useState } from \"react\";\nimport Checkbox from \"@material-ui/core/Checkbox\";\nimport { makeStyles } from \"@material-ui/core\";\n\nimport {\n\tcamleCaseString,\n\ttranslate,\n\tgetProperty,\n\tgetPropertyValue,\n} from \"../../utils\";\nimport DialogConfirmation from \"../../Toolbar/DeleteConfirmation\";\n\nconst useStyles = makeStyles(() => ({\n\troot: {\n\t\tcolor: \"#0275d8 !important\",\n\t\t\"&$checked\": {\n\t\t\tcolor: \"#0275d8 !important\",\n\t\t},\n\t},\n}));\n\nexport default function CheckboxField(_props) {\n\tconst [openAlert, setAlertOpen] = useState(false);\n\tlet {\n\t\tname,\n\t\ttitle,\n\t\tparentField,\n\t\tdefaultValue,\n\t\tuncheckDialog,\n\t\talertMessage,\n\t\t...rest\n\t} = _props.field;\n\tconst {\n\t\tprops,\n\t\tclassNames,\n\t\thandleDialogOk,\n\t\tisHistoryGenerated,\n\t\tmarkHistoryGenerated,\n\t} = _props;\n\tconst classes = useStyles();\n\tconst {\n\t\tpropertyList,\n\t\tsetPropertyList,\n\t\tonChange,\n\t\tmodelType,\n\t\teditWidgetType,\n\t\tmetaFieldStore,\n\t} = props;\n\tlet _value = getPropertyValue(\n\t\tpropertyList,\n\t\tname,\n\t\tparentField,\n\t\tdefaultValue,\n\t\t!(modelType !== rest.modelType) || editWidgetType === \"customField\"\n\t);\n\tlet fieldValue = Boolean(_value ? !(_value === \"false\") : _value);\n\tif (rest.getValue) {\n\t\tfieldValue = rest.getValue(propertyList);\n\t}\n\tlet disabled = false;\n\tif (rest.isDisabled) {\n\t\tdisabled = rest.isDisabled({\n\t\t\tproperties: propertyList,\n\t\t\tmetaFieldStore,\n\t\t\teditWidgetType,\n\t\t\tmodelType,\n\t\t});\n\t}\n\ttitle = translate(camleCaseString(title || name));\n\n\tconst handleOnChange = () => {\n\t\tif (uncheckDialog) {\n\t\t\tsetAlertOpen(false);\n\t\t}\n\t\tsetPropertyList({\n\t\t\t...propertyList,\n\t\t\t...(rest.change ? rest.change(!fieldValue, propertyList) : {}),\n\t\t\t...getProperty(\n\t\t\t\tname,\n\t\t\t\t!fieldValue,\n\t\t\t\tparentField,\n\t\t\t\tpropertyList[parentField],\n\t\t\t\t!(modelType !== rest.modelType) || editWidgetType === \"customField\"\n\t\t\t),\n\t\t});\n\t\tonChange(\n\t\t\t{\n\t\t\t\t...propertyList,\n\t\t\t\t...(rest.change ? rest.change(!fieldValue, propertyList) : {}),\n\t\t\t\t...getProperty(\n\t\t\t\t\tname,\n\t\t\t\t\t!fieldValue,\n\t\t\t\t\tparentField,\n\t\t\t\t\tpropertyList[parentField],\n\t\t\t\t\t!(modelType !== rest.modelType) || editWidgetType === \"customField\"\n\t\t\t\t),\n\t\t\t},\n\t\t\tname,\n\t\t\tisHistoryGenerated\n\t\t);\n\t\tmarkHistoryGenerated();\n\t\thandleDialogOk();\n\t};\n\n\treturn (\n\t\t<React.Fragment>\n\t\t\t<Checkbox\n\t\t\t\tclassName={classNames}\n\t\t\t\tchecked={fieldValue}\n\t\t\t\tdisabled={disabled}\n\t\t\t\tclasses={{\n\t\t\t\t\troot: classes.root,\n\t\t\t\t}}\n\t\t\t\tonChange={() => {\n\t\t\t\t\tif (\n\t\t\t\t\t\tuncheckDialog &&\n\t\t\t\t\t\tfieldValue &&\n\t\t\t\t\t\tpropertyList &&\n\t\t\t\t\t\tpropertyList.selectionText\n\t\t\t\t\t) {\n\t\t\t\t\t\tsetAlertOpen(true);\n\t\t\t\t\t\treturn;\n\t\t\t\t\t}\n\t\t\t\t\thandleOnChange();\n\t\t\t\t}}\n\t\t\t\tvalue={propertyList[name]}\n\t\t\t/>\n\t\t\t{openAlert && (\n\t\t\t\t<DialogConfirmation\n\t\t\t\t\topen={openAlert}\n\t\t\t\t\tmessage={alertMessage}\n\t\t\t\t\tonClose={() => setAlertOpen(false)}\n\t\t\t\t\tonOk={handleOnChange}\n\t\t\t\t\ttitle=\"Confirm\"\n\t\t\t\t/>\n\t\t\t)}\n\t\t</React.Fragment>\n\t);\n}\n","import React, { useState, useEffect } from \"react\";\nimport { makeStyles } from \"@material-ui/core/styles\";\nimport SelectComponent from \"../../components/SelectComponent\";\n\nimport { IconButton } from \"@material-ui/core\";\nimport clsx from \"clsx\";\nimport Button from \"@material-ui/core/Button\";\nimport Dialog from \"@material-ui/core/Dialog\";\nimport DialogTitle from \"@material-ui/core/DialogTitle\";\nimport DialogContent from \"@material-ui/core/DialogContent\";\nimport DialogActions from \"@material-ui/core/DialogActions\";\nimport DialogContentText from \"@material-ui/core/DialogContentText\";\nimport FormControlLabel from \"@material-ui/core/FormControlLabel\";\nimport _ from \"lodash\";\nimport CardContent from \"@material-ui/core/CardContent\";\nimport { useStore } from \"../../store/context\";\nimport { getSelectionText } from \"../../Toolbar/api\";\nimport { translate } from \"../../utils\";\nimport Content from \"./Content\";\nimport CheckboxField from \"./CheckboxField\";\nimport { MODEL_TYPE } from \"../../constants\";\n\nexport const WKF_COLORS = [\n\t{ name: \"red\", title: \"Red\", color: \"#f44336\", border: \"#fff\" },\n\t{ name: \"pink\", title: \"Pink\", color: \"#e91e63\", border: \"#fff\" },\n\t{ name: \"purple\", title: \"Purple\", color: \"#9c27b0\", border: \"#fff\" },\n\t{\n\t\tname: \"deeppurple\",\n\t\ttitle: \"Deep Purple\",\n\t\tcolor: \"#673ab7\",\n\t\tborder: \"#fff\",\n\t},\n\t{ name: \"indigo\", title: \"Indigo\", color: \"#3f51b5\", border: \"#fff\" },\n\t{ name: \"blue\", title: \"Blue\", color: \"#2196f3\", border: \"#fff\" },\n\t{ name: \"lightblue\", title: \"Light Blue\", color: \"#03a9f4\", border: \"#fff\" },\n\t{ name: \"cyan\", title: \"Cyan\", color: \"#00bcd4\", border: \"#fff\" },\n\t{ name: \"teal\", title: \"Teal\", color: \"#009688\", border: \"#fff\" },\n\t{ name: \"green\", title: \"Green\", color: \"#4caf50\", border: \"#fff\" },\n\t{\n\t\tname: \"lightgreen\",\n\t\ttitle: \"Light Green\",\n\t\tcolor: \"#8bc34a\",\n\t\tborder: \"black\",\n\t},\n\t{ name: \"lime\", title: \"Lime\", color: \"#cddc39\", border: \"black\" },\n\t{ name: \"yellow\", title: \"Yellow\", color: \"#ffeb3b\", border: \"black\" },\n\t{ name: \"amber\", title: \"Amber\", color: \"#ffc107\", border: \"black\" },\n\t{ name: \"orange\", title: \"Orange\", color: \"#ff9800\", border: \"black\" },\n\t{\n\t\tname: \"deeporange\",\n\t\ttitle: \"Deep Orange\",\n\t\tcolor: \"#ff5722\",\n\t\tborder: \"#fff\",\n\t},\n\t{ name: \"brown\", title: \"Brown\", color: \"#795548\", border: \"#fff\" },\n\t{ name: \"grey\", title: \"Grey\", color: \"#9e9e9e\", border: \"black\" },\n\t{ name: \"bluegrey\", title: \"Blue Grey\", color: \"#607d8b\", border: \"#fff\" },\n\t{ name: \"black\", title: \"Black\", color: \"black\", border: \"#fff\" },\n\t{ name: \"white\", title: \"White\", color: \"whitesmoke\", border: \"black\" },\n];\n\nconst useStyles = makeStyles(() => ({\n\tpaper: {\n\t\tminWidth: \"50%\",\n\t\twidth: \"50%\",\n\t\tmaxWidth: \"100%\",\n\t\tresize: \"auto\",\n\t},\n\talertPaper: {\n\t\tminWidth: 300,\n\t},\n\tcheckbox: {\n\t\tcolor: \"#0275d8 !important\",\n\t\t\"&$checked\": {\n\t\t\tcolor: \"#0275d8 !important\",\n\t\t},\n\t},\n\tbutton: {\n\t\ttextTransform: \"none\",\n\t\tbackgroundColor: \"#0275d8\",\n\t\tborderColor: \"#0275d8\",\n\t\tcolor: \"#fff\",\n\t\t\"&:hover\": {\n\t\t\tbackgroundColor: \"#0275d8\",\n\t\t\tborderColor: \"#0275d8\",\n\t\t\tcolor: \"#fff\",\n\t\t},\n\t},\n\tcrudIcon: {\n\t\theight: \"1.5em\",\n\t\twidth: \"1.5em\",\n\t\tfontSize: 16,\n\t\tcursor: \"pointer\",\n\t\tcolor: \"#fff\",\n\t\tdisplay: \"flex\",\n\t\talignItems: \"center\",\n\t\tjustifyContent: \"center\",\n\t},\n\tcontent: {\n\t\toverflow: \"auto\",\n\t\tpadding: \"0px 8px 16px 8px\",\n\t},\n\tdialogContent: {\n\t\tdisplay: \"flex\",\n\t\tflexDirection: \"column\",\n\t},\n\tok: {\n\t\tbackgroundColor: \"#0275d8\",\n\t\tborderColor: \"#0275d8\",\n\t\tcolor: \"#fff\",\n\t\t\"&:hover\": {\n\t\t\tbackgroundColor: \"#0275d8\",\n\t\t\tborderColor: \"#0275d8\",\n\t\t\tcolor: \"#fff\",\n\t\t},\n\t},\n\tbtn: {\n\t\ttextTransform: \"none\",\n\t},\n\tdialogActions: {\n\t\tpaddingBottom: 16,\n\t},\n\troot: {\n\t\tdisplay: \"flex\",\n\t\tjustifyContent: \"space-between\",\n\t\talignItems: \"flex-start\",\n\t},\n\ticonButton: {\n\t\tmarginTop: 25,\n\t\tpaddingLeft: 10,\n\t},\n\ticon: {\n\t\tcolor: \"white\",\n\t},\n\tlabel: {\n\t\tfontSize: 13,\n\t},\n}));\n\nexport default function SelectionWidget(_props) {\n\tconst { field, index, props, error } = _props;\n\tconst [rows, setRows] = useState([]);\n\tconst [openGrid, setOpenGrid] = useState(false);\n\tconst [openAlert, setAlertOpen] = useState(false);\n\tconst [isHistoryGenerated, setIsHistoryGenerated] = useState(false);\n\tconst classes = useStyles();\n\tconst { propertyList, setPropertyList, onChange } = props;\n\tconst { state, update } = useStore();\n\tconst { editWidget } = state;\n\tconst { selection, selectionText, updateSelection, isSelectionField } =\n\t\tpropertyList;\n\n\tconst handleChange = (id, name, value) => {\n\t\tsetRows((rows) =>\n\t\t\trows.map((row) => (row.id === id ? { ...row, [name]: value } : row))\n\t\t);\n\t};\n\n\tconst markHistoryGenerated = () => {\n\t\tsetIsHistoryGenerated(true);\n\t};\n\n\tconst updateWidget = (rows) => {\n\t\tlet selectionText = \"\";\n\t\tif (rows?.length <= 0) {\n\t\t\tselectionText = null;\n\t\t} else {\n\t\t\trows.forEach((row, i) => {\n\t\t\t\tif (row.title) {\n\t\t\t\t\tselectionText += `${i > 0 ? \"\\n\" : \"\"}${row.title}:${row.value}`;\n\t\t\t\t}\n\t\t\t\tif (row.color && row.color.name) {\n\t\t\t\t\tselectionText += \"\\ncolor:\" + row.color?.name;\n\t\t\t\t}\n\t\t\t\tif (row.icon) {\n\t\t\t\t\tselectionText += \"\\nicon:\" + row.icon;\n\t\t\t\t}\n\t\t\t});\n\t\t}\n\t\tsetPropertyList((propertyList) => ({\n\t\t\t...propertyList,\n\t\t\tselectionText,\n\t\t}));\n\t\tonChange(\n\t\t\t{\n\t\t\t\t...propertyList,\n\t\t\t\tselectionText,\n\t\t\t},\n\t\t\t\"selectionText\",\n\t\t\tisHistoryGenerated\n\t\t);\n\t};\n\n\tconst addRow = () => {\n\t\tsetRows((rows) => {\n\t\t\treturn [\n\t\t\t\t...rows?.map((row) => {\n\t\t\t\t\treturn {\n\t\t\t\t\t\t...row,\n\t\t\t\t\t\teditable: false,\n\t\t\t\t\t};\n\t\t\t\t}),\n\t\t\t\t{\n\t\t\t\t\ttitle: \"\",\n\t\t\t\t\tvalue: \"\",\n\t\t\t\t\tcolor: null,\n\t\t\t\t\ticon: null,\n\t\t\t\t\tid: _.uniqueId(),\n\t\t\t\t\teditable: true,\n\t\t\t\t},\n\t\t\t];\n\t\t});\n\t};\n\n\tconst deleteRow = (id) => {\n\t\tsetRows((rows) => rows.filter((row) => row?.id !== id));\n\t};\n\n\tconst moveCard = React.useCallback(\n\t\t(dragIndex, hoverIndex) => {\n\t\t\tif (!updateSelection) return;\n\t\t\tif (dragIndex <= -1 || hoverIndex <= -1) {\n\t\t\t\treturn;\n\t\t\t}\n\t\t\tconst cloneRows = [...(rows || [])];\n\t\t\tlet dragCard = cloneRows[dragIndex];\n\t\t\tcloneRows[dragIndex] = cloneRows[hoverIndex];\n\t\t\tcloneRows[hoverIndex] = dragCard;\n\t\t\tsetRows(cloneRows);\n\t\t},\n\t\t[rows, updateSelection]\n\t);\n\n\tconst handleRow = (id) => {\n\t\tsetRows((rows) =>\n\t\t\trows.map((row) =>\n\t\t\t\trow.id === id\n\t\t\t\t\t? { ...row, editable: !row.editable || false }\n\t\t\t\t\t: { ...row, editable: false }\n\t\t\t)\n\t\t);\n\t};\n\n\tconst saveRow = () => {\n\t\tsetRows((rows) =>\n\t\t\trows.map((row) => (row.editable ? { ...row, editable: false } : row))\n\t\t);\n\t};\n\n\tconst handleOk = () => {\n\t\tif (updateSelection && !rows.length) {\n\t\t\tsetAlertOpen(true);\n\t\t\treturn;\n\t\t}\n\t\tconst isError = rows.findIndex((r) => !r.title);\n\t\tif (isError > -1) {\n\t\t\tsetAlertOpen(true);\n\t\t\treturn;\n\t\t}\n\t\tsetIsHistoryGenerated(false);\n\t\tupdateWidget(rows);\n\t\tsetOpenGrid(false);\n\t\tvalidateErrors();\n\t};\n\n\tconst handleDialogOk = () => {\n\t\tif (!selection && !updateSelection) {\n\t\t\tsetRows([]);\n\t\t}\n\t};\n\n\tconst createRows = React.useCallback((selectionText) => {\n\t\tconst selection = selectionText?.trim().split(\"\\n\");\n\t\tlet rows = [];\n\t\tfor (let i = 0; i < selection?.length; i++) {\n\t\t\tconst option = selection[i];\n\t\t\tconst optionKeyValue = option.split(\":\");\n\t\t\tconst title = optionKeyValue[0];\n\t\t\tconst titleLower = title?.toLowerCase();\n\t\t\tlet value = optionKeyValue[1];\n\t\t\tif (titleLower && titleLower !== \"color\" && titleLower !== \"icon\") {\n\t\t\t\trows.push({\n\t\t\t\t\tid: _.uniqueId(),\n\t\t\t\t\ttitle: title,\n\t\t\t\t\tvalue: value || title,\n\t\t\t\t});\n\t\t\t} else if (titleLower === \"color\" || titleLower === \"icon\") {\n\t\t\t\tlet row = rows.pop();\n\t\t\t\tvalue =\n\t\t\t\t\ttitle === \"color\" ? WKF_COLORS.find((f) => f.name === value) : value;\n\t\t\t\trow = { ...row, [title]: value };\n\t\t\t\trows.push(row);\n\t\t\t}\n\t\t}\n\t\tsetRows(rows);\n\t}, []);\n\n\tconst addOptions = async () => {\n\t\tsetOpenGrid(true);\n\t\tif (!updateSelection && selection) {\n\t\t\tconst res = await getSelectionText({ name: selection });\n\t\t\tcreateRows(res);\n\t\t} else if (selectionText) {\n\t\t\tcreateRows(selectionText);\n\t\t} else {\n\t\t\tsetRows([]);\n\t\t}\n\t};\n\n\tconst validateErrors = React.useCallback(() => {\n\t\tif (!selectionText && !selection && editWidget && isSelectionField) {\n\t\t\tupdate((draft) => {\n\t\t\t\tdraft.errorList[editWidget] = {\n\t\t\t\t\tselection: \"Selection or selection options are required\",\n\t\t\t\t};\n\t\t\t});\n\t\t} else {\n\t\t\tupdate((draft) => {\n\t\t\t\tdelete draft.errorList[editWidget];\n\t\t\t});\n\t\t}\n\t}, [selection, editWidget, selectionText, isSelectionField, update]);\n\n\tuseEffect(() => {\n\t\tvalidateErrors();\n\t}, [validateErrors]);\n\n\tuseEffect(() => {\n\t\tif (!selectionText) {\n\t\t\tsetRows([]);\n\t\t\treturn;\n\t\t}\n\t\tcreateRows(selectionText);\n\t}, [selectionText, createRows]);\n\n\treturn (\n\t\t<div className={classes.root}>\n\t\t\t<SelectComponent\n\t\t\t\tfield={field}\n\t\t\t\tkey={index}\n\t\t\t\tindex={index}\n\t\t\t\tprops={props}\n\t\t\t\terror={error}\n\t\t\t/>\n\t\t\t<IconButton\n\t\t\t\tonClick={addOptions}\n\t\t\t\taria-label=\"add\"\n\t\t\t\tsize=\"small\"\n\t\t\t\tclassName={classes.iconButton}\n\t\t\t>\n\t\t\t\t<i\n\t\t\t\t\tclassName={clsx(\n\t\t\t\t\t\tpropertyList[field.name] || selectionText\n\t\t\t\t\t\t\t? \"fa fa-pencil\"\n\t\t\t\t\t\t\t: \"fa fa-plus\",\n\t\t\t\t\t\tclasses.icon\n\t\t\t\t\t)}\n\t\t\t\t/>\n\t\t\t</IconButton>\n\t\t\t{openGrid && (\n\t\t\t\t<Dialog\n\t\t\t\t\topen={openGrid}\n\t\t\t\t\tonClose={(_, reason) => {\n\t\t\t\t\t\tif (reason !== \"backdropClick\") {\n\t\t\t\t\t\t\tsetOpenGrid(false);\n\t\t\t\t\t\t}\n\t\t\t\t\t}}\n\t\t\t\t\tclasses={{\n\t\t\t\t\t\tpaper: classes.paper,\n\t\t\t\t\t}}\n\t\t\t\t>\n\t\t\t\t\t<DialogTitle>{translate(\"Selection\")}</DialogTitle>\n\t\t\t\t\t<DialogContent className={classes.dialogContent}>\n\t\t\t\t\t\t<CardContent className={classes.content}>\n\t\t\t\t\t\t\t<div>\n\t\t\t\t\t\t\t\t<FormControlLabel\n\t\t\t\t\t\t\t\t\tclasses={{\n\t\t\t\t\t\t\t\t\t\tlabel: classes.label,\n\t\t\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t\t\t\tcontrol={\n\t\t\t\t\t\t\t\t\t\t<CheckboxField\n\t\t\t\t\t\t\t\t\t\t\tfield={{\n\t\t\t\t\t\t\t\t\t\t\t\tname: \"updateSelection\",\n\t\t\t\t\t\t\t\t\t\t\t\tdependModelType: MODEL_TYPE.CUSTOM,\n\t\t\t\t\t\t\t\t\t\t\t\ttitle: \"New selection\",\n\t\t\t\t\t\t\t\t\t\t\t\tuncheckDialog: true,\n\t\t\t\t\t\t\t\t\t\t\t\talertMessage:\n\t\t\t\t\t\t\t\t\t\t\t\t\t\"All options and selection will be lost. Are you sure ?\",\n\t\t\t\t\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t\t\t\t\t\thandleDialogOk={handleDialogOk}\n\t\t\t\t\t\t\t\t\t\t\tisHistoryGenerated={isHistoryGenerated}\n\t\t\t\t\t\t\t\t\t\t\tmarkHistoryGenerated={markHistoryGenerated}\n\t\t\t\t\t\t\t\t\t\t\tprops={props}\n\t\t\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\tlabel={translate(\"New selection\")}\n\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t<div className=\"one-to-many-header\">\n\t\t\t\t\t\t\t\t\t<span>{translate(\"Selection items\")}</span>\n\t\t\t\t\t\t\t\t\t<Button\n\t\t\t\t\t\t\t\t\t\tonClick={addRow}\n\t\t\t\t\t\t\t\t\t\taria-label=\"add\"\n\t\t\t\t\t\t\t\t\t\tsize=\"small\"\n\t\t\t\t\t\t\t\t\t\tclassName={classes.btn}\n\t\t\t\t\t\t\t\t\t\tdisabled={!updateSelection}\n\t\t\t\t\t\t\t\t\t\tstartIcon={\n\t\t\t\t\t\t\t\t\t\t\t<i\n\t\t\t\t\t\t\t\t\t\t\t\tclassName={clsx(\"fa fa-plus\", classes.crudIcon)}\n\t\t\t\t\t\t\t\t\t\t\t\tstyle={{\n\t\t\t\t\t\t\t\t\t\t\t\t\tcolor: updateSelection\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t? \"black\"\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t: \"rgba(0, 0, 0, 0.26)\",\n\t\t\t\t\t\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t\t{translate(\"New\")}\n\t\t\t\t\t\t\t\t\t</Button>\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t<table>\n\t\t\t\t\t\t\t\t\t<tbody\n\t\t\t\t\t\t\t\t\t\tclassName=\"one-to-many-row\"\n\t\t\t\t\t\t\t\t\t\tstyle={{ textAlign: \"left\" }}\n\t\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t\t<tr style={{ display: \"flex\", alignItems: \"center\" }}>\n\t\t\t\t\t\t\t\t\t\t\t{[\n\t\t\t\t\t\t\t\t\t\t\t\t\"\\u00A0\",\n\t\t\t\t\t\t\t\t\t\t\t\t\"Title\",\n\t\t\t\t\t\t\t\t\t\t\t\t\"Value\",\n\t\t\t\t\t\t\t\t\t\t\t\t\"Color\",\n\t\t\t\t\t\t\t\t\t\t\t\t\"Icon\",\n\t\t\t\t\t\t\t\t\t\t\t\t\"\\u00A0\",\n\t\t\t\t\t\t\t\t\t\t\t\t\"\\u00A0\",\n\t\t\t\t\t\t\t\t\t\t\t].map((item, i) => (\n\t\t\t\t\t\t\t\t\t\t\t\t<td\n\t\t\t\t\t\t\t\t\t\t\t\t\tclassName=\"one-to-many-col one-to-many-col-border\"\n\t\t\t\t\t\t\t\t\t\t\t\t\tkey={`td_${i}`}\n\t\t\t\t\t\t\t\t\t\t\t\t\tstyle={{\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tborderBottom: \"1px solid #ddd\",\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tmaxWidth: item === \"\\u00A0\" ? \"4%\" : \"22%\",\n\t\t\t\t\t\t\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t\t\t\t\t{item}\n\t\t\t\t\t\t\t\t\t\t\t\t</td>\n\t\t\t\t\t\t\t\t\t\t\t))}\n\t\t\t\t\t\t\t\t\t\t</tr>\n\t\t\t\t\t\t\t\t\t\t{rows?.map((row, i) => (\n\t\t\t\t\t\t\t\t\t\t\t<Content\n\t\t\t\t\t\t\t\t\t\t\t\tkey={row.id}\n\t\t\t\t\t\t\t\t\t\t\t\tindex={i}\n\t\t\t\t\t\t\t\t\t\t\t\tid={row.id}\n\t\t\t\t\t\t\t\t\t\t\t\thandleRow={handleRow}\n\t\t\t\t\t\t\t\t\t\t\t\tdeleteRow={deleteRow}\n\t\t\t\t\t\t\t\t\t\t\t\tsaveRow={saveRow}\n\t\t\t\t\t\t\t\t\t\t\t\trow={row}\n\t\t\t\t\t\t\t\t\t\t\t\tmoveCard={moveCard}\n\t\t\t\t\t\t\t\t\t\t\t\thandleChange={handleChange}\n\t\t\t\t\t\t\t\t\t\t\t\tupdateSelection={updateSelection}\n\t\t\t\t\t\t\t\t\t\t\t\taddRow={addRow}\n\t\t\t\t\t\t\t\t\t\t\t\trowsCount={rows?.length}\n\t\t\t\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t\t\t))}\n\t\t\t\t\t\t\t\t\t</tbody>\n\t\t\t\t\t\t\t\t</table>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t</CardContent>\n\t\t\t\t\t</DialogContent>\n\t\t\t\t\t<DialogActions className={classes.dialogActions}>\n\t\t\t\t\t\t<Button\n\t\t\t\t\t\t\tonClick={() => {\n\t\t\t\t\t\t\t\tsetRows([]);\n\t\t\t\t\t\t\t\tsetOpenGrid(false);\n\t\t\t\t\t\t\t\tvalidateErrors();\n\t\t\t\t\t\t\t\tsetIsHistoryGenerated(false);\n\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t\tclassName={classes.btn}\n\t\t\t\t\t\t\tvariant=\"outlined\"\n\t\t\t\t\t\t>\n\t\t\t\t\t\t\t{translate(\"Close\")}\n\t\t\t\t\t\t</Button>\n\t\t\t\t\t\t<Button\n\t\t\t\t\t\t\tonClick={handleOk}\n\t\t\t\t\t\t\tautoFocus\n\t\t\t\t\t\t\tclassName={clsx(classes.btn, classes.ok)}\n\t\t\t\t\t\t>\n\t\t\t\t\t\t\t{translate(\"OK\")}\n\t\t\t\t\t\t</Button>\n\t\t\t\t\t</DialogActions>\n\t\t\t\t</Dialog>\n\t\t\t)}\n\t\t\t{openAlert && (\n\t\t\t\t<Dialog\n\t\t\t\t\topen={openAlert}\n\t\t\t\t\tonClose={() => setAlertOpen(false)}\n\t\t\t\t\taria-labelledby=\"alert-dialog-title\"\n\t\t\t\t\taria-describedby=\"alert-dialog-description\"\n\t\t\t\t\tclasses={{\n\t\t\t\t\t\tpaper: classes.alertPaper,\n\t\t\t\t\t}}\n\t\t\t\t>\n\t\t\t\t\t<DialogTitle id=\"alert-dialog-title\">\n\t\t\t\t\t\t{translate(\"Alert\")}\n\t\t\t\t\t</DialogTitle>\n\t\t\t\t\t<DialogContent>\n\t\t\t\t\t\t<DialogContentText id=\"alert-dialog-description\">\n\t\t\t\t\t\t\t{translate(\"Value is required\")}\n\t\t\t\t\t\t</DialogContentText>\n\t\t\t\t\t</DialogContent>\n\t\t\t\t\t<DialogActions>\n\t\t\t\t\t\t<Button\n\t\t\t\t\t\t\tonClick={() => setAlertOpen(false)}\n\t\t\t\t\t\t\tcolor=\"primary\"\n\t\t\t\t\t\t\tclassName={classes.button}\n\t\t\t\t\t\t>\n\t\t\t\t\t\t\t{translate(\"OK\")}\n\t\t\t\t\t\t</Button>\n\t\t\t\t\t</DialogActions>\n\t\t\t\t</Dialog>\n\t\t\t)}\n\t\t</div>\n\t);\n}\n","import React from \"react\";\nimport SelectComponent from \"../../components/SelectComponent\";\n\nfunction OnlyIf({ field, error, props }) {\n\tconst { contextFieldTarget, contextFieldTargetName } = props.propertyList;\n\treturn (\n\t\t<>\n\t\t\t<SelectComponent field={field} props={props} error={error} />\n\t\t\t{contextFieldTarget && contextFieldTargetName && (\n\t\t\t\t<SelectComponent\n\t\t\t\t\tfield={{\n\t\t\t\t\t\tname: \"contextFieldTitle\",\n\t\t\t\t\t\tref: contextFieldTarget,\n\t\t\t\t\t\ttitle: \"Value\",\n\t\t\t\t\t\tvalueField: contextFieldTargetName,\n\t\t\t\t\t\tdisplayField: contextFieldTargetName,\n\t\t\t\t\t}}\n\t\t\t\t\tprops={props}\n\t\t\t\t\terror={error}\n\t\t\t\t/>\n\t\t\t)}\n\t\t</>\n\t);\n}\n\nexport default OnlyIf;\n","import React, { useState } from \"react\";\nimport {\n\tTextField,\n\tGrid,\n\tTypography,\n\tFormControlLabel,\n\tSwitch,\n\tIconButton,\n} from \"@material-ui/core\";\nimport classNames from \"classnames\";\nimport { makeStyles } from \"@material-ui/core/styles\";\nimport { options } from \"./list\";\nimport {\n\tcamleCaseString,\n\ttranslate,\n\tgetProperty,\n\tgetPropertyValue,\n\tgenerateFieldUniqueTitle,\n\tcapitalizeFirst,\n} from \"../utils\";\nimport SelectComponent from \"../components/SelectComponent\";\nimport { MODEL_TYPE, TYPE, ENTITY_TYPE } from \"../constants\";\nimport { useStore } from \"../store/context\";\nimport {\n\tFormView,\n\tGridView,\n\tJsonRelationalField,\n\tSelectableType,\n\tTargetJsonModel,\n\tTargetModel,\n} from \"./propertyFields\";\nimport TranslationGrid from \"../components/TranslationGrid\";\nimport TranslateIcon from \"@material-ui/icons/Translate\";\nimport CloseIcon from \"@material-ui/icons/Delete\";\nimport ClearIcon from \"@material-ui/icons/Close\";\nimport { getSelectionText } from \"../Toolbar/api\";\nimport StaticSelection from \"./widgets/StaticSelection\";\nimport SelectionWidget from \"./widgets/SelectionWidget\";\nimport DialogConfirmation from \"../Toolbar/DeleteConfirmation\";\nimport OnlyIfComponent from \"./widgets/OnlyIf\";\n\nconst useStyles = makeStyles({\n\tinput: {\n\t\tbackgroundColor: \"#293846\",\n\t\tmarginTop: 15,\n\t\t\".modern-dark &\": {\n\t\t\tbackgroundColor: \"#323232\",\n\t\t},\n\t\t\"& .MuiInputBase-inputMultiline\": {\n\t\t\theight: \"auto !important\",\n\t\t},\n\t},\n\ttranslationInput: {\n\t\tpaddingTop: 10,\n\t\tpaddingBottom: 10,\n\t},\n\ttranslationInputView: {\n\t\tbackgroundColor: \"#293846\",\n\t\tmarginBottom: 5,\n\t\t\".modern-dark &\": {\n\t\t\tbackgroundColor: \"#323232\",\n\t\t},\n\t},\n\tlabel: {\n\t\tcolor: \"#f7f7f7\",\n\t\tfontSize: 12,\n\t\t\"&#outlined-basic-label\": {\n\t\t\tcolor: \"#f7f7f7\",\n\t\t},\n\t\t\"&.MuiInputLabel-shrink\": {\n\t\t\ttop: \"1px !important\",\n\t\t},\n\t},\n\toutlinedRoot: {\n\t\tcolor: \"#ffffff\",\n\t\t\"&:hover $notchedOutline\": {\n\t\t\tborderColor: \"#ffffff\",\n\t\t},\n\t\t\"&$focused $notchedOutline\": {\n\t\t\tborderColor: \"white\",\n\t\t\tborderWidth: 1,\n\t\t},\n\t},\n\tnotchedOutline: {},\n\tfocused: {\n\t\tcolor: \"#ffffff\",\n\t},\n\tswitchBase: {\n\t\t\"&$checked\": {\n\t\t\tcolor: \"#ffffff\",\n\t\t},\n\t\t\"&$checked + $track\": {\n\t\t\tbackgroundColor: \"#ffffff\",\n\t\t},\n\t},\n\tchecked: {},\n\ttrack: {},\n\tselection: {\n\t\tcolor: \"#ffffff\",\n\t\tbackgroundColor: \"#293846\",\n\t\t\".modern-dark &\": {\n\t\t\tbackgroundColor: \"#323232\",\n\t\t},\n\t},\n\ticonOutlined: {\n\t\tcolor: \"#ffffff\",\n\t},\n\tpanelTitle: {\n\t\tcolor: \"white\",\n\t\tfontWeight: \"600\",\n\t},\n\tpanelMargin: {\n\t\tmargin: \"25px 0px 0px 0px\",\n\t},\n\tdisableInput: {\n\t\tcolor: \"#a3a3a3 !important\",\n\t},\n\tunique: {\n\t\tcolor: \"#0275d8\",\n\t},\n\trequired: {\n\t\tcolor: \"red\",\n\t},\n\ttranslateButton: {\n\t\tcolor: \"#ffffff\",\n\t\tpadding: \"10px 12px\",\n\t\t\"& > span > svg\": {\n\t\t\tfontSize: \"1.1rem\",\n\t\t},\n\t},\n\tstaticSelectMenuItem: {\n\t\tcolor: \"#ffffff\",\n\t\tbackgroundColor: \"rgb(41, 56, 70) !important\",\n\t\t\"&:hover\": {\n\t\t\tbackgroundColor: \"#293846 !important\",\n\t\t},\n\t},\n\tautoComplete: {\n\t\twidth: \"100%\",\n\t\tmarginTop: 15,\n\t\tbackgroundColor: \"#293846\",\n\t\t\"& > div > label\": {\n\t\t\tcolor: \"#ffffff !important\",\n\t\t\tfontSize: 13,\n\t\t},\n\t\t\".modern-dark &\": {\n\t\t\tbackgroundColor: \"#323232\",\n\t\t},\n\t},\n\tautoCompleteInput: {\n\t\tcolor: \"#ffffff\",\n\t\tfontSize: 13,\n\t},\n\tautoCompleteOption: {\n\t\tfontSize: 13,\n\t\t\"& ul, .MuiAutocomplete-noOptions\": {\n\t\t\tbackgroundColor: \"rgb(41, 56, 70) !important\",\n\t\t\t\".modern-dark &\": {\n\t\t\t\tbackgroundColor: \"#1b1b1b !important\",\n\t\t\t},\n\t\t},\n\t\t\"& li, .MuiAutocomplete-noOptions\": {\n\t\t\tcolor: \"#ffffff !important\",\n\t\t\tbackgroundColor: \"rgb(41, 56, 70) !important\",\n\t\t\t\".modern-dark &\": {\n\t\t\t\tbackgroundColor: \"#1b1b1b !important\",\n\t\t\t},\n\t\t},\n\t\t\"& li:hover, .MuiAutocomplete-noOptions\": {\n\t\t\tcolor: \"#ffffff !important\",\n\t\t\tbackgroundColor: \"#2f4050 !important\",\n\t\t\t\".modern-dark &\": {\n\t\t\t\tbackgroundColor: \"#323232 !important\",\n\t\t\t},\n\t\t},\n\t},\n\ttextFieldInput: {\n\t\tfontSize: 13,\n\t},\n\tbooleanInputLabel: {\n\t\tfontSize: 12,\n\t},\n\tdisabled: {\n\t\tcolor: \"#a3a3a3 !important\",\n\t\tfontSize: 12,\n\t},\n});\n\nconst PropertiesContext = React.createContext();\n\nfunction Label(text, field) {\n\tconst classes = useStyles();\n\treturn (\n\t\t<span>\n\t\t\t<span>{text}</span>\n\t\t\t{field.unique && <span className={classes.unique}> (unique) </span>}\n\t\t\t{field.required && <span className={classes.required}> * </span>}\n\t\t</span>\n\t);\n}\n\nconst isValueGenerated = (value) => {\n\treturn value.includes(\"studio:\");\n};\n\nconst hasPropertyToShow = (list, type) => {\n\treturn (\n\t\tlist.filter(\n\t\t\t(item) => !item.dependModelType || item.dependModelType === type\n\t\t).length > 0\n\t);\n};\n\nfunction StringInput(_props) {\n\tconst {\n\t\tindex,\n\t\tmultiline = false,\n\t\terror,\n\t\tparentPanel,\n\t\tonTranslationRemove,\n\t\tclearable = false,\n\t\tisStudioLite,\n\t} = _props;\n\tconst classes = useStyles();\n\tconst [confirm, setConfirm] = React.useState(false);\n\tconst {\n\t\ttitle,\n\t\tname,\n\t\ttype,\n\t\trequired,\n\t\treadOnly,\n\t\tmax,\n\t\tmin,\n\t\tparentField,\n\t\ttranslationView,\n\t\t...rest\n\t} = _props.field;\n\tconst props = React.useContext(PropertiesContext);\n\tconst {\n\t\tpropertyList,\n\t\tsetPropertyList,\n\t\tonChange,\n\t\tmodelType,\n\t\tmetaFieldStore = [],\n\t\teditWidgetType,\n\t} = props;\n\tlet label = Label(translate(camleCaseString(title || name)), _props.field);\n\tlet placeholder = translate(camleCaseString(title || name));\n\tif (name === \"showIf\" || name === \"requiredIf\") {\n\t\tplaceholder = \"id == 1\";\n\t} else if (name === \"hideIf\") {\n\t\tplaceholder = \"id == null\";\n\t} else if (name === \"readOnlyIf\") {\n\t\tplaceholder = \"id != null\";\n\t}\n\tlet value = propertyList[name] || \"\";\n\tif (\n\t\t(modelType === rest.modelType || props.editWidgetType === \"customField\") &&\n\t\tparentField\n\t) {\n\t\tconst field = propertyList[parentField]\n\t\t\t? JSON.parse(propertyList[parentField])\n\t\t\t: {};\n\t\tvalue = field[name] || \"\";\n\t}\n\tif (rest.formatter) {\n\t\tvalue = rest.formatter(value, propertyList);\n\t}\n\tlet disabled = Boolean(readOnly);\n\tif (rest.isDisabled) {\n\t\tdisabled = rest.isDisabled({\n\t\t\tproperties: propertyList,\n\t\t\tmetaFieldStore,\n\t\t\teditWidgetType,\n\t\t\tmodelType,\n\t\t\tparentPanel,\n\t\t\tisStudioLite,\n\t\t});\n\t}\n\n\tconst handleTranslationClick = React.useCallback(() => {\n\t\tif (isValueGenerated(value)) {\n\t\t\treturn;\n\t\t}\n\t\tconst newValue = generateFieldUniqueTitle({\n\t\t\tname,\n\t\t\tfieldName: propertyList[name] || type,\n\t\t});\n\t\tonChange(\n\t\t\t{\n\t\t\t\t...(propertyList || {}),\n\t\t\t\t...getProperty(\n\t\t\t\t\tname,\n\t\t\t\t\tnewValue,\n\t\t\t\t\tparentField,\n\t\t\t\t\tpropertyList[parentField],\n\t\t\t\t\t!(modelType === rest.modelType) || editWidgetType === \"customField\"\n\t\t\t\t),\n\t\t\t},\n\t\t\tname\n\t\t);\n\t}, [\n\t\tpropertyList,\n\t\tname,\n\t\ttype,\n\t\tvalue,\n\t\tonChange,\n\t\trest.modelType,\n\t\tmodelType,\n\t\tparentField,\n\t\teditWidgetType,\n\t]);\n\n\tconst handleTranslationRemove = React.useCallback(() => {\n\t\tsetConfirm(false);\n\t\tonChange(\n\t\t\t{\n\t\t\t\t...(propertyList || {}),\n\t\t\t\t...getProperty(\n\t\t\t\t\tname,\n\t\t\t\t\t\"\",\n\t\t\t\t\tparentField,\n\t\t\t\t\tpropertyList[parentField],\n\t\t\t\t\t!(modelType === rest.modelType)\n\t\t\t\t),\n\t\t\t},\n\t\t\tname\n\t\t);\n\t\tonTranslationRemove(value);\n\t}, [\n\t\tonTranslationRemove,\n\t\tvalue,\n\t\tname,\n\t\tparentField,\n\t\tmodelType,\n\t\tonChange,\n\t\tpropertyList,\n\t\trest.modelType,\n\t]);\n\n\tconst removeTranslation = React.useCallback(() => {\n\t\tsetConfirm(true);\n\t}, []);\n\n\tconst onClose = React.useCallback(() => {\n\t\tsetConfirm(false);\n\t}, []);\n\n\tconst savedValue = React.useRef(value);\n\treturn (\n\t\t<React.Fragment>\n\t\t\t<TextField\n\t\t\t\terror={(required && !value) || Boolean(error)}\n\t\t\t\thelperText={error}\n\t\t\t\tInputLabelProps={{\n\t\t\t\t\tclassName: disabled ? classes.disabled : classes.label,\n\t\t\t\t}}\n\t\t\t\tsize=\"small\"\n\t\t\t\tInputProps={{\n\t\t\t\t\tclasses: {\n\t\t\t\t\t\troot: classes && disabled ? \"\" : classes.outlinedRoot,\n\t\t\t\t\t\tnotchedOutline: classes && classes.notchedOutline,\n\t\t\t\t\t\tfocused: classes && classes.focused,\n\t\t\t\t\t\tdisabled: classes && classes.disableInput,\n\t\t\t\t\t\tinput: classes && classes.textFieldInput,\n\t\t\t\t\t},\n\t\t\t\t\tendAdornment: translationView ? (\n\t\t\t\t\t\tisValueGenerated(value) ? (\n\t\t\t\t\t\t\t<IconButton\n\t\t\t\t\t\t\t\tclassName={classes.translateButton}\n\t\t\t\t\t\t\t\tonClick={removeTranslation}\n\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t<CloseIcon />\n\t\t\t\t\t\t\t</IconButton>\n\t\t\t\t\t\t) : (\n\t\t\t\t\t\t\t<IconButton\n\t\t\t\t\t\t\t\tclassName={classes.translateButton}\n\t\t\t\t\t\t\t\tonClick={handleTranslationClick}\n\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t<TranslateIcon />\n\t\t\t\t\t\t\t</IconButton>\n\t\t\t\t\t\t)\n\t\t\t\t\t) : clearable ? (\n\t\t\t\t\t\t<IconButton\n\t\t\t\t\t\t\tclassName={classes.translateButton}\n\t\t\t\t\t\t\tonClick={() => {\n\t\t\t\t\t\t\t\tlet value = \"\";\n\t\t\t\t\t\t\t\tlet flag = true;\n\t\t\t\t\t\t\t\tif (\n\t\t\t\t\t\t\t\t\trest.modelType === MODEL_TYPE.BASE &&\n\t\t\t\t\t\t\t\t\tprops.editWidgetType !== \"customField\"\n\t\t\t\t\t\t\t\t) {\n\t\t\t\t\t\t\t\t\tflag =\n\t\t\t\t\t\t\t\t\t\tvalue === \"\"\n\t\t\t\t\t\t\t\t\t\t\t? propertyList[name] !== undefined\n\t\t\t\t\t\t\t\t\t\t\t\t? true\n\t\t\t\t\t\t\t\t\t\t\t\t: false\n\t\t\t\t\t\t\t\t\t\t\t: true;\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\tif (\n\t\t\t\t\t\t\t\t\trest.modelType === MODEL_TYPE.CUSTOM &&\n\t\t\t\t\t\t\t\t\tprops.editWidgetType === \"customField\"\n\t\t\t\t\t\t\t\t) {\n\t\t\t\t\t\t\t\t\t// set null value when value is negative for custom view & custom fields\n\t\t\t\t\t\t\t\t\tvalue = value || null;\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\tif (flag) {\n\t\t\t\t\t\t\t\t\tonChange(\n\t\t\t\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t\t\t\t...(propertyList || {}),\n\t\t\t\t\t\t\t\t\t\t\t...getProperty(\n\t\t\t\t\t\t\t\t\t\t\t\tname,\n\t\t\t\t\t\t\t\t\t\t\t\tvalue,\n\t\t\t\t\t\t\t\t\t\t\t\tparentField,\n\t\t\t\t\t\t\t\t\t\t\t\tpropertyList[parentField],\n\t\t\t\t\t\t\t\t\t\t\t\t!(modelType === rest.modelType) ||\n\t\t\t\t\t\t\t\t\t\t\t\t\teditWidgetType === \"customField\"\n\t\t\t\t\t\t\t\t\t\t\t),\n\t\t\t\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t\t\t\tname\n\t\t\t\t\t\t\t\t\t);\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t>\n\t\t\t\t\t\t\t<ClearIcon />\n\t\t\t\t\t\t</IconButton>\n\t\t\t\t\t) : null,\n\t\t\t\t}}\n\t\t\t\tinputProps={{ min: min, max: max }}\n\t\t\t\tkey={index}\n\t\t\t\tclassName={classes && classes.input}\n\t\t\t\tid=\"outlined-basic\"\n\t\t\t\tmultiline={multiline}\n\t\t\t\ttype={type === \"integer\" ? \"number\" : type}\n\t\t\t\tlabel={label}\n\t\t\t\tplaceholder={placeholder}\n\t\t\t\tvariant=\"outlined\"\n\t\t\t\tdisabled={disabled || (translationView && isValueGenerated(value))}\n\t\t\t\tvalue={value}\n\t\t\t\tminRows={3}\n\t\t\t\tonFocus={() => {\n\t\t\t\t\tsavedValue.current = value;\n\t\t\t\t}}\n\t\t\t\tautoComplete=\"off\"\n\t\t\t\tonChange={(e) => {\n\t\t\t\t\tif (type === \"integer\" && isNaN(Number(e.target.value))) {\n\t\t\t\t\t\treturn;\n\t\t\t\t\t}\n\t\t\t\t\tif (min && max) {\n\t\t\t\t\t\tconst value = Number(e.target.value);\n\t\t\t\t\t\tif (value < min || value > max) {\n\t\t\t\t\t\t\treturn;\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t\tlet value = e.target.value;\n\t\t\t\t\tsetPropertyList({\n\t\t\t\t\t\t...(propertyList || {}),\n\t\t\t\t\t\t...getProperty(\n\t\t\t\t\t\t\tname,\n\t\t\t\t\t\t\tvalue,\n\t\t\t\t\t\t\tparentField,\n\t\t\t\t\t\t\tpropertyList[parentField],\n\t\t\t\t\t\t\t!(modelType !== rest.modelType) ||\n\t\t\t\t\t\t\t\teditWidgetType === \"customField\"\n\t\t\t\t\t\t),\n\t\t\t\t\t});\n\t\t\t\t}}\n\t\t\t\tonBlur={(e) => {\n\t\t\t\t\tif (savedValue.current === value) return;\n\t\t\t\t\tif (type === \"integer\" && isNaN(Number(e.target.value))) {\n\t\t\t\t\t\treturn;\n\t\t\t\t\t}\n\t\t\t\t\tif (min && max) {\n\t\t\t\t\t\tconst value = Number(e.target.value);\n\t\t\t\t\t\tif (value < min || value > max) {\n\t\t\t\t\t\t\treturn;\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t\tlet _value = e.target.value;\n\t\t\t\t\tlet flag = true;\n\t\t\t\t\tif (\n\t\t\t\t\t\trest.modelType === MODEL_TYPE.BASE &&\n\t\t\t\t\t\tprops.editWidgetType !== \"customField\"\n\t\t\t\t\t) {\n\t\t\t\t\t\tflag =\n\t\t\t\t\t\t\t_value === \"\"\n\t\t\t\t\t\t\t\t? propertyList[name] !== undefined\n\t\t\t\t\t\t\t\t\t? true\n\t\t\t\t\t\t\t\t\t: false\n\t\t\t\t\t\t\t\t: true;\n\t\t\t\t\t}\n\t\t\t\t\tif (\n\t\t\t\t\t\trest.modelType === MODEL_TYPE.CUSTOM &&\n\t\t\t\t\t\tprops.editWidgetType === \"customField\"\n\t\t\t\t\t) {\n\t\t\t\t\t\t// set null value when value is negative for custom view & custom fields\n\t\t\t\t\t\t_value = _value || null;\n\t\t\t\t\t}\n\t\t\t\t\tif (flag) {\n\t\t\t\t\t\tonChange(\n\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t...(propertyList || {}),\n\t\t\t\t\t\t\t\t...getProperty(\n\t\t\t\t\t\t\t\t\tname,\n\t\t\t\t\t\t\t\t\t_value && (name === \"name\" || _value?.trim() === \"\")\n\t\t\t\t\t\t\t\t\t\t? _value.trim()\n\t\t\t\t\t\t\t\t\t\t: _value,\n\t\t\t\t\t\t\t\t\tparentField,\n\t\t\t\t\t\t\t\t\tpropertyList[parentField],\n\t\t\t\t\t\t\t\t\t!(modelType === rest.modelType) ||\n\t\t\t\t\t\t\t\t\t\teditWidgetType === \"customField\"\n\t\t\t\t\t\t\t\t),\n\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\tname\n\t\t\t\t\t\t);\n\t\t\t\t\t}\n\t\t\t\t}}\n\t\t\t/>\n\t\t\t{translationView && isValueGenerated(value) && (\n\t\t\t\t<TranslationGrid\n\t\t\t\t\tInputProps={{\n\t\t\t\t\t\tclasses: {\n\t\t\t\t\t\t\troot: classes && classes.outlinedRoot,\n\t\t\t\t\t\t\tnotchedOutline: classes && classes.notchedOutline,\n\t\t\t\t\t\t\tfocused: classes && classes.focused,\n\t\t\t\t\t\t\tdisabled: classes && classes.disableInput,\n\t\t\t\t\t\t\tinput: classes && classes.translationInput,\n\t\t\t\t\t\t},\n\t\t\t\t\t}}\n\t\t\t\t\tInputLabelProps={{\n\t\t\t\t\t\tclassName: disabled ? classes.disabled : classes.label,\n\t\t\t\t\t}}\n\t\t\t\t\tclassName={classes && classes.translationInputView}\n\t\t\t\t\tkeyValue={value}\n\t\t\t\t/>\n\t\t\t)}\n\t\t\t{confirm && (\n\t\t\t\t<DialogConfirmation\n\t\t\t\t\topen={confirm}\n\t\t\t\t\tmessage=\"Are you sure, do you want to delete translations?\"\n\t\t\t\t\tonClose={onClose}\n\t\t\t\t\tonOk={handleTranslationRemove}\n\t\t\t\t/>\n\t\t\t)}\n\t\t</React.Fragment>\n\t);\n}\n\nfunction BooleanField(_props) {\n\tconst [openAlert, setAlertOpen] = useState(false);\n\tconst { index } = _props;\n\tlet { name, title, parentField, defaultValue, uncheckDialog, ...rest } =\n\t\t_props.field;\n\tconst props = React.useContext(PropertiesContext);\n\tconst {\n\t\tpropertyList,\n\t\tsetPropertyList,\n\t\tonChange,\n\t\tmodelType,\n\t\teditWidgetType,\n\t\tmetaFieldStore,\n\t\tid,\n\t\tmainItems,\n\t\tparentPanel,\n\t} = props;\n\tlet _value = getPropertyValue(\n\t\tpropertyList,\n\t\tname,\n\t\tparentField,\n\t\tdefaultValue,\n\t\t!(modelType !== rest.modelType) || editWidgetType === \"customField\"\n\t);\n\tlet fieldValue = Boolean(_value ? !(_value === \"false\") : _value);\n\tconst classes = useStyles();\n\tif (rest.getValue) {\n\t\tfieldValue = rest.getValue(propertyList);\n\t}\n\tlet disabled = false;\n\tlet hide = false;\n\tif (rest.isDisabled) {\n\t\tdisabled = rest.isDisabled({\n\t\t\tproperties: propertyList,\n\t\t\tmetaFieldStore,\n\t\t\teditWidgetType,\n\t\t\tmodelType,\n\t\t\tid,\n\t\t\tmainItems,\n\t\t});\n\t}\n\tif (rest.isHidden) {\n\t\thide = rest.isHidden({ parentPanel });\n\t}\n\ttitle = translate(camleCaseString(title || name));\n\n\tconst handleOnChange = () => {\n\t\tif (uncheckDialog) {\n\t\t\tsetAlertOpen(false);\n\t\t}\n\t\tsetPropertyList({\n\t\t\t...propertyList,\n\t\t\t...(rest.change ? rest.change(!fieldValue, propertyList) : {}),\n\t\t\t...getProperty(\n\t\t\t\tname,\n\t\t\t\t!fieldValue,\n\t\t\t\tparentField,\n\t\t\t\tpropertyList[parentField],\n\t\t\t\t!(modelType !== rest.modelType) || editWidgetType === \"customField\"\n\t\t\t),\n\t\t});\n\t\tonChange(\n\t\t\t{\n\t\t\t\t...propertyList,\n\t\t\t\t...(rest.change ? rest.change(!fieldValue, propertyList) : {}),\n\t\t\t\t...getProperty(\n\t\t\t\t\tname,\n\t\t\t\t\t!fieldValue,\n\t\t\t\t\tparentField,\n\t\t\t\t\tpropertyList[parentField],\n\t\t\t\t\t!(modelType !== rest.modelType) || editWidgetType === \"customField\"\n\t\t\t\t),\n\t\t\t},\n\t\t\tname\n\t\t);\n\t};\n\treturn (\n\t\t<React.Fragment>\n\t\t\t{!hide && (\n\t\t\t\t<FormControlLabel\n\t\t\t\t\tstyle={{ marginTop: 15, alignSelf: \"flex-start\" }}\n\t\t\t\t\tkey={index}\n\t\t\t\t\tclasses={{\n\t\t\t\t\t\tlabel: classes && classes.booleanInputLabel,\n\t\t\t\t\t\tdisabled: classes.disabled,\n\t\t\t\t\t}}\n\t\t\t\t\tcontrol={\n\t\t\t\t\t\t<Switch\n\t\t\t\t\t\t\tclasses={{\n\t\t\t\t\t\t\t\tswitchBase: classes && classes.switchBase,\n\t\t\t\t\t\t\t\ttrack: classes && classes.track,\n\t\t\t\t\t\t\t\tchecked: classes && classes.checked,\n\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t\tchecked={fieldValue}\n\t\t\t\t\t\t\tdisabled={disabled}\n\t\t\t\t\t\t\tonChange={() => {\n\t\t\t\t\t\t\t\tif (\n\t\t\t\t\t\t\t\t\tuncheckDialog &&\n\t\t\t\t\t\t\t\t\tfieldValue &&\n\t\t\t\t\t\t\t\t\tpropertyList &&\n\t\t\t\t\t\t\t\t\tpropertyList.selectionText\n\t\t\t\t\t\t\t\t) {\n\t\t\t\t\t\t\t\t\tsetAlertOpen(true);\n\t\t\t\t\t\t\t\t\treturn;\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\thandleOnChange();\n\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t\tvalue={propertyList[name]}\n\t\t\t\t\t\t/>\n\t\t\t\t\t}\n\t\t\t\t\tlabel={translate(camleCaseString(title || name))}\n\t\t\t\t/>\n\t\t\t)}\n\t\t\t{openAlert && (\n\t\t\t\t<DialogConfirmation\n\t\t\t\t\topen={openAlert}\n\t\t\t\t\tmessage=\"Are you sure?\"\n\t\t\t\t\tonClose={() => setAlertOpen(false)}\n\t\t\t\t\tonOk={handleOnChange}\n\t\t\t\t\ttitle=\"Confirm\"\n\t\t\t\t/>\n\t\t\t)}\n\t\t</React.Fragment>\n\t);\n}\n\nfunction checkDepend(field, propertyList) {\n\tif (field.depends) {\n\t\tconst value = propertyList[field.depends];\n\t\tif (field.dependValue !== value) {\n\t\t\treturn false;\n\t\t}\n\t\treturn true;\n\t}\n\treturn;\n}\n\nfunction checkModel(field, modelType, editWidgetType, propertyList) {\n\tif (field.dependModelType && field.dependModelType !== modelType) {\n\t\tif (editWidgetType !== \"customField\") {\n\t\t\treturn false;\n\t\t}\n\t}\n\tif (field.showInBaseView === false && editWidgetType !== \"customField\") {\n\t\treturn false;\n\t}\n\tif (editWidgetType === \"customField\" && field.showInCustomField === false) {\n\t\treturn false;\n\t}\n\tif (field.shouldRender && !field.shouldRender(propertyList)) {\n\t\treturn false;\n\t}\n\treturn true;\n}\n\nfunction RenderPropertyField() {\n\tconst props = React.useContext(PropertiesContext);\n\tconst {\n\t\telements,\n\t\tid,\n\t\tpropertyList,\n\t\tenableStudioApp,\n\t\tmodelType,\n\t\teditWidgetType,\n\t\terrors,\n\t\tentityType,\n\t\tactualType,\n\t\tparentPanel,\n\t\tonTranslationRemove,\n\t\tisStudioLite,\n\t} = props;\n\treturn (\n\t\t<>\n\t\t\t{elements.map((field, index) => {\n\t\t\t\tconst depend = checkDepend(field, propertyList);\n\t\t\t\tif (depend === false) {\n\t\t\t\t\treturn null;\n\t\t\t\t}\n\t\t\t\tif (!checkModel(field, modelType, editWidgetType, propertyList)) {\n\t\t\t\t\treturn null;\n\t\t\t\t}\n\t\t\t\tif (field.name === \"studioApp\" && !enableStudioApp) {\n\t\t\t\t\treturn null;\n\t\t\t\t}\n\t\t\t\tif (\n\t\t\t\t\t[actualType, entityType].includes(ENTITY_TYPE.META) &&\n\t\t\t\t\tfield.name === \"packageName\"\n\t\t\t\t) {\n\t\t\t\t\treturn null;\n\t\t\t\t}\n\t\t\t\tconst key = `${index}_${id}`;\n\t\t\t\tswitch (field.type) {\n\t\t\t\t\tcase \"string\":\n\t\t\t\t\t\treturn (\n\t\t\t\t\t\t\t<StringInput\n\t\t\t\t\t\t\t\tfield={field}\n\t\t\t\t\t\t\t\tkey={key}\n\t\t\t\t\t\t\t\tindex={key}\n\t\t\t\t\t\t\t\tmultiline={false}\n\t\t\t\t\t\t\t\terror={errors[field.name]}\n\t\t\t\t\t\t\t\tisStudioLite={isStudioLite}\n\t\t\t\t\t\t\t\tonTranslationRemove={onTranslationRemove}\n\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t);\n\t\t\t\t\tcase \"integer\":\n\t\t\t\t\t\treturn (\n\t\t\t\t\t\t\t<StringInput\n\t\t\t\t\t\t\t\tfield={field}\n\t\t\t\t\t\t\t\tkey={key}\n\t\t\t\t\t\t\t\tindex={key}\n\t\t\t\t\t\t\t\tmultiline={false}\n\t\t\t\t\t\t\t\terror={errors[field.name]}\n\t\t\t\t\t\t\t\tparentPanel={parentPanel}\n\t\t\t\t\t\t\t\tclearable={true}\n\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t);\n\t\t\t\t\tcase \"boolean\":\n\t\t\t\t\t\treturn (\n\t\t\t\t\t\t\t<BooleanField\n\t\t\t\t\t\t\t\tfield={field}\n\t\t\t\t\t\t\t\tkey={key}\n\t\t\t\t\t\t\t\tindex={key}\n\t\t\t\t\t\t\t\terror={errors[field.name]}\n\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t);\n\t\t\t\t\tcase \"selection\":\n\t\t\t\t\t\treturn (\n\t\t\t\t\t\t\t<SelectionWidget\n\t\t\t\t\t\t\t\tfield={field}\n\t\t\t\t\t\t\t\tkey={key}\n\t\t\t\t\t\t\t\tindex={key}\n\t\t\t\t\t\t\t\tprops={props}\n\t\t\t\t\t\t\t\terror={errors[field.name]}\n\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t);\n\t\t\t\t\tcase \"select\":\n\t\t\t\t\tcase \"objectSelection\":\n\t\t\t\t\t\treturn (\n\t\t\t\t\t\t\t<SelectComponent\n\t\t\t\t\t\t\t\tfield={field}\n\t\t\t\t\t\t\t\tkey={key}\n\t\t\t\t\t\t\t\tindex={key}\n\t\t\t\t\t\t\t\tprops={props}\n\t\t\t\t\t\t\t\terror={errors[field.name]}\n\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t);\n\t\t\t\t\tcase \"staticSelect\":\n\t\t\t\t\t\treturn (\n\t\t\t\t\t\t\t<StaticSelection\n\t\t\t\t\t\t\t\tfield={field}\n\t\t\t\t\t\t\t\tkey={key}\n\t\t\t\t\t\t\t\tindex={key}\n\t\t\t\t\t\t\t\terror={errors[field.name]}\n\t\t\t\t\t\t\t\tparentPanel={parentPanel}\n\t\t\t\t\t\t\t\tprops={props}\n\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t);\n\t\t\t\t\tcase \"text\":\n\t\t\t\t\t\treturn (\n\t\t\t\t\t\t\t<StringInput\n\t\t\t\t\t\t\t\tfield={field}\n\t\t\t\t\t\t\t\tkey={key}\n\t\t\t\t\t\t\t\tindex={key}\n\t\t\t\t\t\t\t\tmultiline={true}\n\t\t\t\t\t\t\t\terror={errors[field.name]}\n\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t);\n\t\t\t\t\tcase \"onlyIf\":\n\t\t\t\t\t\treturn (\n\t\t\t\t\t\t\t<OnlyIfComponent\n\t\t\t\t\t\t\t\tfield={field}\n\t\t\t\t\t\t\t\tkey={key}\n\t\t\t\t\t\t\t\tprops={props}\n\t\t\t\t\t\t\t\terror={errors[field.name]}\n\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t);\n\t\t\t\t\tdefault:\n\t\t\t\t\t\treturn (\n\t\t\t\t\t\t\t<StringInput\n\t\t\t\t\t\t\t\tfield={field}\n\t\t\t\t\t\t\t\tkey={key}\n\t\t\t\t\t\t\t\tindex={key}\n\t\t\t\t\t\t\t\terror={errors[field.name]}\n\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t);\n\t\t\t\t}\n\t\t\t})}\n\t\t</>\n\t);\n}\n\nfunction PropertiesProvider({ children, ...value }) {\n\treturn (\n\t\t<PropertiesContext.Provider value={value}>\n\t\t\t{children}\n\t\t</PropertiesContext.Provider>\n\t);\n}\n\nexport default function Properties(props) {\n\tconst { state, onWidgetChange, onTranslationRemove } = useStore();\n\tconst {\n\t\twidgets,\n\t\teditWidget,\n\t\teditWidgetType,\n\t\tcustomFieldWidgets,\n\t\tmodelType,\n\t\tenableStudioApp,\n\t\tmetaFieldStore = [],\n\t\terrorList = {},\n\t\tentityType,\n\t\tactualType,\n\t\tisStudioLite,\n\t\tmainItems,\n\t} = state;\n\tlet widget = null;\n\tif (editWidget) {\n\t\tif (editWidgetType === \"customField\" && customFieldWidgets) {\n\t\t\twidget = customFieldWidgets[editWidget];\n\t\t} else if (editWidgetType !== \"customField\" && widgets) {\n\t\t\twidget = widgets[editWidget];\n\t\t}\n\t}\n\tconst { serverType, isSelectionField } = widget || {};\n\tlet { type } = widget || {};\n\tlet selectedType =\n\t\tserverType === \"field\" ? type || \"string\" : serverType || type;\n\tselectedType = selectedType && selectedType.toLowerCase().replace(/_/g, \"-\");\n\tif (selectedType === \"datetime\") {\n\t\tconst field = metaFieldStore?.find((f) => f.name === widget.name);\n\t\tif (field && `${field.tz}` === \"true\") {\n\t\t\tselectedType = \"zoneddatetime\";\n\t\t}\n\t}\n\tconst [propertyList, setPropertyList] = useState({});\n\tlet property = options.find((option) => option.type === selectedType);\n\tif (selectedType === \"form\") {\n\t\tif (state.modelType === MODEL_TYPE.CUSTOM) {\n\t\t\tproperty = options.find((option) => option.type === \"modelForm\");\n\t\t}\n\t}\n\tif (isSelectionField) {\n\t\tselectedType = [\"string\", \"integer\"].includes(widget && widget.type)\n\t\t\t? widget.type\n\t\t\t: selectedType;\n\t\tif (property && property.value) {\n\t\t\tconst typeFieldIndex = property.value.overview.findIndex(\n\t\t\t\t(item) => item.name === \"type\"\n\t\t\t);\n\t\t\tproperty.value.overview.splice(typeFieldIndex, 1, SelectableType);\n\t\t\tconst { fieldOptions, widgetAttributes } =\n\t\t\t\t(property && property.value) || {};\n\t\t\tproperty = {\n\t\t\t\t...(property || {}),\n\t\t\t\tvalue: {\n\t\t\t\t\t...(property.value || {}),\n\t\t\t\t\tfieldOptions: (fieldOptions || []).filter(\n\t\t\t\t\t\t(f) => ![\"minSize\", \"maxSize\", \"regex\"].includes(f.name)\n\t\t\t\t\t),\n\t\t\t\t\twidgetAttributes: (widgetAttributes || []).filter(\n\t\t\t\t\t\t(f) => ![\"multiline\"].includes(f.name)\n\t\t\t\t\t),\n\t\t\t\t},\n\t\t\t};\n\t\t}\n\t}\n\tconst classes = useStyles();\n\tconst inputLabel = React.useRef(null);\n\tconst [labelWidth, setLabelWidth] = React.useState(0);\n\tReact.useEffect(() => {\n\t\tsetPropertyList({\n\t\t\t...(widget || {}),\n\t\t\ttype: selectedType,\n\t\t});\n\t\tsetLabelWidth(\n\t\t\tinputLabel && inputLabel.current && inputLabel.current.offsetWidth\n\t\t);\n\t}, [widget, selectedType]);\n\n\tasync function onChange(\n\t\tprops,\n\t\tchangedPropertyName,\n\t\tskipGenerateHistory = false\n\t) {\n\t\tconst newProperties = { ...props };\n\t\tif (changedPropertyName === JsonRelationalField.name) {\n\t\t\t// when isJsonRelationalField changes\n\t\t\tnewProperties[TargetJsonModel.name] = null;\n\t\t\tnewProperties[TargetModel.name] = null;\n\t\t\tnewProperties[GridView.name] = null;\n\t\t\tnewProperties[FormView.name] = null;\n\t\t}\n\t\tif (\n\t\t\tchangedPropertyName !== JsonRelationalField.name &&\n\t\t\tchangedPropertyName !== \"type\"\n\t\t) {\n\t\t\tnewProperties.type = widget.type;\n\t\t}\n\t\t/* selectionText implementation starts here */\n\t\tif (\n\t\t\tchangedPropertyName === \"updateSelection\" &&\n\t\t\t!newProperties.updateSelection\n\t\t) {\n\t\t\tnewProperties.selection = null;\n\t\t\tnewProperties.selectionText = null;\n\t\t}\n\t\tif (!newProperties.updateSelection) {\n\t\t\tnewProperties.selectionText = null;\n\t\t} else {\n\t\t\tconst obj = { name: newProperties.selection };\n\t\t\tconst text = await getSelectionText(obj);\n\t\t\tnewProperties.selectionText = newProperties.selectionText || text;\n\t\t}\n\t\tif (\n\t\t\tnewProperties.selection &&\n\t\t\tnewProperties.updateSelection &&\n\t\t\t!changedPropertyName\n\t\t) {\n\t\t\tconst obj = { name: newProperties.selection };\n\t\t\tconst text = await getSelectionText(obj);\n\t\t\tnewProperties.selectionText = newProperties.selectionText || text;\n\t\t}\n\t\tif (!newProperties.selection && !changedPropertyName) {\n\t\t\tnewProperties.selectionText = \"\";\n\t\t}\n\t\tif (\n\t\t\tnewProperties.selection &&\n\t\t\ttypeof newProperties.selection === \"object\"\n\t\t) {\n\t\t\tnewProperties.selection = newProperties.selection.name;\n\t\t}\n\t\t/* selectionText implementation ends here */\n\t\tonWidgetChange({\n\t\t\tid: editWidget,\n\t\t\tprops: { ...newProperties },\n\t\t\tskipGenerateHistory,\n\t\t});\n\t}\n\n\ttype = selectedType;\n\tlet errors = {};\n\tif (editWidget && errorList) {\n\t\terrors = errorList[editWidget] || {};\n\t}\n\tconst parentPanel = Object.values(widgets || {}).find(\n\t\t(w) => w.items && w.items.indexOf(editWidget) !== -1\n\t);\n\tif (widget?.type === \"panel-tabs\" && editWidgetType === \"customField\") {\n\t\treturn null;\n\t}\n\tif (\n\t\tproperty?.dependModelType &&\n\t\t`${widget?.tab}` === \"true\" &&\n\t\tproperty?.dependModelType !== modelType\n\t) {\n\t\treturn null;\n\t}\n\treturn (\n\t\t<Grid style={{ padding: 20 }}>\n\t\t\t{type &&\n\t\t\t\tproperty &&\n\t\t\t\t!(\n\t\t\t\t\tstate.modelType === MODEL_TYPE.CUSTOM && property.type === TYPE.tabs\n\t\t\t\t) &&\n\t\t\t\tObject.keys(property.value).map((panel, i) => (\n\t\t\t\t\t<Grid key={i}>\n\t\t\t\t\t\t<Typography\n\t\t\t\t\t\t\tvariant=\"body1\"\n\t\t\t\t\t\t\tclassName={classNames(\n\t\t\t\t\t\t\t\tclasses.panelTitle,\n\t\t\t\t\t\t\t\ti !== 0 && classes.panelMargin\n\t\t\t\t\t\t\t)}\n\t\t\t\t\t\t>\n\t\t\t\t\t\t\t{hasPropertyToShow(property.value[panel], modelType) &&\n\t\t\t\t\t\t\t\ttranslate(capitalizeFirst(panel))}\n\t\t\t\t\t\t</Typography>\n\t\t\t\t\t\t<Grid style={{ display: \"flex\", flexDirection: \"column\" }}>\n\t\t\t\t\t\t\t<PropertiesProvider\n\t\t\t\t\t\t\t\tkey={editWidget}\n\t\t\t\t\t\t\t\telements={property.value[panel]}\n\t\t\t\t\t\t\t\tpropertyList={propertyList}\n\t\t\t\t\t\t\t\tsetPropertyList={setPropertyList}\n\t\t\t\t\t\t\t\tlabelWidth={labelWidth}\n\t\t\t\t\t\t\t\tinputLabel={inputLabel}\n\t\t\t\t\t\t\t\ttype={type}\n\t\t\t\t\t\t\t\tonWidgetChange={onWidgetChange}\n\t\t\t\t\t\t\t\tid={editWidget}\n\t\t\t\t\t\t\t\tonChange={onChange}\n\t\t\t\t\t\t\t\tmodelType={modelType}\n\t\t\t\t\t\t\t\tenableStudioApp={enableStudioApp}\n\t\t\t\t\t\t\t\teditWidgetType={editWidgetType}\n\t\t\t\t\t\t\t\tmetaFieldStore={metaFieldStore}\n\t\t\t\t\t\t\t\terrors={errors}\n\t\t\t\t\t\t\t\tentityType={entityType}\n\t\t\t\t\t\t\t\tactualType={actualType}\n\t\t\t\t\t\t\t\tparentPanel={parentPanel}\n\t\t\t\t\t\t\t\tonTranslationRemove={onTranslationRemove}\n\t\t\t\t\t\t\t\tisStudioLite={isStudioLite}\n\t\t\t\t\t\t\t\tmainItems={mainItems}\n\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t<RenderPropertyField />\n\t\t\t\t\t\t\t</PropertiesProvider>\n\t\t\t\t\t\t</Grid>\n\t\t\t\t\t</Grid>\n\t\t\t\t))}\n\t\t</Grid>\n\t);\n}\n","import React from \"react\";\nimport Properties from \"../../Properties\";\n\nexport default React.memo(function PropertiesView() {\n\treturn (\n\t\t<div style={{ color: \"#fff\" }}>\n\t\t\t<Properties />\n\t\t</div>\n\t);\n});\n","import { Drawer } from \"@material-ui/core\";\nimport { makeStyles } from \"@material-ui/core/styles\";\nimport React, { useState } from \"react\";\nimport { Resizable } from \"re-resizable\";\n\nimport { translate } from \"../../utils\";\nimport PropertiesView from \"./PropertiesView\";\n\nconst drawerWidth = 380;\nconst resizeStyle = {\n\tdisplay: \"flex\",\n\talignItems: \"center\",\n\tjustifyContent: \"center\",\n\tborderLeft: \"solid 1px #ddd\",\n\tbackground: \"#f0f0f0\",\n};\n\nconst useStyles = makeStyles({\n\tdrawerPaper: {\n\t\tbackground: \"#2f4050\",\n\t\twidth: \"100%\",\n\t\theight: \"100%\",\n\t\tposition: \"absolute\",\n\t\tborderLeft: \"1px solid #2f4050\",\n\t\toverflow: \"auto\",\n\t},\n\tpropertyToggle: {\n\t\tposition: \"absolute\",\n\t\tleft: \"-30px\",\n\t\ttop: \"calc(50% + 60px)\",\n\t\tbackground: \"#293846\",\n\t\tcolor: \"white\",\n\t\tpadding: \"5px 20px 7px 20px\",\n\t\ttransform: \"rotate(-90deg)\",\n\t\twhiteSpace: \"nowrap\",\n\t\tfontSize: \"13px\",\n\t\tborder: \"solid 1px #293846\",\n\t\tborderBottom: \"none\",\n\t\tborderRadius: \"5px 5px 0 0\",\n\t\ttransformOrigin: \"top left\",\n\t\tzIndex: \"10\",\n\t\tcursor: \"default\",\n\t\tuserSelect: \"none\",\n\t\tboxShadow: \"1px 2px 8px 0px rgb(1 1 1 / 75%) !important\",\n\t},\n\tcontainer: {\n\t\tposition: \"sticky\",\n\t\ttop: \"0px\",\n\t\theight: \"100vh\",\n\t},\n});\nexport default React.memo(function PropertiesPanel() {\n\tconst classes = useStyles();\n\tconst [drawerOpen, setDrawerOpen] = useState(true);\n\tconst [width, setWidth] = useState(drawerWidth);\n\tconst [height, setHeight] = useState(\"100%\");\n\n\tconst setCSSWidth = (width) => {\n\t\tsetDrawerOpen(width === \"0px\" ? false : true);\n\t};\n\n\tReact.useEffect(() => {\n\t\tconst checkWindowSize = () => {\n\t\t\tif (drawerOpen) {\n\t\t\t\tsetWidth((prev) =>\n\t\t\t\t\twindow.innerWidth - prev < drawerWidth\n\t\t\t\t\t\t? window.innerWidth - drawerWidth\n\t\t\t\t\t\t: prev < drawerWidth\n\t\t\t\t\t\t? window.innerWidth - prev\n\t\t\t\t\t\t: prev\n\t\t\t\t);\n\t\t\t}\n\t\t};\n\t\twindow.addEventListener(\"resize\", checkWindowSize);\n\n\t\treturn () => {\n\t\t\twindow.removeEventListener(\"resize\", checkWindowSize);\n\t\t};\n\t});\n\n\treturn (\n\t\t<div className={classes.container}>\n\t\t\t<Resizable\n\t\t\t\tstyle={resizeStyle}\n\t\t\t\tsize={{ width, height }}\n\t\t\t\tonResizeStop={(e, direction, ref, d) => {\n\t\t\t\t\tsetWidth((width) => width + d.width);\n\t\t\t\t\tsetHeight(height + d.height);\n\t\t\t\t\tsetCSSWidth(`${width + d.width}px`);\n\t\t\t\t}}\n\t\t\t\tmaxWidth={window.innerWidth - drawerWidth}\n\t\t\t\tminHeight={height}\n\t\t\t\tenable={{\n\t\t\t\t\tleft: true,\n\t\t\t\t}}\n\t\t\t>\n\t\t\t\t<Drawer\n\t\t\t\t\tvariant=\"persistent\"\n\t\t\t\t\tanchor=\"right\"\n\t\t\t\t\topen={drawerOpen}\n\t\t\t\t\tstyle={{\n\t\t\t\t\t\twidth: drawerWidth,\n\t\t\t\t\t}}\n\t\t\t\t\tclasses={{\n\t\t\t\t\t\tpaper: classes.drawerPaper,\n\t\t\t\t\t}}\n\t\t\t\t\ttransitionDuration={0}\n\t\t\t\t>\n\t\t\t\t\t<PropertiesView />\n\t\t\t\t</Drawer>\n\t\t\t\t<div\n\t\t\t\t\tclassName={classes.propertyToggle}\n\t\t\t\t\tonClick={() => {\n\t\t\t\t\t\tsetWidth((width) => (width === 0 ? drawerWidth : 0));\n\t\t\t\t\t\tsetCSSWidth(`${width === 0 ? drawerWidth : 0}px`);\n\t\t\t\t\t}}\n\t\t\t\t>\n\t\t\t\t\t{translate(\"Properties\")}\n\t\t\t\t</div>\n\t\t\t</Resizable>\n\t\t</div>\n\t);\n});\n","import React from \"react\";\nimport { Grid, Tooltip } from \"@material-ui/core\";\nimport { makeStyles } from \"@material-ui/core/styles\";\n\nimport { translate } from \"../utils\";\n\nconst useStyles = makeStyles({\n\tfieldImage: {\n\t\tdisplay: \"flex\",\n\t\tjustifyContent: \"center\",\n\t\talignItems: \"center\",\n\t\tpadding: 15,\n\t},\n\ticon: {\n\t\twidth: 25,\n\t\theight: 25,\n\t\tbackgroundRepeat: \"no-repeat\",\n\t\tbackgroundSize: \"contain\",\n\t\tbackgroundPosition: \"center\",\n\t\tposition: \"absolute\",\n\t},\n});\n\nconst getImageURL = (widget) => {\n\tconst type = widget.serverType || widget.type;\n\tif (type && type.indexOf(\"datetime\") !== -1) {\n\t\treturn \"datetime.png\";\n\t}\n\tif (type && type.indexOf(\"date\") !== -1) {\n\t\treturn \"date.png\";\n\t}\n\tif (type && type.indexOf(\"time\") !== -1) {\n\t\treturn \"time.png\";\n\t}\n\tif (type && type.indexOf(\"decimal\") !== -1) {\n\t\treturn \"decimal.png\";\n\t}\n\tif (widget.image) {\n\t\treturn widget.image;\n\t}\n\treturn `${type}.png`;\n};\n\nexport function FieldComponent(props) {\n\tconst classes = useStyles();\n\tconst { attrs, targetName } = props;\n\treturn (\n\t\t<div>\n\t\t\t<Tooltip\n\t\t\t\tarrow\n\t\t\t\ttitle={translate(attrs.title || attrs[targetName] || attrs[\"name\"])}\n\t\t\t\tplacement=\"right\"\n\t\t\t>\n\t\t\t\t<Grid className={classes.fieldImage}>\n\t\t\t\t\t<div\n\t\t\t\t\t\tclassName={classes.icon}\n\t\t\t\t\t\tstyle={{\n\t\t\t\t\t\t\tbackgroundImage: `url(./images/${getImageURL(attrs)})`,\n\t\t\t\t\t\t}}\n\t\t\t\t\t/>\n\t\t\t\t</Grid>\n\t\t\t</Tooltip>\n\t\t</div>\n\t);\n}\n\nexport default FieldComponent;\n","import React from \"react\";\nimport { makeStyles } from \"@material-ui/core/styles\";\nimport classNames from \"classnames\";\n\nconst useStyles = makeStyles((theme) => ({\n\tfield: {\n\t\t[theme.breakpoints.down(\"sm\")]: {\n\t\t\twidth: \"100%\",\n\t\t},\n\t},\n}));\n\nexport default function Field(props) {\n\tconst classes = useStyles();\n\treturn (\n\t\t<div {...props} className={classNames(classes.field, props.className)} />\n\t);\n}\n","import React from \"react\";\nimport { Divider, Container, Grid, useMediaQuery } from \"@material-ui/core\";\nimport { makeStyles } from \"@material-ui/core/styles\";\n\nimport { fieldTypes, modelFields } from \"../../fields\";\nimport FieldComponent from \"../../components/FieldComponent\";\nimport Widget from \"../../components/Widget\";\nimport Field from \"./Field\";\nimport { useStore } from \"../../store/context\";\nimport { MODEL_TYPE, TYPE } from \"../../constants\";\nimport classNames from \"classnames\";\n\nconst useStyles = makeStyles((theme) => ({\n\tcontainer: {\n\t\twidth: \"min-content\",\n\t\theight: \"fit-content\",\n\t\tbackgroundColor: \"#fafafa\",\n\t\tborder: \"1px solid lightgray\",\n\t\tpadding: \"0\",\n\t\tmargin: \"1rem 0\",\n\t\tborderRadius: 5,\n\t\tmarginTop: 14,\n\t\tboxShadow: \"1px 2px 8px 0px rgb(1 1 1 / 50%) !important\",\n\t},\n\tattributeItem: {\n\t\t\"&:hover\": {\n\t\t\tbackgroundColor: \"rgb(41 56 70 / 35%)\",\n\t\t},\n\t},\n\tdivider: {\n\t\tmargin: \"4px\",\n\t\tbackground: \"gray\",\n\t},\n\twidget: {\n\t\tborder: \"none !important\",\n\t\tboxShadow: \"none\",\n\t\tpadding: \"5px 0\",\n\t},\n}));\n\nexport default React.memo(function AddPanelView({ toolbarOffset }) {\n\tconst classes = useStyles();\n\tconst { state } = useStore();\n\tconst { isStudioLite } = state;\n\n\tconst isResponsive = useMediaQuery(`(max-height: ${720 + toolbarOffset}px)`);\n\tconst fields = [...fieldTypes, ...modelFields].filter((e) => {\n\t\tif (e.name === \"Menu\" && state.modelType === MODEL_TYPE.CUSTOM) {\n\t\t\treturn false;\n\t\t}\n\t\treturn true;\n\t});\n\n\tconst showField = (field) => {\n\t\tif ([TYPE.menubar, TYPE.toolbar].includes(field.type) && state.widgets) {\n\t\t\tconst index = Object.values(state.widgets).findIndex(\n\t\t\t\t(w) => w.type === field.type\n\t\t\t);\n\t\t\treturn index === -1;\n\t\t} else if (isStudioLite && field.name === \"oneToMany\") {\n\t\t\treturn false;\n\t\t}\n\t\treturn true;\n\t};\n\n\treturn (\n\t\t<Container className={classNames(classes.container, \"toolbar-pallete\")}>\n\t\t\t{fields.map(\n\t\t\t\t(fieldType, index) =>\n\t\t\t\t\t(!isStudioLite ||\n\t\t\t\t\t\t(isStudioLite &&\n\t\t\t\t\t\t\t[\"Fields\", \"Relational fields\"].includes(fieldType.name))) && (\n\t\t\t\t\t\t<React.Fragment key={index}>\n\t\t\t\t\t\t\t<Grid container style={{ width: isResponsive ? \"80px\" : \"40px\" }}>\n\t\t\t\t\t\t\t\t{fieldType.value &&\n\t\t\t\t\t\t\t\t\tfieldType.value.map((field, i) => {\n\t\t\t\t\t\t\t\t\t\tif (\n\t\t\t\t\t\t\t\t\t\t\tfield.editorType &&\n\t\t\t\t\t\t\t\t\t\t\t!field.editorType.includes(state.modelType)\n\t\t\t\t\t\t\t\t\t\t) {\n\t\t\t\t\t\t\t\t\t\t\treturn null;\n\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\tif (!showField(field)) {\n\t\t\t\t\t\t\t\t\t\t\treturn null;\n\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\treturn (\n\t\t\t\t\t\t\t\t\t\t\t<Grid\n\t\t\t\t\t\t\t\t\t\t\t\titem\n\t\t\t\t\t\t\t\t\t\t\t\txs={isResponsive ? 6 : 12}\n\t\t\t\t\t\t\t\t\t\t\t\tclassName={classes.attributeItem}\n\t\t\t\t\t\t\t\t\t\t\t\tkey={i}\n\t\t\t\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t\t\t\t<Field key={i}>\n\t\t\t\t\t\t\t\t\t\t\t\t\t<Widget\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tid={field.id}\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tattrs={field}\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tdesign={true}\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tcomponent={FieldComponent}\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tisCoreField={true}\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tisPalleteField={true}\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tclassName={classes.widget}\n\t\t\t\t\t\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t\t\t\t\t</Field>\n\t\t\t\t\t\t\t\t\t\t\t</Grid>\n\t\t\t\t\t\t\t\t\t\t);\n\t\t\t\t\t\t\t\t\t})}\n\t\t\t\t\t\t\t</Grid>\n\t\t\t\t\t\t\t{index < fields.length - 1 && (\n\t\t\t\t\t\t\t\t<Divider className={classes.divider} />\n\t\t\t\t\t\t\t)}\n\t\t\t\t\t\t</React.Fragment>\n\t\t\t\t\t)\n\t\t\t)}\n\t\t</Container>\n\t);\n});\n","import React from \"react\";\nimport { Grid } from \"@material-ui/core\";\nimport {\n\tmakeStyles,\n\tcreateTheme,\n\tThemeProvider,\n} from \"@material-ui/core/styles\";\nimport { DndProvider } from \"react-dnd\";\nimport Backend from \"react-dnd-html5-backend\";\nimport MainPanel from \"./Panels/MainPanel\";\nimport Toolbar from \"./Toolbar/ToolbarContainer\";\nimport StudioProvider, { useStore } from \"./store/context\";\nimport PropertiesPanel from \"./Panels/PropertiesPanel/PropertiesPanelView\";\nimport AddPanelView from \"./Panels/AttributesPanel/AddPanelView\";\nimport {\n\tfetchLanguages,\n\tfetchUserPreferences,\n\tgetEnableAppBuilder,\n\tmetaJsonFieldService,\n} from \"./Toolbar/api\";\nimport AxelorService from \"./services/axelor.rest\";\nimport { generateCustomModelSchema } from \"./utils\";\nimport { ENTITY_TYPE } from \"./constants\";\n\nconst useStyles = makeStyles({\n\ttoolbarWrapper: {\n\t\tpaddingRight: \"1rem\",\n\t},\n\tpanelContainer: {\n\t\tdisplay: \"flex\",\n\t\tpadding: \"0 0 0 1rem\",\n\t},\n\tpropertiesPanel: {\n\t\t\".modern-dark &\": {\n\t\t\tbackgroundColor: \"#202124\",\n\t\t},\n\t},\n\tmainPanel: {\n\t\theight: \"100vh\",\n\t\toverflow: \"auto\",\n\t\t\".modern-dark &\": {\n\t\t\tbackgroundColor: \"#202124\",\n\t\t},\n\t},\n\tcontainer: { display: \"flex\" },\n});\n\nconst theme = createTheme({\n\ttypography: {\n\t\tfontFamily: '\"Open Sans\", \"Helvetica Neue\", Helvetica, Arial, sans-serif',\n\t},\n});\n\nconst getParams = () => {\n\tconst params = new URL(document.location).searchParams;\n\tconst isStudioLite = params.get(\"isStudioLite\");\n\tconst model = params.get(\"model\");\n\tconst modelTitle = params.get(\"modelTitle\");\n\treturn {\n\t\tisStudioLite,\n\t\tmodel,\n\t\tmodelTitle,\n\t};\n};\n\nfunction AppContent() {\n\tconst classes = useStyles();\n\tconst { update, state } = useStore();\n\tconst {\n\t\tpast = [],\n\t\tfuture = [],\n\t\tbaseHasChanges,\n\t\tcustomFieldHasChanges,\n\t} = state;\n\tconst [toolbarHeight, setToolbarHeight] = React.useState();\n\tconst gridRef = React.useRef();\n\tconst mainContainerRef = React.useRef();\n\tconst toolbarSelector = `.${classes.toolbarWrapper}`;\n\n\tconst alertUser = (event) => {\n\t\tevent.preventDefault();\n\t\tevent.returnValue = \"Are you sure you want to close the tab?\";\n\t};\n\n\tconst fetchJSONFields = React.useCallback(\n\t\t(ids, record) => {\n\t\t\tconst criteria = [];\n\t\t\tif (ids.length) {\n\t\t\t\tcriteria.push({ fieldName: \"id\", operator: \"in\", value: ids });\n\t\t\t\tconst data = {\n\t\t\t\t\tcriteria,\n\t\t\t\t};\n\t\t\t\tmetaJsonFieldService\n\t\t\t\t\t.search({ data, sortBy: [\"sequence\"] })\n\t\t\t\t\t.then((res) => {\n\t\t\t\t\t\tif (res.data) {\n\t\t\t\t\t\t\tconst list = res.data || [];\n\t\t\t\t\t\t\tconst schema = generateCustomModelSchema(list, record);\n\t\t\t\t\t\t\tupdate((draft) => {\n\t\t\t\t\t\t\t\tdraft.widgets = {\n\t\t\t\t\t\t\t\t\t...schema.widgets,\n\t\t\t\t\t\t\t\t};\n\t\t\t\t\t\t\t\tdraft.items = schema.items;\n\t\t\t\t\t\t\t\tdraft.loader = false;\n\t\t\t\t\t\t\t});\n\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\tupdate((draft) => {\n\t\t\t\t\t\t\t\tdraft.loader = false;\n\t\t\t\t\t\t\t});\n\t\t\t\t\t\t}\n\t\t\t\t\t});\n\t\t\t} else {\n\t\t\t\tconst schema = generateCustomModelSchema([], record);\n\t\t\t\tupdate((draft) => {\n\t\t\t\t\tdraft.widgets = {\n\t\t\t\t\t\t...schema.widgets,\n\t\t\t\t\t};\n\t\t\t\t\tdraft.items = schema.items;\n\t\t\t\t\tdraft.loader = false;\n\t\t\t\t\tdraft.model = record;\n\t\t\t\t\tdraft.customModel = record;\n\t\t\t\t\tdraft.editWidget = -1;\n\t\t\t\t\tdraft.editWidgetType = null;\n\t\t\t\t});\n\t\t\t}\n\t\t},\n\t\t[update]\n\t);\n\n\tReact.useEffect(() => {\n\t\tfetchLanguages().then((result) => {\n\t\t\tupdate((draft) => {\n\t\t\t\tdraft.languageList = [...result];\n\t\t\t});\n\t\t});\n\t\tfetchUserPreferences().then((result) => {\n\t\t\tif ((result?.theme || \"\").includes(\"dark\")) {\n\t\t\t\tdocument.body.className = result?.theme;\n\t\t\t}\n\t\t});\n\n\t\tgetEnableAppBuilder().then((res) => {\n\t\t\tupdate((draft) => {\n\t\t\t\tdraft.enableStudioApp = res;\n\t\t\t});\n\t\t});\n\t}, [update]);\n\n\tReact.useEffect(() => {\n\t\tconst grid = gridRef.current;\n\t\tgrid && grid.focus();\n\t}, []);\n\n\tReact.useEffect(() => {\n\t\tconst toolbar = document.querySelector(toolbarSelector);\n\n\t\tif (toolbar) {\n\t\t\tconst resizeObserver = new ResizeObserver(() => {\n\t\t\t\tsetToolbarHeight(toolbar.offsetHeight);\n\t\t\t});\n\n\t\t\tresizeObserver.observe(toolbar);\n\t\t\treturn () => resizeObserver.unobserve(toolbar);\n\t\t}\n\t}, [toolbarSelector]);\n\n\tReact.useEffect(() => {\n\t\twindow.top && window.top.addEventListener(\"beforeunload\", alertUser);\n\t\treturn () => {\n\t\t\twindow.top && window.top.removeEventListener(\"beforeunload\", alertUser);\n\t\t};\n\t});\n\n\tReact.useEffect(() => {\n\t\tconst scope =\n\t\t\twindow.top &&\n\t\t\twindow.top.angular &&\n\t\t\twindow.top.angular\n\t\t\t\t.element(\n\t\t\t\t\twindow.top.document.querySelector(\n\t\t\t\t\t\t'[ng-repeat=\"tab in navTabs\"][class=\"ng-scope active\"] [ng-click=\"closeTab(tab)\"]'\n\t\t\t\t\t)\n\t\t\t\t)\n\t\t\t\t.scope();\n\t\tif (!scope?.tab?.$viewScope) return;\n\t\tscope.tab.$viewScope.confirmDirty = function (callback, cancelCallback) {\n\t\t\ttry {\n\t\t\t\tconst isDirty =\n\t\t\t\t\tpast?.length > 0 ||\n\t\t\t\t\tfuture?.length > 0 ||\n\t\t\t\t\tbaseHasChanges ||\n\t\t\t\t\tcustomFieldHasChanges;\n\t\t\t\tif (!isDirty) {\n\t\t\t\t\treturn callback && callback();\n\t\t\t\t} else {\n\t\t\t\t\twindow.top.axelor.dialogs.confirm(\n\t\t\t\t\t\twindow.top._t(\n\t\t\t\t\t\t\t\"Current changes will be lost. Do you really want to proceed?\"\n\t\t\t\t\t\t),\n\t\t\t\t\t\t(confirmed) => {\n\t\t\t\t\t\t\tif (!confirmed) {\n\t\t\t\t\t\t\t\treturn cancelCallback && cancelCallback();\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\treturn callback && callback();\n\t\t\t\t\t\t}\n\t\t\t\t\t);\n\t\t\t\t}\n\t\t\t} catch (error) {\n\t\t\t\tconsole.error(error);\n\t\t\t}\n\t\t};\n\t}, [future.length, past.length, baseHasChanges, customFieldHasChanges]);\n\n\tReact.useEffect(() => {\n\t\tconst { isStudioLite, model, modelTitle } = getParams();\n\t\tasync function init() {\n\t\t\tif (!isStudioLite || !model) return;\n\t\t\tconst metaModelService = new AxelorService({\n\t\t\t\tmodel: \"com.axelor.meta.db.MetaJsonModel\",\n\t\t\t});\n\t\t\tlet data = {\n\t\t\t\trelated: {\n\t\t\t\t\tmenuBuilder: [\"title\", \"parentMenu\"],\n\t\t\t\t},\n\t\t\t\tdata: {\n\t\t\t\t\t_domain: `name = '${model}'`,\n\t\t\t\t},\n\t\t\t};\n\t\t\tupdate((draft) => {\n\t\t\t\tdraft.loader = true;\n\t\t\t});\n\t\t\tconst res = await metaModelService.search(data);\n\t\t\tif (res.data) {\n\t\t\t\tconst record = res.data[0];\n\t\t\t\tconst { fields = [], ...rest } = record;\n\t\t\t\tupdate((draft) => {\n\t\t\t\t\tdraft.model = { ...record, entityType: ENTITY_TYPE.META };\n\t\t\t\t\tdraft.entityType = ENTITY_TYPE.META;\n\t\t\t\t\tdraft.widgets = null;\n\t\t\t\t\tdraft.initialWidgets = null;\n\t\t\t\t\tdraft.items = [];\n\t\t\t\t\tdraft.initialItems = null;\n\t\t\t\t\tdraft.view = null;\n\t\t\t\t\tdraft.exView = null;\n\t\t\t\t\tdraft.modelField = null;\n\t\t\t\t\tdraft.customFields = [];\n\t\t\t\t\tdraft.customFieldWidgets = null;\n\t\t\t\t\tdraft.originalXML = null;\n\t\t\t\t\tdraft.extensionXML = null;\n\t\t\t\t\tdraft.extensionView = null;\n\t\t\t\t\tdraft.extensionMoves = [];\n\t\t\t\t\tdraft.errorList = {};\n\t\t\t\t\tdraft.attrsList = [];\n\t\t\t\t\tdraft.translationList = [];\n\t\t\t\t\tdraft.initialTranslationList = [];\n\t\t\t\t\tdraft.removedTranslationList = [];\n\t\t\t\t\tdraft.selectedView = null;\n\t\t\t\t\tdraft.editWidget = -1;\n\t\t\t\t\tdraft.editWidgetType = null;\n\t\t\t\t\tdraft.tabIndex = 0;\n\t\t\t\t\tfetchJSONFields(\n\t\t\t\t\t\tfields.map((f) => f.id),\n\t\t\t\t\t\trest\n\t\t\t\t\t);\n\t\t\t\t\tdraft.customModel = record;\n\t\t\t\t});\n\t\t\t}\n\t\t}\n\t\tinit();\n\t\tupdate((draft) => {\n\t\t\tdraft.isStudioLite = JSON.parse(isStudioLite || \"false\");\n\t\t\tdraft.queryModel = { title: modelTitle || model, name: model };\n\t\t});\n\t}, [update, fetchJSONFields]);\n\n\treturn (\n\t\t<Grid className={classes.container} ref={gridRef}>\n\t\t\t<Grid container>\n\t\t\t\t<Grid item xs={12} className={classes.toolbarWrapper}>\n\t\t\t\t\t<Toolbar />\n\t\t\t\t</Grid>\n\t\t\t\t<Grid item xs className={classes.panelContainer} ref={mainContainerRef}>\n\t\t\t\t\t<AddPanelView toolbarOffset={toolbarHeight} />\n\t\t\t\t\t<MainPanel\n\t\t\t\t\t\tclassName={classes.mainPanel}\n\t\t\t\t\t\ttoolbarOffset={toolbarHeight}\n\t\t\t\t\t/>\n\t\t\t\t</Grid>\n\t\t\t</Grid>\n\t\t\t<Grid>\n\t\t\t\t<PropertiesPanel />\n\t\t\t</Grid>\n\t\t</Grid>\n\t);\n}\n\nexport default function App() {\n\treturn (\n\t\t<StudioProvider>\n\t\t\t<DndProvider backend={Backend}>\n\t\t\t\t<ThemeProvider theme={theme}>\n\t\t\t\t\t<AppContent />\n\t\t\t\t</ThemeProvider>\n\t\t\t</DndProvider>\n\t\t</StudioProvider>\n\t);\n}\n","import React from \"react\";\nimport ReactDOM from \"react-dom\";\nimport \"./index.css\";\nimport \"./theme.css\";\nimport App from \"./App\";\n\nReactDOM.render(<App />, document.getElementById(\"root\"));\n","import React from \"react\";\nimport produce from \"immer\";\nimport _ from \"lodash\";\n\nimport {\n\tTYPE,\n\tIDS,\n\tPANEL_TYPE,\n\tMODEL_TYPE,\n\tENTITY_TYPE,\n\tPANEL_PROPS,\n} from \"../constants\";\nimport {\n\treorderGrid,\n\tcheckExclusive,\n\tarrangeGrid,\n\tsetErrorList,\n\tcaseConverter,\n\ttranslate,\n} from \"../utils\";\nimport { original } from \"immer\";\nimport { generateExtension } from \"./computeXML\";\nimport { generateXpath } from \"./xpathGenerator\";\nimport { validateParentPanelItems, validateOnRemove } from \"./validation\";\nimport Utils, { isExtensionView } from \"./../utils\";\n\nconst StoreContext = React.createContext();\n\nfunction useMutableState(defaultValue) {\n\tconst [state, setState] = React.useState(defaultValue);\n\treturn [\n\t\tstate,\n\t\tReact.useCallback((updater) => setState(produce(updater)), [setState]),\n\t];\n}\n\nfunction StoreProvider({ children }) {\n\t/*\n\tWARNING: Never nest two setState calls(windows-all_browsers/firefox-linux bugs),\n\tEx: funtion NeverDoIt(){\n\t\tsetState((draft)=>{\n\t\t\t...some code...\n\t\t\tonRemove()   <-- this function calls setState within it\n\t\t})\n\t}\n\t*/\n\tconst [state, setState] = useMutableState({\n\t\tfuture: [],\n\t\tpast: [],\n\t\ttitle: \"\",\n\t\titems: [],\n\t\tsideItems: [],\n\t\tmainItems: [],\n\t\twidgets: null,\n\t\tdragWidget: null,\n\t\teditWidget: null,\n\t\thoverWidget: null,\n\t\tinitialWidgets: null,\n\t\tinitialItems: null,\n\t\ttabIndex: 0,\n\t\tmodelType: \"BASE\",\n\t\tcustomFields: [],\n\t\tcustomFieldItems: [],\n\t\tcustomFieldWidgets: null,\n\t\tmodelField: null,\n\t\thoverAttr: {},\n\t\tloader: false,\n\t\tremovedCustomFields: [],\n\t\terrorList: {},\n\t\tentityType: ENTITY_TYPE.META,\n\t\tactualType: null,\n\t\textensionMoves: [],\n\t\tattrsList: [],\n\t\tremovedTranslationList: [],\n\t\tisStudioLite: false,\n\t\teditWidgetType: null,\n\t\tcustomFieldHasChanges: false, // to check if customFields in BASE model type has been modified\n\t\tbaseHasChanges: false, // to check if form in BASE model type has been modified\n\t});\n\tconst { widgets } = state;\n\n\tfunction getAllChildrenIds(id, widgetType) {\n\t\tconst widgets =\n\t\t\twidgetType === \"customField\" ? state.customFieldWidgets : state.widgets;\n\t\tconst collectIds = (parent) => {\n\t\t\tconst { items = [] } = widgets[parent];\n\t\t\treturn items.reduce(\n\t\t\t\t(all, item) => all.concat(collectIds(item)),\n\t\t\t\t[parent]\n\t\t\t);\n\t\t};\n\t\treturn collectIds(id);\n\t}\n\n\tfunction onExtension(moveIds, state) {\n\t\tif (state.exView && !Utils.isCreatedFromStudio(state.exView)) {\n\t\t\tgenerateExtension(moveIds, state);\n\t\t}\n\t}\n\n\t// update widget properties\n\t// pass draft if calling from inside another immer setState\n\tfunction onWidgetChange(\n\t\t{ id, props, reset = false, skipGenerateHistory = false },\n\t\tdraft\n\t) {\n\t\tconst callbackfn = (draft) => {\n\t\t\t!skipGenerateHistory && generateHistory(draft);\n\t\t\tconst isCustomField = draft.editWidgetType === \"customField\";\n\t\t\tif (draft.modelType === MODEL_TYPE.BASE) {\n\t\t\t\tif (!skipGenerateHistory) {\n\t\t\t\t\tif (isCustomField) {\n\t\t\t\t\t\tdraft.customFieldHasChanges = true;\n\t\t\t\t\t} else {\n\t\t\t\t\t\tdraft.baseHasChanges = true;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t\tconst extendList = [];\n\t\t\tsetErrorList(props, draft, id, isCustomField);\n\t\t\tconst widgets =\n\t\t\t\tdraft.editWidgetType === \"customField\"\n\t\t\t\t\t? draft.customFieldWidgets\n\t\t\t\t\t: draft.widgets;\n\t\t\tif (reset) {\n\t\t\t\twidgets[id] = {};\n\t\t\t}\n\t\t\tconst widget =\n\t\t\t\tdraft.editWidgetType === \"customField\" && draft.customFieldWidgets\n\t\t\t\t\t? draft.customFieldWidgets[id]\n\t\t\t\t\t: draft.widgets && draft.widgets[id];\n\t\t\tif (widget) {\n\t\t\t\tObject.keys(props).forEach((key) => {\n\t\t\t\t\tlet value = props[key];\n\t\t\t\t\tif (/^[a-z]/i.test(widget[\"name\"])) {\n\t\t\t\t\t\twidget[\"name\"] = caseConverter(\n\t\t\t\t\t\t\twidget[\"name\"],\n\t\t\t\t\t\t\t!(props[\"type\"] === TYPE.form)\n\t\t\t\t\t\t);\n\t\t\t\t\t}\n\t\t\t\t\tlet doChange = true;\n\t\t\t\t\t// add change in move\n\t\t\t\t\tconst _value = widget[key] === undefined ? \"\" : widget[key];\n\t\t\t\t\tif (_value !== value) {\n\t\t\t\t\t\tconst xPath = id === -1 ? \"/\" : widgets[id].xPath;\n\t\t\t\t\t\tlet _value = [undefined, null].includes(value) ? \"\" : value;\n\n\t\t\t\t\t\tisExtensionView(state) &&\n\t\t\t\t\t\t\textendList.push({\n\t\t\t\t\t\t\t\tname: \"attribute\",\n\t\t\t\t\t\t\t\ttarget: xPath,\n\t\t\t\t\t\t\t\tattributes: {\n\t\t\t\t\t\t\t\t\tname: Utils.keyReplacer(key, MODEL_TYPE.BASE),\n\t\t\t\t\t\t\t\t\tvalue: Utils.valueConverter(_value, key),\n\t\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t\tid,\n\t\t\t\t\t\t\t});\n\t\t\t\t\t}\n\t\t\t\t\tif (key === \"colSpan\") {\n\t\t\t\t\t\tconst parentId = Object.keys(widgets).find(\n\t\t\t\t\t\t\t(x) => (widgets[x].items || []).indexOf(id) > -1\n\t\t\t\t\t\t);\n\t\t\t\t\t\tvalue = Math.min(\n\t\t\t\t\t\t\tNumber((widgets[parentId] && widgets[parentId].cols) || value),\n\t\t\t\t\t\t\tvalue\n\t\t\t\t\t\t);\n\t\t\t\t\t\tif (widgets && parentId && widgets[parentId].type === TYPE.panel) {\n\t\t\t\t\t\t\tconst { itemSpan } = JSON.parse(\n\t\t\t\t\t\t\t\t(widgets[parentId] || {}).widgetAttrs || \"{}\"\n\t\t\t\t\t\t\t);\n\t\t\t\t\t\t\tvalue = itemSpan || value;\n\t\t\t\t\t\t}\n\t\t\t\t\t} else if (key === \"cols\" && value) {\n\t\t\t\t\t\tvalue = Math.min(12, Number(value));\n\t\t\t\t\t} else if (key === \"widgetAttrs\") {\n\t\t\t\t\t\tconst newValue = JSON.parse(value || \"{}\");\n\t\t\t\t\t\tconst items = widgets[id].items;\n\t\t\t\t\t\titems &&\n\t\t\t\t\t\t\titems.forEach((item) => {\n\t\t\t\t\t\t\t\tconst child = widgets[item];\n\t\t\t\t\t\t\t\tlet widgetAttrs = JSON.parse(child.widgetAttrs || \"{}\");\n\t\t\t\t\t\t\t\tif (!widgetAttrs[\"colSpan\"]) {\n\t\t\t\t\t\t\t\t\tchild.colSpan = newValue.itemSpan;\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t});\n\t\t\t\t\t}\n\t\t\t\t\tif (doChange) {\n\t\t\t\t\t\twidget[key] = value;\n\t\t\t\t\t\tkey === \"layout\" &&\n\t\t\t\t\t\t\tvalue === PANEL_TYPE.stack &&\n\t\t\t\t\t\t\t(widget.cols = 12);\n\t\t\t\t\t}\n\t\t\t\t});\n\t\t\t}\n\t\t\tif (\n\t\t\t\tdraft.editWidgetType !== \"customField\" &&\n\t\t\t\tdraft.modelType === MODEL_TYPE.BASE\n\t\t\t) {\n\t\t\t\tonExtension(extendList, draft);\n\t\t\t\tgenerateXpath(draft);\n\t\t\t}\n\t\t};\n\n\t\tif (draft) {\n\t\t\tcallbackfn(draft);\n\t\t} else {\n\t\t\tsetState(callbackfn);\n\t\t}\n\t}\n\n\t// remove widget\n\tfunction onRemove(panelId, index, id, widgetType, isPanelRequired = false) {\n\t\tconst extendList = [];\n\t\tconst isCustomField = widgetType === \"customField\";\n\t\tif (isPanelRequired) {\n\t\t\tconst dialog = {\n\t\t\t\tmessage: translate(\"Main panel is required to have side panels\"),\n\t\t\t\ttype: \"alert\",\n\t\t\t};\n\t\t\tsetState((draft) => {\n\t\t\t\tdraft.loader = false;\n\t\t\t\tdraft.dialog = dialog;\n\t\t\t});\n\t\t\treturn;\n\t\t}\n\t\tsetState((draft) => {\n\t\t\tgenerateHistory(draft);\n\t\t\tconst widgets =\n\t\t\t\twidgetType === \"customField\" ? draft.customFieldWidgets : draft.widgets;\n\t\t\tconst widgetItems =\n\t\t\t\twidgetType === \"customField\" ? \"customFieldItems\" : \"items\";\n\t\t\tif (isCustomField) {\n\t\t\t\tdraft.customFieldHasChanges = true;\n\t\t\t}\n\n\t\t\tconst isPanel = panelId && IDS.form !== panelId;\n\t\t\tindex = (isPanel ? widgets[panelId].items : draft[widgetItems]).findIndex(\n\t\t\t\t(x) => `${x}` === `${id}`\n\t\t\t);\n\t\t\tif (index > -1 && widgets[id]) {\n\t\t\t\tlet ids = getAllChildrenIds(id, widgetType);\n\t\t\t\tids.forEach((id) => {\n\t\t\t\t\tif (isCustomField || state.modelType === MODEL_TYPE.CUSTOM) {\n\t\t\t\t\t\tconst widget = widgets[id];\n\t\t\t\t\t\tif (widget.id && typeof widget.id !== \"symbol\") {\n\t\t\t\t\t\t\tdraft.removedCustomFields.push({\n\t\t\t\t\t\t\t\tid: widget.id,\n\t\t\t\t\t\t\t\tversion: widget.version,\n\t\t\t\t\t\t\t});\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t});\n\t\t\t\tconst childrenIds = [...ids];\n\t\t\t\tif (isPanel) {\n\t\t\t\t\tif (\n\t\t\t\t\t\twidgets[panelId].layout === PANEL_TYPE.grid &&\n\t\t\t\t\t\t![TYPE.menubar, TYPE.toolbar].includes(widgets[panelId].type)\n\t\t\t\t\t) {\n\t\t\t\t\t\tconst arrangeItems = arrangeGrid(\n\t\t\t\t\t\t\tdraft,\n\t\t\t\t\t\t\t{ panelId, index, id },\n\t\t\t\t\t\t\twidgetType\n\t\t\t\t\t\t);\n\t\t\t\t\t\tids = ids.concat(arrangeItems.ids);\n\t\t\t\t\t\tisExtensionView(state) &&\n\t\t\t\t\t\t\textendList.push(...arrangeItems.extendList);\n\t\t\t\t\t} else {\n\t\t\t\t\t\twidgets[panelId].items.splice(index, 1);\n\t\t\t\t\t}\n\t\t\t\t} else {\n\t\t\t\t\tdraft[widgetItems].splice(index, 1);\n\t\t\t\t}\n\t\t\t\tif (widgets[id]) {\n\t\t\t\t\tisExtensionView(state) &&\n\t\t\t\t\t\textendList.push({ name: \"replace\", target: widgets[id].xPath });\n\t\t\t\t}\n\t\t\t\tids.forEach((id) => {\n\t\t\t\t\tconst widget = widgets[id];\n\t\t\t\t\tif (widget) {\n\t\t\t\t\t\tif (!childrenIds.includes(id)) {\n\t\t\t\t\t\t\tisExtensionView(state) &&\n\t\t\t\t\t\t\t\textendList.push({ name: \"replace\", target: widget.xPath });\n\t\t\t\t\t\t}\n\t\t\t\t\t\tif (\n\t\t\t\t\t\t\twidget.id &&\n\t\t\t\t\t\t\ttypeof widget.id !== \"symbol\" &&\n\t\t\t\t\t\t\t!draft.removedCustomFields.find((field) => field.id === widget.id)\n\t\t\t\t\t\t) {\n\t\t\t\t\t\t\tdraft.removedCustomFields.push({\n\t\t\t\t\t\t\t\tid: widget.id,\n\t\t\t\t\t\t\t\tversion: widget.version,\n\t\t\t\t\t\t\t});\n\t\t\t\t\t\t}\n\t\t\t\t\t\tdelete widgets[id];\n\t\t\t\t\t}\n\t\t\t\t});\n\t\t\t\tif (ids.indexOf(draft.editWidget) > -1) {\n\t\t\t\t\tdraft.editWidget = null;\n\t\t\t\t}\n\t\t\t}\n\t\t\tvalidateOnRemove(draft, id);\n\t\t\tif (!isCustomField && draft.modelType === MODEL_TYPE.BASE) {\n\t\t\t\tvalidateParentPanelItems(draft, panelId);\n\t\t\t\tonExtension(extendList, draft);\n\t\t\t\tgenerateXpath(draft);\n\t\t\t}\n\t\t});\n\t}\n\n\t// select widget, to open properties editor\n\t// pass draft if calling from inside another immer setState\n\tfunction onSelect({ id = null, type = null }, draft) {\n\t\tconst callbackfn = (draft) => {\n\t\t\tdraft.editWidget = id;\n\t\t\tdraft.highlightedOption = null;\n\t\t\tdraft.tabIndex = 0;\n\t\t\tdraft.editWidgetType = type;\n\n\t\t\tconst _widgets =\n\t\t\t\ttype === \"customField\" ? draft.customFieldWidgets : draft.widgets;\n\t\t\t![-2].includes(id) &&\n\t\t\t\t_widgets?.[id] &&\n\t\t\t\t(draft.modelType === MODEL_TYPE.CUSTOM || type === \"customField\") &&\n\t\t\t\tsetErrorList(_widgets[id], draft, id, type === \"customField\");\n\t\t};\n\t\tif (draft) {\n\t\t\tcallbackfn(draft);\n\t\t} else {\n\t\t\tsetState(callbackfn);\n\t\t}\n\t}\n\n\t// pass draft if calling from inside another immer setState\n\tfunction addTabPanel({ attrs, id, skipGenerateHistory = false }, draft) {\n\t\tconst panelId = _.uniqueId();\n\t\tconst callbackfn = (draft) => {\n\t\t\t!skipGenerateHistory && generateHistory(draft);\n\t\t\tif (draft.modelType === MODEL_TYPE.BASE && !skipGenerateHistory) {\n\t\t\t\t// In base model, tab can be only added in customfield\n\t\t\t\tdraft.customFieldHasChanges = true;\n\t\t\t}\n\t\t\tconst widgets =\n\t\t\t\tdraft.modelType === MODEL_TYPE.BASE ? \"customFieldWidgets\" : \"widgets\";\n\t\t\tdraft[widgets][id] = {\n\t\t\t\t...attrs,\n\t\t\t\titems: [...(attrs.items || []), panelId],\n\t\t\t};\n\t\t\tdraft[widgets][panelId] = {\n\t\t\t\t...PANEL_PROPS,\n\t\t\t\t...(widgets === \"customFieldWidgets\"\n\t\t\t\t\t? { model: draft.model.fullName }\n\t\t\t\t\t: {}),\n\t\t\t\tname: `panel${panelId}`,\n\t\t\t\ttitle: \"Tab\",\n\t\t\t\twidgetAttrs: JSON.stringify({ tab: \"true\" }),\n\t\t\t};\n\t\t\tdraft.editWidgetType =\n\t\t\t\tdraft.modelType === MODEL_TYPE.BASE ? \"customField\" : null;\n\t\t};\n\t\tif (draft) {\n\t\t\tcallbackfn(draft);\n\t\t} else {\n\t\t\tsetState(callbackfn);\n\t\t}\n\t\tconst _type = state.modelType === MODEL_TYPE.BASE ? \"customField\" : null;\n\t\tonWidgetChange(\n\t\t\t{\n\t\t\t\tid,\n\t\t\t\tprops: {\n\t\t\t\t\tcurrent: panelId,\n\t\t\t\t\t_type,\n\t\t\t\t},\n\t\t\t\tskipGenerateHistory: true,\n\t\t\t},\n\t\t\tdraft\n\t\t);\n\t\tonSelect({ id: panelId, type: _type }, draft);\n\t}\n\n\t// set current dragging widget\n\tfunction onDrag(id = null, { props, isDrop } = {}) {\n\t\tsetState((draft) => {\n\t\t\tconst _extendList = [];\n\t\t\tconst { attrs = {} } = props;\n\t\t\tconst _attrs = {\n\t\t\t\ttype: attrs.type,\n\t\t\t\ttitle: attrs.label,\n\t\t\t\tname: attrs.name,\n\t\t\t\trelationship: attrs.relationship,\n\t\t\t\tmappedBy: attrs.mappedBy,\n\t\t\t\t...attrs,\n\t\t\t};\n\t\t\tif (attrs && attrs.name === \"string\") {\n\t\t\t\t_attrs[\"visibleInGrid\"] = true;\n\t\t\t}\n\t\t\tif (attrs && attrs.name === \"selection\") {\n\t\t\t\t_attrs[\"updateSelection\"] = true;\n\t\t\t}\n\t\t\tconst {\n\t\t\t\tdragWidget,\n\t\t\t\thoverWidget,\n\t\t\t\teditWidget,\n\t\t\t\tdragWidgetProps,\n\t\t\t\twidgets,\n\t\t\t\tcustomFieldWidgets,\n\t\t\t} = draft;\n\t\t\tdraft.dragWidget = null;\n\t\t\tdraft.hoverWidget = null;\n\t\t\tconst extraAttr = { ...draft.hoverAttr };\n\t\t\tif (_attrs.widgetAttrs && extraAttr.widgetAttrs) {\n\t\t\t\tconst _eWidgetAttr = JSON.parse(extraAttr.widgetAttrs || \"{}\");\n\t\t\t\tconst _attrsWidgetAttr = JSON.parse(_attrs.widgetAttrs || \"{}\");\n\t\t\t\textraAttr.widgetAttrs = JSON.stringify({\n\t\t\t\t\t..._attrsWidgetAttr,\n\t\t\t\t\t..._eWidgetAttr,\n\t\t\t\t});\n\t\t\t}\n\t\t\tdraft.dragWidgetProps = Object.assign({}, props, {\n\t\t\t\tattrs: { ..._attrs, ...extraAttr },\n\t\t\t});\n\n\t\t\tif (editWidget && editWidget === dragWidget) {\n\t\t\t\tdraft.editWidget = null;\n\t\t\t}\n\t\t\tif (isDrop) {\n\t\t\t\tif (!hoverWidget || !dragWidgetProps) return;\n\t\t\t\tgenerateHistory(draft);\n\t\t\t\tif (draft.modelType === MODEL_TYPE.BASE) {\n\t\t\t\t\t/* only customfields can be dragged and dropped in BASE model,\n\t\t\t\t\t hence we assume changes are in customFields */\n\t\t\t\t\tdraft.customFieldHasChanges = true;\n\t\t\t\t}\n\t\t\t\tconst index = draft.metaFields.findIndex(\n\t\t\t\t\t(f) =>\n\t\t\t\t\t\tf.typeName === dragWidgetProps.attrs.typeName &&\n\t\t\t\t\t\tf.name === dragWidgetProps.attrs.name\n\t\t\t\t);\n\t\t\t\tif (index !== -1) {\n\t\t\t\t\tdraft.metaFields.splice(index, 1);\n\t\t\t\t}\n\n\t\t\t\tconst hoverAttr = { ...draft.hoverAttr };\n\t\t\t\t//if both dragWidget & hoverAttr has widgetAttrs, combine them\n\t\t\t\tif (dragWidgetProps.attrs.widgetAttrs && hoverAttr.widgetAttrs) {\n\t\t\t\t\thoverAttr.widgetAttrs = JSON.stringify({\n\t\t\t\t\t\t...JSON.parse(dragWidgetProps.attrs.widgetAttrs || \"{}\"),\n\t\t\t\t\t\t...JSON.parse(hoverAttr.widgetAttrs || \"{}\"),\n\t\t\t\t\t});\n\t\t\t\t}\n\t\t\t\t/*\n\t\t\t\tcombining dragWidgetAttr with hoverAttr , so that any special properties\n\t\t\t\tdefined for a particular hoverWidget will be copied over to dropped widget\n\t\t\t\t*/\n\t\t\t\tdragWidgetProps.attrs = {\n\t\t\t\t\t...dragWidgetProps.attrs,\n\t\t\t\t\t...hoverAttr,\n\t\t\t\t};\n\n\t\t\t\tconst { extendList, newId } = reorderGrid({\n\t\t\t\t\thoverWidget,\n\t\t\t\t\tdragWidgetProps,\n\t\t\t\t})(draft);\n\n\t\t\t\t_extendList.push(...extendList);\n\n\t\t\t\tif (\n\t\t\t\t\thoverWidget._type !== \"customField\" &&\n\t\t\t\t\tdraft.modelType === MODEL_TYPE.BASE\n\t\t\t\t) {\n\t\t\t\t\tvalidateParentPanelItems(draft, dragWidgetProps.panelId);\n\t\t\t\t\tvalidateParentPanelItems(draft, hoverWidget.panelId);\n\t\t\t\t\tonExtension(_extendList, draft);\n\t\t\t\t\tgenerateXpath(draft);\n\t\t\t\t}\n\t\t\t\tdraft.hoverAttr = {};\n\t\t\t\t/**\n\t\t\t\t * While adding panel tabs add default tab panel\n\t\t\t\t */\n\t\t\t\tconst allWidgets =\n\t\t\t\t\tdraft.modelType === MODEL_TYPE.BASE ? customFieldWidgets : widgets;\n\t\t\t\tconst tabId = Object.keys(allWidgets || {})?.find(\n\t\t\t\t\t(key) => allWidgets[key]?.type === TYPE.tabs\n\t\t\t\t);\n\t\t\t\tif (\n\t\t\t\t\tdragWidgetProps?.attrs?.type === TYPE.tabs &&\n\t\t\t\t\t!dragWidgetProps?.attrs?.items?.length\n\t\t\t\t) {\n\t\t\t\t\taddTabPanel(\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tattrs: state.dragWidgetProps?.attrs,\n\t\t\t\t\t\t\tid: tabId,\n\t\t\t\t\t\t\tskipGenerateHistory: true,\n\t\t\t\t\t\t},\n\t\t\t\t\t\tdraft\n\t\t\t\t\t);\n\t\t\t\t}\n\t\t\t\t//When panel is moved into tabs, set it as current tab\n\t\t\t\tif (\n\t\t\t\t\tallWidgets[hoverWidget.panelId]?.type === TYPE.tabs &&\n\t\t\t\t\tdragWidgetProps?.attrs?.type === TYPE.panel\n\t\t\t\t) {\n\t\t\t\t\tonWidgetChange(\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tid: tabId,\n\t\t\t\t\t\t\tprops: {\n\t\t\t\t\t\t\t\tcurrent: newId || dragWidgetProps.id,\n\t\t\t\t\t\t\t\t_type: dragWidgetProps._type, // not sure why we need _type here,\n\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\tskipGenerateHistory: true,\n\t\t\t\t\t\t},\n\t\t\t\t\t\tdraft\n\t\t\t\t\t);\n\t\t\t\t}\n\t\t\t\tif (newId) {\n\t\t\t\t\tonSelect({ id: newId, type: hoverWidget?._type }, draft);\n\t\t\t\t}\n\t\t\t} else {\n\t\t\t\tdraft.dragWidget = id;\n\t\t\t}\n\t\t});\n\t}\n\n\tfunction onTranslationRemove(key) {\n\t\tsetState((draft) => {\n\t\t\tdraft.removedTranslationList.push(key);\n\t\t});\n\t}\n\n\tfunction onHover(hoverWidget) {\n\t\tsetState((draft) => {\n\t\t\tdraft.hoverWidget = hoverWidget;\n\t\t});\n\t}\n\n\t// move widget in form\n\tfunction onMove({ source, destination }, flag, _type) {\n\t\tconst resolver = (isMoved) => ({ isMoved });\n\n\t\tif (\n\t\t\t// avoid drop target of form itself\n\t\t\t!source ||\n\t\t\t!destination ||\n\t\t\t(destination.id === IDS.form && state.items.length > 1)\n\t\t) {\n\t\t\treturn resolver(false);\n\t\t}\n\n\t\t// on create widget case\n\t\tif (Object.values(IDS.createWidgets).indexOf(source.id) > -1) {\n\t\t\treturn resolver(true);\n\t\t}\n\n\t\tconst _widgets =\n\t\t\t_type === \"customField\" ? state.customFieldWidgets : widgets;\n\t\tif (\n\t\t\t// case for create new widget\n\t\t\t// special case for exclusive\n\t\t\t(!source.attrs.isNew && checkExclusive(_widgets, source, destination)) ||\n\t\t\t// avoid to drag panel on its one of children element\n\t\t\t([TYPE.panel, TYPE.tabs].includes(source.attrs.type) &&\n\t\t\t\tgetAllChildrenIds(source.id, _type).indexOf(\n\t\t\t\t\tdestination.id === IDS.dumpField\n\t\t\t\t\t\t? destination.panelId\n\t\t\t\t\t\t: destination.id\n\t\t\t\t) > -1)\n\t\t) {\n\t\t\treturn resolver(false);\n\t\t}\n\n\t\treturn resolver(true);\n\t}\n\n\tfunction setHoverAttr(attr) {\n\t\tsetState((draft) => {\n\t\t\tdraft.hoverAttr = attr;\n\t\t});\n\t}\n\n\tconst startLoader = React.useCallback(\n\t\tfunction startLoader() {\n\t\t\tsetState((draft) => {\n\t\t\t\tdraft.loader = true;\n\t\t\t});\n\t\t},\n\t\t[setState]\n\t);\n\n\tfunction undo() {\n\t\tsetState((draft) => {\n\t\t\tif (draft.past.length) {\n\t\t\t\tdraft.future.unshift({\n\t\t\t\t\twidgets: original(draft.widgets),\n\t\t\t\t\titems: original(draft.items),\n\t\t\t\t\textensionMoves: original(draft.extensionMoves),\n\t\t\t\t\tcustomFieldWidgets: original(draft.customFieldWidgets),\n\t\t\t\t\tcustomFields: original(draft.customFields),\n\t\t\t\t\tcustomFieldItems: original(draft.customFieldItems),\n\t\t\t\t\tmetaFields: original(draft.metaFields),\n\t\t\t\t\tremovedCustomFields: original(draft.removedCustomFields),\n\t\t\t\t\terrorList: original(draft.errorList),\n\t\t\t\t\tselectedView: original(draft.selectedView),\n\t\t\t\t\tmodelField: original(draft.modelField),\n\t\t\t\t});\n\t\t\t\tsetPresent(draft.past[draft.past.length - 1], draft);\n\t\t\t\tdraft.past.splice(draft.past.length - 1, 1);\n\t\t\t}\n\t\t});\n\t}\n\n\tfunction redo() {\n\t\tsetState((draft) => {\n\t\t\tif (draft.future.length) {\n\t\t\t\tdraft.past.push({\n\t\t\t\t\twidgets: original(draft.widgets),\n\t\t\t\t\titems: original(draft.items),\n\t\t\t\t\textensionMoves: original(draft.extensionMoves),\n\t\t\t\t\tcustomFieldWidgets: original(draft.customFieldWidgets),\n\t\t\t\t\tcustomFieldItems: original(draft.customFieldItems),\n\t\t\t\t\tmetaFields: original(draft.metaFields),\n\t\t\t\t\tcustomFields: original(draft.customFields),\n\t\t\t\t\tremovedCustomFields: original(draft.removedCustomFields),\n\t\t\t\t\terrorList: original(draft.errorList),\n\t\t\t\t\tselectedView: original(draft.selectedView),\n\t\t\t\t\tmodelField: original(draft.modelField),\n\t\t\t\t});\n\t\t\t\tsetPresent(draft.future[0], draft);\n\t\t\t\tdraft.future.splice(0, 1);\n\t\t\t}\n\t\t});\n\t}\n\n\tfunction setPresent(object, draft) {\n\t\tObject.keys(object).forEach((key) => {\n\t\t\tdraft[key] = original(object[key]);\n\t\t});\n\t}\n\n\tfunction generateHistory(draft) {\n\t\tdraft.past.push({\n\t\t\twidgets: original(draft.widgets),\n\t\t\titems: original(draft.items),\n\t\t\textensionMoves: original(draft.extensionMoves),\n\t\t\tcustomFieldWidgets: original(draft.customFieldWidgets),\n\t\t\tcustomFields: original(draft.customFields),\n\t\t\tcustomFieldItems: original(draft.customFieldItems),\n\t\t\tmetaFields: original(draft.metaFields),\n\t\t\tremovedCustomFields: original(draft.removedCustomFields),\n\t\t\terrorList: original(draft.errorList),\n\t\t\tselectedView: original(draft.selectedView),\n\t\t\tmodelField: original(draft.modelField),\n\t\t});\n\t\tif (draft.future.length) {\n\t\t\tdraft.future = [];\n\t\t}\n\t}\n\n\tfunction clearHistory(draft) {\n\t\tdraft.future = [];\n\t\tdraft.past = [];\n\t}\n\n\tconst value = {\n\t\tonWidgetChange,\n\t\tonMove,\n\t\tonDrag,\n\t\tonRemove,\n\t\tonHover,\n\t\tonSelect,\n\t\tstate,\n\t\tupdate: setState,\n\t\tsetHoverAttr,\n\t\tstartLoader,\n\t\tundo,\n\t\tredo,\n\t\tclearHistory,\n\t\tonTranslationRemove,\n\t\taddTabPanel,\n\t};\n\treturn (\n\t\t<StoreContext.Provider value={value}>{children}</StoreContext.Provider>\n\t);\n}\n\nexport function useStore() {\n\treturn React.useContext(StoreContext);\n}\n\nexport function useStoreState() {\n\tconst { state } = React.useContext(StoreContext);\n\treturn state;\n}\n\nexport function useWidget(id) {\n\tconst { widgets } = useStore();\n\treturn widgets[id];\n}\n\nexport default StoreProvider;\n","import axios from \"axios\";\n\nconst headers = {\n\t\"X-Requested-With\": \"XMLHttpRequest\",\n\t\"Content-Type\": \"application/json\",\n\tAccept: \"application/json\",\n};\nlet lastCookieString;\nlet lastCookies = {};\n\nfunction readCookie(name) {\n\tlet cookieString = document.cookie || \"\";\n\tif (cookieString !== lastCookieString) {\n\t\tlastCookieString = cookieString;\n\t\tlastCookies = cookieString.split(\"; \").reduce((obj, value) => {\n\t\t\tlet parts = value.split(\"=\");\n\t\t\tobj[parts[0]] = parts[1];\n\t\t\treturn obj;\n\t\t}, {});\n\t}\n\treturn lastCookies[name];\n}\n\nclass service {\n\tconstructor(props) {\n\t\tthis.baseURL =\n\t\t\tprocess.env.NODE_ENV === \"production\" ? \"../../\" : \"/axelor-erp/\";\n\t}\n\n\trequest(url, method, data) {\n\t\tlet options = {};\n\t\tif (method !== \"get\") {\n\t\t\toptions[\"data\"] = data;\n\t\t}\n\t\treturn axios({\n\t\t\tmethod: method,\n\t\t\tbaseURL: this.baseURL,\n\t\t\theaders: {\n\t\t\t\t...headers,\n\t\t\t\t\"X-CSRF-Token\": readCookie(\"CSRF-TOKEN\"),\n\t\t\t},\n\t\t\turl,\n\t\t\t...options,\n\t\t});\n\t}\n\n\tinterceptor(url, method, data) {\n\t\treturn this.request(url, method, data)\n\t\t\t.then((result) => {\n\t\t\t\tif (result.status === 200) {\n\t\t\t\t\treturn result.data || { status: result.status };\n\t\t\t\t} else if (result.status === 401) {\n\t\t\t\t\tconst credential = localStorage.getItem(\"credential\");\n\t\t\t\t\tif (credential) {\n\t\t\t\t\t\tconst { username, password } = JSON.parse(credential);\n\t\t\t\t\t\treturn this.login(username, password).then((res) => {\n\t\t\t\t\t\t\tif (res.status === 200) {\n\t\t\t\t\t\t\t\treturn this.interceptor(url, method, data);\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t});\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\treturn Promise.resolve(\"Error\");\n\t\t\t})\n\t\t\t.catch((e) => {\n\t\t\t\tif (e.response && e.response.status === 401) {\n\t\t\t\t\treturn this.relogin(url, method, data);\n\t\t\t\t}\n\t\t\t});\n\t}\n\n\trelogin(url, method, data) {\n\t\tconst credential = localStorage.getItem(\"credential\");\n\t\tif (credential) {\n\t\t\tconst { username, password } = JSON.parse(credential);\n\t\t\treturn this.login(username, password).then((res) => {\n\t\t\t\tif (res.status === 200) {\n\t\t\t\t\treturn this.interceptor(url, method, data);\n\t\t\t\t}\n\t\t\t});\n\t\t}\n\t}\n\n\tget(url) {\n\t\treturn this.interceptor(url, \"get\");\n\t}\n\n\tpost(url, data = {}) {\n\t\treturn this.interceptor(url, \"post\", data);\n\t}\n\n\tdelete(url, data) {\n\t\treturn this.interceptor(url, \"delete\", data);\n\t}\n\n\tlogin(username, password) {\n\t\tconst data = { username, password };\n\t\treturn this.interceptor(\"login.jsp\", \"post\", data).then((res) => {\n\t\t\tif (res.status === 200) {\n\t\t\t\tlocalStorage.setItem(\n\t\t\t\t\t\"credential\",\n\t\t\t\t\tJSON.stringify({ username, password })\n\t\t\t\t);\n\t\t\t}\n\t\t\treturn { status: res.status };\n\t\t});\n\t}\n\n\tlogout() {\n\t\treturn this.interceptor(\"logout\").then(() => {\n\t\t\tlocalStorage.removeItem(\"credential\");\n\t\t});\n\t}\n}\n\nexport default service;\n","import httpService from \"./http\";\n\nconst joinURL = (model, subURL) => {\n\treturn `ws/rest/${model}/${subURL}`;\n};\n\nconst services = new httpService();\n\nclass AxelorService {\n\tconstructor(props) {\n\t\tthis.model = props.model;\n\t}\n\n\tsearch({ fields, sortBy, data, limit, offset }) {\n\t\tconst _subURL = `search`;\n\t\tconst url = joinURL(this.model, _subURL);\n\t\treturn services.post(url, { fields, sortBy, data, limit, offset });\n\t}\n\n\tfetch(id, data) {\n\t\tconst _subURL = `${id}/fetch`;\n\t\tconst url = joinURL(this.model, _subURL);\n\t\treturn services.post(url, data);\n\t}\n\n\tview(data) {\n\t\tconst url = \"/ws/meta/view\";\n\t\treturn services.post(url, data);\n\t}\n\n\tsave(data) {\n\t\tconst url = joinURL(this.model, \"\");\n\t\treturn services.post(url, { data });\n\t}\n\n\tsaveAll(data) {\n\t\tconst url = joinURL(this.model, \"\");\n\t\treturn services.post(url, { records: data });\n\t}\n\n\tremoveAll(records) {\n\t\tconst url = joinURL(this.model, \"removeAll\");\n\t\treturn services.post(url, { records });\n\t}\n\n\tlogin(username, password) {\n\t\treturn services.login(username, password);\n\t}\n\n\tlogout() {\n\t\treturn services.logout();\n\t}\n\n\taction(data) {\n\t\tconst url = \"ws/action\";\n\t\treturn services.post(url, data);\n\t}\n\n\tinfo() {\n\t\tconst url = \"ws/app/info\";\n\t\treturn services.get(url);\n\t}\n}\n\nexport default AxelorService;\n","import Utils from \"./../utils\";\nimport { TYPE } from \"./../constants\";\n\nconst getItemType = (type) => {\n\tconst types = [\"viewer\", \"editor\", \"hilite\"];\n\treturn types.includes(type) ? \"field\" : type;\n};\n\nexport function eGeneratePath(widgets, items = [], itemId, path = \"\") {\n\tif (itemId === -1) {\n\t\treturn \"\";\n\t}\n\tconst isFirstLevel = path === \"\";\n\tconst hasSameNameInParentItems = (items, itemId) => {\n\t\tconst widget = widgets[itemId];\n\t\tconst sameWidgets = items.filter(\n\t\t\t(item) =>\n\t\t\t\titem !== itemId &&\n\t\t\t\twidgets[item] &&\n\t\t\t\t[widgets[item].name, widgets[item].originalName].includes(widget.name)\n\t\t);\n\t\treturn sameWidgets.length > 0;\n\t};\n\n\tconst getSameItemIndex = (items, itemId) => {\n\t\tconst widget = widgets[itemId];\n\t\tconst sameWidgets = items.filter(\n\t\t\t(item) =>\n\t\t\t\twidgets[item] &&\n\t\t\t\t[widgets[item].name, widgets[item].originalName].includes(widget.name)\n\t\t);\n\t\treturn sameWidgets.indexOf(itemId) + 1;\n\t};\n\n\tconst getTypeWiseItemIndex = (items, type, itemId) => {\n\t\tconst sameWidgets = items.filter(\n\t\t\t(item) =>\n\t\t\t\twidgets[item] &&\n\t\t\t\tgetItemType(Utils.getWidgetType(widgets[item], \"field\")) === type\n\t\t);\n\t\treturn sameWidgets.indexOf(itemId) + 1;\n\t};\n\n\tconst isUniquePanel = () => {\n\t\tconst widget = widgets[itemId];\n\t\tif (!widget.name) {\n\t\t\treturn false;\n\t\t}\n\t\tconst widgetList = Object.values(widgets);\n\t\tconst sameWidgets = widgetList.filter((w) => w.name === widget.name);\n\t\treturn sameWidgets.length === 1;\n\t};\n\n\tconst canStopParentLink = () => {\n\t\tif (isFirstLevel) {\n\t\t\treturn false;\n\t\t}\n\t\tif (!isUniquePanel()) {\n\t\t\treturn false;\n\t\t}\n\t\treturn true;\n\t};\n\n\tlet findRoot = true;\n\tconst widgetList = Object.values(widgets);\n\tconst widgetIds = Object.keys(widgets);\n\twidgetList.forEach((widget, i) => {\n\t\tif (widget.items) {\n\t\t\tconst index = widget.items.findIndex((e) => e === itemId);\n\t\t\tif (index !== -1) {\n\t\t\t\tfindRoot = false;\n\t\t\t\tconst _widget = widgets[itemId];\n\t\t\t\tconst widgetType = getItemType(Utils.getWidgetType(_widget, \"field\"));\n\t\t\t\tif (_widget.name) {\n\t\t\t\t\tlet itemPath = `/${widgetType}[@name='${_widget.name}']`;\n\t\t\t\t\tif (hasSameNameInParentItems(widget.items, itemId)) {\n\t\t\t\t\t\tconst itemIndex = getSameItemIndex(widget.items, itemId);\n\t\t\t\t\t\tif (itemIndex > 0) {\n\t\t\t\t\t\t\titemPath = `${itemPath}[${itemIndex}]`;\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t\tpath = `${itemPath}${path}`;\n\t\t\t\t} else {\n\t\t\t\t\tconst itemIndex = getTypeWiseItemIndex(\n\t\t\t\t\t\twidget.items,\n\t\t\t\t\t\twidgetType,\n\t\t\t\t\t\titemId\n\t\t\t\t\t);\n\t\t\t\t\tpath = `/${widgetType}[${itemIndex}]${path}`;\n\t\t\t\t}\n\t\t\t\tif (!canStopParentLink()) {\n\t\t\t\t\tpath = eGeneratePath(widgets, items, widgetIds[i], path);\n\t\t\t\t} else {\n\t\t\t\t\tpath = `/${path}`;\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t});\n\tif (findRoot) {\n\t\tconst index = items.findIndex((e) => e === itemId);\n\t\tif (index !== -1) {\n\t\t\tconst _widget = widgets[itemId];\n\t\t\tif (_widget.name) {\n\t\t\t\tlet itemPath = `//${_widget.type}[@name='${_widget.name}']`;\n\t\t\t\tif ([TYPE.menubar, TYPE.toolbar, TYPE.divider].includes(_widget.type)) {\n\t\t\t\t\titemPath = `//${_widget.type}`;\n\t\t\t\t}\n\t\t\t\tif (hasSameNameInParentItems(items, itemId)) {\n\t\t\t\t\tconst itemIndex = getSameItemIndex(items, itemId);\n\t\t\t\t\tif (itemIndex > 0) {\n\t\t\t\t\t\titemPath = `${itemPath}[${itemIndex}]`;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\tpath = `${itemPath}${path}`;\n\t\t\t} else {\n\t\t\t\tconst itemIndex = getTypeWiseItemIndex(items, _widget.type, itemId);\n\t\t\t\tpath = `//${_widget.type}[${itemIndex}]${path}`;\n\t\t\t}\n\t\t}\n\t}\n\treturn path;\n}\n\n// generate xpath for all widgets\nexport function generateXpath(draft) {\n\tObject.keys(draft.widgets || {}).forEach((widgetId) => {\n\t\tconst path = eGeneratePath(draft.widgets, draft.items, widgetId);\n\t\tdraft.widgets[widgetId].xPath = path;\n\t});\n}\n","import _, { camelCase } from \"lodash\";\nimport {\n\tTYPE,\n\tFIELD_TYPE,\n\tPANEL_TYPE,\n\tIDS,\n\tMODEL_TYPE,\n\tDEFAULT_VALUE,\n\ttypeReplacer as TYPE_REPLACER,\n} from \"./constants\";\nimport { modelFields } from \"./fields\";\nimport convert from \"xml-js\";\nimport { validate } from \"./store/validation\";\nimport format from \"xml-beautifier\";\nimport { eGeneratePath } from \"./store/xpathGenerator\";\nimport { processMoves } from \"./store/computeXML\";\nimport dasherize from \"dasherize\";\n\nexport function camleCaseString(word) {\n\tlet string =\n\t\tword &&\n\t\tword.replace(/([A-Z])/g, \" $1\").replace(/^./, function (str) {\n\t\t\treturn str.toUpperCase();\n\t\t});\n\treturn string;\n}\n\nexport const caseConverter = (value, isCamelCase = true) => {\n\tif (!value) return;\n\tvalue = value.trim();\n\tlet convertedText;\n\tif (isCamelCase) {\n\t\tconvertedText = camelCase(value);\n\t} else {\n\t\tlet textToConvert = camelCase(value);\n\t\tconvertedText = textToConvert[0].toUpperCase() + textToConvert.slice(1);\n\t}\n\treturn convertedText;\n};\n\nexport const capitalizeFirst = (value) => {\n\tlet result = value.replace(/([A-Z])/g, \" $1\");\n\tlet finalResult =\n\t\tresult && result.charAt(0).toUpperCase() + result.slice(1).toLowerCase();\n\treturn finalResult;\n};\n\nexport function translate(str) {\n\tif (window && window.top && window.top._t && typeof str === \"string\") {\n\t\treturn window.top._t(str);\n\t}\n\treturn str;\n}\n\nconst getSpacer = ({ widget, id, ...other }) => ({\n\tcolSpan: widget.colSpan || 1,\n\tserverType: FIELD_TYPE.spacer,\n\ttype: TYPE.field,\n\tname: `spacer${id}`,\n\ttitle: \"Spacer\",\n\t...other,\n});\n\nexport const getGrid = (\n\tstate,\n\t{ cols = 12, items },\n\ttrackElement,\n\tisCustomField = false\n) => {\n\tconst widgets = isCustomField ? state.customFieldWidgets : state.widgets;\n\tconst grid = [];\n\tlet ind = 0;\n\tlet span = 0;\n\tlet row = [];\n\n\tlet fillRow = (start) => {\n\t\tfor (let i = start; i < cols; i++) {\n\t\t\trow.push({ index: i, item: true, colSpan: 1, indices: [i] });\n\t\t}\n\t};\n\n\titems.forEach((item) => {\n\t\tlet parentPanelIndex = Object.keys(widgets).find(\n\t\t\t(widgetIndex) =>\n\t\t\t\twidgets[widgetIndex].type === \"panel\" &&\n\t\t\t\twidgets[widgetIndex].items?.includes(item)\n\t\t);\n\n\t\tlet colSpan = Number(\n\t\t\tJSON.parse(widgets[item].widgetAttrs || \"{}\").colSpan ||\n\t\t\t\tJSON.parse(widgets[parentPanelIndex].widgetAttrs || \"{}\").itemSpan ||\n\t\t\t\twidgets[item].colSpan ||\n\t\t\t\t1\n\t\t);\n\t\tspan += colSpan;\n\t\t//next row\n\t\tif (span > cols) {\n\t\t\tfillRow(ind);\n\t\t\tind = 0;\n\t\t\tspan = colSpan;\n\t\t\tgrid.push(row);\n\t\t\trow = [];\n\t\t}\n\t\ttrackElement &&\n\t\t\ttrackElement(item, {\n\t\t\t\tcolumn: ind,\n\t\t\t\trow: grid.length,\n\t\t\t});\n\t\trow.push({\n\t\t\tindex: ind,\n\t\t\titem,\n\t\t\tcolSpan,\n\t\t\tindices: new Array(colSpan).fill(0).map((x, i) => ind + i),\n\t\t});\n\t\tind += colSpan;\n\t});\n\n\tfillRow(ind);\n\tgrid.push(row);\n\treturn grid;\n};\n\nexport const arrangeGrid = (state, { id, index, panelId }, widgetType) => {\n\tconst extendList = [];\n\tconst isCustomField = widgetType === \"customField\";\n\tconst widgets = isCustomField ? state.customFieldWidgets : state.widgets;\n\tconst panel = widgets[panelId];\n\tconst removeWidget = widgets[id] || { colSpan: 1 };\n\tconst isLastItemRemove = panel.items[panel.items.length - 1] === id;\n\tlet ids = [];\n\n\tconst isLastItemSpacer = (items) => {\n\t\tif (!items || !items.length) return false;\n\t\tconst lastItem = items[items.length - 1];\n\t\tconst lastWidget = widgets[lastItem];\n\t\treturn lastWidget.type === \"spacer\" || lastWidget.serverType === \"spacer\";\n\t};\n\n\tconst deleteItem = panel.items.splice(index, 1);\n\n\tif (isLastItemRemove) {\n\t\t// Delete all spacers at the end of panel\n\t\twhile (isLastItemSpacer(panel.items)) {\n\t\t\tids.push(panel.items.pop());\n\t\t}\n\t}\n\n\tif (\n\t\t!(\n\t\t\twidgets[deleteItem].type === \"spacer\" ||\n\t\t\twidgets[deleteItem].serverType === \"spacer\"\n\t\t) &&\n\t\t!isLastItemRemove\n\t) {\n\t\tlet newId = _.uniqueId();\n\t\tlet otherProps = {};\n\t\tif (state.modelType === MODEL_TYPE.CUSTOM) {\n\t\t\totherProps = {\n\t\t\t\tmodel: removeWidget.model,\n\t\t\t\tmodelField: removeWidget.modelField,\n\t\t\t};\n\t\t}\n\t\t//creating spacer for the removed widget\n\t\twidgets[newId] = getSpacer({\n\t\t\twidget: {},\n\t\t\tid: newId,\n\t\t\tcolSpan: removeWidget.colSpan,\n\t\t\t//if removed widget has colSpan in its widgetAttrs, copy it to the spacer\n\t\t\t...(JSON.parse(removeWidget.widgetAttrs || \"{}\").colSpan\n\t\t\t\t? {\n\t\t\t\t\t\twidgetAttrs: JSON.stringify({\n\t\t\t\t\t\t\tcolSpan: JSON.parse(removeWidget.widgetAttrs).colSpan,\n\t\t\t\t\t\t}),\n\t\t\t\t  }\n\t\t\t\t: {}),\n\t\t\t...otherProps,\n\t\t});\n\t\tconst targetWidget = widgets[panel.items[index]];\n\t\tisExtensionView(state) &&\n\t\t\textendList.push({\n\t\t\t\tname: \"insert\",\n\t\t\t\tposition: \"before\",\n\t\t\t\telements: [widgets[newId]],\n\t\t\t\ttarget: targetWidget.xPath,\n\t\t\t});\n\t\tpanel.items.splice(index, 0, newId);\n\t}\n\treturn { ids: [...ids, id], extendList };\n};\n\n// generates widgets(spacers)\nconst collectWidgets = ({ grid, items, widgetIndex, hoverCellRowIndex }) => {\n\tlet beforeWidgets = [];\n\tlet afterWidgets = [];\n\tlet flag = true;\n\tlet itemIndex = 0;\n\tif (grid.length) {\n\t\tgrid.forEach((cell, cellIndex) => {\n\t\t\tcell.colSpan = Number(cell.colSpan || 1);\n\t\t\t// once any valid id cell find, take its index as default value\n\t\t\tif (cell.id && flag && cellIndex < widgetIndex) {\n\t\t\t\titemIndex = items.indexOf(cell.id) + 1;\n\t\t\t}\n\t\t\t// consider hover row cells\n\t\t\tif (!cell.separator && cell.rowIndex <= hoverCellRowIndex) {\n\t\t\t\t// before hover widget\n\t\t\t\tif (cellIndex < widgetIndex) {\n\t\t\t\t\t// reset before row if you find valid cell with id\n\t\t\t\t\tif (cell.id) {\n\t\t\t\t\t\tbeforeWidgets = [];\n\t\t\t\t\t\titemIndex = items.indexOf(cell.id) + 1;\n\t\t\t\t\t} else {\n\t\t\t\t\t\tbeforeWidgets.push({\n\t\t\t\t\t\t\t...cell,\n\t\t\t\t\t\t\tcolSpan: cell.colSpan || 6,\n\t\t\t\t\t\t\tisSpacer: true,\n\t\t\t\t\t\t});\n\t\t\t\t\t}\n\t\t\t\t\t// after hover widget\n\t\t\t\t} else if (flag && cellIndex > widgetIndex) {\n\t\t\t\t\tif (cell.id) {\n\t\t\t\t\t\titemIndex = items.indexOf(cell.id);\n\t\t\t\t\t\tflag = false;\n\t\t\t\t\t} else if (items.length) {\n\t\t\t\t\t\tafterWidgets.push({ ...cell, isSpacer: true });\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t});\n\t\tif (items.length) {\n\t\t\t// find last item index\n\t\t\tconst lastItem = items[items.length - 1];\n\t\t\tconst lastItemIndex = grid.findIndex((x) => `${x.id}` === `${lastItem}`);\n\t\t\t// if drop at end of list then fill only one widget so empty after widgets\n\t\t\tif (widgetIndex > lastItemIndex && lastItemIndex !== -1) {\n\t\t\t\tafterWidgets = [];\n\t\t\t\titemIndex = items.length + 1;\n\t\t\t}\n\t\t}\n\t\t// clear beforeWidgets that occupy the entire row (when widget is dropped into the first separator of a row)\n\t\tif (beforeWidgets.length) {\n\t\t\tconst _beforeWidgets = [...beforeWidgets];\n\t\t\t_beforeWidgets.forEach((widget, index, widgets) => {\n\t\t\t\tif (\n\t\t\t\t\twidgets.findIndex((el) => widget.rowIndex === el.rowIndex) === index\n\t\t\t\t) {\n\t\t\t\t\tconst totalColSpan = widgets.reduce(\n\t\t\t\t\t\t(acc, el) =>\n\t\t\t\t\t\t\tel.rowIndex === widget.rowIndex ? acc + el.colSpan : acc,\n\t\t\t\t\t\t0\n\t\t\t\t\t);\n\t\t\t\t\tif (totalColSpan >= 12) {\n\t\t\t\t\t\tbeforeWidgets = _beforeWidgets.filter(\n\t\t\t\t\t\t\t(el) => el.rowIndex !== widget.rowIndex\n\t\t\t\t\t\t);\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t});\n\t\t}\n\t}\n\treturn { afterWidgets, beforeWidgets, itemIndex };\n};\n\nexport const setErrorList = (attrs, state, id, isCustomField) => {\n\tconst errors = validate(attrs, state.modelType, isCustomField);\n\tif (Object.keys(errors).length) {\n\t\tstate.errorList[id] = errors;\n\t} else if (state.errorList[id]) {\n\t\tdelete state.errorList[id];\n\t}\n};\n\nexport function isExtensionView(state) {\n\treturn state.exView && !isCreatedFromStudio(state.exView);\n}\n\n// reorder widgets based on dummy widgets\nexport const reorderGrid =\n\t({ hoverWidget, dragWidgetProps }) =>\n\t(state) => {\n\t\t/* TODO \n\t\t\tAttributes for the dragged widget is being modified from onHover, onDrag, beginDrag, \n\t\t\tand reorderGrid functions, Try to move all of them here,\n\t\t\tLook for setHoverAttr, which could be eliminated.\n\t\t*/\n\n\t\tconst extendList = [];\n\t\tconst isCustomField = hoverWidget._type === \"customField\";\n\t\tconst dragWidgetItems =\n\t\t\thoverWidget._type === \"customField\" && !dragWidgetProps.panelId\n\t\t\t\t? \"customFieldItems\"\n\t\t\t\t: \"items\";\n\t\tconst _items =\n\t\t\thoverWidget._type === \"customField\" && !hoverWidget.panelId\n\t\t\t\t? \"customFieldItems\"\n\t\t\t\t: \"items\";\n\t\tconst _widgets =\n\t\t\thoverWidget._type === \"customField\"\n\t\t\t\t? state.customFieldWidgets\n\t\t\t\t: state.widgets;\n\t\tconst destinationItems = (\n\t\t\t(hoverWidget.panelId ? _widgets[hoverWidget.panelId] : state)[_items] ||\n\t\t\t[]\n\t\t).slice();\n\n\t\tconst {\n\t\t\tcolSpan,\n\t\t\tgrid = [],\n\t\t\trow: hoverCellRowIndex,\n\t\t\trelatedColSpan,\n\t\t} = hoverWidget.meta;\n\n\t\t/*  \n\t\t\tIf layout changes while the element is being dragged, then dragWidgetProps.index will be outdated,\n\t\t\trely on dragWidgetIndex for grid layouts\n\t\t\t*/\n\t\tconst dragWidgetIndex =\n\t\t\tgrid.find((item) => item.id === dragWidgetProps.id)?.cellIndice ??\n\t\t\tdragWidgetProps.index;\n\n\t\t// remove isNew attribute\n\t\tif (dragWidgetProps.attrs && dragWidgetProps.attrs.isNew !== undefined) {\n\t\t\tdelete dragWidgetProps.attrs.isNew;\n\t\t}\n\n\t\tconst removedWidgetAttrsColSpan = //saving colSpan of the existing widget since it gets modified later\n\t\t\tdragWidgetProps.id && _widgets[dragWidgetProps.id] // check if  dragwidget is an existing one\n\t\t\t\t? JSON.parse(dragWidgetProps.attrs?.widgetAttrs || \"{}\").colSpan\n\t\t\t\t: undefined;\n\n\t\tconst parentPanel = _widgets[hoverWidget.panelId];\n\n\t\t//  when panel is dragged\n\t\tif (dragWidgetProps.attrs.type === TYPE.panel) {\n\t\t\tconst dragWidgetAttrs = JSON.parse(\n\t\t\t\tdragWidgetProps.attrs?.widgetAttrs || \"{}\"\n\t\t\t);\n\t\t\t// if it is dropped into tabs-panel\n\t\t\tif (parentPanel && parentPanel.type === TYPE.tabs) {\n\t\t\t\tdragWidgetProps.attrs.title =\n\t\t\t\t\tdragWidgetProps.attrs.title || translate(\"Tab\");\n\t\t\t\tdragWidgetProps.attrs.widgetAttrs = JSON.stringify({\n\t\t\t\t\t...dragWidgetAttrs,\n\t\t\t\t\ttab: \"true\",\n\t\t\t\t});\n\t\t\t} else if (dragWidgetAttrs.tab === \"true\") {\n\t\t\t\t// if tab is dropped outside the tabs-panel\n\t\t\t\tdragWidgetProps.attrs.widgetAttrs = JSON.stringify({\n\t\t\t\t\t...JSON.parse(dragWidgetProps.attrs?.widgetAttrs || \"{}\"),\n\t\t\t\t\ttab: \"false\",\n\t\t\t\t});\n\t\t\t}\n\t\t}\n\n\t\tif (\n\t\t\thoverWidget.attrs?.serverType === \"spacer\" ||\n\t\t\thoverWidget.attrs?.type === \"spacer\"\n\t\t) {\n\t\t\t// TODO: Move the everything inside the next if logic to a similar if logic further down (line:509)\n\t\t\t// TODO: replaced spacer is not removed from widgets, to be done after moving\n\t\t\t// if widget is dropped on the spacer\n\t\t\tconst spacerWidgetAttrsColSpan = JSON.parse(\n\t\t\t\thoverWidget.attrs?.widgetAttrs || \"{}\"\n\t\t\t).colSpan;\n\t\t\t/* copy spacer's widgetAttrs colSpan to the dragged widget to\n\t\t\t make dragged widget fit into the spacer */\n\t\t\tdragWidgetProps.attrs.widgetAttrs = JSON.stringify({\n\t\t\t\t...JSON.parse(dragWidgetProps.attrs?.widgetAttrs || \"{}\"),\n\t\t\t\tcolSpan: spacerWidgetAttrsColSpan,\n\t\t\t});\n\t\t\t// add spacer to the delete list if spacer is already saved\n\t\t\tif (hoverWidget.attrs?.id && typeof hoverWidget.attrs?.id !== \"symbol\") {\n\t\t\t\tstate.removedCustomFields.push({\n\t\t\t\t\tid: hoverWidget.attrs.id,\n\t\t\t\t\tversion: hoverWidget.attrs.version,\n\t\t\t\t});\n\t\t\t}\n\n\t\t\tconst parentPanelItemSpan = JSON.parse(\n\t\t\t\t_widgets[hoverWidget.panelId]?.widgetAttrs || \"{}\"\n\t\t\t).itemSpan;\n\t\t\t/* reset colSpan to default(6) to make it fit into spacer when both\n\t\t\t ItemSpan & widgetAttr colspan doesn't exist */\n\t\t\tif (!parentPanelItemSpan && !spacerWidgetAttrsColSpan) {\n\t\t\t\tdragWidgetProps.attrs.colSpan = 6;\n\t\t\t}\n\t\t\t//delete the spacer from the widgets\n\t\t\tdelete _widgets[hoverWidget.id];\n\t\t}\n\t\t// clone colSpan of hover widget\n\t\tconst hoverType = parentPanel?.serverType;\n\n\t\tif (dragWidgetProps.attrs && !dragWidgetProps.attrs.colSpan) {\n\t\t\tif (\n\t\t\t\tcolSpan &&\n\t\t\t\tdragWidgetProps.attrs &&\n\t\t\t\t![TYPE.menu, TYPE.menuItem, TYPE.divider].includes(\n\t\t\t\t\tdragWidgetProps.attrs.type\n\t\t\t\t) &&\n\t\t\t\t![TYPE.toolbar, TYPE.menubar].includes(hoverType)\n\t\t\t) {\n\t\t\t\tconst existingColspan = dragWidgetProps.attrs.colSpan;\n\t\t\t\t// set itemSpan if exists\n\t\t\t\tif (hoverType === TYPE.panel && Number(parentPanel.itemSpan)) {\n\t\t\t\t\tdragWidgetProps.attrs.colSpan = Number(parentPanel.itemSpan);\n\t\t\t\t} else {\n\t\t\t\t\tdragWidgetProps.attrs.colSpan = relatedColSpan || colSpan;\n\t\t\t\t}\n\t\t\t\tif (isCustomField) {\n\t\t\t\t\t// set colSpan in widgetAttrs for custom field\n\t\t\t\t\tconst widgetAttrs = { colSpan: relatedColSpan || colSpan };\n\t\t\t\t\tdragWidgetProps.attrs.widgetAttrs = JSON.stringify(widgetAttrs);\n\t\t\t\t}\n\t\t\t\tif (`${dragWidgetProps.attrs.colSpan}` !== `${existingColspan}`) {\n\t\t\t\t\tif (state.modelType === MODEL_TYPE.CUSTOM) {\n\t\t\t\t\t\t// change widgetAttrs for colSpan\n\t\t\t\t\t\tconst widgetAttrs = JSON.parse(\n\t\t\t\t\t\t\tdragWidgetProps.attrs.widgetAttrs || \"{}\"\n\t\t\t\t\t\t);\n\t\t\t\t\t\twidgetAttrs.colSpan = relatedColSpan || colSpan;\n\t\t\t\t\t\tdragWidgetProps.attrs.widgetAttrs = JSON.stringify(widgetAttrs);\n\t\t\t\t\t}\n\t\t\t\t\tisExtensionView(state) &&\n\t\t\t\t\t\textendList.push({\n\t\t\t\t\t\t\tname: \"attribute\",\n\t\t\t\t\t\t\ttarget: dragWidgetProps.attrs.xPath,\n\t\t\t\t\t\t\tattributes: {\n\t\t\t\t\t\t\t\tname: \"colSpan\",\n\t\t\t\t\t\t\t\tvalue: dragWidgetProps.attrs.colSpan,\n\t\t\t\t\t\t\t},\n\t\t\t\t\t\t});\n\t\t\t\t}\n\t\t\t\tif (state.modelType === MODEL_TYPE.CUSTOM) {\n\t\t\t\t\tconst widgetAttrs = JSON.parse(\n\t\t\t\t\t\tdragWidgetProps.attrs.widgetAttrs || \"{}\"\n\t\t\t\t\t);\n\t\t\t\t\twidgetAttrs.colSpan = 6;\n\t\t\t\t\tdragWidgetProps.attrs.widgetAttrs = JSON.stringify(widgetAttrs);\n\t\t\t\t}\n\t\t\t} else if (\n\t\t\t\tdragWidgetProps.attrs &&\n\t\t\t\tstate.modelType === MODEL_TYPE.CUSTOM\n\t\t\t) {\n\t\t\t\tconst widgetAttrs = JSON.parse(\n\t\t\t\t\tdragWidgetProps.attrs.widgetAttrs || \"{}\"\n\t\t\t\t);\n\t\t\t\twidgetAttrs.colSpan = relatedColSpan || colSpan;\n\t\t\t\tdragWidgetProps.attrs.colSpan = relatedColSpan || colSpan;\n\t\t\t\tdragWidgetProps.attrs.widgetAttrs = JSON.stringify(widgetAttrs);\n\t\t\t}\n\t\t}\n\t\tconst newIds = [];\n\t\tlet widgetIndex = Number(hoverWidget.index);\n\t\tlet {\n\t\t\tbeforeWidgets, //holds spacers to be added before the dropped widget\n\t\t\tafterWidgets, // holds spacers to be added after the dropped widget\n\t\t\titemIndex = 0,\n\t\t} = collectWidgets({\n\t\t\tgrid,\n\t\t\titems: destinationItems,\n\t\t\twidgetIndex,\n\t\t\thoverCellRowIndex,\n\t\t});\n\n\t\tlet isRemovedFromSameList = false;\n\t\t// if drag widget is existing one then remove it from its panel\n\t\tif (dragWidgetProps.id && _widgets[dragWidgetProps.id]) {\n\t\t\tconst sourcePanel = dragWidgetProps.panelId\n\t\t\t\t? _widgets[dragWidgetProps.panelId]\n\t\t\t\t: state;\n\t\t\tconst sourceItems = sourcePanel[dragWidgetItems];\n\t\t\tconst sourceItemIndex = sourceItems.indexOf(dragWidgetProps.id);\n\n\t\t\tif ([PANEL_TYPE.grid].includes(sourcePanel.layout)) {\n\t\t\t\tlet newId = _.uniqueId();\n\t\t\t\tconst isLastItem =\n\t\t\t\t\tsourceItems[sourceItems.length - 1] === dragWidgetProps.id;\n\t\t\t\tlet isLastItemInSamePanel = false; // true if last widget is dropped after itself in the same panel\n\t\t\t\tif (isLastItem && dragWidgetProps.panelId === hoverWidget.panelId) {\n\t\t\t\t\tif (dragWidgetIndex < hoverWidget.index) {\n\t\t\t\t\t\tisLastItemInSamePanel = true;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\tconst hoverParent = dragWidgetProps.panelId\n\t\t\t\t\t? _widgets[dragWidgetProps.panelId]\n\t\t\t\t\t: null;\n\t\t\t\tlet isPanelTab = false;\n\t\t\t\tif (\n\t\t\t\t\thoverParent &&\n\t\t\t\t\t[TYPE.tabs, TYPE.panelStack].includes(hoverParent.type)\n\t\t\t\t) {\n\t\t\t\t\tisPanelTab = true;\n\t\t\t\t}\n\t\t\t\tif (\n\t\t\t\t\t(isLastItem && !isLastItemInSamePanel) ||\n\t\t\t\t\tisPanelTab ||\n\t\t\t\t\t[TYPE.menubar, TYPE.toolbar].includes(hoverType)\n\t\t\t\t) {\n\t\t\t\t\tsourceItems.splice(sourceItemIndex, 1);\n\n\t\t\t\t\tconst isLastItemRemovable = (items) => {\n\t\t\t\t\t\tif (!items || !items.length) return false;\n\t\t\t\t\t\tconst lastItem = items[items.length - 1];\n\t\t\t\t\t\tif (lastItem === hoverWidget.id) return false; //Do not remove hover spacer\n\n\t\t\t\t\t\tconst lastItemMetaGrid = hoverWidget?.meta?.grid?.find(\n\t\t\t\t\t\t\t(cell) => cell.id === lastItem\n\t\t\t\t\t\t);\n\n\t\t\t\t\t\tif (lastItemMetaGrid) {\n\t\t\t\t\t\t\tif (lastItemMetaGrid.rowIndex < hoverWidget.meta.row) {\n\t\t\t\t\t\t\t\treturn false; //Do not remove widgets above hoverWidget\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\tif (\n\t\t\t\t\t\t\t\tlastItemMetaGrid.rowIndex === hoverWidget.meta.row &&\n\t\t\t\t\t\t\t\tlastItemMetaGrid.columnIndex < hoverWidget.meta.colIndex\n\t\t\t\t\t\t\t) {\n\t\t\t\t\t\t\t\treturn false; // Do not remove widgets before hoverWidget in the same row\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\tconst lastWidget = _widgets[lastItem];\n\t\t\t\t\t\treturn (\n\t\t\t\t\t\t\tlastWidget.type === \"spacer\" || lastWidget.serverType === \"spacer\"\n\t\t\t\t\t\t);\n\t\t\t\t\t};\n\n\t\t\t\t\t//remove all spacers at the end of panel\n\t\t\t\t\twhile (isLastItemRemovable(sourcePanel.items)) {\n\t\t\t\t\t\tconst id = sourcePanel.items.pop();\n\t\t\t\t\t\tif (_widgets[id].id && typeof _widgets[id].id !== \"symbol\") {\n\t\t\t\t\t\t\tstate.removedCustomFields.push({\n\t\t\t\t\t\t\t\tid: _widgets[id].id,\n\t\t\t\t\t\t\t\tversion: _widgets[id].version,\n\t\t\t\t\t\t\t});\n\t\t\t\t\t\t}\n\t\t\t\t\t\tdelete _widgets[id];\n\t\t\t\t\t}\n\t\t\t\t} else {\n\t\t\t\t\tlet attrs = {\n\t\t\t\t\t\tcolSpan: _widgets[dragWidgetProps.id].colSpan || 1,\n\t\t\t\t\t\tserverType: FIELD_TYPE.spacer,\n\t\t\t\t\t\ttype: TYPE.field, // check later if this can be changed to spacer\n\t\t\t\t\t\tname: `spacer${newId}`,\n\t\t\t\t\t\ttitle: \"Spacer\",\n\t\t\t\t\t};\n\t\t\t\t\tif (state.modelType === MODEL_TYPE.CUSTOM) {\n\t\t\t\t\t\tattrs[\"model\"] = dragWidgetProps.attrs.model;\n\t\t\t\t\t\tattrs[\"modelField\"] = dragWidgetProps.attrs.modelField;\n\t\t\t\t\t}\n\t\t\t\t\tif (removedWidgetAttrsColSpan) {\n\t\t\t\t\t\tattrs[\"widgetAttrs\"] = JSON.stringify({\n\t\t\t\t\t\t\t//copy the removed widget's colspan to the spacer\n\t\t\t\t\t\t\tcolSpan: removedWidgetAttrsColSpan,\n\t\t\t\t\t\t});\n\t\t\t\t\t}\n\t\t\t\t\t_widgets[newId] = Object.assign({}, attrs);\n\t\t\t\t\tisExtensionView(state) &&\n\t\t\t\t\t\textendList.push({\n\t\t\t\t\t\t\tname: \"insert\",\n\t\t\t\t\t\t\tposition: \"before\",\n\t\t\t\t\t\t\ttarget: dragWidgetProps.attrs.xPath,\n\t\t\t\t\t\t\telements: [attrs],\n\t\t\t\t\t\t\tid: newId,\n\t\t\t\t\t\t});\n\t\t\t\t\tsourceItems.splice(sourceItemIndex, 1, newId);\n\t\t\t\t}\n\t\t\t} else {\n\t\t\t\t// if same panel, drag widget is before hover widget\n\t\t\t\tif (dragWidgetProps.panelId === hoverWidget.panelId) {\n\t\t\t\t\tif (dragWidgetIndex < hoverWidget.index) {\n\t\t\t\t\t\tisRemovedFromSameList = true;\n\t\t\t\t\t\titemIndex--;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\tsourceItems.splice(sourceItemIndex, 1);\n\t\t\t}\n\t\t}\n\n\t\t//TODO: Move logic inside a similar if statement from above inside this\n\t\t// replace spacer with the dragged widget\n\t\tif (\n\t\t\thoverWidget.attrs.type === \"spacer\" ||\n\t\t\thoverWidget.attrs.serverType === \"spacer\"\n\t\t) {\n\t\t\tlet isNew =\n\t\t\t\t!dragWidgetProps.id ||\n\t\t\t\tObject.values(IDS.createWidgets).indexOf(dragWidgetProps.id) > -1;\n\t\t\tlet newId = isNew ? _.uniqueId() : dragWidgetProps.id;\n\t\t\tlet attrs = Object.assign({}, dragWidgetProps.attrs || {});\n\t\t\tif (isNew && attrs.isCoreField !== false && attrs.name) {\n\t\t\t\tattrs.name = `${attrs.name}${newId}`;\n\t\t\t}\n\t\t\tsetErrorList(attrs, state, newId, isCustomField);\n\t\t\tif (isNew) {\n\t\t\t\t_widgets[newId] = Object.assign({}, attrs);\n\t\t\t\tisExtensionView(state) &&\n\t\t\t\t\textendList.push({\n\t\t\t\t\t\tname: \"insert\",\n\t\t\t\t\t\tposition: \"before\",\n\t\t\t\t\t\ttarget: hoverWidget.attrs.xPath,\n\t\t\t\t\t\telements: [attrs],\n\t\t\t\t\t\tid: newId,\n\t\t\t\t\t});\n\t\t\t} else {\n\t\t\t\tisExtensionView(state) &&\n\t\t\t\t\textendList.push({\n\t\t\t\t\t\tname: \"move\",\n\t\t\t\t\t\tsource: dragWidgetProps.attrs.xPath,\n\t\t\t\t\t\tposition: \"before\",\n\t\t\t\t\t\ttarget: hoverWidget.attrs.xPath,\n\t\t\t\t\t});\n\t\t\t\t_widgets[dragWidgetProps.id] = Object.assign(\n\t\t\t\t\t{ ..._widgets[dragWidgetProps.id] },\n\t\t\t\t\tattrs\n\t\t\t\t);\n\t\t\t}\n\t\t\t(hoverWidget.panelId ? _widgets[hoverWidget.panelId] : state)[\n\t\t\t\t_items\n\t\t\t].splice(\n\t\t\t\tdestinationItems.indexOf(hoverWidget.id) -\n\t\t\t\t\t(isRemovedFromSameList ? 1 : 0),\n\t\t\t\t1,\n\t\t\t\tnewId\n\t\t\t);\n\t\t\tisExtensionView(state) &&\n\t\t\t\textendList.push({ name: \"replace\", target: hoverWidget.attrs.xPath });\n\t\t\treturn { extendList, newId };\n\t\t}\n\n\t\t// cell placement is horizontal special case for Tabs widget\n\t\tif (hoverWidget.meta && hoverWidget.meta.horizontal) {\n\t\t\tlet index = Number(hoverWidget.index);\n\t\t\t// if tab is moved forward\n\t\t\tif (\n\t\t\t\tdragWidgetProps.panelId === hoverWidget.panelId &&\n\t\t\t\tdragWidgetIndex < hoverWidget.index\n\t\t\t) {\n\t\t\t\tindex = index - 2;\n\t\t\t}\n\t\t\t// calculate item position\n\t\t\titemIndex = Math.ceil(Number(index / 2));\n\t\t}\n\n\t\t// remove all dummy cells for flow layout\n\t\tconst destinationPanel = hoverWidget.panelId\n\t\t\t? _widgets[hoverWidget.panelId]\n\t\t\t: state;\n\t\tif ((destinationPanel.layout || PANEL_TYPE.flow) === PANEL_TYPE.flow) {\n\t\t\tbeforeWidgets = [];\n\t\t\tafterWidgets = [];\n\t\t}\n\t\t// fill all widgets in panel\n\t\tconst newWidgetIds = [];\n\t\tconst hoverWidgetParentItems =\n\t\t\t(hoverWidget.panelId ? _widgets[hoverWidget.panelId] : state)[_items] ||\n\t\t\t[];\n\t\tlet hoverWidgetId = hoverWidgetParentItems[itemIndex];\n\t\tlet hoverPath;\n\t\tlet actualHoverWidget = _widgets[hoverWidgetParentItems[itemIndex]];\n\t\tlet position = \"before\";\n\t\tif (!actualHoverWidget && hoverWidgetParentItems.length <= itemIndex) {\n\t\t\thoverWidgetId = hoverWidgetParentItems[hoverWidgetParentItems.length - 1];\n\t\t\tactualHoverWidget =\n\t\t\t\t_widgets[hoverWidgetParentItems[hoverWidgetParentItems.length - 1]];\n\t\t\tposition = \"after\";\n\t\t}\n\t\t// check for sidebar widget\n\t\tif (actualHoverWidget && `${actualHoverWidget.sidebar}` === \"true\") {\n\t\t\tdragWidgetProps.attrs.sidebar = \"true\";\n\t\t\tisExtensionView(state) &&\n\t\t\t\textendList.push({\n\t\t\t\t\tname: \"attribute\",\n\t\t\t\t\ttarget: dragWidgetProps.attrs.xPath,\n\t\t\t\t\tattributes: { name: \"sidebar\", value: \"true\" },\n\t\t\t\t});\n\t\t}\n\t\tif (actualHoverWidget) {\n\t\t\thoverPath =\n\t\t\t\tactualHoverWidget.xPath ||\n\t\t\t\teGeneratePath(_widgets, state[_items], hoverWidgetId);\n\t\t}\n\t\tconst shouldInsertInParent = (dragWidget, hoverWidget) => {\n\t\t\tconst hoverPathInfo = exploreTarget(hoverWidget.xPath);\n\t\t\tconst list = state.extensionMoves.filter((m) => {\n\t\t\t\tif (m.target) {\n\t\t\t\t\tconst targetInfo = exploreTarget(m.target);\n\t\t\t\t\tif (m.name === \"replace\") {\n\t\t\t\t\t\tif (hoverPathInfo.self) {\n\t\t\t\t\t\t\tif (targetInfo.parent.indexOf(hoverPathInfo.self) >= 0) {\n\t\t\t\t\t\t\t\treturn true;\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\treturn false;\n\t\t\t\t\t\t} else if (targetInfo.parent.indexOf(hoverPathInfo.parent) >= 0) {\n\t\t\t\t\t\t\treturn true;\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\treturn false;\n\t\t\t});\n\t\t\tif (\n\t\t\t\t[TYPE.menu, FIELD_TYPE.button, TYPE.menuItem].includes(\n\t\t\t\t\tdragWidget.attrs.type\n\t\t\t\t) &&\n\t\t\t\t[TYPE.menubar, TYPE.toolbar, TYPE.menu].includes(hoverWidget.type)\n\t\t\t) {\n\t\t\t\t// hoverwidget should not have any child remove\n\t\t\t\tif (hoverWidget.items.length === 0 && !list.length) {\n\t\t\t\t\treturn true;\n\t\t\t\t}\n\t\t\t}\n\t\t\treturn false;\n\t\t};\n\t\tconst list = [];\n\t\tbeforeWidgets\n\t\t\t.concat([dragWidgetProps])\n\t\t\t.concat(afterWidgets)\n\t\t\t.forEach((widget) => {\n\t\t\t\tlet attrs = Object.assign({}, widget.attrs || {});\n\t\t\t\tlet newId = widget.id;\n\t\t\t\tconst isCreateWidget = typeof newId === \"symbol\";\n\t\t\t\tconst isNew = !newId || isCreateWidget;\n\t\t\t\tlet shouldAdd = true;\n\t\t\t\t// new drag widgets\n\t\t\t\tif (\n\t\t\t\t\t[TYPE.menubar, TYPE.toolbar].includes(hoverType) &&\n\t\t\t\t\twidget.isSpacer\n\t\t\t\t) {\n\t\t\t\t\tshouldAdd = false;\n\t\t\t\t}\n\t\t\t\tif (shouldAdd) {\n\t\t\t\t\tif (isNew) {\n\t\t\t\t\t\tnewId = _.uniqueId();\n\t\t\t\t\t\tif (attrs.isCoreField !== false) {\n\t\t\t\t\t\t\tif (attrs && Object.keys(attrs).length) {\n\t\t\t\t\t\t\t\tsetErrorList(attrs, state, newId, isCustomField);\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\tif (attrs.name) {\n\t\t\t\t\t\t\t\tattrs.name = `${attrs.name}${newId}`;\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t\t// set new drag widget as edit widget\n\t\t\t\t\t\tif (isCreateWidget) {\n\t\t\t\t\t\t\tstate.editWidget = newId;\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t\tif (widget.isSpacer)\n\t\t\t\t\t\tif (widget.isSpacer) {\n\t\t\t\t\t\t\t// if its spacer widgets\n\t\t\t\t\t\t\tconst _attrs = dragWidgetProps.attrs || {};\n\t\t\t\t\t\t\tconst parentPanelItemSpan = JSON.parse(\n\t\t\t\t\t\t\t\t_widgets[hoverWidget.panelId]?.widgetAttrs || \"{}\"\n\t\t\t\t\t\t\t).itemSpan;\n\n\t\t\t\t\t\t\tattrs = getSpacer({\n\t\t\t\t\t\t\t\twidget,\n\t\t\t\t\t\t\t\tid: newId,\n\t\t\t\t\t\t\t\tmodel: _attrs.model,\n\t\t\t\t\t\t\t\tmodelField: _attrs.modelField,\n\t\t\t\t\t\t\t\t...(Number(parentPanelItemSpan || 6) !==\n\t\t\t\t\t\t\t\tNumber(widget.colSpan || 6)\n\t\t\t\t\t\t\t\t\t? {\n\t\t\t\t\t\t\t\t\t\t\twidgetAttrs: JSON.stringify({\n\t\t\t\t\t\t\t\t\t\t\t\tcolSpan: widget.colSpan || 6,\n\t\t\t\t\t\t\t\t\t\t\t}),\n\t\t\t\t\t\t\t\t\t  }\n\t\t\t\t\t\t\t\t\t: {}),\n\t\t\t\t\t\t\t});\n\t\t\t\t\t\t}\n\t\t\t\t\t// add new widget\n\t\t\t\t\tif (isNew) {\n\t\t\t\t\t\tif (isExtensionView(state) && !isCustomField) {\n\t\t\t\t\t\t\tif (actualHoverWidget) {\n\t\t\t\t\t\t\t\tisExtensionView(state) &&\n\t\t\t\t\t\t\t\t\tlist[position === \"after\" ? \"unshift\" : \"push\"]({\n\t\t\t\t\t\t\t\t\t\tname: \"insert\",\n\t\t\t\t\t\t\t\t\t\tposition,\n\t\t\t\t\t\t\t\t\t\ttarget: hoverPath,\n\t\t\t\t\t\t\t\t\t\telements: [attrs],\n\t\t\t\t\t\t\t\t\t\tid: newId,\n\t\t\t\t\t\t\t\t\t});\n\t\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\t\tconst widget = _widgets[hoverWidget.panelId];\n\t\t\t\t\t\t\t\tif (shouldInsertInParent(dragWidgetProps, widget)) {\n\t\t\t\t\t\t\t\t\tprocessMoves(state, attrs, newId, hoverWidget.panelId);\n\t\t\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\t\t\tlist[position === \"after\" ? \"unshift\" : \"push\"]({\n\t\t\t\t\t\t\t\t\t\tname: \"insert\",\n\t\t\t\t\t\t\t\t\t\tposition: \"inside\",\n\t\t\t\t\t\t\t\t\t\ttarget: widget.xPath,\n\t\t\t\t\t\t\t\t\t\telements: [attrs],\n\t\t\t\t\t\t\t\t\t\tid: newId,\n\t\t\t\t\t\t\t\t\t});\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\tnewWidgetIds.push(newId);\n\t\t\t\t\t\t_widgets[newId] = Object.assign({}, attrs);\n\t\t\t\t\t} else {\n\t\t\t\t\t\tif (isExtensionView(state) && !isCustomField) {\n\t\t\t\t\t\t\tif (actualHoverWidget) {\n\t\t\t\t\t\t\t\tisExtensionView(state) &&\n\t\t\t\t\t\t\t\t\tlist[position === \"after\" ? \"unshift\" : \"push\"]({\n\t\t\t\t\t\t\t\t\t\tname: \"move\",\n\t\t\t\t\t\t\t\t\t\tsource: dragWidgetProps.attrs.xPath,\n\t\t\t\t\t\t\t\t\t\tposition,\n\t\t\t\t\t\t\t\t\t\ttarget: hoverPath,\n\t\t\t\t\t\t\t\t\t});\n\t\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\t\tconst widget = _widgets[hoverWidget.panelId];\n\t\t\t\t\t\t\t\tif (shouldInsertInParent(dragWidgetProps, widget)) {\n\t\t\t\t\t\t\t\t\tprocessMoves(\n\t\t\t\t\t\t\t\t\t\tstate,\n\t\t\t\t\t\t\t\t\t\tdragWidgetProps.attrs,\n\t\t\t\t\t\t\t\t\t\tdragWidgetProps.id,\n\t\t\t\t\t\t\t\t\t\thoverWidget.panelId\n\t\t\t\t\t\t\t\t\t);\n\t\t\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\t\t\tisExtensionView(state) &&\n\t\t\t\t\t\t\t\t\t\tlist[position === \"after\" ? \"unshift\" : \"push\"]({\n\t\t\t\t\t\t\t\t\t\t\tname: \"move\",\n\t\t\t\t\t\t\t\t\t\t\tsource: dragWidgetProps.attrs.xPath,\n\t\t\t\t\t\t\t\t\t\t\tposition: \"inside\",\n\t\t\t\t\t\t\t\t\t\t\ttarget: widget.xPath,\n\t\t\t\t\t\t\t\t\t\t});\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\t_widgets[dragWidgetProps.id] = Object.assign(\n\t\t\t\t\t\t\t{ ..._widgets[dragWidgetProps.id] },\n\t\t\t\t\t\t\tattrs\n\t\t\t\t\t\t);\n\t\t\t\t\t}\n\t\t\t\t\tnewIds.push(newId);\n\t\t\t\t}\n\t\t\t});\n\t\textendList.push(...list);\n\t\t// put all new widgets into panel\n\t\t(\n\t\t\t(hoverWidget.panelId ? _widgets[hoverWidget.panelId] : state)[_items] ||\n\t\t\t[]\n\t\t).splice(itemIndex, 0, ...newIds);\n\t\treturn { extendList, newId: newIds && newIds[newIds.length - 1] };\n\t};\n\nconst getWidgetType = (widgetAttrs, defaultType) => {\n\tconst uiFields = [\"spacer\", \"label\", \"button\"];\n\tlet _type =\n\t\twidgetAttrs.isModelField ||\n\t\twidgetAttrs.isCoreField === false ||\n\t\twidgetAttrs.serverType === \"field\"\n\t\t\t? \"field\"\n\t\t\t: widgetAttrs.type\n\t\t\t? widgetAttrs.type.toLowerCase()\n\t\t\t: defaultType;\n\t_type = uiFields.includes(widgetAttrs.serverType)\n\t\t? widgetAttrs.serverType\n\t\t: _type;\n\treturn _type;\n};\n\n// check source or destination panel is exclusive or not\nexport const checkExclusive = (widgets, source, destination) => {\n\t// special case for exclusive\n\tif (widgets[source.id]) {\n\t\tif (widgets[source.panelId]) {\n\t\t\tlet sourcePanelAttrs = widgets[source.panelId];\n\t\t\tif (\n\t\t\t\tsourcePanelAttrs.exclusive &&\n\t\t\t\tdestination.panelId !== source.panelId\n\t\t\t) {\n\t\t\t\treturn true;\n\t\t\t}\n\t\t}\n\t}\n\tif (widgets[destination.id]) {\n\t\tif (widgets[destination.panelId]) {\n\t\t\tlet destinationPanelAttrs = widgets[destination.panelId];\n\t\t\tif (\n\t\t\t\tdestinationPanelAttrs.exclusive &&\n\t\t\t\tsource.panelId !== destination.panelId\n\t\t\t) {\n\t\t\t\treturn true;\n\t\t\t}\n\t\t}\n\t}\n\treturn false;\n};\n\nconst isSamePositionInOriginal = (elements, panel, widget, hoverItemIndex) => {\n\tconst field = widget.attrs || widget || {};\n\tlet flag = false;\n\t(elements || []).forEach((element) => {\n\t\tif (element.elements) {\n\t\t\tif (\n\t\t\t\telement.attributes &&\n\t\t\t\tpanel &&\n\t\t\t\telement.attributes.name === panel.name\n\t\t\t) {\n\t\t\t\tconst item = element.elements[hoverItemIndex];\n\t\t\t\tif (\n\t\t\t\t\titem &&\n\t\t\t\t\titem.attributes &&\n\t\t\t\t\tfield &&\n\t\t\t\t\titem.attributes.name === field.name\n\t\t\t\t) {\n\t\t\t\t\tflag = true;\n\t\t\t\t}\n\t\t\t}\n\t\t\tif (!flag && element.elements && element.elements.length) {\n\t\t\t\tconst result = isSamePositionInOriginal(\n\t\t\t\t\telement.elements,\n\t\t\t\t\tpanel,\n\t\t\t\t\twidget,\n\t\t\t\t\thoverItemIndex\n\t\t\t\t);\n\t\t\t\tif (result === true) {\n\t\t\t\t\tflag = true;\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t});\n\treturn flag;\n};\n\nconst getTarget = (fieldTarget, itemTarget) => {\n\treturn fieldTarget || itemTarget;\n};\n\nexport const isPanelTab = (field) => {\n\tconst { type, widgetAttrs } = field;\n\tif (type === TYPE.panel && widgetAttrs) {\n\t\tconst attrs = JSON.parse(widgetAttrs || \"{}\");\n\t\tif (attrs.tab === \"true\") {\n\t\t\treturn true;\n\t\t}\n\t}\n\treturn false;\n};\n\nconst getColSpan = (widget) => {\n\tconst attrs = JSON.parse(widget.widgetAttrs || \"{}\");\n\tconst defaultColspan = widget.type === TYPE.panel ? 12 : 6;\n\treturn attrs.colSpan || defaultColspan;\n};\n\nconst getCols = (widget) => {\n\tif ([TYPE.panel, TYPE.tabs].includes(widget.type)) {\n\t\treturn { cols: 12 };\n\t}\n\treturn {};\n};\n\nexport const getMenuBuilder = (studioMenu) => {\n\tif (studioMenu) {\n\t\treturn {\n\t\t\tmenuBuilderTitle: studioMenu.title,\n\t\t\tmenuBuilderParent: studioMenu.parentMenu,\n\t\t};\n\t}\n\treturn {};\n};\n\nexport const generateCustomModelSchema = (\n\tfields = [],\n\trecord,\n\ttypeLateral = \"\",\n\tformType = \"form\"\n) => {\n\tlet flag = false;\n\tconst _widgets = {};\n\tconst formItems = [];\n\tconst tabItems = [];\n\tlet _panelId;\n\tfields &&\n\t\tfields.length &&\n\t\tfields.forEach((f) => {\n\t\t\tconst _ID = _.uniqueId();\n\t\t\tconst isTab = isPanelTab(f);\n\t\t\tif ([TYPE.panel, TYPE.tabs].includes(f.type)) {\n\t\t\t\tflag = true;\n\t\t\t\t_panelId = _ID;\n\t\t\t\tf[\"items\"] = [];\n\t\t\t\tf[\"layout\"] = \"grid\";\n\t\t\t} else if (!flag) {\n\t\t\t\tconst _item = _widgets[_panelId];\n\t\t\t\tif (_item) {\n\t\t\t\t\t_item.items.push(_ID);\n\t\t\t\t\t_widgets[_panelId] = {\n\t\t\t\t\t\t..._widgets[_panelId],\n\t\t\t\t\t\titems: [..._item.items],\n\t\t\t\t\t};\n\t\t\t\t} else {\n\t\t\t\t\tflag = true;\n\t\t\t\t}\n\t\t\t}\n\t\t\tif (flag) {\n\t\t\t\tflag = false;\n\t\t\t\tif (isTab) {\n\t\t\t\t\ttabItems.push(_ID);\n\t\t\t\t} else {\n\t\t\t\t\tformItems.push(_ID);\n\t\t\t\t}\n\t\t\t}\n\t\t\tif (f.selectionText && f.selectionText.length) {\n\t\t\t\tf.updateSelection = true;\n\t\t\t}\n\t\t\t_widgets[_ID] = {\n\t\t\t\t...f,\n\t\t\t\tcolSpan: getColSpan(f),\n\t\t\t\t...getCols(f),\n\t\t\t\ttype: `${f.type}${typeLateral}`,\n\t\t\t};\n\t\t});\n\t// add tab panel if tabItems has length\n\tif (tabItems.length) {\n\t\tconst _ID = _.uniqueId();\n\t\tconst field = {\n\t\t\titems: [...tabItems],\n\t\t\ttype: TYPE.tabs,\n\t\t\ttitle: \"Tab Panel\",\n\t\t};\n\t\tformItems.push(_ID);\n\t\t_widgets[_ID] = { ...field };\n\t}\n\tconst form = formType === \"customForm\" ? IDS.customForm : IDS.form;\n\tconst schema = {\n\t\twidgets: {\n\t\t\t[form]: {\n\t\t\t\ttype: formType,\n\t\t\t\tcols: 12,\n\t\t\t\t...record,\n\t\t\t\t...getMenuBuilder(record ? record.studioMenu : undefined),\n\t\t\t},\n\t\t\t[IDS.dumpField]: {\n\t\t\t\ttype: TYPE.dumpField,\n\t\t\t\tname: \"\",\n\t\t\t},\n\t\t\t..._widgets,\n\t\t},\n\t\titems: [...formItems],\n\t};\n\treturn schema;\n};\n\nfunction processXML(xmlString, indent) {\n\treturn format(xmlString);\n}\n\nconst replacer = (key, modelType) => {\n\tconst camelToDash = [\"formView\", \"gridView\", \"minSize\", \"maxSize\"];\n\tconst xField = [\"bind\"];\n\tif (modelType === MODEL_TYPE.BASE) {\n\t\tconst keyReplacer = {\n\t\t\ttargetModel: \"target\",\n\t\t\tminSize: \"min\",\n\t\t\tmaxSize: \"max\",\n\t\t};\n\t\tkey = keyReplacer[key] || key;\n\t\tif (camelToDash.includes(key)) {\n\t\t\tkey = camelToDashCase(key);\n\t\t}\n\t\tif (xField.includes(key)) {\n\t\t\tkey = `x-${camelToDashCase(key)}`;\n\t\t}\n\t}\n\treturn key;\n};\n\nconst editorKeyReplacer = (key, modelType) => {\n\tconst keyReplacer = {\n\t\ttargetModel: \"target\",\n\t\tminSize: \"min\",\n\t\tmaxSize: \"max\",\n\t};\n\tif (modelType === MODEL_TYPE.BASE) {\n\t\tconst _keyIndex = Object.values(keyReplacer).findIndex((v) => v === key);\n\t\tif (_keyIndex !== -1) {\n\t\t\tkey = Object.keys(keyReplacer)[_keyIndex];\n\t\t}\n\t}\n\treturn key;\n};\n\n//this is similar to isDummyWidget , to be checked later for removal\nfunction isDummyField(widget) {\n\tconst modelTypes = [];\n\tmodelFields.forEach((f) => {\n\t\tconst { value = [] } = f;\n\t\tconst types = value.map((v) => v.serverType);\n\t\tmodelTypes.push(...types);\n\t});\n\treturn widget.serverType === \"field\" && modelTypes.includes(widget.type);\n}\n\nfunction valueConverter(value, key) {\n\tconst ltKeys = [\"title\", \"text\"];\n\tif (value && ltKeys.includes(key)) {\n\t\tvalue = value.replace(/</g, \"&lt;\");\n\t}\n\treturn value;\n}\n\nconst getWidgetAttrs = (attrs, exempt = [], modelType) => {\n\tconst widgetAttrs = {};\n\tconst exemptedAttrs = [\n\t\t\"version\",\n\t\t\"type\",\n\t\t\"typeName\",\n\t\t\"label\",\n\t\t\"items\",\n\t\t\"serverType\",\n\t\t\"layout\",\n\t\t\"cols\",\n\t\t\"isCoreField\",\n\t\t\"isModelField\",\n\t\t\"relationship\",\n\t\t\"current\",\n\t\t\"autoTitle\",\n\t\t\"metaModel\",\n\t\t\"targetSearch\",\n\t\t\"editorType\",\n\t\t\"studioApp\",\n\t\t...exempt,\n\t];\n\tif (attrs.serverType !== \"field\") {\n\t\texemptedAttrs.push(\"targetModel\", \"targetName\", \"target\");\n\t}\n\tObject.keys(attrs).forEach((key) => {\n\t\tif (!exemptedAttrs.includes(key) && attrs[key] !== \"\") {\n\t\t\tlet flag = true;\n\t\t\tif (modelType === MODEL_TYPE.BASE && isDefaultValue(key, attrs[key])) {\n\t\t\t\tflag = false;\n\t\t\t}\n\t\t\tif (flag) {\n\t\t\t\tif (key === \"dummyType\") {\n\t\t\t\t\twidgetAttrs[\"type\"] = attrs[key];\n\t\t\t\t} else {\n\t\t\t\t\twidgetAttrs[replacer(key, modelType)] = valueConverter(\n\t\t\t\t\t\tattrs[key],\n\t\t\t\t\t\tkey\n\t\t\t\t\t);\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t});\n\t// check for dummy model field\n\tif (attrs.type === TYPE.panelInclude) {\n\t\tif (typeof attrs.view === \"object\") {\n\t\t\twidgetAttrs.view = attrs.view.name;\n\t\t}\n\t}\n\tif (attrs.isModelField || isDummyField(attrs)) {\n\t\twidgetAttrs[\"type\"] = attrs.type;\n\t}\n\tif (attrs.type === TYPE.panelRelated) {\n\t\twidgetAttrs[\"name\"] = attrs.field;\n\t}\n\tif (widgetAttrs.name) {\n\t\t// change array field index\n\t\tconst squareIndex = widgetAttrs.name.indexOf(\"[\");\n\t\tif (squareIndex !== -1) {\n\t\t\twidgetAttrs.name = widgetAttrs.name.substring(0, squareIndex);\n\t\t}\n\t}\n\treturn widgetAttrs;\n};\n\nconst getCustomWidget = (widget, exempt = []) => {\n\tconst _widget = {};\n\tconst exemptedAttrs = [\n\t\t\"image\",\n\t\t\"serverType\",\n\t\t\"isModelField\",\n\t\t\"isCoreField\",\n\t\t\"current\",\n\t\t...exempt,\n\t];\n\tObject.keys(widget).forEach((key) => {\n\t\tif (!exemptedAttrs.includes(key)) {\n\t\t\tif (key === \"type\" && [\"item\", \"field\"].includes(widget[key])) {\n\t\t\t\t_widget[key] = widget[\"serverType\"];\n\t\t\t} else {\n\t\t\t\t_widget[key] = widget[key] === \"\" ? null : widget[key];\n\t\t\t}\n\t\t}\n\t});\n\treturn _widget;\n};\n\nconst getCustomModelFields = (\n\titems = [],\n\twidgets,\n\tadditionalProps = {},\n\tcountSequence = false,\n\tsequence = 0\n) => {\n\tconst fields = [];\n\titems.forEach((item) => {\n\t\tif (widgets[item]) {\n\t\t\tlet _widget = { ...widgets[item] };\n\t\t\tconst exempt = [];\n\t\t\tif (![\"dump_field\", \"form\"].includes(_widget.type)) {\n\t\t\t\tif (_widget.type !== TYPE.tabs) {\n\t\t\t\t\tif (typeof _widget.id === \"symbol\") {\n\t\t\t\t\t\tdelete _widget.id;\n\t\t\t\t\t}\n\t\t\t\t\tif (_widget.showTitle !== \"false\") {\n\t\t\t\t\t\tdelete _widget.showTitle;\n\t\t\t\t\t}\n\t\t\t\t\tif (countSequence) {\n\t\t\t\t\t\t_widget.sequence = sequence;\n\t\t\t\t\t\tsequence++;\n\t\t\t\t\t}\n\t\t\t\t\tif (_widget.serverType === \"spacer\") {\n\t\t\t\t\t\texempt.push(\"title\");\n\t\t\t\t\t}\n\t\t\t\t\tfields.push({\n\t\t\t\t\t\t...getCustomWidget(_widget, exempt),\n\t\t\t\t\t\t...additionalProps,\n\t\t\t\t\t});\n\t\t\t\t}\n\t\t\t\tif (_widget.items && _widget.items.length) {\n\t\t\t\t\tconst modelFields = getCustomModelFields(\n\t\t\t\t\t\t_widget.items,\n\t\t\t\t\t\twidgets,\n\t\t\t\t\t\tadditionalProps,\n\t\t\t\t\t\tcountSequence,\n\t\t\t\t\t\tsequence\n\t\t\t\t\t);\n\t\t\t\t\tfields.push(...modelFields.fields);\n\t\t\t\t\tsequence = modelFields.sequence;\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t});\n\treturn { fields, sequence };\n};\n\nconst isCreatedFromStudio = ({ xmlId = null, extension }) => {\n\tif (xmlId && !extension) {\n\t\tconst index = xmlId.indexOf(\"studio-\");\n\t\tif (index === 0) {\n\t\t\treturn true;\n\t\t}\n\t}\n\treturn false;\n};\n\nconst getFormProperties = (form, exempt = []) => {\n\tconst except = [\"type\", \"cols\", \"items\", ...exempt];\n\tconst properties = {};\n\tObject.keys(form).forEach((key) => {\n\t\tif (!except.includes(key)) {\n\t\t\tproperties[key] = form[key] === \"\" ? null : form[key];\n\t\t}\n\t});\n\treturn properties;\n};\n\n/**\n * Checks whether value is same as default value or not\n * for given property name.\n * Returns boolean true/false\n * @param {string} name\n * @param {string} value\n */\nconst isAttrHasDefaultValue = (name, value) => {\n\tconst defaultValue = DEFAULT_VALUE[name];\n\tif (defaultValue !== undefined && `${defaultValue}` === `${value}`) {\n\t\treturn true;\n\t}\n\treturn false;\n};\n\nexport const getProperty = (\n\tname,\n\tvalue,\n\tparentField,\n\tparentValue,\n\tshouldCheckParent = true\n) => {\n\tconst obj = { [name]: value };\n\tif (shouldCheckParent) {\n\t\tconst _value =\n\t\t\ttypeof parentValue === \"string\"\n\t\t\t\t? JSON.parse(parentValue)\n\t\t\t\t: parentValue || {};\n\t\tif (parentField && ![undefined, \"\", null].includes(value)) {\n\t\t\t// check for default value\n\t\t\tif (isAttrHasDefaultValue(name, value)) {\n\t\t\t\tdelete _value[name];\n\t\t\t\treturn { [parentField]: JSON.stringify({ ..._value }) };\n\t\t\t}\n\t\t\tconst _obj = { [name]: `${value}` };\n\t\t\treturn { [parentField]: JSON.stringify({ ..._value, ..._obj }) };\n\t\t} else if (parentField && (!value || value === \"\")) {\n\t\t\tdelete _value[name];\n\t\t\treturn { [parentField]: JSON.stringify({ ..._value }) };\n\t\t}\n\t}\n\tif (name === \"showTitle\" && value === true) {\n\t\treturn { showTitle: undefined };\n\t}\n\treturn obj;\n};\n\nexport const getPropertyValue = (\n\tlist,\n\tname,\n\tparentField,\n\tdefaultValue,\n\tshouldCheckParent = true\n) => {\n\tif (shouldCheckParent && parentField) {\n\t\tif (list[parentField]) {\n\t\t\tconst field = JSON.parse(list[parentField]);\n\t\t\treturn [undefined, null].includes(field[name])\n\t\t\t\t? defaultValue\n\t\t\t\t: field[name];\n\t\t}\n\t\treturn defaultValue || null;\n\t}\n\treturn [undefined, null].includes(list[name]) ? defaultValue : list[name];\n};\n\nconst getDefaultProperties = (modelType) => {\n\tswitch (modelType) {\n\t\tcase MODEL_TYPE.CUSTOM:\n\t\t\treturn { formWidth: \"large\" };\n\t\tcase MODEL_TYPE.BASE: {\n\t\t\treturn { width: \"large\" };\n\t\t}\n\t\tdefault:\n\t\t\treturn {};\n\t}\n};\n\nconst getPatchList = (xmlJson) => {\n\tif (xmlJson) {\n\t\tconst { elements = [] } = xmlJson;\n\t\tif (elements[0]) {\n\t\t\treturn elements[0].elements || [];\n\t\t}\n\t}\n\treturn [];\n};\n\nconst filterFormPatch = (patchList) => {\n\treturn patchList.filter((element) => element.attributes.target === \"/\");\n};\n\nconst getCurrentFormAttributes = (xml) => {\n\tconst { elements = [] } = xml;\n\treturn elements[0].attributes || {};\n};\n\nconst mergeFormAttributes = (patchList, formPatch) => {\n\tconst index = patchList.findIndex(\n\t\t(element) => element.attributes.target === \"/\"\n\t);\n\tconst targetIndex = index === -1 ? 0 : index;\n\tconst remove = index === -1 ? 0 : 1;\n\tif (Object.keys(formPatch).length) {\n\t\tpatchList.splice(targetIndex, remove, { ...formPatch });\n\t} else if (index !== -1) {\n\t\tpatchList.splice(index, 1);\n\t}\n\treturn patchList;\n};\n\nconst camelToDashCase = (string, caseString = \"-\") => {\n\treturn string.replace(/[A-Z]/g, (m) => caseString + m.toLowerCase());\n};\n\nconst dashToCamelCase = (string) => {\n\treturn string.replace(/-([a-z])/g, function (g) {\n\t\treturn g[1].toUpperCase();\n\t});\n};\n\nconst isDefaultValue = (field, value) => {\n\tconst fieldValue = DEFAULT_VALUE[field];\n\tif ([true, false].includes(fieldValue) && `${value}` === `${fieldValue}`) {\n\t\treturn true;\n\t}\n\treturn false;\n};\n\nconst getReferenceProperty = (widgetType) => {\n\tconst referenceProperty = {\n\t\t[TYPE.panelInclude]: \"view\",\n\t};\n\tconst refProp = referenceProperty[widgetType];\n\treturn refProp || \"name\";\n};\n\nconst checkTarget = (target, checkString, which) => {\n\t// 2 for parent check and 3 for itself/child element check\n\tconst targetSplit = target.split(\"/\");\n\tif (which) {\n\t\tif (targetSplit[which] === checkString) {\n\t\t\treturn true;\n\t\t}\n\t\treturn false;\n\t}\n\treturn target === checkString;\n};\n\nconst exploreTarget = (target, which = 3) => {\n\t// 2 for parent check and 3 for itself/child element check\n\tconst targetSplit = target.split(\"/\");\n\tconst length = targetSplit.length;\n\tlet parent = length > 3 ? targetSplit[length - 2] : targetSplit[length - 1];\n\tlet self = length > 3 ? targetSplit[length - 1] : undefined;\n\treturn { parent, self };\n};\n\nconst getViews = (list, viewName) => {\n\tlet view = list.find((v) => v.computed === true);\n\tlet originalXML = list.find(\n\t\t(v) => v.computed !== true && v.extension !== true\n\t);\n\tconst extensionXML = list.find(\n\t\t(v) => v.extension === true && v.xmlId === `studio-${viewName}`\n\t);\n\treturn {\n\t\tview: view || originalXML,\n\t\toriginalXML,\n\t\textensionXML,\n\t};\n};\n\nconst getElementTypes = (name, field, _type) => {\n\tlet serverType;\n\tlet type;\n\tif (field) {\n\t\tserverType = field.type.toLowerCase();\n\t\ttype = name;\n\t} else {\n\t\tserverType = name;\n\t\ttype = _type ? _type : name === \"field\" ? undefined : name; // if element is field then set default type string\n\t}\n\treturn {\n\t\tserverType: TYPE_REPLACER[serverType] || serverType,\n\t\ttype: TYPE_REPLACER[type] || type,\n\t};\n};\n\nconst getTitle = (attributes, field) => {\n\tif (attributes.title) {\n\t\treturn { title: attributes.title };\n\t}\n\tif (field?.label) {\n\t\treturn { autoTitle: field.label };\n\t}\n\tif (attributes.name) {\n\t\treturn { autoTitle: camelToDashCase(attributes.name, \" \") };\n\t}\n\treturn {};\n};\n\nconst generateViewFromJson = ({\n\tview,\n\tfields,\n\toriginal,\n\textensionXML,\n\tattrsList,\n}) => {\n\tconst { elements } = view;\n\n\tconst getElementName = (attributes, parent, itemList, elementType) => {\n\t\tconst nameObj = { name: attributes.name };\n\t\treturn nameObj;\n\t};\n\n\tconst getElementToWidget = (element, fields, parent, itemList) => {\n\t\tlet widget = {};\n\t\tlet field;\n\t\tif (element) {\n\t\t\tconst { type, ...attributes } = element.attributes || {};\n\t\t\tif (element.name.indexOf(\"panel\") === -1) {\n\t\t\t\tfield = fields.find((f) => f.name === attributes.name);\n\t\t\t}\n\t\t\tconst attrs = {};\n\t\t\tObject.keys(attributes).map((key) => {\n\t\t\t\tlet _key = key;\n\t\t\t\tif (key.indexOf(\"x-\") === 0) {\n\t\t\t\t\t_key = key.substring(2);\n\t\t\t\t}\n\t\t\t\tattrs[editorKeyReplacer(dashToCamelCase(_key), MODEL_TYPE.BASE)] =\n\t\t\t\t\tattributes[key];\n\t\t\t\treturn undefined;\n\t\t\t});\n\t\t\tconst targetModel = getTarget(\n\t\t\t\tfield?.target || field?.targetModel,\n\t\t\t\tattributes.target\n\t\t\t);\n\t\t\twidget = {\n\t\t\t\t...attrs,\n\t\t\t\tcolSpan: Number(attributes.colSpan || 6),\n\t\t\t\t...getElementName(attributes, parent, itemList, element.name),\n\t\t\t\t...getElementTypes(element.name, field, type),\n\t\t\t\t...getTitle(attributes, field),\n\t\t\t};\n\t\t\tif (targetModel) {\n\t\t\t\twidget.targetModel = targetModel;\n\t\t\t}\n\t\t\tif (\n\t\t\t\telement.name &&\n\t\t\t\t(element.name.indexOf(TYPE.panel) >= 0 ||\n\t\t\t\t\t[TYPE.menubar, TYPE.toolbar].includes(element.name))\n\t\t\t) {\n\t\t\t\twidget.colSpan = Number(attributes.colSpan || 12);\n\t\t\t\twidget.cols = 12;\n\t\t\t\twidget.layout = \"grid\";\n\t\t\t\twidget.serverType =\n\t\t\t\t\twidget.type === \"panel\" && widget.tab === true\n\t\t\t\t\t\t? TYPE.tabs\n\t\t\t\t\t\t: widget.serverType || widget.type;\n\t\t\t}\n\t\t}\n\t\treturn { widget, field };\n\t};\n\n\tconst getSpecialType = (element) => {\n\t\treturn element.name;\n\t};\n\tconst getXMLToViewItems = (elements = [], fields, parent) => {\n\t\tconst exclude = [\"panel-mail\"];\n\t\tlet _widgets = {};\n\t\tconst itemList = [];\n\t\tconst fieldList = [];\n\t\telements.forEach((element) => {\n\t\t\tif (element.attributes && `${element.attributes.json}` === \"true\") {\n\t\t\t\treturn;\n\t\t\t}\n\t\t\tif (!exclude.includes(element.name) && element.type !== \"cdata\") {\n\t\t\t\tconst _ID = _.uniqueId();\n\t\t\t\tconst { widget, field } = getElementToWidget(\n\t\t\t\t\telement,\n\t\t\t\t\tfields,\n\t\t\t\t\tparent,\n\t\t\t\t\titemList\n\t\t\t\t);\n\t\t\t\tif (field) {\n\t\t\t\t\tfieldList.push(field);\n\t\t\t\t}\n\t\t\t\titemList.push(_ID);\n\t\t\t\tif (element.name && element.name.indexOf(TYPE.panel) >= 0) {\n\t\t\t\t\twidget.items = [];\n\t\t\t\t}\n\t\t\t\tif (element.elements && element.name !== \"field\") {\n\t\t\t\t\tconst items = getXMLToViewItems(\n\t\t\t\t\t\telement.elements,\n\t\t\t\t\t\tfields,\n\t\t\t\t\t\telement.attributes\n\t\t\t\t\t);\n\t\t\t\t\t_widgets = { ..._widgets, ...items._widgets };\n\t\t\t\t\twidget.items = [...items.itemList];\n\t\t\t\t\tfieldList.push(...items.fieldList);\n\t\t\t\t}\n\t\t\t\tif (element.elements && element.name === \"field\") {\n\t\t\t\t\t// check for viewer\n\t\t\t\t\tconst type = getSpecialType(element.elements[0]);\n\t\t\t\t\tif (type) {\n\t\t\t\t\t\twidget.type = type;\n\t\t\t\t\t\twidget.elements = element.elements;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\t// override with meta attrs list\n\t\t\t\tif (widget.name) {\n\t\t\t\t\tconst list = (attrsList || []).filter(\n\t\t\t\t\t\t(attr) => attr.field === widget.name\n\t\t\t\t\t);\n\t\t\t\t\tlist.forEach((attr) => {\n\t\t\t\t\t\tif ([\"selection-in\"].includes(attr.name)) {\n\t\t\t\t\t\t\twidget[attr.name] = attr.value;\n\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\twidget[\n\t\t\t\t\t\t\t\teditorKeyReplacer(dashToCamelCase(attr.name), MODEL_TYPE.BASE)\n\t\t\t\t\t\t\t] = attr.value;\n\t\t\t\t\t\t}\n\t\t\t\t\t});\n\t\t\t\t}\n\t\t\t\t_widgets[_ID] = { ...widget };\n\t\t\t}\n\t\t});\n\t\treturn { _widgets, itemList, fieldList };\n\t};\n\n\tconst { itemList, _widgets, fieldList } = getXMLToViewItems(elements, fields);\n\tconst form = _widgets[itemList[0]];\n\tconst items = form.items || [];\n\tdelete _widgets[itemList[0]];\n\tconst schema = {\n\t\twidgets: {\n\t\t\t[IDS.form]: {\n\t\t\t\ttype: TYPE.form,\n\t\t\t\tcols: 12,\n\t\t\t\t...form,\n\t\t\t\titems: undefined,\n\t\t\t},\n\t\t\t[IDS.dumpField]: {\n\t\t\t\ttype: TYPE.dumpField,\n\t\t\t\tname: \"\",\n\t\t\t},\n\t\t\t..._widgets,\n\t\t},\n\t\titems,\n\t\tfieldList,\n\t};\n\treturn schema;\n};\n\nconst generateXMLToViewSchema = ({\n\tview,\n\tfields,\n\toriginal = false,\n\textensionXML,\n\tattrsList,\n}) => {\n\tconst { elements } = JSON.parse(\n\t\tconvert.xml2json(view.xml, {\n\t\t\tcompact: false,\n\t\t\tfullTagEmptyElement: false,\n\t\t})\n\t);\n\treturn generateViewFromJson({\n\t\tview: { elements },\n\t\tfields,\n\t\toriginal,\n\t\textensionXML,\n\t\tattrsList,\n\t});\n};\n\nconst getChangeList = (schema, extensionXml) => {\n\tconst list = [];\n\tconst { widgets } = schema;\n\tconst elems = getExtensionElements(extensionXml);\n\tconst widgetList = Object.values(widgets);\n\tconst widgetIds = Object.keys(widgets);\n\telems.forEach((json) => {\n\t\tconst { elements = [] } = json;\n\t\tconst moveElement = elements[0];\n\t\tif (moveElement && moveElement.attributes && moveElement.name === \"move\") {\n\t\t\tconst source = exploreTarget(moveElement.attributes.source);\n\t\t\tif (source.self) {\n\t\t\t\tconst index = source.self\n\t\t\t\t\t? widgetList.findIndex(\n\t\t\t\t\t\t\t(w) => `${w.type}[@name='${w.name}']` === source.self\n\t\t\t\t\t  )\n\t\t\t\t\t: widgetList.findIndex(\n\t\t\t\t\t\t\t(w) => `${w.type}[@name='${w.name}']` === source.parent\n\t\t\t\t\t  );\n\t\t\t\tif (widgetIds[index]) {\n\t\t\t\t\tlist.push(widgetIds[index]);\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t});\n\treturn list;\n};\n\nconst getExtensionElements = (xml) => {\n\tconst extensionJson = JSON.parse(\n\t\tconvert.xml2json(xml, {\n\t\t\tcompact: false,\n\t\t\tfullTagEmptyElement: false,\n\t\t})\n\t);\n\tconst elems = extensionJson.elements[0].elements;\n\treturn elems;\n};\n\nfunction randomString(length) {\n\tconst chars =\n\t\t\"0123456789abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ\";\n\tvar result = \"\";\n\tfor (var i = length; i > 0; --i)\n\t\tresult += chars[Math.floor(Math.random() * chars.length)];\n\treturn result;\n}\n\nexport const generateFieldUniqueTitle = ({ name, fieldName }) => {\n\tconst text = randomString(6);\n\treturn `studio:${text}:${fieldName}:${name}`;\n};\n\nexport function getDefaultGridFormName(str, isForm = false, isJson = false) {\n\tif (!str) return;\n\tif (isJson) {\n\t\treturn `custom-model-${str.name}-${isForm ? \"form\" : \"grid\"}`;\n\t}\n\tconst models = str.split(\".\");\n\tconst modelString = models[models.length - 1];\n\tif (!modelString) return;\n\tconst viewName = dasherize(modelString);\n\treturn `${viewName.toLowerCase()}-${isForm ? \"form\" : \"grid\"}`;\n}\n\nexport default {\n\tcamleCaseString,\n\ttranslate,\n\tprocessXML,\n\tgetWidgetAttrs,\n\tgetCustomModelFields,\n\tisCreatedFromStudio,\n\tgetFormProperties,\n\tgetDefaultProperties,\n\tgetPatchList,\n\tkeyReplacer: replacer,\n\tvalueConverter,\n\tfilterFormPatch,\n\tgetCurrentFormAttributes,\n\tmergeFormAttributes,\n\tcamelToDashCase,\n\tdashToCamelCase,\n\tisSamePositionInOriginal,\n\tgetWidgetType,\n\tisDefaultValue,\n\tgetReferenceProperty,\n\tcheckTarget,\n\texploreTarget,\n\tgetViews,\n\tgenerateXMLToViewSchema,\n\tgenerateViewFromJson,\n\tgetChangeList,\n\tgetDefaultGridFormName,\n\tisPanelTab,\n};\n","import React from \"react\";\nimport classNames from \"classnames\";\nimport { GRID_SIZE, PANEL_TYPE, TYPE } from \"../constants\";\nimport { useStore } from \"../store/context\";\n\nconst DEFAULTS = {\n\tITEM_COLSPAN: 1,\n\tMAX_SIZE: 12,\n\tPARENT_ITEM_SPAN: 6,\n};\n\nconst getColSpan = (col, parentItemSpan) => {\n\tconst widgetAttrs = col.widgetAttrs ? JSON.parse(col.widgetAttrs) : {};\n\tif (widgetAttrs.colSpan) {\n\t\treturn Number(widgetAttrs.colSpan);\n\t} else {\n\t\treturn Number(parentItemSpan) || col.colSpan || DEFAULTS.PARENT_ITEM_SPAN;\n\t}\n};\n\n// get Column cell CSS according to colSpan and Container size\nexport const getColumnCss = (columns, colSpan) => {\n\tconst [n, span] = [Number(columns), Number(colSpan)];\n\tif (n > GRID_SIZE.max) return \"\";\n\treturn `col-span col-${\n\t\tspan > n ? GRID_SIZE.max : Math.floor((GRID_SIZE.max * span) / n)\n\t}`;\n};\n\nconst getFullGrid = (\n\titems,\n\tsize = DEFAULTS.MAX_SIZE,\n\tisStackLayout,\n\tparentItemSpan,\n\tdraggedWidgetAttrsColSpan\n) => {\n\tconst grid = [];\n\tconst isStack = size === 1 || isStackLayout;\n\tconst gridSize = isStack ? DEFAULTS.MAX_SIZE : size;\n\tconst _parentItemSpan = parentItemSpan || DEFAULTS.PARENT_ITEM_SPAN;\n\tlet row = [];\n\tlet span = 0;\n\n\tconst getItemColspan = (colSpan) => {\n\t\treturn Number(colSpan);\n\t};\n\n\tif (!items.length) {\n\t\tlet remainingSpan = gridSize;\n\t\tconst row = [];\n\t\tconst $cell = { id: 0, separator: true };\n\n\t\twhile (remainingSpan > 0) {\n\t\t\trow.push($cell);\n\t\t\tconst colSpan = isStack\n\t\t\t\t? gridSize\n\t\t\t\t: remainingSpan < _parentItemSpan\n\t\t\t\t? remainingSpan\n\t\t\t\t: _parentItemSpan;\n\t\t\trow.push({\n\t\t\t\tid: 0,\n\t\t\t\tdummy: true,\n\t\t\t\tdummyPanel: true,\n\t\t\t\tcolSpan: Number(colSpan),\n\t\t\t});\n\t\t\tremainingSpan -= colSpan;\n\t\t\tif (remainingSpan <= 0) {\n\t\t\t\trow.push($cell);\n\t\t\t}\n\t\t}\n\n\t\treturn [row];\n\t}\n\n\tconst addRow = ({ item, overflow = false } = {}) => {\n\t\tif (overflow) {\n\t\t\tlet fillColspan = gridSize - (span - getItemColspan(item.colSpan));\n\t\t\twhile (fillColspan > 0) {\n\t\t\t\tif (fillColspan > (draggedWidgetAttrsColSpan || _parentItemSpan)) {\n\t\t\t\t\trow.push({\n\t\t\t\t\t\tid: 0,\n\t\t\t\t\t\tdummy: true,\n\t\t\t\t\t\tcolSpan: draggedWidgetAttrsColSpan || _parentItemSpan,\n\t\t\t\t\t});\n\t\t\t\t} else {\n\t\t\t\t\trow.push({\n\t\t\t\t\t\tid: 0,\n\t\t\t\t\t\tdummy: true,\n\t\t\t\t\t\tcolSpan: fillColspan,\n\t\t\t\t\t});\n\t\t\t\t}\n\t\t\t\tfillColspan -= draggedWidgetAttrsColSpan || _parentItemSpan;\n\t\t\t}\n\t\t}\n\t\tgrid.push(row);\n\t\trow = [];\n\t\tspan = 0;\n\t};\n\n\tconst addItem = (item) => row.push(item);\n\n\tfor (let i = 0; i < items.length; i++) {\n\t\tconst item = Object.assign(\n\t\t\titems[i],\n\t\t\tisStack\n\t\t\t\t? { colSpan: DEFAULTS.MAX_SIZE }\n\t\t\t\t: { colSpan: getItemColspan(getColSpan(items[i], parentItemSpan)) }\n\t\t);\n\t\tconst { colSpan: itemSpan = DEFAULTS.ITEM_COLSPAN } = item;\n\t\tconst isLastItem = i === items.length - 1;\n\t\tspan += getItemColspan(itemSpan);\n\t\tif (span > gridSize) {\n\t\t\taddRow({ item, overflow: true });\n\t\t\tspan = itemSpan;\n\t\t\taddItem(item);\n\t\t} else if (span === gridSize) {\n\t\t\trow.push(item);\n\t\t\taddRow({ item });\n\t\t} else {\n\t\t\trow.push(item);\n\t\t}\n\n\t\tif (isLastItem && row.length) {\n\t\t\tconst occupiedSpan = row.reduce(\n\t\t\t\t(total, { colSpan = DEFAULTS.ITEM_COLSPAN }) => total + colSpan,\n\t\t\t\t0\n\t\t\t);\n\t\t\tlet remainSpan = gridSize - occupiedSpan;\n\t\t\twhile (remainSpan > 0) {\n\t\t\t\tif (remainSpan <= (draggedWidgetAttrsColSpan || _parentItemSpan)) {\n\t\t\t\t\trow.push({\n\t\t\t\t\t\tid: 0,\n\t\t\t\t\t\tdummy: true,\n\t\t\t\t\t\tcolSpan: remainSpan,\n\t\t\t\t\t});\n\t\t\t\t} else {\n\t\t\t\t\trow.push({\n\t\t\t\t\t\tid: 0,\n\t\t\t\t\t\tdummy: true,\n\t\t\t\t\t\tcolSpan: Number(draggedWidgetAttrsColSpan || _parentItemSpan),\n\t\t\t\t\t});\n\t\t\t\t}\n\t\t\t\tremainSpan -= draggedWidgetAttrsColSpan || _parentItemSpan;\n\t\t\t}\n\t\t\tgrid.push(row);\n\t\t}\n\t}\n\n\tconst fullGrid = [];\n\tfor (let i = 0; i < grid.length; i++) {\n\t\tconst row = grid[i];\n\t\tconst { widgetAttrs, type } = row[0];\n\t\tconst { sidebar: isSidePanelDummy } =\n\t\t\ttype === \"panel\" && JSON.parse(widgetAttrs || \"{}\");\n\t\tconst draggable = ![TYPE.menubar, TYPE.toolbar].includes(row[0]?.type);\n\t\tconst upRow = [];\n\t\tconst midRow = [];\n\t\tconst addCell = ($row, options = { separator: true }) =>\n\t\t\t$row.push({\n\t\t\t\tid: 0,\n\t\t\t\tcolSpan: 1,\n\t\t\t\t...options,\n\t\t\t});\n\t\taddCell(upRow);\n\n\t\tdraggable &&\n\t\t\taddCell(midRow, {\n\t\t\t\trelatedColSpan: getColSpan(row[0], parentItemSpan),\n\t\t\t\tseparator: true,\n\t\t\t});\n\n\t\tfor (let j = 0; j < row.length; j++) {\n\t\t\tconst col = row[j];\n\t\t\tconst colSpan = getColSpan(col, parentItemSpan);\n\t\t\taddCell(midRow, col);\n\n\t\t\tdraggable &&\n\t\t\t\taddCell(midRow, { relatedColSpan: colSpan, separator: true });\n\t\t}\n\t\tif (row.length) {\n\t\t\tlet totalSpan = gridSize;\n\t\t\twhile (totalSpan > 0) {\n\t\t\t\taddCell(upRow, {\n\t\t\t\t\tdummy: true,\n\t\t\t\t\tisSidePanelDummy: JSON.parse(isSidePanelDummy || \"false\"),\n\t\t\t\t\tcolSpan: Number(\n\t\t\t\t\t\ttotalSpan <= (draggedWidgetAttrsColSpan || _parentItemSpan)\n\t\t\t\t\t\t\t? totalSpan\n\t\t\t\t\t\t\t: draggedWidgetAttrsColSpan || _parentItemSpan\n\t\t\t\t\t),\n\t\t\t\t});\n\t\t\t\taddCell(upRow, {\n\t\t\t\t\trelatedColSpan: Number(_parentItemSpan),\n\t\t\t\t\tseparator: true,\n\t\t\t\t});\n\t\t\t\ttotalSpan -= draggedWidgetAttrsColSpan || _parentItemSpan;\n\t\t\t}\n\t\t}\n\n\t\tdraggable ? fullGrid.push(upRow) : fullGrid.push([]);\n\t\tfullGrid.push(midRow);\n\n\t\tif (i === grid.length - 1) {\n\t\t\tfullGrid.push(upRow);\n\t\t}\n\t}\n\treturn fullGrid;\n};\n\n// Grid Container embeds grid cell\nexport const GridContainer = ({ className, attrs, children, ...rest }) => (\n\t<div\n\t\tclassName={classNames(\n\t\t\tclassName,\n\t\t\tattrs.cols ? `grid-span grid-${attrs.cols}` : \"\"\n\t\t)}\n\t\t{...rest}\n\t>\n\t\t{children}\n\t</div>\n);\n\nexport function useGridWidget() {\n\tconst [WidgetComponent, setWidgetComponent] = React.useState(() => null);\n\n\tReact.useEffect(() => {\n\t\timport(\"./Widget\").then((module) =>\n\t\t\tsetWidgetComponent(() => module.default)\n\t\t);\n\t}, []);\n\n\treturn WidgetComponent;\n}\n\n/**\n * Grid Component handle layout of Container Components like panels\n */\nfunction Grid(props) {\n\tconst WidgetComponent = useGridWidget();\n\tconst {\n\t\tstate: {\n\t\t\twidgets: _widgets,\n\t\t\tcustomFieldWidgets,\n\t\t\tdragWidgetProps,\n\t\t\thighlightedOption,\n\t\t},\n\t} = useStore();\n\tconst draggedWidgetAttrsColSpan =\n\t\ttypeof dragWidgetProps?.id === \"symbol\" &&\n\t\t[\"one-to-many\", \"many-to-many\"].includes(dragWidgetProps?.attrs?.serverType)\n\t\t\t? undefined //Tempory fix for AOP issue\n\t\t\t: JSON.parse(dragWidgetProps?.attrs?.widgetAttrs || \"{}\").colSpan;\n\tconst { className, items, attrs = {}, panelId, design } = props;\n\tlet widgets = props._type === \"customField\" ? customFieldWidgets : _widgets;\n\tconst widgetAttrs = JSON.parse(attrs.widgetAttrs || \"{}\");\n\tconst { sidebar, itemSpan: span } = widgetAttrs;\n\tconst gridSize = Number(attrs.cols || 1);\n\tconst columns = gridSize * 2 + 1;\n\tconst isStackLayout = attrs.layout === PANEL_TYPE.stack;\n\tconst spacers = columns === 1 ? 0 : columns / 2 + 1;\n\tconst spacerWidth = design ? 1 : 0;\n\tconst cols = (columns - 1) / 2;\n\tconst colWidth = (100 - spacers * spacerWidth) / cols;\n\tconst itemSpan = sidebar && !span ? 12 : span;\n\tconst rows = React.useMemo(() => {\n\t\tlet cellIndice = 0;\n\t\tconst childs = items.map((x) =>\n\t\t\tObject.assign({}, widgets[x] || {}, { id: x })\n\t\t);\n\t\treturn getFullGrid(\n\t\t\tchilds,\n\t\t\tgridSize,\n\t\t\tisStackLayout,\n\t\t\titemSpan,\n\t\t\tdraggedWidgetAttrsColSpan\n\t\t).map((columns, rowIndex) => {\n\t\t\tlet span = 0;\n\t\t\treturn columns.map((c) => {\n\t\t\t\tlet columnIndex = span;\n\t\t\t\tspan += c.separator ? 0 : Number(c.colSpan || 1);\n\t\t\t\treturn { ...c, rowIndex, columnIndex, cellIndice: cellIndice++ };\n\t\t\t});\n\t\t});\n\t}, [\n\t\titems,\n\t\twidgets,\n\t\tgridSize,\n\t\tisStackLayout,\n\t\titemSpan,\n\t\tdraggedWidgetAttrsColSpan,\n\t]);\n\n\tconst gridRows = rows.reduce((arr, row) => arr.concat(row), []);\n\n\tconst getHighlightedOptionStatus = React.useCallback(\n\t\t(name, title) => {\n\t\t\tif (name) {\n\t\t\t\treturn true;\n\t\t\t} else if (title) {\n\t\t\t\tif (highlightedOption?.title === title) {\n\t\t\t\t\treturn true;\n\t\t\t\t}\n\t\t\t}\n\t\t},\n\t\t[highlightedOption]\n\t);\n\treturn (\n\t\t<GridContainer {...{ attrs, className }}>\n\t\t\t<table cellPadding=\"0\" cellSpacing=\"0\">\n\t\t\t\t{design && (\n\t\t\t\t\t<colgroup>\n\t\t\t\t\t\t{isStackLayout ? (\n\t\t\t\t\t\t\t<col width={\"100%\"} />\n\t\t\t\t\t\t) : (\n\t\t\t\t\t\t\tnew Array(columns)\n\t\t\t\t\t\t\t\t.fill(0)\n\t\t\t\t\t\t\t\t.map((col, i) => (\n\t\t\t\t\t\t\t\t\t<col\n\t\t\t\t\t\t\t\t\t\tkey={i}\n\t\t\t\t\t\t\t\t\t\twidth={`${i % 2 === 1 ? colWidth : spacerWidth}%`}\n\t\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t))\n\t\t\t\t\t\t)}\n\t\t\t\t\t</colgroup>\n\t\t\t\t)}\n\t\t\t\t<tbody>\n\t\t\t\t\t{rows.map((cols, rowIndex) => (\n\t\t\t\t\t\t<tr\n\t\t\t\t\t\t\tclassName={rowIndex % 2 === 0 ? \"empty-row\" : \"fill-row\"}\n\t\t\t\t\t\t\tkey={rowIndex}\n\t\t\t\t\t\t>\n\t\t\t\t\t\t\t{cols.map(\n\t\t\t\t\t\t\t\t(\n\t\t\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t\t\tid,\n\t\t\t\t\t\t\t\t\t\tcolSpan,\n\t\t\t\t\t\t\t\t\t\tcellIndice: indice,\n\t\t\t\t\t\t\t\t\t\tcolumnIndex,\n\t\t\t\t\t\t\t\t\t\tseparator,\n\t\t\t\t\t\t\t\t\t\trelatedColSpan,\n\t\t\t\t\t\t\t\t\t\tisSidePanelDummy,\n\t\t\t\t\t\t\t\t\t\tname,\n\t\t\t\t\t\t\t\t\t\ttitle,\n\t\t\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t\t\ti\n\t\t\t\t\t\t\t\t) => {\n\t\t\t\t\t\t\t\t\treturn (\n\t\t\t\t\t\t\t\t\t\t<td\n\t\t\t\t\t\t\t\t\t\t\tclassName={separator ? \"separator\" : \"\"}\n\t\t\t\t\t\t\t\t\t\t\tkey={id ? id : \"\" + id + indice}\n\t\t\t\t\t\t\t\t\t\t\tcolSpan={colSpan > 1 ? colSpan * 2 - 1 : colSpan}\n\t\t\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t\t\t{WidgetComponent && (\n\t\t\t\t\t\t\t\t\t\t\t\t<WidgetComponent\n\t\t\t\t\t\t\t\t\t\t\t\t\tclassName={\n\t\t\t\t\t\t\t\t\t\t\t\t\t\thighlightedOption?.name === name &&\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tgetHighlightedOptionStatus(name, title)\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t? \"search-overlay\"\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t: \"\"\n\t\t\t\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\t\t\t\tdesign={design}\n\t\t\t\t\t\t\t\t\t\t\t\t\tmeta={{\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tisSeparator: Boolean(separator),\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tcolSpan,\n\t\t\t\t\t\t\t\t\t\t\t\t\t\trow: rowIndex,\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tcol: i,\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tcolIndex: columnIndex,\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tgrid: gridRows,\n\t\t\t\t\t\t\t\t\t\t\t\t\t\ttotal: columns,\n\t\t\t\t\t\t\t\t\t\t\t\t\t\trelatedColSpan: relatedColSpan,\n\t\t\t\t\t\t\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t\t\t\t\t\t\t\tisSidePanelDummy={isSidePanelDummy}\n\t\t\t\t\t\t\t\t\t\t\t\t\tpanelId={panelId}\n\t\t\t\t\t\t\t\t\t\t\t\t\tkey={id ? id : \"\" + id + indice}\n\t\t\t\t\t\t\t\t\t\t\t\t\tid={id}\n\t\t\t\t\t\t\t\t\t\t\t\t\tindex={indice}\n\t\t\t\t\t\t\t\t\t\t\t\t\tpanelColumns={attrs.cols}\n\t\t\t\t\t\t\t\t\t\t\t\t\t_type={props._type}\n\t\t\t\t\t\t\t\t\t\t\t\t\terrorList={props.errorList}\n\t\t\t\t\t\t\t\t\t\t\t\t\tcanRemove={props.canRemove}\n\t\t\t\t\t\t\t\t\t\t\t\t\thighlightedOption={highlightedOption}\n\t\t\t\t\t\t\t\t\t\t\t\t\tisBase={props.isBase}\n\t\t\t\t\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t\t\t\t)}\n\t\t\t\t\t\t\t\t\t\t</td>\n\t\t\t\t\t\t\t\t\t);\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t)}\n\t\t\t\t\t\t</tr>\n\t\t\t\t\t))}\n\t\t\t\t</tbody>\n\t\t\t</table>\n\t\t</GridContainer>\n\t);\n}\n\nexport default Grid;\n","import React from \"react\";\nimport classNames from \"classnames\";\nimport Grid from \"./Grid\";\nimport { TYPE } from \"../constants\";\nimport { translate } from \"../utils\";\n\n/**\n * Panel Component\n * Used As Container to group Field Component like form group\n */\nfunction PanelComponent({ id, attrs, design, isTab = false, ...rest }) {\n\tconst errors = rest.errorList[id] || {};\n\treturn (\n\t\t<React.Fragment>\n\t\t\t{(attrs.title ||\n\t\t\t\t[TYPE.toolbar, TYPE.menubar].includes(attrs.serverType)) && (\n\t\t\t\t<div\n\t\t\t\t\tclassName={classNames(\"panel-header\", {\n\t\t\t\t\t\tinline: isTab,\n\t\t\t\t\t})}\n\t\t\t\t>\n\t\t\t\t\t{translate(attrs.title || attrs.autoTitle)}\n\t\t\t\t\t{attrs.serverType === TYPE.toolbar && (\n\t\t\t\t\t\t<i className=\"fa fa-wrench\" title=\"toolbar\" />\n\t\t\t\t\t)}\n\t\t\t\t\t{attrs.serverType === TYPE.menubar && (\n\t\t\t\t\t\t<i className=\"fa fa-bars\" title=\"menubar\" />\n\t\t\t\t\t)}\n\t\t\t\t</div>\n\t\t\t)}\n\t\t\t{errors.items && !isTab && (\n\t\t\t\t<div className={classNames(\"panel-children-error\")}>{errors.items}</div>\n\t\t\t)}\n\t\t\t{!isTab && (\n\t\t\t\t<Grid\n\t\t\t\t\tdesign={design}\n\t\t\t\t\tclassName=\"panel-body\"\n\t\t\t\t\titems={attrs.items || []}\n\t\t\t\t\tattrs={attrs}\n\t\t\t\t\tpanelId={id}\n\t\t\t\t\t_type={rest._type}\n\t\t\t\t\terrorList={rest.errorList}\n\t\t\t\t\tcanRemove={rest.canRemove}\n\t\t\t\t/>\n\t\t\t)}\n\t\t</React.Fragment>\n\t);\n}\n\nexport default React.memo(PanelComponent);\n","import { getExtendJson2, getWidgetObject } from \"./extensionGenerator\";\nimport { MODEL_TYPE } from \"./../constants\";\nimport Utils from \"./../utils\";\n\nfunction setAttributeOnNewWidget(items, widget, widgetId, state) {\n\tconst widgets = state.widgets;\n\tlet inserted = false;\n\tconst getWidgetName = () => widgets[widgetId] && widgets[widgetId].name;\n\tfor (let i = 0; i < items.length; i++) {\n\t\tconst item = items[i];\n\t\tif (item.name === getWidgetName()) {\n\t\t\titem[widget.attributes.name] = widget.attributes.value;\n\t\t\tinserted = true;\n\t\t}\n\t\tif (inserted) {\n\t\t\tbreak;\n\t\t}\n\t\tif (item.items && item.items.length) {\n\t\t\tconst _inserted = setAttributeOnNewWidget(\n\t\t\t\titem.items,\n\t\t\t\twidget,\n\t\t\t\twidgetId,\n\t\t\t\tstate\n\t\t\t);\n\t\t\tif (_inserted) {\n\t\t\t\tinserted = _inserted;\n\t\t\t\tbreak;\n\t\t\t}\n\t\t}\n\t}\n\treturn inserted;\n}\n\nexport function generateExtension(list, state) {\n\tconst cleatVirtualAction = () => {\n\t\tconst exemptedAttributes = [\n\t\t\t\"widgetAttrs\",\n\t\t\t\"items\",\n\t\t\t\"current\",\n\t\t\t\"elements\",\n\t\t\t\"tz\",\n\t\t\t\"targetModel\",\n\t\t\t\"_type\",\n\t\t];\n\t\t[...list].forEach((item, i) => {\n\t\t\tif (item.name === \"insert\") {\n\t\t\t\tconst id = item.id;\n\t\t\t\tconst removeIndex = list.findIndex(\n\t\t\t\t\t(item) => item.name === \"replace\" && item.id === id && !item.target\n\t\t\t\t);\n\t\t\t\tconst insertIndex = list.findIndex(\n\t\t\t\t\t(item) => item.id === id && item.name === \"insert\"\n\t\t\t\t);\n\t\t\t\tif (removeIndex !== -1) {\n\t\t\t\t\tlist.splice(removeIndex, 1);\n\t\t\t\t\tlist.splice(insertIndex, 1);\n\t\t\t\t}\n\t\t\t}\n\t\t\tif (item.name === \"attribute\") {\n\t\t\t\tconst id = item.id;\n\t\t\t\t// set blank values for default value\n\t\t\t\tif (\n\t\t\t\t\titem.attributes &&\n\t\t\t\t\tUtils.isDefaultValue(item.attributes.name, item.attributes.value)\n\t\t\t\t) {\n\t\t\t\t\tconst attrIndex = list.findIndex(\n\t\t\t\t\t\t(e) =>\n\t\t\t\t\t\t\te.id === id &&\n\t\t\t\t\t\t\te.name === \"attribute\" &&\n\t\t\t\t\t\t\te.attributes.name === item.attributes.name\n\t\t\t\t\t);\n\t\t\t\t\tlist.splice(attrIndex, 1, {\n\t\t\t\t\t\t...list[attrIndex],\n\t\t\t\t\t\tattributes: {\n\t\t\t\t\t\t\t...list[attrIndex].attributes,\n\t\t\t\t\t\t\tvalue: item.attributes.value,\n\t\t\t\t\t\t},\n\t\t\t\t\t});\n\t\t\t\t}\n\t\t\t\tif (\n\t\t\t\t\titem.attributes &&\n\t\t\t\t\texemptedAttributes.includes(item.attributes.name)\n\t\t\t\t) {\n\t\t\t\t\tconst attrIndex = list.findIndex(\n\t\t\t\t\t\t(item) =>\n\t\t\t\t\t\t\titem.id === id &&\n\t\t\t\t\t\t\titem.name === \"attribute\" &&\n\t\t\t\t\t\t\texemptedAttributes.includes(item.attributes.name)\n\t\t\t\t\t);\n\t\t\t\t\tlist.splice(attrIndex, 1);\n\t\t\t\t} else {\n\t\t\t\t\tlet processed = false;\n\t\t\t\t\tconst getWidgetName = () =>\n\t\t\t\t\t\tstate.widgets[id] && state.widgets[id].name;\n\t\t\t\t\tfor (let k = 0; k < state.extensionMoves.length; k++) {\n\t\t\t\t\t\tconst move = state.extensionMoves[k];\n\t\t\t\t\t\tif (move.name === \"insert\") {\n\t\t\t\t\t\t\tconst { elements } = move;\n\t\t\t\t\t\t\tfor (let j = 0; j < elements.length; j++) {\n\t\t\t\t\t\t\t\tconst element = elements[j];\n\t\t\t\t\t\t\t\tif (element.name === getWidgetName()) {\n\t\t\t\t\t\t\t\t\tstate.extensionMoves[k].elements[j][item.attributes.name] =\n\t\t\t\t\t\t\t\t\t\titem.attributes.value;\n\t\t\t\t\t\t\t\t\tprocessed = true;\n\t\t\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\tif (element.items && element.items.length) {\n\t\t\t\t\t\t\t\t\tlet inserted = setAttributeOnNewWidget(\n\t\t\t\t\t\t\t\t\t\telement.items,\n\t\t\t\t\t\t\t\t\t\titem,\n\t\t\t\t\t\t\t\t\t\tid,\n\t\t\t\t\t\t\t\t\t\tstate\n\t\t\t\t\t\t\t\t\t);\n\t\t\t\t\t\t\t\t\tif (inserted) {\n\t\t\t\t\t\t\t\t\t\tprocessed = true;\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t\tif (processed) {\n\t\t\t\t\t\t\tconst attrIndex = list.findIndex(\n\t\t\t\t\t\t\t\t(item) => item.id === id && item.name === \"attribute\"\n\t\t\t\t\t\t\t);\n\t\t\t\t\t\t\tlist.splice(attrIndex, 1);\n\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t});\n\t};\n\tcleatVirtualAction();\n\tstate.extensionMoves.push(...list);\n}\n\nconst generateNestedView = (items) => {\n\tconst _items = items.map((item) => {\n\t\tlet _subItems = [];\n\t\tif (item.items) {\n\t\t\t_subItems = generateNestedView(item.items);\n\t\t}\n\t\treturn getWidgetObject(\n\t\t\t{ ...item, elements: _subItems },\n\t\t\t[],\n\t\t\tnull,\n\t\t\tMODEL_TYPE.BASE\n\t\t);\n\t});\n\n\treturn _items;\n};\n\nexport function getXML(extensionMoves, state) {\n\tconst patches = extensionMoves\n\t\t.map((move) => {\n\t\t\tlet fields;\n\t\t\tif (move.name === \"insert\") {\n\t\t\t\tfields = move.elements\n\t\t\t\t\t.map((field) => {\n\t\t\t\t\t\tif (field && field.items && field.items.length) {\n\t\t\t\t\t\t\tconst f = { ...field };\n\t\t\t\t\t\t\tf.elements = generateNestedView(field.items);\n\t\t\t\t\t\t\treturn f;\n\t\t\t\t\t\t}\n\t\t\t\t\t\treturn field;\n\t\t\t\t\t})\n\t\t\t\t\t.filter((e) => e);\n\t\t\t}\n\t\t\tif (!move.target) {\n\t\t\t\treturn undefined;\n\t\t\t}\n\t\t\treturn getExtendJson2({\n\t\t\t\ttarget: move.target,\n\t\t\t\tposition: move.position,\n\t\t\t\tsource: move.source,\n\t\t\t\ttype: move.name,\n\t\t\t\twidgetAttrs: fields,\n\t\t\t\t...move.attributes,\n\t\t\t});\n\t\t})\n\t\t.filter((e) => e);\n\treturn patches;\n}\n\nfunction insertOnNewPanel(items, widget, panelId, state) {\n\tconst widgets = state.widgets;\n\tlet inserted = false;\n\tconst getPanelName = () => widgets[panelId].name;\n\tfor (let i = 0; i < items.length; i++) {\n\t\tconst item = items[i];\n\t\tif (item.name === getPanelName()) {\n\t\t\tif (item.items) {\n\t\t\t\titem.items.push(widget);\n\t\t\t} else {\n\t\t\t\titem.items = [widget];\n\t\t\t}\n\t\t\tinserted = true;\n\t\t}\n\t\tif (inserted) {\n\t\t\tbreak;\n\t\t}\n\t\tif (item.items && item.items.length) {\n\t\t\tconst _inserted = insertOnNewPanel(item.items, widget, panelId, state);\n\t\t\tif (_inserted) {\n\t\t\t\tinserted = _inserted;\n\t\t\t\tbreak;\n\t\t\t}\n\t\t}\n\t}\n\treturn inserted;\n}\n\nexport function processMoves(state, widget, id, panelId) {\n\tconst list = [];\n\tlet processed = false;\n\tconst widgets = state.widgets;\n\tconst getPanelName = () => widgets[panelId].name;\n\tfor (let i = 0; i < state.extensionMoves.length; i++) {\n\t\tconst move = state.extensionMoves[i];\n\t\tif (move.name === \"insert\") {\n\t\t\tconst { elements } = move;\n\t\t\tfor (let j = 0; j < elements.length; j++) {\n\t\t\t\tconst element = elements[j];\n\t\t\t\tif (\n\t\t\t\t\telement.name === getPanelName() &&\n\t\t\t\t\telement.items &&\n\t\t\t\t\telement.items.length === 0\n\t\t\t\t) {\n\t\t\t\t\tstate.extensionMoves[i].elements[j].items.push(widget);\n\t\t\t\t\tprocessed = true;\n\t\t\t\t\tbreak;\n\t\t\t\t}\n\t\t\t\tif (element.items && element.items.length) {\n\t\t\t\t\tlet inserted = insertOnNewPanel(\n\t\t\t\t\t\telement.items,\n\t\t\t\t\t\twidget,\n\t\t\t\t\t\tpanelId,\n\t\t\t\t\t\tstate\n\t\t\t\t\t);\n\t\t\t\t\tif (inserted) {\n\t\t\t\t\t\tprocessed = true;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t\tif (processed) {\n\t\t\tbreak;\n\t\t}\n\t}\n\tif (processed) {\n\t\tif (widget.xPath) {\n\t\t\tlist.push({ name: \"replace\", target: widget.xPath });\n\t\t}\n\t}\n\treturn list;\n}\n","import properties from \"./../Properties/list\";\nimport { MODEL_TYPE, TYPE } from \"./../constants\";\nimport { translate } from \"../utils\";\n\nexport function validate(field, modelType, isCustomField = false) {\n\tconst errors = {};\n\tlet selectedType =\n\t\tfield.serverType === \"field\" ? field.type : field.serverType || field.type;\n\tselectedType = selectedType && selectedType.toLowerCase().replace(/_/g, \"-\");\n\tlet property = properties.find((option) => option.type === selectedType);\n\tif (selectedType === \"form\") {\n\t\tif (modelType === MODEL_TYPE.CUSTOM) {\n\t\t\tproperty = properties.find((option) => option.type === \"modelForm\");\n\t\t}\n\t}\n\tif (\n\t\t!isCustomField &&\n\t\tmodelType === MODEL_TYPE.BASE &&\n\t\t[\n\t\t\tTYPE.panel,\n\t\t\tTYPE.panelStack,\n\t\t\tTYPE.tabs,\n\t\t\tTYPE.menu,\n\t\t\tTYPE.menubar,\n\t\t\tTYPE.toolbar,\n\t\t].includes(selectedType)\n\t) {\n\t\tif (field.items && field.items.length === 0) {\n\t\t\tconst message =\n\t\t\t\tselectedType === TYPE.menu\n\t\t\t\t\t? translate(\"Atleast one menu item required\")\n\t\t\t\t\t: translate(\"Atleast one children required\");\n\t\t\terrors[\"items\"] = message;\n\t\t}\n\t}\n\tif (!property) {\n\t\treturn errors;\n\t}\n\n\tconst widgetAttrs = JSON.parse(field[\"widgetAttrs\"] || \"{}\");\n\tconst propertyList = Object.keys(property.value).reduce((lst = [], key) => {\n\t\treturn [...lst, ...property.value[key]];\n\t}, []);\n\tpropertyList.forEach((property) => {\n\t\tconst addErrorMessage = () => {\n\t\t\terrors[property.name] = `${translate(\n\t\t\t\tproperty.title || property.name\n\t\t\t)} ${translate(\"required\")}`;\n\t\t};\n\t\tif (\n\t\t\t(property.requiredFor &&\n\t\t\t\tproperty.requiredFor.includes(selectedType) &&\n\t\t\t\t!field[property.name]) ||\n\t\t\t(property.required && !field[property.name])\n\t\t) {\n\t\t\taddErrorMessage();\n\t\t}\n\t\tlet value = false;\n\t\tproperty?.requiredWhen &&\n\t\t\tproperty.requiredWhen.every((prop) => {\n\t\t\t\tvalue =\n\t\t\t\t\tprop?.parentField === \"widgetAttrs\"\n\t\t\t\t\t\t? prop.type === \"boolean\"\n\t\t\t\t\t\t\t? JSON.parse(widgetAttrs[prop.name] || \"false\")\n\t\t\t\t\t\t\t: widgetAttrs[prop.name]\n\t\t\t\t\t\t: field[prop.name];\n\t\t\t\tif (value) return false;\n\t\t\t\treturn true;\n\t\t\t});\n\t\tif (property.requiredWhen && value && !field[property.name]) {\n\t\t\tif (field.isSelectionField) {\n\t\t\t\treturn addErrorMessage();\n\t\t\t} else if ([\"menuBuilderTitle\", \"title\"].includes(property.name)) {\n\t\t\t\treturn addErrorMessage();\n\t\t\t} else if (\n\t\t\t\t[\"selectionText\"].includes(property.name) &&\n\t\t\t\tfield.updateSelection\n\t\t\t) {\n\t\t\t\treturn addErrorMessage();\n\t\t\t}\n\t\t}\n\t\tif (property.regex) {\n\t\t\tconst re = new RegExp(property.regex);\n\t\t\tif (!re.test(field[property.name]) && !errors[property.name]) {\n\t\t\t\terrors[property.name] = translate(property.regexErrorMessage);\n\t\t\t}\n\t\t}\n\t});\n\treturn errors;\n}\n\nexport function validateParentPanelItems(state, panelId) {\n\tconst panel = state.widgets[panelId];\n\tconst errors = state.errorList[panelId] || {};\n\tif (panel) {\n\t\tif (panel.items && panel.items.length > 0) {\n\t\t\tif (errors.items) {\n\t\t\t\tdelete errors.items;\n\t\t\t}\n\t\t} else {\n\t\t\terrors.items = translate(\"Atleast one children required\");\n\t\t}\n\t\tif (Object.keys(errors).length) {\n\t\t\tstate.errorList[panelId] = errors;\n\t\t} else {\n\t\t\tdelete state.errorList[panelId];\n\t\t}\n\t}\n}\n\nexport function validateOnRemove(state, id) {\n\tconst errors = state.errorList[id];\n\tif (errors) {\n\t\tdelete state.errorList[id];\n\t}\n}\n","import fontAwesomeList from \"./fa-icons\";\nimport {\n\tName,\n\tType,\n\tTitle,\n\tDefaultValue,\n\tStudioApp,\n\tHelp,\n\tSequence,\n\tRoles,\n\tValueExpression,\n\tSelection,\n\tWidget,\n\tOnChange,\n\tMin,\n\tMax,\n\tJsonRelationalField,\n\tDomain,\n\tTargetJsonModel,\n\tTargetModel,\n\tGridView,\n\tFormView,\n\tRequired,\n\tColumnSequence,\n\tReadOnly,\n\tHidden,\n\tVisibleInGrid,\n\tShowIf,\n\tHideIf,\n\tIf,\n\tRequiredIf,\n\tReadOnlyIf,\n\tIncludeIf,\n\tValidIf,\n\tColSpan,\n\tShowTitle,\n\tOnNew,\n\tEditable,\n\tDummyType,\n\tCanSearch,\n\tAction,\n\tIfModule,\n\tOnlyIf,\n\tHeight,\n\tField,\n\tCanMove,\n\tOrderBy,\n\tIncludeFrom,\n\tIncludeView,\n\tIsGenerateMenu,\n\tMenuBuilderParent,\n\tMenuBuilderTitle,\n\tModel,\n\tStrong,\n\tColor,\n\tBackground,\n\tItemSpan,\n\tCss,\n\tPrompt,\n\tSelectionIn,\n\tValueAdd,\n\tValueDel,\n\tActive,\n\tRefresh,\n\tValue,\n\tSidebar,\n\tCanCollapse,\n\tCollapseIf,\n} from \"./propertyFields\";\nimport {\n\tStringField,\n\tIntegerField,\n\tStaticSelectField,\n\tSelectField,\n\tBooleanField,\n} from \"./fieldTypes\";\nimport { MODEL_TYPE } from \"./../constants\";\n\n/** Options */\nconst stringOption = {\n\toverview: [\n\t\tName({ existsCheck: true }),\n\t\tType,\n\t\tTitle,\n\t\tDefaultValue,\n\t\tStudioApp,\n\t\tHelp,\n\t\tSequence,\n\t],\n\tfieldOptions: [\n\t\tSelection,\n\t\tSelectionIn,\n\t\tWidget,\n\t\tOnChange,\n\t\tMin,\n\t\tMax,\n\t\tStringField({ name: \"regex\", dependModelType: MODEL_TYPE.CUSTOM }),\n\t\tValue,\n\t],\n\tuiOptions: [\n\t\tRequired,\n\t\tReadOnly,\n\t\tBooleanField({\n\t\t\tname: \"nameField\",\n\t\t\ttitle: \"Name column\",\n\t\t\tdependModelType: MODEL_TYPE.CUSTOM,\n\t\t}),\n\t\tHidden,\n\t\tVisibleInGrid,\n\t\tColumnSequence,\n\t\tCss,\n\t],\n\tconditions: [\n\t\tOnlyIf,\n\t\tShowIf,\n\t\tHideIf,\n\t\tRequiredIf,\n\t\tReadOnlyIf,\n\t\tIncludeIf,\n\t\tValidIf,\n\t],\n\tvalueExpr: [ValueExpression],\n\troles: [Roles],\n\twidgetAttributes: [\n\t\tColSpan,\n\t\tShowTitle,\n\t\tBooleanField({\n\t\t\tname: \"multiline\",\n\t\t\tparentField: \"widgetAttrs\",\n\t\t\tmodelType: MODEL_TYPE.CUSTOM,\n\t\t\tdependModelType: MODEL_TYPE.CUSTOM,\n\t\t}),\n\t],\n};\n\nconst integerOption = {\n\toverview: [\n\t\tName({ existsCheck: true }),\n\t\tType,\n\t\tTitle,\n\t\tDefaultValue,\n\t\tStudioApp,\n\t\tHelp,\n\t\tSequence,\n\t],\n\tfieldOptions: [Selection, SelectionIn, Widget, OnChange, Min, Max, Value],\n\tuiOptions: [Required, ReadOnly, Hidden, VisibleInGrid, ColumnSequence, Css],\n\tconditions: [\n\t\tOnlyIf,\n\t\tShowIf,\n\t\tHideIf,\n\t\tRequiredIf,\n\t\tReadOnlyIf,\n\t\tIncludeIf,\n\t\tValidIf,\n\t],\n\tvalueExpr: [ValueExpression],\n\troles: [Roles],\n\twidgetAttributes: [ColSpan, ShowTitle],\n};\n\nconst decimalOption = {\n\toverview: [\n\t\tName({ existsCheck: true }),\n\t\tType,\n\t\tTitle,\n\t\tDefaultValue,\n\t\tStudioApp,\n\t\tHelp,\n\t\tSequence,\n\t],\n\tfieldOptions: [\n\t\tWidget,\n\t\tOnChange,\n\t\tMin,\n\t\tMax,\n\t\tIntegerField({\n\t\t\tname: \"precision\",\n\t\t\tdefault: 6,\n\t\t}),\n\t\tIntegerField({\n\t\t\tname: \"scale\",\n\t\t\tdefault: 2,\n\t\t}),\n\t\tValue,\n\t],\n\tuiOptions: [Required, ReadOnly, Hidden, VisibleInGrid, ColumnSequence, Css],\n\tconditions: [\n\t\tOnlyIf,\n\t\tShowIf,\n\t\tHideIf,\n\t\tRequiredIf,\n\t\tReadOnlyIf,\n\t\tIncludeIf,\n\t\tValidIf,\n\t],\n\tvalueExpr: [ValueExpression],\n\troles: [Roles],\n\twidgetAttributes: [ColSpan, ShowTitle],\n};\n\nconst booleanOption = {\n\toverview: [\n\t\tName({ existsCheck: true }),\n\t\tType,\n\t\tTitle,\n\t\tDefaultValue,\n\t\tStudioApp,\n\t\tHelp,\n\t\tSequence,\n\t],\n\tfieldOptions: [Widget, OnChange, Value],\n\tuiOptions: [Required, ReadOnly, Hidden, VisibleInGrid, ColumnSequence, Css],\n\tconditions: [\n\t\tOnlyIf,\n\t\tShowIf,\n\t\tHideIf,\n\t\tRequiredIf,\n\t\tReadOnlyIf,\n\t\tIncludeIf,\n\t\tValidIf,\n\t],\n\tvalueExpr: [ValueExpression],\n\troles: [Roles],\n\twidgetAttributes: [ColSpan, ShowTitle],\n};\n\nconst datetimeOption = {\n\toverview: [\n\t\tName({ existsCheck: true }),\n\t\tType,\n\t\tTitle,\n\t\tDefaultValue,\n\t\tStudioApp,\n\t\tHelp,\n\t\tSequence,\n\t],\n\tfieldOptions: [Widget, OnChange, Value],\n\tuiOptions: [Required, ReadOnly, Hidden, VisibleInGrid, ColumnSequence, Css],\n\tconditions: [\n\t\tOnlyIf,\n\t\tShowIf,\n\t\tHideIf,\n\t\tRequiredIf,\n\t\tReadOnlyIf,\n\t\tIncludeIf,\n\t\tValidIf,\n\t],\n\tvalueExpr: [ValueExpression],\n\troles: [Roles],\n\twidgetAttributes: [ColSpan, ShowTitle],\n};\n\nconst panelOption = {\n\toverview: [Name({ existsCheck: true }), Type, Title, StudioApp],\n\tuiOptions: [\n\t\tReadOnly,\n\t\tHidden,\n\t\tSidebar,\n\t\tCanCollapse,\n\t\tCollapseIf,\n\t\tColumnSequence,\n\t\tCss,\n\t\tActive,\n\t],\n\tconditions: [OnlyIf, ShowIf, HideIf, ReadOnlyIf],\n\troles: [Roles],\n\twidgetAttributes: [ColSpan, ItemSpan, ShowTitle],\n};\n\nconst panelStackOption = {\n\toverview: [Name({ existsCheck: true }), Type, StudioApp],\n\tuiOptions: [\n\t\tReadOnly,\n\t\tHidden,\n\t\tSidebar,\n\t\tBooleanField({\n\t\t\tname: \"canCollapse\",\n\t\t\tparentField: \"widgetAttrs\",\n\t\t\tmodelType: MODEL_TYPE.CUSTOM,\n\t\t\tdependModelType: MODEL_TYPE.CUSTOM,\n\t\t}),\n\t\tStringField({\n\t\t\tname: \"collapseIf\",\n\t\t\tparentField: \"widgetAttrs\",\n\t\t\tmodelType: MODEL_TYPE.CUSTOM,\n\t\t\tdependModelType: MODEL_TYPE.CUSTOM,\n\t\t}),\n\t\tColumnSequence,\n\t\tCss,\n\t],\n\tconditions: [ShowIf, HideIf, ReadOnlyIf],\n\troles: [Roles],\n\twidgetAttributes: [ColSpan],\n};\n\nconst panelTabOption = {\n\toverview: [Name({ existsCheck: true }), Type, Title, StudioApp],\n\tuiOptions: [ReadOnly, Hidden, ColumnSequence, Css],\n\tconditions: [ShowIf, HideIf, ReadOnlyIf],\n\troles: [Roles],\n\twidgetAttributes: [ShowTitle],\n};\n\nconst buttonOption = {\n\toverview: [\n\t\tName({ existsCheck: true }),\n\t\tType,\n\t\tTitle,\n\t\tStudioApp,\n\t\tHelp,\n\t\tSequence,\n\t\tPrompt,\n\t],\n\tfieldOptions: [\n\t\tWidget,\n\t\tSelectField({\n\t\t\tname: \"onClick\",\n\t\t\ttitle: \"On click\",\n\t\t\trequired: true,\n\t\t\tref: \"com.axelor.meta.db.MetaAction\",\n\t\t\trequiredFor: [\"button\"],\n\t\t\tdependModelType: MODEL_TYPE.CUSTOM,\n\t\t\tmultiple: true,\n\t\t\tcommaSeparated: true,\n\t\t\tcanAddNew: true,\n\t\t}),\n\t],\n\tuiOptions: [ReadOnly, Hidden, VisibleInGrid, ColumnSequence, Css],\n\tconditions: [\n\t\tOnlyIf,\n\t\tShowIf,\n\t\tHideIf,\n\t\tRequiredIf,\n\t\tReadOnlyIf,\n\t\tIncludeIf,\n\t\tValidIf,\n\t],\n\troles: [Roles],\n\twidgetAttributes: [\n\t\tColSpan,\n\t\tShowTitle,\n\t\tStaticSelectField({\n\t\t\tname: \"icon\",\n\t\t\ttitle: \"Icon\",\n\t\t\tdata: fontAwesomeList,\n\t\t\thelper: \"https://fontawesome.com/cheatsheet\",\n\t\t\tparentField: \"widgetAttrs\",\n\t\t\tmodelType: MODEL_TYPE.CUSTOM,\n\t\t}),\n\t],\n};\n\nconst seperatorOption = {\n\toverview: [\n\t\tName({ existsCheck: true }),\n\t\tType,\n\t\tTitle,\n\t\tDefaultValue,\n\t\tStudioApp,\n\t\tHelp,\n\t\tSequence,\n\t],\n\tuiOptions: [Hidden, ColumnSequence, Css],\n\tconditions: [\n\t\tOnlyIf,\n\t\tShowIf,\n\t\tHideIf,\n\t\tRequiredIf,\n\t\tReadOnlyIf,\n\t\tIncludeIf,\n\t\tValidIf,\n\t],\n\troles: [Roles],\n\twidgetAttributes: [ColSpan],\n};\n\nconst spacerOption = {\n\toverview: [Name({ existsCheck: true }), Type, StudioApp],\n\tfieldOptions: [],\n\tuiOptions: [Hidden, ColumnSequence, Css],\n\tconditions: [OnlyIf, ShowIf, HideIf, ValidIf],\n\troles: [Roles],\n\twidgetAttributes: [ColSpan],\n};\n\nconst labelOption = {\n\toverview: [Name({ existsCheck: true }), Type, Title, StudioApp],\n\tfieldOptions: [Widget],\n\tuiOptions: [Required, Hidden, ColumnSequence, Css],\n\tconditions: [OnlyIf, ShowIf, HideIf, RequiredIf, ReadOnlyIf, ValidIf],\n\tvalueExpr: [ValueExpression],\n\troles: [Roles],\n\twidgetAttributes: [ColSpan, ShowTitle],\n};\n\nconst viewerOption = {\n\toverview: [Name({ existsCheck: true }), Type, Title, StudioApp],\n\tfieldOptions: [Widget],\n\tuiOptions: [Required, Hidden, ReadOnly, ColumnSequence, Css],\n\tconditions: [ShowIf, HideIf, RequiredIf, ReadOnlyIf, ValidIf],\n\tvalueExpr: [ValueExpression],\n\troles: [Roles],\n\twidgetAttributes: [ColSpan, ShowTitle],\n};\n\nconst manyToOneOption = {\n\toverview: [\n\t\tName({ existsCheck: true }),\n\t\tType,\n\t\tTitle,\n\t\tDefaultValue,\n\t\tStudioApp,\n\t\tHelp,\n\t\tSequence,\n\t],\n\tfieldOptions: [\n\t\tWidget,\n\t\tOnChange,\n\t\tJsonRelationalField,\n\t\tDomain,\n\t\tTargetModel,\n\t\tGridView,\n\t\tFormView,\n\t\tValue,\n\t],\n\tuiOptions: [Required, ReadOnly, Hidden, VisibleInGrid, ColumnSequence, Css],\n\tconditions: [\n\t\tOnlyIf,\n\t\tShowIf,\n\t\tHideIf,\n\t\tRequiredIf,\n\t\tReadOnlyIf,\n\t\tIncludeIf,\n\t\tValidIf,\n\t],\n\tvalueExpr: [ValueExpression],\n\troles: [Roles],\n\twidgetAttributes: [ColSpan, ShowTitle],\n};\n\nconst manyToManyAndOneToManyOption = {\n\toverview: [\n\t\tName({ existsCheck: true }),\n\t\tType,\n\t\tTitle,\n\t\tStudioApp,\n\t\tHelp,\n\t\tSequence,\n\t],\n\tfieldOptions: [\n\t\tWidget,\n\t\tOnChange,\n\t\tJsonRelationalField,\n\t\tDomain,\n\t\tTargetModel,\n\t\tGridView,\n\t\tFormView,\n\t\tValueAdd,\n\t\tValueDel,\n\t\tValue,\n\t],\n\tuiOptions: [Required, ReadOnly, Hidden, VisibleInGrid, ColumnSequence, Css],\n\tconditions: [\n\t\tOnlyIf,\n\t\tShowIf,\n\t\tHideIf,\n\t\tRequiredIf,\n\t\tReadOnlyIf,\n\t\tIncludeIf,\n\t\tValidIf,\n\t],\n\tvalueExpr: [ValueExpression],\n\troles: [Roles],\n\twidgetAttributes: [ColSpan, ShowTitle],\n};\n\nconst customRelationOption = {\n\toverview: [\n\t\tName({ existsCheck: true }),\n\t\tType,\n\t\tTitle,\n\t\tStudioApp,\n\t\tHelp,\n\t\tSequence,\n\t],\n\tfieldOptions: [\n\t\tWidget,\n\t\tOnChange,\n\t\tJsonRelationalField,\n\t\tDomain,\n\t\tTargetJsonModel,\n\t\tValue,\n\t],\n\tuiOptions: [Required, ReadOnly, Hidden, VisibleInGrid, ColumnSequence, Css],\n\tconditions: [\n\t\tOnlyIf,\n\t\tShowIf,\n\t\tHideIf,\n\t\tRequiredIf,\n\t\tReadOnlyIf,\n\t\tIncludeIf,\n\t\tValidIf,\n\t],\n\tvalueExpr: [ValueExpression],\n\troles: [Roles],\n\twidgetAttributes: [ColSpan, ShowTitle],\n};\n\nconst formOption = {\n\toverview: [\n\t\tName({ existsCheck: true }),\n\t\t{ ...Title, required: true },\n\t\tStudioApp,\n\t\tStaticSelectField({\n\t\t\tname: \"formWidth\",\n\t\t\ttitle: \"Form width\",\n\t\t\tdata: [\"large\"],\n\t\t}),\n\t\tStringField({\n\t\t\tname: \"orderBy\",\n\t\t\ttitle: \"Order by\",\n\t\t}),\n\t\tIsGenerateMenu,\n\t\tMenuBuilderParent,\n\t\tMenuBuilderTitle,\n\t],\n\tactions: [\n\t\tSelectField({\n\t\t\ttitle: \"On new\",\n\t\t\tname: \"onNew\",\n\t\t\tref: \"com.axelor.meta.db.MetaAction\",\n\t\t\tdependModelType: MODEL_TYPE.CUSTOM,\n\t\t\tmultiple: true,\n\t\t\tcommaSeparated: true,\n\t\t\tcanAddNew: true,\n\t\t}),\n\t\tSelectField({\n\t\t\ttitle: \"On save\",\n\t\t\tname: \"onSave\",\n\t\t\tref: \"com.axelor.meta.db.MetaAction\",\n\t\t\tdependModelType: MODEL_TYPE.CUSTOM,\n\t\t\tmultiple: true,\n\t\t\tcommaSeparated: true,\n\t\t\tcanAddNew: true,\n\t\t}),\n\t],\n};\n\nconst commonOption = {\n\toverview: [Name(), Type, Title, StudioApp],\n\tuiOptions: [Hidden, VisibleInGrid, ColumnSequence, Css],\n\tconditions: [ShowIf, HideIf, ReadOnlyIf, IncludeIf, ValidIf],\n\twidgetAttributes: [ColSpan, ShowTitle],\n};\n\nconst dummyOption = {\n\toverview: [Name(), DummyType],\n};\nconst viewOption = {\n\toverview: [\n\t\tName({ existsCheck: true }),\n\t\tType,\n\t\t{ ...Title, readOnly: true, translationView: false },\n\t],\n};\n\nconst gridOption = {\n\toverview: [Name({ existsCheck: true }), Type, Title, Model, Editable],\n};\n\nconst panelDashletOption = {\n\toverview: [\n\t\tName({ existsCheck: true }),\n\t\tType,\n\t\tAction,\n\t\tTitle,\n\t\tCanSearch,\n\t\tIfModule,\n\t],\n\tuiOptions: [ReadOnly, Hidden, Height, Css, Refresh],\n\tconditions: [ShowIf, HideIf, ReadOnlyIf],\n\twidgetAttributes: [ColSpan, ShowTitle],\n};\n\nconst menuItemOption = {\n\toverview: [Name({ existsCheck: true }), Type, Action],\n\twidgetAttributes: [ShowTitle],\n};\n\nconst dividerOption = {\n\toverview: [Name({ existsCheck: true }), Type],\n\tconditions: [If, ShowIf, HideIf, IfModule],\n};\n\nconst menuOption = {\n\toverview: [Name({ existsCheck: true }), Type],\n\twidgetAttributes: [ShowTitle],\n\tconditions: [If, IfModule, IncludeIf],\n};\n\nconst panelRelatedOption = {\n\toverview: [Name({ existsCheck: true }), Type, Title, Field, OnNew, OnChange],\n\tuiOptions: [FormView, GridView, Height, Editable, ReadOnly, Hidden, Css],\n\tconditions: [ShowIf, HideIf, ReadOnlyIf, ValidIf, CanMove, OrderBy],\n\twidgetAttributes: [ColSpan, ShowTitle],\n};\n\nconst panelIncludeOption = {\n\toverview: [Type, IncludeView, IncludeFrom, IfModule],\n\twidgetAttributes: [ShowTitle],\n};\n\nconst hiliteOption = {\n\toverview: [Name({ existsCheck: true }), If, Color, Background, Strong, Css],\n};\n\nexport const options = [\n\t{ type: \"form\", value: viewOption },\n\t{ type: \"grid\", value: gridOption },\n\t{ type: \"modelForm\", value: formOption },\n\t{ type: \"string\", value: stringOption },\n\t{ type: \"byte[]\", value: stringOption },\n\t{ type: \"integer\", value: integerOption },\n\t{ type: \"number\", value: integerOption },\n\t{ type: \"decimal\", value: decimalOption },\n\t{ type: \"bigdecimal\", value: decimalOption },\n\t{ type: \"boolean\", value: booleanOption },\n\t{ type: \"datetime\", value: datetimeOption },\n\t{ type: \"localdatetime\", value: datetimeOption },\n\t{ type: \"zoneddatetime\", value: datetimeOption },\n\t{ type: \"date\", value: datetimeOption },\n\t{ type: \"localdate\", value: datetimeOption },\n\t{ type: \"time\", value: datetimeOption },\n\t{ type: \"panel\", value: panelOption, dependModelType: MODEL_TYPE.BASE },\n\t{ type: \"panel-stack\", value: panelStackOption },\n\t{ type: \"panel-tab\", value: panelTabOption },\n\t{ type: \"button\", value: buttonOption },\n\t{ type: \"separator\", value: seperatorOption },\n\t{ type: \"spacer\", value: spacerOption },\n\t{ type: \"label\", value: labelOption },\n\t{ type: \"many-to-one\", value: manyToOneOption },\n\t{ type: \"many-to-many\", value: manyToManyAndOneToManyOption },\n\t{ type: \"one-to-many\", value: manyToManyAndOneToManyOption },\n\t{ type: \"json-many-to-one\", value: customRelationOption },\n\t{ type: \"json-many-to-many\", value: customRelationOption },\n\t{ type: \"json-one-to-many\", value: customRelationOption },\n\t{ type: \"include\", value: formOption },\n\t{ type: \"panel-tabs\", value: panelTabOption, showInCustomField: false },\n\t{ type: \"panel-dashlet\", value: panelDashletOption },\n\t{ type: \"panel-related\", value: panelRelatedOption },\n\t{ type: \"panel-include\", value: panelIncludeOption },\n\t{ type: \"text\", value: commonOption },\n\t{ type: \"long\", value: decimalOption },\n\t{ type: \"panel-dashlet\", value: commonOption },\n\t{ type: \"dashlet\", value: commonOption },\n\t{ type: \"static\", value: commonOption },\n\t{ type: \"one-to-one\", value: manyToOneOption },\n\t{ type: \"binary\", value: commonOption },\n\t{ type: \"field\", value: commonOption },\n\t{ type: \"dummy\", value: dummyOption },\n\t{ type: \"viewer\", value: viewerOption },\n\t{ type: \"editor\", value: labelOption },\n\t{ type: \"menu\", value: menuOption },\n\t{ type: \"item\", value: menuItemOption },\n\t{ type: \"divider\", value: dividerOption },\n\t{ type: \"hilite\", value: hiliteOption },\n];\n\nexport default options;\n","import React from \"react\";\nimport classNames from \"classnames\";\nimport Grid from \"./Grid\";\nimport { translate } from \"../utils\";\nimport { useStore } from \"../store/context\";\n\n/**\n * Menu Component\n * Used As Container to group Field Component like form group\n */\nfunction MenuComponent({ id, attrs, design, isTab = true, ...rest }) {\n\tconst errors = rest.errorList[id] || {};\n\tconst [openMenu, setOpenMenu] = React.useState(false);\n\n\tconst { state } = useStore();\n\n\tconst handleToggleMenu = React.useCallback((e) => {\n\t\te.stopPropagation();\n\t\tsetOpenMenu((m) => !m);\n\t}, []);\n\n\tReact.useEffect(() => {\n\t\tconst { highlightedOption } = state;\n\t\tif ([\"menu\", \"item\"].includes(highlightedOption?.type)) {\n\t\t\tsetOpenMenu(true);\n\t\t}\n\t}, [state]);\n\n\tconst arrow = openMenu ? \"down\" : \"up\";\n\treturn (\n\t\t<React.Fragment>\n\t\t\t<div\n\t\t\t\tclassName={classNames(\"menu-header\", {\n\t\t\t\t\tinline: isTab,\n\t\t\t\t})}\n\t\t\t>\n\t\t\t\t<div className=\"menu-toggle-button\" onClick={handleToggleMenu}>\n\t\t\t\t\t<i className={`fa fa-chevron-${arrow}`} />\n\t\t\t\t</div>\n\t\t\t\t<span>{translate(attrs.title || attrs.autoTitle)}</span>\n\t\t\t\t<div className=\"menu-toggle-button\" onClick={handleToggleMenu}>\n\t\t\t\t\t<i className={`fa fa-chevron-${arrow}`} />\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t\t{errors.items && !isTab && (\n\t\t\t\t<div className={classNames(\"panel-children-error\")}>{errors.items}</div>\n\t\t\t)}\n\t\t\t{openMenu && (\n\t\t\t\t<Grid\n\t\t\t\t\tdesign={design}\n\t\t\t\t\tclassName=\"panel-body\"\n\t\t\t\t\titems={attrs.items || []}\n\t\t\t\t\tattrs={attrs}\n\t\t\t\t\tpanelId={id}\n\t\t\t\t\t_type={rest._type}\n\t\t\t\t\terrorList={rest.errorList}\n\t\t\t\t\tcanRemove={rest.canRemove}\n\t\t\t\t/>\n\t\t\t)}\n\t\t</React.Fragment>\n\t);\n}\n\nexport default React.memo(MenuComponent);\n","import Field from \"./Field\";\nimport Panel from \"./Panel\";\nimport TabPanel from \"./TabPanel\";\nimport Form from \"./Form\";\nimport Menu from \"./Menu\";\n\n// common Registery contains all Form Components\nconst Registery = {\n\tfield: { component: Field, props: { className: \"field-container\" } },\n\tdump_field: {\n\t\tcomponent: Field,\n\t\tprops: { className: \"field-container dump\" },\n\t},\n\tpanel: { component: Panel, props: { className: \"panel\" } },\n\tmenubar: { component: Panel, props: { className: \"panel menubar\" } },\n\tmenu: { component: Menu, props: { className: \"panel menu\" } },\n\ttoolbar: { component: Panel, props: { className: \"panel toolbar\" } },\n\t\"panel-stack\": { component: Panel, props: { className: \"panel\" } },\n\t\"panel-include\": { component: Panel, props: { className: \"panel\" } },\n\tform: { component: Form, props: { className: \"form-layout\" } },\n\tcustomForm: { component: Form, props: { className: \"form-layout\" } },\n\t\"panel-tabs\": {\n\t\tcomponent: TabPanel,\n\t\tprops: { className: \"panel tabs-panel\" },\n\t},\n};\n\nexport default Registery;\n","import React from \"react\";\nimport Popover from \"@material-ui/core/Popover\";\nimport Typography from \"@material-ui/core/Typography\";\nimport Box from \"@material-ui/core/Box\";\nimport Button from \"@material-ui/core/Button\";\nimport { makeStyles } from \"@material-ui/core/styles\";\n\nimport { translate } from \"../utils\";\n\nconst useStyles = makeStyles(() => ({\n\ttext: {\n\t\ttextAlign: \"center\",\n\t\tfontSize: 14,\n\t},\n\tdialogContainer: {\n\t\tdisplay: \"flex\",\n\t\talignItems: \"center\",\n\t\tjustifyContent: \"center\",\n\t\tflexDirection: \"column\",\n\t},\n\tbutton: {\n\t\twidth: \"min-content\",\n\t\tfontWeight: 600,\n\t\tcolor: \"#fff\",\n\t\tborderRadius: 25,\n\t\tbackgroundColor: \"#0275d8\",\n\t\tpadding: 0,\n\t\toverflow: \"hidden\",\n\t\ttextOverflow: \"ellipsis\",\n\t\ttextTransform: \"capitalize\",\n\t\t\"&:hover\": {\n\t\t\tbackgroundColor: \"#0275d8\",\n\t\t},\n\t},\n\tpaper: {\n\t\tborderRadius: 5,\n\t\tpadding: 15,\n\t\tboxShadow: \"rgb(0 0 0 / 16%) 0px 3px 6px, rgb(0 0 0 / 23%) 0px 3px 6px\",\n\t},\n}));\n\nexport default function PopoverAlert({ anchorEl, handleClose, handleYes }) {\n\tconst classes = useStyles();\n\n\tconst open = Boolean(anchorEl);\n\tconst id = open ? \"simple-popover\" : undefined;\n\n\treturn (\n\t\t<Popover\n\t\t\tid={id}\n\t\t\topen={open}\n\t\t\tanchorEl={anchorEl}\n\t\t\tonClose={handleClose}\n\t\t\tclasses={{ paper: classes.paper }}\n\t\t\tanchorOrigin={{\n\t\t\t\tvertical: \"bottom\",\n\t\t\t\thorizontal: \"right\",\n\t\t\t}}\n\t\t\ttransformOrigin={{\n\t\t\t\tvertical: \"top\",\n\t\t\t\thorizontal: \"right\",\n\t\t\t}}\n\t\t>\n\t\t\t<Box className={classes.dialogContainer}>\n\t\t\t\t<Typography className={classes.text}>\n\t\t\t\t\t{translate(\"Sure want to delete?\")}\n\t\t\t\t</Typography>\n\t\t\t\t<Box>\n\t\t\t\t\t<Button\n\t\t\t\t\t\tsize=\"small\"\n\t\t\t\t\t\tclassName={classes.button}\n\t\t\t\t\t\tstyle={{\n\t\t\t\t\t\t\tmarginRight: 4,\n\t\t\t\t\t\t}}\n\t\t\t\t\t\tonClick={handleYes}\n\t\t\t\t\t>\n\t\t\t\t\t\t{translate(\"Yes\")}\n\t\t\t\t\t</Button>\n\t\t\t\t\t<Button size=\"small\" className={classes.button} onClick={handleClose}>\n\t\t\t\t\t\t{translate(\"No\")}\n\t\t\t\t\t</Button>\n\t\t\t\t</Box>\n\t\t\t</Box>\n\t\t</Popover>\n\t);\n}\n","import React from \"react\";\nimport classNames from \"classnames\";\nimport { compose } from \"recompose\";\nimport { DragSource, DropTarget } from \"react-dnd\";\n\nimport { useStore } from \"../store/context\";\nimport { TYPE as WIDGET_TYPE, IDS, MODEL_TYPE, FIELD_TYPE } from \"../constants\";\nimport Registry from \"./Registery\";\nimport { translate } from \"../utils\";\nimport PopoverAlert from \"./PopoverAlert\";\n\n// Unique Type for Widget\nconst TYPE = Symbol();\n\n// DragSource\nconst CardSource = {\n\t// evaluate widget is draggable or not\n\tcanDrag(props) {\n\t\tconst { state } = props;\n\t\tconst isCustomField = props._type === \"customField\";\n\t\t// temporary restrict real view movement\n\t\tif (\n\t\t\tstate.modelType === MODEL_TYPE.BASE &&\n\t\t\t!isCustomField &&\n\t\t\t!props.isPalleteField\n\t\t) {\n\t\t\treturn;\n\t\t}\n\t\treturn !(\n\t\t\tprops.id === IDS.dumpField ||\n\t\t\tprops.attrs.draggable === false ||\n\t\t\tprops.attrs.type === \"spacer\" ||\n\t\t\tprops.attrs.serverType === \"spacer\" ||\n\t\t\tprops.attrs.type === WIDGET_TYPE.form\n\t\t);\n\t},\n\t// event, raise when start dragging widget\n\tbeginDrag(props) {\n\t\tconst _props = { ...props };\n\t\tconst isPanel = _props.attrs.serverType === \"panel\";\n\t\tconst isGrid = [\"one-to-many\", \"many-to-many\"].includes(\n\t\t\t_props.attrs.serverType\n\t\t);\n\t\tif (\n\t\t\tprops.state.modelType === MODEL_TYPE.CUSTOM ||\n\t\t\tprops._type === \"customField\"\n\t\t) {\n\t\t\t_props.attrs = {\n\t\t\t\t..._props.attrs,\n\t\t\t\tmodel: \"com.axelor.meta.db.MetaJsonRecord\",\n\t\t\t\tmodelField: \"attrs\",\n\t\t\t\twidgetAttrs: JSON.stringify({\n\t\t\t\t\t...JSON.parse(_props.attrs.widgetAttrs || \"{}\"),\n\t\t\t\t\tcolSpan:\n\t\t\t\t\t\tJSON.parse(_props.attrs.widgetAttrs || \"{}\").colSpan ||\n\t\t\t\t\t\t(isGrid ? 6 : undefined),\n\t\t\t\t\tshowTitle: isPanel ? \"false\" : true,\n\t\t\t\t\tsidebar:\n\t\t\t\t\t\tJSON.parse(_props.attrs.widgetAttrs || \"{}\").sidebar ||\n\t\t\t\t\t\t(isPanel ? false : undefined),\n\t\t\t\t}),\n\t\t\t};\n\t\t} else if (props.state.modelType === MODEL_TYPE.BASE) {\n\t\t\tif (_props.attrs.isModelField) {\n\t\t\t\t_props.attrs = {\n\t\t\t\t\t..._props.attrs,\n\t\t\t\t\t...(_props.attrs.serverType !== \"field\" && {\n\t\t\t\t\t\ttype: _props.attrs.serverType,\n\t\t\t\t\t}),\n\t\t\t\t\tserverType: \"field\",\n\t\t\t\t};\n\t\t\t}\n\t\t\t_props.attrs = {\n\t\t\t\t..._props.attrs,\n\t\t\t\twidgetAttrs: JSON.stringify({\n\t\t\t\t\t...JSON.parse(_props.attrs.widgetAttrs || \"{}\"),\n\t\t\t\t\tshowTitle: isPanel ? \"false\" : true,\n\t\t\t\t}),\n\t\t\t};\n\t\t}\n\t\tprops.onDrag(props.id, { props: _props });\n\t\treturn { ...props };\n\t},\n\t// event, raise when dragging widget is droped on target or somewhere else\n\t// reset tasks\n\tendDrag(props, monitor) {\n\t\t// check widget is dropped or not, if not reset back to its position for existing element\n\t\t// for new element, remove it from schema\n\t\tprops.onDrag(null, {\n\t\t\tisDrop: monitor.didDrop(),\n\t\t\tprops: {},\n\t\t\tnewProps: monitor.getItem(),\n\t\t});\n\t},\n\t// currently dragged element, special case for nested drag source\n\tisDragging(props, monitor) {\n\t\treturn props.id === monitor.getItem().id;\n\t},\n};\n\n// DropTarget\nconst CardTarget = {\n\t// event, raised when one widget is hover on another widget\n\n\thover(props, monitor) {\n\t\tlet {\n\t\t\tindex: maybeOutdatedDragIndex,\n\t\t\t/*  WARNING\n\t\t\tIf layout changes while the element is being dragged, then index will be outdated\n\t\t\trely on props.meta.grid?.find(item=>item.id === dragId).?cellIndice for grid layouts\n\t\t\t*/\n\t\t\tpanelId: dragPanelId,\n\t\t\tid: dragId,\n\t\t\tattrs: dragAttrs,\n\t\t} = monitor.getItem();\n\t\tlet {\n\t\t\tindex: hoverIndex,\n\t\t\tpanelId: hoverPanelId,\n\t\t\tid: hoverId,\n\t\t\tattrs: hoverAttrs,\n\t\t\tstate,\n\t\t\tmeta,\n\t\t\tsetHoverAttr,\n\t\t\tisTab,\n\t\t\tpanelId,\n\t\t} = props;\n\t\tconst panelSet = [\n\t\t\tWIDGET_TYPE.panel,\n\t\t\tWIDGET_TYPE.panelDashlet,\n\t\t\tWIDGET_TYPE.panelRelated,\n\t\t\tWIDGET_TYPE.panelInclude,\n\t\t];\n\t\tconst isCustomField = props._type === \"customField\";\n\t\tconst widgets =\n\t\t\tprops._type === \"customField\" ? state.customFieldWidgets : state.widgets;\n\t\tconst parentPanel = props.panelId ? widgets[props.panelId] : null;\n\t\t/**\n\t\t * Restrict form move\n\t\t */\n\t\tif (dragAttrs.type === \"customForm\") {\n\t\t\treturn;\n\t\t}\n\t\t/**\n\t\t * Don't allow tabs to move if in edit state\n\t\t * Don't allow tabs drop in first row or in between panels\n\t\t */\n\t\tif (!meta) return;\n\t\tif (dragAttrs.type === WIDGET_TYPE.tabs) {\n\t\t\tif (meta.row === 0 && !dragAttrs.isNew) return;\n\t\t\tif (meta.grid) {\n\t\t\t\tlet maxIndex = Math.max(...meta.grid.map((o) => o.rowIndex));\n\t\t\t\tif (meta.row < maxIndex) {\n\t\t\t\t\treturn;\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\t//Don't allow panel after tabs\n\t\tif (dragAttrs.type === WIDGET_TYPE.panel) {\n\t\t\tconst { grid, row } = meta;\n\t\t\tconst gridTab = grid && grid.find((f) => f.type === WIDGET_TYPE.tabs);\n\t\t\tif (gridTab && gridTab.rowIndex < row) {\n\t\t\t\treturn;\n\t\t\t}\n\t\t}\n\n\t\t// temporary restrict real view movement\n\t\tif (state.modelType === MODEL_TYPE.BASE && !isCustomField) {\n\t\t\treturn;\n\t\t}\n\t\tif ([WIDGET_TYPE.menubar, WIDGET_TYPE.toolbar].includes(dragAttrs.type)) {\n\t\t\tconst bar = Object.values(state.widgets || {}).find((w) =>\n\t\t\t\t[WIDGET_TYPE.menubar, WIDGET_TYPE.toolbar].includes(w.type)\n\t\t\t);\n\t\t\tconst rowCount = bar ? 2 : 0;\n\t\t\tif (hoverPanelId) return;\n\t\t\tif (!meta) return;\n\t\t\tif (meta.row > rowCount || meta.col !== 1) return;\n\t\t}\n\t\tif (\n\t\t\t(state.modelType === MODEL_TYPE.CUSTOM || isCustomField) &&\n\t\t\t[WIDGET_TYPE.menubar, WIDGET_TYPE.toolbar].includes(dragAttrs.serverType)\n\t\t) {\n\t\t\treturn;\n\t\t}\n\t\tif (\n\t\t\t![WIDGET_TYPE.menuItem, WIDGET_TYPE.menu, WIDGET_TYPE.divider].includes(\n\t\t\t\tdragAttrs.serverType\n\t\t\t) &&\n\t\t\tparentPanel &&\n\t\t\tparentPanel.type === WIDGET_TYPE.menu\n\t\t) {\n\t\t\treturn;\n\t\t}\n\t\tif (\n\t\t\t[WIDGET_TYPE.menuItem, WIDGET_TYPE.divider].includes(\n\t\t\t\tdragAttrs.serverType\n\t\t\t) &&\n\t\t\t(!parentPanel || parentPanel.type !== WIDGET_TYPE.menu)\n\t\t) {\n\t\t\treturn;\n\t\t}\n\t\tif (\n\t\t\t[WIDGET_TYPE.menu].includes(dragAttrs.serverType) &&\n\t\t\t(!parentPanel ||\n\t\t\t\t![WIDGET_TYPE.menu, WIDGET_TYPE.menubar].includes(parentPanel.type))\n\t\t) {\n\t\t\treturn;\n\t\t}\n\t\tif (\n\t\t\tparentPanel &&\n\t\t\tparentPanel.type === WIDGET_TYPE.menubar &&\n\t\t\tdragAttrs.type !== WIDGET_TYPE.menu\n\t\t) {\n\t\t\treturn;\n\t\t}\n\t\tif (\n\t\t\tparentPanel &&\n\t\t\tparentPanel.type === WIDGET_TYPE.toolbar &&\n\t\t\tdragAttrs.type !== FIELD_TYPE.button\n\t\t) {\n\t\t\treturn;\n\t\t}\n\t\tif (\n\t\t\t!parentPanel &&\n\t\t\t![\n\t\t\t\t...panelSet,\n\t\t\t\tWIDGET_TYPE.tabs,\n\t\t\t\tWIDGET_TYPE.panelStack,\n\t\t\t\tWIDGET_TYPE.menubar,\n\t\t\t\tWIDGET_TYPE.toolbar,\n\t\t\t].includes(dragAttrs.type)\n\t\t) {\n\t\t\treturn;\n\t\t}\n\n\t\t/**\n\t\t * To add current widget into another panel-tab\n\t\t */\n\t\tif (\n\t\t\tparentPanel &&\n\t\t\thoverId &&\n\t\t\thoverId !== 0 &&\n\t\t\t![...panelSet, WIDGET_TYPE.tabs].includes(dragAttrs.type) &&\n\t\t\tisTab &&\n\t\t\tprops.className !== \"active-tab\"\n\t\t) {\n\t\t\t// need to update editWidget first into state object first for real model attrs\n\t\t\tprops.update((draft) => {\n\t\t\t\tdraft.editWidget = dragId;\n\t\t\t\tdraft.editWidgetType =\n\t\t\t\t\tstate.modelType === MODEL_TYPE.BASE && \"customField\";\n\t\t\t\tprops.onWidgetChange(\n\t\t\t\t\t{\n\t\t\t\t\t\tid: panelId,\n\t\t\t\t\t\tprops: {\n\t\t\t\t\t\t\tcurrent: hoverId,\n\t\t\t\t\t\t\t_type: state.modelType === MODEL_TYPE.BASE && \"customField\",\n\t\t\t\t\t\t},\n\t\t\t\t\t\tskipGenerateHistory: true,\n\t\t\t\t\t},\n\t\t\t\t\tdraft\n\t\t\t\t);\n\t\t\t});\n\t\t}\n\t\t// when stacked is true do not allow to drop field except specified panel types.\n\t\tif (\n\t\t\tparentPanel &&\n\t\t\tparentPanel.type === WIDGET_TYPE.panelStack &&\n\t\t\t!panelSet.includes(dragAttrs.type)\n\t\t) {\n\t\t\treturn;\n\t\t}\n\t\tif (\n\t\t\tparentPanel &&\n\t\t\tparentPanel.type === WIDGET_TYPE.tabs &&\n\t\t\t!panelSet.includes(dragAttrs.type)\n\t\t) {\n\t\t\treturn;\n\t\t}\n\t\tif (\n\t\t\tstate.modelType === MODEL_TYPE.CUSTOM ||\n\t\t\tprops._type === \"customField\"\n\t\t) {\n\t\t\t// let hasPanel = false;\n\t\t\tif (\n\t\t\t\t[\n\t\t\t\t\tWIDGET_TYPE.panelDashlet,\n\t\t\t\t\tWIDGET_TYPE.panelInclude,\n\t\t\t\t\tWIDGET_TYPE.panelRelated,\n\t\t\t\t\tWIDGET_TYPE.panelStack,\n\t\t\t\t].includes(dragAttrs.type)\n\t\t\t) {\n\t\t\t\treturn;\n\t\t\t}\n\t\t\t// restrict nested panel drop in custom model\n\t\t\tconst widgets =\n\t\t\t\tprops._type === \"customField\"\n\t\t\t\t\t? state.customFieldWidgets\n\t\t\t\t\t: state.widgets;\n\t\t\tconst stateItems =\n\t\t\t\tprops._type === \"customField\" ? state.customFieldItems : state.items;\n\t\t\tconst hasTabPanel =\n\t\t\t\tObject.keys(widgets).findIndex(\n\t\t\t\t\t(widgetKey) => widgets[widgetKey].type === WIDGET_TYPE.tabs\n\t\t\t\t) !== -1;\n\t\t\tif (\n\t\t\t\thasTabPanel &&\n\t\t\t\tdragAttrs.type === WIDGET_TYPE.tabs &&\n\t\t\t\tdragAttrs.isNew\n\t\t\t) {\n\t\t\t\treturn;\n\t\t\t}\n\t\t\tif (\n\t\t\t\t[WIDGET_TYPE.panel, WIDGET_TYPE.tabs].includes(dragAttrs.type) &&\n\t\t\t\tprops.panelId &&\n\t\t\t\t!stateItems.includes(props.panelId)\n\t\t\t) {\n\t\t\t\treturn;\n\t\t\t}\n\t\t\t// paneltab can drop inside panel tab\n\t\t\tif (\n\t\t\t\tparentPanel &&\n\t\t\t\tdragAttrs.type === WIDGET_TYPE.panel &&\n\t\t\t\tparentPanel.type !== WIDGET_TYPE.tabs\n\t\t\t) {\n\t\t\t\treturn;\n\t\t\t}\n\t\t\tif (\n\t\t\t\tparentPanel &&\n\t\t\t\tdragAttrs.type === WIDGET_TYPE.tabs &&\n\t\t\t\tparentPanel.type === WIDGET_TYPE.panel\n\t\t\t) {\n\t\t\t\treturn;\n\t\t\t}\n\t\t} else {\n\t\t\tif (props.panelId) {\n\t\t\t\tconst parentPanel = widgets[props.panelId];\n\t\t\t\tif (\n\t\t\t\t\tparentPanel &&\n\t\t\t\t\t[WIDGET_TYPE.tabs, WIDGET_TYPE.panelStack].includes(dragAttrs.type)\n\t\t\t\t) {\n\t\t\t\t\treturn;\n\t\t\t\t}\n\t\t\t\tif (\n\t\t\t\t\t[\n\t\t\t\t\t\tWIDGET_TYPE.panelDashlet,\n\t\t\t\t\t\tWIDGET_TYPE.panelRelated,\n\t\t\t\t\t\tWIDGET_TYPE.panelInclude,\n\t\t\t\t\t].includes(parentPanel.type)\n\t\t\t\t) {\n\t\t\t\t\treturn;\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t\tif (dragAttrs.isCoreField === false && props._type === \"customField\") {\n\t\t\treturn;\n\t\t}\n\t\t// skip for same item drag n drop\n\t\t// skip for dragging widget in same panel\n\t\t// skip for other hover elements(monitor.isOver) specially for nested target\n\t\t// skip for dragging field directly on form\n\t\tif (\n\t\t\t(hoverId === dragId && dragPanelId === hoverPanelId) ||\n\t\t\t(dragAttrs.items || []).indexOf(hoverId) > -1 ||\n\t\t\t!monitor.isOver({ shallow: true }) ||\n\t\t\t(dragAttrs.type === WIDGET_TYPE.field &&\n\t\t\t\thoverAttrs.type === WIDGET_TYPE.form) ||\n\t\t\t(dragAttrs.type === WIDGET_TYPE.field && props.tabId !== undefined) ||\n\t\t\t(props.state.hoverWidget &&\n\t\t\t\tprops.state.hoverWidget.id === hoverId &&\n\t\t\t\tprops.state.hoverWidget.index === hoverIndex &&\n\t\t\t\tprops.state.hoverWidget.panelId === hoverPanelId)\n\t\t) {\n\t\t\treturn;\n\t\t}\n\t\t// Only for current dragging widget\n\t\tif (dragId === props.state.dragWidget) {\n\t\t\ttry {\n\t\t\t\tconst dragIndex =\n\t\t\t\t\tprops.meta.grid?.find((item) => item.id === dragId)?.cellIndice ||\n\t\t\t\t\tmaybeOutdatedDragIndex;\n\t\t\t\t// skip for separator cell at the sides of dragged widget\n\t\t\t\tif (dragId && !dragAttrs.isNew && dragPanelId === hoverPanelId) {\n\t\t\t\t\tif (dragIndex + 1 === hoverIndex || dragIndex - 1 === hoverIndex) {\n\t\t\t\t\t\tprops.state.hoverWidget && props.onHover(null);\n\t\t\t\t\t\treturn;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\t//skip for separator cells beside tab panel\n\t\t\t\tif (\n\t\t\t\t\tmeta.isSeparator &&\n\t\t\t\t\t(meta.grid?.[hoverIndex + 1]?.type === WIDGET_TYPE.tabs ||\n\t\t\t\t\t\t(hoverIndex &&\n\t\t\t\t\t\t\tmeta.grid?.[hoverIndex - 1]?.type === WIDGET_TYPE.tabs))\n\t\t\t\t) {\n\t\t\t\t\tprops.state.hoverWidget && props.onHover(null);\n\t\t\t\t\treturn;\n\t\t\t\t}\n\n\t\t\t\tconst { isMoved } = props.onMove(\n\t\t\t\t\t{\n\t\t\t\t\t\tsource: {\n\t\t\t\t\t\t\tpanelId: dragPanelId,\n\t\t\t\t\t\t\tindex: dragIndex,\n\t\t\t\t\t\t\tid: dragId,\n\t\t\t\t\t\t\tattrs: dragAttrs,\n\t\t\t\t\t\t},\n\t\t\t\t\t\tdestination: {\n\t\t\t\t\t\t\tpanelId: hoverPanelId,\n\t\t\t\t\t\t\tindex: hoverIndex,\n\t\t\t\t\t\t\tid: hoverId,\n\t\t\t\t\t\t\tattrs: hoverAttrs,\n\t\t\t\t\t\t\t_type: props._type,\n\t\t\t\t\t\t},\n\t\t\t\t\t},\n\t\t\t\t\ttrue,\n\t\t\t\t\tprops._type\n\t\t\t\t);\n\t\t\t\tif (isMoved && props.onHover) {\n\t\t\t\t\tprops.onHover({\n\t\t\t\t\t\tmeta: props.meta || {},\n\t\t\t\t\t\tid: hoverId,\n\t\t\t\t\t\tindex: hoverIndex,\n\t\t\t\t\t\tpanelId: hoverPanelId,\n\t\t\t\t\t\tposition:\n\t\t\t\t\t\t\tprops.panelColumns &&\n\t\t\t\t\t\t\t(`${props.panelColumns}` === \"1\" ||\n\t\t\t\t\t\t\t\t`${props.panelColumns}` === `${dragAttrs.colSpan}`) &&\n\t\t\t\t\t\t\tprops.tabId === undefined &&\n\t\t\t\t\t\t\thoverAttrs?.type !== \"spacer\" &&\n\t\t\t\t\t\t\thoverAttrs?.serverType !== \"spacer\"\n\t\t\t\t\t\t\t\t? \"top\"\n\t\t\t\t\t\t\t\t: \"default\",\n\t\t\t\t\t\tattrs: hoverAttrs,\n\t\t\t\t\t\t_type: props._type,\n\t\t\t\t\t});\n\t\t\t\t} else {\n\t\t\t\t\tprops.state.hoverWidget && props.onHover(null);\n\t\t\t\t}\n\t\t\t} catch (e) {}\n\t\t}\n\n\t\tif (parentPanel && parentPanel.widgetAttrs) {\n\t\t\tlet parentWidgetAttrs = JSON.parse(parentPanel.widgetAttrs || \"{}\");\n\t\t\tlet dragAttrsWidgetAttrs = JSON.parse(dragAttrs.widgetAttrs || \"{}\");\n\t\t\tif (\n\t\t\t\tparentWidgetAttrs.itemSpan &&\n\t\t\t\t!dragAttrsWidgetAttrs.colSpan &&\n\t\t\t\t[\"one-to-many\", \"many-to-many\"].includes(dragAttrs.serverType)\n\t\t\t) {\n\t\t\t\t/**\n\t\t\t\t * Temporary fix for AOP issue\n\t\t\t\t * In AOP for grid relational fields, Parent panels itemSpan is not working\n\t\t\t\t * So adding default span from here\n\t\t\t\t */\n\t\t\t\tconst attrs = JSON.parse(dragAttrs.widgetAttrs || \"{}\");\n\t\t\t\tconst hoverAttrs = {\n\t\t\t\t\twidgetAttrs: JSON.stringify({\n\t\t\t\t\t\t...attrs,\n\t\t\t\t\t\tcolSpan: parentWidgetAttrs.itemSpan,\n\t\t\t\t\t}),\n\t\t\t\t};\n\t\t\t\tsetHoverAttr(hoverAttrs);\n\t\t\t}\n\t\t}\n\t},\n\tcanDrop(props, monitor) {\n\t\tif (props?.attrs?.type === \"form\") return false;\n\t\treturn true;\n\t},\n};\nconst parse = (json) => {\n\treturn JSON.parse(json || \"{}\");\n};\n\nfunction Widget(props) {\n\tlet {\n\t\tid,\n\t\tisDragging,\n\t\tconnectDragSource,\n\t\tconnectDropTarget,\n\t\thighlighted,\n\t\thovered,\n\t\ttabId,\n\t\tclassName,\n\t\tcomponent: DefaultWidgetComponent,\n\t\tattrs = {},\n\t\tstate,\n\t\tupdate,\n\t\tonWidgetChange,\n\t\terrorList = {},\n\t\t...rest\n\t} = props;\n\n\tconst { dragWidget, dragWidgetProps, hoverWidget, mainItems, sideItems } =\n\t\tstate;\n\tconst { attrs: dragWidgetAttrs } = dragWidgetProps || {};\n\tconst { widgetAttrs, type } = dragWidgetAttrs || {};\n\tconst { sidebar: isSidePanelDrg } =\n\t\ttype === \"panel\" && JSON.parse(widgetAttrs || \"{}\");\n\n\tconst ref = React.useRef(null);\n\tconst [anchorEl, setAnchorEl] = React.useState(null);\n\n\tconst isPanelRequired =\n\t\tsideItems.length && mainItems.length === 1 && mainItems[0] === id;\n\n\tconst _widgets =\n\t\trest._type === \"customField\" ? state.customFieldWidgets : state.widgets;\n\n\tconst handleWidgetRemove = (event) => {\n\t\tsetAnchorEl(event.currentTarget);\n\t};\n\n\tconst handleClose = () => {\n\t\tsetAnchorEl(null);\n\t};\n\n\tconst handleYes = () => {\n\t\tif (rest.onRemove) {\n\t\t\trest.onRemove(rest.panelId, rest.index, id, rest._type, isPanelRequired);\n\t\t\thandleClose();\n\t\t}\n\t};\n\n\tReact.useEffect(() => {\n\t\tconst scrollToWidgetView = () => {\n\t\t\tconst section = ref.current;\n\n\t\t\tif (section && props.highlightedOption.id === id) {\n\t\t\t\tsection.scrollIntoView({\n\t\t\t\t\tbehavior: \"smooth\",\n\t\t\t\t\tblock: \"center\",\n\t\t\t\t});\n\t\t\t}\n\t\t};\n\n\t\tid && props.highlightedOption && scrollToWidgetView();\n\t}, [props.highlightedOption, id]);\n\n\t// to determine if dragged widget will fit or not\n\tconst canWidgetFit = () => {\n\t\tif (\n\t\t\thoverWidget?.attrs?.serverType === \"spacer\" ||\n\t\t\thoverWidget?.attrs?.type === \"spacer\" ||\n\t\t\thoverWidget?.meta?.isSeparator\n\t\t) {\n\t\t\treturn true;\n\t\t}\n\t\tconst dragWidgetAttrsColSpan =\n\t\t\ttypeof dragWidgetProps?.id === \"symbol\" &&\n\t\t\t[\"one-to-many\", \"many-to-many\"].includes(\n\t\t\t\tdragWidgetProps?.attrs?.serverType\n\t\t\t)\n\t\t\t\t? undefined //Tempory fix for AOP issue\n\t\t\t\t: parse(dragWidgetProps?.attrs?.widgetAttrs).colSpan;\n\n\t\tconst hoverWidgetParentItemSpan = parse(\n\t\t\t(_widgets || {})[hoverWidget?.panelId]?.widgetAttrs\n\t\t).itemSpan;\n\n\t\tconst itemSpan = dragWidgetAttrsColSpan || hoverWidgetParentItemSpan || 6;\n\t\tconst hoverSpan = hoverWidget?.meta?.colSpan;\n\n\t\tif (hoverSpan < itemSpan) {\n\t\t\treturn false;\n\t\t}\n\t\treturn true;\n\t};\n\n\t// special case for new element\n\t// hide/remove element from schema, if it drag outside form container(id=1)\n\tReact.useEffect(() => {\n\t\tupdate((draft) => {\n\t\t\tdraft.hoverWidget && (draft.hoverWidget.visible = hovered);\n\t\t});\n\t}, [update, hovered, id, dragWidget, attrs]);\n\n\tlet registryField = Registry[attrs.type] || Registry.field;\n\n\tif (rest.isTab && !Registry[attrs.type]) {\n\t\tregistryField = Registry[\"panel\"];\n\t}\n\n\tlet { component: WidgetComponent, props: componentProps = {} } =\n\t\tregistryField;\n\n\tif (DefaultWidgetComponent) {\n\t\tWidgetComponent = DefaultWidgetComponent;\n\t}\n\n\tlet isFormField = true;\n\tif (Object.values(IDS.createWidgets).indexOf(id) > -1) {\n\t\tisFormField = false;\n\t\tconnectDropTarget = (e) => e;\n\t}\n\tconst isEdit = isFormField && state.editWidget === id;\n\tconst isTabWidget = tabId !== undefined;\n\tconst isTabWidgetContent = isTabWidget ? !rest.isTab : false;\n\tconst showRemove =\n\t\tisFormField &&\n\t\tNumber(id) > 0 &&\n\t\t!isTabWidgetContent &&\n\t\trest.design &&\n\t\trest.canRemove !== false;\n\tif (\n\t\tisTabWidgetContent ||\n\t\t(id &&\n\t\t\tid !== IDS.form &&\n\t\t\ttypeof id !== \"symbol\" &&\n\t\t\tattrs.serverType !== \"spacer\" &&\n\t\t\tattrs.type !== \"spacer\" &&\n\t\t\t!rest.isTab)\n\t) {\n\t\tconnectDropTarget = (e) => e;\n\t}\n\tif (attrs.isExist === false || (!rest.design && IDS.dumpField)) return null;\n\n\tconst _isTab =\n\t\trest.isTab || `${JSON.parse(attrs.widgetAttrs || \"{}\").tab}` === \"true\";\n\n\treturn (\n\t\t<React.Fragment>\n\t\t\t{connectDragSource(\n\t\t\t\tconnectDropTarget(\n\t\t\t\t\t<div\n\t\t\t\t\t\tref={ref}\n\t\t\t\t\t\t{...componentProps}\n\t\t\t\t\t\tclassName={classNames(\n\t\t\t\t\t\t\tclassName,\n\t\t\t\t\t\t\t\"widget\",\n\t\t\t\t\t\t\tcomponentProps.className,\n\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t\"dummy-widget\": attrs.isDummy,\n\t\t\t\t\t\t\t\t\"spacer-widget\":\n\t\t\t\t\t\t\t\t\tattrs.type === \"spacer\" || attrs.serverType === \"spacer\",\n\t\t\t\t\t\t\t\tedit: isEdit,\n\t\t\t\t\t\t\t\thighlighted: highlighted,\n\t\t\t\t\t\t\t\thovered: hovered,\n\t\t\t\t\t\t\t\tactive: isFormField && isDragging,\n\t\t\t\t\t\t\t\t\"form-field\": isFormField,\n\t\t\t\t\t\t\t\t\"panel-field\": attrs.type === \"panel\",\n\t\t\t\t\t\t\t\t\"non-title-panel\":\n\t\t\t\t\t\t\t\t\tattrs.type === \"panel\" && !_isTab && !attrs.title,\n\t\t\t\t\t\t\t\t\"title-panel\": attrs.type === \"panel\" && !_isTab && attrs.title,\n\t\t\t\t\t\t\t\t\"error-field\": Boolean(errorList[id]),\n\t\t\t\t\t\t\t\t\"pallete-field\": rest.isPalleteField,\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t)}\n\t\t\t\t\t\t_type={rest._type}\n\t\t\t\t\t\tonClick={(e) => {\n\t\t\t\t\t\t\tif (isFormField && rest.onSelect) {\n\t\t\t\t\t\t\t\te.stopPropagation();\n\t\t\t\t\t\t\t\tconst widget = _widgets && _widgets[id];\n\t\t\t\t\t\t\t\tif (widget.type !== \"panel-tabs\" && id !== IDS.dumpField) {\n\t\t\t\t\t\t\t\t\trest.onSelect({ id, type: rest._type });\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\tif (isTabWidget) {\n\t\t\t\t\t\t\t\te.stopPropagation();\n\t\t\t\t\t\t\t\tif (id !== IDS.dumpField && _widgets[tabId]) {\n\t\t\t\t\t\t\t\t\tonWidgetChange({\n\t\t\t\t\t\t\t\t\t\tid: tabId,\n\t\t\t\t\t\t\t\t\t\tprops: {\n\t\t\t\t\t\t\t\t\t\t\tcurrent: id,\n\t\t\t\t\t\t\t\t\t\t\t_type: rest._type,\n\t\t\t\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t\t\t\tskipGenerateHistory: true,\n\t\t\t\t\t\t\t\t\t});\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}}\n\t\t\t\t\t>\n\t\t\t\t\t\t{!isTabWidgetContent &&\n\t\t\t\t\t\t\t!rest.isBase &&\n\t\t\t\t\t\t\tstate.hoverWidget &&\n\t\t\t\t\t\t\ttypeof id !== \"symbol\" &&\n\t\t\t\t\t\t\tNumber(id) >= 0 &&\n\t\t\t\t\t\t\tstate.hoverWidget.index === rest.index &&\n\t\t\t\t\t\t\tstate.hoverWidget.visible !== false &&\n\t\t\t\t\t\t\tstate.hoverWidget.panelId === rest.panelId &&\n\t\t\t\t\t\t\tJSON.parse(isSidePanelDrg || \"false\") ===\n\t\t\t\t\t\t\t\tJSON.parse(rest.isSidePanelDummy || \"false\") && (\n\t\t\t\t\t\t\t\t<div\n\t\t\t\t\t\t\t\t\tclassName={classNames(\n\t\t\t\t\t\t\t\t\t\t\"hover-liner\",\n\t\t\t\t\t\t\t\t\t\t{ \"dummy-widget\": attrs.isDummy || id === 0 },\n\t\t\t\t\t\t\t\t\t\tstate.hoverWidget.position,\n\t\t\t\t\t\t\t\t\t\t{ \"no-fit\": !canWidgetFit() }\n\t\t\t\t\t\t\t\t\t)}\n\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t)}\n\t\t\t\t\t\t{WidgetComponent && (\n\t\t\t\t\t\t\t<WidgetComponent\n\t\t\t\t\t\t\t\tid={id}\n\t\t\t\t\t\t\t\tisDragging={state.dragWidget === id}\n\t\t\t\t\t\t\t\tattrs={attrs}\n\t\t\t\t\t\t\t\t_type={rest._type}\n\t\t\t\t\t\t\t\terrorList={errorList}\n\t\t\t\t\t\t\t\tcanRemove={rest.canRemove}\n\t\t\t\t\t\t\t\tdraggable={attrs.type !== WIDGET_TYPE.menubar}\n\t\t\t\t\t\t\t\t{...rest}\n\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t)}\n\t\t\t\t\t\t{showRemove && !state.dragWidget && (\n\t\t\t\t\t\t\t<span\n\t\t\t\t\t\t\t\tonClick={handleWidgetRemove}\n\t\t\t\t\t\t\t\tclassName=\"widget-remove\"\n\t\t\t\t\t\t\t\ttitle={translate(\"Remove Widget\")}\n\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t<i className=\"fa fa-remove\" />\n\t\t\t\t\t\t\t</span>\n\t\t\t\t\t\t)}\n\t\t\t\t\t\t{anchorEl && (\n\t\t\t\t\t\t\t<PopoverAlert\n\t\t\t\t\t\t\t\tanchorEl={anchorEl}\n\t\t\t\t\t\t\t\thandleClose={handleClose}\n\t\t\t\t\t\t\t\thandleYes={handleYes}\n\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t)}\n\t\t\t\t\t</div>\n\t\t\t\t)\n\t\t\t)}\n\t\t</React.Fragment>\n\t);\n}\n\nconst SimpleWidget = (props) => (\n\t<Widget\n\t\t{...props}\n\t\tconnectDropTarget={(e) => e}\n\t\tconnectDragSource={(e) => e}\n\t/>\n);\n\nconst DraggableWidget = compose(\n\tDropTarget(TYPE, CardTarget, (connect, monitor) => ({\n\t\thighlighted: false,\n\t\thovered: monitor.isOver(),\n\t\tconnectDropTarget: connect.dropTarget(),\n\t})),\n\tDragSource(TYPE, CardSource, (connect, monitor) => ({\n\t\tconnectDragSource: connect.dragSource(),\n\t\tisDragging: monitor.isDragging(),\n\t}))\n)(Widget);\n\nexport const WidgetComponent = (props) => {\n\tconst store = useStore();\n\tconst { state } = store;\n\tconst _widgets =\n\t\tprops._type === \"customField\" ? state.customFieldWidgets : state.widgets;\n\tconst attrs =\n\t\t_widgets && _widgets[props.id] ? _widgets[props.id] : props.attrs || {};\n\tconst _props = { ...store, attrs };\n\tconst draggable = attrs.type !== WIDGET_TYPE.menubar;\n\n\tif (props.design || draggable)\n\t\treturn <DraggableWidget {..._props} {...props} />;\n\treturn <SimpleWidget {..._props} {...props} />;\n};\n\nexport default React.memo(WidgetComponent);\n","import React from \"react\";\nimport Grid from \"./Grid\";\nimport { PANEL_TYPE } from \"../constants\";\nimport { useStore } from \"../store/context\";\n\n/**\n * Form Component\n * Used As Main Container i.e. <form />\n */\nfunction FormComponent({ attrs = {}, items = [], design, widgets, ...rest }) {\n\t// render top level items as Widgets using Context FormConsumer\n\tconst { update } = useStore();\n\n\tconst allItems = React.useMemo(() => {\n\t\tconst sideItems = [];\n\t\tconst mainItems = [];\n\t\titems.forEach((item) => {\n\t\t\tconst sidebar =\n\t\t\t\twidgets[item]?.sidebar ||\n\t\t\t\tJSON.parse(widgets[item].widgetAttrs || \"{}\")?.sidebar;\n\n\t\t\tconst isSidePanel = JSON.parse(sidebar || false);\n\n\t\t\tif (widgets[item] && isSidePanel) sideItems.push(item);\n\t\t\telse if (widgets[item] && !isSidePanel) mainItems.push(item);\n\t\t});\n\t\treturn { sideItems, mainItems };\n\t}, [items, widgets]);\n\n\tconst rootPanel = React.useMemo(() => {\n\t\tconst { sideItems, mainItems } = allItems;\n\t\tconst hasSidebar = sideItems.length > 0;\n\t\treturn hasSidebar\n\t\t\t? {\n\t\t\t\t\titems: [\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tlayout: PANEL_TYPE.grid,\n\t\t\t\t\t\t\titems: mainItems,\n\t\t\t\t\t\t\tcolSpan: 9,\n\t\t\t\t\t\t},\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tlayout: PANEL_TYPE.grid,\n\t\t\t\t\t\t\titems: sideItems,\n\t\t\t\t\t\t\tcolSpan: 3,\n\t\t\t\t\t\t},\n\t\t\t\t\t],\n\t\t\t  }\n\t\t\t: {\n\t\t\t\t\titems: [\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tlayout: PANEL_TYPE.grid,\n\t\t\t\t\t\t\titems: mainItems,\n\t\t\t\t\t\t\tcolSpan: 12,\n\t\t\t\t\t\t},\n\t\t\t\t\t],\n\t\t\t  };\n\t}, [allItems]);\n\n\tReact.useEffect(() => {\n\t\tconst { mainItems, sideItems } = allItems;\n\t\tupdate((draft) => {\n\t\t\tdraft.mainItems = mainItems;\n\t\t\tdraft.sideItems = sideItems;\n\t\t});\n\t}, [allItems, update]);\n\n\treturn (\n\t\t<div className=\"flex-container\" style={{ gap: 12 }}>\n\t\t\t{rootPanel.items.map(({ items, colSpan, ...attrs }, i) => (\n\t\t\t\t<div className={`flex-item span-${colSpan}`} key={i}>\n\t\t\t\t\t<Grid\n\t\t\t\t\t\tkey={i}\n\t\t\t\t\t\tdesign={design}\n\t\t\t\t\t\tclassName=\"form-body\"\n\t\t\t\t\t\titems={items}\n\t\t\t\t\t\tattrs={attrs}\n\t\t\t\t\t\t_type={rest._type}\n\t\t\t\t\t\twidgets={widgets}\n\t\t\t\t\t\terrorList={rest.errorList}\n\t\t\t\t\t\tcanRemove={rest.canRemove}\n\t\t\t\t\t\tisBase={rest.isBase}\n\t\t\t\t\t/>\n\t\t\t\t</div>\n\t\t\t))}\n\t\t</div>\n\t);\n}\n\nexport default FormComponent;\n","import React, { useState, useEffect } from \"react\";\nimport AxelorService from \"../services/axelor.rest\";\nimport { fetchCustomModel } from \"../Toolbar/api\";\nimport { translate, getDefaultGridFormName } from \"../utils\";\n\nconst metaViewService = new AxelorService({\n\tmodel: \"com.axelor.meta.db.MetaView\",\n});\nconst excludedUITypes = [\"panel\", \"label\", \"spacer\", \"button\"];\n\nconst showInGrid = (item) => {\n\treturn (\n\t\t!excludedUITypes.includes(item.type) && item.visibleInGrid && !item.hidden\n\t);\n};\n\nfunction RelationalFieldGridView({ attrs, id }) {\n\tconst {\n\t\tgridView,\n\t\ttargetModel: target,\n\t\ttitle,\n\t\tautoTitle,\n\t\taction,\n\t\ttargetJsonModel,\n\t} = attrs || {};\n\tconst [gridItems, setGridItems] = useState([]);\n\tconst [gridTitle, setGridTitle] = useState(null);\n\n\tuseEffect(() => {\n\t\tasync function getGrid() {\n\t\t\tlet viewName = gridView;\n\t\t\tif (action) {\n\t\t\t\tconst _context = {\n\t\t\t\t\t_id: null,\n\t\t\t\t};\n\t\t\t\tconst data = {\n\t\t\t\t\taction,\n\t\t\t\t\tmodel: \"com.axelor.meta.db.MetaAction\",\n\t\t\t\t\tdata: {\n\t\t\t\t\t\tcontext: _context,\n\t\t\t\t\t},\n\t\t\t\t};\n\n\t\t\t\tconst actionResult = await metaViewService.action(data);\n\t\t\t\tif (\n\t\t\t\t\tactionResult.data &&\n\t\t\t\t\tactionResult.data[0] &&\n\t\t\t\t\tactionResult.data[0].view &&\n\t\t\t\t\tactionResult.data[0].view.views\n\t\t\t\t) {\n\t\t\t\t\tconst view = actionResult.data[0].view.views.find(\n\t\t\t\t\t\t(v) => v.type === \"grid\"\n\t\t\t\t\t);\n\t\t\t\t\tif (view) {\n\t\t\t\t\t\tviewName = view.name;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t\tif (targetJsonModel) {\n\t\t\t\tlet model;\n\t\t\t\tif (!targetJsonModel.name && targetJsonModel.id) {\n\t\t\t\t\tmodel = await fetchCustomModel(targetJsonModel.id);\n\t\t\t\t}\n\t\t\t\tviewName = getDefaultGridFormName(\n\t\t\t\t\tmodel || targetJsonModel,\n\t\t\t\t\tfalse,\n\t\t\t\t\ttrue\n\t\t\t\t);\n\t\t\t}\n\t\t\tconst payload = {\n\t\t\t\tmodel: target,\n\t\t\t\tdata: {\n\t\t\t\t\ttype: \"grid\",\n\t\t\t\t\tname: viewName,\n\t\t\t\t},\n\t\t\t};\n\t\t\tif (viewName) {\n\t\t\t\tmetaViewService.view(payload).then((res) => {\n\t\t\t\t\tif (res.data && res.data.view) {\n\t\t\t\t\t\tconst { items = [], title } = res.data.view;\n\t\t\t\t\t\tsetGridTitle(title);\n\t\t\t\t\t\tif (targetJsonModel) {\n\t\t\t\t\t\t\tconst gridItems = [];\n\t\t\t\t\t\t\titems.forEach((item) => {\n\t\t\t\t\t\t\t\tconst { jsonFields = [] } = item;\n\t\t\t\t\t\t\t\tjsonFields.forEach((i) => {\n\t\t\t\t\t\t\t\t\tif (showInGrid(i)) {\n\t\t\t\t\t\t\t\t\t\tgridItems.push(i);\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t});\n\t\t\t\t\t\t\t});\n\t\t\t\t\t\t\tsetGridItems(() => [...(gridItems || [])]);\n\t\t\t\t\t\t\treturn;\n\t\t\t\t\t\t}\n\t\t\t\t\t\tconst { fields = [], jsonAttrs = [] } = res.data;\n\t\t\t\t\t\tlet displayFields = {};\n\t\t\t\t\t\tfields.forEach((field) => {\n\t\t\t\t\t\t\tdisplayFields[field.name] = field.title;\n\t\t\t\t\t\t});\n\t\t\t\t\t\tconst allFields = items.map((i) => {\n\t\t\t\t\t\t\treturn { ...i, title: displayFields[i.name] };\n\t\t\t\t\t\t});\n\n\t\t\t\t\t\tif (jsonAttrs && jsonAttrs.length > 0) {\n\t\t\t\t\t\t\tjsonAttrs.forEach((i) => {\n\t\t\t\t\t\t\t\tif (showInGrid(i)) {\n\t\t\t\t\t\t\t\t\tallFields.push(i);\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t});\n\t\t\t\t\t\t}\n\t\t\t\t\t\tsetGridItems(allFields);\n\t\t\t\t\t}\n\t\t\t\t});\n\t\t\t} else {\n\t\t\t\tsetGridItems([]);\n\t\t\t}\n\t\t}\n\t\tgetGrid();\n\t}, [gridView, target, targetJsonModel, id, action]);\n\n\treturn (\n\t\t<div>\n\t\t\t<div className=\"one-to-many-header\">\n\t\t\t\t<span>{translate(title || gridTitle || autoTitle)}</span>\n\t\t\t</div>\n\t\t\t<table>\n\t\t\t\t<tbody className=\"one-to-many-row\">\n\t\t\t\t\t{[...Array(3)].map((e, index) => (\n\t\t\t\t\t\t<tr style={{ display: \"flex\" }} key={`row_${index}`}>\n\t\t\t\t\t\t\t{gridItems.map((item, i) => (\n\t\t\t\t\t\t\t\t<td\n\t\t\t\t\t\t\t\t\tclassName=\"one-to-many-col one-to-many-col-border\"\n\t\t\t\t\t\t\t\t\tkey={`td_${i}`}\n\t\t\t\t\t\t\t\t\tstyle={{ borderBottom: index === 0 ? \"1px solid #ddd\" : \"\" }}\n\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t{index === 0 && item\n\t\t\t\t\t\t\t\t\t\t? translate(item.title || item.autoTitle)\n\t\t\t\t\t\t\t\t\t\t: \"\"}\n\t\t\t\t\t\t\t\t</td>\n\t\t\t\t\t\t\t))}\n\t\t\t\t\t\t</tr>\n\t\t\t\t\t))}\n\t\t\t\t</tbody>\n\t\t\t</table>\n\t\t</div>\n\t);\n}\n\nexport default RelationalFieldGridView;\n","import React from \"react\";\nimport classNames from \"classnames\";\nimport { IDS, FIELD_TYPE, TYPE } from \"../constants\";\nimport RelationalFieldGridView from \"./RelationalFieldGridView\";\nimport { translate } from \"../utils\";\n\n// filter html(tags) compatible attributes\nconst filterInputProps = (props) => {\n\tconst allowed = [\n\t\t\"name\",\n\t\t\"title\",\n\t\t\"defaultValue\",\n\t\t\"placeholder\",\n\t\t\"readOnly\",\n\t\t\"checked\",\n\t\t\"disabled\",\n\t\t\"rows\",\n\t\t\"required\",\n\t];\n\t// return valid object with values\n\treturn allowed.reduce((obj, attr) => {\n\t\tif (props[attr] !== undefined) obj[attr] = props[attr];\n\t\tif (attr === \"required\") {\n\t\t\tobj[attr] = props[attr] === \"true\";\n\t\t}\n\t\treturn obj;\n\t}, {});\n};\n\n// Plain Textbox\nexport const TextInput = (props) => {\n\treturn (\n\t\t<input type=\"text\" autoComplete=\"off\" {...props} className=\"text-input\" />\n\t);\n};\n\n// Multiline Textbox i.e. Textarea\nexport const MultiTextInput = (props) => {\n\treturn <textarea rows={6} {...props} />;\n};\n\n// Blank Spacer to fill up space between two cells of Grid\nexport const Spacer = (props) => <div className=\"spacer\" />;\n\nexport const Separator = (props) => (\n\t<div className=\"spacer\">\n\t\t<hr className=\"separator-field\" />\n\t</div>\n);\n\nexport const Boolean = ({ inputProps, ...props }) => (\n\t<div className=\"boolean-wrapper\">\n\t\t<input {...inputProps} type=\"checkbox\" />\n\t\t<span className=\"boolean-text\" title={translate(props.title || props.name)}>\n\t\t\t{translate(props.title || props.name)}\n\t\t</span>\n\t</div>\n);\n\n// Button component\nexport const Button = ({ title, ...props }) => (\n\t<div className=\"button-container\">\n\t\t<button {...props} className=\"button-view\" title={translate(title)}>\n\t\t\t{translate(title)}\n\t\t</button>\n\t</div>\n);\n\nexport const MenuItem = ({ title, ...props }) => (\n\t<div className=\"menu-item-container\">{translate(title)}</div>\n);\n\nexport const Hilite = ({ color, background, strong }) => {\n\treturn (\n\t\t<div\n\t\t\tclassName={classNames(\n\t\t\t\t`hilite hilite hilite-background-${background} hilite-text-${color}`,\n\t\t\t\t{ \"hilite-strong\": strong }\n\t\t\t)}\n\t\t>\n\t\t\thilite\n\t\t</div>\n\t);\n};\n\n/**\n * Form \"Field\" Component\n * Used For User Inputs\n */\nfunction FieldComponent({ id, attrs }) {\n\t// check for dump field for empty panels\n\tif (id === IDS.dumpField) {\n\t\treturn <div className=\"dump-field\" />;\n\t}\n\n\tconst { name, title, serverType, multiline, type, autoTitle, widget } = attrs;\n\tconst inputProps = filterInputProps(attrs);\n\tlet _type =\n\t\tserverType && serverType !== \"field\" ? serverType.toLowerCase() : type;\n\tconst DefaultWidget = () => (\n\t\t<React.Fragment>\n\t\t\t{\n\t\t\t\t<label\n\t\t\t\t\tclassName=\"widget label\"\n\t\t\t\t\ttitle={translate(title || attrs.autoTitle || name)}\n\t\t\t\t>\n\t\t\t\t\t{translate(title || attrs.autoTitle || name)}\n\t\t\t\t</label>\n\t\t\t}\n\t\t\t{multiline ? (\n\t\t\t\t<MultiTextInput {...inputProps} />\n\t\t\t) : attrs.widget === \"Image\" ? (\n\t\t\t\t<img\n\t\t\t\t\talt={title || attrs.autoTitle || name}\n\t\t\t\t\tsrc=\"./images/not_found.png\"\n\t\t\t\t\tclassName=\"image-widget\"\n\t\t\t\t/>\n\t\t\t) : (\n\t\t\t\t<TextInput\n\t\t\t\t\ttype={serverType === FIELD_TYPE.number ? \"number\" : \"text\"}\n\t\t\t\t\t{...inputProps}\n\t\t\t\t/>\n\t\t\t)}\n\t\t</React.Fragment>\n\t);\n\n\tswitch (_type?.toLowerCase()) {\n\t\tcase FIELD_TYPE.boolean:\n\t\t\treturn (\n\t\t\t\t<Boolean\n\t\t\t\t\ttitle={title || autoTitle}\n\t\t\t\t\tname={name}\n\t\t\t\t\tinputProps={inputProps}\n\t\t\t\t/>\n\t\t\t);\n\t\tcase FIELD_TYPE.spacer:\n\t\t\treturn <Spacer />;\n\t\tcase FIELD_TYPE.hilite:\n\t\t\treturn <Hilite {...attrs} />;\n\t\tcase FIELD_TYPE.separator:\n\t\tcase TYPE.divider:\n\t\t\treturn <Separator />;\n\t\tcase TYPE.menuItem:\n\t\t\treturn <MenuItem title={title} />;\n\t\tcase FIELD_TYPE.button:\n\t\t\treturn <Button {...inputProps} title={title || name} />;\n\t\tcase \"selection\":\n\t\tcase \"label\": {\n\t\t\treturn <span dangerouslySetInnerHTML={{ __html: title }} />;\n\t\t}\n\t\tcase \"panel-dashlet\":\n\t\tcase \"panel-related\":\n\t\tcase \"one-to-many\":\n\t\tcase \"json-one-to-many\":\n\t\t\treturn <RelationalFieldGridView attrs={attrs} id={id} />;\n\t\tcase \"many-to-many\":\n\t\tcase \"json-many-to-many\":\n\t\t\treturn widget !== \"TagSelect\" ? (\n\t\t\t\t<RelationalFieldGridView attrs={attrs} id={id} />\n\t\t\t) : (\n\t\t\t\t<DefaultWidget />\n\t\t\t);\n\t\tdefault:\n\t\t\treturn <DefaultWidget />;\n\t}\n}\n\nexport default FieldComponent;\n","import { TYPE, IDS, ItemTypes } from \"./constants\";\n\nexport const fieldTypes = [\n\t{\n\t\tname: \"Common\",\n\t\tvalue: [\n\t\t\t{\n\t\t\t\tname: \"label\",\n\t\t\t\ttitle: \"Label\",\n\t\t\t\ttype: \"label\",\n\t\t\t\timage: \"label.png\",\n\t\t\t\tid: IDS.createWidgets.field,\n\t\t\t\tserverType: \"label\",\n\t\t\t\tcolSpan: 6,\n\t\t\t},\n\t\t\t{\n\t\t\t\tname: \"button\",\n\t\t\t\ttype: \"button\",\n\t\t\t\ttitle: \"Button\",\n\t\t\t\timage: \"button.png\",\n\t\t\t\tid: IDS.createWidgets.field,\n\t\t\t\tserverType: \"button\",\n\t\t\t\tcolSpan: 6,\n\t\t\t},\n\t\t\t{\n\t\t\t\tname: \"separator\",\n\t\t\t\ttype: \"separator\",\n\t\t\t\ttitle: \"Separator\",\n\t\t\t\timage: \"seperator.png\",\n\t\t\t\tid: IDS.createWidgets.field,\n\t\t\t\tserverType: \"separator\",\n\t\t\t\tcolSpan: 6,\n\t\t\t},\n\t\t\t{\n\t\t\t\tname: \"selection\",\n\t\t\t\ttitle: \"Selection\",\n\t\t\t\ttype: ItemTypes.ITEM,\n\t\t\t\timage: \"dropdown-arrow.png\",\n\t\t\t\tid: IDS.createWidgets.field,\n\t\t\t\tserverType: \"string\",\n\t\t\t\tisSelectionField: true,\n\t\t\t\tcolSpan: 6,\n\t\t\t},\n\t\t],\n\t},\n\t{\n\t\tname: \"Panels\",\n\t\tvalue: [\n\t\t\t{\n\t\t\t\tname: \"panel\",\n\t\t\t\ttype: ItemTypes.CONTAINER,\n\t\t\t\titems: [],\n\t\t\t\timage: \"panel.png\",\n\t\t\t\tid: IDS.createWidgets.panel,\n\t\t\t\tserverType: TYPE.panel,\n\t\t\t\tcols: 12,\n\t\t\t\tlayout: \"grid\",\n\t\t\t\tcolSpan: 12,\n\t\t\t},\n\t\t\t{\n\t\t\t\tname: \"Tabs\",\n\t\t\t\ttype: TYPE.tabs,\n\t\t\t\timage: \"panel_tabs.png\",\n\t\t\t\ttab: true,\n\t\t\t\titems: [],\n\t\t\t\tid: IDS.createWidgets.tabs,\n\t\t\t\tserverType: TYPE.panel,\n\t\t\t\tisNew: true,\n\t\t\t\tcolSpan: 12,\n\t\t\t\ttitle: \"Tabs\",\n\t\t\t\tcurrent: null,\n\t\t\t\tlayout: \"grid\",\n\t\t\t},\n\t\t],\n\t},\n];\n\nexport const modelFields = [\n\t{\n\t\tname: \"Fields\",\n\t\tvalue: [\n\t\t\t{\n\t\t\t\tname: \"string\",\n\t\t\t\ttype: ItemTypes.ITEM,\n\t\t\t\ttitle: \"String\",\n\t\t\t\timage: \"string.png\",\n\t\t\t\tid: IDS.createWidgets.field,\n\t\t\t\tisModelField: true,\n\t\t\t\tserverType: \"string\",\n\t\t\t\tcolSpan: 6,\n\t\t\t},\n\t\t\t{\n\t\t\t\tname: \"integer\",\n\t\t\t\ttype: ItemTypes.ITEM,\n\t\t\t\ttitle: \"Integer\",\n\t\t\t\timage: \"integer.png\",\n\t\t\t\tid: IDS.createWidgets.field,\n\t\t\t\tisModelField: true,\n\t\t\t\tserverType: \"integer\",\n\t\t\t\tcolSpan: 6,\n\t\t\t},\n\t\t\t{\n\t\t\t\tname: \"decimal\",\n\t\t\t\ttype: ItemTypes.ITEM,\n\t\t\t\ttitle: \"Decimal\",\n\t\t\t\timage: \"decimal.png\",\n\t\t\t\tid: IDS.createWidgets.field,\n\t\t\t\tisModelField: true,\n\t\t\t\tserverType: \"decimal\",\n\t\t\t\tcolSpan: 6,\n\t\t\t},\n\t\t\t{\n\t\t\t\tname: \"boolean\",\n\t\t\t\ttype: ItemTypes.ITEM,\n\t\t\t\ttitle: \"Boolean\",\n\t\t\t\timage: \"boolean.png\",\n\t\t\t\tid: IDS.createWidgets.field,\n\t\t\t\tisModelField: true,\n\t\t\t\tserverType: \"boolean\",\n\t\t\t\tcolSpan: 6,\n\t\t\t},\n\t\t\t{\n\t\t\t\tname: \"datetime\",\n\t\t\t\ttype: ItemTypes.ITEM,\n\t\t\t\ttitle: \"Date time\",\n\t\t\t\timage: \"datetime.png\",\n\t\t\t\tid: IDS.createWidgets.field,\n\t\t\t\tisModelField: true,\n\t\t\t\tserverType: \"datetime\",\n\t\t\t\tcolSpan: 6,\n\t\t\t},\n\t\t\t{\n\t\t\t\tname: \"date\",\n\t\t\t\ttype: ItemTypes.ITEM,\n\t\t\t\ttitle: \"Date\",\n\t\t\t\timage: \"date.png\",\n\t\t\t\tid: IDS.createWidgets.field,\n\t\t\t\tisModelField: true,\n\t\t\t\tserverType: \"date\",\n\t\t\t\tcolSpan: 6,\n\t\t\t},\n\t\t\t{\n\t\t\t\tname: \"time\",\n\t\t\t\ttype: ItemTypes.ITEM,\n\t\t\t\ttitle: \"Time\",\n\t\t\t\timage: \"time.png\",\n\t\t\t\tid: IDS.createWidgets.field,\n\t\t\t\tisModelField: true,\n\t\t\t\tserverType: \"time\",\n\t\t\t\tcolSpan: 6,\n\t\t\t},\n\t\t],\n\t},\n\t{\n\t\tname: \"Relational fields\",\n\t\tvalue: [\n\t\t\t{\n\t\t\t\tname: \"manyToOne\",\n\t\t\t\ttype: ItemTypes.ITEM,\n\t\t\t\ttitle: \"Many to one\",\n\t\t\t\timage: \"many-to-one.png\",\n\t\t\t\tid: IDS.createWidgets.field,\n\t\t\t\tisModelField: true,\n\t\t\t\tserverType: \"many-to-one\",\n\t\t\t\tcolSpan: 6,\n\t\t\t},\n\t\t\t{\n\t\t\t\tname: \"oneToMany\",\n\t\t\t\ttype: ItemTypes.ITEM,\n\t\t\t\ttitle: \"One to many\",\n\t\t\t\timage: \"one-to-many.png\",\n\t\t\t\tid: IDS.createWidgets.field,\n\t\t\t\tisModelField: true,\n\t\t\t\tserverType: \"one-to-many\",\n\t\t\t\tcolSpan: 6,\n\t\t\t},\n\t\t\t{\n\t\t\t\tname: \"manyToMany\",\n\t\t\t\ttype: ItemTypes.ITEM,\n\t\t\t\ttitle: \"Many to many\",\n\t\t\t\timage: \"many-to-many.png\",\n\t\t\t\tid: IDS.createWidgets.field,\n\t\t\t\tisModelField: true,\n\t\t\t\tserverType: \"many-to-many\",\n\t\t\t\tcolSpan: 6,\n\t\t\t},\n\t\t],\n\t},\n];\n","import Utils from \"./../utils\";\nimport { MODEL_TYPE, TYPE } from \"./../constants\";\n\nconst exemptedAttrs = [\n\t\"items\",\n\t\"cols\",\n\t\"serverType\",\n\t\"version\",\n\t\"type\",\n\t\"widgetAttrs\",\n\t\"current\",\n\t\"selectionList\",\n\t\"autoTitle\",\n\t\"isModelField\",\n\t\"elements\",\n\t\"relationship\",\n\t\"isDummy\",\n\t\"metaModel\",\n\t\"targetSearch\",\n\t\"layout\",\n\t\"massUpdate\",\n\t\"xPath\",\n\t\"tz\",\n];\n\nexport function getExtensionAttribute(patchList, target, keyName) {\n\tlet extend;\n\tfor (let i = 0; i < patchList.length; i++) {\n\t\tconst { elements = [], attributes: patchAttributes } = patchList[i];\n\t\tconst element = elements[0];\n\t\tif (element.name === \"attribute\" && patchAttributes.target === target) {\n\t\t\tconst attributes = element.attributes || {};\n\t\t\tif (attributes.name === keyName) {\n\t\t\t\textend = { ...patchList[i] };\n\t\t\t\tbreak;\n\t\t\t}\n\t\t}\n\t}\n\treturn extend;\n}\n\nfunction checkTarget(target, string, check) {\n\tconst splitTarget = Utils.exploreTarget(target);\n\tif (check) {\n\t\tconst newTarget = splitTarget[check];\n\t\tif (newTarget && newTarget === string) {\n\t\t\treturn true;\n\t\t}\n\t\treturn false;\n\t}\n\treturn target === string;\n}\n\nexport function isExtensionRemove(patchList, target, check) {\n\tlet flag = false;\n\tfor (let i = 0; i < patchList.length; i++) {\n\t\tconst { attributes, elements = [] } = patchList[i];\n\t\tconst element = elements[0];\n\t\tif (\n\t\t\telement.name === \"replace\" &&\n\t\t\tattributes &&\n\t\t\tcheckTarget(attributes.target, target, check)\n\t\t) {\n\t\t\tflag = true;\n\t\t\tbreak;\n\t\t}\n\t}\n\treturn flag;\n}\n\nexport function isExtensionMove(patchList, widget, parentWidget) {\n\tlet flag = false;\n\tfor (let i = 0; i < patchList.length; i++) {\n\t\tconst { elements = [] } = patchList[i];\n\t\tconst element = elements[0];\n\t\tlet sourceName = `/${Utils.getWidgetType(widget)}[@name='${widget.name}']`;\n\t\tif (parentWidget && parentWidget.name) {\n\t\t\tsourceName = `//${Utils.getWidgetType(parentWidget)}[@name='${\n\t\t\t\tparentWidget.name\n\t\t\t}']${sourceName}`;\n\t\t}\n\t\tif (\n\t\t\telement.name === \"move\" &&\n\t\t\telement.attributes &&\n\t\t\telement.attributes.source === sourceName\n\t\t) {\n\t\t\tflag = true;\n\t\t\tbreak;\n\t\t}\n\t}\n\treturn flag;\n}\n\nfunction getWidgetAttrsObject(widget, modelType = MODEL_TYPE.BASE) {\n\treturn getWidgetObject(widget, [], null, modelType);\n}\n\nexport function getExtendJson2({\n\ttarget,\n\ttype,\n\tposition,\n\tsource,\n\tname,\n\tvalue,\n\twidgetAttrs,\n\titemSource,\n\t...rest\n}) {\n\tconst attributes = { target };\n\tlet elements = [];\n\tif (widgetAttrs && ![\"replace\", \"attribute\", \"move\"].includes(type)) {\n\t\tif (Array.isArray(widgetAttrs)) {\n\t\t\telements = widgetAttrs\n\t\t\t\t.map((widget) => {\n\t\t\t\t\treturn getWidgetAttrsObject(widget);\n\t\t\t\t})\n\t\t\t\t.filter((e) => e);\n\t\t} else {\n\t\t\telements.push(getWidgetAttrsObject(widgetAttrs));\n\t\t}\n\t}\n\tif (elements.length || [\"replace\", \"attribute\", \"move\"].includes(type)) {\n\t\tconst object = {\n\t\t\tattributes,\n\t\t\ttype: \"element\",\n\t\t\tname: \"extend\",\n\t\t\telements: [\n\t\t\t\t{\n\t\t\t\t\ttype: \"element\",\n\t\t\t\t\tname: type,\n\t\t\t\t\tattributes: {\n\t\t\t\t\t\tposition,\n\t\t\t\t\t\tsource,\n\t\t\t\t\t\tname,\n\t\t\t\t\t\tvalue,\n\t\t\t\t\t},\n\t\t\t\t\telements,\n\t\t\t\t},\n\t\t\t],\n\t\t};\n\t\treturn JSON.parse(JSON.stringify(object));\n\t}\n\treturn;\n}\n\nexport function getWidgetObject(widget, other = [], view, modelType) {\n\tconst { id, image, elements = [], ...attributes } = widget;\n\tconst uiFields = [\n\t\t\"panel\",\n\t\t\"panel-related\",\n\t\t\"panel-dashlet\",\n\t\t\"panel-tabs\",\n\t\t\"panel-stack\",\n\t\t\"panel-include\",\n\t\t\"button\",\n\t\t\"label\",\n\t\t\"spacer\",\n\t\t\"separator\",\n\t\t\"menu\",\n\t\t\"item\",\n\t\t\"toolbar\",\n\t\t\"menubar\",\n\t\t\"divider\",\n\t];\n\tlet exempt = [...exemptedAttrs];\n\tlet field = uiFields.includes(attributes.type) ? attributes.type : \"field\";\n\tfield = uiFields.includes(attributes.serverType)\n\t\t? attributes.serverType\n\t\t: field;\n\tfield = widget.tab ? \"panel-tabs\" : field;\n\tif (attributes.type === TYPE.panelInclude) {\n\t\texempt = [...exempt, \"title\", \"colSpan\"];\n\t}\n\tif (field === TYPE.tabs) {\n\t\texempt = [...exempt, \"tab\", \"title\"];\n\t}\n\tif (field === \"spacer\") {\n\t\texempt = [...exempt, \"title\", \"isDummy\"];\n\t}\n\tif (field === TYPE.panelInclude) {\n\t\texempt = [...exempt, \"module\", \"name\"];\n\t}\n\tif ([TYPE.menu, TYPE.menuItem, TYPE.toolbar, TYPE.menubar].includes(field)) {\n\t\texempt = [...exempt, \"colSpan\"];\n\t}\n\tif ([TYPE.toolbar, TYPE.menubar].includes(field)) {\n\t\texempt = [...exempt, \"colSpan\", \"name\", \"title\"];\n\t}\n\tif ([TYPE.divider].includes(field)) {\n\t\texempt = [...exempt, \"colSpan\", \"title\"];\n\t}\n\tlet object = {};\n\tobject = {\n\t\tattributes: {\n\t\t\t...Utils.getWidgetAttrs(attributes, exempt, modelType),\n\t\t},\n\t\ttype: \"element\",\n\t\tname: field,\n\t\telements: [...other, ...elements],\n\t};\n\treturn object;\n}\n\nexport function generateView(widgets, items, modelType) {\n\tlet view = {};\n\tlet elements = [];\n\tif (items.length) {\n\t\titems.forEach((item) => {\n\t\t\tconst widget = widgets[item];\n\t\t\tlet subViews = [];\n\t\t\tif (widget) {\n\t\t\t\tif (widget.items && widget.items.length) {\n\t\t\t\t\tsubViews = generateView(widgets, widget.items, modelType);\n\t\t\t\t}\n\t\t\t\telements.push({\n\t\t\t\t\t...getWidgetObject(widget, subViews, view, modelType),\n\t\t\t\t});\n\t\t\t}\n\t\t});\n\t}\n\treturn elements;\n}\n","import React from \"react\";\nimport classNames from \"classnames\";\nimport Tooltip from \"@material-ui/core/Tooltip\";\nimport AddIcon from \"@material-ui/icons/Add\";\n\nimport { GridContainer, useGridWidget } from \"./Grid\";\nimport { translate } from \"../utils\";\nimport { useStoreState, useStore } from \"../store/context\";\nimport { MODEL_TYPE } from \"../constants\";\n\nconst panelAttrs = { cols: 1 };\n\n/**\n * Panel Component\n * Used As Container to group Field Component like form group\n */\nfunction TabPanelComponent(props) {\n\tconst WidgetComponent = useGridWidget();\n\tconst { modelType } = useStoreState();\n\tconst { id, attrs, isDragging, isTab = false, addTabPanel, ...rest } = props;\n\tconst { title, items = [] } = attrs;\n\tlet { current } = attrs;\n\tconst tabs = [...items.slice()].reduce(\n\t\t(all, tab) => all.concat([tab, 0]),\n\t\t[0]\n\t);\n\tconst {\n\t\tstate: { highlightedOption },\n\t\tupdate,\n\t} = useStore();\n\n\t// reuse common tab attributes\n\tconst getTabAttributes = (id, index) => ({\n\t\tkey: !id ? `${id}${index}` : id,\n\t\tid,\n\t\tmeta: {\n\t\t\thorizontal: true,\n\t\t},\n\t\tindex,\n\t\tpanelId: props.id,\n\t\tpanelColumns: attrs.cols,\n\t\ttabId: props.id,\n\t});\n\tlet activeTabIndex = items.indexOf(current);\n\t// if active tab index not found, take first element as active one\n\tif (activeTabIndex === -1) {\n\t\tactiveTabIndex = 0;\n\t\tcurrent = items.length ? items[0] : 0;\n\t}\n\tReact.useEffect(() => {\n\t\tif (modelType === MODEL_TYPE.BASE && props._type !== \"customField\") {\n\t\t\tupdate((draft) => {\n\t\t\t\tdraft.tabPanelItems = items;\n\t\t\t});\n\t\t}\n\t}, [update, items, props._type, modelType]);\n\n\treturn (\n\t\t<React.Fragment>\n\t\t\t{title && (\n\t\t\t\t<div\n\t\t\t\t\tclassName={classNames(\"panel-header panel-tab-header\", {\n\t\t\t\t\t\tinline: isTab,\n\t\t\t\t\t})}\n\t\t\t\t>\n\t\t\t\t\t{title}\n\t\t\t\t</div>\n\t\t\t)}\n\t\t\t{!isTab && (\n\t\t\t\t<GridContainer className={\"tabs-panel panel-body\"} attrs={panelAttrs}>\n\t\t\t\t\t<div className={classNames(\"tabs\")}>\n\t\t\t\t\t\t{tabs.map(\n\t\t\t\t\t\t\t(tab, i) =>\n\t\t\t\t\t\t\t\tWidgetComponent && (\n\t\t\t\t\t\t\t\t\t<WidgetComponent\n\t\t\t\t\t\t\t\t\t\t{...rest}\n\t\t\t\t\t\t\t\t\t\t{...getTabAttributes(tab, i)}\n\t\t\t\t\t\t\t\t\t\tisTab={true}\n\t\t\t\t\t\t\t\t\t\tclassName={\n\t\t\t\t\t\t\t\t\t\t\tcurrent === tab && current === highlightedOption?.id\n\t\t\t\t\t\t\t\t\t\t\t\t? \"search-overlay\"\n\t\t\t\t\t\t\t\t\t\t\t\t: current === tab\n\t\t\t\t\t\t\t\t\t\t\t\t? \"active-tab\"\n\t\t\t\t\t\t\t\t\t\t\t\t: \"\"\n\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t)\n\t\t\t\t\t\t)}\n\t\t\t\t\t\t{!(\n\t\t\t\t\t\t\tmodelType === MODEL_TYPE.BASE && props._type !== \"customField\"\n\t\t\t\t\t\t) && (\n\t\t\t\t\t\t\t<div style={{ display: \"flex\", alignItems: \"center\" }}>\n\t\t\t\t\t\t\t\t<Tooltip title={translate(\"Add tab\")} arrow>\n\t\t\t\t\t\t\t\t\t<AddIcon onClick={() => addTabPanel({ attrs, id })} />\n\t\t\t\t\t\t\t\t</Tooltip>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t)}\n\t\t\t\t\t</div>\n\t\t\t\t\t{items.length > 0 && WidgetComponent && (\n\t\t\t\t\t\t<WidgetComponent\n\t\t\t\t\t\t\tclassName={highlightedOption?.id === current && \"search-overlay\"}\n\t\t\t\t\t\t\t{...rest}\n\t\t\t\t\t\t\t{...getTabAttributes(current, activeTabIndex)}\n\t\t\t\t\t\t/>\n\t\t\t\t\t)}\n\t\t\t\t</GridContainer>\n\t\t\t)}\n\t\t</React.Fragment>\n\t);\n}\n\n//panel tabs-panel\nexport default TabPanelComponent;\n"],"sourceRoot":""}