{"version":3,"sources":["Properties/widgetList.js","Properties/propertyFields.js","Properties/properties.helper.js","Properties/fa-icons.js","constants.js","Toolbar/api.js","Editor/utils.js","Editor/index.js","Panels/MainPanel.js","common.func.js","components/SearchView.js","Toolbar/Select.js","Toolbar/customModelSearch.js","Toolbar/ViewSelection.js","Toolbar/Toolbar.js","custom-hooks/useKeyPress.js","Toolbar/DeleteConfirmation.js","store/optimizeExtension.js","Toolbar/ToolbarContainer.js","components/SelectComponent.js","components/TranslationGrid.js","Properties/widgets/StaticSelection.js","Properties/widgets/Select.js","Properties/widgets/Content.js","Properties/widgets/CheckboxField.js","Properties/widgets/SelectionWidget.js","Properties/widgets/OnlyIf.js","Properties/index.js","Panels/PropertiesPanel/PropertiesView.js","Panels/PropertiesPanel/PropertiesPanelView.js","components/FieldComponent.js","Panels/AttributesPanel/Field.js","Panels/AttributesPanel/AddPanelView.js","App.js","index.js","services/http.js","services/axelor.rest.js","store/context.js","store/xpathGenerator.js","utils.js","components/Grid.js","components/Panel.js","store/computeXML.js","store/validation.js","Properties/list.js","components/Menu.js","components/Registery.js","components/PopoverAlert.js","components/Widget.js","components/Form.js","components/RelationalFieldGridView.js","components/Field.js","fields.js","store/extensionGenerator.js","Properties/fieldTypes.js","components/TabPanel.js"],"names":["selectWidget","data","boolean","integer","string","text","binary","date","datetime","time","button","decimal","Name","props","StringField","name","title","required","readOnly","regex","regexErrorMessage","unique","isDisabled","properties","editWidgetType","metaFieldStore","modelType","isStudioLite","MODEL_TYPE","BASE","CUSTOM","id","type","requiredFor","Type","column","selection","formatter","value","tab","entityIndex","indexOf","substring","SelectableType","StaticSelectField","defaultOption","disableClearable","DummyType","DataTypes","Title","translationView","DefaultValue","dependModelType","StudioApp","ObjectSelectionField","ref","Help","Sequence","IntegerField","Roles","multiple","ValueExpression","Selection","SelectField","valueField","Widget","widgetList","OnChange","canAddNew","commaSeparated","OnNew","Min","Max","JsonRelationalField","BooleanField","getValue","change","_type","serverType","length","Domain","Prompt","parentField","SelectionIn","showInCustomField","Value","ValueAdd","ValueDel","Refresh","Active","shouldRender","list","xPath","includes","TargetJsonModel","displayField","TargetModel","property","GridView","needsTargetModel","relationalFields","OneToMany","ManyToMany","ManyToOne","FormView","Required","defaultValue","ColumnSequence","ReadOnly","Hidden","VisibleInGrid","ShowIf","HideIf","If","RequiredIf","ReadOnlyIf","IncludeIf","ValidIf","OnlyIf","_domain","showInBaseView","Css","Editable","ColSpan","Array","fill","map","_","i","toString","getOptionLabel","option","parentPanel","TYPE","toolbar","menubar","ItemSpan","IsGenerateMenu","MenuBuilderTitle","depends","dependValue","requiredWhen","MenuBuilderParent","shouldFetchInStart","limit","getMenuBuilderTitle","parent","find","item","parentText","filter","f","ShowTitle","CanSearch","IfModule","Height","Action","Field","CanMove","OrderBy","IncludeView","IncludeFrom","Sidebar","Model","Color","Background","Strong","Image","fontAwesome","panel","tabs","field","dumpField","form","panelStack","panelDashlet","panelRelated","panelInclude","menu","menuItem","divider","ItemTypes","CONTAINER","ROOTCONTAINER","ITEM","DUMMY","FIELD_TYPE","number","spacer","separator","hilite","PANEL_TYPE","stack","flow","grid","custom","GRID_SIZE","max","IDS","createWidgets","Symbol","customForm","PANEL_PROPS","colSpan","cols","image","items","layout","mappedBy","undefined","model","modelField","relationship","widgetAttrs","JSON","stringify","showTitle","itemSpan","OneToOne","typeReplacer","include","MANY_TO_MANY","MANY_TO_ONE","ONE_TO_ONE","ONE_TO_MANY","ENTITY_TYPE","META","DEFAULT_VALUE","readonly","hidden","sidebar","canCollapse","stacked","canMove","canSearch","multiline","conditionProperties","readonlyIf","requiredIf","hideIf","collapseIf","otherNoQuoteProps","ACTIONS","MODEL","GLOBAL","OTHER","metaJsonFieldService","AxelorService","metaModelService","appStudioService","appUserService","metaViewService","modelService","metaAttrsService","metaSelectService","selectionBuilderService","metaTranslationService","fetchCustomFields","fullName","search","sortBy","saveCustomModel","a","save","res","status","fields","getFields","all","$version","version","e","Promise","updatedField","response","updatedFields","fetchJSONFields","ids","update","record","criteria","push","fieldName","operator","then","schema","generateCustomModelSchema","draft","l","widgets","getMenuBuilder","studioMenu","0","loader","removeCustomModel","removeAll","getEnableAppBuilder","payload","_domainContext","code","offset","studioResult","isArray","enableStudioApp","generateMenuChange","customModel","_context","_model","_id","action","context","fetchCustomModel","modelId","handleError","fetch","result","fetchViews","view","viewCriteria","viewList","views","Utils","getViews","fetchAttrsList","conditionPropertiesKeys","Object","keys","conditionPropertiesValues","values","startsWith","endsWith","replace","saveAttrsList","saveAll","deleteAttrsList","fetchLanguages","d","getTranslationList","keyList","saveTranslationList","deleteTranslationList","fetchUserPreferences","info","userInfo","userResponse","getSelectionText","metaSelect","selectionText","payloadData","actionResponse","_properties","customScrollTo","element","scrollableParent","includeHidden","style","getComputedStyle","excludeStaticParent","position","overflowRegex","document","body","parentElement","test","overflow","overflowY","overflowX","getScrollParent","window","requestAnimationFrame","scrollTo","top","offsetTop","behavior","useStyles","makeStyles","uiContainer","display","flexDirection","alignSelf","container","height","loaderContainer","justifyContent","zIndex","border","backgroundColor","bottom","left","right","alignItems","emptyFormInfo","minHeight","FormViewUI","design","store","useStore","classes","customPanelRef","useRef","state","customFieldWidgets","errorList","formInfo","customFieldWidgetsExists","useEffect","current","focus","className","classNames","CircularProgress","index","attrs","onSelect","dragWidget","hoverWidget","editWidget","onMove","onDrag","onHover","onWidgetChange","setHoverAttr","addTabPanel","Form","tabIndex","customFieldItems","React","memo","toolbarOffset","useState","width","paddingRight","Editor","useDebounceEffect","handler","interval","isMounted","timer","setTimeout","clearTimeout","theme","root","palette","background","paper","input","borderRadius","borderColor","titleHeader","borderBottom","listItem","paddingTop","paddingBottom","closeText","textTransform","tabContainer","labelStyle","centerElement","padding","tabsLabel","TabPanel","children","other","role","aria-labelledby","ResponsiveDialog","onChange","handleClose","total","isTypeOnClick","isDataLoading","useTheme","fullScreen","useMediaQuery","breakpoints","down","handleItemClick","useCallback","canNext","canPrev","getLabel","Dialog","maxWidth","fullWidth","open","onClose","DialogTitle","DialogContent","Grid","xs","flex","TextField","size","searchText","variant","setSearchText","target","InputProps","startAdornment","InputAdornment","Search","placeholder","IconButton","onClick","onPrevious","disabled","onNext","Tabs","orientation","currentTab","onTabChange","label","Tab","key","Box","List","ListItem","dense","ListItemText","primary","Typography","DialogActions","Button","autoFocus","color","autoComplete","fontSize","autoCompleteRoot","marginLeft","inputView","popperView","searchFilter","options","filterData","onSearch","loading","setLoading","setList","searchMore","setSearchMore","setOffset","setTotal","models","translate","uniqueList","uniqBy","service","_data","handleNext","newOffset","handlePrevious","debounceHandler","handleChange","handleTextChange","Fragment","clearOnEscape","inputFocused","clearIndicator","popupIndicator","endAdornment","popper","noOptions","onInputChange","renderInput","params","inputProps","filterOptions","getOptionSelected","modelSearch","modelResult","modelIndex","findIndex","m","packageName","splice","entityType","actualType","modelTypes","startLoader","clearHistory","reset","modelName","handleModelSelect","exView","initialItems","initialWidgets","customFields","extensionXML","extensionView","originalXML","selectedView","metaFields","extensionMoves","attrsList","translationList","initialTranslationList","removedTranslationList","related","rest","_fields","parse","typeName","toLowerCase","targetModel","handleViewSelect","generateXMLToViewSchema","translationNames","widget","originalViewData","convert","xml2json","xml","compact","fullTagEmptyElement","_viewSearch","fieldList","generateXpath","viewFilter","modelFilter","metaFieldFilter","handleMetaFieldSelect","newId","uniqueId","handleTypeSelect","updater","handleViewFilterData","computed","extension","filterSelectedOptions","toolbarContainer","flexWrap","toolItemView","crudIcon","cursor","selectionContainer","toolbarActions","disableBtn","ToolbarButton","saveView","saveCustomFieldView","removeView","onNew","showAlert","isRemoveDisabled","xmlId","Boolean","isNewDisabled","isSaveDisabled","obj","callback","node","callbackRef","useLayoutEffect","handleKeyPress","event","some","ctrlKey","preventDefault","targetNode","addEventListener","removeEventListener","useKeyPress","classnames","refresh","undo","pastLength","redo","futureLength","minWidth","DeleteConfirmation","onOk","message","aria-describedby","DialogContentText","hasIndex","path","split","isSameAsOriginal","originalWidgets","attributes","itemExplore","exploreTarget","widgetExplore","self","attributeName","dashToCamelCase","widgetValue","maskedValue","maskName","getUpdatedAttrsList","newAttrsList","removedAttrsList","moves","movesMap","Map","currentWidgets","forEach","widgetId","eGeneratePath","getWidgets","move","convertConditionName","newMove","assign","set","moveExplore","pathText","endIndex","getName","fieldIndex","attr","isOriginal","isCurrent","selectValueRegEx","newAttrsIndex","match","changedAttrsList","optimizeExtension","processed","explore","flag","p","_list","_item","lastItem","k","filterListForAttribute","canRemoveReplace","insertIndex","elements","source","moveIndex","removeIndex","filterListForRemove","customFieldService","getChangedTranslationList","initialList","deletedTranslationList","changedTranslationList","initialItem","language","deleteConfirmationDialog","setDeleteConfirmationDialog","queryModel","closeLoader","dialog","callbackfn","getDefaultProperties","clearView","error","removedCustomFields","isTabsPanelEmpty","panelTab","v","studioOutput","isSave","getCustomModelFields","propertyValues","Set","formProperties","getFormProperties","isGenerateMenu","menuBuilderTitle","parentMenu","menuBuilderParent","reload","errorMessage","exemptAttributes","isCreatedFromStudio","viewSearch","patch","generateView","processXML","json2xml","fetchResult","metaView","originalSchema","generateViewFromJson","getXML","isAttrsChanged","conditionalValues","isTranslationChanged","getExistingExtension","json","handleNew","customWidgets","fromEntries","entries","isPanelTab","extraProps","failedRes","r","handleConfirmationClose","deleteView","handleRemoveConfirmation","dangerouslySetInnerHTML","__html","renderDialog","past","future","createFilterOptions","marginTop","popperAutoComplete","marginBottom","groupTitle","fontWeight","SelectComponent","_props","preData","propertyList","setPropertyList","useMemo","val","setData","setsearchText","moreDialog","setMoreDialog","initialFetch","setInitialFetch","isLoading","setIsLoading","stateModelType","setTabIndex","handleInputChange","reason","getSelectValue","join","fetchOptions","currentModel","modelFilters","uniqueData","getActions","fetchedData","flat","optionDebounceHandler","getInputAsOption","handleSearch","_value","fromDialog","inputValue","updatedValue","gridView","getDefaultGridFormName","formView","contextFieldTarget","contextFieldTargetName","contextFieldValue","contextFieldTitle","handleTabChange","onOpen","groupBy","forcePopupIcon","freeSolo","clearOnBlur","filtered","showMore","o","camleCaseString","InputLabelProps","renderGroup","group","row","languageText","textAlign","TranslationGrid","keyValue","translations","setTranslations","handleTranslationChange","_translations","newList","translationIndex","handleTranslationUpdate","languageList","lang","onBlur","autoCompleteInput","autoCompleteOption","StaticSelection","helper","ColorTag","groupLabel","autoHighlight","getProperty","renderOption","marginRight","select","StaticSelect","selectClassName","optionLabel","optionValue","setVal","Autocomplete","renderValue","Chip","defaultProps","WKF_COLORS","textField","Content","forwardRef","connectDragSource","connectDropTarget","handleRow","deleteRow","updateSelection","addRow","rowsCount","elementRef","useImperativeHandle","getNode","onKeyDown","aria-label","iconButton","clsx","whiteSpace","textOverflow","editable","icon","fontAwesomeList","DropTarget","hover","monitor","component","dragIndex","getItem","hoverIndex","hoverBoundingRect","getBoundingClientRect","hoverMiddleY","hoverClientY","getClientOffset","y","moveCard","connect","dropTarget","DragSource","beginDrag","dragSource","isDragging","CheckboxField","openAlert","setAlertOpen","uncheckDialog","alertMessage","handleDialogOk","getPropertyValue","fieldValue","handleOnChange","Checkbox","checked","resize","alertPaper","checkbox","content","dialogContent","ok","btn","dialogActions","paddingLeft","SelectionWidget","rows","setRows","openGrid","setOpenGrid","isSelectionField","cloneRows","dragCard","saveRow","createRows","trim","optionKeyValue","titleLower","pop","addOptions","validateErrors","CardContent","FormControlLabel","control","startIcon","updateWidget","translationInput","translationInputView","outlinedRoot","borderWidth","notchedOutline","focused","switchBase","track","iconOutlined","panelTitle","panelMargin","margin","disableInput","translateButton","staticSelectMenuItem","textFieldInput","booleanInputLabel","PropertiesContext","createContext","isValueGenerated","StringInput","onTranslationRemove","clearable","confirm","setConfirm","min","useContext","Label","handleTranslationClick","newValue","generateFieldUniqueTitle","handleTranslationRemove","removeTranslation","helperText","minRows","isNaN","Number","Switch","RenderPropertyField","errors","checkDepend","checkModel","PropertiesProvider","Provider","Properties","selectedType","tz","typeFieldIndex","overview","fieldOptions","widgetAttributes","inputLabel","labelWidth","setLabelWidth","changedPropertyName","newProperties","offsetWidth","w","hasPropertyToShow","capitalizeFirst","resizeStyle","borderLeft","drawerPaper","propertyToggle","transform","transformOrigin","userSelect","boxShadow","drawerOpen","setDrawerOpen","setWidth","setHeight","setCSSWidth","checkWindowSize","prev","innerWidth","onResizeStop","direction","enable","Drawer","anchor","transitionDuration","fieldImage","backgroundRepeat","backgroundSize","backgroundPosition","getImageURL","FieldComponent","targetName","Tooltip","arrow","placement","backgroundImage","attributeItem","isResponsive","fieldTypes","modelFields","Container","fieldType","editorType","showField","isCoreField","isPalleteField","Divider","toolbarWrapper","panelContainer","propertiesPanel","mainPanel","createTheme","typography","fontFamily","AppContent","toolbarHeight","setToolbarHeight","gridRef","mainContainerRef","toolbarSelector","alertUser","returnValue","querySelector","resizeObserver","ResizeObserver","offsetHeight","observe","unobserve","scope","angular","$viewScope","confirmDirty","cancelCallback","axelor","dialogs","_t","confirmed","console","URL","location","searchParams","get","modelTitle","getParams","menuBuilder","init","App","DndProvider","backend","Backend","ThemeProvider","ReactDOM","render","getElementById","lastCookieString","headers","Accept","lastCookies","readCookie","cookieString","cookie","reduce","parts","joinURL","subURL","services","this","baseURL","url","method","axios","request","credential","localStorage","username","password","login","interceptor","resolve","catch","relogin","setItem","removeItem","post","_subURL","records","logout","StoreContext","useStoreState","StoreProvider","setState","produce","useMutableState","hoverAttr","getAllChildrenIds","widgetType","collectIds","concat","onExtension","moveIds","generateExtension","generateHistory","isCustomField","extendList","setErrorList","caseConverter","isExtensionView","keyReplacer","valueConverter","parentId","x","Math","child","panelId","setPresent","object","original","destination","resolver","isMoved","_widgets","isNew","checkExclusive","isDrop","_extendList","_attrs","dragWidgetProps","extraAttr","_eWidgetAttr","_attrsWidgetAttr","reorderGrid","validateParentPanelItems","allWidgets","tabId","onRemove","widgetItems","unshift","isPanel","childrenIds","arrangeItems","arrangeGrid","validateOnRemove","getItemType","itemId","isFirstLevel","hasSameNameInParentItems","originalName","getSameItemIndex","getTypeWiseItemIndex","getWidgetType","isUniquePanel","canStopParentLink","findRoot","widgetIds","_widget","itemPath","itemIndex","word","str","toUpperCase","isCamelCase","convertedText","camelCase","textToConvert","slice","charAt","getSpacer","removeWidget","isLastItemRemove","isLastItemSpacer","lastWidget","deleteItem","otherProps","targetWidget","validate","dragWidgetItems","_items","destinationItems","meta","hoverCellRowIndex","relatedColSpan","dragWidgetIndex","cellIndice","removedWidgetAttrsColSpan","spacerWidgetAttrsColSpan","hoverType","existingColspan","newIds","widgetIndex","beforeWidgets","afterWidgets","cell","cellIndex","rowIndex","isSpacer","lastItemIndex","_beforeWidgets","el","acc","collectWidgets","isRemovedFromSameList","sourcePanel","sourceItems","sourceItemIndex","isLastItem","isLastItemInSamePanel","hoverParent","isLastItemRemovable","lastItemMetaGrid","columnIndex","colIndex","horizontal","ceil","hoverPath","newWidgetIds","hoverWidgetParentItems","hoverWidgetId","actualHoverWidget","shouldInsertInParent","hoverPathInfo","targetInfo","isCreateWidget","shouldAdd","parentPanelItemSpan","processMoves","exclusive","getColSpan","defaultColspan","getCols","_panelId","typeLateral","formType","formItems","tabItems","_ID","isTab","replacer","minSize","maxSize","camelToDashCase","editorKeyReplacer","_keyIndex","isDummyField","types","getCustomWidget","exempt","exemptedAttrs","isAttrHasDefaultValue","parentValue","shouldCheckParent","_obj","caseString","g","isDefaultValue","targetSplit","getElementToWidget","itemList","fieldTarget","itemTarget","_key","elementType","getElementName","TYPE_REPLACER","getElementTypes","autoTitle","getTitle","getSpecialType","getXMLToViewItems","exclude","getExtensionElements","chars","floor","random","randomString","isForm","isJson","modelString","viewName","dasherize","xmlString","indent","format","getWidgetAttrs","isModelField","squareIndex","additionalProps","countSequence","sequence","except","formWidth","getPatchList","xmlJson","filterFormPatch","patchList","getCurrentFormAttributes","mergeFormAttributes","formPatch","targetIndex","remove","isSamePositionInOriginal","hoverItemIndex","defaultType","getReferenceProperty","checkTarget","checkString","which","getChangeList","extensionXml","elems","moveElement","DEFAULTS","col","parentItemSpan","GridContainer","useGridWidget","WidgetComponent","setWidgetComponent","module","default","draggedWidgetAttrsColSpan","gridSize","columns","isStackLayout","spacerWidth","colWidth","isStack","_parentItemSpan","span","getItemColspan","remainingSpan","$cell","dummy","dummyPanel","fillColspan","addItem","occupiedSpan","remainSpan","fullGrid","draggable","upRow","midRow","addCell","$row","j","totalSpan","getFullGrid","c","gridRows","arr","cellPadding","cellSpacing","indice","isSeparator","panelColumns","canRemove","inline","setAttributeOnNewWidget","inserted","_inserted","exemptedAttributes","attrIndex","cleatVirtualAction","generateNestedView","_subItems","getWidgetObject","getExtendJson2","insertOnNewPanel","lst","addErrorMessage","requiredNegation","RegExp","stringOption","existsCheck","uiOptions","conditions","valueExpr","roles","integerOption","decimalOption","booleanOption","datetimeOption","panelOption","panelStackOption","panelTabOption","buttonOption","seperatorOption","spacerOption","labelOption","viewerOption","manyToOneOption","manyToManyAndOneToManyOption","customRelationOption","formOption","actions","commonOption","dummyOption","viewOption","gridOption","panelDashletOption","menuItemOption","dividerOption","menuOption","panelRelatedOption","panelIncludeOption","hiliteOption","openMenu","setOpenMenu","handleToggleMenu","stopPropagation","Registery","dump_field","Panel","Menu","dialogContainer","PopoverAlert","anchorEl","handleYes","Popover","anchorOrigin","vertical","CardSource","canDrag","WIDGET_TYPE","isGrid","endDrag","didDrop","newProps","CardTarget","maybeOutdatedDragIndex","dragPanelId","dragId","dragAttrs","hoverPanelId","hoverId","hoverAttrs","panelSet","maxIndex","gridTab","rowCount","stateItems","widgetKey","dragWidgetAttrs","isOver","shallow","parentWidgetAttrs","dragAttrsWidgetAttrs","canDrop","highlighted","hovered","DefaultWidgetComponent","setAnchorEl","visible","registryField","Registry","componentProps","isFormField","isEdit","isTabWidget","isTabWidgetContent","showRemove","isExist","_isTab","isDummy","edit","active","dragWidgetAttrsColSpan","hoverWidgetParentItemSpan","canWidgetFit","currentTarget","SimpleWidget","DraggableWidget","compose","FormComponent","rootPanel","mainItems","excludedUITypes","showInGrid","visibleInGrid","RelationalFieldGridView","targetJsonModel","gridItems","setGridItems","gridTitle","setGridTitle","actionResult","jsonFields","jsonAttrs","displayFields","allFields","getGrid","TextInput","MultiTextInput","Spacer","Separator","MenuItem","Hilite","strong","DefaultWidget","alt","src","getWidgetAttrsObject","itemSource","uiFields","subViews","panelAttrs","TabPanelComponent","getTabAttributes","activeTabIndex"],"mappings":"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QACNC,MAAO,QACPC,UAAU,EACVsC,IAAK,+BACLS,WAAY,cAGAoG,GAAQxH,YAAkB,CACtC7B,KAAM,QACNC,MAAO,QACPf,KAAM,CAAC,UAAW,UAAW,UAAW,UAAW,SAAU,UAGjDoK,GAAazH,YAAkB,CAC3C7B,KAAM,aACNC,MAAO,aACPf,KAAM,CAAC,UAAW,UAAW,UAAW,UAAW,SAAU,UAGjDqK,GAAS5F,YAAa,CAClC3D,KAAM,SACNC,MAAO,SACPoC,gBAAiBxB,IAAWC,OAqD5B0I,O,iCEgCcC,IArxBK,CACnB,WACA,kBACA,oBACA,kBACA,oBACA,YACA,SACA,kBACA,mBACA,gBACA,iBACA,YACA,eACA,yCACA,YACA,aACA,eACA,uBACA,uBACA,wBACA,qBACA,gBACA,gBACA,iBACA,cACA,WACA,aACA,gBACA,uBACA,uBACA,yBACA,yBACA,0BACA,uBACA,wBACA,qBACA,gBACA,gBACA,iBACA,cACA,YACA,gBACA,cACA,cACA,sBACA,iCACA,cACA,QACA,uBACA,gBACA,cACA,mBACA,SACA,cACA,UACA,eACA,iBACA,aACA,UACA,UACA,aACA,aACA,eACA,eACA,eACA,eACA,eACA,mBACA,kBACA,kBACA,qBACA,4BACA,SACA,UACA,aACA,oBACA,UACA,YACA,gBACA,kBACA,aACA,gBACA,mBACA,eACA,sBACA,aACA,eACA,WACA,eACA,iBACA,UACA,UACA,UACA,UACA,cACA,gBACA,aACA,eACA,SACA,SACA,cACA,gBACA,cACA,cACA,SACA,gBACA,SACA,gBACA,cACA,sBACA,sBACA,gBACA,qBACA,sBACA,YACA,kBACA,SACA,gBACA,gBACA,iBACA,yBACA,yBACA,0BACA,uBACA,cACA,qBACA,eACA,QACA,aACA,oBACA,iBACA,YACA,mBACA,eACA,eACA,aACA,iBACA,WACA,kBACA,WACA,kBACA,oBACA,kBACA,oBACA,yBACA,yBACA,0BACA,uBACA,kBACA,kBACA,mBACA,gBACA,WACA,YACA,YACA,cACA,oBACA,iBACA,eACA,aACA,WACA,WACA,WACA,oBACA,kBACA,SACA,UACA,eACA,aACA,cACA,YACA,SACA,UACA,aACA,aACA,eACA,gBACA,kBACA,cACA,gBACA,aACA,cACA,oBACA,YACA,UACA,eACA,sBACA,iBACA,qBACA,UACA,gBACA,UACA,UACA,WACA,SACA,aACA,eACA,cACA,cACA,UACA,cACA,YACA,eACA,aACA,gBACA,aACA,UACA,YACA,kBACA,cACA,cACA,qBACA,uBACA,aACA,YACA,UACA,UACA,aACA,WACA,gBACA,gBACA,YACA,cACA,gBACA,mBACA,qBACA,qBACA,YACA,YACA,UACA,SACA,UACA,cACA,iBACA,wBACA,0BACA,YACA,kBACA,mBACA,0BACA,SACA,eACA,gBACA,QACA,cACA,gBACA,uBACA,qBACA,mBACA,kBACA,SACA,UACA,YACA,iBACA,UACA,oBACA,kBACA,iBACA,kBACA,kBACA,kBACA,YACA,gBACA,kBACA,oBACA,uBACA,kBACA,eACA,iBACA,kBACA,iBACA,gBACA,aACA,UACA,YACA,UACA,uBACA,aACA,iBACA,UACA,oBACA,YACA,WACA,WACA,YACA,cACA,YACA,cACA,iBACA,mBACA,UACA,kBACA,eACA,kBACA,cACA,aACA,gBACA,oBACA,aACA,cACA,aACA,WACA,SACA,QACA,UACA,WACA,gBACA,gBACA,QACA,eACA,UACA,SACA,gBACA,YACA,gBACA,mBACA,YACA,YACA,WACA,WACA,aACA,WACA,YACA,iBACA,wBACA,0BACA,wBACA,mBACA,oBACA,cACA,UACA,WACA,cACA,iBACA,iBACA,mBACA,iBACA,iBACA,kBACA,eACA,kBACA,kBACA,oBACA,iBACA,qBACA,kBACA,iBACA,iBACA,qBACA,aACA,WACA,YACA,gBACA,WACA,aACA,eACA,aACA,UACA,gBACA,WACA,eACA,iBACA,iBACA,iBACA,mBACA,oBACA,iBACA,qBACA,WACA,WACA,cACA,cACA,aACA,eACA,SACA,WACA,UACA,WACA,YACA,cACA,UACA,iBACA,SACA,eACA,iBACA,uBACA,cACA,aACA,YACA,YACA,SACA,cACA,SACA,gBACA,SACA,cACA,YACA,YACA,mBACA,UACA,aACA,WACA,aACA,gBACA,cACA,eACA,eACA,eACA,gBACA,iBACA,gBACA,UACA,cACA,qBACA,YACA,WACA,UACA,cACA,aACA,aACA,oBACA,UACA,qBACA,qBACA,sBACA,mBACA,gBACA,WACA,YACA,kBACA,gBACA,oBACA,UACA,SACA,gBACA,WACA,aACA,eACA,UACA,iBACA,iBACA,mBACA,mBACA,YACA,cACA,YACA,YACA,YACA,WACA,aACA,eACA,gBACA,sBACA,WACA,kBACA,kBACA,oBACA,cACA,YACA,kBACA,UACA,WACA,YACA,kBACA,gBACA,mBACA,WACA,aACA,YACA,iBACA,kBACA,oBACA,mBACA,0BACA,cACA,YACA,WACA,mBACA,aACA,eACA,iBACA,iBACA,mBACA,eACA,eACA,WACA,WACA,kBACA,oBACA,SACA,YACA,YACA,mBACA,qBACA,aACA,WACA,kBACA,WACA,eACA,eACA,gBACA,oBACA,mBACA,eACA,iBACA,sBACA,WACA,UACA,iBACA,mBACA,UACA,UACA,iBACA,iBACA,mBACA,aACA,eACA,WACA,kBACA,kBACA,QACA,YACA,cACA,qBACA,uBACA,WACA,gBACA,iBACA,QACA,YACA,aACA,WACA,aACA,YACA,kBACA,mBACA,aACA,gBACA,YACA,YACA,aACA,YACA,WACA,eACA,gBACA,aACA,SACA,UACA,YACA,iBACA,kBACA,YACA,SACA,gBACA,SACA,WACA,WACA,SACA,YACA,UACA,cACA,YACA,YACA,kBACA,iBACA,YACA,UACA,YACA,YACA,WACA,eACA,sBACA,kBACA,oBACA,YACA,YACA,YACA,UACA,kBACA,kBACA,qBACA,mBACA,YACA,aACA,mBACA,cACA,YACA,aACA,iBACA,aACA,cACA,WACA,WACA,aACA,gBACA,aACA,cACA,oBACA,qBACA,iBACA,mBACA,UACA,oBACA,qBACA,qBACA,sBACA,cACA,eACA,eACA,sBACA,uBACA,aACA,gBACA,mBACA,aACA,WACA,aACA,YACA,cACA,oBACA,oBACA,UACA,eACA,qBACA,oBACA,iBACA,YACA,WACA,kBACA,mBACA,kBACA,iBACA,iBACA,mBACA,UACA,iBACA,mBACA,iBACA,mBACA,iBACA,wBACA,eACA,YACA,cACA,WACA,iBACA,iBACA,aACA,WACA,YACA,gBACA,SACA,UACA,WACA,UACA,cACA,gBACA,mBACA,cACA,iBACA,gBACA,QACA,cACA,aACA,eACA,iBACA,mBACA,mBACA,mBACA,mBACA,mBACA,uBACA,sBACA,sBACA,yBACA,gCACA,gBACA,iBACA,mBACA,iBACA,eACA,YACA,WACA,kBACA,oBACA,qBACA,uBACA,UACA,iBACA,iBACA,gBACA,eACA,kBACA,eACA,eACA,WACA,iBACA,qBACA,WACA,aACA,UACA,YACA,iBACA,YACA,WACA,SACA,SACA,YACA,mBACA,kBACA,QACA,YACA,aACA,oBACA,cACA,eACA,UACA,sBACA,gBACA,YACA,YACA,gBACA,cACA,YACA,SACA,SACA,UACA,iBACA,mBACA,aACA,YACA,eACA,iBACA,gBACA,WACA,WACA,aACA,WACA,kBACA,gBACA,aACA,YACA,mBACA,kBACA,WACA,kBACA,UACA,QACA,0BACA,iBACA,gBACA,eACA,aACA,YACA,WACA,YACA,cACA,gBACA,oBACA,UACA,iBACA,kBACA,oBACA,qBACA,qBACA,oBACA,aACA,SACA,eACA,gBACA,gBACA,aACA,YACA,UACA,iBACA,kBACA,yBACA,WACA,QACA,eACA,UACA,SACA,WACA,aACA,kBACA,sB,+BClxBD,giBACO,IAAMnC,EAAO,CACnBoC,MAAO,QACPC,KAAM,aACNC,MAAO,QACPC,UAAW,aACXC,KAAM,OACNC,WAAY,cACZC,aAAc,gBACdC,aAAc,gBACdC,aAAc,gBACdC,KAAM,OACNC,SAAU,OACVC,QAAS,UACT7C,QAAS,UACTD,QAAS,WAGG+C,EAAY,CACxBC,UAAW,QACXC,cAAe,iBACfC,KAAM,OACNC,MAAO,SAIKC,EAAa,CACzBtL,OAAQ,SACRuL,OAAQ,SACRjL,OAAQ,SACRkL,OAAQ,SACR1L,QAAS,UACT2L,UAAW,YACXC,OAAQ,UAIIC,EAAa,CACzBC,MAAO,QACPC,KAAM,OACNC,KAAM,OACNC,OAAQ,UAIIC,EAAY,CACxBC,IAAK,IAIOC,EAAM,CAClBC,cAAe,CACd7B,KAAM8B,SACN/B,MAAO+B,SACP7B,MAAO6B,UAER3B,MAAO,EACP4B,YAAa,EACb7B,UAAW,GAGC8B,EAAc,CAC1BC,QAAS,GACTC,KAAM,GACN7K,GAAIuK,EAAIC,cAAc9B,MACtBoC,MAAO,YACPC,MAAO,GACPC,OAAQ,OACRC,cAAUC,EACVC,MAAO,oCACPC,WAAY,QACZC,kBAAcH,EACdjM,WAAOiM,EACPjL,KAAMqJ,EAAUC,UAChB+B,YAAaC,KAAKC,UAAU,CAC3BC,UAAW,QACXb,QAAS,GACTc,SAAU,KAICrH,EAAmB,CAC/BC,UAAW,cACXC,WAAY,eACZC,UAAW,cACXmH,SAAU,cAGEC,EAAe,CAC3BC,QAASvF,EAAK4C,aACd4C,aAAc,eACdC,YAAa,cACbC,WAAY,aACZC,YAAa,eAGDpM,EAAa,CACzBC,KAAM,OACNC,OAAQ,UAGImM,EAAc,CAC1BC,KAAM,QAGMC,EAAgB,CAC5BX,WAAW,EACXY,UAAU,EACVnN,UAAU,EACVoN,QAAQ,EACRC,SAAS,EACTC,aAAa,EACbC,SAAS,EACTC,SAAS,EACTC,WAAW,EACXC,WAAW,GAGC3L,EAAY,CACxB,SACA,UACA,UACA,UACA,WACA,OACA,OACA,cACA,cACA,gBAGY4L,EAAsB,CAClCC,WAAY,WACZC,WAAY,WACZC,OAAQ,SACRC,WAAY,eAGAC,EAAoB,CAChC,YACA,YACA,UACA,UAGYC,EAAS,CACrBC,MAAO,EACPC,OAAQ,EACRC,MAAO,I,41BChJKC,EAAuB,IAAIC,IAAc,CACrDrC,MAAO,qCAEKsC,EAAmB,IAAID,IAAc,CACjDrC,MAAO,qCAEFuC,EAAmB,IAAIF,IAAc,CAC1CrC,MAAO,mCAEFwC,EAAiB,IAAIH,IAAc,CAAErC,MAAO,4BAE5CyC,EAAkB,IAAIJ,IAAc,CACzCrC,MAAO,gCAEK0C,EAAe,IAAIL,IAAc,CAC7CrC,MAAO,iCAGK2C,EAAmB,IAAIN,IAAc,CACjDrC,MAAO,iCAGK4C,EAAoB,IAAIP,IAAc,CAClDrC,MAAO,kCAGK6C,EAA0B,IAAIR,IAAc,CACxDrC,MAAO,yCAGK8C,EAAyB,IAAIT,IAAc,CACvDrC,MAAO,uCASD,SAAS+C,EAAkB9C,EAAYD,GAC7C,IAAM3F,EAAO,qDAAiD4F,EAAWpM,KAA5D,6BAAqFmM,EAAMgD,SAA3F,KACb,OAAOZ,EAAqBa,OAAO,CAClClQ,KAAM,CAAEsH,WACR6I,OAAQ,CAAC,cAOJ,SAAeC,EAAtB,kC,4CAAO,WAA+BnD,GAA/B,6BAAAoD,EAAA,yDACDpD,EADC,iEAEYsC,EAAiBe,KAAKrD,GAFlC,UAEAsD,EAFA,OAGEvQ,GAHF,EAGmBuQ,GAAO,IAAxBvQ,MACQ,IAJV,EAGQwQ,OAHR,yCAKED,GALF,gBAOcvQ,GAAQA,EAAK,IAAO,GAAhCyQ,EAPF,EAOEA,OACFC,EAAY,SAACC,GAUlB,OATeA,EACb9I,KAAI,SAAC0I,GACL,MAAsBA,EAAdvQ,YAAR,MAAe,GAAf,EACA,GAAIA,EAAK,GACR,MAAO,CAAE8B,GAAI9B,EAAK,GAAG8B,GAAI8O,SAAU5Q,EAAK,GAAG6Q,YAI5CxH,QAAO,SAACyH,GAAD,OAAOA,MAjBX,UAoBiBC,QAAQJ,IAC9B1D,EAAMwD,OAAO5I,KAAI,SAAC6C,GACjB,IAAMsG,EAAeP,GAAUA,EAAOvH,MAAK,SAACI,GAAD,OAAOA,EAAExI,OAAS4J,EAAM5J,QACnE,OAAOuO,EAAqBiB,KAArB,2BACH5F,GADG,IAEN5I,GAAE,OAAEkP,QAAF,IAAEA,OAAF,EAAEA,EAAclP,GAClB+O,QAAO,OAAEG,QAAF,IAAEA,OAAF,EAAEA,EAAcH,eA1BpB,eAoBAI,EApBA,OA8BAC,EAAgBR,EAAUO,GA9B1B,kBA+BC,CACNjR,KAAM,CAAC,2BAEAA,GAAQA,EAAK,IAAO,IAFrB,IAGJyQ,OAAQS,OAnCL,6C,sBAyCA,SAASC,EAAgBC,EAAKC,GAAsB,IAAdC,EAAa,uDAAJ,GAC/CC,EAAW,GACjB,GAAIH,EAAItM,OAAQ,CACfyM,EAASC,KAAK,CAAEC,UAAW,KAAMC,SAAU,KAAMrP,MAAO+O,IAExD,IAAMpR,EAAO,CACZuR,YAEDlC,EAAqBa,OAAO,CAAElQ,OAAMmQ,OAAQ,CAAC,cAAewB,MAAK,SAACpB,GACjE,GAAIA,EAAIvQ,KAAM,CACb,IAAM0F,EAAO6K,EAAIvQ,MAAQ,GACnB4R,EAASC,YAA0BnM,EAAM4L,GAC/CD,GAAO,SAACS,GACPA,EAAMjF,MAAQnH,EAAK2D,QAAO,SAAC0I,GAAD,MAAkB,UAAXA,EAAEhQ,QAAkB8F,KAAI,SAACiJ,GAAD,OAAOA,EAAEhP,MAClEgQ,EAAME,QAAN,eACIJ,EAAOI,SAEXF,EAAMjF,MAAQ+E,EAAO/E,kBAKxBwE,GAAO,SAACS,GACPA,EAAME,QAAU,CACf,KAAK,yBACJjQ,KAAM,QACHuP,GACAW,YAAeX,EAASA,EAAOY,gBAAalF,IAEhDmF,EAAG,CAAEpQ,KAAM,aAAcjB,KAAM,KAEhCgR,EAAMjF,MAAQ,GACdiF,EAAMM,QAAS,KAKX,SAASC,EAAkBpF,GACjC,OAAOsC,EAAiB+C,UAAU,CAACrF,IAG7B,SAAesF,IAAtB,+B,4CAAO,8BAAAlC,EAAA,6DACAmC,EAAU,CACfxS,KAAM,CACLsH,QAAS,wBACTmL,eAAgB,CAAEC,KAAM,WAEzBjC,OAAQ,CAAC,mBACT1H,MAAO,EACP4J,OAAQ,GARH,SAUqBnD,EAAiBU,OAAjB,eAA6BsC,IAVlD,UAUAI,EAVA,QAYLjL,MAAMkL,QAAQD,GAAgBA,EAAa5S,QAC3C4S,EAAa5S,KAAK,GAbb,yCAeE4S,EAAa5S,KAAK,GAAG8S,iBAfvB,iCAiBC,GAjBD,4C,sBAoBA,SAAeC,EAAtB,kC,4CAAO,WAAkCC,GAAlC,iBAAA3C,EAAA,6DACA4C,EADA,aAELC,OAAQ,mCACRC,IAAK,MACFH,GAGH,0DACKhT,EAAO,CACZoT,OAFA,0DAGAnG,MAAO,mCACPjN,KAAM,CACLqT,QAASJ,IAZL,SAeO1D,EAAiB6D,OAAOpT,GAf/B,oF,sBAkBA,SAAesT,EAAtB,kC,4CAAO,WAAgCC,GAAhC,iCAAAlD,EAAA,6DAAyCmD,EAAzC,+BAAuD,aAAvD,SACejE,EAAiBkE,MAAMF,GADtC,WAEkB,KAAd,QADJG,EADA,cAEI,IAANA,OAAA,EAAAA,EAAQlD,QAFN,uBAGLgD,EAAYE,EAAO1T,MAAQ,IAHtB,oCAMgB0T,GAAU,IAAxB1T,YANF,MAMS,GANT,oBAOCA,EAAK,IAPN,4C,sBAUA,SAAe2T,EAAtB,kC,4CAAO,WAA0BC,GAA1B,mBAAAvD,EAAA,6DACAwD,EAAe,CACpBnC,SAAU,MACVH,SAAU,CAAC,CAAEE,UAAW,OAAQC,SAAU,IAAKrP,MAAM,GAAD,OAAKuR,EAAK9S,SAHzD,SAKiB4O,EAAgBQ,OAAO,CAAElQ,KAAM6T,IALhD,cAKAC,EALA,QAOO9T,OACZ+T,EAAQC,IAAMC,SAASH,EAAS9T,KAAM4T,EAAK9S,OARtC,kBAUCiT,GAVD,4C,sBA8CA,SAAeG,EAAtB,kC,4CAAO,yCAAA7D,EAAA,6DAAgCpD,EAAhC,EAAgCA,MAAO2G,EAAvC,EAAuCA,KACvCrC,EAAW,CAChB,CAAEE,UAAW,QAASC,SAAU,IAAKrP,MAAO4K,GAC5C,CAAEwE,UAAW,OAAQC,SAAU,IAAKrP,MAAOuR,IAHtC,SAKehE,EAAiBM,OAAO,CAC5ClQ,KAAM,CAAEuR,YACRxI,MAAO,OAPF,YAKA2K,EALA,QASK1T,OAAQ2H,MAAMkL,QAAQa,EAAO1T,MATlC,wBAUCmU,EAA0BC,OAAOC,KAAK1F,KACtC2F,EAA4BF,OAAOG,OAAO5F,KAE1C3O,EAAO,YAAI0T,EAAO1T,MAAM6H,KAAI,SAACsB,GAiBlC,OAhBImL,EAA0B1O,SAASuD,EAAKrI,MACvCqI,EAAK9G,MAAMmS,WAAW,MAAQrL,EAAK9G,MAAMoS,SAAS,MACrDtL,EAAK9G,MAAQ8G,EAAK9G,MAAMqS,QAAX,IAAwB,IACrCvL,EAAK9G,MAAQ8G,EAAK9G,MAAMqS,QAAX,IAAwB,KAEhC,CAAC,OAAQ,SAAS9O,SAASuD,EAAK9G,SACpC8G,EAAKrI,KACJqT,EACCG,EAA0B9R,QAAQ2G,EAAKrI,SAK3CqI,EAAK9G,MAAQ8G,EAAK9G,MAAMqS,QAAX,IAAwB,IACrCvL,EAAK9G,MAAQ8G,EAAK9G,MAAMqS,QAAX,IAAwB,KAE/BvL,KA9BH,kBAgCEnJ,GAhCF,iCAkCC,IAlCD,6C,sBAqCA,SAAe2U,EAAtB,kC,4CAAO,WAA6BjP,GAA7B,6BAAA2K,EAAA,6DAAmCmD,EAAnC,+BAAiD,aAAjD,SACe5D,EAAiBgF,QAAjB,YAA6BlP,IAD5C,WAGkB,KAAd,QAFJgO,EADA,cAGI,IAANA,OAAA,EAAAA,EAAQlD,QAHN,uBAILgD,EAAYE,EAAO1T,MAAQ,IAJtB,kBAKE,IALF,WAOF0T,EAAO1T,OAAQ2H,MAAMkL,QAAQa,EAAO1T,MAPlC,yCAQE0T,EAAO1T,MART,gCAUC,IAVD,6C,sBAaA,SAAe6U,EAAtB,kC,4CAAO,WAA+BnP,GAA/B,6BAAA2K,EAAA,6DAAqCmD,EAArC,+BAAmD,aAAnD,SACe5D,EAAiB0C,UAAU5M,GAD1C,WAEkB,KAAd,QADJgO,EADA,cAEI,IAANA,OAAA,EAAAA,EAAQlD,QAFN,uBAGLgD,EAAYE,EAAO1T,MAAQ,IAHtB,kBAIE,IAJF,WAMF0T,EAAO1T,OAAQ2H,MAAMkL,QAAQa,EAAO1T,MANlC,yCAOE0T,EAAO1T,MAPT,gCASC,IATD,6C,sBAYA,SAAe8U,IAAtB,+B,4CAAO,8BAAAzE,EAAA,6DACAkB,EAAW,CAChB,CAAEE,UAAW,OAAQC,SAAU,IAAKrP,MAAO,oBAFtC,SAIewN,EAAkBK,OAAO,CAC7ClQ,KAAM,CAAEuR,YACRd,OAAQ,CAAC,cAAe,iBANnB,aAIAiD,EAJA,SAQQA,EAAO1T,MAAQ2H,MAAMkL,QAAQa,EAAO1T,OAR5C,yCASE0T,EAAO1T,KAAK6H,KAAI,SAACkN,GACvB,MAAO,CAAEhU,MAAOgU,EAAE,eAAgB1S,MAAO0S,EAAE,oBAVvC,gCAaC,IAbD,4C,sBAgBA,SAAeC,EAAtB,kC,4CAAO,WAAkCC,GAAlC,iBAAA5E,EAAA,6DACAkB,EAAW,CAAC,CAAEE,UAAW,MAAOC,SAAU,KAAMrP,MAAO4S,IADvD,SAEelF,EAAuBG,OAAO,CAAElQ,KAAM,CAAEuR,cAFvD,YAEAmC,EAFA,QAGK1T,OAAQ2H,MAAMkL,QAAQa,EAAO1T,MAHlC,yCAIE0T,EAAO1T,MAJT,gCAMC,IAND,4C,sBASA,SAAekV,EAAtB,kC,4CAAO,WAAmCxP,GAAnC,6BAAA2K,EAAA,6DAAyCmD,EAAzC,+BAAuD,aAAvD,SACezD,EAAuB6E,QAAvB,YAAmClP,IADlD,WAEkB,KAAd,QADJgO,EADA,cAEI,IAANA,OAAA,EAAAA,EAAQlD,QAFN,uBAGLgD,EAAYE,EAAO1T,MAAQ,IAHtB,kBAIE,IAJF,WAMF0T,EAAO1T,OAAQ2H,MAAMkL,QAAQa,EAAO1T,MANlC,yCAOE0T,EAAO1T,MAPT,gCASC,IATD,6C,sBAYA,SAAemV,EAAtB,kC,4CAAO,WAAqCzP,GAArC,6BAAA2K,EAAA,6DAA2CmD,EAA3C,+BAAyD,aAAzD,SACezD,EAAuBuC,UAAU5M,GADhD,WAEkB,KAAd,QADJgO,EADA,cAEI,IAANA,OAAA,EAAAA,EAAQlD,QAFN,uBAGLgD,EAAYE,EAAO1T,MAAQ,IAHtB,kBAIE,IAJF,WAMF0T,EAAO1T,OAAQ2H,MAAMkL,QAAQa,EAAO1T,MANlC,yCAOE0T,EAAO1T,MAPT,gCASC,IATD,6C,sBAYA,SAAeoV,IAAtB,+B,4CAAO,8BAAA/E,EAAA,sEACiBZ,EAAe4F,OADhC,YACAC,EADA,UAEUA,EAAS,WAFnB,gCAGsB7F,EAAegE,MAAM6B,EAAS,WAAY,CACpE7E,OAAQ,CAAC,WAJL,aAGC8E,EAHD,SAMeA,EAAavV,MAAQuV,EAAavV,KAAK,IANtD,yCAOGuV,EAAavV,KAAK,IAPrB,gCAUC,MAVD,6C,sBAaA,SAAewV,EAAtB,kC,4CAAO,WAAgCC,GAAhC,2BAAApF,EAAA,yDACFqF,EAAgB,IAChBD,EAFE,uBAGCpC,EAAU,CACfoC,WAAW,eACPA,IAGCE,EAAc,CACnB3V,KAAM,CAAEqT,WACRD,OAAQ,qDACRnG,MAAO,wCAXH,SAawB6C,EAAwBsD,OAAOuC,GAbvD,OAaCC,EAbD,SAciBA,EAAd5V,aAdH,MAcU,GAdV,GAeI,KACF6V,EAAc7V,EAAK,GAAGuU,QAAU,IACtBmB,gBACfA,EAAgBG,EAAYH,eAlBzB,gCAsBCA,GAtBD,6C,gWCjVA,SAASI,EAAeC,GAC9B,IAAMC,EAnBA,SAAyBD,GAAiC,IAAxBE,EAAuB,wDAC3DC,EAAQC,iBAAiBJ,GACzBK,EAAyC,aAAnBF,EAAMG,SAC5BC,EAAgBL,EAAgB,uBAAyB,gBAE7D,GAAuB,UAAnBC,EAAMG,SAAsB,OAAOE,SAASC,KAChD,IAAK,IAAIvN,EAAS8M,EAAU9M,EAASA,EAAOwN,eAE3C,GADAP,EAAQC,iBAAiBlN,KACrBmN,GAA0C,WAAnBF,EAAMG,WAG7BC,EAAcI,KAAKR,EAAMS,SAAWT,EAAMU,UAAYV,EAAMW,WAC/D,OAAO5N,EAGT,OAAOsN,SAASC,KAISM,CAAgBf,GACrCC,GACHe,OAAOC,uBAAsB,WAC5BhB,EAAiBiB,SAAS,CACzBC,IAAKnB,EAAQoB,UAAY,GACzBC,SAAU,cCdd,IAAMC,EAAYC,YAAW,CAC5BC,YAAa,CACZC,QAAS,OACTC,cAAe,SACfC,UAAW,YAEZC,UAAW,CACVH,QAAS,OACTC,cAAe,SACfG,OAAQ,cACRvB,SAAU,YAEXwB,gBAAiB,CAChBL,QAAS,OACTC,cAAe,SACfK,eAAgB,SAChBF,OAAQ,OACRvB,SAAU,WACV0B,OAAQ,IACRC,OAAQ,MACRC,gBAAiB,mBACjBC,OAAQ,EACRhB,IAAK,EACLiB,KAAM,EACNC,MAAO,EACPC,WAAY,UAEbC,cAAe,CACdC,UAAW,qBA0GEC,MAtGf,YAAiC,IAAD,IAAVC,EAAU,EAAVA,OACfC,EAAQC,cACRC,EAAUvB,IACVwB,EAAiBC,iBAAO,MAC9B,EAOIJ,EAAMK,MANT/G,EADD,EACCA,QACAgH,EAFD,EAECA,mBACA5G,EAHD,EAGCA,OACA6G,EAJD,EAICA,UACA/L,EALD,EAKCA,WACAzL,EAND,EAMCA,UAEKyX,GAAYR,EAAMK,MAAM/G,SAAW,KAAK,GAExCmH,IAA6BH,EASnC,OARAI,qBAAU,WACT,IAAMnN,EAAO4M,EAAeQ,QACxBpN,GAAQkN,IACXrD,EAAe7J,GACfA,GAAQA,EAAKqN,WAEZ,CAACH,IAGH,yBAAKI,UAAWC,IAAWZ,EAAQrB,cAClC,yBACCzV,GAAG,YACHyX,UAAWC,IAAWZ,EAAQjB,UAAT,eACnBiB,EAAQN,eAAiBY,IAAaF,KAGvC5G,GACA,yBAAKmH,UAAWC,IAAWZ,EAAQf,kBAClC,kBAAC4B,EAAA,EAAD,OAGDzH,GACA,kBAAChO,EAAA,SAAD,GACC0V,MAAO,EACP5X,GAAIuK,IAAIzB,KACR+O,MAAOjB,EAAMK,MAAM/G,QAAQ3F,IAAIzB,MAC/BgP,SAAUlB,EAAMkB,SAEf/M,MAAO6L,EAAMK,MAAMlM,MACnBgN,WAAYnB,EAAMK,MAAMc,WACxBC,YAAapB,EAAMK,MAAMe,YACzBC,WAAYrB,EAAMK,MAAMgB,WACxB/H,QAAS0G,EAAMK,MAAM/G,SAVvB,yBAWY0G,EAAMkB,UAXlB,uBAYUlB,EAAMsB,QAZhB,uBAaUtB,EAAMuB,QAbhB,wBAcWvB,EAAMwB,SAdjB,+BAekBxB,EAAMyB,gBAfxB,6BAgBgBzB,EAAM0B,cAhBtB,4BAiBe1B,EAAM2B,aAjBrB,0BAkBa5Y,IAAcE,IAAWC,MAlBtC,0BAmBEqX,GAnBF,uBAqBSR,GArBT,0BAsBY6B,KAtBZ,IAyBAtB,GACA,yBACCO,UAAU,4BACVjW,IAAKuV,EACL0B,SAAU,GAEV,yBAAKhB,UAAU,6BACH,OAAVrM,QAAU,IAAVA,OAAA,EAAAA,EAAYpM,OAAQ,SAEtB,kBAACkD,EAAA,SAAD,GACCY,MAAM,cACN8U,MAAO,EACP5X,GAAIuK,IAAIG,WACRmN,MAAOjB,EAAMK,MAAMC,mBAAmB3M,IAAIG,YAC1CoN,SAAUlB,EAAMkB,SAEf/M,MAAO6L,EAAMK,MAAMyB,iBACnBX,WAAYnB,EAAMK,MAAMc,WACxBC,YAAapB,EAAMK,MAAMe,YACzBC,WAAYrB,EAAMK,MAAMgB,WACxB/H,QAAS0G,EAAMK,MAAMC,oBAXvB,yBAYYN,EAAMkB,UAZlB,uBAaUlB,EAAMsB,QAbhB,uBAcUtB,EAAMuB,QAdhB,4BAeevB,EAAM2B,aAfrB,wBAgBW3B,EAAMwB,SAhBjB,+BAiBkBxB,EAAMyB,gBAjBxB,6BAkBgBzB,EAAM0B,cAlBtB,0BAmBEnB,GAnBF,uBAqBSR,GArBT,0BAsBY6B,KAtBZ,QC7GSG,MAAMC,MAAK,YAAuC,IAAlBC,EAAiB,EAAjBA,cAC9C,EAAiBF,IAAMG,UAAS,GAAzBnC,EAAP,oBAEA,OACC,yBACCc,UAAWC,IAAW,wBAAyB,CAC9C,qBAAsBf,IAEvBvC,MAAO,CACNsB,QAAS,OACTqD,MAAO,OACPjD,OAAO,gBAAD,OAAkB+C,EAAlB,OACN7C,eAAgB,SAChBnB,SAAU,OACVN,SAAU,WACVyE,aAAc,QAGf,kBAACC,EAAD,CAAQtC,OAAQA,Q,yHCpBZ,SAASuC,EAAkBC,EAASC,GAC1C,IAAMC,EAAYV,IAAM3B,QAAO,GAC/B2B,IAAMrB,WAAU,WACf,GAAI+B,EAAU9B,QAAS,CACtB,IAAM+B,EAAQC,YAAW,kBAAMJ,MAAWC,GAC1C,OAAO,kBAAMI,aAAaF,IAE3BD,EAAU9B,SAAU,IAClB,CAAC4B,EAASC,I,iLCiBR7D,GAAYC,aAAW,SAACiE,GAAD,MAAY,CACxCC,KAAM,CACLX,MAAO,OACP5C,gBAAiBsD,EAAME,QAAQC,WAAWC,MAC1C/D,OAAQ,IACRjB,SAAU,QAEXiF,MAAO,CACN,2BAA4B,CAC3BC,aAAc,GACd,aAAc,CACbC,YAAa,WAEd,mBAAoB,CACnBA,YAAa,WAEd,yBAA0B,CACzBA,YAAa,aAIhBC,YAAa,CACZC,aAAc,oBAEfC,SAAU,CACTD,aAAc,iBACdE,WAAY,GACZC,cAAe,IAEhBC,UAAW,CACVC,cAAe,cAEhBC,aAAc,CACb,uBAAwB,CACvBrE,gBAAiB,YAGnBsE,WAAY,CACXF,cAAe,QAEhBG,cAAe,CACd5E,OAAQ,IACR6E,QAAS,MACTjF,QAAS,OACTa,WAAY,SACZP,eAAgB,cAIZ4E,GAAY,CAAC,gBAAiB,iBAAkB,iBAEtD,SAASC,GAAS/b,GACjB,IAAQgc,EAAqChc,EAArCgc,SAAUva,EAA2BzB,EAA3ByB,MAAOqX,EAAoB9Y,EAApB8Y,MAAUmD,EAAnC,YAA6Cjc,EAA7C,IAEA,OACC,uCACCkc,KAAK,WACL1O,OAAQ/L,IAAUqX,EAClB5X,GAAE,8BAAyB4X,GAC3BqD,kBAAA,yBAAmCrD,IAC/BmD,GAEHxa,IAAUqX,GAAS,oCAAGkD,IAKX,SAASI,GAAiBpc,GACxC,MAUIA,EATH8E,YADD,MACQ,GADR,EAECuX,EAQGrc,EARHqc,SACAC,EAOGtc,EAPHsc,YACAvK,EAMG/R,EANH+R,OACAwK,EAKGvc,EALHuc,MACArX,EAIGlF,EAJHkF,aACAmC,EAGGrH,EAHHqH,eAPD,EAUIrH,EAFHwc,qBARD,SASCC,EACGzc,EADHyc,cAEK9B,EAAQ+B,eACR1E,EAAUvB,KACVkG,EAAaC,YAAcjC,EAAMkC,YAAYC,KAAK,OAElDC,EAAkBlD,IAAMmD,aAC7B,SAACzU,GACA8T,EAAS9T,GACT+T,MAED,CAACD,EAAUC,IAGNW,EAAUnY,EAAKZ,OAAS,GAAK6N,EAASjN,EAAKZ,OAASqY,EACpDW,EAAUnL,EAAS,EAEnBoL,EAAW,SAAC5U,GACjB,OAAOlB,EAAiBA,EAAekB,GAAQA,EAAKrD,GAAgB,SAGrE,OACC,6BACC,kBAACkY,EAAA,EAAD,CACCT,WAAYA,EACZU,SAAS,KACTC,WAAW,EACXC,KAAMvd,EAAMud,KACZC,QAASxd,EAAMsc,YACfH,kBAAgB,2BAEhB,kBAACsB,EAAA,EAAD,CACCvc,GAAG,0BACHyX,UAAWX,EAAQmD,aAFpB,iBAGYnb,EAAMG,OAAS,SAC3B,kBAACud,EAAA,EAAD,KACC,kBAACC,EAAA,EAAD,CAAM5G,WAAS,GACd,kBAAC4G,EAAA,EAAD,CAAM5G,WAAS,EAACxO,MAAI,EAACkP,WAAW,UAE/B,kBAACkG,EAAA,EAAD,CACCpV,MAAI,EACJqV,GAAI,GACJtI,MAAO,CACNuI,KAAM,IAGP,kBAACC,EAAA,EAAD,CACCC,KAAK,QACLT,WAAS,EACT3E,UAAWX,EAAQgD,MACnBvZ,MAAOzB,EAAMge,WACbC,QAAQ,WACR5B,SAAU,SAACnM,GAAD,OAAOlQ,EAAMke,cAAchO,EAAEiO,OAAO1c,QAC9C2c,WAAY,CACXC,eACC,kBAACC,GAAA,EAAD,CAAgB7I,SAAS,SACxB,kBAAC8I,GAAA,EAAD,CAAQjJ,MAAO,CAAEtO,KAAM,eAI1BwX,YAAa,YAGf,kBAACb,EAAA,EAAD,CAAMpV,MAAI,GACT,kBAACkW,EAAA,EAAD,CAAYC,QAAS1e,EAAM2e,WAAYC,UAAW1B,GACjD,kBAAC,IAAD,OAED,kBAACuB,EAAA,EAAD,CAAYC,QAAS1e,EAAM6e,OAAQD,UAAW3B,GAC7C,kBAAC,IAAD,SAIFT,GACA,kBAACmB,EAAA,EAAD,CAAMpV,MAAI,EAACqV,GAAI,IACd,kBAACkB,GAAA,EAAD,CACCC,YAAY,aACZd,QAAQ,YACRxc,MAAOzB,EAAMgf,WACb3C,SAAUrc,EAAMif,YAChBtG,UAAWX,EAAQ0D,cAElBI,GAAU7U,KAAI,SAACiY,EAAO/X,GAAR,OACd,kBAACgY,GAAA,EAAD,CACCC,IAAG,UAAKjY,EAAL,YAAU+X,GACbA,MAAOA,EACPvG,UAAWX,EAAQ2D,mBAOxBc,EACA,kBAAC4C,GAAA,EAAD,CAAK1G,UAAWX,EAAQ4D,eACvB,kBAAC/C,EAAA,EAAD,CAAkBkF,KAAM,MAEN,IAAhBjZ,EAAKZ,OACPsY,EAkBAV,GAAU7U,KACT,SAACC,EAAG4R,GAAJ,OACC9Y,EAAMgf,aAAelG,GACpB,kBAAC6E,EAAA,EAAD,CAAMpV,MAAI,GACT,kBAAC,GAAD,CAAU9G,MAAOqX,EAAOA,MAAOA,GAC9B,kBAAC6E,EAAA,EAAD,CAAMpV,MAAI,GACT,kBAAC+W,EAAA,EAAD,CAAM3G,UAAWX,EAAQ4C,MACvB9V,EACC2D,QACA,SAACF,GAAD,MAAsB,0BAAZA,EAAKrH,MAEf+F,KAAI,SAACsB,EAAMpB,GAAP,OACJ,kBAACoY,GAAA,EAAD,CACC5G,UAAWX,EAAQqD,SACnB+D,IAAG,UAAKjY,EAAL,YAAUgW,EAAS5U,IACtB2T,UAAM9P,EACNoT,OAAK,EACL3f,QAAM,EACN6e,QAAS,kBAAM3B,EAAgBxU,KAE/B,kBAACkX,GAAA,EAAD,CACCve,GAAIiG,EACJuY,QAASvC,EAAS5U,gBAvC7B,kBAAC+W,EAAA,EAAD,CAAM3G,UAAWX,EAAQ4C,MACvB9V,EACC2D,QAAO,SAACF,GAAD,MAAsB,0BAAZA,EAAKrH,MACtB+F,KAAI,SAACsB,EAAMpB,GAAP,OACJ,kBAACoY,GAAA,EAAD,CACC5G,UAAWX,EAAQqD,SACnB+D,IAAG,UAAKjY,EAAL,YAAUgW,EAAS5U,IACtB2T,UAAM9P,EACNoT,OAAK,EACL3f,QAAM,EACN6e,QAAS,kBAAM3B,EAAgBxU,KAE/B,kBAACkX,GAAA,EAAD,CAAcve,GAAIiG,EAAGuY,QAASvC,EAAS5U,UAuC5C,kBAAC8W,GAAA,EAAD,CAAK1G,UAAWX,EAAQ4D,eACvB,kBAAC+D,EAAA,EAAD,CAAY1B,QAAQ,SAApB,mBAIH,kBAAC2B,EAAA,EAAD,KACC,kBAACC,EAAA,EAAD,CAAQC,WAAS,EAACpB,QAAS1e,EAAMsc,YAAayD,MAAM,WACnD,kBAACJ,EAAA,EAAD,CAAYhH,UAAWX,EAAQwD,WAA/B,a,iHC1PA/E,GAAYC,YAAW,CAC5BsJ,aAAc,CACb,kBAAmB,CAClBD,MAAO,qBACPE,SAAU,KAGZC,iBAAkB,CACjBjG,MAAO,IACPkG,WAAY,GACZJ,MAAO,WAERK,UAAW,CACVL,MAAO,OACPE,SAAU,GACV,QAAS,CACRF,MAAO,SAGTM,WAAY,CACX,mCAAoC,CACnChJ,gBAAiB,6BACjB,iBAAkB,CACjBA,gBAAiB,uBAGnB,mCAAoC,CACnC0I,MAAO,qBACP1I,gBAAiB,6BACjB,iBAAkB,CACjBA,gBAAiB,uBAGnB,yCAA0C,CACzC0I,MAAO,qBACP1I,gBAAiB,qBACjB,iBAAkB,CACjBA,gBAAiB,wBAIpB/P,OAAQ,CACP2Y,SAAU,MA6MGpG,WAAMC,MAzMrB,YAYI,IAXHrY,EAWE,EAXFA,MACAyd,EAUE,EAVFA,MACA7S,EASE,EATFA,MACAiU,EAQE,EARFA,aACAjE,EAOE,EAPFA,SACAkE,EAME,EANFA,QACAC,EAKE,EALFA,WAKE,IAJFrY,aAIE,MAJM,GAIN,EAHFsY,EAGE,EAHFA,SACA5f,EAEE,EAFFA,UACGb,EACD,kBACIgY,EAAUvB,KAChB,EAAoCuD,mBAAS,IAA7C,mBAAOgE,EAAP,KAAmBE,EAAnB,KACA,EAA8BlE,oBAAS,GAAvC,mBAAO0G,EAAP,KAAgBC,EAAhB,KACA,EAAwB3G,mBAAS,YAAKuG,GAAoB,KAA1D,mBAAOzb,EAAP,KAAa8b,EAAb,KACA,EAAoC5G,oBAAS,GAA7C,mBAAO6G,EAAP,KAAmBC,EAAnB,KACA,EAA4B9G,mBAAS,GAArC,mBAAOjI,EAAP,KAAegP,EAAf,KACA,EAA0B/G,mBAAS,GAAnC,mBAAOuC,EAAP,KAAcyE,EAAd,KAEM1R,EAASuK,IAAMmD,YAAN,sBACd,0DAAAvN,EAAA,yDAAOuO,EAAP,+BAAoB,IACfyC,EADL,wBAEEE,GAAW,GAFb,SAGkCF,EAAS,CACxCtY,QACA6V,aACAsC,eACAE,aACA3f,YACAkR,WATH,gBAGUkP,EAHV,EAGUA,OAAQ1E,EAHlB,EAGkBA,OAQfsE,GACAtE,EAAQpU,GACR8Y,EAAOrQ,KAAK,CACX1Q,KAAMghB,YAAU,gBAChBhgB,GAAI,0BAEAigB,EAAaja,IAAEka,OAAOH,EAAQ,QACpCL,EAAQO,GACRR,GAAW,GACXK,EAASzE,GApBX,wBAsBQ8E,EAAU,IAAI3S,IAAc,CAAErC,UACpCsU,GAAW,GACLW,EAAQhB,EAAatC,IAAe,GACpCrN,EAAW,GACbqN,GACHrN,EAASC,KAAK,CACbC,UAAW,OACXC,SAAU,OACVrP,MAAOuc,IAGH5e,EAjCR,uCAkCOkiB,EAAM5a,SAAW,CAAEA,QAAS4a,EAAM5a,UAClC4a,EAAMzP,gBAAkB,CAAEA,eAAgByP,EAAMzP,iBAnCvD,IAoCGlB,SAAS,GAAD,OAAMA,EAAN,YAAoB2Q,EAAM3Q,UAAY,KAC9CG,SAAU,QAELjB,EAASyR,EAAMzR,QAAU,GAC/BwR,EACE/R,OAAO,CAAEO,SAAQzQ,OAAM+I,QAAO4J,OAAQA,IACtChB,MAAK,WAAoB,IAAnBV,EAAkB,uDAAP,GACjB,EAA6BA,EAArBjR,YAAR,MAAe,GAAf,EAAmBmd,EAAUlM,EAAVkM,MACnBoE,GAAW,GACX,IAAM7b,EAAO0b,EAAaA,EAAW,YAAIphB,IAAlB,YAA+BA,IACrDyhB,GACAtE,EAAQpU,GACRrD,EAAK8L,KAAK,CACT1Q,KAAMghB,YAAU,gBAChBhgB,GAAI,0BAEN8f,EAASzE,GACT,IAAM4E,EAAaja,IAAEka,OAAOtc,EAAM,QAClC8b,EAAQO,MAtDZ,4CA0DA,CACCb,EACAjU,EACAmU,EACAK,EACA1Y,EACAsY,EACA5f,EACAkR,IAIIwP,EAAa1H,IAAMmD,aAAY,WACpC,IAAMwE,EAAYzP,EAAS5J,EACvBqZ,GAAajF,GAChBwE,EAAUS,KAET,CAACrZ,EAAOoU,EAAOxK,IAEZ0P,GAAiB5H,IAAMmD,aAAY,WACxC+D,GAAU,SAAChP,GACV,IAAMyP,EAAYzP,EAAS5J,EAC3B,OAAOqZ,EAAY,EAAIA,EAAY,OAElC,CAACrZ,IAEEuZ,GAAkB7H,IAAMmD,aAAY,YACxCuD,GAAWjR,EAAO0O,KACjB,CAACA,EAAY1O,EAAQiR,IAElBoB,GAAe9H,IAAMmD,aAC1B,SAAC9M,EAAGzO,GACe,2BAAT,OAALA,QAAK,IAALA,OAAA,EAAAA,EAAOP,IACV4f,GAAc,GAEdzE,EAAS5a,KAGX,CAAC4a,IAGIuF,GAAmB/H,IAAMmD,aAAY,SAACvb,GAC3Cyc,EAAczc,GACdsf,EAAU,KACR,IAEGzE,GAAczC,IAAMmD,aAAY,WACrC8D,GAAc,GACdC,EAAU,KACR,IAaH,OAXA3G,EAAkBsH,GAAiB,KAEnClJ,qBAAU,YACR+H,GAAWjR,MACV,CAACA,EAAQiR,EAASlU,IAErBmM,qBAAU,WACJ/W,GACJyc,EAAc,MAEb,CAACzc,IAEH,kBAAC,IAAMogB,SAAP,KACC,kBAAC,IAAD,eACCC,eAAa,EACb9B,cAAY,EACZhI,QAAS,CACR4C,KAAM5C,EAAQkI,iBACd6B,aAAc/J,EAAQgD,MACtBgH,eAAgBhK,EAAQgD,MACxBiH,eAAgBjK,EAAQgD,MACxBA,MAAOhD,EAAQoI,UACf8B,aAAclK,EAAQoI,UACtB+B,OAAQnK,EAAQqI,WAChB/Y,OAAQ0Q,EAAQ1Q,OAChB8a,UAAWpK,EAAQ1Q,QAEpByW,KAAK,QACLpF,UAAWX,EAAQgI,aACnBqC,cAAe,SAACnS,EAAGzO,GAAJ,OAAcyc,EAAczc,IAC3C6gB,YAAa,SAACC,GAEb,OADAA,EAAOC,WAAW/gB,MAAQuc,EAEzB,kBAACF,EAAA,EAAD,iBAAeyE,EAAf,CAAuB/D,YAAa0C,YAAUhC,GAAQ5B,WAAS,MAGjEiD,QAAO,YAAMzb,GACb4b,QAASA,EACTrZ,eAAgB,SAACC,GAAD,MACG,kBAAXA,EACJA,EACAtH,EAAMqH,eACNrH,EAAMqH,eAAeC,GACrBA,EAAOpH,MAEXmc,SAAUsF,GACVc,cAAe,SAAClC,GAAD,OAAaA,GAC5B9e,MAAOA,GAAS,KAChBihB,kBAAmB,SAACpb,EAAQ7F,GAAT,OAAmB6F,EAAOpH,OAASuB,EAAMvB,OACxDF,IAEL,kBAAC,GAAD,CACCge,WAAYA,EACZlZ,KAAMA,EACNuH,MAAOA,EACPkQ,MAAOA,EACPxK,OAAQA,EACRwL,KAAMsD,EACNhC,OAAQ0C,EACR5C,WAAY8C,GACZnF,YAAaA,GACb4B,cAAe0D,GACfvF,SAAUA,EACVlc,MAAO+gB,YAAUhC,GACjB7X,eAAgBrH,EAAMqH,qB,SCxPnB,SAAesb,GAAtB,mC,8CAAO,qDAAAlT,EAAA,6DACN6Q,EADM,EACNA,aACAnY,EAFM,EAENA,MACA6V,EAHM,EAGNA,WACAnd,EAJM,EAINA,UACAkR,EALM,EAKNA,OAEMuP,EAAQhB,EAAatC,IAAe,GACpCrN,EAAW,GACbqN,GACHrN,EAASC,KAAK,CACbC,UAAW,OACXC,SAAU,OACVrP,MAAOuc,IAGH5e,EAhBA,uCAiBDkiB,EAAM5a,SAAW,CAAEA,QAAS4a,EAAM5a,UAClC4a,EAAMzP,gBAAkB,CAAEA,eAAgByP,EAAMzP,iBAlB/C,IAmBLlB,SAAS,GAAD,OAAMA,EAAN,YAAoB2Q,EAAM3Q,UAAY,KAC9CG,SAAU,QAELjB,EAASyR,EAAMzR,QAAU,GACzBwR,EACLxgB,IAAcE,IAAWE,OAAS0N,KAAmBI,KAxBhD,SAyBoBsS,EAAQ/R,OAAO,CAAEO,SAAQzQ,OAAM+I,QAAO4J,WAzB1D,cAyBA6Q,EAzBA,OA0BA3B,EAAS,GACX2B,GAAeA,EAAYxjB,MAAQ2H,MAAMkL,QAAQ2Q,EAAYxjB,QAC1D0F,EAAO8d,EAAYxjB,KACvB6H,KAAI,SAACyJ,GACL,IAAMmS,EAAa5B,EAAO6B,WACzB,SAACC,GAAD,OAAOA,EAAE7iB,OAASwQ,EAAOxQ,MAAQ6iB,EAAEC,cAAgBtS,EAAOsS,eAE3D,IAAoB,IAAhBH,GAAqBhiB,IAAcE,IAAWC,KAIjD,OAHIH,IAAcE,IAAWC,OAAwB,IAAhB6hB,GACpC5B,EAAOgC,OAAOJ,EAAY,GAEpB,2BAAKnS,GAAZ,IAAoBwS,WAAY9V,IAAYC,OAE5C4T,EAAOgC,OAAOJ,EAAY,EAA1B,2BACI5B,EAAO4B,IADX,IAECM,WAAY/V,IAAYC,WAK1B5E,QAAO,SAACyH,GAAD,OAAOA,KAChB+Q,EAAOrQ,KAAP,MAAAqQ,EAAM,YAASnc,KA/CV,kBAiDC,CAAEmc,SAAQ1E,MAAOqG,GAAeA,EAAYrG,QAjD7C,6C,mKCgBDzN,GAAkB,IAAIJ,IAAc,CACzCrC,MAAO,gCAGF+W,GAAa,CAClB,CAAEljB,KAAMghB,YAAU,QAASzf,MAAOV,IAAWC,MAC7C,CAAEd,KAAMghB,YAAU,UAAWzf,MAAOV,IAAWE,SA4fjC4Y,WAAMC,MAzfrB,YAWI,IAVHzN,EAUE,EAVFA,MACAoE,EASE,EATFA,OACA5P,EAQE,EARFA,UACAyL,EAOE,EAPFA,WACA+W,EAME,EANFA,YAEAziB,GAIE,EALFsiB,WAKE,EAJFtiB,gBACA0iB,EAGE,EAHFA,aACAC,EAEE,EAFFA,MACGvjB,EACD,kBACIwjB,EAAS,6BACd3iB,IAAcE,IAAWE,OAAS,YAAc,iBAG3CsP,EAAkBsJ,IAAMmD,aAC7B,SAACxM,EAAKE,GACL,IAAMC,EAAW,GACjB,GAAIH,EAAItM,OAAQ,CACfyM,EAASC,KAAK,CAAEC,UAAW,KAAMC,SAAU,KAAMrP,MAAO+O,IACxD,IAAMpR,EAAO,CACZuR,YAEDlC,KACEa,OAAO,CAAElQ,OAAMmQ,OAAQ,CAAC,cACxBwB,MAAK,SAACpB,GACN,GAAIA,EAAIvQ,KAAM,CACb,IAAM0F,EAAO6K,EAAIvQ,MAAQ,GACnB4R,EAASC,YAA0BnM,EAAM4L,GAC/CD,GAAO,SAACS,GACPA,EAAME,QAAN,eACIJ,EAAOI,SAEXF,EAAMjF,MAAQ+E,EAAO/E,MACrBiF,EAAMM,QAAS,UAGhBf,GAAO,SAACS,GACPA,EAAMM,QAAS,YAIb,CACN,IAAMR,EAASC,YAA0B,GAAIP,GAC7CD,GAAO,SAACS,GACPA,EAAME,QAAN,eACIJ,EAAOI,SAEXF,EAAMjF,MAAQ+E,EAAO/E,MACrBiF,EAAMM,QAAS,EACfN,EAAM7E,MAAQqE,EACdQ,EAAMkB,YAAc1B,EACpBQ,EAAMiI,YAAc,EACpBjI,EAAMvQ,eAAiB,WAI1B,CAAC8P,IAGIgT,EAAoB5J,IAAMmD,YAAN,uCACzB,WAAO3Q,GAAP,iBAAAoD,EAAA,yDACOd,EAAmB,IAAID,IAAc,CAAErC,MAAOmX,IAC/CnX,EAFN,mBAGMxL,IAAcE,IAAWE,OAH/B,uBAIGsiB,IAJH,iCAOE9S,GAAO,SAACS,GACPoS,EAAapS,GACbA,EAAM7E,MAAQ,KACd6E,EAAMkB,YAAc,KACpBlB,EAAMjF,MAAQ,GACdiF,EAAMwS,OAAS,KACfxS,EAAM8B,KAAO,KACb9B,EAAME,QAAU,KAChBF,EAAMyS,aAAe,KACrBzS,EAAM0S,eAAiB,KACvB1S,EAAMkH,mBAAqB,KAC3BlH,EAAM0I,iBAAmB,KACzB1I,EAAM2S,aAAe,GACrB3S,EAAM5E,WAAa,KACnB4E,EAAM4S,aAAe,KACrB5S,EAAM6S,cAAgB,KACtB7S,EAAM8S,YAAc,KACpB9S,EAAM+S,aAAe,KACrB/S,EAAMgT,WAAa,GACnBhT,EAAMtQ,eAAiB,GACvBsQ,EAAMiT,eAAiB,GACvBjT,EAAMmH,UAAY,GAClBnH,EAAMkT,UAAY,GAClBlT,EAAMmT,gBAAkB,GACxBnT,EAAMoT,uBAAyB,GAC/BpT,EAAMqT,uBAAyB,MAhClC,0BAoCKnlB,EAAO,CACVyQ,OAAQ,CAAC,aAAc,cAAe,OAAQ,YAC9C2U,QAAS,CACRN,WAAY,CACX,WACA,QACA,WACA,eACA,OACA,iBAICrjB,IAAcE,IAAWE,SAC5BwP,GAAO,SAACS,GACPA,EAAMM,QAAS,KAEhBpS,EAAO,CACNolB,QAAS,CACRlT,WAAY,CAAC,QAAS,iBAIzB3C,EAAiBkE,MAAMxG,EAAMnL,GAAI9B,GAAM2R,MAAK,SAACpB,GAC5C,GAAIA,EAAIvQ,KAAM,CACb,IAAMsR,EAASf,EAAIvQ,KAAK,GACxB,EAAiCsR,EAAzBb,cAAR,MAAiB,GAAjB,EAAwB4U,EAAxB,YAAiC/T,EAAjC,IACAD,GAAO,SAACS,GACPoS,EAAapS,GACbA,EAAM7E,MAAQA,EACd6E,EAAMgS,WAAa7W,EAAM6W,WACzBhS,EAAME,QAAU,KAChBF,EAAM0S,eAAiB,KACvB1S,EAAMjF,MAAQ,GACdiF,EAAMyS,aAAe,KACrBzS,EAAM8B,KAAO,KACb9B,EAAMwS,OAAS,KACfxS,EAAM5E,WAAa,KACnB4E,EAAM2S,aAAe,GACrB3S,EAAMkH,mBAAqB,KAC3BlH,EAAM8S,YAAc,KACpB9S,EAAM4S,aAAe,KACrB5S,EAAM6S,cAAgB,KACtB7S,EAAMiT,eAAiB,GACvBjT,EAAMmH,UAAY,GAClBnH,EAAMkT,UAAY,GAClBlT,EAAMmT,gBAAkB,GACxBnT,EAAMoT,uBAAyB,GAC/BpT,EAAMqT,uBAAyB,GAC/BrT,EAAM+S,aAAe,KACrB/S,EAAMiI,YAAc,EACpBjI,EAAMvQ,eAAiB,KACvBuQ,EAAMyI,SAAW,EACjB,IAAM+K,GAAWhU,EAAOwT,YAAc,IAAIjd,KAAI,SAACyB,GAC9C,OAAO+D,KAAKkY,MACXlY,KAAKC,UAAL,uCACIhE,GADJ,IAECvH,KACCoE,IAAiBmD,EAAE6D,gBAClB7D,EAAEkc,UAAY,IAAIC,eAChBnc,EAAE6D,cAAgB,CACrBuY,YAAY,GAAD,OAAKpc,EAAEsa,YAAP,YAAsBta,EAAEkc,YANrC,IAQC5B,iBAAa5W,SAIZvL,IAAcE,IAAWC,MAC5BkQ,EAAMtQ,eAAN,YAA2B8jB,GAC3BxT,EAAMgT,WAAN,YAAuBQ,KAEvBnU,EACCV,EAAO5I,KAAI,SAACyB,GAAD,OAAOA,EAAExH,MACpBujB,GAEDvT,EAAMkB,YAAc1B,UA/GzB,4CADyB,sDAsHzB,CAACD,EAAQ+S,EAAW3iB,EAAW0P,EAAiB+S,EAAcC,IAGzDwB,EAAmBlL,IAAMmD,YAAN,uCACxB,WAAOhK,GAAP,iCAAAvD,EAAA,yDACC4T,IACKrQ,EAFN,uBAGEvC,GAAO,SAACS,GACPoS,EAAapS,GACbA,EAAMjF,MAAQ,GACdiF,EAAMwS,OAAS,KACfxS,EAAM8B,KAAO,KACb9B,EAAME,QAAU,KAChBF,EAAMyS,aAAe,KACrBzS,EAAM0S,eAAiB,KACvB1S,EAAMkH,mBAAqB,KAC3BlH,EAAM0I,iBAAmB,KACzB1I,EAAM2S,aAAe,GACrB3S,EAAM5E,WAAa,KACnB4E,EAAM4S,aAAe,KACrB5S,EAAM6S,cAAgB,KACtB7S,EAAM8S,YAAc,KACpB9S,EAAMM,QAAS,EACfN,EAAMgT,WAAahT,EAAMtQ,eACzBsQ,EAAM+S,aAAe,KACrB/S,EAAMiT,eAAiB,GACvBjT,EAAMmH,UAAY,GAClBnH,EAAMkT,UAAY,GAClBlT,EAAMmT,gBAAkB,GACxBnT,EAAMoT,uBAAyB,GAC/BpT,EAAMqT,uBAAyB,MA1BlC,0CA8BqBxR,aAAWC,GA9BhC,cA8BOG,EA9BP,gBA+ByBG,aAAe,CACtCjH,MAAOA,EAAMnM,KACb8S,KAAMA,EAAK9S,OAjCb,cA+BOkkB,EA/BP,OAmCOpT,EAASoC,IAAM4R,wBAAwB,CAC5ChS,KAAMG,EAAMH,KACZnD,OAAQjP,EACRkjB,aAAc3Q,EAAM2Q,aACpBM,cAEKa,EAAmBzR,OAAOG,OAAO3C,EAAOI,SAC5C3I,QAAO,SAACyc,GAAD,OAAYA,EAAO/kB,OAAS+kB,EAAO/kB,MAAMyT,WAAW,cAC3D3M,KAAI,SAACie,GAAD,OAAYA,EAAO/kB,SA3C1B,UA4C+BiU,aAAmB6Q,GA5ClD,eA4COZ,EA5CP,OA6COc,EAAmB,CACxBrU,SAAU,MACVH,SAAU,CACT,CACCG,SAAU,KACVH,SAAU,CACT,CAAEE,UAAW,WAAYC,SAAU,IAAKrP,OAAO,GAC/C,CAAEoP,UAAW,WAAYC,SAAU,YAGrC,CACCA,SAAU,KACVH,SAAU,CACT,CAAEE,UAAW,YAAaC,SAAU,IAAKrP,OAAO,GAChD,CAAEoP,UAAW,YAAaC,SAAU,YAGtC,CAAED,UAAW,OAAQC,SAAU,IAAKrP,MAAM,GAAD,OAAKuR,EAAK9S,SAGrD4O,GAAgBQ,OAAO,CAAElQ,KAAM+lB,IAAoBpU,MAAK,SAACpB,GACxD,MAAsBA,EAAdvQ,YAAR,MAAe,GAAf,EACIA,EAAK,IACRqR,GAAO,SAACS,GACPA,EAAM8S,YAAcvX,KAAKkY,MACxBS,IAAQC,SAASjmB,EAAK,GAAGkmB,IAAK,CAC7BC,SAAS,EACTC,qBAAqB,WAOpBC,EAAc,CACnB/e,QAAQ,wBAAD,OAA0BsM,EAAK9S,KAA/B,gCAhFT,UAkFmB4O,GAAgBQ,OAAO,CAAElQ,KAAMqmB,IAlFlD,QAkFO9V,EAlFP,SAmFgCA,EAAvBvQ,MACFsR,QApFP,MAmFyB,GAnFzB,GAoFwB,KAEtBD,GAAO,SAACS,GACPA,EAAM6S,cAAgBrT,EACtBQ,EAAM4S,aAAerX,KAAKkY,MACzBS,IAAQC,SAAS3U,EAAO4U,IAAK,CAC5BC,SAAS,EACTC,qBAAqB,QAKzB/U,GAAO,SAACS,GACPoS,EAAapS,GACbA,EAAMkT,UAAYA,EAClBlT,EAAMmT,gBAAkBA,EACxBnT,EAAMoT,uBAAyBD,EAC/BnT,EAAMqT,uBAAyB,GAC3BvT,IACHE,EAAME,QAAUJ,EAAOI,QACvBF,EAAM0S,eAAiB5S,EAAOI,QAC9BF,EAAMjF,MAAQ+E,EAAO/E,MACrBiF,EAAMyS,aAAe3S,EAAO/E,MAC5BiF,EAAMgT,WAAa,YAAIhT,EAAMtQ,gBAAgB6H,QAC5C,SAACqB,GAAD,OAC+D,IAA9DkH,EAAO0U,UAAU5C,WAAU,SAACpa,GAAD,OAAOA,EAAExI,OAAS4J,EAAM5J,YAGtDgR,EAAM+S,aAAejR,EACjBG,EAAMH,OACT9B,EAAM8B,KAAO,CAAEnD,OAAQqB,EAAMgT,WAAYlR,KAAMG,EAAMH,MACrD9B,EAAMwS,OAASvQ,EAAMH,MAEtB9B,EAAM2S,aAAe,GACrB3S,EAAMkH,mBAAqB,KAC3BlH,EAAM0I,iBAAmB,KACzB1I,EAAM5E,WAAa,KACnB4E,EAAMM,QAAS,EACfN,EAAMiT,eAAiB,GACvBjT,EAAMmH,UAAY,GAClBsN,aAAczU,MA5HhB,4CADwB,sDAgIxB,CAACT,EAAQ4S,EAAaziB,EAAgB0iB,EAAcjX,IAG/CuZ,EAAa/L,IAAMmD,aAAY,WACpC,IAAItW,EAAO,mBACP4L,EAAM,UAAMjG,EAAQA,EAAMgD,SAAW,IAEzC,MAAO,CACN3I,QAFDA,EAAO,UAAMA,EAAN,4BAAiC4L,EAAjC,qHAGNzC,OAAQ,CACP,OACA,QACA,QACA,OACA,YACA,QACA,WACA,UAGA,CAACxD,IAEEwZ,EAAchM,IAAMmD,aAAY,WACrC,MAAO,CACNnN,OAAQ,CAAC,OAAQ,WAAY,kBAE5B,IAEGiW,EAAkBjM,IAAMmD,aAAY,WAIzC,MAAO,CACNtW,QAJY,kDACZ2F,EAAQA,EAAMnL,IAAM,EADR,KAKZ2O,OAAQ,CAAC,WAER,CAACxD,IAEE0Z,EAAwBlM,IAAMmD,aACnC,SAAClT,GACIA,EACHsF,aAAkBtF,EAAOuC,GAAO0E,MAAK,SAACpB,GACrC,MAAsBA,EAAdvQ,YAAR,MAAe,GAAf,EACM4R,EAASC,YACd7R,OACAgN,EACA,GACA,cAEDqE,GAAO,SAACS,GAAW,IAAD,IACX8U,EAAQ9e,IAAE+e,WAChB/U,EAAMkH,oBACL,UAAA5E,OAAOC,KAAKzC,EAAOI,gBAAnB,eAA6BlN,QAAS,EACnC8M,EAAOI,QADVoC,OAAA,IAAAA,QAAA,IAAAA,CAAA,GAGMxC,EAAOI,SAHb,GAAAoC,OAAA,IAAAA,CAAA,GAIIwS,EAJJxS,OAAA,IAAAA,QAAA,IAAAA,CAAA,CAKItT,KAAK,QAAD,OAAU8lB,IACXna,KANP,IAOIQ,MAAO6E,EAAM7E,MAAMgD,aAGxB6B,EAAM0I,kBACL,UAAA5I,EAAO/E,aAAP,eAAc/H,QAAS,EAAI8M,EAAO/E,MAAQ,CAAC,GAAD,OAAI+Z,IAC/C9U,EAAM2S,aAAezkB,EACrB8R,EAAM5E,WAAaxC,QAIrB2G,GAAO,SAACS,GACPA,EAAMkH,mBAAqB,KAC3BlH,EAAM0I,iBAAmB,KACzB1I,EAAM2S,aAAe,GACrB3S,EAAM5E,WAAaxC,OAItB,CAACuC,EAAOoE,IAGHyV,EAAmBrM,IAAMmD,aAC9B,SAAC7b,GACA,IAAQM,EAAUN,EAAVM,MACJ,CAACV,IAAWE,OAAQF,IAAWC,MAAMgE,SAASvD,IACjDkQ,eAAsBZ,MAAK,SAACpB,GAC3Bc,GAAO,SAACS,GACPA,EAAMgB,gBAAkBvC,QAI3B,IAAMwW,EAAU,SAACjV,GAChBA,EAAMrQ,UAAYM,EAAOA,EAAKM,MAAQ,KACtCyP,EAAMgS,WAAa,KACnBhS,EAAM0S,eAAiB,KACvB1S,EAAMyS,aAAe,KACrBzS,EAAM5E,WAAa,KACnB4E,EAAM2S,aAAe,GACrB3S,EAAMkH,mBAAqB,KAC3BlH,EAAMtQ,eAAiB,GACvBsQ,EAAMiT,eAAiB,GACvBjT,EAAMqT,uBAAyB,IAE5B9iB,IAAUV,IAAWE,OAIzBwP,GAAO,SAACS,GACPoS,EAAapS,GACbiV,EAAQjV,GACRA,EAAM7E,MAAQ,KACd6E,EAAMkB,YAAc,KACpBlB,EAAME,QAAU,KAChBF,EAAMjF,MAAQ,GACdiF,EAAM8B,KAAO,KACb9B,EAAMwS,OAAS,KACfxS,EAAMgT,WAAa,GACnBhT,EAAMgT,WAAa,GACnBhT,EAAM+S,aAAe,KACrB/S,EAAMmH,UAAY,GAClBnH,EAAMkT,UAAY,GAClBlT,EAAMmT,gBAAkB,GACxBnT,EAAMoT,uBAAyB,MAlB/Bf,EAAM4C,KAqBR,CAAC1V,EAAQ8S,EAAOD,IAGX8C,EAAuBvM,IAAMmD,aAAY,SAAClY,GAa/C,OAZgBA,EAAK2D,QAAO,SAACuK,GAC5B,IAAKA,EAAKqT,WAEM,IADDvhB,EAAKge,WAAU,SAAC5S,GAAD,OAAOA,EAAEhQ,OAAS8S,EAAK9S,MAAQgQ,EAAEmW,YAE7D,OAAO,EAGT,OAAuB,IAAnBrT,EAAKsT,eAMR,IAWH,OACC,oCACC,kBAAC,GAAD,CACC/F,QAAS6C,GACT3hB,MAAO2hB,GAAW9a,MAAK,SAAC4H,GAAD,OAAOA,EAAEzO,QAAUZ,KAC1C0lB,uBAAuB,EACvBrH,MAAM,OACN7C,SAAU6J,EACVjkB,kBAAgB,IAEjB,kBAAC,GAAD,CACCoa,SAAUoH,EACVvE,MAAM,QACN7S,MAAOmX,EACPlD,aAAcuF,EACdpkB,MAAO4K,EACPoU,SAAUkC,GACV9hB,UAAWA,IAEXA,IAAcE,IAAWC,MACzB,kBAAC,IAAM6gB,SAAP,KACC,kBAAC,GAAD,CACCxF,SAAU0I,EACV7F,MAAM,OACN7S,MAAM,8BACNiU,aAAcsF,EACdve,eAnCkB,SAACC,GACvB,OAAyB,IAArBA,EAAOgf,UACJ,GAAN,OAAUhf,EAAOpH,KAAjB,iBAEuB,IAApBoH,EAAO+e,SACJ,GAAN,OAAU/e,EAAOpH,KAAjB,eAEMoH,EAAOpH,MA6BVuB,MAAOzB,EAAMikB,aACbzD,WAAY4F,IAEb,kBAAC,GAAD,CACClH,MAAM,gBACN7S,MAAM,+BACNiU,aAAcwF,EACdzJ,SAAU0J,EACVtkB,MAAO6K,S,kJCrgBPmK,GAAYC,YAAW,CAC5B8P,iBAAkB,CACjB5P,QAAS,OACT6P,SAAU,OACVxM,MAAO,OACPjD,OAAQ,UACRK,gBAAiB,kBACjBwE,QAAS,iBACT,iBAAkB,CACjBxE,gBAAiB,YAGnBqP,aAAc,CACb3G,MAAO,OACPlE,QAAS,YAEV8K,SAAU,CACT3P,OAAQ,MACRiD,MAAO,MACPgG,SAAU,GACV2G,OAAQ,WAETC,mBAAoB,CACnBhJ,KAAM,EACNjH,QAAS,OACTa,WAAY,SACZgP,SAAU,QAEXK,eAAgB,CACflQ,QAAS,OACTa,WAAY,UAEbsP,WAAY,CACXhH,MAAO,qBAWT,SAASiH,GAAchnB,GACtB,IAAMgY,EAAUvB,KAChB,OACC,kBAACgI,EAAA,EAAD,eACC9F,UAAWX,EAAQ0O,aACnB1O,QAAS,CAAE4G,SAAU5G,EAAQ+O,aACzB/mB,IAqHQ6Z,WAAMC,MAhHrB,YAcI,IAhCkB9G,EAmBrBvC,EAaE,EAbFA,OACAwW,EAYE,EAZFA,SACApmB,EAWE,EAXFA,UACAqmB,EAUE,EAVFA,oBACAC,EASE,EATFA,WACA9a,EAQE,EARFA,MACA+a,EAOE,EAPFA,MACA7D,EAME,EANFA,MACAlL,EAKE,EALFA,UACAgP,EAIE,EAJFA,UACArO,EAGE,EAHFA,SACAlY,EAEE,EAFFA,aACGd,EACD,kBACIgY,EAAUvB,KACV6Q,IACLtnB,EAAM+jB,gBAnCc/Q,EAoCPhT,EAAMikB,aAnChBjR,GAAQA,EAAKuU,OAA2C,IAAlCvU,EAAKuU,MAAM3lB,QAAQ,aAoC3Cf,IAAcE,IAAWE,QAAUumB,QAAQxnB,EAAMoS,cAE7CqV,EAAgB5mB,IAAcE,IAAWC,OAASqL,EAClDqb,EAAiBlU,OAAOC,KAAK4E,GAAWnU,OAAS,EACjDJ,EAAW,SAAC6jB,GAAD,OAASnU,OAAOG,OAAOgU,GAAO,KACzCjY,EAAOmK,IAAMmD,aAAY,WAC1B0K,EACHL,GAAWvjB,GAAUA,EAASuU,IAAc,IAAI,KAAO,IAAI,KAG5D4O,IACIpmB,IAAcE,IAAWC,MAC5BkmB,IAEDlO,EAAS,CAAE9X,IAAK,OACd,CACF+lB,EACAC,EACArmB,EACA6mB,EACAL,EACAhP,EACAW,IAKD,OC3G0B,SAACvF,EAAMmU,GAA2B,IAAjBC,EAAgB,uDAAT,KAE5CC,EAAc5P,iBAAO0P,GAC3BG,2BAAgB,WACfD,EAAYrP,QAAUmP,KAIvB,IAAMI,EAAiBhL,uBACtB,SAACiL,GAEIxU,EAAKyU,MAAK,SAAC9I,GAAD,OAAS6I,EAAM7I,MAAQA,GAAO6I,EAAME,aACjDF,EAAMG,iBACNN,EAAYrP,QAAQwP,MAGtB,CAACxU,IAGF+E,qBAAU,WAET,IAAM6P,EAAU,OAAGR,QAAH,IAAGA,IAAQlS,SAK3B,OAHA0S,GAAcA,EAAWC,iBAAiB,UAAWN,GAG9C,kBACNK,GAAcA,EAAWE,oBAAoB,UAAWP,MACvD,CAACA,EAAgBH,ID6EpBW,CAAY,CAAC,KAAM9Y,GAGlB,yBAAKiJ,UAAWX,EAAQwO,kBACvB,yBAAK7N,UAAWX,EAAQ8O,gBACtBjmB,IAAcE,IAAWC,MACzB,kBAACgmB,GAAD,CACCrO,UAAWX,EAAQ0O,aACnBhI,QAAS0I,EACTxI,SAAU6I,GAEV,uBAAG9O,UAAW8P,IAAW,aAAczQ,EAAQ2O,aAGjD,kBAACK,GAAD,CACCrO,UAAWX,EAAQ0O,aACnBhI,QAAShP,EACTkP,SAAU8I,GAEV,uBAAG/O,UAAW8P,IAAW,iBAAkBzQ,EAAQ2O,aAEnD9lB,IAAcE,IAAWE,QACzB,kBAAC+lB,GAAD,CACCrO,UAAWX,EAAQ0O,aACnBhI,QAASyI,EACTvI,SAAU0I,GAEV,uBAAG3O,UAAW8P,IAAW,gBAAiBzQ,EAAQ2O,eAInD7lB,GACD,yBAAK6X,UAAWX,EAAQ6O,oBACvB,kBAAC,GAAD,eACCxa,MAAOA,EACPoE,OAAQA,EACR5P,UAAWA,EACX0iB,MAAOA,GACHvjB,KAIP,yBAAK2Y,UAAWX,EAAQ8O,gBACvB,kBAACE,GAAD,CACCrO,UAAWX,EAAQ0O,aACnBhI,QAAS,kBAAM1e,EAAM0oB,WACrB9J,UAAW5e,EAAMoS,cAAgB/F,GAEjC,uBAAGsM,UAAW8P,IAAW,gBAAiBzQ,EAAQ2O,aAEnD,kBAACK,GAAD,CACCrO,UAAWX,EAAQ0O,aACnBhI,QAAS,kBAAM1e,EAAM2oB,QACrB/J,SAAU5e,EAAM4oB,YAAc,GAE9B,uBAAGjQ,UAAW8P,IAAW,cAAezQ,EAAQ2O,aAEjD,kBAACK,GAAD,CACCtI,QAAS,kBAAM1e,EAAM6oB,QACrBjK,SAAU5e,EAAM8oB,cAAgB,GAEhC,uBAAGnQ,UAAW8P,IAAW,cAAezQ,EAAQ2O,kB,mBE7J/ClQ,GAAYC,YAAW,CAC5BqE,MAAO,CACNgO,SAAU,KAEXlpB,OAAQ,CACP4b,cAAe,OACfpE,gBAAiB,UACjB6D,YAAa,UACb6E,MAAO,OACP,UAAW,CACV1I,gBAAiB,UACjB6D,YAAa,UACb6E,MAAO,WAKK,SAASiJ,GAAT,GAMX,IALHC,EAKE,EALFA,KACAzL,EAIE,EAJFA,QACAD,EAGE,EAHFA,KACA2L,EAEE,EAFFA,QAEE,IADF/oB,aACE,MADM,sBACN,EACI6X,EAAUvB,KAChB,OACC,kBAAC2G,EAAA,EAAD,CACCG,KAAMA,EACNC,QAASA,EACTrB,kBAAgB,qBAChBgN,mBAAiB,2BACjBnR,QAAS,CACR+C,MAAO/C,EAAQ+C,QAGhB,kBAAC0C,EAAA,EAAD,CAAavc,GAAG,sBAAsBggB,YAAU/gB,IAChD,kBAACud,EAAA,EAAD,KACC,kBAAC0L,GAAA,EAAD,CAAmBloB,GAAG,4BACpBggB,YAAUgI,KAGb,kBAACtJ,EAAA,EAAD,KACC,kBAACC,EAAA,EAAD,CAAQnB,QAASuK,EAAMlJ,MAAM,UAAUpH,UAAWX,EAAQnY,QACxDqhB,YAAU,QAEZ,kBAACrB,EAAA,EAAD,CAAQnB,QAASlB,EAASuC,MAAM,UAAUD,WAAS,EAACnH,UAAWX,EAAQnY,QACrEqhB,YAAU,S,aCrDhB,SAASmI,GAASC,GACjB,OAAOA,EAAKC,MAAM,KAAKrlB,OAAS,EAAI,EA4BrC,IAAMslB,GAAmB,SAACjhB,EAAMkhB,GAC/B,GAAIlhB,EAAM,CACT,IAAQmhB,EAAenhB,EAAfmhB,WACFC,EAAcvW,IAAMwW,cAAcrhB,EAAK4V,QACvC+G,EAAS1R,OAAOG,OAAO8V,GAAiBnhB,MAAK,SAAC4c,GACnD,IAAM2E,EAAgBzW,IAAMwW,cAAc1E,EAAOngB,OACjD,OAAI8kB,EAAcC,MAAQH,EAAYG,KAC9BD,EAAcC,OAASH,EAAYG,QAChCD,EAAcxhB,SAAUshB,EAAYthB,SACvCwhB,EAAcxhB,SAAWshB,EAAYthB,UAIxC0hB,EAAgB3W,IAAM4W,gBAAgBN,EAAWxpB,MACvD,GAAIglB,EAAQ,CACX,IAAI+E,EAAc/E,EAAO6E,GACrBG,EAAchF,EAAOwE,EAAWS,UAOpC,QANoB/d,IAAhB8d,IACHA,EAAc,SAEK9d,IAAhB6d,IACHA,GAAc,GAEXP,EAAWS,WAAaT,EAAWxpB,MACtC,GAAI,UAAGgqB,KAAH,UAAwBR,EAAWjoB,OACtC,OAAO,MAEF,IAAI,UAAGwoB,KAAH,UAAwBP,EAAWjoB,OAC7C,OAAO,EACD,GACN,CAAC,QAAI2K,EAAW,MAAMpH,SAASkgB,EAAO6E,KACtC,CAAC,QAAI3d,EAAW,MAAMpH,SAAS0kB,EAAWjoB,OAE1C,OAAO,EACD,GACNioB,EAAWS,WAAaT,EAAWxpB,MACnC,CAAC,QAAIkM,EAAW,MAAMpH,SAASkgB,EAAOwE,EAAWS,YACjD,CAAC,QAAI/d,EAAW,MAAMpH,SAAS0kB,EAAWjoB,OAE1C,OAAO,IAIV,OAAO,GAGD,SAAS2oB,GAAoBjS,EAAOsR,GAC1C,IAAMY,EAAe,GACfC,EAAmB,GACzB,EAA2BnS,EAAnBiM,iBAAR,MAAoB,GAApB,EACMmG,EAAQpS,EAAMgM,eAAe1b,QAAO,SAACsa,GAAD,MAAkB,cAAXA,EAAE7iB,QAC7C8S,EAAOmF,EAAM8L,aACb5X,EAAQ8L,EAAM9L,MACdme,EAAW,IAAIC,IAMfC,EA/EY,SAAC,GAAwB,IAAtBtZ,EAAqB,EAArBA,QAASnF,EAAY,EAAZA,MAK9B,OAJAuH,OAAOC,KAAKrC,GAASuZ,SAAQ,SAACC,GAC7B,IAAMtB,EAAOuB,aAAczZ,EAASnF,EAAO2e,GAC3CxZ,EAAQwZ,GAAU7lB,MAAQukB,KAEpBlY,EA0EgB0Z,CALD1X,IAAM4R,wBAAwB,CACnDhS,KAAMmF,EAAMnF,KAAKA,KACjBnD,OAAQsI,EAAMvX,eACdwjB,UAAWjM,EAAMiM,aAmGlB,OA/FAmG,EAAMI,SAAQ,SAACI,GACd,IACM7qB,EAxFR,SAA8BA,GAE7B,OADqB6N,IAAoB7N,GAsFlB8qB,CAAqBD,EAAKrB,WAAWxpB,OAC7B6qB,EAAKrB,WAAWxpB,KACxCgB,EAAK6pB,EAAK7pB,GACVO,EAAQspB,EAAKrB,WAAWjoB,MACxBwpB,EAAUzX,OAAO0X,OACtB,GADe1X,OAAA,IAAAA,QAAA,IAAAA,CAAA,GAGXuX,GAHW,IAIdrB,WAAW,2BACPqB,EAAKrB,YADC,IAETxpB,OACAuB,QACA0oB,SAAUY,EAAKrB,WAAWxpB,UAI7BsqB,EAASW,IAAIjrB,EAAOgB,EAAI+pB,MAEzBT,EAASG,SAAQ,SAAClpB,GACjB,IAAMspB,EAAOtpB,EACP2pB,EAAchY,IAAMwW,cAAcmB,EAAK5M,QACrCuL,EAAeqB,EAAfrB,WACF7Y,EAhGR,YAAoC,IAAjBiZ,EAAgB,EAAhBA,KAAMzhB,EAAU,EAAVA,OACpBnI,EAAO,GACLmrB,EAAWvB,GAAQzhB,EACzB,GAAIgjB,EAAU,CACb,IACMvS,EAAQuS,EAASzpB,QADR,qBACiCsC,OAC1ConB,EAAWD,EAASzpB,QAAQ,MAClC1B,EAAOmrB,EAASxpB,UAAUiX,EAAOwS,GAElC,OAAOprB,EAuFYqrB,CAAQH,GACpBI,EAAapH,EAAUtB,WAC5B,SAAC2I,GAAD,OACC5a,EAAU7L,SAASymB,EAAK3hB,SACvB2hB,EAAKvrB,OAASwpB,EAAWxpB,MACzB6N,IAAoB0d,EAAKvrB,QAAUwpB,EAAWxpB,SAE3C4J,EAAQsa,EAAUoH,GAClBE,EAAalC,GAAiBuB,EAAMtB,GACpCkC,EAAYnC,GAAiBuB,EAAML,GACnCkB,EAAmB,8BACnBC,EAAgBxB,EAAavH,WAClC,SAAC2I,GAAD,aACCL,EAAYtB,OAAZ,UACAsB,EAAYtB,KAAKgC,MAAMF,UADvB,aACA,EAA2C,GAAG5mB,SAASymB,EAAK3hB,SAC5D2hB,EAAKvrB,OAASwpB,EAAWxpB,QAEvB2F,EAAeyH,IAAcoc,EAAWxpB,MACxCwrB,GAAcC,GACM,IAAnBE,EACHxB,EAAapH,OAAO4I,EAAe,GACzB/hB,GAASA,EAAM5I,IACzBopB,EAAiB1Z,KAAK,CAAE1P,GAAI4I,EAAM5I,GAAI+O,QAASnG,EAAMmG,UAGlDnG,EACC,CAAC,UAAMsC,GAAWpH,SAAS0kB,EAAWjoB,OACrCoE,EACCA,IAAiB6jB,EAAWjoB,OAC/B6oB,EAAiB1Z,KAAK,CAAE1P,GAAI4I,EAAM5I,GAAI+O,QAASnG,EAAMmG,UAGtDqa,EAAiB1Z,KAAK,CAAE1P,GAAI4I,EAAM5I,GAAI+O,QAASnG,EAAMmG,UAE5CnG,EAAMrI,QAAUioB,EAAWjoB,QACjCoE,EACCA,IAAiB6jB,EAAWjoB,OAC/B6oB,EAAiB1Z,KAAK,CAAE1P,GAAI4I,EAAM5I,GAAI+O,QAASnG,EAAMmG,WAG/B,IAAnB4b,EACHxB,EAAazZ,KAAb,2BACI9G,GADJ,IAEC5J,KAAMwpB,EAAWxpB,KACjBuB,MAAOioB,EAAWjoB,MAClB0oB,SAAUT,EAAWS,aAGtBE,EAAawB,GAAepqB,MAAQioB,EAAWjoB,MAC/C4oB,EAAawB,GAAe1B,SAAWT,EAAWS,WAKjDtZ,KACoB,IAAnBgb,EACHxB,EAAazZ,KAAK,CACjBoC,KAAMA,EAAK9S,KACXmM,MAAOA,EAAMgD,SACbnP,KAAMwpB,EAAWxpB,KACjBiqB,SAAUT,EAAWS,SACrB1oB,MAAOioB,EAAWjoB,MAClBqI,MAAO+G,KAGRwZ,EAAawB,GAAepqB,MAAQioB,EAAWjoB,MAC/C4oB,EAAawB,GAAe1B,SAAWT,EAAWS,cAMhD,CAAE4B,iBAAkB1B,EAAcC,oBAGnC,SAAS0B,GAAkB7T,EAAOsR,GACxC,IAAMwC,EAAY,GACZ1B,EAAQpS,EAAMgM,eAAe1b,QAAO,SAACsa,GAAD,MAAkB,cAAXA,EAAE7iB,QAC/C4E,EAAI,YAAOylB,GA2Hf,OAzBAA,EAAMI,SAAQ,SAACI,EAAM5jB,GACpB,GAAI4jB,EAAK5M,OAAQ,CAChB,IAAM+N,EAAU9Y,IAAMwW,cAAcmB,EAAK5M,QACrCgO,GAAO,EACPD,EAAQpC,MAAQT,GAAS6C,EAAQpC,QACpCqC,GAAO,GAEJD,EAAQ7jB,QAAUghB,GAAS6C,EAAQ7jB,UACtC8jB,GAAO,GAEU,cAAdpB,EAAK7qB,MAAwBisB,GA3GJ,SAACpB,GAC/B,IAGQ,IAFPkB,EAAUnJ,WACT,SAACsJ,GAAD,OAAOA,EAAEjO,SAAW4M,EAAK5M,QAAUiO,EAAElsB,OAAS6qB,EAAKrB,WAAWxpB,QAE9D,CACD,IAAMmsB,EAAQvnB,EACZmC,KAAI,SAACqlB,EAAOnlB,GACZ,GACCmlB,EAAMnO,SAAW4M,EAAK5M,QACtBmO,EAAM5C,YACNqB,EAAKrB,WAAWxpB,OAASosB,EAAM5C,WAAWxpB,KAE1C,OAAOiH,KAIRsB,QAAO,SAACyH,GAAD,YAAa9D,IAAN8D,KACVqc,EAAWF,EAAMA,EAAMnoB,OAAS,GACtC+nB,EAAUrb,KAAK,CAAEuN,OAAQ4M,EAAK5M,OAAQje,KAAM6qB,EAAKrB,WAAWxpB,OAC5D4E,EAAOA,EAAK2D,QAAO,SAACF,EAAMikB,GACzB,OAAIjkB,EAAK4V,SAAW4M,EAAK5M,SAEvB4M,EAAKrB,aACLnhB,EAAKmhB,YACLqB,EAAKrB,WAAWxpB,OAASqI,EAAKmhB,WAAWxpB,MAElCqsB,IAAaC,MAiFtBC,CAAuB1B,GAEN,YAAdA,EAAK7qB,MAAsBisB,KAGpB,OAAPD,QAAO,IAAPA,OAAA,EAAAA,EAASpC,OAAQoC,EAAQpC,KAAK9kB,SAAS,YACvC,OAACknB,QAAD,IAACA,OAAD,EAACA,EAASpC,QAAV,OAAkBoC,QAAlB,IAAkBA,OAAlB,EAAkBA,EAAS7jB,OAAOrD,SAAS,WA/ErB,SAAC+lB,GAC5B,IAAI2B,GAAmB,EACjBR,EAAU9Y,IAAMwW,cAAcmB,EAAK5M,QAEnCwO,EAAc7nB,EAAKge,WAAU,SAACva,GACnC,MAAkB,WAAdA,EAAKrI,OACDqI,EAAKqkB,UAAYrkB,EAAKqkB,SAAS,IAAMV,EAAQpC,KACjDoC,EAAQpC,KAAK9kB,SAAb,WAA0BuD,EAAKqkB,SAAS,GAAG1sB,KAA3C,MACAgsB,EAAQ7jB,QAAU6jB,EAAQ7jB,OAAOrD,SAASuD,EAAKqkB,SAAS,GAAG1sB,UAI1D4H,EAAUhD,EAAK2D,QAAO,SAACF,GAC5B,GAAIA,EAAK4V,OAAQ,CAChB,IAAMwL,EAAcvW,IAAMwW,cAAcrhB,EAAK4V,QAC7C,MACC,CAAC,SAAU,QAAQnZ,SAASuD,EAAKrI,OACjCypB,EAAYG,MACZH,EAAYG,KAAK9kB,SAASknB,EAAQpC,MAGpC,OAAO,KA+BR,IA7BqB,IAAjB6C,GAAuB7kB,EAAQ5D,SAClCwoB,GAAmB,EACnB5nB,EAAKme,OAAO0J,EAAa,GAEzB,YAAI7nB,GAAM6lB,SAAQ,SAACpiB,GAClB,GACe,SAAdA,EAAKrI,MACLqI,EAAKskB,QACLtkB,EAAKskB,SAAW9B,EAAK5M,OACpB,CACD,IAAM2O,EAAYhoB,EAAKge,WACtB,SAACwJ,GAAD,MACgB,SAAfA,EAAMpsB,MACNosB,EAAMO,QACNP,EAAMO,SAAW9B,EAAK5M,WAEL,IAAf2O,GACHhoB,EAAKme,OAAO6J,EAAW,QAM3BhoB,EAAOA,EAAK2D,QAAO,SAACF,GACnB,MAAkB,cAAdA,EAAKrI,MAAwBqI,EAAK4V,SAAW4M,EAAK5M,UAKnDuO,EAAkB,CACrB,IAAMK,EAAcjoB,EAAKge,WACxB,SAACva,GAAD,MAAwB,YAAdA,EAAKrI,MAAsBqI,EAAK4V,SAAW4M,EAAK5M,WAEtC,IAAjB4O,GACHjoB,EAAKme,OAAO8J,EAAa,IAyBxBC,CAAoBjC,QAKjBjmB,E,gCC1QFgK,GAAkB,IAAIJ,IAAc,CACzCrC,MAAO,gCAEF4gB,GAAqB,IAAIve,IAAc,CAC5CrC,MAAO,qCAGFoK,GAAYC,aAAW,iBAAO,CACnCqE,MAAO,CACNgO,SAAU,KAEXlpB,OAAQ,CACP4b,cAAe,OACfpE,gBAAiB,UACjB6D,YAAa,UACb6E,MAAO,OACP,UAAW,CACV1I,gBAAiB,UACjB6D,YAAa,UACb6E,MAAO,aAKJ+K,GAAa,SAAC,GAAwB,IAAtB1Z,EAAqB,EAArBA,QAASnF,EAAY,EAAZA,MAK9B,OAJAuH,OAAOC,KAAKrC,GAASuZ,SAAQ,SAACC,GAC7B,IAAMtB,EAAOuB,aAAczZ,EAASnF,EAAO2e,GAC3CxZ,EAAQwZ,GAAU7lB,MAAQukB,KAEpBlY,GAGF8b,GAA4B,SACjCpoB,EACAqoB,EACA5I,GAEA,IAAM6I,EAAyB,GAkB/B,MAAO,CAAEC,uBAjBsBvoB,EAAK2D,QAAO,SAACF,GAC3C,IAAkD,IAA9Cgc,EAAuB3iB,QAAQ2G,EAAK6W,KAGvC,OAFA7W,EAAKrH,IACJksB,EAAuBxc,KAAK,CAAE1P,GAAIqH,EAAKrH,GAAI+O,QAAS1H,EAAK0H,WACnD,EAER,GAAI1H,EAAKrH,GAAI,CACZ,IAAMosB,EAAcH,EAAY7kB,MAC/B,SAACnB,GAAD,OAAOA,EAAEomB,WAAahlB,EAAKglB,UAAYpmB,EAAEiY,MAAQ7W,EAAK6W,OAEvD,SAAIkO,GAAeA,EAAYpE,UAAY3gB,EAAK2gB,SAKjD,OAAO,KAEyBkE,2BA84BnBvT,WAAMC,MA34BrB,SAA0B9Z,GACzB,MACC+X,cADOI,EAAR,EAAQA,MAAO1H,EAAf,EAAeA,OAAQ4S,EAAvB,EAAuBA,YAAasF,EAApC,EAAoCA,KAAME,EAA1C,EAA0CA,KAAMvF,EAAhD,EAAgDA,aAActK,EAA9D,EAA8DA,SAE9D,EACCa,IAAMG,UAAS,GADhB,mBAAOwT,EAAP,KAAiCC,EAAjC,KAEQrV,EACPD,EADOC,mBAAoBhH,EAC3B+G,EAD2B/G,QAASvQ,EACpCsX,EADoCtX,UAAWC,EAC/CqX,EAD+CrX,aAAc4sB,EAC7DvV,EAD6DuV,WAExD1V,EAAUvB,KAEVkX,EAAc9T,IAAMmD,aAAY,WACrCvM,GAAO,SAACS,GACPA,EAAMM,QAAS,OAEd,CAACf,IAEE4W,EAAYxN,IAAMmD,aACvB,SAACkM,EAAS/oB,GACT,IAAMytB,EAAM,yBACX1E,QAAShI,YAAUgI,IAAYhI,YAAU,uBACrC/gB,EAAQ,CAAEA,MAAO+gB,YAAU/gB,IAAW,IAF/B,IAGXgB,KAAM,UAEPsP,GAAO,SAACS,GACPA,EAAMM,QAAS,EACfN,EAAM0c,OAASA,OAGjB,CAACnd,IAGI8S,EAAQ1J,IAAMmD,aACnB,SAACmJ,EAASjV,GACT,IAAM2c,EAAa,SAAC3c,GACnBiV,GAAWA,EAAQjV,GACnBA,EAAMmH,UAAY,GAClBnH,EAAMkB,YAAc,KACpBlB,EAAMwS,OAAS,KACfxS,EAAM8B,KAAO,KACb9B,EAAM4S,aAAe,KACrB5S,EAAM6S,cAAgB,KACtB7S,EAAMM,QAAS,EACfN,EAAMgT,WAAahT,EAAMtQ,gBAAkB,GAC3CsQ,EAAM+S,aAAe,KACrB/S,EAAMmT,gBAAkB,GACxBnT,EAAMoT,uBAAyB,GAC/BpT,EAAMkT,UAAY,GAClBlT,EAAM7E,MAAQ,KACd,IAAM2Z,EAAQ9e,IAAE+e,WAChB/U,EAAME,QAAN,aACC,KAAK,aACJjQ,KAAM,OACN4K,KAAM,GACNua,WAAW,EACXpmB,KAAMY,EAAY,OAAG4sB,QAAH,IAAGA,OAAH,EAAGA,EAAYxtB,KAAO,KACxCC,MAAOW,EAAY,OAAG4sB,QAAH,IAAGA,OAAH,EAAGA,EAAYvtB,MAAQ,MACvCiT,IAAM0a,qBAAqB5c,EAAMrQ,YAErC0Q,EAAG,CAAEpQ,KAAM,aAAcjB,KAAM,KAC9B8lB,EAVF,aAWE9lB,KAAK,QAAD,OAAU8lB,IACXna,MAGLqF,EAAMjF,MAAQ,CAAC,GAAD,OAAI+Z,IAClB9U,EAAMiI,YAAc,EACpBjI,EAAMvQ,eAAiB,KACvBuQ,EAAMyI,SAAW,GAEdzI,EACH2c,EAAW3c,GAEXT,EAAOod,KAGT,CAACpd,EAAQ3P,EAAc4sB,IAGlBvG,EAAatN,IAAMmD,aACxB,WACCqG,IACA,IAqCK3S,EArCCqd,EAAY,SAACH,GAClBnd,GAAO,SAACS,GACPoS,EAAapS,GACbA,EAAMkB,YAAc,KACpBlB,EAAM0c,OAASA,EACf1c,EAAME,QAAU,KAChBF,EAAMyS,aAAe,KACrBzS,EAAM0S,eAAiB,KACvB1S,EAAMjF,MAAQ,GACdiF,EAAM8B,KAAO,KACb9B,EAAMgT,WAAa,GACnBhT,EAAM+S,aAAe,KACrB/S,EAAM8S,YAAc,KACpB9S,EAAM4S,aAAe,KACrB5S,EAAM+S,aAAe,KACrB/S,EAAMM,QAAS,EACfN,EAAM6S,cAAgB,KACtB7S,EAAMmH,UAAY,GACdnH,EAAMrQ,YAAcE,IAAWE,QAClCsiB,EAAM,KAAMrS,OAIXiH,EAAMtX,YAAcE,IAAWE,QAC9BkX,EAAM9L,OAAS8L,EAAM/F,cACxBX,aAAkB0G,EAAM9L,OAAS8L,EAAM/F,aAAarB,MAAK,SAACpB,GACzD,MAAyBA,GAAO,GAAxBvQ,EAAR,EAAQA,KACR,IAAgB,IADhB,EAAcwQ,OAMbme,EAAU,UALX,CACC,OAAyB3uB,GAAQ,IAAzB8pB,QACR7B,OADA,MAAkB,GAAlB,QAUClP,EAAM4L,cACTrT,EAAS,CACRxP,GAAIiX,EAAM4L,cAAc7iB,GACxB+O,QAASkI,EAAM4L,cAAc9T,SAG9BkI,EAAM8L,cACN9L,EAAM8L,aAAasD,OAC6B,IAAhDpP,EAAM8L,aAAasD,MAAM3lB,QAAQ,aAEjC8O,EAAS,CACRxP,GAAIiX,EAAM8L,aAAa/iB,GACvB+O,QAASkI,EAAM8L,aAAahU,UAG1BS,GACH5B,GAAgB4C,UAAU,CAAChB,IAASK,MAAK,SAACb,GACzC6d,EAAU,YAKd,CAACtd,EAAQ0H,EAAOkL,EAAaC,EAAcC,EAAO8D,IAG7CqB,EAAU7O,IAAMmD,YAAN,sBAAkB,sDAAAvN,EAAA,yDAC7B0I,EAAMtX,YAAcE,IAAWE,OADF,oBAExBmR,EAAgB+F,EAAhB/F,YAFwB,iEAKxBM,aAAiBN,EAAYlR,IAAI,SAAC8sB,GACxC3G,EAAS,OAAC2G,QAAD,IAACA,OAAD,EAACA,EAAO9E,QAAR,OAAiB8E,QAAjB,IAAiBA,OAAjB,EAAiBA,EAAO7tB,UANH,gDAOxB,GAPwB,OAI1BuQ,EAJ0B,OAQCA,EAAzBb,cARwB,MAQf,GARe,GAQR4U,EARQ,YAQC/T,EARD,KASvBY,aACRmT,EAAKnT,WAAL,2BACIc,EAAYd,YACZmT,EAAKnT,aAGVf,aACCV,EAAO5I,KAAI,SAACyB,GAAD,OAAOA,EAAExH,MACpBuP,EACAgU,GAEDhU,GAAO,SAACS,GACPA,EAAMkB,YAAN,2BACK1B,GAAU,IADf,IAECY,WAAU,OAAEmT,QAAF,IAAEA,OAAF,EAAEA,EAAMnT,aAEnBJ,EAAM7E,MAAQqE,EACdQ,EAAMM,QAAS,EACfN,EAAM+c,oBAAsB,GAC5B/c,EAAMmH,UAAY,MA5Ba,4BA+B5BF,EAAM/G,QA/BsB,wBAgCvB4B,EAASmF,EAATnF,KAhCuB,UAiCblE,GAAgB+D,MAAhB,OAAsBG,QAAtB,IAAsBA,GAAtB,UAAsBA,EAAMA,YAA5B,aAAsB,EAAY9R,IAjCrB,aAiCzByO,EAjCyB,UAkCJ,IAAhBA,EAAIC,OAlCgB,0BAmCHD,EAAIvQ,MAAQ,GAA/B8pB,EAnCsB,EAmCtBA,QAAS/oB,EAnCa,EAmCbA,MACjBknB,EAAU6B,EAAS/oB,GApCW,kCAuCzBuQ,EAASf,GAAOA,EAAIvQ,MAAQuQ,EAAIvQ,KAAK,GAvCZ,UAwCPkU,aAAe,CACtCjH,MAAO8L,EAAM9L,MAAMgD,SACnB2D,KAAMmF,EAAM8L,aAAa/jB,OA1CK,QAwCzBkkB,EAxCyB,OA4C/B3T,GAAO,SAACS,GACPA,EAAMM,QAAS,EACf,IAAM2B,EAAQjC,EAAM8B,KACdhC,EAASoC,IAAM4R,wBAAwB,CAC5ChS,KAAMtC,EACNb,OAAQqB,EAAMtQ,eACdkjB,aAAc3Q,EAAM2Q,aACpBM,UAAWA,GAAa,KAEzBlT,EAAME,QAAUJ,EAAOI,QACvBF,EAAM0S,eAAiB5S,EAAOI,QAC9BF,EAAMjF,MAAQ+E,EAAO/E,MACrBiF,EAAMyS,aAAe3S,EAAO/E,MAC5BiF,EAAMiT,eAAiB,GACvBjT,EAAMkT,UAAYA,GAAa,GAC/BlT,EAAMmH,UAAY,GAClBsN,aAAczU,MA5DgB,SAgE9BiH,EAAMyB,kBAAoBzB,EAAM8V,oBAAoB/pB,UAArD,UACAiU,EAAM7L,kBADN,aACA,EAAkBpM,OAElBmjB,IACAjU,aAAkB+I,EAAM7L,WAAY6L,EAAM9L,OAAO0E,MAAK,SAACpB,GACtD,GAAIA,IAAuB,IAAhBA,EAAIC,OAAf,CACC,MAA2BD,EAAIvQ,MAAQ,GAA/B8pB,EAAR,EAAQA,QAAS/oB,EAAjB,EAAiBA,MACjBknB,EAAU6B,EAAS/oB,OAFpB,CAKA,MAAsBwP,EAAdvQ,YAAR,MAAe,GAAf,EACM4R,EAASC,YACd7R,OACAgN,EACA,GACA,cAEDqE,GAAO,SAACS,GACPA,EAAMkH,mBAAqBpH,EAAOI,QAClCF,EAAM0I,iBAAmB5I,EAAO/E,MAChCiF,EAAM2S,aAAezkB,EACrB8R,EAAMM,QAAS,EACfN,EAAM+c,oBAAsB,GAC5B/c,EAAMmH,UAAY,WAIpBsV,IA3F+B,4CA8F/B,CAACld,EAAQ0H,EAAOwV,EAAatK,EAAagE,IAEvC6G,EAAmBrU,IAAMmD,aAAY,WAAO,IAAD,EAK1CmR,GAHL3a,OAAOG,QACL9S,IAAcE,IAAWC,KAAOoX,EAAqBhH,IAAY,KAC9D,IAC0B9I,MAAK,SAAC8lB,GAAD,OAAOA,EAAEjtB,OAASqG,IAAKqC,QAC5D,QAAIskB,KAAY,OAACA,QAAD,IAACA,GAAD,UAACA,EAAUliB,aAAX,aAAC,EAAiB/H,WACjCmjB,EAAU,uCACH,KAIN,CAACjP,EAAoBhH,EAASvQ,EAAWwmB,IAEtCJ,EAAWpN,IAAMmD,YAAN,sBAAkB,oIAAAvN,EAAA,yDAC7B0I,EAAM/G,QADuB,oDAI7B8c,IAJ6B,oDAKlC7K,IACIlN,OAAO9N,SACV8N,OAAO9N,OAAOgmB,aAAe5hB,KAAKC,UAAU,CAC3C4hB,QAAQ,EACRtkB,KAAI,UAAEmO,EAAM/G,SAAS,UAAjB,aAAE,EAAmBjR,SAGvBgY,EAAMtX,YAAcE,IAAWE,OAZD,sBAadmS,IAAMmb,qBACxBpW,EAAMlM,MACNkM,EAAM/G,QACN,MACA,GAJOvB,EAbyB,EAazBA,OAMF2e,EAAiBhb,OAAOG,OAAOwE,EAAM/G,SAAW,KAAO,MACxC,IAAIqd,IAAID,EAAevnB,KAAI,SAACmnB,GAAD,OAAOA,EAAEluB,UAAU,IAClD6d,KAAOyQ,EAAetqB,QArBN,wBAsBhCmjB,EAAU,+BAtBsB,+BAyB3BqH,EAAiBvW,EAAM/G,SAAS,IAClBlR,MAASwuB,EAAevuB,MA1BX,wBA2BhCknB,EAAU,oCA3BsB,+BA8B7BlP,EAAM8V,oBAAoB/pB,OA9BG,kCA+Bd+oB,GAAmBvb,UACpCyG,EAAM8V,qBAhCyB,aA+B1Bte,EA/B0B,UAkCL,IAAhBA,EAAIC,OAlCiB,0BAmCJD,EAAIvQ,MAAQ,GAA/B8pB,EAnCuB,EAmCvBA,QAAS/oB,EAnCc,EAmCdA,MACjBknB,EAAU6B,EAAS/oB,GApCY,8BAwC7BiS,EAxC6B,uCAyC7B+F,EAAM/F,aACNgB,IAAMub,kBAAkBD,IA1CK,IA2ChC7e,UACIsI,EAAM/F,aAAe,CAAEnC,QAASkI,EAAM/F,YAAYnC,WAEjB,IAAlCye,EAAeE,iBAClBxc,EAAW,WAAX,4BACK+F,EAAM/F,aAAe,IAAId,YAD9B,IAECnR,MAAOuuB,EAAeG,iBACtBC,WAAYJ,EAAeK,kBAC3B9e,UAAWkI,EAAM/F,aAAe,IAAId,YAAc,IAAItB,YAnDvB,EAsDNmI,EAAM/F,aAAe,GAAxCwc,EAtDyB,EAsDzBA,eACJF,EAAeE,iBAAmBA,EAvDL,kCAwDdzc,aAAmBC,GAxDL,WAwD1BzC,EAxD0B,SAyDVA,EAAdvQ,cAzDwB,MAyDjB,GAzDiB,GA0DvB,KAAMA,EAAK,GAAG4vB,OA1DS,kCA2DLtc,aACzBN,EAAYlR,IACZ,SAAC8sB,GACA3G,EAAS,OAAC2G,QAAD,IAACA,OAAD,EAACA,EAAO9E,QAAR,OAAiB8E,QAAjB,IAAiBA,OAAjB,EAAiBA,EAAO7tB,UA9DJ,WA2DzByiB,EA3DyB,0DAkE/BxQ,EAAW,2BACPA,GADO,IAEVd,WAAY,KACZrB,QAAS2S,EAAY3S,UArES,QAyEjCT,aAAgB4C,GAAarB,MAAK,SAACpB,GAClC,MAAyBA,GAAO,GAAxBvQ,EAAR,EAAQA,KACR,IAAgB,IADhB,EAAcwQ,OACK,CAClB,MAAgCxQ,GAAQ,GAAxC,IAAQ8pB,eAAR,MAAkB,GAAlB,EAAsB/oB,EAAtB,EAAsBA,MAClB8uB,EAAe/F,EAWnB,OATC/oB,GACAA,EAAM6E,SAASkc,YAAU,kCAEzB+N,EAAe/N,YAAU,+BACrBgI,EAAQlkB,SAAS,uCACpBiqB,EAAe/N,YAAU,sCAG3BmG,EAAU4H,GAGX,IAAMve,EAAStR,GAAQA,EAAK,GAC5B,EAAiCsR,EAAzBb,cAAR,MAAiB,GAAjB,EAAwB4U,EAAxB,YAAiC/T,EAAjC,IACI+T,EAAKnT,aACRmT,EAAKnT,WAAL,2BACIc,EAAYd,YACZmT,EAAKnT,aAGVf,aACCV,EAAO5I,KAAI,SAACyB,GAAD,OAAOA,EAAExH,MACpBuP,EACAgU,GAEDhU,GAAO,SAACS,GACPA,EAAMkB,YAAc1B,EACpBQ,EAAM7E,MAAQqE,EACdQ,EAAMM,QAAS,EACfN,EAAM+c,oBAAsB,GAC5B3K,EAAapS,SA5GkB,6BAgH7BiH,EAAM/G,QAhHuB,qBAiH1B8d,EAAmB,CACxB,SACA,UACA,UACA,eACA,UACA,MACA,WACA,QACA,OACA,OACA,UACA,cAEI/W,EAAMuL,SAAUtQ,IAAM+b,oBAAoBhX,EAAMuL,QA/HrB,qBAgIzBgL,EAAiBvW,EAAM/G,SAAS,IAClBlR,MAASwuB,EAAevuB,MAjIb,wBAkI9BknB,EAAU,oCAlIoB,4CAqINvY,GAAgBQ,OAAO,CAC/ClQ,KAAM,CAAEsH,QAAQ,gBAAD,OAAkBgoB,EAAexuB,KAAjC,QAtIe,cAqIzBkvB,EArIyB,SA0I9BA,EAAW7S,OACX6S,EAAW7S,MAAQ,KACnB,UAACpE,EAAMuL,cAAP,aAAC,EAAcxiB,IA5Ie,wBA8I9BmmB,EAAU,4BA9IoB,2BAiJzBgI,EAAQC,aACbnX,EAAM/G,QACN+G,EAAMlM,MACNkM,EAAMtX,WAEDwL,EAAQ8L,EAAM9L,MAAMgD,SACpBrF,EAAO,CACZ4iB,SAAU,CACT,CACC1sB,KAAM,OACNiB,KAAM,UACNuoB,WAAW,yBACVrd,SACG+G,IAAMub,kBAAkBD,EAAxB,UACCQ,EADD,CAEF,YACA,SALQ,IAOThuB,GACCiX,EAAMuL,QAAUvL,EAAMuL,OAAO6D,MAC1BpP,EAAMuL,OAAO6D,MADhB,iBAEamH,EAAexuB,QAE9B0sB,SAAS,YAAKyC,MAIX/J,EAAMlS,IAAMmc,WACjBnK,IAAQoK,SAASxlB,EAAM,CACtBub,SAAS,EACTC,qBAAqB,KAGnBpmB,EAAO,CACVkmB,MACAgB,UAAWoI,EAAepI,UAC1BnlB,KAAM,OACNjB,KAAMwuB,EAAexuB,KACrBC,MAAOuuB,EAAevuB,MACtBkM,QACAkb,MAAM,UAAD,OAAYmH,EAAexuB,OAE7BiY,EAAMuL,QAAUvL,EAAMuL,OAAOxiB,KAChC9B,EAAI,GAAS+Y,EAAMuL,OAAOxiB,GAC1B9B,EAAI,QAAc+Y,EAAMuL,OAAOzT,QAC/B7Q,EAAI,MAAY+Y,EAAMuL,OAAO6D,OAASnoB,EAAKmoB,OAE5CzY,GAAgBY,KAAKtQ,GAAM2R,KAA3B,uCAAgC,WAAOpB,GAAP,mBAAAF,EAAA,0DACX,IAAhBE,EAAIC,OADuB,gBAExBoe,EAAQre,EAAIvQ,KAClBioB,GAAe,OAAL2G,QAAK,IAALA,OAAA,EAAAA,EAAOzuB,UAAP,OAAiByuB,QAAjB,IAAiBA,OAAjB,EAAiBA,EAAO9E,SAAzB,OAAkC8E,QAAlC,IAAkCA,OAAlC,EAAkCA,EAAO7tB,OAHpB,2BAIpBwP,EAAIvQ,OAAQuQ,EAAIvQ,KAAK,GAJD,iCAKJ0P,GAAgB+D,MAAMlD,EAAIvQ,KAAK,GAAG8B,IAL9B,QAKxBuuB,EALwB,QAMdrwB,MAAQqwB,EAAYrwB,KAAK,KAClCsR,EAAS+e,EAAYrwB,KAAK,GAChCqR,GAAO,SAACS,GACP,IAAMF,EAASoC,IAAM4R,wBAAwB,CAC5ChS,KAAMtC,EACNb,OAAQqB,EAAMtQ,iBAEfsQ,EAAME,QAAUJ,EAAOI,QACvBF,EAAM0S,eAAiB5S,EAAOI,QAC9BF,EAAMjF,MAAQ+E,EAAO/E,MACrBiF,EAAMyS,aAAe3S,EAAO/E,MAC5BiF,EAAMwe,SAAWhf,EACjBQ,EAAMwS,OAAShT,EACfQ,EAAM+S,aAAN,eAA0BvT,GAC1BQ,EAAMM,QAAS,EACf8R,EAAapS,OArBe,4CAAhC,uDAhM+B,4BA2NvB8B,EAASmF,EAAMnF,KAAfA,KACF3G,EAAQ8L,EAAM9L,MAAMgD,SACpBsgB,EAAiBvc,IAAMwc,qBAAqB,CACjD5c,KAAMmF,EAAM6L,YACZnU,OAAQsI,EAAMvX,iBAETwQ,EAAU0Z,GAAW6E,GACrBpF,EAAQyB,GAAkB7T,GAlOD,EAmOgBiS,GAC9CjS,EACA/G,GAFO2a,EAnOuB,EAmOvBA,iBAAkBzB,EAnOK,EAmOLA,iBAIpBhE,EAAYuJ,aAAOtF,EAAOpS,GAC5B2X,GAAiB,EACjB1L,EAAY,IACZ2H,EAAiB7nB,OA1OU,wBA2O9B4rB,GAAiB,EACXC,EAAoBvc,OAAOG,OAAO5F,KAClCjJ,EAAOinB,EAAiB9kB,KAAI,SAACwkB,GAClC,MACC,sBAAIsE,GAAJ,YAA0B3hB,MAAmBpJ,SAASymB,EAAKvrB,MAEpDurB,EAED,2BAAKA,GAAZ,IAAkBhqB,MAAM,IAAD,OAAMgqB,EAAKhqB,MAAX,UAnPM,UAqPxBsS,aAAcjP,GAAM,SAACkpB,GAC1B3G,EAAS,OAAC2G,QAAD,IAACA,OAAD,EAACA,EAAO9E,QAAR,OAAiB8E,QAAjB,IAAiBA,OAAjB,EAAiBA,EAAO7tB,UAtPJ,YAyP3BmqB,EAAiBpmB,OAzPU,wBA0P9B4rB,GAAiB,EA1Pa,UA2PxB7b,aAAgBqW,GAAkB,SAAC0D,GACxC3G,EAAS,OAAC2G,QAAD,IAACA,OAAD,EAACA,EAAO9E,QAAR,OAAiB8E,QAAjB,IAAiBA,OAAjB,EAAiBA,EAAO7tB,UA5PJ,YA+P3B2vB,EA/P2B,kCAgQZxc,aAAe,CAChCjH,MAAO8L,EAAM9L,MAAMgD,SACnB2D,KAAMmF,EAAM8L,aAAa/jB,OAlQI,QAgQ9BkkB,EAhQ8B,qBAsQ9B8I,GACC/U,EAAMkM,gBACNlM,EAAMmM,uBACNnM,EAAMoM,wBAJA8I,GArQuB,GAqQvBA,uBAAwBD,GArQD,GAqQCA,uBAM5B/I,GAAkB,GAClB2L,IAAuB,GACvB3C,GAAuBnpB,OA7QI,wBA8Q9B8rB,IAAuB,EA9QO,UA+QxB1b,aAAoB+Y,IAAwB,SAACW,GAClD3G,EAAS,OAAC2G,QAAD,IAACA,OAAD,EAACA,EAAO9E,QAAR,OAAiB8E,QAAjB,IAAiBA,OAAjB,EAAiBA,EAAO7tB,UAhRJ,YAmR3BitB,GAAuBlpB,OAnRI,wBAoR9B8rB,IAAuB,EApRO,UAqRxBzb,aAAsB6Y,IAAwB,SAACY,GACpD3G,EAAS,OAAC2G,QAAD,IAACA,OAAD,EAACA,EAAO9E,QAAR,OAAiB8E,QAAjB,IAAiBA,OAAjB,EAAiBA,EAAO7tB,UAtRJ,YAyR3B6vB,GAzR2B,yBA0RxB/K,GAAmBzR,OAAOG,OAAOwE,EAAM/G,SAC3C3I,QACA,SAACyc,GAAD,OAAYA,EAAO/kB,OAAS+kB,EAAO/kB,MAAMyT,WAAW,cAEpD3M,KAAI,SAACie,GAAD,OAAYA,EAAO/kB,SA9RK,WA+RNiU,aAAmB6Q,IA/Rb,SA+R9BZ,GA/R8B,OAgS9B5T,GAAO,SAACS,GACPA,EAAMmT,gBAAkBA,GACxBnT,EAAMoT,uBAAyBD,GAC/BnT,EAAMqT,uBAAyB,MAnSF,YAsS1B+B,EAAUpiB,QAAWiU,EAAM2L,aAtSD,yBAuS1B3L,EAAM4L,cACToD,IAEA1W,GAAO,SAACS,GACPA,EAAMM,QAAS,EACf,IAAM2B,EAAQjC,EAAM8B,KACpB,GAAI8c,EAAgB,CACnB,IAAM9e,EAASoC,IAAM4R,wBAAwB,CAC5ChS,KAAMG,EAAMH,KACZnD,OAAQqB,EAAMtQ,eACdkjB,aAAc3Q,EAAM2Q,aACpBM,cAEDlT,EAAME,QAAUJ,EAAOI,QACvBF,EAAM0S,eAAiB5S,EAAOI,QAC9BF,EAAMjF,MAAQ+E,EAAO/E,MACrBiF,EAAMyS,aAAe3S,EAAO/E,MAC5BiF,EAAMiT,eAAiB,GACvBjT,EAAMkT,UAAYA,EAClBuB,aAAczU,GACdoS,EAAapS,OA3Tc,+BAiUzB+e,GAAuB,SAACC,GAC7B,IAAKA,EACJ,MAAO,GAER,IAAQtD,EAAasD,EAAbtD,SACR,OAAIA,EAAS,IAAMA,EAAS,GAAGA,SACvBA,EAAS,GAAGA,cADpB,GAIK5iB,GAAO,CACZ4iB,SAAU,CACT,CACCzrB,KAAM,UACNjB,KAAMiY,EAAM/G,SAAS,GAAGjQ,KACxBuoB,WAAY,CACXrd,QACAnL,GAAG,UAAD,OAAY8R,EAAK9S,MACnBC,MAAOgY,EAAM/G,SAAS,GAAGjR,MACzBD,KAAM8S,EAAK9S,KACXomB,UAAW,QAEZsG,SAAS,GAAD,mBACJqD,GAAqB9X,EAAM2L,eADvB,YAEJwC,OAKDhB,GAAMlS,IAAMmc,WACjBnK,IAAQoK,SAASxlB,GAAM,CACtBub,SAAS,EACTC,qBAAqB,KAGnBpmB,GAAO,CACVkmB,OACAgB,WAAW,EACXnlB,KAAMgX,EAAM/G,SAAS,GAAGjQ,MAGxB/B,GADG+Y,EAAM4L,cACL,2BACA3kB,IADA,IAEH8B,GAAIiX,EAAM4L,cAAc7iB,GACxB+O,QAASkI,EAAM4L,cAAc9T,UAG1B,2BACA7Q,IADA,IAEHiN,QACAnM,KAAM8S,EAAK9S,KACXC,MAAO6S,EAAK7S,MACZonB,MAAM,UAAD,OAAYvU,EAAK9S,SAGpBiY,EAAM4L,cAvXqB,qBAwX1B5L,EAAM4L,cAAcuB,MAAQlmB,GAAKkmB,IAxXP,yBAyX7B7U,GAAO,SAACS,GACPA,EAAMM,QAAS,EACXse,GACHrf,GAAO,SAACS,GACPA,EAAMM,QAAS,EACf,IAAM2B,EAAQjC,EAAM8B,KACdhC,EAASoC,IAAM4R,wBAAwB,CAC5ChS,KAAMG,EAAMH,KACZnD,OAAQqB,EAAMtQ,eACdkjB,aAAc3Q,EAAM2Q,aACpBM,cAEDlT,EAAME,QAAUJ,EAAOI,QACvBF,EAAM0S,eAAiB5S,EAAOI,QAC9BF,EAAMjF,MAAQ+E,EAAO/E,MACrBiF,EAAMyS,aAAe3S,EAAO/E,MACxB6jB,IACH5e,EAAMkT,UAAYA,GAEnBuB,aAAczU,GACdoS,EAAapS,SA7Ya,4BAoZ/BpC,GAAgBY,KAAKtQ,IAAM2R,KAA3B,uCAAgC,WAAOpB,GAAP,qBAAAF,EAAA,0DACX,IAAhBE,EAAIC,OADuB,gBAE9ByX,EAAS,UAAC1X,EAAIvQ,YAAL,aAAC,EAAUG,QAFU,2BAGpBoQ,EAAIvQ,OAAQuQ,EAAIvQ,KAAK,GAHD,wBAIxBsR,EAASf,EAAIvQ,KAAK,GAChB4T,EAASmF,EAAMnF,KAAfA,KALsB,SAMVD,aAAWC,GAND,OAMxBG,EANwB,OAO9B1C,GAAO,SAACS,GACP,IAAMF,EAASoC,IAAM4R,wBAAwB,CAC5ChS,KAAMG,EAAMH,KACZnD,OAAQqB,EAAMtQ,eACdkjB,aAAc3Q,EAAM2Q,aACpBM,cAEDlT,EAAME,QAAUJ,EAAOI,QACvBF,EAAM0S,eAAiB5S,EAAOI,QAC9BF,EAAMjF,MAAQ+E,EAAO/E,MACrBiF,EAAMyS,aAAe3S,EAAO/E,MAC5BiF,EAAMwS,OAAS/T,EAAIvQ,KAAK,GACxB8R,EAAMiT,eAAiB,GACvBjT,EAAMM,QAAS,EACXse,IACH5e,EAAMkT,UAAYA,GAEnBlT,EAAM6S,cAAN,uCACI7S,EAAM6S,eACNrT,GAFJ,IAGCT,QACCkD,EAAM2Q,aAAa5iB,KAAOwP,EAAOxP,GAC9BiS,EAAM2Q,aAAa7T,QACnBS,EAAOT,UAEZ0V,aAAczU,GACdoS,EAAapS,MAjCgB,4CAAhC,uDApZ+B,6CA4bhC,CACFiH,EACA1H,EACA4S,EACA6K,EACA/G,EACA7D,EACA+D,IAGK/K,EAAczC,IAAMmD,aAAY,WACrCvM,GAAO,SAACS,GACPA,EAAM0c,OAAS,UAEd,CAACnd,IAEE0f,EAAYtW,IAAMmD,aAAY,WACnCqG,IACAE,GAAM,SAACrS,GACNoS,EAAapS,QAEZ,CAACqS,EAAOF,EAAaC,IAExBzJ,IAAMrB,WAAU,WACf+K,GAAM,SAACrS,GACNA,EAAMrQ,UAAYE,IAAWE,YAE5B,CAACsiB,IAEJ,IAAM2D,EAAsBrN,IAAMmD,YAAN,sBAAkB,4DAAAvN,EAAA,0DAE3C0I,EAAMyB,mBAAoBzB,EAAM8V,oBAAoB/pB,UAArD,UACAiU,EAAM7L,kBADN,aACA,EAAkBpM,MAH0B,oBAKvCguB,IALuC,oDAMtCkC,EAAgB5c,OAAO6c,YAC5B7c,OAAO8c,QAAQnY,EAAMC,oBAAoB3P,QACxC,kBAAIhH,EAAJ,2BACEA,EAAMN,OAASqJ,IAAUC,YAAa,UAAAhJ,EAAMwK,aAAN,eAAa/H,QAAS,GAC7DqsB,YAAW9uB,IACXA,EAAMN,OAASqJ,IAAUC,WACL,kBAAbhJ,EAAMP,OAGVstB,EAAiBhb,OAAOG,OAAOyc,GAAiB,KAAO,MACxC,IAAI3B,IAAID,EAAevnB,KAAI,SAACmnB,GAAD,OAAOA,EAAEluB,UAAU,IAErD6d,MAEXyQ,GACAA,EAAe/lB,QAAO,SAACC,GAAD,MAAkB,eAAXA,EAAEvH,SAChC,IACC+C,QAvByC,uBAyB3CmjB,EAAU,+BAzBiC,6BA4B5ChE,IACMmN,EAAa,CAClBlkB,WAAY6L,EAAM7L,WAAWpM,KAC7BmM,MAAO8L,EAAM9L,MAAMgD,UA/BwB,EAiCzB+D,IAAMmb,qBACxBpW,EAAMyB,iBACNwW,EACAI,GACA,KAJO3gB,EAjCoC,EAiCpCA,QAMG3L,SAAUiU,EAAM8V,oBAAoB/pB,OAvCH,qBAwCvCiU,EAAM8V,oBAAoB/pB,OAxCa,kCAyCxB+oB,GAAmBvb,UACpCyG,EAAM8V,qBA1CmC,aAyCpCte,EAzCoC,UA4Cf,IAAhBA,EAAIC,OA5C2B,0BA6CdD,EAAIvQ,MAAQ,GAA/B8pB,EA7CiC,EA6CjCA,QAAS/oB,EA7CwB,EA6CxBA,MACjBknB,EAAU6B,EAAS/oB,GA9CsB,kCAmDrC4P,EAAMF,EAAO5I,KAAI,SAAC6C,GAAD,OAAWmjB,GAAmBvd,KAAK5F,MAnDf,UAoDzBqG,QAAQJ,IAAIA,GApDa,WAoDrCJ,EApDqC,SAqDrC8gB,EAAY9gB,GAAOA,EAAIrH,MAAK,SAACooB,GAAD,OAAqB,IAAdA,EAAE9gB,aAC1B6gB,EAAUrxB,KAtDgB,0BAuDfqxB,EAAUrxB,MAAQ,GAArCe,EAvDkC,EAuDlCA,MAAO+oB,EAvD2B,EAuD3BA,QACX+F,EAAe/F,EAElB/oB,GACAA,EAAM6E,SAASkc,YAAU,kCAEzB+N,EAAe,+BAEhB5H,EAAU4H,GA/DgC,2BAkE3C7f,aAAkB+I,EAAM7L,WAAY6L,EAAM9L,OAAO0E,MAAK,SAACpB,GACtD,MAAsBA,EAAdvQ,YAAR,MAAe,GAAf,EACM4R,EAASC,YACd7R,OACAgN,EACA,GACA,cAEDqE,GAAO,SAACS,GACPA,EAAMkH,mBAAqBpH,EAAOI,QAClCF,EAAM0I,iBAAmB5I,EAAO/E,MAChCiF,EAAM2S,aAAezkB,EACrB8R,EAAMM,QAAS,EACfN,EAAM+c,oBAAsB,GAC5B3K,EAAapS,SAhF4B,wBAoF3Cyc,IApF2C,4CAuF3C,CACFld,EACAkd,EACAxV,EACAkL,EACA6K,EACA5K,EACA+D,IAGKsJ,EAA0B9W,IAAMmD,aAAY,WACjDyQ,GAA4B,KAC1B,IAEGmD,EAAa/W,IAAMmD,aAAY,WACpCyQ,GAA4B,KAC1B,IAEGoD,EAA2BhX,IAAMmD,aAAY,WAClD2T,IACAxJ,MACE,CAACA,EAAYwJ,IAiChB,OACC,kBAAC,IAAM9O,SAAP,KAhCD,WACC,IAAQ+L,EAAWzV,EAAXyV,OACR,OACCA,GACC,kBAACxQ,EAAA,EAAD,CACCG,KAAMiK,QAAQtG,YAAU0M,EAAO1E,UAC/BlR,QAAS,CACR+C,MAAO/C,EAAQ+C,QAGhB,kBAAC0C,EAAA,EAAD,KAAcyD,YAAU0M,EAAOztB,OAAS,UACxC,kBAACud,EAAA,EAAD,KACC,yBACCoT,wBAAyB,CAAEC,OAAQ7P,YAAU0M,EAAO1E,aAGtD,kBAACtJ,EAAA,EAAD,KACC,kBAACC,EAAA,EAAD,CACCnB,QAASpC,EACT3D,UAAWX,EAAQnY,OACnBkgB,MAAM,UACND,WAAS,GAJV,QAgBFkR,GACD,kBAAC,GAAD,CACCvgB,OAAQA,EACR3P,aAAcA,EACdmmB,SAAUA,EACVC,oBAAqBA,EACrBC,WAAYyJ,EACZvkB,MAAO8L,EAAM9L,MACb0X,cAAe5L,EAAM4L,cACrBljB,UAAWsX,EAAMtX,UACjBumB,MAAO+I,EACP7jB,WAAY6L,EAAM7L,WAClB8F,YAAa+F,EAAM/F,YACnB6R,aAAc9L,EAAM8L,aACpBZ,YAAaA,EACbhL,UAAWF,EAAME,UACjB6K,WAAY/K,EAAM+K,WAClBtiB,eAAgBuX,EAAMvX,eACtB+nB,KAAMA,EACNE,KAAMA,EACNH,QAASA,EACTE,WAAYzQ,EAAM8Y,KAAK/sB,OACvB4kB,aAAc3Q,EAAM+Y,OAAOhtB,OAC3Bof,aAAcA,EACdC,MAAOA,EACP8D,UAAWA,EACXrO,SAAUA,IAEX,kBAACgQ,GAAD,CACCzL,KAAMiQ,EACNhQ,QAASmT,EACT1H,KAAM4H,EACN3H,QAAQ,gD,2DCr+BNzgB,GAAS0oB,eACT1a,GAAYC,YAAW,CAC5BsJ,aAAc,CACb3I,gBAAiB,UACjB+Z,UAAW,GACX,iBAAkB,CACjB/Z,gBAAiB,YAGnB6H,MAAO,CACNa,MAAO,qBACPE,SAAU,IAEXoR,mBAAoB,CACnB,mCAAoC,CACnCha,gBAAiB,6BACjB,iBAAkB,CACjBA,gBAAiB,uBAGnB,mCAAoC,CACnC0I,MAAO,qBACP1I,gBAAiB,6BACjB,iBAAkB,CACjBA,gBAAiB,uBAGnB,yCAA0C,CACzC0I,MAAO,qBACP1I,gBAAiB,qBACjB,iBAAkB,CACjBA,gBAAiB,wBAIpB2D,MAAO,CACN+E,MAAO,UACPE,SAAU,IAEXrF,KAAM,CACLmF,MAAO,WAERiO,MAAO,CACNjO,MAAO,MACPuR,aAAc,EACdrR,SAAU,IAEX3Y,OAAQ,CACP2Y,SAAU,IAEXrB,SAAU,CACTmB,MAAO,qBACPE,SAAU,IAEXsR,WAAY,CACX9b,SAAU,SACVa,IAAK,OACLuF,QAAS,WACTkE,MAAO,QACPE,SAAU,GACVuR,WAAY,OACZna,gBAAiB,aAIJ,SAASoa,GAAgBC,GACvC,MAiBIA,EAAO5nB,MAhBV5J,EADD,EACCA,KACAwC,EAFD,EAECA,IACAvC,EAHD,EAGCA,MAHD,IAICgD,kBAJD,MAIc,KAJd,EAKChC,EALD,EAKCA,KALD,IAMC4B,gBAND,SAOCS,EAPD,EAOCA,eAPD,IAQC0B,oBARD,MAQgB,OARhB,MASCiD,aATD,MASS,GATT,MAUC/I,KAAMuyB,OAVP,MAUiB,GAVjB,EAWClxB,EAXD,EAWCA,WACA6E,EAZD,EAYCA,iBAZD,IAaC/B,iBAbD,SAcC8D,EAdD,EAcCA,eAdD,IAeCa,0BAfD,SAgBCxB,EAhBD,EAgBCA,QAEO1G,EAAiB0xB,EAAjB1xB,MAAOguB,EAAU0D,EAAV1D,MACP4D,EACP5xB,EADO4xB,aAAcC,EACrB7xB,EADqB6xB,gBAAiBxV,EACtCrc,EADsCqc,SAAU1b,EAChDX,EADgDW,eAAgBE,EAChEb,EADgEa,UAE3DY,EAAQqwB,mBAAQ,WACrB,IAAIrwB,EAAQmwB,EAAa1xB,IAAS,GAClC,GAAIsD,GAA2B,WAATrC,EAAmB,CACxC,IAAMwS,EAASlS,EAAQA,EAAM8nB,MAAM,KAAO,GAC1C9nB,EAAQkS,EAAO1M,KAAI,SAAC8qB,GACnB,OAAO,eAAG5uB,EAAa4uB,MAGzB,OAAOtwB,IACL,CAACmwB,EAAc1xB,EAAMsD,EAAgBrC,EAAMgC,IAE9C,EAAwB6W,mBAAS,YAAI2X,IAArC,mBAAOvyB,EAAP,KAAa4yB,EAAb,KACA,GAAoChY,mBAAS,MAA7C,qBAAOgE,GAAP,MAAmBiU,GAAnB,MACM1X,GAAYV,IAAM3B,QAAO,GAC/B,GAAoC8B,oBAAS,GAA7C,qBAAOkY,GAAP,MAAmBC,GAAnB,MACA,GAA4BnY,mBAAS,GAArC,qBAAOjI,GAAP,MAAegP,GAAf,MACA,GAA0B/G,mBAAS,GAAnC,qBAAOuC,GAAP,MAAcyE,GAAd,MACA,GAAwChH,oBAAS,GAAjD,qBAAOoY,GAAP,MAAqBC,GAArB,MACQvN,GAAgB8M,EAAhB9M,YACF9M,GAAUvB,KACVmI,KAAWne,GACdA,EAAWmxB,EAAcjxB,EAAgBE,GAEtC2b,GAAyB,YAATtc,GAA+B,WAATiB,EAC5C,GAAkC6Y,oBAAS,GAA3C,qBAAOsY,GAAP,MAAkBC,GAAlB,MACQpa,GAAUJ,cAAVI,MACA9L,GAAqC8L,GAArC9L,MAAkBmmB,GAAmBra,GAA9BtX,UACf,GAAgCmZ,mBAAS7B,GAAM9L,MAAQ,EAAI,GAA3D,qBAAOsN,GAAP,MAAiB8Y,GAAjB,MAEMC,GAAoB1V,uBACzB,SAAC9M,EAAGzO,EAAOkxB,GACK,UAAXA,GAEFV,GADY,oBAAT9wB,GAA+C,kBAAVM,EAC1BA,EAAMyD,GAENzD,KAIjB,CAACN,EAAM+D,IAGF0tB,GAAiB5V,uBACtB,WAAiB,IAAhBvb,EAAe,uDAAP,GACR,OAAI+B,EACI/B,EAAQA,EAAMwF,KAAI,SAACiJ,GAAD,OAAOA,EAAEhQ,QAAM2yB,KAAK,KAAO,GAE9CnwB,EAAMjB,EAAM0B,GAAc1B,IAElC,CAAC0B,EAAYK,EAAgBd,IAGxBowB,GAAe9V,uBACpB,WAAkC,IAAjCgB,EAAgC,uDAAnB,GAAIjM,EAAe,uDAAN,EACpBghB,EACc,WAAnBP,GACG,oCADH,OAEGnmB,SAFH,IAEGA,QAFH,EAEGA,GAAOgD,SACL2jB,EAAe,CACpB,CACC7xB,KAAM,gBACNwP,SAAU,CACTE,UAAW,QACXC,SAAU,IACVrP,MAAOsxB,GAAgB,KAGzB,CACC5xB,KAAM,iBACNwP,SAAU,CACTE,UAAW,QACXC,SAAU,WAGZ,CACC3P,KAAM,gBACNwP,SAAU,CACTE,UAAW,QACXC,SAAU,KACVrP,MAAOsxB,GAAgB,MAIpBpiB,EAAW,GAQjB,GAPIqN,GACHrN,EAASC,KAAK,CACbC,UAAW,OACXC,SAAU,OACVrP,MAAOuc,IAIE,aAAT9d,GAAgC,aAATA,IACxBoF,EAAiBN,SAAShF,EAAMmB,OAE3B2jB,GAJN,CAMa,aAAT5kB,IACHoF,EAAiBN,SAAShF,EAAMmB,OAC/BwP,EAASC,KAAK,CACbC,UAAW,QACXC,SAAU,IACVrP,MAAOqjB,KAETnU,EAASC,KAAK,CAAEC,UAAW,OAAQC,SAAU,IAAKrP,MAAO,UAE7C,aAATvB,IACHoF,EAAiBN,SAAShF,EAAMmB,OAC/BwP,EAASC,KAAK,CACbC,UAAW,QACXC,SAAU,IACVrP,MAAOqjB,KAETnU,EAASC,KAAK,CAAEC,UAAW,OAAQC,SAAU,IAAKrP,MAAO,UAEtD+a,IAAiB0V,KACpBvY,KAAatL,IAAQE,OAClBoC,EAASC,KAAKoiB,EAAa3kB,IAAQE,QAAQoC,UAC3CgJ,KAAatL,IAAQC,MACrBqC,EAASC,KAAKoiB,EAAa3kB,IAAQC,OAAOqC,UAC1CA,EAASC,KAAKoiB,EAAa3kB,IAAQG,OAAOmC,WAE9C,IAAMvR,EAAI,2BACLsH,EACD,CACAA,UACAmL,eAAgB,CAAExF,MAAK,OAAEA,SAAF,IAAEA,QAAF,EAAEA,GAAOgD,WAEhC,IANM,IAOTsB,WACAG,SAAU,QAELjB,EAAS,CACd,OACA,WACA1M,EACA+B,EACA,UACCuD,QAAO,SAACyH,GAAD,OAAOA,KAChB,GAAIhI,GAAsBkqB,QAEnB,KAAI5V,IAAkB0V,GAsD5B,OAAO,IAAIxjB,IAAc,CAAErC,MAAO3J,IAChC4M,OAAO,CAAEO,SAAQzQ,OAAM+I,QAAO4J,WAC9BhB,MAAK,WAA2B,IAAD,yDAAP,GAAhB3R,EAAuB,EAAvBA,KAAMmd,EAAiB,EAAjBA,MAEd,GADArU,GAAsBmqB,IAAgB,GAClCjzB,GAAQA,EAAK8E,QAChB,GAAIqW,GAAU9B,QAAS,CAAC,IAAD,GACrByZ,IACA3V,EAAQpU,GACR/I,EAAKwR,MAAL,mBACE1L,EAAegc,YAAU,iBAD3B,mBAEK,yBAFL,IAIDF,GAASzE,GACT,IAAM0W,EAAa/rB,IAAEka,OAAOhiB,EAAM8F,GAClC8sB,EAAQiB,SAGTjB,EAAQ,IAETO,IAAa,MAxEf,IAAMW,EAAU,uCAAG,8BAAAzjB,EAAA,sEACQU,QAAQJ,IAAI,CACrC,IAAIrB,IAAc,CAAErC,MAAO3J,IAAO4M,OAAO,CACxCO,SACAzQ,KAAM,CACLuR,SAAS,GAAD,OAAMA,EAAN,CAAgBqiB,EAAa3kB,IAAQC,OAAOqC,WACpDG,SAAU,OAEX3I,MAAO,EACP4J,WAED,IAAIrD,IAAc,CAAErC,MAAO3J,IAAO4M,OAAO,CACxCO,SACAzQ,KAAM,CACLuR,SAAS,GAAD,OAAMA,EAAN,CAAgBqiB,EAAa3kB,IAAQE,QAAQoC,WACrDG,SAAU,OAEX3I,MAAO,EACP4J,WAED,IAAIrD,IAAc,CAAErC,MAAO3J,IAAO4M,OAAO,CACxCO,SACAzQ,KAAM,CACLuR,SAAS,GAAD,OAAMA,EAAN,CAAgBqiB,EAAa3kB,IAAQG,OAAOmC,WACpDG,SAAU,OAEX3I,MAAO,EACP4J,aA3BgB,cACZohB,EADY,gBA+BChjB,QAAQJ,IAC1BojB,EAAYlsB,KAAI,SAAC6L,EAAQgG,GAAT,OACfhG,EAAO1T,KACJ0T,EAAO1T,KAAK6H,KAAI,SAACuL,GAAD,mBAAC,eACdA,GADa,IAEhBrR,KAAM6xB,EAAala,GAAO3X,UAE1B,CACAA,KAAM6xB,EAAala,GAAO3X,KAC1BjB,KAAMghB,YAAU,iBAChBhgB,GAAI,qBAzCS,QA+BZ9B,EA/BY,QA6CbwR,KAAK,CACT1Q,KAAMghB,YAAU,gBAChBhgB,GAAI,0BAEL8wB,EAAQ5yB,EAAKg0B,QAjDK,2CAAH,qDAmDhBF,QAyBF,CACChzB,EACAwC,EACAoiB,GACA3hB,EACA+B,EACAiD,EACA7C,EACAtF,EAAMmB,KACN+wB,GACAE,GACAlqB,EACAsU,GACA7C,GACAtN,GACAmmB,GACA9rB,IAII2sB,GAAwBxZ,IAAMmD,aAAY,WAC/Cta,GAAqB,MAAdsb,IAAsB8U,GAAa9U,MACxC,CAAC8U,GAAc9U,GAAYtb,IAExBoB,GAAWkZ,uBAChB,SAACvb,GAAW,IAAD,EACV,MAAwB,kBAAVA,GAAsBiB,GAA7B,mBAEHS,EAAa1B,GAFV,cAGHyD,EAAezD,GAHZ,GAKJA,IAEJ,CAAC0B,EAAYT,EAAKwC,IAGbouB,GAAmBzZ,IAAMmD,aAC9B,SAACvb,GAIA,OAHIA,GAA0B,kBAAVA,GAAsBiB,IACzCjB,EAAK,eAAM0B,EAAa1B,IAElBA,IAER,CAACiB,EAAKS,IAGDowB,GAAe1Z,IAAMmD,aAAY,SAACvb,GACvCwwB,GAAcxwB,GACdsf,GAAU,KACR,IAEGQ,GAAa1H,IAAMmD,aAAY,WACpC,IAAMwE,EAAYzP,GAAS5J,EACvBqZ,GAAajF,KAChBwE,GAAUS,GACVsR,GAAa9U,GAAYwD,MAExB,CAACrZ,EAAOoU,GAAOxK,GAAQ+gB,GAAc9U,KAElCyD,GAAiB5H,IAAMmD,aAAY,WACxC,IAAIwE,EAAYzP,GAAS5J,EAEzB4Y,GADAS,EAAYA,EAAY,EAAIA,EAAY,GAExCsR,GAAa9U,GAAYwD,KACvB,CAACzP,GAAQ5J,EAAO6V,GAAY8U,KAEzBxW,GAAczC,IAAMmD,aAAY,WACrCmV,IAAc,GACdF,GAAc,MACdlR,GAAU,KACR,IAEGY,GAAe9H,IAAMmD,YAAN,uCACpB,WAAO9M,EAAGsjB,GAAV,+BAAA/jB,EAAA,yDACoB,2BAAT,QAAN,EAAA+jB,SAAA,eAAQtyB,IADb,uBAEEixB,IAAc,GAFhB,8BAKKpvB,EALL,qBAMMmN,EAAEujB,WANR,gBAOGD,EAAM,sBAAO/xB,GAAP,CAAc+xB,IACpBD,GAAa,IARhB,2BAWoE,IAAhEC,EAAO1Q,WAAU,SAACsL,GAAD,MAAiB,2BAAT,OAADA,QAAC,IAADA,OAAA,EAAAA,EAAGltB,OAE3BixB,IAAc,GAEdoB,GAAa,OAG2C,IAAxDC,EAAO1Q,WAAU,SAACsL,GAAD,MAAiB,mBAAT,OAADA,QAAC,IAADA,OAAA,EAAAA,EAAGltB,QAlB/B,mDAqBEsyB,EAASA,EACPvsB,KAAI,SAAC8qB,GACL,GAAgB,2BAAT,OAAHA,QAAG,IAAHA,OAAA,EAAAA,EAAK7wB,IACR,OAAOoyB,GAAiBvB,MAIzBtpB,QAAO,SAACyH,GAAD,OAAOA,KA5BlB,wBA8BMsjB,GAAUA,EAAOE,YAAcF,EAAOE,WAAWxvB,QAAUxB,IAC9D8wB,EAAOrwB,GAAcqwB,EAAOE,YA/B/B,WAkCKC,EAlCL,2BAmCK/B,GAnCL,kBAoCG1xB,EACS,oBAATiB,EACGqyB,EACAA,GAAUZ,GAAeY,KAE1B5hB,EAAU,GACD,gBAAT1R,IACK4kB,GAAgB6O,GAAgB,IAAhC7O,YACRlT,EAAU,CACTgiB,SAAUJ,EAASK,YAAuB/O,GAAe,KACzDgP,SAAUN,EAASK,YAAuB/O,GAAa,GAAQ,OAGpD,iBAAT5kB,EAjDL,qBAkDMyzB,EAAazzB,GAlDnB,kCAmDqB,IAAIwO,IAAc,CAAErC,MAAO3J,IAAO8P,OAAO,CAC1DA,OAAQ,wDACRpT,KAAM,CACLqT,QAAQ,2BACJkhB,GACEA,EAAatnB,MAAqC,GAA7B,CAAEA,MAAK,OAAEA,SAAF,IAAEA,QAAF,EAAEA,GAAOgD,YAG5ChD,MAAO,qCA3DX,SA6DG,QAVMsD,EAnDT,cA6DG,IAAIA,GAAJ,UAAIA,EAAKvQ,YAAT,iBAAI,EAAY,UAAhB,aAAI,EAAgBuU,UACnBggB,EAAY,2BACRA,GACAhkB,EAAIvQ,KAAK,GAAGuU,SAhEpB,wBAoEGggB,EAAY,2BACRA,GADQ,IAEXI,mBAAoB,KACpBC,uBAAwB,KACxBC,kBAAmB,KACnBC,kBAAmB,OAzEvB,QA6Ec,sBAATh0B,IACHyzB,EAAaM,mBAA0B,QAAN,EAAAT,SAAA,mBAAQtyB,UAAR,eAAYkG,aAAc,MAE5DyqB,EAAgB,2BAAM8B,GAAgB,IAAQ/hB,IAC9CyK,EAAS,2BACFsX,GAAgB,IAAQ/hB,GACrB,cAAT1R,EAAuBA,OAAOkM,GAnFhC,4CADoB,wDAuFpB,CACCwmB,GACA7vB,EACA7C,EACAmc,EACAwV,EACAD,EACAnwB,EACAN,EACAuB,EACA4wB,GACAnwB,EACAowB,GACAlnB,KAII8nB,GAAkBnX,uBAAY,SAAC9V,EAAGzF,GACvCgxB,GAAYhxB,KACV,IAEH2Y,EAAkBiZ,GAAuB,KAEzC7a,qBAAU,WAET,OADA+B,GAAU9B,SAAU,EACb,WACN8B,GAAU9B,SAAU,KAEnB,IAEH,IAAM+a,GAAS1B,mBACd,kBAAO/uB,EAAWtB,GAAS,GAAKqC,GAASrC,KACzC,CAACA,EAAOsB,EAAUe,KAYnB,OATA0U,qBAAU,WACL0Z,KACHK,IAAa,GACbO,GAAa9U,IACb+C,GAAU,GACViR,EAAQ,OAEP,CAACc,GAAcZ,GAAYlU,KAG7B,yBAAK1I,MAAO,CAAEsB,QAAS,OAAQC,cAAe,SAAUoD,MAAO,SAC9D,kBAAC,IAAD,CACCjC,QAAS,CACR+J,aAAcnD,GAAW5G,GAAQ4G,SAAW5G,GAAQgD,MACpDgH,eAAgBhK,GAAQgD,MACxBiH,eAAgBrD,GAAW5G,GAAQ4G,SAAW5G,GAAQgD,MACtDmH,OAAQnK,GAAQqZ,mBAChB/pB,OAAQ0Q,GAAQ1Q,OAChB8a,UAAWpK,GAAQ1Q,QAEpBqR,UAAWX,GAAQgI,aACnBoU,OAAQ,WACP1xB,GAAOsvB,EAAQ,IACftvB,GAAOowB,GAAa9U,KAErBY,SAAUA,GACV7b,SAAUA,EACVwd,QAASnhB,EACTi1B,QAAS,SAAC/sB,GAAD,OAAYA,EAAOnG,MAC5BmzB,gBAAgB,EAChBC,SAAmB,oBAATpzB,EACVqzB,YAAatC,GACbzwB,MAAO+xB,GACPzV,KAAK,QACLsE,cAAeqQ,GAEdjQ,cAAe,SAAClC,EAASgC,GACxB,IAAMkS,EAAWhsB,GAAO8X,EAASgC,GAE7BvE,IAAcza,GACjBkxB,EAASxR,OAAO,EAAG,EAAG,CACrByQ,WAAY1V,GACZ9d,KAAM8d,GACN7d,MAAM,QAAD,OAAU6d,GAAV,KACL7c,KAAM,YAGR,IAAMuzB,EAAWnU,EAAQjY,MACxB,SAACqsB,GAAD,MAAgB,0BAATA,EAAEzzB,MAGTwzB,IACC,CAAC,GAAI,UAAMtoB,GAAWpH,SAASud,EAAOmR,iBAIrC,IADDe,EAAS3R,WAAU,SAAC6R,GAAD,MAAgB,0BAATA,EAAEzzB,QAGbuzB,EAAS7jB,KAAT,eAAmB8jB,KAGpC,OAAOD,GAGTpY,SAAUsF,GACVW,YAAa,SAACC,GAAD,OACZ,kBAACzE,EAAA,EAAD,iBACKyE,EADL,CAECvC,aAAa,MACbgO,MAAOxG,QAAQwG,GACf/P,QAAQ,WACRiB,MAAOgC,YAAU0T,YAAgBz0B,GAASD,IAC1C20B,gBAAiB,CAChBlc,UAAWiG,GAAW5G,GAAQ4G,SAAW5G,GAAQkH,WAIpD4V,YAAa,SAACvS,GAAD,OACZ,kBAAClD,GAAA,EAAD,CAAKD,IAAKmD,EAAOnD,KAChB,kBAACO,EAAA,EAAD,CACChH,UAAWX,GAAQuZ,WACnBjc,MAAO,CACN8F,aAAa,GAAD,OAAKoB,GAAgB,iBAAmB,UAGpD+F,EAAOwS,OAERxS,EAAOvG,WAGV3U,eAAgB,SAACC,GAChB,OAAID,EACIA,EAAeC,EAAQlI,GAER,YAAhBkI,EAAOnG,KACXmG,EAAM,MACY,kBAAXA,EACPA,EACAA,EAAOpC,IAAiB,MAG5B8oB,GAAS,kBAACrO,EAAA,EAAD,CAAYhH,UAAWX,GAAQgW,OAAQA,GAChDkE,IAAc1V,GACd,kBAAC,GAAD,CACCwB,WAAYA,GACZlZ,KAAM1F,EACNmd,MAAOA,GACPxK,OAAQA,GACR7M,aAAcA,EACdqY,KAAM2U,GACNrT,OAAQ0C,GACR5C,WAAY8C,GACZnF,YAAaA,GACb4B,cAAeqV,GACfpzB,MAAO+gB,YAAU0T,YAAgBz0B,GAASD,IAC1Cmc,SAAU,SAAC5a,GAAD,OAAWkgB,GAAa,CAAE8R,YAAY,GAAQhyB,IACxDud,WAAYrF,GACZsF,YAAakV,GACb3X,cAAeA,GACfC,cAAe6V,KAGhB,kBAAC,GAAD,CACCtU,WAAYA,GACZlZ,KAAM1F,EACNmd,MAAOA,GACPxK,OAAQA,GACR7M,aAAcA,EACdqY,KAAM2U,GACNrT,OAAQ0C,GACR5C,WAAY8C,GACZnF,YAAaA,GACb4B,cAAeqV,GACfpzB,MAAO+gB,YAAU0T,YAAgBz0B,GAASD,IAC1Cmc,SAAU,SAAC5a,GAAD,OAAWkgB,GAAa,CAAE8R,YAAY,GAAQhyB,IACxDgb,cAAe6V,M,4BCpoBd7b,GAAYC,YAAW,CAC5BK,UAAW,CACVua,aAAc,IAEf0D,IAAK,CACJpe,QAAS,QAEVqe,aAAc,CACbhb,MAAO,MACPmX,UAAW,EACX3V,cAAe,aACfyZ,UAAW,YAwFEC,OApFf,SAAyBn1B,GACxB,IAAMgY,EAAUvB,KAChB,EAA0BsB,cAAlBI,EAAR,EAAQA,MAAO1H,EAAf,EAAeA,OACP2kB,EAAsBp1B,EAAtBo1B,SAAa3Q,EAArB,YAA8BzkB,EAA9B,IACQqkB,EAAoBlM,EAApBkM,gBACR,EAAwCxK,IAAMG,SAAS,IAAvD,mBAAOqb,EAAP,KAAqBC,EAArB,KAEMC,EAA0B1b,IAAMmD,aACrC,YAAiC,IAA9BoC,EAA6B,EAA7BA,IAAK8J,EAAwB,EAAxBA,QAASqE,EAAe,EAAfA,SAChB+H,GAAgB,SAACE,GAChB,IAAIC,EAAO,YAAOD,GACZE,EAAmBD,EAAQ3S,WAChC,SAAC5S,GAAD,OAAOA,EAAEkP,MAAQA,GAAOlP,EAAEqd,WAAaA,KAQxC,OAL0B,IAAtBmI,EACHD,EAAQC,GAAR,2BAAiCD,EAAQC,IAAzC,IAA4DxM,YAE5DuM,EAAQ7kB,KAAK,CAAEwO,MAAK8J,UAASqE,aAEvB,YAAIkI,QAGb,IAGKE,EAA0B9b,IAAMmD,aACrC,YAAiC,IAA9BoC,EAA6B,EAA7BA,IAAK8J,EAAwB,EAAxBA,QAASqE,EAAe,EAAfA,SAChB9c,GAAO,SAACS,GACP,IAAMwkB,EAAmBxkB,EAAMmT,gBAAgBvB,WAC9C,SAAC5S,GAAD,OAAOA,EAAEkP,MAAQA,GAAOlP,EAAEqd,WAAaA,MAGd,IAAtBmI,EACHxkB,EAAMmT,gBAAgBqR,GAAkBxM,QAAUA,EAElDhY,EAAMmT,gBAAgBzT,KAAK,CAAEwO,MAAK8J,UAASqE,kBAI9C,CAAC9c,IAOF,OAJAoJ,IAAMrB,WAAU,WACf8c,EAAgB,YAAIjR,MAClB,CAACA,IAGH,yBAAK1L,UAAWX,EAAQjB,WACtBoB,EAAMyd,aAAa3uB,KAAI,SAAC4uB,EAAM1uB,GAAP,aACvB,yBAAKiY,IAAKjY,EAAGwR,UAAWX,EAAQgd,KAC/B,kBAACrV,EAAA,EAAD,CAAY3H,QAAS,CAAE4C,KAAM5C,EAAQid,eACnCY,EAAKp0B,OAEP,kBAACqc,EAAA,EAAD,eACCG,QAAQ,YACJwG,EAFL,CAGChjB,OACC,UAAA4zB,EAAa/sB,MACZ,SAAC4H,GAAD,OAAOA,EAAEkP,MAAQgW,GAAYllB,EAAEqd,WAAasI,EAAKp0B,gBADlD,eAEGynB,UAAW,GAEf7M,SAAU,SAACnM,GAAD,OACTqlB,EAAwB,CACvBnW,IAAKgW,EACLlM,QAAShZ,EAAEiO,OAAO1c,MAClB8rB,SAAUsI,EAAKp0B,SAGjBq0B,OAAQ,SAAC5lB,GAAD,OACPA,EAAEiO,OAAO1c,OACTk0B,EAAwB,CACvBvW,IAAKgW,EACLlM,QAAShZ,EAAEiO,OAAO1c,MAClB8rB,SAAUsI,EAAKp0B,kB,sLCtFjBgV,GAAYC,YAAW,CAC5BnV,UAAW,CACVwe,MAAO,UACP1I,gBAAiB,UACjB,iBAAkB,CACjBA,gBAAiB,YAGnB2I,aAAc,CACb/F,MAAO,OACPmX,UAAW,GACX/Z,gBAAiB,UACjB,kBAAmB,CAClB0I,MAAO,qBACPE,SAAU,IAEX,iBAAkB,CACjB5I,gBAAiB,YAGnB0e,kBAAmB,CAClBhW,MAAO,UACPE,SAAU,IAEX+V,mBAAoB,CACnB/V,SAAU,GACV,mCAAoC,CACnC5I,gBAAiB,6BACjB,iBAAkB,CACjBA,gBAAiB,uBAGnB,mCAAoC,CACnC0I,MAAO,qBACP1I,gBAAiB,6BACjB,iBAAkB,CACjBA,gBAAiB,uBAGnB,yCAA0C,CACzC0I,MAAO,qBACP1I,gBAAiB,qBACjB,iBAAkB,CACjBA,gBAAiB,wBAKpBuH,SAAU,CACTmB,MAAO,qBACPE,SAAU,MAIG,SAASgW,GAAgBvE,GACvC,IAAQ5Y,EAAU4Y,EAAV5Y,MACR,EAYI4Y,EAAO5nB,MAXV5J,EADD,EACCA,KAEAd,GAHD,EAECgB,SAFD,EAGChB,MAEAe,GALD,EAIC+1B,OAJD,EAKC/1B,OACA4f,EAND,EAMCA,MAND,IAOC9d,wBAPD,SAQCoC,EARD,EAQCA,YAEAgD,GAVD,EASCE,YATD,EAUCF,gBACGod,EAXJ,kBAaQzkB,EAAU0xB,EAAV1xB,MACR,EAQIA,GAAS,GAPZ4xB,EADD,EACCA,aACAC,EAFD,EAECA,gBACA1wB,EAHD,EAGCA,KACAkb,EAJD,EAICA,SACAxb,EALD,EAKCA,UACAD,EAND,EAMCA,eACAD,EAPD,EAOCA,eAEKqX,EAAUvB,KAEI,kBAATrX,GAAsB2H,MAAMkL,QAAQ7S,KAC9CA,EAAOA,GAAM0N,IAAa3L,IAASA,GAAM0jB,gBAAkB,IAE5D1kB,EAAQ+gB,YAAU0T,YAAgBz0B,GAASD,IAE3C,IAAMi2B,EAAW,SAAC,GAAD,IAAGpW,EAAH,EAAGA,MAAH,OAChB,yBAAKzK,MAAO,CAAE2E,MAAO,GAAIjD,OAAQ,GAAIK,gBAAiB0I,MAEnDte,EAAQmwB,EAAa1xB,IAAS,GAEhCW,IAAc4jB,EAAK5jB,WAAsC,gBAAzBb,EAAMW,iBACvC0D,IAKA5C,GAHcmwB,EAAavtB,GACxBoI,KAAKkY,MAAMiN,EAAavtB,IACxB,IACWnE,IAAS,IAExB,IAAI0e,GAAW,EASf,OARI6F,EAAKhkB,aACRme,EAAW6F,EAAKhkB,WAAW,CAC1BC,WAAYkxB,EACZhxB,iBACAD,iBACAE,eAID,kBAAC,IAAD,CACC0f,QAASnhB,EACT4Y,QAAS,CACR4C,KAAM5C,EAAQzW,UACdwgB,aAAcnD,EAAW5G,EAAQ4G,SAAW5G,EAAQ+d,kBACpD/T,eAAgBhK,EAAQ+d,kBACxB9T,eAAgBrD,EAAW5G,EAAQ4G,SAAW5G,EAAQ+d,kBACtDzuB,OAAQ0Q,EAAQge,mBAChBI,WAAYpe,EAAQge,mBACpB7T,OAAQnK,EAAQge,mBAChB5T,UAAWpK,EAAQge,oBAEpB/zB,iBAAkBA,EAClB8b,KAAK,QACLpF,UAAWX,EAAQgI,aACnBqW,eAAa,EACbzX,SAAUA,EACVvC,SAAU,SAACnM,EAAGsjB,GACb,IAAM/xB,EAAK,2BACPmwB,GACA0E,YACFp2B,EACAszB,EACAnvB,EACAutB,EAAavtB,GACbxD,IAAc4jB,EAAK5jB,WACO,gBAAzBb,EAAMW,iBAGI,YAATT,IACHuB,EAAMqK,QAAU0nB,GAEjB3B,EAAgBpwB,GAChB4a,EAAS5a,EAAOvB,IAEjBmH,eAAgB,SAACC,GAAD,OACfD,EACGA,EAAeC,GACG,kBAAXA,EACPA,EAAO9H,KACP8H,GAEJivB,aAAc,SAACjvB,GAAD,MACK,kBAAXA,EACN,yBAAK8X,IAAKtG,EAAOrX,MAAO6F,EAAO7F,OAC9B,uBAAGkX,UAAS,aAAQrR,GAAUgO,MAAO,CAAEkhB,YAAa,KACnDtV,YAAU5Z,EAAO9H,OAGnB,yBAAK4f,IAAKtG,EAAOrX,MAAO6F,GACtByY,GAAS,kBAACoW,EAAD,CAAUpW,MAAOzY,IAC3B,uBAAGqR,UAAS,aAAQrR,GAAUgO,MAAO,CAAEkhB,YAAa,KACpD,8BAAOtV,YAAU5Z,MAIpB7F,MAAOA,EACP6gB,YAAa,SAACC,GAAD,OACZ,kBAACzE,EAAA,EAAD,iBACKyE,EADL,CAECrD,MAAOgC,YAAU0T,YAAgBz0B,GAASD,IAC1C+d,QAAQ,WACRjG,QAAS,CACR4C,KAAM5C,EAAQzW,WAEfye,aAAa,MACbwC,WAAU,2BACND,EAAOC,YADD,IAETxC,aAAc,uB,oDClLdvJ,GAAYC,aAAW,iBAAO,CACnC+f,OAAQ,CACPxc,MAAO,OACPa,WAAY,SAEbE,MAAO,CACNiF,SAAU,QAIG,SAASyW,GAAT,GAUX,IATHj1B,EASE,EATFA,MACA4a,EAQE,EARFA,SAQE,IAPFkE,eAOE,MAPQ,GAOR,EANFoW,EAME,EANFA,gBACAhe,EAKE,EALFA,UACAie,EAIE,EAJFA,YACAC,EAGE,EAHFA,YACA32B,EAEE,EAFFA,KACAC,EACE,EADFA,MAEM6X,EAAUvB,KAChB,EAAsBuD,mBAASvY,EAAMo1B,IAAgBp1B,GAAS,IAA9D,mBAAOswB,EAAP,KAAY+E,EAAZ,KA8BA,OARAte,qBAAU,WAERse,EADGD,EACIp1B,EAAMo1B,GAENp1B,KAEN,CAACo1B,EAAap1B,IAGhB,kBAACs1B,EAAA,EAAD,CACCpe,UAAW8P,IAAWzQ,EAAQye,OAAQ9d,GACtClX,MAAOswB,GAAO,GACd1V,SAhCqB,SAACnM,EAAGzO,GAC1B4a,EAAS5a,EAAOyO,GAChB4mB,EAAOr1B,IA+BNu1B,YA5BiB,SAACv1B,GACnB,IAAI6F,EAASiZ,EAAQjY,MAAK,SAAChB,GAAD,OAAYA,EAAOuvB,KAAiBp1B,KAC9D,OAAK6F,EAEJ,kBAAC2vB,GAAA,EAAD,CACC/X,MAAO5X,EAAOsvB,GACd7Y,KAAK,QACLzI,MAAO,CACNwF,WAAYxT,GAAUA,EAAOyY,MAC7BA,MAAQzY,GAAUA,EAAO8P,QAAW,WAPnB,kBAAC,IAAMyK,SAAP,KAAiBpgB,IA2BpCuW,QAAS,CACRye,OAAQE,EACR3b,MAAOhD,EAAQgD,OAEhBuF,QAASA,EACTlZ,eAAgB,SAACC,GAAD,MACG,kBAAXA,EAAsBA,EAAOuvB,GAAevvB,GAEpD4X,MAAO/e,EACPo2B,aAAc,SAACjvB,GACd,OAAQuvB,GAAevvB,EACtB,6BACW,SAATpH,GACA,uBAAGyY,UAAS,aAAQrR,GAAUgO,MAAO,CAAEkhB,YAAa,KAEpDlvB,GAGF,6BACC,kBAAC2vB,GAAA,EAAD,CACC7X,IAAK9X,EAAOuvB,GACZ3X,MAAO5X,EAAOsvB,GACd7Y,KAAK,QACLzI,MAAO,CACNwF,WAAYxT,GAAUA,EAAOyY,MAC7BA,MAAQzY,GAAUA,EAAO8P,QAAW,aAMzCkL,YAAa,SAACC,GAAD,OACZ,kBAACzE,EAAA,EAAD,iBACKyE,EADL,CAECrD,MAAO/e,EACP6f,aAAa,YAOlB0W,GAAaQ,aAAe,CAC3Bz1B,MAAO,GACP4a,SAAU,c,cCjGL7R,GACC,OAGM2sB,GAAa,CACzB,CAAEj3B,KAAM,MAAOC,MAAO,MAAO4f,MAAO,UAAW3I,OAAQ,QACvD,CAAElX,KAAM,OAAQC,MAAO,OAAQ4f,MAAO,UAAW3I,OAAQ,QACzD,CAAElX,KAAM,SAAUC,MAAO,SAAU4f,MAAO,UAAW3I,OAAQ,QAC7D,CACClX,KAAM,aACNC,MAAO,cACP4f,MAAO,UACP3I,OAAQ,QAET,CAAElX,KAAM,SAAUC,MAAO,SAAU4f,MAAO,UAAW3I,OAAQ,QAC7D,CAAElX,KAAM,OAAQC,MAAO,OAAQ4f,MAAO,UAAW3I,OAAQ,QACzD,CAAElX,KAAM,YAAaC,MAAO,aAAc4f,MAAO,UAAW3I,OAAQ,QACpE,CAAElX,KAAM,OAAQC,MAAO,OAAQ4f,MAAO,UAAW3I,OAAQ,QACzD,CAAElX,KAAM,OAAQC,MAAO,OAAQ4f,MAAO,UAAW3I,OAAQ,QACzD,CAAElX,KAAM,QAASC,MAAO,QAAS4f,MAAO,UAAW3I,OAAQ,QAC3D,CACClX,KAAM,aACNC,MAAO,cACP4f,MAAO,UACP3I,OAAQ,SAET,CAAElX,KAAM,OAAQC,MAAO,OAAQ4f,MAAO,UAAW3I,OAAQ,SACzD,CAAElX,KAAM,SAAUC,MAAO,SAAU4f,MAAO,UAAW3I,OAAQ,SAC7D,CAAElX,KAAM,QAASC,MAAO,QAAS4f,MAAO,UAAW3I,OAAQ,SAC3D,CAAElX,KAAM,SAAUC,MAAO,SAAU4f,MAAO,UAAW3I,OAAQ,SAC7D,CACClX,KAAM,aACNC,MAAO,cACP4f,MAAO,UACP3I,OAAQ,QAET,CAAElX,KAAM,QAASC,MAAO,QAAS4f,MAAO,UAAW3I,OAAQ,QAC3D,CAAElX,KAAM,OAAQC,MAAO,OAAQ4f,MAAO,UAAW3I,OAAQ,SACzD,CAAElX,KAAM,WAAYC,MAAO,YAAa4f,MAAO,UAAW3I,OAAQ,QAClE,CAAElX,KAAM,QAASC,MAAO,QAAS4f,MAAO,QAAS3I,OAAQ,QACzD,CAAElX,KAAM,QAASC,MAAO,QAAS4f,MAAO,aAAc3I,OAAQ,UAGzDX,GAAYC,aAAW,iBAAO,CACnCiQ,SAAU,CACT3P,OAAQ,QACRiD,MAAO,QACPgG,SAAU,GACV2G,OAAQ,UACR7G,MAAO,OACPnJ,QAAS,OACTa,WAAY,SACZP,eAAgB,UAEjBkgB,UAAW,CACVnX,SAAU,QAINoX,GAAUxd,IAAMyd,YACrB,WAaC50B,GACK,IAAD,UAZHsyB,WAYG,MAZG,GAYH,EAXHlc,EAWG,EAXHA,MACAye,EAUG,EAVHA,kBACAC,EASG,EATHA,kBACAC,EAQG,EARHA,UACAC,EAOG,EAPHA,UACA/V,EAMG,EANHA,aACAgW,EAKG,EALHA,gBACAC,EAIG,EAJHA,OACAC,EAGG,EAHHA,UAIKC,EAAa5f,iBAAO,MAC1Bqf,EAAkBO,GAClBN,EAAkBM,GAElBC,8BAAoBr1B,GAAK,iBAAO,CAC/Bs1B,QAAS,kBAAMF,EAAWrf,aAG3B,IAAMT,EAAUvB,KAChB,OACC,wBACCnB,MAAO,CAAEsB,QAAS,OAAQa,WAAY,UACtC2H,IAAK4V,EAAI9zB,IAAM4X,EACfpW,IAAKo1B,EACLG,UAAW,SAAC/nB,GACG,UAAVA,EAAEkP,KAAmByY,EAAY,IAAM/e,IAC1C2e,EAAUI,EAAU,GACpBD,OAIF,wBACCjf,UAAU,yCACVrD,MAAO,CAAE+H,SAAU,KAAMzG,QAAS,OAAQM,eAAgB,WAE1D,kBAACuH,EAAA,EAAD,CACCC,QAAS,kBAAM+Y,EAAUzC,EAAI9zB,KAC7Bg3B,aAAW,MACXna,KAAK,QACLpF,UAAWX,EAAQmgB,WACnBvZ,UAAW+Y,GAEX,uBACChf,UAAWyf,aAAK,eAAgBpgB,EAAQ2O,UACxCrR,MAAO,CACNyK,MAAO4X,EAAkB,QAAU,2BAKvC,wBACChf,UAAU,yCACVrD,MAAO,CACN+H,SAAU,MACVtH,SAAU,SACVsiB,WAAY,SACZC,aAAc,aAGdtD,EAAIuD,SACJ,kBAACza,EAAA,EAAD,CACCrc,OAAU,OAAHuzB,QAAG,IAAHA,OAAA,EAAAA,EAAKvzB,QAAS,GACrBvB,KAAK,QACLmc,SAAU,SAACnM,GACVyR,EAAaqT,EAAI9zB,GAAI,QAASgP,EAAEiO,OAAO1c,QAExC6T,MAAO,CAAE2E,MAAO,QAChBmE,WAAY,CACXpG,QAAS,CAAEgD,MAAOhD,EAAQof,YAE3BtX,WAAW,IAGZkV,EAAIvzB,OAGN,wBACCkX,UAAU,yCACVrD,MAAO,CACN+H,SAAU,MACVtH,SAAU,SACVsiB,WAAY,SACZC,aAAc,aAGdtD,EAAIuD,SACJ,kBAACza,EAAA,EAAD,CACCrc,OAAU,OAAHuzB,QAAG,IAAHA,OAAA,EAAAA,EAAK70B,QAAS,GACrBD,KAAK,QACLmc,SAAU,SAACnM,GACVyR,EAAaqT,EAAI9zB,GAAI,QAASgP,EAAEiO,OAAO1c,QAExC6T,MAAO,CAAE2E,MAAO,QAChBmE,WAAY,CACXpG,QAAS,CAAEgD,MAAOhD,EAAQof,cAI5BpC,EAAI70B,OAGN,wBACCwY,UAAW,yCACXrD,MAAO,CAAES,SAAU,SAAUsH,SAAU,QAEtC2X,EAAIuD,SACJ,kBAAC,GAAD,CACCr4B,KAAK,QACLmc,SAAU,SAAC5a,GACVkgB,EAAaqT,EAAI9zB,GAAI,QAASO,IAE/BA,OAAU,OAAHuzB,QAAG,IAAHA,OAAA,EAAAA,EAAKjV,QAAS,GACrBQ,QAAS4W,GACTP,YAAY,QACZC,YAAY,UAGV,OAAH7B,QAAG,IAAHA,OAAA,EAAAA,EAAKjV,QACJ,kBAACkX,GAAA,EAAD,CACC/X,MAAK,UAAE8V,EAAIjV,aAAN,aAAE,EAAW5f,MAClB4d,KAAK,QACLzI,MAAO,CACNwF,WAAU,UAAEka,EAAIjV,aAAN,aAAE,EAAWA,MACvBA,OAAO,UAAAiV,EAAIjV,aAAJ,eAAW3I,SAAU,QAC5Boa,WAAY,QAMjB,wBACC7Y,UAAU,yCACVrD,MAAO,CACN+H,SAAU,MACVtH,SAAU,SACVsiB,WAAY,SACZC,aAAc,aAGdtD,EAAIuD,SACJ,kBAAC,GAAD,CACCr4B,KAAK,OACLmc,SAAU,SAAC5a,GACVkgB,EAAaqT,EAAI9zB,GAAI,OAAQO,IAE9BA,OAAU,OAAHuzB,QAAG,IAAHA,OAAA,EAAAA,EAAKwD,OAAQ,GACpBjY,QAASkY,OAGVzD,EAAIwD,MAGN,wBACC7f,UAAU,yCACVrD,MAAO,CAAE+H,SAAU,OAEnB,kBAACoB,EAAA,EAAD,CACCC,QAAS,kBAAMgZ,EAAU1C,EAAI9zB,KAC7Bg3B,aAAW,MACXna,KAAK,QACLpF,UAAWX,EAAQmgB,WACnBvZ,UAAW+Y,GAEX,uBACChf,UAAWyf,aAAK,gBAAiBpgB,EAAQ2O,UACzCrR,MAAO,CACNyK,MAAO4X,EAAkB,QAAU,2BAKvC,wBACChf,UAAU,yCACVrD,MAAO,CAAE+H,SAAU,OAEnB,kBAACoB,EAAA,EAAD,CACCC,QAAS,kBAAM+Y,EAAUzC,EAAI9zB,KAC7Bg3B,aAAW,MACXna,KAAK,QACLpF,UAAWX,EAAQmgB,WACnBvZ,UAAW+Y,GAEX,uBACChf,UAAWyf,aAAK,aAAcpgB,EAAQ2O,UACtCrR,MAAO,CACNyK,MAAO4X,EAAkB,QAAU,+BAU5Be,gBACdluB,GACA,CACCmuB,MADD,SACO34B,EAAO44B,EAASC,GACrB,IAAKA,EACJ,OAAO,KAER,IAAMhR,EAAOgR,EAAUb,UACvB,IAAKnQ,EACJ,OAAO,KAER,IAAMiR,EAAYF,EAAQG,UAAUjgB,MAC9BkgB,EAAah5B,EAAM8Y,MACzB,GAAIggB,IAAcE,EAAlB,CAGA,IAAMC,EAAoBpR,EAAKqR,wBACzBC,GACJF,EAAkB3hB,OAAS2hB,EAAkB3iB,KAAO,EAEhD8iB,EADeR,EAAQS,kBACKC,EAAIL,EAAkB3iB,IAEpDwiB,EAAYE,GAAcI,EAAeD,GAGzCL,EAAYE,GAAcI,EAAeD,IAG7Cn5B,EAAMu5B,SAAST,EAAWE,GAC1BJ,EAAQG,UAAUjgB,MAAQkgB,OAG5B,SAACQ,GAAD,MAAc,CACbhC,kBAAmBgC,EAAQC,gBAjCdf,CAoCdgB,aACClvB,GACA,CACCmvB,UAAW,SAAC35B,GAAD,MAAY,CACtBkB,GAAIlB,EAAMkB,GACV4X,MAAO9Y,EAAM8Y,UAGf,SAAC0gB,EAASZ,GAAV,MAAuB,CACtBrB,kBAAmBiC,EAAQI,aAC3BC,WAAYjB,EAAQiB,gBAVtBH,CAYErC,K,0FCnTG5gB,GAAYC,aAAW,iBAAO,CACnCkE,KAAM,CACLmF,MAAO,qBACP,YAAa,CACZA,MAAO,2BAKK,SAAS+Z,GAAcpI,GACrC,MAAkC1X,oBAAS,GAA3C,mBAAO+f,EAAP,KAAkBC,EAAlB,KACA,EAQItI,EAAO5nB,MAPV5J,EADD,EACCA,KACAC,EAFD,EAECA,MACAkE,EAHD,EAGCA,YACAwB,EAJD,EAICA,aACAo0B,EALD,EAKCA,cACAC,EAND,EAMCA,aACGzV,EAPJ,kBASQzkB,EAAsC0xB,EAAtC1xB,MAAO4Y,EAA+B8Y,EAA/B9Y,WAAYuhB,EAAmBzI,EAAnByI,eACrBniB,EAAUvB,KAEfmb,EAMG5xB,EANH4xB,aACAC,EAKG7xB,EALH6xB,gBACAxV,EAIGrc,EAJHqc,SACAxb,EAGGb,EAHHa,UACAF,EAEGX,EAFHW,eACAC,EACGZ,EADHY,eAEG4yB,EAAS4G,YACZxI,EACA1xB,EACAmE,EACAwB,IACEhF,IAAc4jB,EAAK5jB,YAAiC,gBAAnBF,GAEhC05B,EAAa7S,QAAQgM,IAAsB,UAAXA,GAAsBA,GACtD/O,EAAK3gB,WACRu2B,EAAa5V,EAAK3gB,SAAS8tB,IAE5B,IAAIhT,GAAW,EACX6F,EAAKhkB,aACRme,EAAW6F,EAAKhkB,WAAW,CAC1BC,WAAYkxB,EACZhxB,iBACAD,iBACAE,eAGFV,EAAQ+gB,YAAU0T,YAAgBz0B,GAASD,IAE3C,IAAMo6B,EAAiB,WAClBL,GACHD,GAAa,GAEdnI,EAAgB,uCACZD,GACCnN,EAAK1gB,OAAS0gB,EAAK1gB,QAAQs2B,EAAYzI,GAAgB,IACxD0E,YACFp2B,GACCm6B,EACDh2B,EACAutB,EAAavtB,KACXxD,IAAc4jB,EAAK5jB,YAAiC,gBAAnBF,KAGrC0b,EAAS,uCAEJuV,GACCnN,EAAK1gB,OAAS0gB,EAAK1gB,QAAQs2B,EAAYzI,GAAgB,IACxD0E,YACFp2B,GACCm6B,EACDh2B,EACAutB,EAAavtB,KACXxD,IAAc4jB,EAAK5jB,YAAiC,gBAAnBF,IAGrCT,GAEDi6B,KAGD,OACC,kBAAC,IAAMtY,SAAP,KACC,kBAAC0Y,GAAA,EAAD,CACC5hB,UAAWC,EACX4hB,QAASH,EACTzb,SAAUA,EACV5G,QAAS,CACR4C,KAAM5C,EAAQ4C,MAEfyB,SAAU,WAER4d,GACAI,GACAzI,GACAA,EAAa9c,cAEbklB,GAAa,GAGdM,KAED74B,MAAOmwB,EAAa1xB,KAEpB65B,GACA,kBAAC,GAAD,CACCxc,KAAMwc,EACN7Q,QAASgR,EACT1c,QAAS,kBAAMwc,GAAa,IAC5B/Q,KAAMqR,EACNn6B,MAAM,aCvGJ,IAAMg3B,GAAa,CACzB,CAAEj3B,KAAM,MAAOC,MAAO,MAAO4f,MAAO,UAAW3I,OAAQ,QACvD,CAAElX,KAAM,OAAQC,MAAO,OAAQ4f,MAAO,UAAW3I,OAAQ,QACzD,CAAElX,KAAM,SAAUC,MAAO,SAAU4f,MAAO,UAAW3I,OAAQ,QAC7D,CACClX,KAAM,aACNC,MAAO,cACP4f,MAAO,UACP3I,OAAQ,QAET,CAAElX,KAAM,SAAUC,MAAO,SAAU4f,MAAO,UAAW3I,OAAQ,QAC7D,CAAElX,KAAM,OAAQC,MAAO,OAAQ4f,MAAO,UAAW3I,OAAQ,QACzD,CAAElX,KAAM,YAAaC,MAAO,aAAc4f,MAAO,UAAW3I,OAAQ,QACpE,CAAElX,KAAM,OAAQC,MAAO,OAAQ4f,MAAO,UAAW3I,OAAQ,QACzD,CAAElX,KAAM,OAAQC,MAAO,OAAQ4f,MAAO,UAAW3I,OAAQ,QACzD,CAAElX,KAAM,QAASC,MAAO,QAAS4f,MAAO,UAAW3I,OAAQ,QAC3D,CACClX,KAAM,aACNC,MAAO,cACP4f,MAAO,UACP3I,OAAQ,SAET,CAAElX,KAAM,OAAQC,MAAO,OAAQ4f,MAAO,UAAW3I,OAAQ,SACzD,CAAElX,KAAM,SAAUC,MAAO,SAAU4f,MAAO,UAAW3I,OAAQ,SAC7D,CAAElX,KAAM,QAASC,MAAO,QAAS4f,MAAO,UAAW3I,OAAQ,SAC3D,CAAElX,KAAM,SAAUC,MAAO,SAAU4f,MAAO,UAAW3I,OAAQ,SAC7D,CACClX,KAAM,aACNC,MAAO,cACP4f,MAAO,UACP3I,OAAQ,QAET,CAAElX,KAAM,QAASC,MAAO,QAAS4f,MAAO,UAAW3I,OAAQ,QAC3D,CAAElX,KAAM,OAAQC,MAAO,OAAQ4f,MAAO,UAAW3I,OAAQ,SACzD,CAAElX,KAAM,WAAYC,MAAO,YAAa4f,MAAO,UAAW3I,OAAQ,QAClE,CAAElX,KAAM,QAASC,MAAO,QAAS4f,MAAO,QAAS3I,OAAQ,QACzD,CAAElX,KAAM,QAASC,MAAO,QAAS4f,MAAO,aAAc3I,OAAQ,UAGzDX,GAAYC,aAAW,iBAAO,CACnCqE,MAAO,CACNgO,SAAU,MACV9O,MAAO,MACPoD,SAAU,OACVod,OAAQ,QAETC,WAAY,CACX3R,SAAU,KAEX4R,SAAU,CACT5a,MAAO,qBACP,YAAa,CACZA,MAAO,uBAGTlgB,OAAQ,CACP4b,cAAe,OACfpE,gBAAiB,UACjB6D,YAAa,UACb6E,MAAO,OACP,UAAW,CACV1I,gBAAiB,UACjB6D,YAAa,UACb6E,MAAO,SAGT4G,SAAU,CACT3P,OAAQ,QACRiD,MAAO,QACPgG,SAAU,GACV2G,OAAQ,UACR7G,MAAO,OACPnJ,QAAS,OACTa,WAAY,SACZP,eAAgB,UAEjB0jB,QAAS,CACR7kB,SAAU,OACV8F,QAAS,oBAEVgf,cAAe,CACdjkB,QAAS,OACTC,cAAe,UAEhBikB,GAAI,CACHzjB,gBAAiB,UACjB6D,YAAa,UACb6E,MAAO,OACP,UAAW,CACV1I,gBAAiB,UACjB6D,YAAa,UACb6E,MAAO,SAGTgb,IAAK,CACJtf,cAAe,QAEhBuf,cAAe,CACdzf,cAAe,IAEhBX,KAAM,CACLhE,QAAS,OACTM,eAAgB,gBAChBO,WAAY,cAEb0gB,WAAY,CACX/G,UAAW,GACX6J,YAAa,IAEdzC,KAAM,CACLzY,MAAO,SAERb,MAAO,CACNe,SAAU,QAIG,SAASib,GAAgBxJ,GACvC,IAAQ5nB,EAA+B4nB,EAA/B5nB,MAAOgP,EAAwB4Y,EAAxB5Y,MAAO9Y,EAAiB0xB,EAAjB1xB,MAAOguB,EAAU0D,EAAV1D,MAC7B,EAAwBhU,mBAAS,IAAjC,mBAAOmhB,EAAP,KAAaC,EAAb,KACA,EAAgCphB,oBAAS,GAAzC,mBAAOqhB,EAAP,KAAiBC,EAAjB,KACA,EAAkCthB,oBAAS,GAA3C,mBAAO+f,EAAP,KAAkBC,EAAlB,KACMhiB,EAAUvB,KACRmb,EAA4C5xB,EAA5C4xB,aAAcC,EAA8B7xB,EAA9B6xB,gBAAiBxV,EAAarc,EAAbqc,SACvC,EAA0BtE,cAAlBI,EAAR,EAAQA,MAAO1H,EAAf,EAAeA,OACP0I,EAAehB,EAAfgB,WACA5X,EACPqwB,EADOrwB,UAAWuT,EAClB8c,EADkB9c,cAAe6iB,EACjC/F,EADiC+F,gBAAiB4D,EAClD3J,EADkD2J,iBAG7C5Z,EAAe,SAACzgB,EAAIhB,EAAMuB,GAC/B25B,GAAQ,SAACD,GAAD,OACPA,EAAKl0B,KAAI,SAAC+tB,GAAD,OAAUA,EAAI9zB,KAAOA,EAAX,2BAAqB8zB,GAArB,kBAA2B90B,EAAOuB,IAAUuzB,SAkC3D4C,EAAS,WACdwD,GAAQ,SAACD,GACR,MAAM,GAAN,0BACIA,QADJ,IACIA,OADJ,EACIA,EAAMl0B,KAAI,SAAC+tB,GACb,OAAO,2BACHA,GADJ,IAECuD,UAAU,QAJb,CAOC,CACCp4B,MAAO,GACPsB,MAAO,GACPse,MAAO,KACPyY,KAAM,KACNt3B,GAAIgG,IAAE+e,WACNsS,UAAU,SAMRb,EAAY,SAACx2B,GAClBk6B,GAAQ,SAACD,GAAD,OAAUA,EAAK1yB,QAAO,SAACusB,GAAD,OAAY,OAAHA,QAAG,IAAHA,OAAA,EAAAA,EAAK9zB,MAAOA,SAG9Cq4B,EAAW1f,IAAMmD,aACtB,SAAC8b,EAAWE,GACX,GAAKrB,KACDmB,IAAc,GAAKE,IAAe,GAAtC,CAGA,IAAMwC,EAAS,YAAQL,GAAQ,IAC3BM,EAAWD,EAAU1C,GACzB0C,EAAU1C,GAAa0C,EAAUxC,GACjCwC,EAAUxC,GAAcyC,EACxBL,EAAQI,MAET,CAACL,EAAMxD,IAGFF,EAAY,SAACv2B,GAClBk6B,GAAQ,SAACD,GAAD,OACPA,EAAKl0B,KAAI,SAAC+tB,GAAD,OACRA,EAAI9zB,KAAOA,EAAX,2BACQ8zB,GADR,IACauD,UAAWvD,EAAIuD,WAAY,IADxC,2BAEQvD,GAFR,IAEauD,UAAU,WAKpBmD,EAAU,WACfN,GAAQ,SAACD,GAAD,OACPA,EAAKl0B,KAAI,SAAC+tB,GAAD,OAAUA,EAAIuD,SAAJ,2BAAoBvD,GAApB,IAAyBuD,UAAU,IAAUvD,SAyB5D2G,EAAa9hB,IAAMmD,aAAY,SAAClI,GAGrC,IAFA,IAAMvT,EAAS,OAAGuT,QAAH,IAAGA,OAAH,EAAGA,EAAe8mB,OAAOrS,MAAM,MAC1C4R,EAAO,GAF4C,WAG9Ch0B,GACR,IACM00B,EADSt6B,EAAU4F,GACKoiB,MAAM,KAC9BppB,EAAQ07B,EAAe,GACvBC,EAAU,OAAG37B,QAAH,IAAGA,OAAH,EAAGA,EAAO0kB,cACtBpjB,EAAQo6B,EAAe,GAC3B,GAAIC,GAA6B,UAAfA,GAAyC,SAAfA,EAC3CX,EAAKvqB,KAAK,CACT1P,GAAIgG,IAAE+e,WACN9lB,MAAOA,EACPsB,MAAOA,GAAStB,SAEX,GAAmB,UAAf27B,GAAyC,SAAfA,EAAuB,CAC3D,IAAI9G,EAAMmG,EAAKY,MACft6B,EACW,UAAVtB,EAAoBg3B,GAAW7uB,MAAK,SAACI,GAAD,OAAOA,EAAExI,OAASuB,KAASA,EAChEuzB,EAAG,2BAAQA,GAAR,kBAAc70B,EAAQsB,IACzB05B,EAAKvqB,KAAKokB,KAjBH7tB,EAAI,EAAGA,GAAC,OAAG5F,QAAH,IAAGA,OAAH,EAAGA,EAAW2C,QAAQiD,IAAM,EAApCA,GAoBTi0B,EAAQD,KACN,IAEGa,GAAU,uCAAG,4BAAAvsB,EAAA,yDAClB6rB,GAAY,GACP3D,IAAmBp2B,EAFN,gCAGCqT,aAAiB,CAAE1U,KAAMqB,IAH1B,OAGXoO,EAHW,OAIjBgsB,EAAWhsB,GAJM,sBAKPmF,EACV6mB,EAAW7mB,GAEXsmB,EAAQ,IARS,2CAAH,qDAYVa,GAAiBpiB,IAAMmD,aAAY,WAEvCvM,GADIqE,IAAkBvT,GAAa4X,GAAcoiB,EAC1C,SAACrqB,GACPA,EAAMmH,UAAUc,GAAc,CAC7B5X,UAAW,gDAIN,SAAC2P,UACAA,EAAMmH,UAAUc,OAGvB,CAAC5X,EAAW4X,EAAYrE,EAAeymB,EAAkB9qB,IAc5D,OAZA+H,qBAAU,WACTyjB,OACE,CAACA,KAEJzjB,qBAAU,WACJ1D,EAIL6mB,EAAW7mB,GAHVsmB,EAAQ,MAIP,CAACtmB,EAAe6mB,IAGlB,yBAAKhjB,UAAWX,EAAQ4C,MACvB,kBAAC6W,GAAD,CACC3nB,MAAOA,EACPsV,IAAKtG,EACLA,MAAOA,EACP9Y,MAAOA,EACPguB,MAAOA,IAER,kBAACvP,EAAA,EAAD,CACCC,QAASsd,GACT9D,aAAW,MACXna,KAAK,QACLpF,UAAWX,EAAQmgB,YAEnB,uBACCxf,UAAWyf,aACVxG,EAAa9nB,EAAM5J,OAAS4U,EACzB,eACA,aACHkD,EAAQwgB,SAIV6C,GACA,kBAACje,EAAA,EAAD,CACCG,KAAM8d,EACN7d,QAAS,SAACtW,EAAGyrB,GACG,kBAAXA,GACH2I,GAAY,IAGdtjB,QAAS,CACR+C,MAAO/C,EAAQ+C,QAGhB,kBAAC0C,EAAA,EAAD,KAAcyD,YAAU,cACxB,kBAACxD,EAAA,EAAD,CAAe/E,UAAWX,EAAQ6iB,eACjC,kBAACqB,GAAA,EAAD,CAAavjB,UAAWX,EAAQ4iB,SAC/B,6BACC,kBAACuB,GAAA,EAAD,CACCnkB,QAAS,CACRkH,MAAOlH,EAAQkH,OAEhBkd,QACC,kBAACtC,GAAD,CACChwB,MAAO,CACN5J,KAAM,kBACNqC,gBAAiBxB,IAAWE,OAC5Bd,MAAO,gBACP85B,eAAe,EACfC,aACC,0DAEFC,eA5Ha,WACjB54B,GAAco2B,GAClByD,EAAQ,KA2HAp7B,MAAOA,IAGTkf,MAAOgC,YAAU,mBAElB,yBAAKvI,UAAU,sBACd,8BAAOuI,YAAU,oBACjB,kBAACrB,EAAA,EAAD,CACCnB,QAASkZ,EACTM,aAAW,MACXna,KAAK,QACLpF,UAAWX,EAAQ+iB,IACnBnc,UAAW+Y,EACX0E,UACC,uBACC1jB,UAAWyf,aAAK,aAAcpgB,EAAQ2O,UACtCrR,MAAO,CACNyK,MAAO4X,EACJ,QACA,0BAKLzW,YAAU,SAGb,+BACC,2BACCvI,UAAU,kBACVrD,MAAO,CAAE4f,UAAW,SAEpB,wBAAI5f,MAAO,CAAEsB,QAAS,OAAQa,WAAY,WACxC,CACA,OACA,QACA,QACA,QACA,OACA,OACA,QACCxQ,KAAI,SAACsB,EAAMpB,GAAP,OACL,wBACCwR,UAAU,yCACVyG,IAAG,aAAQjY,GACXmO,MAAO,CACN8F,aAAc,iBACdiC,SAAmB,SAAT9U,EAAoB,KAAO,QAGrCA,OAtBL,OA0BE4yB,QA1BF,IA0BEA,OA1BF,EA0BEA,EAAMl0B,KAAI,SAAC+tB,EAAK7tB,GAAN,OACV,kBAAC,GAAD,CACCiY,IAAK4V,EAAI9zB,GACT4X,MAAO3R,EACPjG,GAAI8zB,EAAI9zB,GACRu2B,UAAWA,EACXC,UAAWA,EACXgE,QAASA,EACT1G,IAAKA,EACLuE,SAAUA,EACV5X,aAAcA,EACdgW,gBAAiBA,EACjBC,OAAQA,EACRC,UAAS,OAAEsD,QAAF,IAAEA,OAAF,EAAEA,EAAMj3B,iBAQxB,kBAAC0b,EAAA,EAAD,CAAejH,UAAWX,EAAQgjB,eACjC,kBAACnb,EAAA,EAAD,CACCnB,QAAS,WACR0c,EAAQ,IACRE,GAAY,GACZW,MAEDtjB,UAAWX,EAAQ+iB,IACnB9c,QAAQ,YAEPiD,YAAU,UAEZ,kBAACrB,EAAA,EAAD,CACCnB,QApOW,YACZiZ,GAAoBwD,EAAKj3B,OAIbi3B,EAAKrY,WAAU,SAAC4N,GAAD,OAAQA,EAAEvwB,UAC1B,EACd65B,GAAa,KA7FM,SAACmB,GACrB,IAAIrmB,EAAgB,IACZ,OAAJqmB,QAAI,IAAJA,OAAA,EAAAA,EAAMj3B,SAAU,EACnB4Q,EAAgB,KAEhBqmB,EAAKxQ,SAAQ,SAACqK,EAAK7tB,GAIgB,IAAD,GAH7B6tB,EAAI70B,QACP2U,GAAa,UAAO3N,EAAI,EAAI,KAAO,IAAtB,OAA2B6tB,EAAI70B,MAA/B,YAAwC60B,EAAIvzB,QAEtDuzB,EAAIjV,OAASiV,EAAIjV,MAAM7f,QAC1B4U,GAAiB,sBAAakgB,EAAIjV,aAAjB,aAAa,EAAW7f,OAEtC80B,EAAIwD,OACP1jB,GAAiB,UAAYkgB,EAAIwD,SAIpC3G,GAAgB,SAACD,GAAD,mBAAC,eACbA,GADY,IAEf9c,qBAEDuH,EAAS,2BAEJuV,GAFG,IAGN9c,kBAED,iBAsEDwnB,CAAanB,GACbG,GAAY,GACZW,MAVCjC,GAAa,IAmOTla,WAAS,EACTnH,UAAWyf,aAAKpgB,EAAQ+iB,IAAK/iB,EAAQ8iB,KAEpC5Z,YAAU,SAKd6Y,GACA,kBAAC3c,EAAA,EAAD,CACCG,KAAMwc,EACNvc,QAAS,kBAAMwc,GAAa,IAC5B7d,kBAAgB,qBAChBgN,mBAAiB,2BACjBnR,QAAS,CACR+C,MAAO/C,EAAQ0iB,aAGhB,kBAACjd,EAAA,EAAD,CAAavc,GAAG,sBACdggB,YAAU,UAEZ,kBAACxD,EAAA,EAAD,KACC,kBAAC0L,GAAA,EAAD,CAAmBloB,GAAG,4BACpBggB,YAAU,uBAGb,kBAACtB,EAAA,EAAD,KACC,kBAACC,EAAA,EAAD,CACCnB,QAAS,kBAAMsb,GAAa,IAC5Bja,MAAM,UACNpH,UAAWX,EAAQnY,QAElBqhB,YAAU,UC/dHza,OAtBf,YAA0C,IAAxBqD,EAAuB,EAAvBA,MAAOkkB,EAAgB,EAAhBA,MAAOhuB,EAAS,EAATA,MAC/B,EAAuDA,EAAM4xB,aAArDmC,EAAR,EAAQA,mBAAoBC,EAA5B,EAA4BA,uBAC5B,OACC,oCACC,kBAACvC,GAAD,CAAiB3nB,MAAOA,EAAO9J,MAAOA,EAAOguB,MAAOA,IACnD+F,GAAsBC,GACtB,kBAACvC,GAAD,CACC3nB,MAAO,CACN5J,KAAM,oBACNwC,IAAKqxB,EACL5zB,MAAO,QACPgD,WAAY6wB,EACZ9uB,aAAc8uB,GAEfh0B,MAAOA,EACPguB,MAAOA,M,8KCuBNvX,GAAYC,YAAW,CAC5BsE,MAAO,CACN3D,gBAAiB,UACjB+Z,UAAW,GACX,iBAAkB,CACjB/Z,gBAAiB,WAElB,iCAAkC,CACjCL,OAAQ,oBAGVulB,iBAAkB,CACjBjhB,WAAY,GACZC,cAAe,IAEhBihB,qBAAsB,CACrBnlB,gBAAiB,UACjBia,aAAc,EACd,iBAAkB,CACjBja,gBAAiB,YAGnB6H,MAAO,CACNa,MAAO,UACPE,SAAU,GACV,yBAA0B,CACzBF,MAAO,WAER,yBAA0B,CACzBzJ,IAAK,mBAGPmmB,aAAc,CACb1c,MAAO,UACP,0BAA2B,CAC1B7E,YAAa,WAEd,4BAA6B,CAC5BA,YAAa,QACbwhB,YAAa,IAGfC,eAAgB,GAChBC,QAAS,CACR7c,MAAO,WAER8c,WAAY,CACX,YAAa,CACZ9c,MAAO,WAER,qBAAsB,CACrB1I,gBAAiB,YAGnBmjB,QAAS,GACTsC,MAAO,GACPv7B,UAAW,CACVwe,MAAO,UACP1I,gBAAiB,UACjB,iBAAkB,CACjBA,gBAAiB,YAGnB0lB,aAAc,CACbhd,MAAO,WAERid,WAAY,CACXjd,MAAO,QACPyR,WAAY,OAEbyL,YAAa,CACZC,OAAQ,oBAETC,aAAc,CACbpd,MAAO,sBAERvf,OAAQ,CACPuf,MAAO,WAER3f,SAAU,CACT2f,MAAO,OAERqd,gBAAiB,CAChBrd,MAAO,UACPlE,QAAS,YACT,iBAAkB,CACjBoE,SAAU,WAGZod,qBAAsB,CACrBtd,MAAO,UACP1I,gBAAiB,6BACjB,UAAW,CACVA,gBAAiB,uBAGnB2I,aAAc,CACb/F,MAAO,OACPmX,UAAW,GACX/Z,gBAAiB,UACjB,kBAAmB,CAClB0I,MAAO,qBACPE,SAAU,IAEX,iBAAkB,CACjB5I,gBAAiB,YAGnB0e,kBAAmB,CAClBhW,MAAO,UACPE,SAAU,IAEX+V,mBAAoB,CACnB/V,SAAU,GACV,mCAAoC,CACnC5I,gBAAiB,6BACjB,iBAAkB,CACjBA,gBAAiB,uBAGnB,mCAAoC,CACnC0I,MAAO,qBACP1I,gBAAiB,6BACjB,iBAAkB,CACjBA,gBAAiB,uBAGnB,yCAA0C,CACzC0I,MAAO,qBACP1I,gBAAiB,qBACjB,iBAAkB,CACjBA,gBAAiB,wBAIpBimB,eAAgB,CACfrd,SAAU,IAEXsd,kBAAmB,CAClBtd,SAAU,IAEXrB,SAAU,CACTmB,MAAO,qBACPE,SAAU,MAINud,GAAoB3jB,IAAM4jB,gBAahC,IAAMC,GAAmB,SAACj8B,GACzB,OAAOA,EAAMuD,SAAS,YAWvB,SAAS24B,GAAYjM,GACpB,IACC5Y,EAOG4Y,EAPH5Y,MADD,EAQI4Y,EANH5jB,iBAFD,SAGCkgB,EAKG0D,EALH1D,MACAzmB,EAIGmqB,EAJHnqB,YACAq2B,EAGGlM,EAHHkM,oBALD,EAQIlM,EAFHmM,iBAND,SAOC/8B,EACG4wB,EADH5wB,aAEKkX,EAAUvB,KAChB,EAA8BoD,IAAMG,UAAS,GAA7C,mBAAO8jB,EAAP,KAAgBC,EAAhB,KACA,EAWIrM,EAAO5nB,MAVV3J,EADD,EACCA,MACAD,EAFD,EAECA,KACAiB,EAHD,EAGCA,KACAf,EAJD,EAICA,SACAC,EALD,EAKCA,SACAmL,EAND,EAMCA,IACAwyB,EAPD,EAOCA,IACA35B,EARD,EAQCA,YACAhC,EATD,EASCA,gBACGoiB,EAVJ,kBAYMzkB,EAAQ6Z,IAAMokB,WAAWT,IAE9B5L,EAMG5xB,EANH4xB,aACAC,EAKG7xB,EALH6xB,gBACAxV,EAIGrc,EAJHqc,SACAxb,EAGGb,EAHHa,UAJD,EAOIb,EAFHY,sBALD,MAKkB,GALlB,EAMCD,EACGX,EADHW,eAEGue,EAxDL,SAAe1f,EAAMsK,GACpB,IAAMkO,EAAUvB,KAChB,OACC,8BACC,8BAAOjX,GACNsK,EAAMtJ,QAAU,0BAAMmY,UAAWX,EAAQxX,QAAzB,cAChBsJ,EAAM1J,UAAY,0BAAMuY,UAAWX,EAAQ5X,UAAzB,QAkDT89B,CAAMhd,YAAU0T,YAAgBz0B,GAASD,IAAQwxB,EAAO5nB,OAChE0U,EAAc0C,YAAU0T,YAAgBz0B,GAASD,IACxC,WAATA,GAA8B,eAATA,EACxBse,EAAc,UACK,WAATte,EACVse,EAAc,aACK,eAATte,IACVse,EAAc,cAEf,IAAI/c,EAAQmwB,EAAa1xB,IAAS,GAClC,IACEW,IAAc4jB,EAAK5jB,WAAsC,gBAAzBb,EAAMW,iBACvC0D,EACC,CACD,IAAMyF,EAAQ8nB,EAAavtB,GACxBoI,KAAKkY,MAAMiN,EAAavtB,IACxB,GACH5C,EAAQqI,EAAM5J,IAAS,GAEpBukB,EAAKjjB,YACRC,EAAQgjB,EAAKjjB,UAAUC,EAAOmwB,IAE/B,IAAIhT,EAAW4I,QAAQnnB,GACnBokB,EAAKhkB,aACRme,EAAW6F,EAAKhkB,WAAW,CAC1BC,WAAYkxB,EACZhxB,iBACAD,iBACAE,YACA0G,cACAzG,kBAIF,IAAMq9B,EAAyBtkB,IAAMmD,aAAY,WAChD,IAAI0gB,GAAiBj8B,GAArB,CAGA,IAAM28B,EAAWC,YAAyB,CACzCn+B,OACA2Q,UAAW+gB,EAAa1xB,IAASiB,IAElCkb,EAAS,2BAEHuV,GAAgB,IACjB0E,YACFp2B,EACAk+B,EACA/5B,EACAutB,EAAavtB,KACXxD,IAAc4jB,EAAK5jB,YAAiC,gBAAnBF,IAGrCT,MAEC,CACF0xB,EACA1xB,EACAiB,EACAM,EACA4a,EACAoI,EAAK5jB,UACLA,EACAwD,EACA1D,IAGK29B,EAA0BzkB,IAAMmD,aAAY,WACjD+gB,GAAW,GACX1hB,EAAS,2BAEHuV,GAAgB,IACjB0E,YACFp2B,EACA,GACAmE,EACAutB,EAAavtB,KACXxD,IAAc4jB,EAAK5jB,aAGvBX,GAED09B,EAAoBn8B,KAClB,CACFm8B,EACAn8B,EACAvB,EACAmE,EACAxD,EACAwb,EACAuV,EACAnN,EAAK5jB,YAGA09B,EAAoB1kB,IAAMmD,aAAY,WAC3C+gB,GAAW,KACT,IAEGvgB,EAAU3D,IAAMmD,aAAY,WACjC+gB,GAAW,KACT,IAEH,OACC,kBAAC,IAAMlc,SAAP,KACC,kBAAC/D,EAAA,EAAD,CACCkQ,MAAQ5tB,IAAaqB,GAAU+lB,QAAQwG,GACvCwQ,WAAYxQ,EACZ6G,gBAAiB,CAChBlc,UAAWiG,EAAW5G,EAAQ4G,SAAW5G,EAAQkH,OAElDnB,KAAK,QACLK,WAAY,CACXpG,QAAS,CACR4C,KAAM5C,GAAW4G,EAAW,GAAK5G,EAAQykB,aACzCE,eAAgB3kB,GAAWA,EAAQ2kB,eACnCC,QAAS5kB,GAAWA,EAAQ4kB,QAC5Bhe,SAAU5G,GAAWA,EAAQmlB,aAC7BniB,MAAOhD,GAAWA,EAAQslB,gBAE3Bpb,aAAc7f,EACbq7B,GAAiBj8B,GAChB,kBAACgd,EAAA,EAAD,CACC9F,UAAWX,EAAQolB,gBACnB1e,QAAS6f,GAET,kBAAC,KAAD,OAGD,kBAAC9f,EAAA,EAAD,CACC9F,UAAWX,EAAQolB,gBACnB1e,QAASyf,GAET,kBAAC,KAAD,OAGCN,EACH,kBAACpf,EAAA,EAAD,CACC9F,UAAWX,EAAQolB,gBACnB1e,QAAS,WACR,IAAIjd,EAAQ,GACR0qB,GAAO,EAEV1H,EAAK5jB,YAAcE,IAAWC,MACL,gBAAzBhB,EAAMW,iBAENwrB,EACW,KAAV1qB,QAC0B2K,IAAvBwlB,EAAa1xB,IAMjBukB,EAAK5jB,YAAcE,IAAWE,QACL,gBAAzBjB,EAAMW,iBAGNc,EAAQA,GAAS,MAEd0qB,GACH9P,EAAS,2BAEHuV,GAAgB,IACjB0E,YACFp2B,EACAuB,EACA4C,EACAutB,EAAavtB,KACXxD,IAAc4jB,EAAK5jB,YACD,gBAAnBF,IAGHT,KAKH,kBAAC,KAAD,OAEE,MAELsiB,WAAY,CAAEwb,IAAKA,EAAKxyB,IAAKA,GAC7B4T,IAAKtG,EACLH,UAAWX,GAAWA,EAAQgD,MAC9B9Z,GAAG,iBACH4M,UAAWA,EACX3M,KAAe,YAATA,EAAqB,SAAWA,EACtC+d,MAAOA,EACPV,YAAaA,EACbP,QAAQ,WACRW,SAAUA,GAAavc,GAAmBq7B,GAAiBj8B,GAC3DA,MAAOA,EACPg9B,QAAS,EACTze,aAAa,MACb3D,SAAU,SAACnM,GACV,GAAa,YAAT/O,IAAsBu9B,MAAMC,OAAOzuB,EAAEiO,OAAO1c,QAAhD,CAGA,GAAIu8B,GAAOxyB,EAAK,CACf,IAAM/J,EAAQk9B,OAAOzuB,EAAEiO,OAAO1c,OAC9B,GAAIA,EAAQu8B,GAAOv8B,EAAQ+J,EAC1B,OAGF,IAAI/J,EAAQyO,EAAEiO,OAAO1c,MACrBowB,EAAgB,2BACXD,GAAgB,IACjB0E,YACFp2B,EACAuB,EACA4C,EACAutB,EAAavtB,KACXxD,IAAc4jB,EAAK5jB,YACD,gBAAnBF,OAIJm1B,OAAQ,SAAC5lB,GACR,GAAa,YAAT/O,IAAsBu9B,MAAMC,OAAOzuB,EAAEiO,OAAO1c,QAAhD,CAGA,GAAIu8B,GAAOxyB,EAAK,CACf,IAAM/J,EAAQk9B,OAAOzuB,EAAEiO,OAAO1c,OAC9B,GAAIA,EAAQu8B,GAAOv8B,EAAQ+J,EAC1B,OAGF,IAoBU,EApBN/J,EAAQyO,EAAEiO,OAAO1c,MACjB0qB,GAAO,EAmBX,GAjBC1H,EAAK5jB,YAAcE,IAAWC,MACL,gBAAzBhB,EAAMW,iBAENwrB,EACW,KAAV1qB,QAC0B2K,IAAvBwlB,EAAa1xB,IAMjBukB,EAAK5jB,YAAcE,IAAWE,QACL,gBAAzBjB,EAAMW,iBAGNc,EAAQA,GAAS,MAEd0qB,EACH9P,EAAS,2BAEHuV,GAAgB,IACjB0E,YACFp2B,GACAuB,GAAmB,SAATvB,GAAqC,MAAb,QAAL,EAAAuB,SAAA,eAAOm6B,QAEjCn6B,EADAA,EAAMm6B,OAETv3B,EACAutB,EAAavtB,KACXxD,IAAc4jB,EAAK5jB,YACD,gBAAnBF,IAGHT,OAKHmC,GAAmBq7B,GAAiBj8B,IACpC,kBAAC,GAAD,CACC2c,WAAY,CACXpG,QAAS,CACR4C,KAAM5C,GAAWA,EAAQykB,aACzBE,eAAgB3kB,GAAWA,EAAQ2kB,eACnCC,QAAS5kB,GAAWA,EAAQ4kB,QAC5Bhe,SAAU5G,GAAWA,EAAQmlB,aAC7BniB,MAAOhD,GAAWA,EAAQukB,mBAG5B1H,gBAAiB,CAChBlc,UAAWiG,EAAW5G,EAAQ4G,SAAW5G,EAAQkH,OAElDvG,UAAWX,GAAWA,EAAQwkB,qBAC9BpH,SAAU3zB,IAGXq8B,GACA,kBAAC,GAAD,CACCvgB,KAAMugB,EACN5U,QAAQ,oDACR1L,QAASA,EACTyL,KAAMqV,KAOX,SAASz6B,GAAa6tB,GACrB,MAAkC1X,oBAAS,GAA3C,mBAAO+f,EAAP,KAAkBC,EAAlB,KACQlhB,EAAU4Y,EAAV5Y,MACR,EACC4Y,EAAO5nB,MADF5J,EAAN,EAAMA,KAAMC,EAAZ,EAAYA,MAAOkE,EAAnB,EAAmBA,YAAawB,EAAhC,EAAgCA,aAAco0B,EAA9C,EAA8CA,cAAkBxV,EAAhE,kBAEMzkB,EAAQ6Z,IAAMokB,WAAWT,IAE9B5L,EAMG5xB,EANH4xB,aACAC,EAKG7xB,EALH6xB,gBACAxV,EAIGrc,EAJHqc,SACAxb,EAGGb,EAHHa,UACAF,EAEGX,EAFHW,eACAC,EACGZ,EADHY,eAEG4yB,EAAS4G,YACZxI,EACA1xB,EACAmE,EACAwB,IACEhF,IAAc4jB,EAAK5jB,YAAiC,gBAAnBF,GAEhC05B,EAAa7S,QAAQgM,IAAsB,UAAXA,GAAsBA,GACpDxb,EAAUvB,KACZgO,EAAK3gB,WACRu2B,EAAa5V,EAAK3gB,SAAS8tB,IAE5B,IAAIhT,GAAW,EACX6F,EAAKhkB,aACRme,EAAW6F,EAAKhkB,WAAW,CAC1BC,WAAYkxB,EACZhxB,iBACAD,iBACAE,eAGFV,EAAQ+gB,YAAU0T,YAAgBz0B,GAASD,IAE3C,IAAMo6B,EAAiB,WAClBL,GACHD,GAAa,GAEdnI,EAAgB,uCACZD,GACCnN,EAAK1gB,OAAS0gB,EAAK1gB,QAAQs2B,EAAYzI,GAAgB,IACxD0E,YACFp2B,GACCm6B,EACDh2B,EACAutB,EAAavtB,KACXxD,IAAc4jB,EAAK5jB,YAAiC,gBAAnBF,KAGrC0b,EAAS,uCAEJuV,GACCnN,EAAK1gB,OAAS0gB,EAAK1gB,QAAQs2B,EAAYzI,GAAgB,IACxD0E,YACFp2B,GACCm6B,EACDh2B,EACAutB,EAAavtB,KACXxD,IAAc4jB,EAAK5jB,YAAiC,gBAAnBF,IAGrCT,IAGF,OACC,kBAAC,IAAM2hB,SAAP,KACC,kBAACsa,GAAA,EAAD,CACC7mB,MAAO,CAAE8b,UAAW,GAAIta,UAAW,cACnCsI,IAAKtG,EACLd,QAAS,CACRkH,MAAOlH,GAAWA,EAAQulB,kBAC1B3e,SAAU5G,EAAQ4G,UAEnBwd,QACC,kBAACwC,GAAA,EAAD,CACC5mB,QAAS,CACR6kB,WAAY7kB,GAAWA,EAAQ6kB,WAC/BC,MAAO9kB,GAAWA,EAAQ8kB,MAC1BtC,QAASxiB,GAAWA,EAAQwiB,SAE7BA,QAASH,EACTzb,SAAUA,EACVvC,SAAU,WAER4d,GACAI,GACAzI,GACAA,EAAa9c,cAEbklB,GAAa,GAGdM,KAED74B,MAAOmwB,EAAa1xB,KAGtBgf,MAAOgC,YAAU0T,YAAgBz0B,GAASD,MAE1C65B,GACA,kBAAC,GAAD,CACCxc,KAAMwc,EACN7Q,QAAQ,gBACR1L,QAAS,kBAAMwc,GAAa,IAC5B/Q,KAAMqR,EACNn6B,MAAM,aAoCX,SAAS0+B,KACR,IAAM7+B,EAAQ6Z,IAAMokB,WAAWT,IAE9B5Q,EAYG5sB,EAZH4sB,SACA1rB,EAWGlB,EAXHkB,GACA0wB,EAUG5xB,EAVH4xB,aACA1f,EASGlS,EATHkS,gBACArR,EAQGb,EARHa,UACAF,EAOGX,EAPHW,eACAm+B,EAMG9+B,EANH8+B,OACA5b,EAKGljB,EALHkjB,WACAC,EAIGnjB,EAJHmjB,WACA5b,EAGGvH,EAHHuH,YACAq2B,EAEG59B,EAFH49B,oBACA98B,EACGd,EADHc,aAED,OACC,oCACE8rB,EAAS3lB,KAAI,SAAC6C,EAAOgP,GAErB,IAAe,IAjDnB,SAAqBhP,EAAO8nB,GAC3B,GAAI9nB,EAAMhC,QAAS,CAClB,IAAMrG,EAAQmwB,EAAa9nB,EAAMhC,SACjC,OAAIgC,EAAM/B,cAAgBtG,GA6CTs9B,CAAYj1B,EAAO8nB,GAEjC,OAAO,KAER,IAzCJ,SAAoB9nB,EAAOjJ,EAAWF,EAAgBixB,GACrD,QAAI9nB,EAAMvH,iBAAmBuH,EAAMvH,kBAAoB1B,GAC/B,gBAAnBF,OAIwB,IAAzBmJ,EAAMnD,gBAA+C,gBAAnBhG,MAGf,gBAAnBA,IAAgE,IAA5BmJ,EAAMvF,sBAG1CuF,EAAMjF,eAAiBiF,EAAMjF,aAAa+sB,MA6BtCoN,CAAWl1B,EAAOjJ,EAAWF,EAAgBixB,GACjD,OAAO,KAER,GAAmB,cAAf9nB,EAAM5J,OAAyBgS,EAClC,OAAO,KAER,GACC,CAACiR,EAAYD,GAAYle,SAASoI,IAAYC,OAC/B,gBAAfvD,EAAM5J,KAEN,OAAO,KAER,IAAMkf,EAAG,UAAMtG,EAAN,YAAe5X,GACxB,OAAQ4I,EAAM3I,MACb,IAAK,SACJ,OACC,kBAACw8B,GAAD,CACC7zB,MAAOA,EACPsV,IAAKA,EACLtG,MAAOsG,EACPtR,WAAW,EACXkgB,MAAO8Q,EAAOh1B,EAAM5J,MACpBY,aAAcA,EACd88B,oBAAqBA,IAGxB,IAAK,UACJ,OACC,kBAACD,GAAD,CACC7zB,MAAOA,EACPsV,IAAKA,EACLtG,MAAOsG,EACPtR,WAAW,EACXkgB,MAAO8Q,EAAOh1B,EAAM5J,MACpBqH,YAAaA,EACbs2B,WAAW,IAGd,IAAK,UACJ,OACC,kBAACh6B,GAAD,CACCiG,MAAOA,EACPsV,IAAKA,EACLtG,MAAOsG,EACP4O,MAAO8Q,EAAOh1B,EAAM5J,QAGvB,IAAK,YACJ,OACC,kBAACg7B,GAAD,CACCpxB,MAAOA,EACPsV,IAAKA,EACLtG,MAAOsG,EACPpf,MAAOA,EACPguB,MAAO8Q,EAAOh1B,EAAM5J,QAGvB,IAAK,SACL,IAAK,kBACJ,OACC,kBAACuxB,GAAD,CACC3nB,MAAOA,EACPsV,IAAKA,EACLtG,MAAOsG,EACPpf,MAAOA,EACPguB,MAAO8Q,EAAOh1B,EAAM5J,QAGvB,IAAK,eACJ,OACC,kBAAC+1B,GAAD,CACCnsB,MAAOA,EACPsV,IAAKA,EACLtG,MAAOsG,EACP4O,MAAO8Q,EAAOh1B,EAAM5J,MACpBqH,YAAaA,EACbvH,MAAOA,IAGV,IAAK,OACJ,OACC,kBAAC29B,GAAD,CACC7zB,MAAOA,EACPsV,IAAKA,EACLtG,MAAOsG,EACPtR,WAAW,EACXkgB,MAAO8Q,EAAOh1B,EAAM5J,QAGvB,IAAK,SACJ,OACC,kBAAC,GAAD,CACC4J,MAAOA,EACPsV,IAAKA,EACLpf,MAAOA,EACPguB,MAAO8Q,EAAOh1B,EAAM5J,QAGvB,QACC,OACC,kBAACy9B,GAAD,CACC7zB,MAAOA,EACPsV,IAAKA,EACLtG,MAAOsG,EACP4O,MAAO8Q,EAAOh1B,EAAM5J,aAS5B,SAAS++B,GAAT,GAAqD,IAAvBjjB,EAAsB,EAAtBA,SAAava,EAAS,kBACnD,OACC,kBAAC+7B,GAAkB0B,SAAnB,CAA4Bz9B,MAAOA,GACjCua,GAKW,SAASmjB,GAAWn/B,GAAQ,IAAD,QACzC,EAAuD+X,cAA/CI,EAAR,EAAQA,MAAOoB,EAAf,EAAeA,eAAgBqkB,EAA/B,EAA+BA,oBAE9BxsB,EAWG+G,EAXH/G,QACA+H,EAUGhB,EAVHgB,WACAxY,EASGwX,EATHxX,eACAyX,EAQGD,EARHC,mBACAvX,EAOGsX,EAPHtX,UACAqR,EAMGiG,EANHjG,gBAND,EAYIiG,EALHvX,sBAPD,MAOkB,GAPlB,IAYIuX,EAJHE,iBARD,MAQa,GARb,EASC6K,EAGG/K,EAHH+K,WACAC,EAEGhL,EAFHgL,WACAriB,EACGqX,EADHrX,aAEGokB,EAAS,KACT/L,IACoB,gBAAnBxY,GAAoCyX,EACvC8M,EAAS9M,EAAmBe,GACC,gBAAnBxY,GAAoCyQ,IAC9C8T,EAAS9T,EAAQ+H,KAGnB,MAAyC+L,GAAU,GAA3CjhB,EAAR,EAAQA,WAAYs3B,EAApB,EAAoBA,iBACdp6B,GAAS+jB,GAAU,IAAnB/jB,KACFi+B,EACY,UAAfn7B,EAAyB9C,GAAQ,SAAW8C,GAAc9C,EAE3D,GAAqB,cADrBi+B,EAAeA,GAAgBA,EAAava,cAAc/Q,QAAQ,KAAM,MACvC,CAChC,IAAMhK,EAAK,OAAGlJ,QAAH,IAAGA,OAAH,EAAGA,EAAgB0H,MAAK,SAACI,GAAD,OAAOA,EAAExI,OAASglB,EAAOhlB,QACxD4J,GAA2B,SAAlB,UAAGA,EAAMu1B,MACrBD,EAAe,iBAGjB,MAAwCplB,mBAAS,IAAjD,mBAAO4X,EAAP,KAAqBC,EAArB,KACIzsB,EAAWmb,KAAQjY,MAAK,SAAChB,GAAD,OAAYA,EAAOnG,OAASi+B,KAMxD,GALqB,SAAjBA,GACCjnB,EAAMtX,YAAcE,IAAWE,SAClCmE,EAAWmb,KAAQjY,MAAK,SAAChB,GAAD,MAA4B,cAAhBA,EAAOnG,SAGzCo6B,IACH6D,EAAe,CAAC,SAAU,WAAWp6B,SAASkgB,GAAUA,EAAO/jB,MAC5D+jB,EAAO/jB,KACPi+B,EACCh6B,GAAYA,EAAS3D,OAAO,CAC/B,IAAM69B,EAAiBl6B,EAAS3D,MAAM89B,SAASzc,WAC9C,SAACva,GAAD,MAAwB,SAAdA,EAAKrI,QAEhBkF,EAAS3D,MAAM89B,SAAStc,OAAOqc,EAAgB,EAAGx9B,MAClD,MACEsD,GAAYA,EAAS3D,OAAU,GADzB+9B,EAAR,EAAQA,aAAcC,EAAtB,EAAsBA,iBAEtBr6B,EAAQ,2BACHA,GAAY,IADT,IAEP3D,MAAM,2BACD2D,EAAS3D,OAAS,IADlB,IAEJ+9B,cAAeA,GAAgB,IAAI/2B,QAClC,SAACC,GAAD,OAAQ,CAAC,UAAW,UAAW,SAAS1D,SAAS0D,EAAExI,SAEpDu/B,kBAAmBA,GAAoB,IAAIh3B,QAC1C,SAACC,GAAD,OAAQ,CAAC,aAAa1D,SAAS0D,EAAExI,aAMtC,IAAM8X,EAAUvB,KACVipB,EAAa7lB,IAAM3B,OAAO,MAChC,EAAoC2B,IAAMG,SAAS,GAAnD,mBAAO2lB,GAAP,KAAmBC,GAAnB,KApEyC,SA+E1BvjB,GA/E0B,mFA+EzC,WAAwBrc,EAAO6/B,GAA/B,uBAAApwB,EAAA,yDACOqwB,EADP,eAC4B9/B,GACvB6/B,IAAwBj8B,KAAoB1D,OAE/C4/B,EAAc76B,MAAgB/E,MAAQ,KACtC4/B,EAAc36B,MAAYjF,MAAQ,KAClC4/B,EAAcz6B,KAASnF,MAAQ,KAC/B4/B,EAAcn6B,KAASzF,MAAQ,MAG/B2/B,IAAwBj8B,KAAoB1D,MACpB,SAAxB2/B,IAEAC,EAAc3+B,KAAO+jB,EAAO/jB,MAIJ,oBAAxB0+B,GACCC,EAAcnI,kBAEfmI,EAAcv+B,UAAY,KAC1Bu+B,EAAchrB,cAAgB,MAE1BgrB,EAAcnI,gBAvBpB,gBAwBEmI,EAAchrB,cAAgB,KAxBhC,8BA0BQ6S,EAAM,CAAEznB,KAAM4/B,EAAcv+B,WA1BpC,UA2BqBqT,aAAiB+S,GA3BtC,QA2BQnoB,EA3BR,OA4BEsgC,EAAchrB,cAAgBgrB,EAAchrB,eAAiBtV,EA5B/D,YA+BEsgC,EAAcv+B,YACdu+B,EAAcnI,iBACbkI,EAjCH,wBAmCQlY,EAAM,CAAEznB,KAAM4/B,EAAcv+B,WAnCpC,UAoCqBqT,aAAiB+S,GApCtC,QAoCQnoB,EApCR,OAqCEsgC,EAAchrB,cAAgBgrB,EAAchrB,eAAiBtV,EArC/D,QAuCMsgC,EAAcv+B,WAAcs+B,IAChCC,EAAchrB,cAAgB,IAG9BgrB,EAAcv+B,WACqB,kBAA5Bu+B,EAAcv+B,YAErBu+B,EAAcv+B,UAAYu+B,EAAcv+B,UAAUrB,MAGnDqZ,EAAe,CAAErY,GAAIiY,EAAYnZ,MAAM,eAAM8/B,KAjD9C,6CA/EyC,sBAqEzCjmB,IAAMrB,WAAU,WACfqZ,EAAgB,2BACX3M,GAAU,IADA,IAEd/jB,KAAMi+B,KAEPQ,GACCF,GAAcA,EAAWjnB,SAAWinB,EAAWjnB,QAAQsnB,eAEtD,CAAC7a,EAAQka,IAsDZj+B,EAAOi+B,EACP,IAAIN,GAAS,GACT3lB,GAAcd,IACjBymB,GAASzmB,EAAUc,IAAe,IAEnC,IAAM5R,GAAciM,OAAOG,OAAOvC,GAAW,IAAI9I,MAChD,SAAC03B,GAAD,OAAOA,EAAE/zB,QAA0C,IAAjC+zB,EAAE/zB,MAAMrK,QAAQuX,MAEnC,MAAqB,gBAAX,QAAN,EAAA+L,SAAA,eAAQ/jB,OAA4C,gBAAnBR,IAI5B,QAAR,EAAAyE,SAAA,eAAU7C,kBACW,SAArB,oBAAG2iB,SAAH,aAAG,EAAQxjB,OACH,QAAR,EAAA0D,SAAA,eAAU7C,mBAAoB1B,EALvB,KAUP,kBAAC8c,EAAA,EAAD,CAAMrI,MAAO,CAAEuG,QAAS,KACtB1a,GACAiE,KAEC+S,EAAMtX,YAAcE,IAAWE,QAAUmE,EAASjE,OAASqG,IAAKqC,OAEjE2J,OAAOC,KAAKrO,EAAS3D,OAAOwF,KAAI,SAAC2C,EAAOzC,GAAR,OAC/B,kBAACwW,EAAA,EAAD,CAAMyB,IAAKjY,GACV,kBAACwY,EAAA,EAAD,CACC1B,QAAQ,QACRtF,UAAWC,IACVZ,EAAQglB,WACF,IAAN71B,GAAW6Q,EAAQilB,cApxBD,SAACn4B,EAAM3D,GAChC,OACC2D,EAAK2D,QACJ,SAACF,GAAD,OAAWA,EAAKhG,iBAAmBgG,EAAKhG,kBAAoBpB,KAC3D+C,OAAS,EAmxBL+7B,CAAkB76B,EAAS3D,MAAMmI,GAAQ/I,IACzCqgB,YAAUgf,YAAgBt2B,KAE5B,kBAAC+T,EAAA,EAAD,CAAMrI,MAAO,CAAEsB,QAAS,OAAQC,cAAe,WAC9C,kBAACooB,GAAD,CACC7f,IAAKjG,EACLyT,SAAUxnB,EAAS3D,MAAMmI,GACzBgoB,aAAcA,EACdC,gBAAiBA,EACjB8N,WAAYA,GACZD,WAAYA,EACZv+B,KAAMA,EACNoY,eAAgBA,EAChBrY,GAAIiY,EACJkD,SAAUA,GACVxb,UAAWA,EACXqR,gBAAiBA,EACjBvR,eAAgBA,EAChBC,eAAgBA,EAChBk+B,OAAQA,GACR5b,WAAYA,EACZC,WAAYA,EACZ5b,YAAaA,GACbq2B,oBAAqBA,EACrB98B,aAAcA,GAEd,kBAAC+9B,GAAD,aC3/BOhlB,WAAMC,MAAK,WACzB,OACC,yBAAKxE,MAAO,CAAEyK,MAAO,SACpB,kBAACof,GAAD,UCGGgB,GAAc,CACnBvpB,QAAS,OACTa,WAAY,SACZP,eAAgB,SAChBkpB,WAAY,iBACZtlB,WAAY,WAGPrE,GAAYC,YAAW,CAC5B2pB,YAAa,CACZvlB,WAAY,UACZb,MAAO,OACPjD,OAAQ,OACRvB,SAAU,WACV2qB,WAAY,oBACZrqB,SAAU,QAEXuqB,eAAgB,CACf7qB,SAAU,WACV8B,KAAM,QACNjB,IAAK,mBACLwE,WAAY,UACZiF,MAAO,QACPlE,QAAS,oBACT0kB,UAAW,iBACXlI,WAAY,SACZpY,SAAU,OACV7I,OAAQ,oBACRgE,aAAc,OACdH,aAAc,cACdulB,gBAAiB,WACjBrpB,OAAQ,KACRyP,OAAQ,UACR6Z,WAAY,OACZC,UAAW,+CAEZ3pB,UAAW,CACVtB,SAAU,SACVa,IAAK,MACLU,OAAQ,WAGK6C,OAAMC,MAAK,WACzB,IAAM9B,EAAUvB,KAChB,EAAoCuD,oBAAS,GAA7C,mBAAO2mB,EAAP,KAAmBC,EAAnB,KACA,EAA0B5mB,mBA9CP,KA8CnB,mBAAOC,EAAP,KAAc4mB,EAAd,KACA,EAA4B7mB,mBAAS,QAArC,mBAAOhD,EAAP,KAAe8pB,EAAf,KAEMC,EAAc,SAAC9mB,GACpB2mB,EAAwB,QAAV3mB,IAsBf,OAnBAJ,IAAMrB,WAAU,WACf,IAAMwoB,EAAkB,WACnBL,GACHE,GAAS,SAACI,GAAD,OACR9qB,OAAO+qB,WAAaD,EAzDL,IA0DZ9qB,OAAO+qB,WA1DK,IA2DZD,EA3DY,IA4DZ9qB,OAAO+qB,WAAaD,EACpBA,MAMN,OAFA9qB,OAAOmS,iBAAiB,SAAU0Y,GAE3B,WACN7qB,OAAOoS,oBAAoB,SAAUyY,OAKtC,yBAAKroB,UAAWX,EAAQjB,WACvB,kBAAC,KAAD,CACCzB,MAAO6qB,GACPpiB,KAAM,CAAE9D,QAAOjD,UACfmqB,aAAc,SAACjxB,EAAGkxB,EAAW1+B,EAAKyR,GACjC0sB,GAAS,SAAC5mB,GAAD,OAAWA,EAAQ9F,EAAE8F,SAC9B6mB,EAAU9pB,EAAS7C,EAAE6C,QACrB+pB,EAAY,GAAD,OAAI9mB,EAAQ9F,EAAE8F,MAAd,QAEZoD,SAAUlH,OAAO+qB,WAlFD,IAmFhBvpB,UAAWX,EACXqqB,OAAQ,CACP9pB,MAAM,IAGP,kBAAC+pB,GAAA,EAAD,CACCrjB,QAAQ,aACRsjB,OAAO,QACPhkB,KAAMojB,EACNrrB,MAAO,CACN2E,MA7Fc,KA+FfjC,QAAS,CACR+C,MAAO/C,EAAQqoB,aAEhBmB,mBAAoB,GAEpB,kBAAC,GAAD,OAED,yBACC7oB,UAAWX,EAAQsoB,eACnB5hB,QAAS,WACRmiB,GAAS,SAAC5mB,GAAD,OAAsB,IAAVA,EAzGP,IAyGmC,KACjD8mB,EAAY,GAAD,OAAc,IAAV9mB,EA1GD,IA0G6B,EAAhC,SAGXiH,YAAU,oB,uCC/GVzK,GAAYC,YAAW,CAC5B+qB,WAAY,CACX7qB,QAAS,OACTM,eAAgB,SAChBO,WAAY,SACZoE,QAAS,IAEV2c,KAAM,CACLve,MAAO,GACPjD,OAAQ,GACR0qB,iBAAkB,YAClBC,eAAgB,UAChBC,mBAAoB,SACpBnsB,SAAU,cAINosB,GAAc,SAAC3c,GACpB,IAAM/jB,EAAO+jB,EAAOjhB,YAAcihB,EAAO/jB,KACzC,OAAIA,IAAsC,IAA9BA,EAAKS,QAAQ,YACjB,eAEJT,IAAkC,IAA1BA,EAAKS,QAAQ,QACjB,WAEJT,IAAkC,IAA1BA,EAAKS,QAAQ,QACjB,WAEJT,IAAqC,IAA7BA,EAAKS,QAAQ,WACjB,cAEJsjB,EAAOlZ,MACHkZ,EAAOlZ,MAET,GAAN,OAAU7K,EAAV,SA0Bc2gC,OAvBR,SAAwB9hC,GAC9B,IAAMgY,EAAUvB,KACRsC,EAAsB/Y,EAAtB+Y,MAAOgpB,EAAe/hC,EAAf+hC,WACf,OACC,6BACC,kBAACC,GAAA,EAAD,CACCC,OAAK,EACL9hC,MAAO+gB,YAAUnI,EAAM5Y,OAAS4Y,EAAMgpB,IAAehpB,EAAK,MAC1DmpB,UAAU,SAEV,kBAACvkB,EAAA,EAAD,CAAMhF,UAAWX,EAAQypB,YACxB,yBACC9oB,UAAWX,EAAQwgB,KACnBljB,MAAO,CACN6sB,gBAAgB,gBAAD,OAAkBN,GAAY9oB,GAA9B,YCrDhBtC,GAAYC,aAAW,SAACiE,GAAD,MAAY,CACxC7Q,MAAM,eACJ6Q,EAAMkC,YAAYC,KAAK,MAAQ,CAC/B7C,MAAO,aAKK,SAASjR,GAAMhJ,GAC7B,IAAMgY,EAAUvB,KAChB,OACC,yCAASzW,EAAT,CAAgB2Y,UAAWC,IAAWZ,EAAQlO,MAAO9J,EAAM2Y,cCH7D,IAAMlC,GAAYC,aAAW,SAACiE,GAAD,MAAY,CACxC5D,UAAW,CACVkD,MAAO,cACPjD,OAAQ,cACRK,gBAAiB,UACjBD,OAAQ,sBACRyE,QAAS,IACTqhB,OAAQ,SACRjiB,aAAc,EACdmW,UAAW,GACXsP,UAAW,+CAEZ0B,cAAe,CACd,UAAW,CACV/qB,gBAAiB,wBAGnB9M,QAAS,CACR2yB,OAAQ,MACRpiB,WAAY,QAEboK,OAAQ,CACP9N,OAAQ,kBACRspB,UAAW,OACX7kB,QAAS,aAIIhC,OAAMC,MAAK,YAA0C,IAAlBC,EAAiB,EAAjBA,cAC3C/B,EAAUvB,KACR0B,EAAUJ,cAAVI,MACArX,EAAiBqX,EAAjBrX,aAEFuhC,EAAezlB,YAAc,gBAAD,OAAiB,IAAM7C,EAAvB,QAC5BlK,EAAS,sBAAIyyB,MAAJ,YAAmBC,OAAa95B,QAAO,SAACyH,GACtD,MAAe,SAAXA,EAAEhQ,MAAmBiY,EAAMtX,YAAcE,IAAWE,UAkBzD,OACC,kBAACuhC,GAAA,EAAD,CAAW7pB,UAAWC,IAAWZ,EAAQjB,UAAW,oBAClDlH,EAAO5I,KACP,SAACw7B,EAAW3pB,GAAZ,QACGhY,GACAA,GACA,CAAC,SAAU,qBAAqBkE,SAASy9B,EAAUviC,QACpD,kBAAC,IAAM2hB,SAAP,CAAgBzC,IAAKtG,GACpB,kBAAC6E,EAAA,EAAD,CAAM5G,WAAS,EAACzB,MAAO,CAAE2E,MAAOooB,EAAe,OAAS,SACtDI,EAAUhhC,OACVghC,EAAUhhC,MAAMwF,KAAI,SAAC6C,EAAO3C,GAC3B,OACC2C,EAAM44B,aACL54B,EAAM44B,WAAW19B,SAASmT,EAAMtX,WAE1B,KA3BC,SAACiJ,GAClB,MAAI,CAACtC,IAAKE,QAASF,IAAKC,SAASzC,SAAS8E,EAAM3I,OAASgX,EAAM/G,SAI5C,IAHJoC,OAAOG,OAAOwE,EAAM/G,SAAS0R,WAC1C,SAACkd,GAAD,OAAOA,EAAE7+B,OAAS2I,EAAM3I,SAGfL,GAA+B,cAAfgJ,EAAM5J,KAuBpByiC,CAAU74B,GAId,kBAAC6T,EAAA,EAAD,CACCpV,MAAI,EACJqV,GAAIykB,EAAe,EAAI,GACvB1pB,UAAWX,EAAQoqB,cACnBhjB,IAAKjY,GAEL,kBAAC,GAAD,CAAOiY,IAAKjY,GACX,kBAAC/D,EAAA,QAAD,CACClC,GAAI4I,EAAM5I,GACV6X,MAAOjP,EACP+N,QAAQ,EACRghB,UAAWiJ,GACXc,aAAa,EACbC,gBAAgB,EAChBlqB,UAAWX,EAAQkN,WAjBf,SAwBVpM,EAAQjJ,EAAO3L,OAAS,GACxB,kBAAC4+B,GAAA,EAAD,CAASnqB,UAAWX,EAAQzN,kB,cCpF9BkM,GAAYC,YAAW,CAC5BqsB,eAAgB,CACf7oB,aAAc,QAEf8oB,eAAgB,CACfpsB,QAAS,OACTiF,QAAS,cAEVonB,gBAAiB,CAChB,iBAAkB,CACjB5rB,gBAAiB,YAGnB6rB,UAAW,CACVlsB,OAAQ,QACRjB,SAAU,OACV,iBAAkB,CACjBsB,gBAAiB,YAGnBN,UAAW,CAAEH,QAAS,UAGjB+D,GAAQwoB,YAAY,CACzBC,WAAY,CACXC,WAAY,iEAgBd,SAASC,KACR,IAAMtrB,EAAUvB,KAChB,EAA0BsB,cAAlBtH,EAAR,EAAQA,OAAQ0H,EAAhB,EAAgBA,MAChB,EAAmCA,EAA3B8Y,YAAR,MAAe,GAAf,IAAmC9Y,EAAhB+Y,cAAnB,MAA4B,GAA5B,EACA,EAA0CrX,IAAMG,WAAhD,mBAAOupB,EAAP,KAAsBC,EAAtB,KACMC,EAAU5pB,IAAM3B,SAChBwrB,EAAmB7pB,IAAM3B,SACzByrB,EAAe,WAAO3rB,EAAQ+qB,gBAE9Ba,EAAY,SAAC3b,GAClBA,EAAMG,iBACNH,EAAM4b,YAAc,2CAGftzB,EAAkBsJ,IAAMmD,aAC7B,SAACxM,EAAKE,GACL,IAAMC,EAAW,GACjB,GAAIH,EAAItM,OAAQ,CACfyM,EAASC,KAAK,CAAEC,UAAW,KAAMC,SAAU,KAAMrP,MAAO+O,IACxD,IAAMpR,EAAO,CACZuR,YAEDlC,KACEa,OAAO,CAAElQ,OAAMmQ,OAAQ,CAAC,cACxBwB,MAAK,SAACpB,GACN,GAAIA,EAAIvQ,KAAM,CACb,IAAM0F,EAAO6K,EAAIvQ,MAAQ,GACnB4R,EAASC,YAA0BnM,EAAM4L,GAC/CD,GAAO,SAACS,GACPA,EAAME,QAAN,eACIJ,EAAOI,SAEXF,EAAMjF,MAAQ+E,EAAO/E,MACrBiF,EAAMM,QAAS,UAGhBf,GAAO,SAACS,GACPA,EAAMM,QAAS,YAIb,CACN,IAAMR,EAASC,YAA0B,GAAIP,GAC7CD,GAAO,SAACS,GACPA,EAAME,QAAN,eACIJ,EAAOI,SAEXF,EAAMjF,MAAQ+E,EAAO/E,MACrBiF,EAAMM,QAAS,EACfN,EAAM7E,MAAQqE,EACdQ,EAAMkB,YAAc1B,EACpBQ,EAAMiI,YAAc,EACpBjI,EAAMvQ,eAAiB,WAI1B,CAAC8P,IAiJF,OA9IAoJ,IAAMrB,WAAU,WACftE,eAAiBnD,MAAK,SAAC+B,GACtBrC,GAAO,SAACS,GACPA,EAAM0kB,aAAN,YAAyB9iB,SAG3B0B,eAAuBzD,MAAK,SAAC+B,KACjB,OAANA,QAAM,IAANA,OAAA,EAAAA,EAAQ6H,QAAS,IAAI3V,SAAS,UAClC2Q,SAASC,KAAK+C,UAAd,OAA0B7F,QAA1B,IAA0BA,OAA1B,EAA0BA,EAAQ6H,UAIpChJ,eAAsBZ,MAAK,SAACpB,GAC3Bc,GAAO,SAACS,GACPA,EAAMgB,gBAAkBvC,UAGxB,CAACc,IAEJoJ,IAAMrB,WAAU,WACf,IAAMnN,EAAOo4B,EAAQhrB,QACrBpN,GAAQA,EAAKqN,UACX,IAEHmB,IAAMrB,WAAU,WACf,IAAM/Q,EAAUkO,SAASmuB,cAAcH,GAEvC,GAAIl8B,EAAS,CACZ,IAAMs8B,EAAiB,IAAIC,gBAAe,WACzCR,EAAiB/7B,EAAQw8B,iBAI1B,OADAF,EAAeG,QAAQz8B,GAChB,kBAAMs8B,EAAeI,UAAU18B,OAErC,CAACk8B,IAEJ9pB,IAAMrB,WAAU,WAEf,OADArC,OAAOG,KAAOH,OAAOG,IAAIgS,iBAAiB,eAAgBsb,GACnD,WACNztB,OAAOG,KAAOH,OAAOG,IAAIiS,oBAAoB,eAAgBqb,OAI/D/pB,IAAMrB,WAAU,WAAO,IAAD,EACf4rB,EACLjuB,OAAOG,KACPH,OAAOG,IAAI+tB,SACXluB,OAAOG,IAAI+tB,QACTlvB,QACAgB,OAAOG,IAAIX,SAASmuB,cACnB,qFAGDM,SACC,OAACA,QAAD,IAACA,GAAD,UAACA,EAAO1iC,WAAR,aAAC,EAAY4iC,cACjBF,EAAM1iC,IAAI4iC,WAAWC,aAAe,SAAU3c,EAAU4c,GACvD,IAEC,MADoB,OAAJvT,QAAI,IAAJA,OAAA,EAAAA,EAAM/sB,QAAS,IAAW,OAANgtB,QAAM,IAANA,OAAA,EAAAA,EAAQhtB,QAAS,GAEpD,OAAO0jB,GAAYA,IAEnBzR,OAAOG,IAAImuB,OAAOC,QAAQ5G,QACzB3nB,OAAOG,IAAIquB,GACV,iEAED,SAACC,GACA,OAAKA,EAGEhd,GAAYA,IAFX4c,GAAkBA,OAM5B,MAAOxW,GACR6W,QAAQ7W,MAAMA,QAGd,CAACkD,EAAOhtB,OAAQ+sB,EAAK/sB,SAExB2V,IAAMrB,WAAU,WACf,MAxJgB,WACjB,IAAM+J,EAAS,IAAIuiB,IAAInvB,SAASovB,UAAUC,aAI1C,MAAO,CACNlkC,aAJoByhB,EAAO0iB,IAAI,gBAK/B54B,MAJakW,EAAO0iB,IAAI,SAKxBC,WAJkB3iB,EAAO0iB,IAAI,eAoJeE,GAApCrkC,EAAR,EAAQA,aAAcuL,EAAtB,EAAsBA,MAAO64B,EAA7B,EAA6BA,WADR,4CAErB,wCAAAz1B,EAAA,yDACM3O,GAAiBuL,EADvB,wDAEOsC,EAAmB,IAAID,IAAc,CAC1CrC,MAAO,qCAEJjN,EAAO,CACVolB,QAAS,CACR4gB,YAAa,CAAC,QAAS,eAExBhmC,KAAM,CACLsH,QAAQ,WAAD,OAAa2F,EAAb,OAGToE,GAAO,SAACS,GACPA,EAAMM,QAAS,KAdjB,SAgBmB7C,EAAiBW,OAAOlQ,GAhB3C,QAgBOuQ,EAhBP,QAiBSvQ,OACDsR,EAASf,EAAIvQ,KAAK,GADX,EAEoBsR,EAAzBb,cAFK,MAEI,GAFJ,EAEW4U,EAFX,YAEoB/T,EAFpB,IAGbD,GAAO,SAACS,GACPA,EAAM7E,MAAN,2BAAmBqE,GAAnB,IAA2BwS,WAAY9V,IAAYC,OACnD6D,EAAMgS,WAAa9V,IAAYC,KAC/B6D,EAAME,QAAU,KAChBF,EAAM0S,eAAiB,KACvB1S,EAAMjF,MAAQ,GACdiF,EAAMyS,aAAe,KACrBzS,EAAM8B,KAAO,KACb9B,EAAMwS,OAAS,KACfxS,EAAM5E,WAAa,KACnB4E,EAAM2S,aAAe,GACrB3S,EAAMkH,mBAAqB,KAC3BlH,EAAM8S,YAAc,KACpB9S,EAAM4S,aAAe,KACrB5S,EAAM6S,cAAgB,KACtB7S,EAAMiT,eAAiB,GACvBjT,EAAMmH,UAAY,GAClBnH,EAAMkT,UAAY,GAClBlT,EAAMmT,gBAAkB,GACxBnT,EAAMoT,uBAAyB,GAC/BpT,EAAMqT,uBAAyB,GAC/BrT,EAAM+S,aAAe,KACrB/S,EAAMiI,YAAc,EACpBjI,EAAMvQ,eAAiB,KACvBuQ,EAAMyI,SAAW,EACjBpJ,EACCV,EAAO5I,KAAI,SAACyB,GAAD,OAAOA,EAAExH,MACpBujB,GAEDvT,EAAMkB,YAAc1B,MAjDvB,4CAFqB,0DAuDrB20B,GACA50B,GAAO,SAACS,GACPA,EAAMpQ,aAAe2L,KAAKkY,MAAM7jB,GAAgB,SAChDoQ,EAAMwc,WAAa,CAAEvtB,MAAO+kC,GAAc74B,EAAOnM,KAAMmM,QAEtD,CAACoE,EAAQF,IAGX,kBAACoN,EAAA,EAAD,CAAMhF,UAAWX,EAAQjB,UAAWrU,IAAK+gC,GACxC,kBAAC9lB,EAAA,EAAD,CAAM5G,WAAS,GACd,kBAAC4G,EAAA,EAAD,CAAMpV,MAAI,EAACqV,GAAI,GAAIjF,UAAWX,EAAQ+qB,gBACrC,kBAAC,GAAD,OAED,kBAACplB,EAAA,EAAD,CAAMpV,MAAI,EAACqV,IAAE,EAACjF,UAAWX,EAAQgrB,eAAgBtgC,IAAKghC,GACrD,kBAAC,GAAD,CAAc3pB,cAAewpB,IAC7B,kBAAC,EAAD,CACC5qB,UAAWX,EAAQkrB,UACnBnpB,cAAewpB,MAIlB,kBAAC5lB,EAAA,EAAD,KACC,kBAAC,GAAD,QAMW,SAAS2nB,KACvB,OACC,kBAAC,IAAD,KACC,kBAACC,EAAA,EAAD,CAAaC,QAASC,KACrB,kBAACC,EAAA,EAAD,CAAe/qB,MAAOA,IACrB,kBAAC2oB,GAAD,SC9RLqC,IAASC,OAAO,kBAACN,GAAD,MAAS3vB,SAASkwB,eAAe,U,oCCC7CC,E,2CALEC,EAAU,CACf,mBAAoB,iBACpB,eAAgB,mBAChBC,OAAQ,oBAGLC,EAAc,GAElB,SAASC,EAAWhmC,GACnB,IAAIimC,EAAexwB,SAASywB,QAAU,GAStC,OARID,IAAiBL,IACpBA,EAAmBK,EACnBF,EAAcE,EAAa5c,MAAM,MAAM8c,QAAO,SAAC1e,EAAKlmB,GACnD,IAAI6kC,EAAQ7kC,EAAM8nB,MAAM,KAExB,OADA5B,EAAI2e,EAAM,IAAMA,EAAM,GACf3e,IACL,KAEGse,EAAY/lC,G,IClBdqmC,EAAU,SAACl6B,EAAOm6B,GACvB,MAAM,WAAN,OAAkBn6B,EAAlB,YAA2Bm6B,IAGtBC,EAAW,I,WDkBhB,WAAYzmC,GAAQ,oBACnB0mC,KAAKC,QACoC,S,2CAG1C,SAAQC,EAAKC,EAAQznC,GACpB,IAAImhB,EAAU,GAId,MAHe,QAAXsmB,IACHtmB,EAAO,KAAWnhB,GAEZ0nC,IAAM,aACZD,OAAQA,EACRF,QAASD,KAAKC,QACdZ,QAAQ,2BACJA,GADG,IAEN,eAAgBG,EAAW,gBAE5BU,OACGrmB,M,yBAIL,SAAYqmB,EAAKC,EAAQznC,GAAO,IAAD,OAC9B,OAAOsnC,KAAKK,QAAQH,EAAKC,EAAQznC,GAC/B2R,MAAK,SAAC+B,GACN,GAAsB,MAAlBA,EAAOlD,OACV,OAAOkD,EAAO1T,MAAQ,CAAEwQ,OAAQkD,EAAOlD,QACjC,GAAsB,MAAlBkD,EAAOlD,OAAgB,CACjC,IAAMo3B,EAAaC,aAAalO,QAAQ,cACxC,GAAIiO,EAAY,CACf,MAA+Bv6B,KAAKkY,MAAMqiB,GAAlCE,EAAR,EAAQA,SAAUC,EAAlB,EAAkBA,SAClB,OAAO,EAAKC,MAAMF,EAAUC,GAAUp2B,MAAK,SAACpB,GAC3C,GAAmB,MAAfA,EAAIC,OACP,OAAO,EAAKy3B,YAAYT,EAAKC,EAAQznC,OAKzC,OAAO+Q,QAAQm3B,QAAQ,YAEvBC,OAAM,SAACr3B,GACP,GAAIA,EAAEG,UAAkC,MAAtBH,EAAEG,SAAST,OAC5B,OAAO,EAAK43B,QAAQZ,EAAKC,EAAQznC,Q,qBAKrC,SAAQwnC,EAAKC,EAAQznC,GAAO,IAAD,OACpB4nC,EAAaC,aAAalO,QAAQ,cACxC,GAAIiO,EAAY,CACf,MAA+Bv6B,KAAKkY,MAAMqiB,GAAlCE,EAAR,EAAQA,SAAUC,EAAlB,EAAkBA,SAClB,OAAOT,KAAKU,MAAMF,EAAUC,GAAUp2B,MAAK,SAACpB,GAC3C,GAAmB,MAAfA,EAAIC,OACP,OAAO,EAAKy3B,YAAYT,EAAKC,EAAQznC,S,iBAMzC,SAAIwnC,GACH,OAAOF,KAAKW,YAAYT,EAAK,S,kBAG9B,SAAKA,GAAiB,IAAZxnC,EAAW,uDAAJ,GAChB,OAAOsnC,KAAKW,YAAYT,EAAK,OAAQxnC,K,oBAGtC,SAAOwnC,EAAKxnC,GACX,OAAOsnC,KAAKW,YAAYT,EAAK,SAAUxnC,K,mBAGxC,SAAM8nC,EAAUC,GACf,IAAM/nC,EAAO,CAAE8nC,WAAUC,YACzB,OAAOT,KAAKW,YAAY,YAAa,OAAQjoC,GAAM2R,MAAK,SAACpB,GAOxD,OANmB,MAAfA,EAAIC,QACPq3B,aAAaQ,QACZ,aACAh7B,KAAKC,UAAU,CAAEw6B,WAAUC,cAGtB,CAAEv3B,OAAQD,EAAIC,a,oBAIvB,WACC,OAAO82B,KAAKW,YAAY,UAAUt2B,MAAK,WACtCk2B,aAAaS,WAAW,qB,MCtGrBh5B,E,WACL,WAAY1O,GAAQ,oBACnB0mC,KAAKr6B,MAAQrM,EAAMqM,M,0CAGpB,YAAiD,IAAxCwD,EAAuC,EAAvCA,OAAQN,EAA+B,EAA/BA,OAAQnQ,EAAuB,EAAvBA,KAAM+I,EAAiB,EAAjBA,MAAO4J,EAAU,EAAVA,OAE/B60B,EAAML,EAAQG,KAAKr6B,MADZ,UAEb,OAAOo6B,EAASkB,KAAKf,EAAK,CAAE/2B,SAAQN,SAAQnQ,OAAM+I,QAAO4J,a,mBAG1D,SAAM7Q,EAAI9B,GACT,IAAMwoC,EAAO,UAAM1mC,EAAN,UACP0lC,EAAML,EAAQG,KAAKr6B,MAAOu7B,GAChC,OAAOnB,EAASkB,KAAKf,EAAKxnC,K,kBAG3B,SAAKA,GAEJ,OAAOqnC,EAASkB,KADJ,gBACcvoC,K,kBAG3B,SAAKA,GACJ,IAAMwnC,EAAML,EAAQG,KAAKr6B,MAAO,IAChC,OAAOo6B,EAASkB,KAAKf,EAAK,CAAExnC,W,qBAG7B,SAAQA,GACP,IAAMwnC,EAAML,EAAQG,KAAKr6B,MAAO,IAChC,OAAOo6B,EAASkB,KAAKf,EAAK,CAAEiB,QAASzoC,M,uBAGtC,SAAUyoC,GACT,IAAMjB,EAAML,EAAQG,KAAKr6B,MAAO,aAChC,OAAOo6B,EAASkB,KAAKf,EAAK,CAAEiB,c,mBAG7B,SAAMX,EAAUC,GACf,OAAOV,EAASW,MAAMF,EAAUC,K,oBAGjC,WACC,OAAOV,EAASqB,W,oBAGjB,SAAO1oC,GAEN,OAAOqnC,EAASkB,KADJ,YACcvoC,K,kBAG3B,WAEC,OAAOqnC,EAASxB,IADJ,mB,KAKCv2B,O,8MCvCTq5B,EAAeluB,IAAM4jB,gBA+lBpB,SAAS1lB,IACf,OAAO8B,IAAMokB,WAAW8J,GAGlB,SAASC,IAEf,OADkBnuB,IAAMokB,WAAW8J,GAA3B5vB,MASM8vB,IAnmBf,YAAsC,IAAbjsB,EAAY,EAAZA,SAUxB,EAlBD,SAAyBnW,GACxB,MAA0BgU,IAAMG,SAASnU,GAAzC,mBAAOsS,EAAP,KAAc+vB,EAAd,KACA,MAAO,CACN/vB,EACA0B,IAAMmD,aAAY,SAACmJ,GAAD,OAAa+hB,EAASC,YAAQhiB,MAAW,CAAC+hB,KAcnCE,CAAgB,CACzClX,OAAQ,GACRD,KAAM,GACN9wB,MAAO,GACP8L,MAAO,GACPmF,QAAS,KACT6H,WAAY,KACZE,WAAY,KACZD,YAAa,KACb0K,eAAgB,KAChBD,aAAc,KACdhK,SAAU,EACV9Y,UAAW,OACXgjB,aAAc,GACdjK,iBAAkB,GAClBxB,mBAAoB,KACpB9L,WAAY,KACZ+7B,UAAW,GACX72B,QAAQ,EACRyc,oBAAqB,GACrB5V,UAAW,GACX6K,WAAY9V,IAAYC,KACxB8V,WAAY,KACZgB,eAAgB,GAChBC,UAAW,GACXG,uBAAwB,GACxBzjB,cAAc,IA1Bf,mBAAOqX,EAAP,KAAc+vB,EAAd,KA4BQ92B,EAAY+G,EAAZ/G,QAER,SAASk3B,EAAkBpnC,EAAIqnC,GAC9B,IAAMn3B,EACU,gBAAfm3B,EAA+BpwB,EAAMC,mBAAqBD,EAAM/G,QAQjE,OAPmB,SAAbo3B,EAAcngC,GACnB,MAAuB+I,EAAQ/I,GAAvB4D,MACR,YADA,MAAgB,GAAhB,GACao6B,QACZ,SAACt2B,EAAKxH,GAAN,OAAewH,EAAI04B,OAAOD,EAAWjgC,MACrC,CAACF,IAGImgC,CAAWtnC,GAGnB,SAASwnC,EAAYC,EAASxwB,GACzBA,EAAMuL,SAAWtQ,IAAM+b,oBAAoBhX,EAAMuL,SACpDklB,YAAkBD,EAASxwB,GAM7B,SAASoB,EAAT,EAAsDrI,GAAQ,IAApChQ,EAAmC,EAAnCA,GAAIlB,EAA+B,EAA/BA,MAA+B,IAAxBujB,aAAwB,SACtDsK,EAAa,SAAC3c,GACnB23B,EAAgB33B,GAChB,IAAM43B,EAAyC,gBAAzB53B,EAAMvQ,eACtBooC,EAAa,GACnBC,YAAahpC,EAAOkR,EAAOhQ,EAAI4nC,GAC/B,IAAM13B,EACoB,gBAAzBF,EAAMvQ,eACHuQ,EAAMkH,mBACNlH,EAAME,QACNmS,IACHnS,EAAQlQ,GAAM,IAEf,IAAMgkB,EACoB,gBAAzBhU,EAAMvQ,gBAAoCuQ,EAAMkH,mBAC7ClH,EAAMkH,mBAAmBlX,GACzBgQ,EAAME,SAAWF,EAAME,QAAQlQ,GAC/BgkB,GACH1R,OAAOC,KAAKzT,GAAO2qB,SAAQ,SAACvL,GAC3B,IAAI3d,EAAQzB,EAAMof,GACd,UAAUtJ,KAAKoP,EAAM,QACxBA,EAAM,KAAW+jB,YAChB/jB,EAAM,OACJllB,EAAK,OAAawH,IAAKwC,QAM3B,SAD+BoC,IAAhB8Y,EAAO9F,GAAqB,GAAK8F,EAAO9F,MACxC3d,EAAO,CACrB,IAAMsD,GAAgB,IAAR7D,EAAY,IAAMkQ,EAAQlQ,GAAI6D,MACxCyuB,EAAS,MAACpnB,EAAW,MAAMpH,SAASvD,GAAS,GAAKA,EAEtDynC,YAAgB/wB,IACf4wB,EAAWn4B,KAAK,CACf1Q,KAAM,YACNie,OAAQpZ,EACR2kB,WAAY,CACXxpB,KAAMkT,IAAM+1B,YAAY/pB,EAAKre,IAAWC,MACxCS,MAAO2R,IAAMg2B,eAAe5V,EAAQpU,IAErCle,OAGH,GAAY,YAARke,EAAmB,CACtB,IAAMiqB,EAAW71B,OAAOC,KAAKrC,GAAS9I,MACrC,SAACghC,GAAD,OAAQl4B,EAAQk4B,GAAGr9B,OAAS,IAAIrK,QAAQV,IAAO,KAMhD,GAJAO,EAAQ8nC,KAAKvL,IACZW,OAAQvtB,EAAQi4B,IAAaj4B,EAAQi4B,GAAUt9B,MAAStK,GACxDA,GAEG2P,GAAWi4B,GAAYj4B,EAAQi4B,GAAUloC,OAASqG,IAAKoC,MAI1DnI,EAHqBgL,KAAKkY,OACxBvT,EAAQi4B,IAAa,IAAI78B,aAAe,MADlCI,UAGYnL,OAEf,GAAY,SAAR2d,GAAkB3d,EAC5BA,EAAQ8nC,KAAKvL,IAAI,GAAIW,OAAOl9B,SACtB,GAAY,gBAAR2d,EAAuB,CACjC,IAAMgf,EAAW3xB,KAAKkY,MAAMljB,GAAS,MAC/BwK,EAAQmF,EAAQlQ,GAAI+K,MAC1BA,GACCA,EAAM0e,SAAQ,SAACpiB,GACd,IAAMihC,EAAQp4B,EAAQ7I,GACJkE,KAAKkY,MAAM6kB,EAAMh9B,aAAe,MAClC,UACfg9B,EAAM19B,QAAUsyB,EAASxxB,aAK5BsY,EAAO9F,GAAO3d,EACN,WAAR2d,GACC3d,IAAUyJ,IAAWC,QACpB+Z,EAAOnZ,KAAO,OAKO,gBAAzBmF,EAAMvQ,gBACNuQ,EAAMrQ,YAAcE,IAAWC,OAE/B0nC,EAAYK,EAAY73B,GACxByU,YAAczU,KAIZA,EACH2c,EAAW3c,GAEXg3B,EAASra,GAsGX,SAAS7U,EAAT,EAA8C9H,GAAQ,IAAD,IAAjChQ,UAAiC,MAA5B,KAA4B,MAAtBC,YAAsB,MAAf,KAAe,EAC9C0sB,EAAa,SAAC3c,GACnBA,EAAMiI,WAAajY,EACnBgQ,EAAMyI,SAAW,EACjBzI,EAAMvQ,eAAiBQ,GAEpB+P,EACH2c,EAAW3c,GAEXg3B,EAASra,GAKX,SAASpU,EAAT,EAAoCvI,GAAQ,IAArB6H,EAAoB,EAApBA,MAAO7X,EAAa,EAAbA,GACvBuoC,EAAUviC,IAAE+e,WACZ4H,EAAa,SAAC3c,GACnB,IAAME,EACLF,EAAMrQ,YAAcE,IAAWC,KAAO,qBAAuB,UAC9DkQ,EAAME,GAASlQ,GAAf,2BACI6X,GADJ,IAEC9M,MAAM,GAAD,mBAAO8M,EAAM9M,OAAS,IAAtB,CAA2Bw9B,MAEjCv4B,EAAME,GAASq4B,GAAf,uCACI59B,KACa,uBAAZuF,EACD,CAAE/E,MAAO6E,EAAM7E,MAAMgD,UACrB,IAJJ,IAKCnP,KAAK,QAAD,OAAUupC,GACdtpC,MAAO,MACPqM,YAAaC,KAAKC,UAAU,CAAEhL,IAAK,WAEpCwP,EAAMvQ,eACLuQ,EAAMrQ,YAAcE,IAAWC,KAAO,cAAgB,MAEpDkQ,EACH2c,EAAW3c,GAEXg3B,EAASra,GAEV,IAAM7pB,EAAQmU,EAAMtX,YAAcE,IAAWC,KAAO,cAAgB,KACpEuY,EACC,CACCrY,KACAlB,MAAO,CACNyY,QAASgxB,EACTzlC,UAGFkN,GAED8H,EAAS,CAAE9X,GAAIuoC,EAAStoC,KAAM6C,GAASkN,GAgMxC,IAAMmS,EAAcxJ,IAAMmD,aACzB,WACCkrB,GAAS,SAACh3B,GACTA,EAAMM,QAAS,OAGjB,CAAC02B,IA2CF,SAASwB,EAAWC,EAAQz4B,GAC3BsC,OAAOC,KAAKk2B,GAAQhf,SAAQ,SAACvL,GAC5BlO,EAAMkO,GAAOwqB,YAASD,EAAOvqB,OAI/B,SAASypB,EAAgB33B,GACxBA,EAAM+f,KAAKrgB,KAAK,CACfQ,QAASw4B,YAAS14B,EAAME,SACxBnF,MAAO29B,YAAS14B,EAAMjF,OACtBkY,eAAgBylB,YAAS14B,EAAMiT,gBAC/B/L,mBAAoBwxB,YAAS14B,EAAMkH,oBACnCyL,aAAc+lB,YAAS14B,EAAM2S,cAC7BjK,iBAAkBgwB,YAAS14B,EAAM0I,kBACjCsK,WAAY0lB,YAAS14B,EAAMgT,YAC3B+J,oBAAqB2b,YAAS14B,EAAM+c,qBACpC5V,UAAWuxB,YAAS14B,EAAMmH,aAEvBnH,EAAMggB,OAAOhtB,SAChBgN,EAAMggB,OAAS,IASjB,IAAMzvB,EAAQ,CACb8X,iBACAH,OA1HD,WAAyC+S,EAAMnoB,GAAQ,IAArC6oB,EAAoC,EAApCA,OAAQgd,EAA4B,EAA5BA,YACnBC,EAAW,SAACC,GAAD,MAAc,CAAEA,YAEjC,IAEEld,IACAgd,GACAA,EAAY3oC,KAAOuK,IAAIzB,MAAQmO,EAAMlM,MAAM/H,OAAS,EAErD,OAAO4lC,GAAS,GAIjB,GAAIt2B,OAAOG,OAAOlI,IAAIC,eAAe9J,QAAQirB,EAAO3rB,KAAO,EAC1D,OAAO4oC,GAAS,GAGjB,IAAME,EACK,gBAAVhmC,EAA0BmU,EAAMC,mBAAqBhH,EACtD,OAGGyb,EAAO9T,MAAMkxB,OAASC,YAAeF,EAAUnd,EAAQgd,IAExD,CAACriC,IAAKoC,MAAOpC,IAAKqC,MAAM7E,SAAS6nB,EAAO9T,MAAM5X,OAC9CmnC,EAAkBzb,EAAO3rB,GAAI8C,GAAOpC,QACnCioC,EAAY3oC,KAAOuK,IAAI1B,UACpB8/B,EAAYJ,QACZI,EAAY3oC,KACX,EAEC4oC,GAAS,GAGVA,GAAS,IAyFhBzwB,OA5QD,WAAoD,IAApCnY,EAAmC,uDAA9B,KAA8B,yDAAJ,GAAlBlB,EAAsB,EAAtBA,MAAOmqC,EAAe,EAAfA,OACnCjC,GAAS,SAACh3B,GACT,IAAMk5B,EAAc,GACpB,EAAuBpqC,EAAf+Y,aAAR,MAAgB,GAAhB,EACMsxB,EAAM,aACXlpC,KAAM4X,EAAM5X,KACZhB,MAAO4Y,EAAMmG,MACbhf,KAAM6Y,EAAM7Y,KACZqM,aAAcwM,EAAMxM,aACpBJ,SAAU4M,EAAM5M,UACb4M,GAEAA,GAAwB,WAAfA,EAAM7Y,OAClBmqC,EAAM,eAAoB,GAEvBtxB,GAAwB,cAAfA,EAAM7Y,OAClBmqC,EAAM,iBAAsB,GAE7B,IACCpxB,EAMG/H,EANH+H,WACAC,EAKGhI,EALHgI,YACAC,EAIGjI,EAJHiI,WACAmxB,EAGGp5B,EAHHo5B,gBACAl5B,EAEGF,EAFHE,QACAgH,EACGlH,EADHkH,mBAEDlH,EAAM+H,WAAa,KACnB/H,EAAMgI,YAAc,KACpB,IAAMqxB,EAAS,eAAQr5B,EAAMm3B,WAC7B,GAAIgC,EAAO79B,aAAe+9B,EAAU/9B,YAAa,CAChD,IAAMg+B,EAAe/9B,KAAKkY,MAAM4lB,EAAU/9B,aAAe,MACnDi+B,EAAmBh+B,KAAKkY,MAAM0lB,EAAO79B,aAAe,MAC1D+9B,EAAU/9B,YAAcC,KAAKC,UAAL,2BACpB+9B,GACAD,IAUL,GAPAt5B,EAAMo5B,gBAAkB92B,OAAO0X,OAAO,GAAIlrB,EAAO,CAChD+Y,MAAM,2BAAMsxB,GAAWE,KAGpBpxB,GAAcA,IAAeF,IAChC/H,EAAMiI,WAAa,MAEhBgxB,EAAQ,CAAC,IAAD,YACX,IAAKjxB,IAAgBoxB,EAAiB,OACtCzB,EAAgB33B,GAChB,IAAM4H,EAAQ5H,EAAMgT,WAAWpB,WAC9B,SAACpa,GAAD,OACCA,EAAEkc,WAAa0lB,EAAgBvxB,MAAM6L,UACrClc,EAAExI,OAASoqC,EAAgBvxB,MAAM7Y,SAEpB,IAAX4Y,GACH5H,EAAMgT,WAAWjB,OAAOnK,EAAO,GAGhC,IAAMuvB,EAAS,eAAQn3B,EAAMm3B,WAEzBiC,EAAgBvxB,MAAMvM,aAAe67B,EAAU77B,cAClD67B,EAAU77B,YAAcC,KAAKC,UAAL,2BACpBD,KAAKkY,MAAM2lB,EAAgBvxB,MAAMvM,aAAe,OAChDC,KAAKkY,MAAM0jB,EAAU77B,aAAe,SAOzC89B,EAAgBvxB,MAAhB,2BACIuxB,EAAgBvxB,OAChBsvB,GAGJ,MAA8BqC,YAAY,CACzCxxB,cACAoxB,mBAF6BI,CAG3Bx5B,GAHK63B,EAAR,EAAQA,WAAY/iB,EAApB,EAAoBA,MAKpBokB,EAAYx5B,KAAZ,MAAAw5B,EAAW,YAASrB,IAGG,gBAAtB7vB,EAAYlV,OACZkN,EAAMrQ,YAAcE,IAAWC,OAE/B2pC,YAAyBz5B,EAAOo5B,EAAgBb,SAChDkB,YAAyBz5B,EAAOgI,EAAYuwB,SAC5Cf,EAAY0B,EAAal5B,GACzByU,YAAczU,IAEfA,EAAMm3B,UAAY,GAIlB,IAQE,EARIuC,EACL15B,EAAMrQ,YAAcE,IAAWC,KAAOoX,EAAqBhH,EACtDy5B,EAAK,UAAGr3B,OAAOC,KAAKm3B,GAAc,WAA7B,aAAG,EAA+BtiC,MAC5C,SAAC8W,GAAD,aAAS,UAAAwrB,EAAWxrB,UAAX,eAAiBje,QAASqG,IAAKqC,QAEzC,IACgB,OAAfygC,QAAe,IAAfA,GAAA,UAAAA,EAAiBvxB,aAAjB,eAAwB5X,QAASqG,IAAKqC,QACtC,OAACygC,QAAD,IAACA,GAAD,UAACA,EAAiBvxB,aAAlB,iBAAC,EAAwB9M,aAAzB,aAAC,EAA+B/H,QAEhCuV,EACC,CAAEV,MAAK,UAAEZ,EAAMmyB,uBAAR,aAAE,EAAuBvxB,MAAO7X,GAAI2pC,GAC3C35B,IAKD,UAAA05B,EAAW1xB,EAAYuwB,gBAAvB,eAAiCtoC,QAASqG,IAAKqC,OAChC,OAAfygC,QAAe,IAAfA,GAAA,UAAAA,EAAiBvxB,aAAjB,eAAwB5X,QAASqG,IAAKoC,OAEtC2P,EACC,CACCrY,GAAI2pC,EACJ7qC,MAAO,CACNyY,QAASuN,GAASskB,EAAgBppC,GAClC8C,MAAOsmC,EAAgBtmC,QAGzBkN,GAGE8U,GACHhN,EAAS,CAAE9X,GAAI8kB,EAAO7kB,KAAI,OAAE+X,QAAF,IAAEA,OAAF,EAAEA,EAAalV,OAASkN,QAGnDA,EAAM+H,WAAa/X,MA8IrB4pC,SAraD,SAAkBrB,EAAS3wB,EAAO5X,EAAIqnC,GACrC,IAAMQ,EAAa,GACbD,EAA+B,gBAAfP,EACtBL,GAAS,SAACh3B,GACT23B,EAAgB33B,GAChB,IAAME,EACU,gBAAfm3B,EAA+Br3B,EAAMkH,mBAAqBlH,EAAME,QAC3D25B,EACU,gBAAfxC,EAA+B,mBAAqB,QAC/CrjB,EAAS9T,EAAQlQ,GAEvB,IAAK4nC,GAAiB53B,EAAMrQ,YAAcE,IAAWC,KAAM,CAC1D,IAAM8X,EAAQ5H,EAAMtQ,eAAekiB,WAClC,SAACpa,GAAD,OACEA,EAAEkc,WAAaM,EAAON,UAA4B,UAAhBM,EAAO/jB,OAC1CuH,EAAExI,OAASglB,EAAOhlB,SAEL,IAAX4Y,GACH5H,EAAMgT,WAAW8mB,QAAQ95B,EAAMtQ,eAAekY,IAGhD,IAAMmyB,EAAUxB,GAAWh+B,IAAIzB,OAASy/B,EAIxC,IAHA3wB,GAASmyB,EAAU75B,EAAQq4B,GAASx9B,MAAQiF,EAAM65B,IAAcjoB,WAC/D,SAACwmB,GAAD,MAAO,UAAGA,KAAH,UAAcpoC,QAET,GAAKkQ,EAAQlQ,GAAK,CAC9B,IAAIsP,EAAM83B,EAAkBpnC,EAAIqnC,GAChC/3B,EAAIma,SAAQ,SAACzpB,GACZ,GAAI4nC,GAAiB3wB,EAAMtX,YAAcE,IAAWE,OAAQ,CAC3D,IAAMikB,EAAS9T,EAAQlQ,GACnBgkB,EAAOhkB,IAA2B,kBAAdgkB,EAAOhkB,IAC9BgQ,EAAM+c,oBAAoBrd,KAAK,CAC9B1P,GAAIgkB,EAAOhkB,GACX+O,QAASiV,EAAOjV,cAKpB,IAAMi7B,EAAW,YAAO16B,GACxB,GAAIy6B,EACH,GACC75B,EAAQq4B,GAASv9B,SAAWhB,IAAWG,MACtC,CAAC7D,IAAKE,QAASF,IAAKC,SAASzC,SAASoM,EAAQq4B,GAAStoC,MAWxDiQ,EAAQq4B,GAASx9B,MAAMgX,OAAOnK,EAAO,OAVpC,CACD,IAAMqyB,EAAeC,YACpBl6B,EACA,CAAEu4B,UAAS3wB,QAAO5X,MAClBqnC,GAED/3B,EAAMA,EAAIi4B,OAAO0C,EAAa36B,KAC9B04B,YAAgB/wB,IACf4wB,EAAWn4B,KAAX,MAAAm4B,EAAU,YAASoC,EAAapC,kBAKlC73B,EAAM65B,GAAa9nB,OAAOnK,EAAO,GAE9B1H,EAAQlQ,IACXgoC,YAAgB/wB,IACf4wB,EAAWn4B,KAAK,CAAE1Q,KAAM,UAAWie,OAAQ/M,EAAQlQ,GAAI6D,QAEzDyL,EAAIma,SAAQ,SAACzpB,GACZ,IAAMgkB,EAAS9T,EAAQlQ,GACnBgkB,IACEgmB,EAAYlmC,SAAS9D,IACzBgoC,YAAgB/wB,IACf4wB,EAAWn4B,KAAK,CAAE1Q,KAAM,UAAWie,OAAQ+G,EAAOngB,QAGnDmgB,EAAOhkB,IACc,kBAAdgkB,EAAOhkB,KACbgQ,EAAM+c,oBAAoB3lB,MAAK,SAACwB,GAAD,OAAWA,EAAM5I,KAAOgkB,EAAOhkB,OAE/DgQ,EAAM+c,oBAAoBrd,KAAK,CAC9B1P,GAAIgkB,EAAOhkB,GACX+O,QAASiV,EAAOjV,iBAGXmB,EAAQlQ,OAGbsP,EAAI5O,QAAQsP,EAAMiI,aAAe,IACpCjI,EAAMiI,WAAa,MAGrBkyB,YAAiBn6B,EAAOhQ,GACnB4nC,GAAiB53B,EAAMrQ,YAAcE,IAAWC,OACpD2pC,YAAyBz5B,EAAOu4B,GAChCf,EAAYK,EAAY73B,GACxByU,YAAczU,QA4UhBoI,QApID,SAAiBJ,GAChBgvB,GAAS,SAACh3B,GACTA,EAAMgI,YAAcA,MAmIrBF,WACAb,QACA1H,OAAQy3B,EACR1uB,aA5FD,SAAsBiS,GACrByc,GAAS,SAACh3B,GACTA,EAAMm3B,UAAY5c,MA2FnBpI,cACAsF,KA/ED,WACCuf,GAAS,SAACh3B,GACLA,EAAM+f,KAAK/sB,SACdgN,EAAMggB,OAAO8Z,QAAQ,CACpB55B,QAASw4B,YAAS14B,EAAME,SACxBnF,MAAO29B,YAAS14B,EAAMjF,OACtBkY,eAAgBylB,YAAS14B,EAAMiT,gBAC/B/L,mBAAoBwxB,YAAS14B,EAAMkH,oBACnCyL,aAAc+lB,YAAS14B,EAAM2S,cAC7BjK,iBAAkBgwB,YAAS14B,EAAM0I,kBACjCsK,WAAY0lB,YAAS14B,EAAMgT,YAC3B+J,oBAAqB2b,YAAS14B,EAAM+c,qBACpC5V,UAAWuxB,YAAS14B,EAAMmH,aAE3BqxB,EAAWx4B,EAAM+f,KAAK/f,EAAM+f,KAAK/sB,OAAS,GAAIgN,GAC9CA,EAAM+f,KAAKhO,OAAO/R,EAAM+f,KAAK/sB,OAAS,EAAG,QAiE3C2kB,KA5DD,WACCqf,GAAS,SAACh3B,GACLA,EAAMggB,OAAOhtB,SAChBgN,EAAM+f,KAAKrgB,KAAK,CACfQ,QAASw4B,YAAS14B,EAAME,SACxBnF,MAAO29B,YAAS14B,EAAMjF,OACtBkY,eAAgBylB,YAAS14B,EAAMiT,gBAC/B/L,mBAAoBwxB,YAAS14B,EAAMkH,oBACnCwB,iBAAkBgwB,YAAS14B,EAAM0I,kBACjCsK,WAAY0lB,YAAS14B,EAAMgT,YAC3BL,aAAc+lB,YAAS14B,EAAM2S,cAC7BoK,oBAAqB2b,YAAS14B,EAAM+c,qBACpC5V,UAAWuxB,YAAS14B,EAAMmH,aAE3BqxB,EAAWx4B,EAAMggB,OAAO,GAAIhgB,GAC5BA,EAAMggB,OAAOjO,OAAO,EAAG,QA8CzBK,aAlBD,SAAsBpS,GACrBA,EAAMggB,OAAS,GACfhgB,EAAM+f,KAAO,IAiBb2M,oBAnJD,SAA6Bxe,GAC5B8oB,GAAS,SAACh3B,GACTA,EAAMqT,uBAAuB3T,KAAKwO,OAkJnC3F,eAED,OACC,kBAACsuB,EAAa7I,SAAd,CAAuBz9B,MAAOA,GAAQua,K,gCCpnBxC,sFAGMsvB,EAAc,SAACnqC,GAEpB,MADc,CAAC,SAAU,SAAU,UACtB6D,SAAS7D,GAAQ,QAAUA,GAGlC,SAAS0pB,EAAczZ,GAAyC,IAAhCnF,EAA+B,uDAAvB,GAAIs/B,EAAmB,uCAAXjiB,EAAW,uDAAJ,GACjE,IAAgB,IAAZiiB,EACH,MAAO,GAER,IAAMC,EAAwB,KAATliB,EACfmiB,EAA2B,SAACx/B,EAAOs/B,GACxC,IAAMrmB,EAAS9T,EAAQm6B,GAOvB,OANoBt/B,EAAMxD,QACzB,SAACF,GAAD,OACCA,IAASgjC,GACTn6B,EAAQ7I,IACR,CAAC6I,EAAQ7I,GAAMrI,KAAMkR,EAAQ7I,GAAMmjC,cAAc1mC,SAASkgB,EAAOhlB,SAEhDgE,OAAS,GAGvBynC,EAAmB,SAAC1/B,EAAOs/B,GAChC,IAAMrmB,EAAS9T,EAAQm6B,GAMvB,OALoBt/B,EAAMxD,QACzB,SAACF,GAAD,OACC6I,EAAQ7I,IACR,CAAC6I,EAAQ7I,GAAMrI,KAAMkR,EAAQ7I,GAAMmjC,cAAc1mC,SAASkgB,EAAOhlB,SAEhD0B,QAAQ2pC,GAAU,GAGhCK,EAAuB,SAAC3/B,EAAO9K,EAAMoqC,GAM1C,OALoBt/B,EAAMxD,QACzB,SAACF,GAAD,OACC6I,EAAQ7I,IACR+iC,EAAYl4B,IAAMy4B,cAAcz6B,EAAQ7I,GAAO,YAAcpH,KAE5CS,QAAQ2pC,GAAU,GAGhCO,EAAgB,WACrB,IAAM5mB,EAAS9T,EAAQm6B,GACvB,QAAKrmB,EAAOhlB,MAKkB,IAFXsT,OAAOG,OAAOvC,GACF3I,QAAO,SAACu3B,GAAD,OAAOA,EAAE9/B,OAASglB,EAAOhlB,QAC5CgE,QAGd6nC,EAAoB,WACzB,OAAIP,KAGCM,KAMFE,GAAW,EACT3oC,EAAamQ,OAAOG,OAAOvC,GAC3B66B,EAAYz4B,OAAOC,KAAKrC,GAiC9B,GAhCA/N,EAAWsnB,SAAQ,SAACzF,EAAQ/d,GAC3B,GAAI+d,EAAOjZ,QAEK,IADDiZ,EAAOjZ,MAAM6W,WAAU,SAAC5S,GAAD,OAAOA,IAAMq7B,KAChC,CACjBS,GAAW,EACX,IAAME,EAAU96B,EAAQm6B,GAClBhD,EAAa+C,EAAYl4B,IAAMy4B,cAAcK,EAAS,UAC5D,GAAIA,EAAQhsC,KAAM,CACjB,IAAIisC,EAAQ,WAAO5D,EAAP,mBAA4B2D,EAAQhsC,KAApC,MACZ,GAAIurC,EAAyBvmB,EAAOjZ,MAAOs/B,GAAS,CACnD,IAAMa,EAAYT,EAAiBzmB,EAAOjZ,MAAOs/B,GAC7Ca,EAAY,IACfD,EAAQ,UAAMA,EAAN,YAAkBC,EAAlB,MAGV9iB,EAAI,UAAM6iB,GAAN,OAAiB7iB,OACf,CACN,IAAM8iB,EAAYR,EACjB1mB,EAAOjZ,MACPs8B,EACAgD,GAEDjiB,EAAI,WAAOif,EAAP,YAAqB6D,EAArB,YAAkC9iB,GAKtCA,EAHIyiB,IAGA,WAAOziB,GAFJuB,EAAczZ,EAASnF,EAAOggC,EAAU9kC,GAAImiB,OAOnD0iB,EAAU,CACb,IAAMlzB,EAAQ7M,EAAM6W,WAAU,SAAC5S,GAAD,OAAOA,IAAMq7B,KAC3C,IAAe,IAAXzyB,EAAc,CACjB,IAAMozB,EAAU96B,EAAQm6B,GACxB,GAAIW,EAAQhsC,KAAM,CACjB,IAAIisC,EAAQ,YAAQD,EAAQ/qC,KAAhB,mBAA+B+qC,EAAQhsC,KAAvC,MAIZ,GAHI,CAACsH,IAAKE,QAASF,IAAKC,QAASD,IAAK+C,SAASvF,SAASknC,EAAQ/qC,QAC/DgrC,EAAQ,YAAQD,EAAQ/qC,OAErBsqC,EAAyBx/B,EAAOs/B,GAAS,CAC5C,IAAMa,EAAYT,EAAiB1/B,EAAOs/B,GACtCa,EAAY,IACfD,EAAQ,UAAMA,EAAN,YAAkBC,EAAlB,MAGV9iB,EAAI,UAAM6iB,GAAN,OAAiB7iB,OACf,CACN,IAAM8iB,EAAYR,EAAqB3/B,EAAOigC,EAAQ/qC,KAAMoqC,GAC5DjiB,EAAI,YAAQ4iB,EAAQ/qC,KAAhB,YAAwBirC,EAAxB,YAAqC9iB,KAI5C,OAAOA,EAID,SAAS3D,EAAczU,GAC7BsC,OAAOC,KAAKvC,EAAME,SAAW,IAAIuZ,SAAQ,SAACC,GACzC,IAAMtB,EAAOuB,EAAc3Z,EAAME,QAASF,EAAMjF,MAAO2e,GACvD1Z,EAAME,QAAQwZ,GAAU7lB,MAAQukB,O,4uBC7G3B,SAASsL,EAAgByX,GAM/B,OAJCA,GACAA,EAAKv4B,QAAQ,WAAY,OAAOA,QAAQ,MAAM,SAAUw4B,GACvD,OAAOA,EAAIC,iBAKP,IAAMtD,EAAgB,SAACxnC,GAA+B,IAAxB+qC,IAAuB,yDAC3D,GAAK/qC,EAAL,CAEA,IAAIgrC,EACJ,GAFAhrC,EAAQA,EAAMm6B,OAEV4Q,EACHC,EAAgBC,oBAAUjrC,OACpB,CACN,IAAIkrC,EAAgBD,oBAAUjrC,GAC9BgrC,EAAgBE,EAAc,GAAGJ,cAAgBI,EAAcC,MAAM,GAEtE,OAAOH,IAGKvM,EAAkB,SAACz+B,GAC/B,IAAIqR,EAASrR,EAAMqS,QAAQ,WAAY,OAGvC,OADChB,GAAUA,EAAO+5B,OAAO,GAAGN,cAAgBz5B,EAAO85B,MAAM,GAAG/nB,eAItD,SAAS3D,EAAUorB,GACzB,OAAIn2B,QAAUA,OAAOG,KAAOH,OAAOG,IAAIquB,IAAqB,kBAAR2H,EAC5Cn2B,OAAOG,IAAIquB,GAAG2H,GAEfA,EAGR,IAAMQ,EAAY,SAAC,GAAD,IAAG5nB,EAAH,EAAGA,OAAQhkB,EAAX,EAAWA,GAAO+a,EAAlB,qCACjBnQ,QAASoZ,EAAOpZ,SAAW,EAC3B7H,WAAY4G,IAAWE,OACvB5J,KAAMqG,IAAKsC,MACX5J,KAAK,SAAD,OAAWgB,GACff,MAAO,UACJ8b,IA8DSmvB,EAAc,SAACjzB,EAAD,EAAgCowB,GAAgB,IAAtCrnC,EAAqC,EAArCA,GAAI4X,EAAiC,EAAjCA,MAAO2wB,EAA0B,EAA1BA,QACzCV,EAAa,GAEb33B,EAD+B,gBAAfm3B,EACUpwB,EAAMC,mBAAqBD,EAAM/G,QAC3DxH,EAAQwH,EAAQq4B,GAChBsD,EAAe37B,EAAQlQ,IAAO,CAAE4K,QAAS,GACzCkhC,EAAmBpjC,EAAMqC,MAAMrC,EAAMqC,MAAM/H,OAAS,KAAOhD,EAC7DsP,EAAM,GAEJy8B,EAAmB,SAAChhC,GACzB,IAAKA,IAAUA,EAAM/H,OAAQ,OAAO,EACpC,IAAMqoB,EAAWtgB,EAAMA,EAAM/H,OAAS,GAChCgpC,EAAa97B,EAAQmb,GAC3B,MAA2B,WAApB2gB,EAAW/rC,MAA+C,WAA1B+rC,EAAWjpC,YAG7CkpC,EAAavjC,EAAMqC,MAAMgX,OAAOnK,EAAO,GAE7C,GAAIk0B,EAEH,KAAOC,EAAiBrjC,EAAMqC,QAC7BuE,EAAII,KAAKhH,EAAMqC,MAAM8vB,OAIvB,GAE+B,WAA7B3qB,EAAQ+7B,GAAYhsC,MACe,WAAnCiQ,EAAQ+7B,GAAYlpC,aAEpB+oC,EACA,CACD,IAAIhnB,EAAQ9e,IAAE+e,WACVmnB,EAAa,GACbj1B,EAAMtX,YAAcE,IAAWE,SAClCmsC,EAAa,CACZ/gC,MAAO0gC,EAAa1gC,MACpBC,WAAYygC,EAAazgC,aAI3B8E,EAAQ4U,GAAS8mB,EAAU,yBAC1B5nB,OAAQ,GACRhkB,GAAI8kB,EACJla,QAASihC,EAAajhC,SAElBW,KAAKkY,MAAMooB,EAAavgC,aAAe,MAAMV,QAC9C,CACAU,YAAaC,KAAKC,UAAU,CAC3BZ,QAASW,KAAKkY,MAAMooB,EAAavgC,aAAaV,WAG/C,IACAshC,IAEJ,IAAMC,EAAej8B,EAAQxH,EAAMqC,MAAM6M,IACzCowB,EAAgB/wB,IACf4wB,EAAWn4B,KAAK,CACf1Q,KAAM,SACNuV,SAAU,SACVmX,SAAU,CAACxb,EAAQ4U,IACnB7H,OAAQkvB,EAAatoC,QAEvB6E,EAAMqC,MAAMgX,OAAOnK,EAAO,EAAGkN,GAE9B,MAAO,CAAExV,IAAI,GAAD,OAAMA,EAAN,CAAWtP,IAAK6nC,eA4EhBC,EAAe,SAACjwB,EAAOZ,EAAOjX,EAAI4nC,GAC9C,IAAMhK,EAASwO,YAASv0B,EAAOZ,EAAMtX,UAAWioC,GAC5Ct1B,OAAOC,KAAKqrB,GAAQ56B,OACvBiU,EAAME,UAAUnX,GAAM49B,EACZ3mB,EAAME,UAAUnX,WACnBiX,EAAME,UAAUnX,IAIlB,SAASgoC,EAAgB/wB,GAC/B,OAAOA,EAAMuL,SAAWyL,EAAoBhX,EAAMuL,QAI5C,IAAMgnB,EACZ,SAAC,GAAD,IAAGxxB,EAAH,EAAGA,YAAaoxB,EAAhB,EAAgBA,gBAAhB,OACA,SAACnyB,GAAW,IAAD,YAMJ4wB,EAAa,GACbD,EAAsC,gBAAtB5vB,EAAYlV,MAC5BupC,EACiB,gBAAtBr0B,EAAYlV,OAA4BsmC,EAAgBb,QAErD,QADA,mBAEE+D,EACiB,gBAAtBt0B,EAAYlV,OAA4BkV,EAAYuwB,QAEjD,QADA,mBAEEO,EACiB,gBAAtB9wB,EAAYlV,MACTmU,EAAMC,mBACND,EAAM/G,QACJq8B,IACJv0B,EAAYuwB,QAAUO,EAAS9wB,EAAYuwB,SAAWtxB,GAAOq1B,IAC9D,IACCZ,QACF,EAKI1zB,EAAYw0B,KAJf5hC,EADD,EACCA,QADD,IAECT,YAFD,MAEQ,GAFR,EAGMsiC,EAHN,EAGC3Y,IACA4Y,EAJD,EAICA,eAMKC,EAAe,oBACpBxiC,EAAK/C,MAAK,SAACC,GAAD,OAAUA,EAAKrH,KAAOopC,EAAgBppC,aAD5B,aACpB,EAAqD4sC,kBADjC,QAEpBxD,EAAgBxxB,MAGbwxB,EAAgBvxB,YAAyC3M,IAAhCk+B,EAAgBvxB,MAAMkxB,cAC3CK,EAAgBvxB,MAAMkxB,MAG9B,IAAM8D,EACLzD,EAAgBppC,IAAM8oC,EAASM,EAAgBppC,IAC5CuL,KAAKkY,OAAM,UAAA2lB,EAAgBvxB,aAAhB,eAAuBvM,cAAe,MAAMV,aACvDM,EAKJ,GACmC,YAAlC,UAAA8M,EAAYH,aAAZ,eAAmB9U,aACS,YAA5B,UAAAiV,EAAYH,aAAZ,eAAmB5X,MAClB,CAAC,IAAD,UACK6sC,EAA2BvhC,KAAKkY,OACrC,UAAAzL,EAAYH,aAAZ,eAAmBvM,cAAe,MACjCV,QAGFw+B,EAAgBvxB,MAAMvM,YAAcC,KAAKC,UAAL,2BAChCD,KAAKkY,OAAM,UAAA2lB,EAAgBvxB,aAAhB,eAAuBvM,cAAe,OADjB,IAEnCV,QAASkiC,MAGN,UAAA90B,EAAYH,aAAZ,eAAmB7X,KAAuC,kBAAjC,UAAOgY,EAAYH,aAAnB,aAAO,EAAmB7X,KACtDiX,EAAM8V,oBAAoBrd,KAAK,CAC9B1P,GAAIgY,EAAYH,MAAM7X,GACtB+O,QAASiJ,EAAYH,MAAM9I,UAIDxD,KAAKkY,OAChC,UAAAqlB,EAAS9wB,EAAYuwB,gBAArB,eAA+Bj9B,cAAe,MAC7CI,UAG2BohC,IAC5B1D,EAAgBvxB,MAAMjN,QAAU,GAIlC,IAAMvE,EAAcyiC,EAAS9wB,EAAYuwB,SACnCwE,EAAS,OAAG1mC,QAAH,IAAGA,OAAH,EAAGA,EAAatD,WAC/B,GAAIqmC,EAAgBvxB,QAAUuxB,EAAgBvxB,MAAMjN,QACnD,GACCA,GACAw+B,EAAgBvxB,QACf,CAACvR,IAAK6C,KAAM7C,IAAK8C,SAAU9C,IAAK+C,SAASvF,SACzCslC,EAAgBvxB,MAAM5X,QAEtB,CAACqG,IAAKC,QAASD,IAAKE,SAAS1C,SAASipC,GACtC,CACD,IAAMC,EAAkB5D,EAAgBvxB,MAAMjN,QAO9C,GALImiC,IAAczmC,IAAKoC,OAAS+0B,OAAOp3B,EAAYqF,UAClD09B,EAAgBvxB,MAAMjN,QAAU6yB,OAAOp3B,EAAYqF,UAEnD09B,EAAgBvxB,MAAMjN,QAAU8hC,GAAkB9hC,EAE/Cg9B,EAAe,CAElB,IAAMt8B,EAAc,CAAEV,QAAS8hC,GAAkB9hC,GACjDw+B,EAAgBvxB,MAAMvM,YAAcC,KAAKC,UAAUF,GAEpD,GAAI,UAAG89B,EAAgBvxB,MAAMjN,WAAzB,UAA0CoiC,GAAmB,CAChE,GAAI/1B,EAAMtX,YAAcE,IAAWE,OAAQ,CAE1C,IAAMuL,EAAcC,KAAKkY,MACxB2lB,EAAgBvxB,MAAMvM,aAAe,MAEtCA,EAAYV,QAAU8hC,GAAkB9hC,EACxCw+B,EAAgBvxB,MAAMvM,YAAcC,KAAKC,UAAUF,GAEpD08B,EAAgB/wB,IACf4wB,EAAWn4B,KAAK,CACf1Q,KAAM,YACNie,OAAQmsB,EAAgBvxB,MAAMhU,MAC9B2kB,WAAY,CACXxpB,KAAM,UACNuB,MAAO6oC,EAAgBvxB,MAAMjN,WAIjC,GAAIqM,EAAMtX,YAAcE,IAAWE,OAAQ,CAC1C,IAAMuL,EAAcC,KAAKkY,MACxB2lB,EAAgBvxB,MAAMvM,aAAe,MAEtCA,EAAYV,QAAU,EACtBw+B,EAAgBvxB,MAAMvM,YAAcC,KAAKC,UAAUF,SAE9C,GACN89B,EAAgBvxB,OAChBZ,EAAMtX,YAAcE,IAAWE,OAC9B,CACD,IAAMuL,EAAcC,KAAKkY,MACxB2lB,EAAgBvxB,MAAMvM,aAAe,MAEtCA,EAAYV,QAAU8hC,GAAkB9hC,EACxCw+B,EAAgBvxB,MAAMjN,QAAU8hC,GAAkB9hC,EAClDw+B,EAAgBvxB,MAAMvM,YAAcC,KAAKC,UAAUF,GAGrD,IAAM2hC,EAAS,GAEf,EAzOqB,SAAC,GAAqD,IAAnD9iC,EAAkD,EAAlDA,KAAMY,EAA4C,EAA5CA,MAAOmiC,EAAqC,EAArCA,YAAaT,EAAwB,EAAxBA,kBAC/CU,EAAgB,GAChBC,EAAe,GACfniB,GAAO,EACPigB,EAAY,EAChB,GAAI/gC,EAAKnH,OAAQ,CAiChB,GAhCAmH,EAAKsf,SAAQ,SAAC4jB,EAAMC,GACnBD,EAAKziC,QAAU6yB,OAAO4P,EAAKziC,SAAW,GAElCyiC,EAAKrtC,IAAMirB,GAAQqiB,EAAYJ,IAClChC,EAAYngC,EAAMrK,QAAQ2sC,EAAKrtC,IAAM,IAGjCqtC,EAAKvjC,WAAaujC,EAAKE,UAAYd,IAEnCa,EAAYJ,EAEXG,EAAKrtC,IACRmtC,EAAgB,GAChBjC,EAAYngC,EAAMrK,QAAQ2sC,EAAKrtC,IAAM,GAErCmtC,EAAcz9B,KAAd,2BACI29B,GADJ,IAECziC,QAASyiC,EAAKziC,SAAW,EACzB4iC,UAAU,KAIFviB,GAAQqiB,EAAYJ,IAC1BG,EAAKrtC,IACRkrC,EAAYngC,EAAMrK,QAAQ2sC,EAAKrtC,IAC/BirB,GAAO,GACGlgB,EAAM/H,QAChBoqC,EAAa19B,KAAb,2BAAuB29B,GAAvB,IAA6BG,UAAU,UAKvCziC,EAAM/H,OAAQ,CAEjB,IAAMqoB,EAAWtgB,EAAMA,EAAM/H,OAAS,GAChCyqC,EAAgBtjC,EAAKyX,WAAU,SAACwmB,GAAD,MAAO,UAAGA,EAAEpoC,MAAL,UAAiBqrB,MAEzD6hB,EAAcO,IAAoC,IAAnBA,IAClCL,EAAe,GACflC,EAAYngC,EAAM/H,OAAS,GAI7B,GAAImqC,EAAcnqC,OAAQ,CACzB,IAAM0qC,EAAc,YAAOP,GAC3BO,EAAejkB,SAAQ,SAACzF,EAAQpM,EAAO1H,GAErCA,EAAQ0R,WAAU,SAAC+rB,GAAD,OAAQ3pB,EAAOupB,WAAaI,EAAGJ,cAAc31B,IAE1C1H,EAAQi1B,QAC5B,SAACyI,EAAKD,GAAN,OACCA,EAAGJ,WAAavpB,EAAOupB,SAAWK,EAAMD,EAAG/iC,QAAUgjC,IACtD,IAEmB,KACnBT,EAAgBO,EAAenmC,QAC9B,SAAComC,GAAD,OAAQA,EAAGJ,WAAavpB,EAAOupB,kBAOrC,MAAO,CAAEH,eAAcD,gBAAejC,aAwKjC2C,CAAe,CAClB1jC,OACAY,MAAOwhC,EACPW,YARiBzP,OAAOzlB,EAAYJ,OASpC60B,sBAPAU,EADD,EACCA,cACAC,EAFD,EAECA,aAFD,IAGClC,iBAHD,MAGa,EAHb,EAWI4C,GAAwB,EAE5B,GAAI1E,EAAgBppC,IAAM8oC,EAASM,EAAgBppC,IAAK,CACvD,IAAM+tC,EAAc3E,EAAgBb,QACjCO,EAASM,EAAgBb,SACzBtxB,EACG+2B,GAAcD,EAAY1B,GAC1B4B,GAAkBD,GAAYttC,QAAQ0oC,EAAgBppC,IAE5D,GAAI,CAACgK,IAAWG,MAAMrG,SAASiqC,EAAY/iC,QAAS,CACnD,IAAI8Z,GAAQ9e,IAAE+e,WACRmpB,GACLF,GAAYA,GAAYhrC,OAAS,KAAOomC,EAAgBppC,GACrDmuC,IAAwB,EACxBD,IAAc9E,EAAgBb,UAAYvwB,EAAYuwB,SACrDoE,EAAkB30B,EAAYJ,QACjCu2B,IAAwB,GAG1B,IAAMC,GAAchF,EAAgBb,QACjCO,EAASM,EAAgBb,SACzB,KACClZ,IAAa,EAOjB,GALC+e,IACA,CAAC9nC,IAAKqC,KAAMrC,IAAKyC,YAAYjF,SAASsqC,GAAYnuC,QAElDovB,IAAa,GAGZ6e,KAAeC,IAChB9e,IACA,CAAC/oB,IAAKE,QAASF,IAAKC,SAASzC,SAASipC,GACrC,CACDiB,GAAYjsB,OAAOksB,GAAiB,GA8BpC,IA5BA,IAAMI,GAAsB,SAACtjC,GAAW,IAAD,IACtC,IAAKA,IAAUA,EAAM/H,OAAQ,OAAO,EACpC,IAAMqoB,EAAWtgB,EAAMA,EAAM/H,OAAS,GACtC,GAAIqoB,IAAarT,EAAYhY,GAAI,OAAO,EAExC,IAAMsuC,EAAgB,OAAGt2B,QAAH,IAAGA,GAAH,UAAGA,EAAaw0B,YAAhB,iBAAG,EAAmBriC,YAAtB,aAAG,EAAyB/C,MACjD,SAACimC,GAAD,OAAUA,EAAKrtC,KAAOqrB,KAGvB,GAAIijB,EAAkB,CACrB,GAAIA,EAAiBf,SAAWv1B,EAAYw0B,KAAK1Y,IAChD,OAAO,EAER,GACCwa,EAAiBf,WAAav1B,EAAYw0B,KAAK1Y,KAC/Cwa,EAAiBC,YAAcv2B,EAAYw0B,KAAKgC,SAEhD,OAAO,EAIT,IAAMxC,EAAalD,EAASzd,GAC5B,MACqB,WAApB2gB,EAAW/rC,MAA+C,WAA1B+rC,EAAWjpC,YAKtCsrC,GAAoBN,EAAYhjC,QAAQ,CAC9C,IAAM/K,GAAK+tC,EAAYhjC,MAAM8vB,MACzBiO,EAAS9oC,IAAIA,IAAiC,kBAApB8oC,EAAS9oC,IAAIA,IAC1CiX,EAAM8V,oBAAoBrd,KAAK,CAC9B1P,GAAI8oC,EAAS9oC,IAAIA,GACjB+O,QAAS+5B,EAAS9oC,IAAI+O,iBAGjB+5B,EAAS9oC,SAEX,CACN,IAAI6X,GAAQ,CACXjN,QAASk+B,EAASM,EAAgBppC,IAAI4K,SAAW,EACjD7H,WAAY4G,IAAWE,OACvB5J,KAAMqG,IAAKsC,MACX5J,KAAK,SAAD,OAAW8lB,IACf7lB,MAAO,UAEJgY,EAAMtX,YAAcE,IAAWE,SAClC8X,GAAK,MAAYuxB,EAAgBvxB,MAAM1M,MACvC0M,GAAK,WAAiBuxB,EAAgBvxB,MAAMzM,YAEzCyhC,IACHh1B,GAAK,YAAkBtM,KAAKC,UAAU,CAErCZ,QAASiiC,KAGX/D,EAAShkB,IAASxS,OAAO0X,OAAO,GAAInS,IACpCmwB,EAAgB/wB,IACf4wB,EAAWn4B,KAAK,CACf1Q,KAAM,SACNuV,SAAU,SACV0I,OAAQmsB,EAAgBvxB,MAAMhU,MAC9B6nB,SAAU,CAAC7T,IACX7X,GAAI8kB,KAENkpB,GAAYjsB,OAAOksB,GAAiB,EAAGnpB,UAIpCskB,EAAgBb,UAAYvwB,EAAYuwB,SACvCoE,EAAkB30B,EAAYJ,QACjCk2B,GAAwB,EACxB5C,KAGF8C,GAAYjsB,OAAOksB,GAAiB,GAMtC,GAC4B,WAA3Bj2B,EAAYH,MAAM5X,MACe,WAAjC+X,EAAYH,MAAM9U,WACjB,CACD,IAAIgmC,IACFK,EAAgBppC,IACjBsS,OAAOG,OAAOlI,IAAIC,eAAe9J,QAAQ0oC,EAAgBppC,KAAO,EAC7D8kB,GAAQikB,GAAQ/iC,IAAE+e,WAAaqkB,EAAgBppC,GAC/C6X,GAAQvF,OAAO0X,OAAO,GAAIof,EAAgBvxB,OAAS,IAsCvD,OArCIkxB,KAA+B,IAAtBlxB,GAAM6pB,aAAyB7pB,GAAM7Y,OACjD6Y,GAAM7Y,KAAN,UAAgB6Y,GAAM7Y,MAAtB,OAA6B8lB,KAE9BgjB,EAAajwB,GAAOZ,EAAO6N,GAAO8iB,GAC9BmB,IACHD,EAAShkB,IAASxS,OAAO0X,OAAO,GAAInS,IACpCmwB,EAAgB/wB,IACf4wB,EAAWn4B,KAAK,CACf1Q,KAAM,SACNuV,SAAU,SACV0I,OAAQjF,EAAYH,MAAMhU,MAC1B6nB,SAAU,CAAC7T,IACX7X,GAAI8kB,OAGNkjB,EAAgB/wB,IACf4wB,EAAWn4B,KAAK,CACf1Q,KAAM,OACN2sB,OAAQyd,EAAgBvxB,MAAMhU,MAC9B0Q,SAAU,SACV0I,OAAQjF,EAAYH,MAAMhU,QAE5BilC,EAASM,EAAgBppC,IAAMsS,OAAO0X,OAAP1X,OAAA,IAAAA,CAAA,GACzBw2B,EAASM,EAAgBppC,KAC9B6X,MAGDG,EAAYuwB,QAAUO,EAAS9wB,EAAYuwB,SAAWtxB,GACtDq1B,GACCvqB,OACDwqB,EAAiB7rC,QAAQsX,EAAYhY,KACnC8tC,EAAwB,EAAI,GAC9B,EACAhpB,IAEDkjB,EAAgB/wB,IACf4wB,EAAWn4B,KAAK,CAAE1Q,KAAM,UAAWie,OAAQjF,EAAYH,MAAMhU,QACvD,CAAEgkC,aAAY/iB,UAItB,GAAI9M,EAAYw0B,MAAQx0B,EAAYw0B,KAAKiC,WAAY,CACpD,IAAI72B,GAAQ6lB,OAAOzlB,EAAYJ,OAG9BwxB,EAAgBb,UAAYvwB,EAAYuwB,SACxCoE,EAAkB30B,EAAYJ,QAE9BA,IAAgB,GAGjBszB,EAAY7C,KAAKqG,KAAKjR,OAAO7lB,GAAQ,MAIbI,EAAYuwB,QAClCO,EAAS9wB,EAAYuwB,SACrBtxB,GACmBjM,QAAUhB,IAAWE,QAAUF,IAAWE,OAC/DijC,EAAgB,GAChBC,EAAe,IAGhB,IAKIuB,GALEC,GAAe,GACfC,IACJ72B,EAAYuwB,QAAUO,EAAS9wB,EAAYuwB,SAAWtxB,GAAOq1B,IAC9D,GACGwC,GAAgBD,GAAuB3D,GAEvC6D,GAAoBjG,EAAS+F,GAAuB3D,IACpD32B,GAAW,UACVw6B,IAAqBF,GAAuB7rC,QAAUkoC,IAC1D4D,GAAgBD,GAAuBA,GAAuB7rC,OAAS,GACvE+rC,GACCjG,EAAS+F,GAAuBA,GAAuB7rC,OAAS,IACjEuR,GAAW,SAGRw6B,IAAwD,SAAnC,UAAGA,GAAkBxiC,WAC7C68B,EAAgBvxB,MAAMtL,QAAU,OAChCy7B,EAAgB/wB,IACf4wB,EAAWn4B,KAAK,CACf1Q,KAAM,YACNie,OAAQmsB,EAAgBvxB,MAAMhU,MAC9B2kB,WAAY,CAAExpB,KAAM,UAAWuB,MAAO,WAGrCwuC,KACHJ,GACCI,GAAkBlrC,OAClB8lB,YAAcmf,EAAU7xB,EAAMq1B,GAASwC,KAEzC,IAAME,GAAuB,SAACj3B,EAAYC,GACzC,IAAMi3B,EAAgBvmB,EAAc1Q,EAAYnU,OAC1CD,EAAOqT,EAAMgM,eAAe1b,QAAO,SAACsa,GACzC,GAAIA,EAAE5E,OAAQ,CACb,IAAMiyB,EAAaxmB,EAAc7G,EAAE5E,QACnC,GAAe,YAAX4E,EAAE7iB,KAAoB,CACzB,GAAIiwC,EAAcrmB,KACjB,OAAIsmB,EAAW/nC,OAAOzG,QAAQuuC,EAAcrmB,OAAS,EAI/C,GAAIsmB,EAAW/nC,OAAOzG,QAAQuuC,EAAc9nC,SAAW,EAC7D,OAAO,GAIV,OAAO,KAER,SACC,CAACb,IAAK6C,KAAMQ,IAAWhL,OAAQ2H,IAAK8C,UAAUtF,SAC7CiU,EAAWF,MAAM5X,QAElB,CAACqG,IAAKE,QAASF,IAAKC,QAASD,IAAK6C,MAAMrF,SAASkU,EAAY/X,OAG5B,IAA7B+X,EAAYjN,MAAM/H,QAAiBY,EAAKZ,SAMxCY,GAAO,GAmIb,OAlIAupC,EACE5F,OAAO,CAAC6B,IACR7B,OAAO6F,GACP3jB,SAAQ,SAACzF,GACT,IAAInM,EAAQvF,OAAO0X,OAAO,GAAIhG,EAAOnM,OAAS,IAC1CiN,EAAQd,EAAOhkB,GACbmvC,EAAkC,kBAAVrqB,EACxBikB,GAASjkB,GAASqqB,EACpBC,GAAY,EAQhB,GALC,CAAC9oC,IAAKE,QAASF,IAAKC,SAASzC,SAASipC,IACtC/oB,EAAOwpB,WAEP4B,GAAY,GAETA,EAAW,CAgBd,GAfIrG,IACHjkB,EAAQ9e,IAAE+e,YACgB,IAAtBlN,EAAM6pB,cACL7pB,GAASvF,OAAOC,KAAKsF,GAAO7U,QAC/B8kC,EAAajwB,EAAOZ,EAAO6N,EAAO8iB,GAE/B/vB,EAAM7Y,OACT6Y,EAAM7Y,KAAN,UAAgB6Y,EAAM7Y,MAAtB,OAA6B8lB,KAI3BqqB,IACHl4B,EAAMgB,WAAa6M,IAGjBd,EAAOwpB,UACNxpB,EAAOwpB,SAAU,CAAC,IAAD,EAEdrE,EAASC,EAAgBvxB,OAAS,GAClCw3B,EAAsB9jC,KAAKkY,OAChC,UAAAqlB,EAAS9wB,EAAYuwB,gBAArB,eAA+Bj9B,cAAe,MAC7CI,SAEFmM,EAAQ+zB,EAAU,aACjB5nB,SACAhkB,GAAI8kB,EACJ3Z,MAAOg+B,EAAOh+B,MACdC,WAAY+9B,EAAO/9B,YACfqyB,OAAO4R,GAAuB,KAClC5R,OAAOzZ,EAAOpZ,SAAW,GACtB,CACAU,YAAaC,KAAKC,UAAU,CAC3BZ,QAASoZ,EAAOpZ,SAAW,KAG5B,KAIN,GAAIm+B,EAAO,CACV,GAAIf,EAAgB/wB,KAAW2wB,EAC9B,GAAImH,GACH/G,EAAgB/wB,IACfrT,GAAkB,UAAb2Q,GAAuB,UAAY,QAAQ,CAC/CvV,KAAM,SACNuV,YACA0I,OAAQ0xB,GACRjjB,SAAU,CAAC7T,GACX7X,GAAI8kB,QAEA,CACN,IAAMd,EAAS8kB,EAAS9wB,EAAYuwB,SAChCyG,GAAqB5F,EAAiBplB,GACzCsrB,YAAar4B,EAAOY,EAAOiN,EAAO9M,EAAYuwB,SAE9C3kC,GAAkB,UAAb2Q,GAAuB,UAAY,QAAQ,CAC/CvV,KAAM,SACNuV,SAAU,SACV0I,OAAQ+G,EAAOngB,MACf6nB,SAAU,CAAC7T,GACX7X,GAAI8kB,IAMR8pB,GAAal/B,KAAKoV,GAClBgkB,EAAShkB,GAASxS,OAAO0X,OAAO,GAAInS,OAC9B,CACN,GAAImwB,EAAgB/wB,KAAW2wB,EAC9B,GAAImH,GACH/G,EAAgB/wB,IACfrT,GAAkB,UAAb2Q,GAAuB,UAAY,QAAQ,CAC/CvV,KAAM,OACN2sB,OAAQyd,EAAgBvxB,MAAMhU,MAC9B0Q,YACA0I,OAAQ0xB,SAEJ,CACN,IAAM3qB,EAAS8kB,EAAS9wB,EAAYuwB,SAChCyG,GAAqB5F,EAAiBplB,GACzCsrB,YACCr4B,EACAmyB,EAAgBvxB,MAChBuxB,EAAgBppC,GAChBgY,EAAYuwB,SAGbP,EAAgB/wB,IACfrT,GAAkB,UAAb2Q,GAAuB,UAAY,QAAQ,CAC/CvV,KAAM,OACN2sB,OAAQyd,EAAgBvxB,MAAMhU,MAC9B0Q,SAAU,SACV0I,OAAQ+G,EAAOngB,QAMpBilC,EAASM,EAAgBppC,IAAMsS,OAAO0X,OAAP1X,OAAA,IAAAA,CAAA,GACzBw2B,EAASM,EAAgBppC,KAC9B6X,GAGFo1B,EAAOv9B,KAAKoV,OAGf+iB,EAAWn4B,KAAX,MAAAm4B,EAAmBjkC,KAElB,GACCoU,EAAYuwB,QAAUO,EAAS9wB,EAAYuwB,SAAWtxB,GAAOq1B,IAC9D,IACCvqB,OAHF,SAGSmpB,EAAW,GAHpB,OAG0B+B,IACnB,CAAEpF,aAAY/iB,MAAOmoB,GAAUA,EAAOA,EAAOjqC,OAAS,MAoBlDgmC,EAAiB,SAAC94B,EAASyb,EAAQgd,GAE/C,GAAIz4B,EAAQyb,EAAO3rB,MACdkQ,EAAQyb,EAAO4c,UACKr4B,EAAQyb,EAAO4c,SAEpBgH,WACjB5G,EAAYJ,UAAY5c,EAAO4c,SAE/B,OAAO,EAIV,GAAIr4B,EAAQy4B,EAAY3oC,MACnBkQ,EAAQy4B,EAAYJ,UACKr4B,EAAQy4B,EAAYJ,SAEzBgH,WACtB5jB,EAAO4c,UAAYI,EAAYJ,SAE/B,OAAO,EAIV,OAAO,GA2CKlZ,EAAa,SAACzmB,GAC1B,IAAQ3I,EAAsB2I,EAAtB3I,KAAMqL,EAAgB1C,EAAhB0C,YACd,GAAIrL,IAASqG,IAAKoC,OAAS4C,GAER,SADJC,KAAKkY,MAAMnY,GAAe,MAC9B9K,IACT,OAAO,EAGT,OAAO,GAGFgvC,EAAa,SAACxrB,GACnB,IAAMnM,EAAQtM,KAAKkY,MAAMO,EAAO1Y,aAAe,MACzCmkC,EAAiBzrB,EAAO/jB,OAASqG,IAAKoC,MAAQ,GAAK,EACzD,OAAOmP,EAAMjN,SAAW6kC,GAGnBC,EAAU,SAAC1rB,GAChB,MAAI,CAAC1d,IAAKoC,MAAOpC,IAAKqC,MAAM7E,SAASkgB,EAAO/jB,MACpC,CAAE4K,KAAM,IAET,IAGKsF,EAAiB,SAACC,GAC9B,OAAIA,EACI,CACNud,iBAAkBvd,EAAWnR,MAC7B4uB,kBAAmBzd,EAAWwd,YAGzB,IAGK7d,EAA4B,WAKnC,IAAD,EAKA4/B,EATJhhC,EAII,uDAJK,GACTa,EAGI,uCAFJogC,EAEI,uDAFU,GACdC,EACI,uDADO,OAEP5kB,GAAO,EACL6d,EAAW,GACXgH,EAAY,GACZC,EAAW,GA2CjB,GAzCAphC,GACCA,EAAO3L,QACP2L,EAAO8a,SAAQ,SAACjiB,GACf,IAAMwoC,EAAMhqC,IAAE+e,WACRkrB,EAAQ5gB,EAAW7nB,GACzB,GAAI,CAAClB,IAAKoC,MAAOpC,IAAKqC,MAAM7E,SAAS0D,EAAEvH,MACtCgrB,GAAO,EACP0kB,EAAWK,EACXxoC,EAAC,MAAY,GACbA,EAAC,OAAa,YACR,IAAKyjB,EAAM,CACjB,IAAMG,EAAQ0d,EAAS6G,GACnBvkB,GACHA,EAAMrgB,MAAM2E,KAAKsgC,GACjBlH,EAAS6G,GAAT,2BACI7G,EAAS6G,IADb,IAEC5kC,MAAM,YAAKqgB,EAAMrgB,UAGlBkgB,GAAO,EAGLA,IACHA,GAAO,EACHglB,EACHF,EAASrgC,KAAKsgC,GAEdF,EAAUpgC,KAAKsgC,IAGbxoC,EAAEoM,eAAiBpM,EAAEoM,cAAc5Q,SACtCwE,EAAEivB,iBAAkB,GAErBqS,EAASkH,GAAT,uCACIxoC,GADJ,IAECoD,QAAS4kC,EAAWhoC,IACjBkoC,EAAQloC,IAHZ,IAICvH,KAAK,GAAD,OAAKuH,EAAEvH,MAAP,OAAc2vC,QAIjBG,EAAS/sC,OAAQ,CACpB,IAAMgtC,EAAMhqC,IAAE+e,WACRnc,EAAQ,CACbmC,MAAM,GAAD,OAAMglC,GACX9vC,KAAMqG,IAAKqC,KACX1J,MAAO,aAER6wC,EAAUpgC,KAAKsgC,GACflH,EAASkH,GAAT,eAAqBpnC,GAEtB,IAAME,EAAoB,eAAb+mC,EAA4BtlC,IAAIG,WAAaH,IAAIzB,KACxDgH,EAAS,CACdI,QAAQ,gCACNpH,EADK,yBAEL7I,KAAM4vC,EACNhlC,KAAM,IACH2E,GACAW,EAAeX,EAASA,EAAOY,gBAAalF,KAL1C,cAOLX,IAAI1B,UAAY,CAChB5I,KAAMqG,IAAKuC,UACX7J,KAAM,KATD,GAWH8pC,GAEJ/9B,MAAM,GAAD,OAAM+kC,IAEZ,OAAOhgC,GAOR,IAAMogC,EAAW,SAAChyB,EAAKve,GAGtB,GAAIA,IAAcE,IAAWC,KAAM,CAFf,CAAC,WAAY,WAAY,UAAW,WASvCgE,SADhBoa,EALoB,CACnB0F,YAAa,SACbusB,QAAS,MACTC,QAAS,OAEQlyB,IAAQA,KAEzBA,EAAMmyB,EAAgBnyB,IATT,CAAC,QAWJpa,SAASoa,KACnBA,EAAG,YAAQmyB,EAAgBnyB,KAG7B,OAAOA,GAGFoyB,EAAoB,SAACpyB,EAAKve,GAC/B,IAAMsoC,EAAc,CACnBrkB,YAAa,SACbusB,QAAS,MACTC,QAAS,OAEV,GAAIzwC,IAAcE,IAAWC,KAAM,CAClC,IAAMywC,EAAYj+B,OAAOG,OAAOw1B,GAAarmB,WAAU,SAACsL,GAAD,OAAOA,IAAMhP,MACjD,IAAfqyB,IACHryB,EAAM5L,OAAOC,KAAK01B,GAAasI,IAGjC,OAAOryB,GAIR,SAASsyB,EAAaxsB,GACrB,IAAM9B,EAAa,GAMnB,OALAmf,IAAY5X,SAAQ,SAACjiB,GACpB,MAAuBA,EAAfjH,MACFkwC,QADN,MAAgB,GAAhB,GACoB1qC,KAAI,SAACmnB,GAAD,OAAOA,EAAEnqB,cACjCmf,EAAWxS,KAAX,MAAAwS,EAAU,YAASuuB,OAES,UAAtBzsB,EAAOjhB,YAA0Bmf,EAAWpe,SAASkgB,EAAO/jB,MAGpE,SAASioC,EAAe3nC,EAAO2d,GAK9B,OAHI3d,GADW,CAAC,QAAS,QACLuD,SAASoa,KAC5B3d,EAAQA,EAAMqS,QAAQ,KAAM,SAEtBrS,EAGR,IAiEMmwC,EAAkB,SAAC1sB,GAAyB,IAAjB2sB,EAAgB,uDAAP,GACnC3F,EAAU,GACV4F,EAAa,CAClB,QACA,aACA,eACA,cACA,WALkB,mBAMfD,IAWJ,OATAr+B,OAAOC,KAAKyR,GAAQyF,SAAQ,SAACvL,GACvB0yB,EAAc9sC,SAASoa,KACf,SAARA,GAAkB,CAAC,OAAQ,SAASpa,SAASkgB,EAAO9F,IACvD8sB,EAAQ9sB,GAAO8F,EAAM,WAErBgnB,EAAQ9sB,GAAuB,KAAhB8F,EAAO9F,GAAc,KAAO8F,EAAO9F,OAI9C8sB,GAoDF/c,EAAsB,SAAC,GAAiC,IAAD,IAA9B5H,aAA8B,MAAtB,KAAsB,EAAhBjB,EAAgB,EAAhBA,UAC5C,GAAIiB,IAAUjB,GAEC,IADAiB,EAAM3lB,QAAQ,WAE3B,OAAO,EAGT,OAAO,GAqBFmwC,EAAwB,SAAC7xC,EAAMuB,GACpC,IAAMoE,EAAeyH,IAAcpN,GACnC,YAAqBkM,IAAjBvG,GAA8B,UAAGA,KAAH,UAAyBpE,IAM/C60B,EAAc,SAC1Bp2B,EACAuB,EACA4C,EACA2tC,GAEK,IADLC,IACI,yDACEtqB,EAAG,eAAMznB,EAAOuB,GACtB,GAAIwwC,EAAmB,CACtB,IAAMze,EACkB,kBAAhBwe,EACJvlC,KAAKkY,MAAMqtB,GACXA,GAAe,GACnB,GAAI3tC,IAAgB,MAAC+H,EAAW,GAAI,MAAMpH,SAASvD,GAAQ,CAE1D,GAAIswC,EAAsB7xC,EAAMuB,GAE/B,cADO+xB,EAAOtzB,GACP,eAAGmE,EAAcoI,KAAKC,UAAL,eAAoB8mB,KAE7C,IAAM0e,EAAI,eAAMhyC,EAAN,UAAgBuB,IAC1B,OAAO,eAAG4C,EAAcoI,KAAKC,UAAL,2BAAoB8mB,GAAW0e,KACjD,GAAI7tC,KAAiB5C,GAAmB,KAAVA,GAEpC,cADO+xB,EAAOtzB,GACP,eAAGmE,EAAcoI,KAAKC,UAAL,eAAoB8mB,KAG9C,MAAa,cAATtzB,IAAkC,IAAVuB,EACpB,CAAEkL,eAAWP,GAEdub,GAGKyS,EAAmB,SAC/Bt1B,EACA5E,EACAmE,EACAwB,GAEK,IADLosC,IACI,yDACJ,GAAIA,GAAqB5tC,EAAa,CACrC,GAAIS,EAAKT,GAAc,CACtB,IAAMyF,EAAQ2C,KAAKkY,MAAM7f,EAAKT,IAC9B,MAAO,MAAC+H,EAAW,MAAMpH,SAAS8E,EAAM5J,IACrC2F,EACAiE,EAAM5J,GAEV,OAAO2F,GAAgB,KAExB,MAAO,MAACuG,EAAW,MAAMpH,SAASF,EAAK5E,IAAS2F,EAAef,EAAK5E,IAgD/DqxC,EAAkB,SAAChyC,GAA8B,IAAtB4yC,EAAqB,uDAAR,IAC7C,OAAO5yC,EAAOuU,QAAQ,UAAU,SAACiP,GAAD,OAAOovB,EAAapvB,EAAE8B,kBAGjDmF,EAAkB,SAACzqB,GACxB,OAAOA,EAAOuU,QAAQ,aAAa,SAAUs+B,GAC5C,OAAOA,EAAE,GAAG7F,kBAIR8F,EAAiB,SAACvoC,EAAOrI,GAC9B,IAAM44B,EAAa/sB,IAAcxD,GACjC,SAAI,EAAC,GAAM,GAAO9E,SAASq1B,IAAe,UAAG54B,KAAH,UAAkB44B,KA0BvDzQ,EAAgB,SAACzL,GAAuB,IAEvCm0B,EAAcn0B,EAAOoL,MAAM,KAC3BrlB,EAASouC,EAAYpuC,OACvBmE,EAASnE,EAAS,EAAIouC,EAAYpuC,EAAS,GAAKouC,EAAYpuC,EAAS,GACrE4lB,EAAO5lB,EAAS,EAAIouC,EAAYpuC,EAAS,QAAKkI,EAClD,MAAO,CAAE/D,SAAQyhB,SA+CZ8F,EAAuB,SAAC,GAMvB,IAAD,EALL5c,EAKK,EALLA,KACAnD,EAIK,EAJLA,OAGAuU,GACK,EAHLwlB,SAGK,EAFL9lB,aAEK,EADLM,WAEQwI,EAAa5Z,EAAb4Z,SAOF2lB,EAAqB,SAACp9B,EAAStF,EAAQxH,EAAQmqC,GACpD,IACI1oC,EAziBa2oC,EAAaC,EAwiB1BxtB,EAAS,GAEb,GAAI/P,EAAS,CAAC,IAAD,IACZ,EAAgCA,EAAQuU,YAAc,GAA9CvoB,EAAR,EAAQA,KAASuoB,EAAjB,kBACuC,IAAnCvU,EAAQjV,KAAK0B,QAAQ,WACxBkI,EAAQ+F,EAAOvH,MAAK,SAACI,GAAD,OAAOA,EAAExI,OAASwpB,EAAWxpB,SAElD,IAAM6Y,EAAQ,GACdvF,OAAOC,KAAKiW,GAAYziB,KAAI,SAACmY,GAC5B,IAAIuzB,EAAOvzB,EACe,IAAtBA,EAAIxd,QAAQ,QACf+wC,EAAOvzB,EAAIvd,UAAU,IAEtBkX,EAAMy4B,EAAkBxnB,EAAgB2oB,GAAO5xC,IAAWC,OACzD0oB,EAAWtK,MAGb,IAAM0F,GAzjBU2tB,GA0jBV,QAAL,EAAA3oC,SAAA,eAAOqU,UAAP,UAAiBrU,SAAjB,aAAiB,EAAOgb,aA1jBI4tB,EA2jB5BhpB,EAAWvL,OA1jBPs0B,GAAeC,GA4jBpBxtB,EAAM,mDACFnM,GADE,IAELjN,QAAS6yB,OAAOjV,EAAW5d,SAAW,IA7BlB,SAAC4d,EAAYrhB,EAAQmqC,EAAUI,GAErD,MADgB,CAAE1yC,KAAMwpB,EAAWxpB,MA6B9B2yC,CAAenpB,EAAYrhB,EAAQmqC,EAAUr9B,EAAQjV,OApEpC,SAACA,EAAM4J,EAAO9F,GACrC,IAAIC,EACA9C,EAQJ,OAPI2I,GACH7F,EAAa6F,EAAM3I,KAAK0jB,cACxB1jB,EAAOjB,IAEP+D,EAAa/D,EACbiB,EAAO6C,IAAyB,UAAT9D,OAAmBkM,EAAYlM,IAEhD,CACN+D,WAAY6uC,IAAc7uC,IAAeA,EACzC9C,KAAM2xC,IAAc3xC,IAASA,GAyDxB4xC,CAAgB59B,EAAQjV,KAAM4J,EAAO3I,IArD3B,SAACuoB,EAAY5f,GAC7B,OAAI4f,EAAWvpB,MACP,CAAEA,MAAOupB,EAAWvpB,QAE5B,OAAI2J,QAAJ,IAAIA,OAAJ,EAAIA,EAAOoV,OACH,CAAE8zB,UAAWlpC,EAAMoV,OAEvBwK,EAAWxpB,KACP,CAAE8yC,UAAWzB,EAAgB7nB,EAAWxpB,KAAM,MAE/C,GA4CD+yC,CAASvpB,EAAY5f,IAErBgb,IACHI,EAAOJ,YAAcA,GAGrB3P,EAAQjV,OACPiV,EAAQjV,KAAK0B,QAAQ4F,IAAKoC,QAAU,GACpC,CAACpC,IAAKE,QAASF,IAAKC,SAASzC,SAASmQ,EAAQjV,SAE/CglB,EAAOpZ,QAAU6yB,OAAOjV,EAAW5d,SAAW,IAC9CoZ,EAAOnZ,KAAO,GACdmZ,EAAOhZ,OAAS,OAChBgZ,EAAOjhB,WACU,UAAhBihB,EAAO/jB,OAAmC,IAAf+jB,EAAOxjB,IAC/B8F,IAAKqC,KACLqb,EAAOjhB,YAAcihB,EAAO/jB,MAGlC,MAAO,CAAE+jB,SAAQpb,UAGZopC,EAAiB,SAAC/9B,GACvB,OAAOA,EAAQjV,MAiEhB,EA/D0B,SAApBizC,IAAwD,IAAnCvmB,EAAkC,uDAAvB,GAAI/c,EAAmB,uCACtDujC,EAAU,CAAC,cACbpJ,EAAW,GACTwI,EAAW,GACX9sB,EAAY,GAwDlB,OAvDAkH,EAASjC,SAAQ,SAACxV,GACjB,KAAIA,EAAQuU,YAA+C,SAAjC,UAAGvU,EAAQuU,WAAWwG,SAG3CkjB,EAAQpuC,SAASmQ,EAAQjV,OAA0B,UAAjBiV,EAAQhU,KAAkB,CAChE,IAAM+vC,EAAMhqC,IAAE+e,WACd,EAA0BssB,EACzBp9B,EACAtF,GAFOqV,EAAR,EAAQA,OAAQpb,EAAhB,EAAgBA,MAahB,GAPIA,GACH4b,EAAU9U,KAAK9G,GAEhB0oC,EAAS5hC,KAAKsgC,GACV/7B,EAAQjV,MAAQiV,EAAQjV,KAAK0B,QAAQ4F,IAAKoC,QAAU,IACvDsb,EAAOjZ,MAAQ,IAEZkJ,EAAQyX,UAA6B,UAAjBzX,EAAQjV,KAAkB,CACjD,IAAM+L,EAAQknC,EACbh+B,EAAQyX,SACR/c,EACAsF,EAAQuU,YAETsgB,EAAQ,2BAAQA,GAAa/9B,EAAM+9B,UACnC9kB,EAAOjZ,MAAP,YAAmBA,EAAMumC,UACzB9sB,EAAU9U,KAAV,MAAA8U,EAAS,YAASzZ,EAAMyZ,YAEzB,GAAIvQ,EAAQyX,UAA6B,UAAjBzX,EAAQjV,KAAkB,CAEjD,IAAMiB,EAAO+xC,EAAe/9B,EAAQyX,SAAS,IACzCzrB,IACH+jB,EAAO/jB,KAAOA,EACd+jB,EAAO0H,SAAWzX,EAAQyX,UAI5B,GAAI1H,EAAOhlB,MACIkkB,GAAa,IAAI3b,QAC9B,SAACgjB,GAAD,OAAUA,EAAK3hB,QAAUob,EAAOhlB,QAE5ByqB,SAAQ,SAACc,GACT,CAAC,gBAAgBzmB,SAASymB,EAAKvrB,MAClCglB,EAAOuG,EAAKvrB,MAAQurB,EAAKhqB,MAEzByjB,EACCssB,EAAkBxnB,EAAgByB,EAAKvrB,MAAOa,IAAWC,OACtDyqB,EAAKhqB,SAIZuoC,EAASkH,GAAT,eAAqBhsB,OAGhB,CAAE8kB,WAAUwI,WAAU9sB,aAGYytB,CAAkBvmB,EAAU/c,GAA9D2iC,EAAR,EAAQA,SAAUxI,EAAlB,EAAkBA,SAAUtkB,EAA5B,EAA4BA,UACtB1b,EAAOggC,EAASwI,EAAS,IACzBvmC,EAAQjC,EAAKiC,OAAS,GAmB5B,cAlBO+9B,EAASwI,EAAS,IACV,CACdphC,QAAQ,gCACN3F,IAAIzB,KADC,yBAEL7I,KAAMqG,IAAKwC,KACX+B,KAAM,IACH/B,GAJE,IAKLiC,WAAOG,KALF,cAOLX,IAAI1B,UAAY,CAChB5I,KAAMqG,IAAKuC,UACX7J,KAAM,KATD,GAWH8pC,GAEJ/9B,QACAyZ,cAuDI2tB,EAAuB,SAAC/tB,GAQ7B,OAPsB7Y,KAAKkY,MAC1BS,IAAQC,SAASC,EAAK,CACrBC,SAAS,EACTC,qBAAqB,KAGKoH,SAAS,GAAGA,UAalC,IAAMyR,EAA2B,SAAC,GAAyB,IAAvBn+B,EAAsB,EAAtBA,KAAM2Q,EAAgB,EAAhBA,UAC1CrR,EAVP,SAAsB0E,GAIrB,IAHA,IAAMovC,EACL,iEACGxgC,EAAS,GACJ3L,EAAIjD,EAAQiD,EAAI,IAAKA,EAC7B2L,GAAUwgC,EAAM/J,KAAKgK,MAAMhK,KAAKiK,SAAWF,EAAMpvC,SAClD,OAAO4O,EAIM2gC,CAAa,GAC1B,MAAM,UAAN,OAAiBj0C,EAAjB,YAAyBqR,EAAzB,YAAsC3Q,IAGhC,SAAS2zB,EAAuByY,GAAsC,IAAjCoH,EAAgC,wDAAhBC,EAAgB,wDAC3E,GAAKrH,EAAL,CACA,GAAIqH,EACH,MAAM,gBAAN,OAAuBrH,EAAIpsC,KAA3B,YAAmCwzC,EAAS,OAAS,QAEtD,IAAMzyB,EAASqrB,EAAI/iB,MAAM,KACnBqqB,EAAc3yB,EAAOA,EAAO/c,OAAS,GAC3C,GAAK0vC,EAAL,CACA,IAAMC,EAAWC,IAAUF,GAC3B,MAAM,GAAN,OAAUC,EAAShvB,cAAnB,YAAoC6uB,EAAS,OAAS,UAGxC,KACd9e,kBACA1T,YACAqO,WAppBD,SAAoBwkB,EAAWC,GAC9B,OAAOC,IAAOF,IAopBdG,eA3lBsB,SAACn7B,GAAmC,IAA5B84B,EAA2B,uDAAlB,GAAIhxC,EAAc,uCACnD2L,EAAc,GACdslC,EAAa,CAClB,UACA,OACA,WACA,QACA,QACA,aACA,SACA,OACA,cACA,eACA,eACA,UACA,YACA,YACA,eACA,aACA,aAjBkB,mBAkBfD,IAmCJ,GAjCyB,UAArB94B,EAAM9U,YACT6tC,EAAclhC,KAAK,cAAe,aAAc,UAEjD4C,OAAOC,KAAKsF,GAAO4R,SAAQ,SAACvL,GAC3B,IAAK0yB,EAAc9sC,SAASoa,IAAuB,KAAfrG,EAAMqG,GAAa,CACtD,IAAI+M,GAAO,EACPtrB,IAAcE,IAAWC,MAAQqxC,EAAejzB,EAAKrG,EAAMqG,MAC9D+M,GAAO,GAEJA,IACS,cAAR/M,EACH5S,EAAW,KAAWuM,EAAMqG,GAE5B5S,EAAY4kC,EAAShyB,EAAKve,IAAcuoC,EACvCrwB,EAAMqG,GACNA,QAODrG,EAAM5X,OAASqG,IAAK4C,cACG,kBAAf2O,EAAM/F,OAChBxG,EAAYwG,KAAO+F,EAAM/F,KAAK9S,OAG5B6Y,EAAMo7B,cAAgBzC,EAAa34B,MACtCvM,EAAW,KAAWuM,EAAM5X,MAEzB4X,EAAM5X,OAASqG,IAAK2C,eACvBqC,EAAW,KAAWuM,EAAMjP,OAEzB0C,EAAYtM,KAAM,CAErB,IAAMk0C,EAAc5nC,EAAYtM,KAAK0B,QAAQ,MACxB,IAAjBwyC,IACH5nC,EAAYtM,KAAOsM,EAAYtM,KAAK2B,UAAU,EAAGuyC,IAGnD,OAAO5nC,GA8hBP+hB,qBArgB4B,SAAvBA,IAMA,IALLtiB,EAKI,uDALI,GACRmF,EAII,uCAHJijC,EAGI,uDAHc,GAClBC,EAEI,wDADJC,EACI,uDADO,EAEL1kC,EAAS,GAuCf,OAtCA5D,EAAM0e,SAAQ,SAACpiB,GACd,GAAI6I,EAAQ7I,GAAO,CAClB,IAAI2jC,EAAO,eAAQ96B,EAAQ7I,IACrBspC,EAAS,GACf,IAAK,CAAC,aAAc,QAAQ7sC,SAASknC,EAAQ/qC,QACxC+qC,EAAQ/qC,OAASqG,IAAKqC,OACC,kBAAfqiC,EAAQhrC,WACXgrC,EAAQhrC,GAEU,UAAtBgrC,EAAQv/B,kBACJu/B,EAAQv/B,UAEZ2nC,IACHpI,EAAQqI,SAAWA,EACnBA,KAE0B,WAAvBrI,EAAQjoC,YACX4tC,EAAOjhC,KAAK,SAEbf,EAAOe,KAAP,2BACIghC,EAAgB1F,EAAS2F,IACzBwC,KAGDnI,EAAQjgC,OAASigC,EAAQjgC,MAAM/H,QAAQ,CAC1C,IAAMq+B,EAAchU,EACnB2d,EAAQjgC,MACRmF,EACAijC,EACAC,EACAC,GAED1kC,EAAOe,KAAP,MAAAf,EAAM,YAAS0yB,EAAY1yB,SAC3B0kC,EAAWhS,EAAYgS,cAKpB,CAAE1kC,SAAQ0kC,aAwdjBplB,sBACAR,kBA5cyB,SAAC3kB,GAAuB,IAAjB6nC,EAAgB,uDAAP,GACnC2C,EAAM,CAAI,OAAQ,OAAQ,SAApB,mBAAgC3C,IACtCnxC,EAAa,GAMnB,OALA8S,OAAOC,KAAKzJ,GAAM2gB,SAAQ,SAACvL,GACrBo1B,EAAOxvC,SAASoa,KACpB1e,EAAW0e,GAAqB,KAAdpV,EAAKoV,GAAc,KAAOpV,EAAKoV,OAG5C1e,GAqcPotB,qBAhY4B,SAACjtB,GAC7B,OAAQA,GACP,KAAKE,IAAWE,OACf,MAAO,CAAEwzC,UAAW,SACrB,KAAK1zC,IAAWC,KACf,MAAO,CAAEiZ,MAAO,SAEjB,QACC,MAAO,KAyXTy6B,aArXoB,SAACC,GACrB,GAAIA,EAAS,CACZ,MAA0BA,EAAlB/nB,gBAAR,MAAmB,GAAnB,EACA,GAAIA,EAAS,GACZ,OAAOA,EAAS,GAAGA,UAAY,GAGjC,MAAO,IA+WPuc,YAAaiI,EACbhI,iBACAwL,gBA9WuB,SAACC,GACxB,OAAOA,EAAUpsC,QAAO,SAAC0M,GAAD,MAA2C,MAA9BA,EAAQuU,WAAWvL,WA8WxD22B,yBA3WgC,SAACxvB,GACjC,MAA0BA,EAAlBsH,SACR,YADA,MAAmB,GAAnB,GACgB,GAAGlD,YAAc,IA0WjCqrB,oBAvW2B,SAACF,EAAWG,GACvC,IAAMl8B,EAAQ+7B,EAAU/xB,WACvB,SAAC3N,GAAD,MAA2C,MAA9BA,EAAQuU,WAAWvL,UAE3B82B,GAAyB,IAAXn8B,EAAe,EAAIA,EACjCo8B,GAAoB,IAAXp8B,EAAe,EAAI,EAMlC,OALItF,OAAOC,KAAKuhC,GAAW9wC,OAC1B2wC,EAAU5xB,OAAOgyB,EAAaC,EAA9B,eAA2CF,KACtB,IAAXl8B,GACV+7B,EAAU5xB,OAAOnK,EAAO,GAElB+7B,GA6VPtD,kBACAvnB,kBACAmrB,yBA9zBgC,SAA3BA,EAA4BvoB,EAAUhjB,EAAOsb,EAAQkwB,GAC1D,IAAMtrC,EAAQob,EAAOnM,OAASmM,GAAU,GACpCiH,GAAO,EA+BX,OA9BCS,GAAY,IAAIjC,SAAQ,SAACxV,GACzB,GAAIA,EAAQyX,SAAU,CACrB,GACCzX,EAAQuU,YACR9f,GACAuL,EAAQuU,WAAWxpB,OAAS0J,EAAM1J,KACjC,CACD,IAAMqI,EAAO4M,EAAQyX,SAASwoB,GAE7B7sC,GACAA,EAAKmhB,YACL5f,GACAvB,EAAKmhB,WAAWxpB,OAAS4J,EAAM5J,OAE/BisB,GAAO,GAGT,IAAKA,GAAQhX,EAAQyX,UAAYzX,EAAQyX,SAAS1oB,QAOlC,IANAixC,EACdhgC,EAAQyX,SACRhjB,EACAsb,EACAkwB,KAGAjpB,GAAO,OAKJA,GA8xBP0f,cA32BqB,SAACr/B,EAAa6oC,GACnC,IACIrxC,EACHwI,EAAY2nC,eACgB,IAA5B3nC,EAAYo2B,aACe,UAA3Bp2B,EAAYvI,WACT,QACAuI,EAAYrL,KACZqL,EAAYrL,KAAK0jB,cACjBwwB,EAIJ,OAHArxC,EATiB,CAAC,SAAU,QAAS,UASpBgB,SAASwH,EAAYvI,YACnCuI,EAAYvI,WACZD,GAg2BHquC,iBACAiD,qBA7U4B,SAAC/M,GAK7B,OAJuB,eACrB/gC,IAAK4C,aAAe,QAEYm+B,IAChB,QAyUlBgN,YAtUmB,SAACp3B,EAAQq3B,EAAaC,GAEzC,IAAMnD,EAAcn0B,EAAOoL,MAAM,KACjC,OAAIksB,EACCnD,EAAYmD,KAAWD,EAKrBr3B,IAAWq3B,GA8TlB5rB,gBACAvW,SAnTgB,SAACvO,EAAM+uC,GACvB,IAAI7gC,EAAOlO,EAAKwD,MAAK,SAAC8lB,GAAD,OAAsB,IAAfA,EAAE/H,YAC1BrC,EAAclf,EAAKwD,MACtB,SAAC8lB,GAAD,OAAsB,IAAfA,EAAE/H,WAAqC,IAAhB+H,EAAE9H,aAKjC,MAAO,CACNtT,KAAMA,GAAQgR,EACdA,cACAF,aANoBhf,EAAKwD,MACzB,SAAC8lB,GAAD,OAAuB,IAAhBA,EAAE9H,WAAsB8H,EAAE7G,QAAF,iBAAsBssB,QA8StD7uB,wBA/G+B,SAAC,GAM1B,IALNhS,EAKK,EALLA,KACAnD,EAIK,EAJLA,OAIK,IAHL+5B,gBAGK,SAFL9lB,EAEK,EAFLA,aACAM,EACK,EADLA,UAEQwI,EAAangB,KAAKkY,MACzBS,IAAQC,SAASrS,EAAKsS,IAAK,CAC1BC,SAAS,EACTC,qBAAqB,KAHfoH,SAMR,OAAOgD,EAAqB,CAC3B5c,KAAM,CAAE4Z,YACR/c,SACA+5B,WACA9lB,eACAM,eA8FDwL,uBACA8lB,cA3FqB,SAAC1kC,EAAQ2kC,GAC9B,IAAM7wC,EAAO,GACLsM,EAAYJ,EAAZI,QACFwkC,EAAQvC,EAAqBsC,GAC7BtyC,EAAamQ,OAAOG,OAAOvC,GAC3B66B,EAAYz4B,OAAOC,KAAKrC,GAoB9B,OAnBAwkC,EAAMjrB,SAAQ,SAACuF,GACd,MAA0BA,EAAlBtD,SACFipB,QADN,MAAmB,GAAnB,GAC6B,GAC7B,GAAIA,GAAeA,EAAYnsB,YAAmC,SAArBmsB,EAAY31C,KAAiB,CACzE,IAAM2sB,EAASjD,EAAcisB,EAAYnsB,WAAWmD,QACpD,GAAIA,EAAO/C,KAAM,CAChB,IAAMhR,EAAQ+T,EAAO/C,KAClBzmB,EAAWyf,WACX,SAACkd,GAAD,MAAO,UAAGA,EAAE7+B,KAAL,mBAAoB6+B,EAAE9/B,KAAtB,QAAmC2sB,EAAO/C,QAEjDzmB,EAAWyf,WACX,SAACkd,GAAD,MAAO,UAAGA,EAAE7+B,KAAL,mBAAoB6+B,EAAE9/B,KAAtB,QAAmC2sB,EAAOxkB,UAEhD4jC,EAAUnzB,IACbhU,EAAK8L,KAAKq7B,EAAUnzB,SAKjBhU,GAmEP+uB,yBACAtD,e,kNClqDKulB,EACS,EADTA,EAEK,GAFLA,EAGa,EAGbpF,EAAa,SAACqF,EAAKC,GACxB,IAAMxpC,EAAcupC,EAAIvpC,YAAcC,KAAKkY,MAAMoxB,EAAIvpC,aAAe,GACpE,OAAIA,EAAYV,QACR6yB,OAAOnyB,EAAYV,SAEnB6yB,OAAOqX,IAAmBD,EAAIjqC,SAAWgqC,GA8LrCG,EAAgB,SAAC,GAAD,IAAGt9B,EAAH,EAAGA,UAAWI,EAAd,EAAcA,MAAOiD,EAArB,EAAqBA,SAAayI,EAAlC,wBAC5B,uCACC9L,UAAWC,IACVD,EACAI,EAAMhN,KAAN,yBAA+BgN,EAAMhN,MAAS,KAE3C0Y,GAEHzI,IAII,SAASk6B,IACf,MAA8Cr8B,IAAMG,UAAS,kBAAM,QAAnE,mBAAOm8B,EAAP,KAAwBC,EAAxB,KAQA,OANAv8B,IAAMrB,WAAU,WACf,wCAAmBzH,MAAK,SAACslC,GAAD,OACvBD,GAAmB,kBAAMC,EAAOC,gBAE/B,IAEIH,EAsIOx4B,IAhIf,SAAc3d,GAAQ,IAAD,IACdm2C,EAAkBD,IACxB,EAEIn+B,cADHI,MAAkB6xB,EADnB,EACU54B,QAAmBgH,EAD7B,EAC6BA,mBAAoBkyB,EADjD,EACiDA,gBAE3CiM,EAC0B,kBAA/B,OAAOjM,QAAP,IAAOA,OAAP,EAAOA,EAAiBppC,KACxB,CAAC,cAAe,gBAAgB8D,SAAhC,OAAyCslC,QAAzC,IAAyCA,GAAzC,UAAyCA,EAAiBvxB,aAA1D,aAAyC,EAAwB9U,iBAC9DmI,EACAK,KAAKkY,OAAqB,OAAf2lB,QAAe,IAAfA,GAAA,UAAAA,EAAiBvxB,aAAjB,eAAwBvM,cAAe,MAAMV,QACpD6M,EAAkD3Y,EAAlD2Y,UAAW1M,EAAuCjM,EAAvCiM,MAAnB,EAA0DjM,EAAhC+Y,aAA1B,MAAkC,GAAlC,EAAsC0wB,EAAoBzpC,EAApBypC,QAAS5xB,EAAW7X,EAAX6X,OAC3CzG,EAA0B,gBAAhBpR,EAAMgE,MAA0BoU,EAAqB4xB,EAC7Dx9B,EAAcC,KAAKkY,MAAM5L,EAAMvM,aAAe,MAC9CgqC,EAAW7X,OAAO5lB,EAAMhN,MAAQ,GAChC0qC,EAAqB,EAAXD,EAAe,EACzBE,EAAgB39B,EAAM7M,SAAWhB,IAAWC,MAE5CwrC,EAAc9+B,EAAS,EAAI,EAE3B++B,GAAY,KAHU,IAAZH,EAAgB,EAAIA,EAAU,EAAI,GAGhBE,KADpBF,EAAU,GAAK,GAEvB7pC,EAAQ,OAAGJ,QAAH,IAAGA,OAAH,EAAGA,EAAaI,SACxBuuB,EAAOthB,IAAMiY,SAAQ,WAC1B,IAAIgc,EAAa,EAIjB,OAtOkB,SACnB7hC,GAKK,IAJL8R,EAII,uDAJG+3B,EACPY,EAGI,uCAFJV,EAEI,uCADJO,EACI,uCACElrC,EAAO,GACPwrC,EAAmB,IAAT94B,GAAc24B,EACxBF,EAAWK,EAAUf,EAAoB/3B,EACzC+4B,EAAkBd,GAAkBF,EACtC9gB,EAAM,GACN+hB,EAAO,EAELC,EAAiB,SAAClrC,GACvB,OAAO6yB,OAAO7yB,IAGf,IAAKG,EAAM/H,OAAQ,CAKlB,IAJA,IAAI+yC,EAAgBT,EACdxhB,EAAM,GACNkiB,EAAQ,CAAEh2C,GAAI,EAAG8J,WAAW,GAE3BisC,EAAgB,GAAG,CACzBjiB,EAAIpkB,KAAKsmC,GACT,IAAMprC,EAAU+qC,EACbL,EACAS,EAAgBH,EAChBG,EACAH,EACH9hB,EAAIpkB,KAAK,CACR1P,GAAI,EACJi2C,OAAO,EACPC,YAAY,EACZtrC,QAAS6yB,OAAO7yB,MAEjBmrC,GAAiBnrC,IACI,GACpBkpB,EAAIpkB,KAAKsmC,GAIX,MAAO,CAACliB,GA8BT,IA3BA,IAAM4C,EAAS,WAAsC,IAAD,yDAAP,GAA3BrvB,EAAkC,EAAlCA,KAAkC,IAA5BwN,gBAA4B,SACnD,GAAIA,EAEH,IADA,IAAIshC,EAAcb,GAAYO,EAAOC,EAAezuC,EAAKuD,UAClDurC,EAAc,GAChBA,GAAed,GAA6BO,GAC/C9hB,EAAIpkB,KAAK,CACR1P,GAAI,EACJi2C,OAAO,EACPrrC,QAASyqC,GAA6BO,IAGvC9hB,EAAIpkB,KAAK,CACR1P,GAAI,EACJi2C,OAAO,EACPrrC,QAASurC,IAGXA,GAAed,GAA6BO,EAG9CzrC,EAAKuF,KAAKokB,GACVA,EAAM,GACN+hB,EAAO,GAGFO,EAAU,SAAC/uC,GAAD,OAAUysB,EAAIpkB,KAAKrI,IAE1BpB,EAAI,EAAGA,EAAI8E,EAAM/H,OAAQiD,IAAK,CACtC,IAAMoB,EAAOiL,OAAO0X,OACnBjf,EAAM9E,GACN0vC,EACG,CAAE/qC,QAASgqC,GACX,CAAEhqC,QAASkrC,EAAetG,EAAWzkC,EAAM9E,GAAI6uC,MAEnD,EAAsDztC,EAA9CuD,QAASc,OAAjB,MAA4BkpC,EAA5B,EACM1G,EAAajoC,IAAM8E,EAAM/H,OAAS,EAaxC,IAZA6yC,GAAQC,EAAepqC,IACZ4pC,GACV5e,EAAO,CAAErvB,OAAMwN,UAAU,IACzBghC,EAAOnqC,EACP0qC,EAAQ/uC,IACEwuC,IAASP,GACnBxhB,EAAIpkB,KAAKrI,GACTqvB,EAAO,CAAErvB,UAETysB,EAAIpkB,KAAKrI,GAGN6mC,GAAcpa,EAAI9wB,OAAQ,CAM7B,IALA,IAAMqzC,EAAeviB,EAAIqR,QACxB,SAAC9pB,EAAD,WAAUzQ,QAAV,OAAgDyQ,QAAhD,MAAoBu5B,EAApB,KACA,GAEG0B,EAAahB,EAAWe,EACrBC,EAAa,GACfA,IAAejB,GAA6BO,GAC/C9hB,EAAIpkB,KAAK,CACR1P,GAAI,EACJi2C,OAAO,EACPrrC,QAAS0rC,IAGVxiB,EAAIpkB,KAAK,CACR1P,GAAI,EACJi2C,OAAO,EACPrrC,QAAS6yB,OAAO4X,GAA6BO,KAG/CU,GAAcjB,GAA6BO,EAE5CzrC,EAAKuF,KAAKokB,IAKZ,IADA,IAAMyiB,EAAW,GACRtwC,EAAI,EAAGA,EAAIkE,EAAKnH,OAAQiD,IAAK,CAAC,IAAD,EAC/B6tB,EAAM3pB,EAAKlE,GACXuwC,GAAa,CAAClwC,IAAKE,QAASF,IAAKC,SAASzC,SAA7B,UAAsCgwB,EAAI,UAA1C,aAAsC,EAAQ7zB,MAC3Dw2C,EAAQ,GACRC,EAAS,GACTC,EAAU,SAACC,GAAD,IAAOv3B,EAAP,uDAAiB,CAAEvV,WAAW,GAA9B,OACf8sC,EAAKlnC,KAAL,aACC1P,GAAI,EACJ4K,QAAS,GACNyU,KAELs3B,EAAQF,GAERD,GACCG,EAAQD,EAAQ,CACfhK,eAAgB8C,EAAW1b,EAAI,GAAIghB,GACnChrC,WAAW,IAGb,IAAK,IAAI+sC,EAAI,EAAGA,EAAI/iB,EAAI9wB,OAAQ6zC,IAAK,CACpC,IAAMhC,EAAM/gB,EAAI+iB,GACVjsC,EAAU4kC,EAAWqF,EAAKC,GAChC6B,EAAQD,EAAQ7B,GAEhB2B,GACCG,EAAQD,EAAQ,CAAEhK,eAAgB9hC,EAASd,WAAW,IAExD,GAAIgqB,EAAI9wB,OAEP,IADA,IAAI8zC,EAAYxB,EACTwB,EAAY,GAClBH,EAAQF,EAAO,CACdR,OAAO,EACPrrC,QAAS6yB,OACRqZ,IAAczB,GAA6BO,GACxCkB,EACAzB,GAA6BO,KAGlCe,EAAQF,EAAO,CACd/J,eAAgBjP,OAAOmY,GACvB9rC,WAAW,IAEZgtC,GAAazB,GAA6BO,EAI5CY,EAAYD,EAAS7mC,KAAK+mC,GAASF,EAAS7mC,KAAK,IACjD6mC,EAAS7mC,KAAKgnC,GAEVzwC,IAAMkE,EAAKnH,OAAS,GACvBuzC,EAAS7mC,KAAK+mC,GAGhB,OAAOF,EAyDCQ,CAHQhsC,EAAMhF,KAAI,SAACqiC,GAAD,OACxB91B,OAAO0X,OAAO,GAAI9Z,EAAQk4B,IAAM,GAAI,CAAEpoC,GAAIooC,OAI1CkN,EACAE,EACA9pC,EACA2pC,GACCtvC,KAAI,SAACwvC,EAAShI,GACf,IAAIsI,EAAO,EACX,OAAON,EAAQxvC,KAAI,SAACixC,GACnB,IAAIzI,EAAcsH,EAElB,OADAA,GAAQmB,EAAEltC,UAAY,EAAI2zB,OAAOuZ,EAAEpsC,SAAW,GACvC,2BAAKosC,GAAZ,IAAezJ,WAAUgB,cAAa3B,WAAYA,cAGlD,CACF7hC,EACAmF,EACAolC,EACAE,EACA9pC,EACA2pC,IAGK4B,EAAWhd,EAAKkL,QAAO,SAAC+R,EAAKpjB,GAAN,OAAcojB,EAAI3P,OAAOzT,KAAM,IAC5D,OACC,kBAACihB,EAAD,CAAqBl9B,QAAOJ,aAC3B,2BAAO0/B,YAAY,IAAIC,YAAY,KACjCzgC,GACA,kCACE6+B,EACA,yBAAKz8B,MAAO,SAEZ,IAAIlT,MAAM0vC,GACRzvC,KAAK,GACLC,KAAI,SAAC8uC,EAAK5uC,GAAN,OACJ,yBACCiY,IAAKjY,EACL8S,MAAK,UAAK9S,EAAI,IAAM,EAAIyvC,EAAWD,EAA9B,WAMX,+BACExb,EAAKl0B,KAAI,SAAC8E,EAAM0iC,GAAP,OACT,wBACC91B,UAAW81B,EAAW,IAAM,EAAI,YAAc,WAC9CrvB,IAAKqvB,GAEJ1iC,EAAK9E,KACL,WASCE,GACK,IARJjG,EAQG,EARHA,GACA4K,EAOG,EAPHA,QACYysC,EAMT,EANHzK,WACA2B,EAKG,EALHA,YACAzkC,EAIG,EAJHA,UACA4iC,EAGG,EAHHA,eAID,OACC,wBACCj1B,UAAW3N,EAAY,YAAc,GACrCoU,IAAKle,GAAU,GAAKA,EAAKq3C,EACzBzsC,QAASA,EAAU,EAAc,EAAVA,EAAc,EAAIA,GAExCqqC,GACA,kBAACA,EAAD,CACCt+B,OAAQA,EACR61B,KAAM,CACL8K,YAAahxB,QAAQxc,GACrBc,UACAkpB,IAAKyZ,EACLsH,IAAK5uC,EACLuoC,SAAUD,EACVpkC,KAAM8sC,EACN57B,MAAOk6B,EACP7I,eAAgBA,GAEjBnE,QAASA,EACTrqB,IAAKle,GAAU,GAAKA,EAAKq3C,EACzBr3C,GAAIA,EACJ4X,MAAOy/B,EACPE,aAAc1/B,EAAMhN,KACpB/H,MAAOhE,EAAMgE,MACbqU,UAAWrY,EAAMqY,UACjBqgC,UAAW14C,EAAM04C,yB,qICzSf7+B,QAAMC,MAvCrB,YAAwE,IAA9C5Y,EAA6C,EAA7CA,GAAI6X,EAAyC,EAAzCA,MAAOlB,EAAkC,EAAlCA,OAAkC,IAA1Bs5B,aAA0B,SAAR1sB,EAAQ,iBAChEqa,EAASra,EAAKpM,UAAUnX,IAAO,GACrC,OACC,kBAAC,IAAM2gB,SAAP,MACG9I,EAAM5Y,OACP,CAACqH,IAAKC,QAASD,IAAKE,SAAS1C,SAAS+T,EAAM9U,cAC5C,yBACC0U,UAAWC,IAAW,eAAgB,CACrC+/B,OAAQxH,KAGRjwB,YAAUnI,EAAM5Y,OAAS4Y,EAAMi6B,WAC/Bj6B,EAAM9U,aAAeuD,IAAKC,SAC1B,uBAAGkR,UAAU,eAAexY,MAAM,YAElC4Y,EAAM9U,aAAeuD,IAAKE,SAC1B,uBAAGiR,UAAU,aAAaxY,MAAM,aAIlC2+B,EAAO7yB,QAAUklC,GACjB,yBAAKx4B,UAAWC,IAAW,yBAA0BkmB,EAAO7yB,QAE3DklC,GACD,kBAAC,IAAD,CACCt5B,OAAQA,EACRc,UAAU,aACV1M,MAAO8M,EAAM9M,OAAS,GACtB8M,MAAOA,EACP0wB,QAASvoC,EACT8C,MAAOygB,EAAKzgB,MACZqU,UAAWoM,EAAKpM,UAChBqgC,UAAWj0B,EAAKi0B,iB,+KCtCrB,SAASE,EAAwB3sC,EAAOiZ,EAAQ0F,EAAUzS,GAIzD,IAHA,IAAM/G,EAAU+G,EAAM/G,QAClBynC,GAAW,EAEN1xC,EAAI,EAAGA,EAAI8E,EAAM/H,OAAQiD,IAAK,CACtC,IAAMoB,EAAO0D,EAAM9E,GAKnB,GAJIoB,EAAKrI,QAHkBkR,EAAQwZ,IAAaxZ,EAAQwZ,GAAU1qB,QAIjEqI,EAAK2c,EAAOwE,WAAWxpB,MAAQglB,EAAOwE,WAAWjoB,MACjDo3C,GAAW,GAERA,EACH,MAED,GAAItwC,EAAK0D,OAAS1D,EAAK0D,MAAM/H,OAAQ,CACpC,IAAM40C,EAAYF,EACjBrwC,EAAK0D,MACLiZ,EACA0F,EACAzS,GAED,GAAI2gC,EAAW,CACdD,EAAWC,EACX,QAIH,OAAOD,EAGD,SAASjQ,EAAkB9jC,EAAMqT,GAAQ,IAAD,GACnB,WAC1B,IAAM4gC,EAAqB,CAC1B,cACA,QACA,UACA,WACA,KACA,cACA,SAED,YAAIj0C,GAAM6lB,SAAQ,SAACpiB,EAAMpB,GACxB,GAAkB,WAAdoB,EAAKrI,KAAmB,CAC3B,IAAMgB,EAAKqH,EAAKrH,GACV6rB,EAAcjoB,EAAKge,WACxB,SAACva,GAAD,MAAwB,YAAdA,EAAKrI,MAAsBqI,EAAKrH,KAAOA,IAAOqH,EAAK4V,UAExDwO,EAAc7nB,EAAKge,WACxB,SAACva,GAAD,OAAUA,EAAKrH,KAAOA,GAAoB,WAAdqH,EAAKrI,SAEb,IAAjB6sB,IACHjoB,EAAKme,OAAO8J,EAAa,GACzBjoB,EAAKme,OAAO0J,EAAa,IAGT,cAAdpkB,EAAKrI,MAAuB,WAC/B,IAAMgB,EAAKqH,EAAKrH,GAEhB,GACCqH,EAAKmhB,YACLtW,IAAMi/B,eAAe9pC,EAAKmhB,WAAWxpB,KAAMqI,EAAKmhB,WAAWjoB,OAC1D,CACD,IAAMu3C,EAAYl0C,EAAKge,WACtB,SAAC5S,GAAD,OACCA,EAAEhP,KAAOA,GACE,cAAXgP,EAAEhQ,MACFgQ,EAAEwZ,WAAWxpB,OAASqI,EAAKmhB,WAAWxpB,QAExC4E,EAAKme,OAAO+1B,EAAW,EAAvB,2BACIl0C,EAAKk0C,IADT,IAECtvB,WAAW,2BACP5kB,EAAKk0C,GAAWtvB,YADV,IAETjoB,MAAO8G,EAAKmhB,WAAWjoB,WAI1B,GACC8G,EAAKmhB,YACLqvB,EAAmB/zC,SAASuD,EAAKmhB,WAAWxpB,MAC3C,CACD,IAAM84C,EAAYl0C,EAAKge,WACtB,SAACva,GAAD,OACCA,EAAKrH,KAAOA,GACE,cAAdqH,EAAKrI,MACL64C,EAAmB/zC,SAASuD,EAAKmhB,WAAWxpB,SAE9C4E,EAAKme,OAAO+1B,EAAW,QAKvB,IAHA,IAAI/sB,GAAY,EAGPO,EAAI,EAAGA,EAAIrU,EAAMgM,eAAejgB,OAAQsoB,IAAK,CACrD,IAAMzB,EAAO5S,EAAMgM,eAAeqI,GAClC,GAAkB,WAAdzB,EAAK7qB,KAER,IADA,IAAQ0sB,EAAa7B,EAAb6B,SACCmrB,EAAI,EAAGA,EAAInrB,EAAS1oB,OAAQ6zC,IAAK,CACzC,IAAM5iC,EAAUyX,EAASmrB,GACzB,GAAI5iC,EAAQjV,QAPdiY,EAAM/G,QAAQlQ,IAAOiX,EAAM/G,QAAQlQ,GAAIhB,MAOC,CACrCiY,EAAMgM,eAAeqI,GAAGI,SAASmrB,GAAGxvC,EAAKmhB,WAAWxpB,MACnDqI,EAAKmhB,WAAWjoB,MACjBwqB,GAAY,EACZ,MAED,GAAI9W,EAAQlJ,OAASkJ,EAAQlJ,MAAM/H,OACnB00C,EACdzjC,EAAQlJ,MACR1D,EACArH,EACAiX,KAGA8T,GAAY,GAKhB,GAAIA,EAAW,CACd,IAAM+sB,EAAYl0C,EAAKge,WACtB,SAACva,GAAD,OAAUA,EAAKrH,KAAOA,GAAoB,cAAdqH,EAAKrI,QAElC4E,EAAKme,OAAO+1B,EAAW,GACvB,QAlE4B,MAyElCC,IACA,EAAA9gC,EAAMgM,gBAAevT,KAArB,oBAA6B9L,IAoBvB,SAAS+qB,EAAO1L,EAAgBhM,GA6BtC,OA5BgBgM,EACdld,KAAI,SAAC8jB,GACL,IAAIlb,EAaJ,GAZkB,WAAdkb,EAAK7qB,OACR2P,EAASkb,EAAK6B,SACZ3lB,KAAI,SAAC6C,GACL,GAAIA,GAASA,EAAMmC,OAASnC,EAAMmC,MAAM/H,OAAQ,CAC/C,IAAMwE,EAAC,eAAQoB,GAEf,OADApB,EAAEkkB,SA1BkB,SAArBssB,EAAsBjtC,GAc3B,OAbeA,EAAMhF,KAAI,SAACsB,GACzB,IAAI4wC,EAAY,GAIhB,OAHI5wC,EAAK0D,QACRktC,EAAYD,EAAmB3wC,EAAK0D,QAE9BmtC,YAAgB,2BACjB7wC,GADgB,IACVqkB,SAAUusB,IACrB,GACA,KACAp4C,IAAWC,SAgBMk4C,CAAmBpvC,EAAMmC,OAC/BvD,EAER,OAAOoB,KAEPrB,QAAO,SAACyH,GAAD,OAAOA,MAEZ6a,EAAK5M,OAGV,OAAOk7B,YAAe,aACrBl7B,OAAQ4M,EAAK5M,OACb1I,SAAUsV,EAAKtV,SACfoX,OAAQ9B,EAAK8B,OACb1rB,KAAM4pB,EAAK7qB,KACXsM,YAAaqD,GACVkb,EAAKrB,gBAGTjhB,QAAO,SAACyH,GAAD,OAAOA,KAIjB,SAASopC,EAAiBrtC,EAAOiZ,EAAQukB,EAAStxB,GAIjD,IAHA,IAAM/G,EAAU+G,EAAM/G,QAClBynC,GAAW,EAEN1xC,EAAI,EAAGA,EAAI8E,EAAM/H,OAAQiD,IAAK,CACtC,IAAMoB,EAAO0D,EAAM9E,GASnB,GARIoB,EAAKrI,OAHiBkR,EAAQq4B,GAASvpC,OAItCqI,EAAK0D,MACR1D,EAAK0D,MAAM2E,KAAKsU,GAEhB3c,EAAK0D,MAAQ,CAACiZ,GAEf2zB,GAAW,GAERA,EACH,MAED,GAAItwC,EAAK0D,OAAS1D,EAAK0D,MAAM/H,OAAQ,CACpC,IAAM40C,EAAYQ,EAAiB/wC,EAAK0D,MAAOiZ,EAAQukB,EAAStxB,GAChE,GAAI2gC,EAAW,CACdD,EAAWC,EACX,QAIH,OAAOD,EAGD,SAASrI,EAAar4B,EAAO+M,EAAQhkB,EAAIuoC,GAK/C,IAJA,IAAM3kC,EAAO,GACTmnB,GAAY,EACV7a,EAAU+G,EAAM/G,QAEbjK,EAAI,EAAGA,EAAIgR,EAAMgM,eAAejgB,OAAQiD,IAAK,CACrD,IAAM4jB,EAAO5S,EAAMgM,eAAehd,GAClC,GAAkB,WAAd4jB,EAAK7qB,KAER,IADA,IAAQ0sB,EAAa7B,EAAb6B,SACCmrB,EAAI,EAAGA,EAAInrB,EAAS1oB,OAAQ6zC,IAAK,CACzC,IAAM5iC,EAAUyX,EAASmrB,GACzB,GACC5iC,EAAQjV,OARekR,EAAQq4B,GAASvpC,MASxCiV,EAAQlJ,OACiB,IAAzBkJ,EAAQlJ,MAAM/H,OACb,CACDiU,EAAMgM,eAAehd,GAAGylB,SAASmrB,GAAG9rC,MAAM2E,KAAKsU,GAC/C+G,GAAY,EACZ,MAED,GAAI9W,EAAQlJ,OAASkJ,EAAQlJ,MAAM/H,OACnBo1C,EACdnkC,EAAQlJ,MACRiZ,EACAukB,EACAtxB,KAGA8T,GAAY,GAKhB,GAAIA,EACH,MAQF,OALIA,GACC/G,EAAOngB,OACVD,EAAK8L,KAAK,CAAE1Q,KAAM,UAAWie,OAAQ+G,EAAOngB,QAGvCD,I,wKC1PD,SAASwoC,EAASxjC,EAAOjJ,GAAmC,IAAxBioC,EAAuB,wDAC3DhK,EAAS,GACXM,EACkB,UAArBt1B,EAAM7F,WAAyB6F,EAAM3I,KAAO2I,EAAM7F,YAAc6F,EAAM3I,KACvEi+B,EAAeA,GAAgBA,EAAava,cAAc/Q,QAAQ,KAAM,KACxE,IAAI1O,EAAW1E,IAAW4H,MAAK,SAAChB,GAAD,OAAYA,EAAOnG,OAASi+B,KAM3D,GALqB,SAAjBA,GACCv+B,IAAcE,IAAWE,SAC5BmE,EAAW1E,IAAW4H,MAAK,SAAChB,GAAD,MAA4B,cAAhBA,EAAOnG,UAI9C2nC,GACDjoC,IAAcE,IAAWC,MACzB,CACCwG,IAAKoC,MACLpC,IAAKyC,WACLzC,IAAKqC,KACLrC,IAAK6C,KACL7C,IAAKE,QACLF,IAAKC,SACJzC,SAASo6B,IAEPt1B,EAAMmC,OAAgC,IAAvBnC,EAAMmC,MAAM/H,OAAc,CAC5C,IAAMglB,EACLkW,IAAiB53B,IAAK6C,KACnB6W,YAAU,kCACVA,YAAU,iCACd4d,EAAM,MAAY5V,EAGpB,IAAK9jB,EACJ,OAAO05B,EAER,IAAMlN,EAAepe,OAAOC,KAAKrO,EAAS3D,OAAO4kC,QAAO,WAAoB,IAAnBkT,EAAkB,uDAAZ,GAAIn6B,EAAQ,uCAC1E,MAAM,GAAN,mBAAWm6B,GAAX,YAAmBn0C,EAAS3D,MAAM2d,OAChC,IAwCH,OAvCAwS,EAAajH,SAAQ,SAACvlB,GACrB,IAAMo0C,EAAkB,WACvB1a,EAAO15B,EAASlF,MAAhB,UAA2BghB,YAC1B9b,EAASjF,OAASiF,EAASlF,MAD5B,YAEKghB,YAAU,gBAGd9b,EAAShE,aACTgE,EAAShE,YAAY4D,SAASo6B,KAC7Bt1B,EAAM1E,EAASlF,OAChBkF,EAAShF,WAAa0J,EAAM1E,EAASlF,QAEtCs5C,IAGAp0C,EAAS4C,eACR5C,EAASq0C,kBACN3vC,EAAM1E,EAAS4C,cAChB8B,EAAM1E,EAAS4C,iBACjB8B,EAAM1E,EAASlF,QAEZ4J,EAAMyxB,kBAEC,CAAC,oBAAoBv2B,SAASI,EAASlF,OAGjD,CAAC,iBAAiB8E,SAASI,EAASlF,OACpC4J,EAAM6tB,kBALN6hB,IAUEp0C,EAAS9E,SACD,IAAIo5C,OAAOt0C,EAAS9E,OACvBwV,KAAKhM,EAAM1E,EAASlF,QAAW4+B,EAAO15B,EAASlF,QACtD4+B,EAAO15B,EAASlF,MAAQghB,YAAU9b,EAAS7E,wBAIvCu+B,EAGD,SAAS6L,EAAyBxyB,EAAOsxB,GAC/C,IAAM7/B,EAAQuO,EAAM/G,QAAQq4B,GACtB3K,EAAS3mB,EAAME,UAAUoxB,IAAY,GACvC7/B,IACCA,EAAMqC,OAASrC,EAAMqC,MAAM/H,OAAS,EACnC46B,EAAO7yB,cACH6yB,EAAO7yB,MAGf6yB,EAAO7yB,MAAQiV,YAAU,iCAEtB1N,OAAOC,KAAKqrB,GAAQ56B,OACvBiU,EAAME,UAAUoxB,GAAW3K,SAEpB3mB,EAAME,UAAUoxB,IAKnB,SAAS4B,EAAiBlzB,EAAOjX,GACxBiX,EAAME,UAAUnX,WAEvBiX,EAAME,UAAUnX,K,2GC5BnBy4C,EAAe,CACpBpa,SAAU,CACTx/B,YAAK,CAAE65C,aAAa,IACpBv4C,KACAe,KACAE,IACAE,KACAG,IACAC,KAED48B,aAAc,CACbv8B,IACAqB,IACAlB,KACAE,IACAI,IACAC,IACA1D,YAAY,CAAEC,KAAM,QAASqC,gBAAiBxB,IAAWE,SACzDuD,MAEDq1C,UAAW,CACVj0C,IACAG,IACAlC,YAAa,CACZ3D,KAAM,YACNC,MAAO,cACPoC,gBAAiBxB,IAAWE,SAE7B+E,IACAC,KACAH,IACAc,KAEDkzC,WAAY,CACXrzC,IACAP,IACAC,IACAE,IACAC,IACAC,IACAC,MAEDuzC,UAAW,CAAC/2C,MACZg3C,MAAO,CAACl3C,KACR28B,iBAAkB,CACjB34B,IACA6B,IACA9E,YAAa,CACZ3D,KAAM,YACNmE,YAAa,cACbxD,UAAWE,IAAWE,OACtBsB,gBAAiBxB,IAAWE,WAKzBg5C,EAAgB,CACrB1a,SAAU,CACTx/B,YAAK,CAAE65C,aAAa,IACpBv4C,KACAe,KACAE,IACAE,KACAG,IACAC,KAED48B,aAAc,CAACv8B,IAAWqB,IAAalB,KAAQE,IAAUI,IAAKC,IAAKa,MACnEq1C,UAAW,CAACj0C,IAAUG,IAAUC,IAAQC,KAAeH,IAAgBc,KACvEkzC,WAAY,CACXrzC,IACAP,IACAC,IACAE,IACAC,IACAC,IACAC,MAEDuzC,UAAW,CAAC/2C,MACZg3C,MAAO,CAACl3C,KACR28B,iBAAkB,CAAC34B,IAAS6B,MAGvBuxC,EAAgB,CACrB3a,SAAU,CACTx/B,YAAK,CAAE65C,aAAa,IACpBv4C,KACAe,KACAE,IACAE,KACAG,IACAC,KAED48B,aAAc,CACbp8B,KACAE,IACAI,IACAC,IACAd,YAAa,CACZ3C,KAAM,YACNo2C,QAAS,IAEVzzC,YAAa,CACZ3C,KAAM,QACNo2C,QAAS,IAEV9xC,MAEDq1C,UAAW,CAACj0C,IAAUG,IAAUC,IAAQC,KAAeH,IAAgBc,KACvEkzC,WAAY,CACXrzC,IACAP,IACAC,IACAE,IACAC,IACAC,IACAC,MAEDuzC,UAAW,CAAC/2C,MACZg3C,MAAO,CAACl3C,KACR28B,iBAAkB,CAAC34B,IAAS6B,MAGvBwxC,EAAgB,CACrB5a,SAAU,CACTx/B,YAAK,CAAE65C,aAAa,IACpBv4C,KACAe,KACAE,IACAE,KACAG,IACAC,KAED48B,aAAc,CAACp8B,KAAQE,IAAUkB,MACjCq1C,UAAW,CAACj0C,IAAUG,IAAUC,IAAQC,KAAeH,IAAgBc,KACvEkzC,WAAY,CACXrzC,IACAP,IACAC,IACAE,IACAC,IACAC,IACAC,MAEDuzC,UAAW,CAAC/2C,MACZg3C,MAAO,CAACl3C,KACR28B,iBAAkB,CAAC34B,IAAS6B,MAGvByxC,EAAiB,CACtB7a,SAAU,CACTx/B,YAAK,CAAE65C,aAAa,IACpBv4C,KACAe,KACAE,IACAE,KACAG,IACAC,KAED48B,aAAc,CAACp8B,KAAQE,IAAUkB,MACjCq1C,UAAW,CAACj0C,IAAUG,IAAUC,IAAQC,KAAeH,IAAgBc,KACvEkzC,WAAY,CACXrzC,IACAP,IACAC,IACAE,IACAC,IACAC,IACAC,MAEDuzC,UAAW,CAAC/2C,MACZg3C,MAAO,CAACl3C,KACR28B,iBAAkB,CAAC34B,IAAS6B,MAGvB0xC,EAAc,CACnB9a,SAAU,CAACx/B,YAAK,CAAE65C,aAAa,IAASv4C,KAAMe,KAAOI,MACrDq3C,UAAW,CACV9zC,IACAC,IACAqD,IACAxF,YAAa,CACZ3D,KAAM,cACNmE,YAAa,cACbxD,UAAWE,IAAWE,OACtBsB,gBAAiBxB,IAAWE,SAE7BhB,YAAY,CACXC,KAAM,aACNmE,YAAa,cACbxD,UAAWE,IAAWE,OACtBsB,gBAAiBxB,IAAWE,SAE7B6E,IACAc,IACAhC,KAEDk1C,WAAY,CAACrzC,IAAQP,IAAQC,IAAQG,KACrC0zC,MAAO,CAACl3C,KACR28B,iBAAkB,CAAC34B,IAASa,IAAUgB,MAGjC2xC,EAAmB,CACxB/a,SAAU,CAACx/B,YAAK,CAAE65C,aAAa,IAASv4C,KAAMmB,MAC9Cq3C,UAAW,CACV9zC,IACAC,IACAqD,IACAxF,YAAa,CACZ3D,KAAM,cACNmE,YAAa,cACbxD,UAAWE,IAAWE,OACtBsB,gBAAiBxB,IAAWE,SAE7BhB,YAAY,CACXC,KAAM,aACNmE,YAAa,cACbxD,UAAWE,IAAWE,OACtBsB,gBAAiBxB,IAAWE,SAE7B6E,IACAc,KAEDkzC,WAAY,CAAC5zC,IAAQC,IAAQG,KAC7B0zC,MAAO,CAACl3C,KACR28B,iBAAkB,CAAC34B,MAGdyzC,EAAiB,CACtBhb,SAAU,CAACx/B,YAAK,CAAE65C,aAAa,IAASv4C,KAAMe,KAAOI,MACrDq3C,UAAW,CAAC9zC,IAAUC,IAAQF,IAAgBc,KAC9CkzC,WAAY,CAAC5zC,IAAQC,IAAQG,KAC7B0zC,MAAO,CAACl3C,KACR28B,iBAAkB,CAAC92B,MAGd6xC,EAAe,CACpBjb,SAAU,CACTx/B,YAAK,CAAE65C,aAAa,IACpBv4C,KACAe,KACAI,KACAG,IACAC,IACAwB,KAEDo7B,aAAc,CACbp8B,KACAF,YAAY,CACXhD,KAAM,UACNC,MAAO,WACPC,UAAU,EACVsC,IAAK,gCACLtB,YAAa,CAAC,UACdmB,gBAAiBxB,IAAWE,OAC5B8B,UAAU,EACVS,gBAAgB,EAChBD,WAAW,KAGbs2C,UAAW,CAAC9zC,IAAUC,IAAQC,KAAeH,IAAgBc,KAC7DkzC,WAAY,CACXrzC,IACAP,IACAC,IACAE,IACAC,IACAC,IACAC,MAEDwzC,MAAO,CAACl3C,KACR28B,iBAAkB,CACjB34B,IACA6B,IACA5G,YAAkB,CACjB7B,KAAM,OACNC,MAAO,OACPf,KAAMq5B,IACNvC,OAAQ,qCACR7xB,YAAa,cACbxD,UAAWE,IAAWE,WAKnBw5C,EAAkB,CACvBlb,SAAU,CACTx/B,YAAK,CAAE65C,aAAa,IACpBv4C,KACAe,KACAE,IACAE,KACAG,IACAC,KAEDi3C,UAAW,CAAC7zC,IAAQF,IAAgBc,KACpCkzC,WAAY,CACXrzC,IACAP,IACAC,IACAE,IACAC,IACAC,IACAC,MAEDwzC,MAAO,CAACl3C,KACR28B,iBAAkB,CAAC34B,MAGd4zC,EAAe,CACpBnb,SAAU,CAACx/B,YAAK,CAAE65C,aAAa,IAASv4C,KAAMmB,MAC9Cg9B,aAAc,GACdqa,UAAW,CAAC7zC,IAAQF,IAAgBc,KACpCkzC,WAAY,CAACrzC,IAAQP,IAAQC,IAAQK,MACrCwzC,MAAO,CAACl3C,KACR28B,iBAAkB,CAAC34B,MAGd6zC,EAAc,CACnBpb,SAAU,CAACx/B,YAAK,CAAE65C,aAAa,IAASv4C,KAAMe,KAAOI,MACrDg9B,aAAc,CAACp8B,MACfy2C,UAAW,CAACj0C,IAAUI,IAAQF,IAAgBc,KAC9CkzC,WAAY,CAACrzC,IAAQP,IAAQC,IAAQE,IAAYC,IAAYE,MAC7DuzC,UAAW,CAAC/2C,MACZg3C,MAAO,CAACl3C,KACR28B,iBAAkB,CAAC34B,IAAS6B,MAGvBiyC,EAAe,CACpBrb,SAAU,CAACx/B,YAAK,CAAE65C,aAAa,IAASv4C,KAAMe,KAAOI,MACrDg9B,aAAc,CAACp8B,MACfy2C,UAAW,CAACj0C,IAAUI,IAAQD,IAAUD,IAAgBc,KACxDkzC,WAAY,CAAC5zC,IAAQC,IAAQE,IAAYC,IAAYE,MACrDuzC,UAAW,CAAC/2C,MACZg3C,MAAO,CAACl3C,KACR28B,iBAAkB,CAAC34B,IAAS6B,MAGvBkyC,EAAkB,CACvBtb,SAAU,CACTx/B,YAAK,CAAE65C,aAAa,IACpBv4C,KACAe,KACAE,IACAE,KACAG,IACAC,KAED48B,aAAc,CACbp8B,KACAE,IACAM,IACAO,IACAgB,KACAE,IACAM,IACAnB,MAEDq1C,UAAW,CAACj0C,IAAUG,IAAUC,IAAQC,KAAeH,IAAgBc,KACvEkzC,WAAY,CACXrzC,IACAP,IACAC,IACAE,IACAC,IACAC,IACAC,MAEDuzC,UAAW,CAAC/2C,MACZg3C,MAAO,CAACl3C,KACR28B,iBAAkB,CAAC34B,IAAS6B,MAGvBmyC,EAA+B,CACpCvb,SAAU,CACTx/B,YAAK,CAAE65C,aAAa,IACpBv4C,KACAe,KACAI,KACAG,IACAC,KAED48B,aAAc,CACbp8B,KACAE,IACAM,IACAO,IACAgB,KACAE,IACAM,IACAlB,KACAC,KACAF,MAEDq1C,UAAW,CAACj0C,IAAUG,IAAUC,IAAQC,KAAeH,IAAgBc,KACvEkzC,WAAY,CACXrzC,IACAP,IACAC,IACAE,IACAC,IACAC,IACAC,MAEDuzC,UAAW,CAAC/2C,MACZg3C,MAAO,CAACl3C,KACR28B,iBAAkB,CAAC34B,IAAS6B,MAGvBoyC,EAAuB,CAC5Bxb,SAAU,CACTx/B,YAAK,CAAE65C,aAAa,IACpBv4C,KACAe,KACAI,KACAG,IACAC,KAED48B,aAAc,CACbp8B,KACAE,IACAM,IACAO,IACAc,KACAT,MAEDq1C,UAAW,CAACj0C,IAAUG,IAAUC,IAAQC,KAAeH,IAAgBc,KACvEkzC,WAAY,CACXrzC,IACAP,IACAC,IACAE,IACAC,IACAC,IACAC,MAEDuzC,UAAW,CAAC/2C,MACZg3C,MAAO,CAACl3C,KACR28B,iBAAkB,CAAC34B,IAAS6B,MAGvBqyC,EAAa,CAClBzb,SAAU,CACTx/B,YAAK,CAAE65C,aAAa,IADX,2BAEJx3C,MAFI,IAEGhC,UAAU,IACtBoC,KACAT,YAAkB,CACjB7B,KAAM,YACNC,MAAO,aACPf,KAAM,CAAC,WAERa,YAAY,CACXC,KAAM,UACNC,MAAO,aAERyH,IACAK,IACAJ,KAEDozC,QAAS,CACR/3C,YAAY,CACX/C,MAAO,SACPD,KAAM,QACNwC,IAAK,gCACLH,gBAAiBxB,IAAWE,OAC5B8B,UAAU,EACVS,gBAAgB,EAChBD,WAAW,IAEZL,YAAY,CACX/C,MAAO,UACPD,KAAM,SACNwC,IAAK,gCACLH,gBAAiBxB,IAAWE,OAC5B8B,UAAU,EACVS,gBAAgB,EAChBD,WAAW,MAKR23C,EAAe,CACpB3b,SAAU,CAACx/B,cAAQsB,KAAMe,KAAOI,MAChCq3C,UAAW,CAAC7zC,IAAQC,KAAeH,IAAgBc,KACnDkzC,WAAY,CAAC5zC,IAAQC,IAAQG,IAAYC,IAAWC,MACpDi5B,iBAAkB,CAAC34B,IAAS6B,MAGvBwyC,EAAc,CACnB5b,SAAU,CAACx/B,cAAQmC,MAEdk5C,EAAa,CAClB7b,SAAU,CACTx/B,YAAK,CAAE65C,aAAa,IACpBv4C,KAFS,2BAGJe,MAHI,IAGG/B,UAAU,EAAMgC,iBAAiB,MAIzCg5C,EAAa,CAClB9b,SAAU,CAACx/B,YAAK,CAAE65C,aAAa,IAASv4C,KAAMe,KAAOkH,IAAOzC,MAGvDy0C,EAAqB,CAC1B/b,SAAU,CACTx/B,YAAK,CAAE65C,aAAa,IACpBv4C,KACA0H,IACA3G,KACAwG,IACAC,KAEDgxC,UAAW,CAAC9zC,IAAUC,IAAQ8C,IAAQlC,IAAKjC,KAC3Cm1C,WAAY,CAAC5zC,IAAQC,IAAQG,KAC7Bm5B,iBAAkB,CAAC34B,IAAS6B,MAGvB4yC,EAAiB,CACtBhc,SAAU,CAACx/B,YAAK,CAAE65C,aAAa,IAASv4C,KAAM0H,KAC9C02B,iBAAkB,CAAC92B,MAGd6yC,EAAgB,CACrBjc,SAAU,CAACx/B,YAAK,CAAE65C,aAAa,IAASv4C,MACxCy4C,WAAY,CAAC1zC,IAAIF,IAAQC,IAAQ0C,MAG5B4yC,EAAa,CAClBlc,SAAU,CAACx/B,YAAK,CAAE65C,aAAa,IAASv4C,MACxCo+B,iBAAkB,CAAC92B,KACnBmxC,WAAY,CAAC1zC,IAAIyC,IAAUtC,MAGtBm1C,EAAqB,CAC1Bnc,SAAU,CAACx/B,YAAK,CAAE65C,aAAa,IAASv4C,KAAMe,KAAO4G,IAAOvF,IAAOH,KACnEu2C,UAAW,CAACl0C,IAAUN,IAAUyD,IAAQjC,IAAUd,IAAUC,IAAQY,KACpEkzC,WAAY,CAAC5zC,IAAQC,IAAQG,IAAYE,KAASyC,IAASC,KAC3Du2B,iBAAkB,CAAC34B,IAAS6B,MAGvBgzC,EAAqB,CAC1Bpc,SAAU,CAACl+B,KAAM8H,IAAaC,IAAaP,KAC3C42B,iBAAkB,CAAC92B,MAGdizC,EAAe,CACpBrc,SAAU,CAACx/B,YAAK,CAAE65C,aAAa,IAASxzC,IAAImD,IAAOC,IAAYC,KAAQ7C,MAG3D2Z,EAAU,CACtB,CAAEpf,KAAM,OAAQM,MAAO25C,GACvB,CAAEj6C,KAAM,OAAQM,MAAO45C,GACvB,CAAEl6C,KAAM,YAAaM,MAAOu5C,GAC5B,CAAE75C,KAAM,SAAUM,MAAOk4C,GACzB,CAAEx4C,KAAM,SAAUM,MAAOk4C,GACzB,CAAEx4C,KAAM,UAAWM,MAAOw4C,GAC1B,CAAE94C,KAAM,SAAUM,MAAOw4C,GACzB,CAAE94C,KAAM,UAAWM,MAAOy4C,GAC1B,CAAE/4C,KAAM,aAAcM,MAAOy4C,GAC7B,CAAE/4C,KAAM,UAAWM,MAAO04C,GAC1B,CAAEh5C,KAAM,WAAYM,MAAO24C,GAC3B,CAAEj5C,KAAM,gBAAiBM,MAAO24C,GAChC,CAAEj5C,KAAM,gBAAiBM,MAAO24C,GAChC,CAAEj5C,KAAM,OAAQM,MAAO24C,GACvB,CAAEj5C,KAAM,YAAaM,MAAO24C,GAC5B,CAAEj5C,KAAM,OAAQM,MAAO24C,GACvB,CAAEj5C,KAAM,QAASM,MAAO44C,EAAa93C,gBAAiBxB,IAAWC,MACjE,CAAEG,KAAM,cAAeM,MAAO64C,GAC9B,CAAEn5C,KAAM,YAAaM,MAAO84C,GAC5B,CAAEp5C,KAAM,SAAUM,MAAO+4C,GACzB,CAAEr5C,KAAM,YAAaM,MAAOg5C,GAC5B,CAAEt5C,KAAM,SAAUM,MAAOi5C,GACzB,CAAEv5C,KAAM,QAASM,MAAOk5C,GACxB,CAAEx5C,KAAM,cAAeM,MAAOo5C,GAC9B,CAAE15C,KAAM,eAAgBM,MAAOq5C,GAC/B,CAAE35C,KAAM,cAAeM,MAAOq5C,GAC9B,CAAE35C,KAAM,mBAAoBM,MAAOs5C,GACnC,CAAE55C,KAAM,oBAAqBM,MAAOs5C,GACpC,CAAE55C,KAAM,mBAAoBM,MAAOs5C,GACnC,CAAE55C,KAAM,UAAWM,MAAOu5C,GAC1B,CAAE75C,KAAM,aAAcM,MAAO84C,EAAgBh2C,mBAAmB,GAChE,CAAEpD,KAAM,gBAAiBM,MAAO65C,GAChC,CAAEn6C,KAAM,gBAAiBM,MAAOi6C,GAChC,CAAEv6C,KAAM,gBAAiBM,MAAOk6C,GAChC,CAAEx6C,KAAM,OAAQM,MAAOy5C,GACvB,CAAE/5C,KAAM,OAAQM,MAAOy4C,GACvB,CAAE/4C,KAAM,gBAAiBM,MAAOy5C,GAChC,CAAE/5C,KAAM,UAAWM,MAAOy5C,GAC1B,CAAE/5C,KAAM,SAAUM,MAAOy5C,GACzB,CAAE/5C,KAAM,aAAcM,MAAOo5C,GAC7B,CAAE15C,KAAM,SAAUM,MAAOy5C,GACzB,CAAE/5C,KAAM,QAASM,MAAOy5C,GACxB,CAAE/5C,KAAM,QAASM,MAAO05C,GACxB,CAAEh6C,KAAM,SAAUM,MAAOm5C,GACzB,CAAEz5C,KAAM,SAAUM,MAAOk5C,GACzB,CAAEx5C,KAAM,OAAQM,MAAOg6C,GACvB,CAAEt6C,KAAM,OAAQM,MAAO85C,GACvB,CAAEp6C,KAAM,UAAWM,MAAO+5C,GAC1B,CAAEr6C,KAAM,SAAUM,MAAOm6C,IAGXr7B,O,sOChnBA1G,UAAMC,MA5CrB,YAAsE,IAA7C5Y,EAA4C,EAA5CA,GAAI6X,EAAwC,EAAxCA,MAAOlB,EAAiC,EAAjCA,OAAiC,IAAzBs5B,aAAyB,SAAR1sB,EAAQ,iBAC9Dqa,EAASra,EAAKpM,UAAUnX,IAAO,GACrC,EAAgC2Y,IAAMG,UAAS,GAA/C,mBAAO6hC,EAAP,KAAiBC,EAAjB,KAEMC,EAAmBliC,IAAMmD,aAAY,SAAC9M,GAC3CA,EAAE8rC,kBACFF,GAAY,SAAC/4B,GAAD,OAAQA,OAClB,IAEGkf,EAAQ4Z,EAAW,OAAS,KAClC,OACC,kBAAC,IAAMh6B,SAAP,KACC,yBACClJ,UAAWC,IAAW,cAAe,CACpC+/B,OAAQxH,KAGT,yBAAKx4B,UAAU,qBAAqB+F,QAASq9B,GAC5C,uBAAGpjC,UAAS,wBAAmBspB,MAEhC,8BAAO/gB,YAAUnI,EAAM5Y,OAAS4Y,EAAMi6B,YACtC,yBAAKr6B,UAAU,qBAAqB+F,QAASq9B,GAC5C,uBAAGpjC,UAAS,wBAAmBspB,OAGhCnD,EAAO7yB,QAAUklC,GACjB,yBAAKx4B,UAAWC,IAAW,yBAA0BkmB,EAAO7yB,OAE5D4vC,GACA,kBAACl+B,EAAA,EAAD,CACC9F,OAAQA,EACRc,UAAU,aACV1M,MAAO8M,EAAM9M,OAAS,GACtB8M,MAAOA,EACP0wB,QAASvoC,EACT8C,MAAOygB,EAAKzgB,MACZqU,UAAWoM,EAAKpM,UAChBqgC,UAAWj0B,EAAKi0B,gBCnBNuD,EApBG,CACjBnyC,MAAO,CAAE+uB,UAAW7vB,IAAOhJ,MAAO,CAAE2Y,UAAW,oBAC/CujC,WAAY,CACXrjB,UAAW7vB,IACXhJ,MAAO,CAAE2Y,UAAW,yBAErB/O,MAAO,CAAEivB,UAAWsjB,IAAOn8C,MAAO,CAAE2Y,UAAW,UAC/CjR,QAAS,CAAEmxB,UAAWsjB,IAAOn8C,MAAO,CAAE2Y,UAAW,kBACjDtO,KAAM,CAAEwuB,UAAWujB,EAAMp8C,MAAO,CAAE2Y,UAAW,eAC7ClR,QAAS,CAAEoxB,UAAWsjB,IAAOn8C,MAAO,CAAE2Y,UAAW,kBACjD,cAAe,CAAEkgB,UAAWsjB,IAAOn8C,MAAO,CAAE2Y,UAAW,UACvD,gBAAiB,CAAEkgB,UAAWsjB,IAAOn8C,MAAO,CAAE2Y,UAAW,UACzD3O,KAAM,CAAE6uB,UAAWnf,IAAM1Z,MAAO,CAAE2Y,UAAW,gBAC7C/M,WAAY,CAAEitB,UAAWnf,IAAM1Z,MAAO,CAAE2Y,UAAW,gBACnD,aAAc,CACbkgB,UAAW9c,IACX/b,MAAO,CAAE2Y,UAAW,sB,4CCdhBlC,EAAYC,aAAW,iBAAO,CACnClX,KAAM,CACL01B,UAAW,SACXjV,SAAU,IAEXo8B,gBAAiB,CAChBzlC,QAAS,OACTa,WAAY,SACZP,eAAgB,SAChBL,cAAe,UAEhBhX,OAAQ,CACPoa,MAAO,cACPuX,WAAY,IACZzR,MAAO,OACP9E,aAAc,GACd5D,gBAAiB,UACjBwE,QAAS,EACT9F,SAAU,SACVuiB,aAAc,WACd7c,cAAe,aACf,UAAW,CACVpE,gBAAiB,YAGnB0D,MAAO,CACNE,aAAc,EACdY,QAAS,GACT6kB,UAAW,kEAIE,SAAS4b,EAAT,GAA6D,IAArCC,EAAoC,EAApCA,SAAUjgC,EAA0B,EAA1BA,YAAakgC,EAAa,EAAbA,UACvDxkC,EAAUvB,IAEV8G,EAAOiK,QAAQ+0B,GACfr7C,EAAKqc,EAAO,sBAAmBnR,EAErC,OACC,kBAACqwC,EAAA,EAAD,CACCv7C,GAAIA,EACJqc,KAAMA,EACNg/B,SAAUA,EACV/+B,QAASlB,EACTtE,QAAS,CAAE+C,MAAO/C,EAAQ+C,OAC1B2hC,aAAc,CACbC,SAAU,SACVhN,WAAY,SAEbnP,gBAAiB,CAChBmc,SAAU,MACVhN,WAAY,UAGb,kBAACtwB,EAAA,EAAD,CAAK1G,UAAWX,EAAQqkC,iBACvB,kBAAC18B,EAAA,EAAD,CAAYhH,UAAWX,EAAQxY,MAC7B0hB,YAAU,yBAEZ,kBAAC7B,EAAA,EAAD,KACC,kBAACQ,EAAA,EAAD,CACC9B,KAAK,QACLpF,UAAWX,EAAQnY,OACnByV,MAAO,CACNkhB,YAAa,GAEd9X,QAAS89B,GAERt7B,YAAU,QAEZ,kBAACrB,EAAA,EAAD,CAAQ9B,KAAK,QAAQpF,UAAWX,EAAQnY,OAAQ6e,QAASpC,GACvD4E,YAAU,U,gOCnEX1Z,EAAOmE,SAGPixC,EAAa,CAElBC,QAFkB,SAEV78C,GACP,IAAQmY,EAAUnY,EAAVmY,MACF2wB,EAAgC,gBAAhB9oC,EAAMgE,MAE5B,GACCmU,EAAMtX,YAAcE,IAAWC,MAC9B8nC,GACA9oC,EAAM6iC,eAIR,QACC7iC,EAAMkB,KAAOuK,IAAI1B,YACS,IAA1B/J,EAAM+Y,MAAM2+B,WACS,WAArB13C,EAAM+Y,MAAM5X,MACe,WAA3BnB,EAAM+Y,MAAM9U,YACZjE,EAAM+Y,MAAM5X,OAAS27C,IAAY9yC,OAInC2vB,UAtBkB,SAsBR35B,GACT,IAAM0xB,EAAM,eAAQ1xB,GACdirC,EAAsC,UAA5BvZ,EAAO3Y,MAAM9U,WACvB84C,EAAS,CAAC,cAAe,gBAAgB/3C,SAC9C0sB,EAAO3Y,MAAM9U,YAqCd,OAlCCjE,EAAMmY,MAAMtX,YAAcE,IAAWE,QACrB,gBAAhBjB,EAAMgE,MAEN0tB,EAAO3Y,MAAP,2BACI2Y,EAAO3Y,OADX,IAEC1M,MAAO,oCACPC,WAAY,QACZE,YAAaC,KAAKC,UAAL,2BACTD,KAAKkY,MAAM+M,EAAO3Y,MAAMvM,aAAe,OAD9B,IAEZV,QACCW,KAAKkY,MAAM+M,EAAO3Y,MAAMvM,aAAe,MAAMV,UAC5CixC,EAAS,OAAI3wC,GACfO,WAAWs+B,GAAU,aAGbjrC,EAAMmY,MAAMtX,YAAcE,IAAWC,OAC3C0wB,EAAO3Y,MAAMo7B,eAChBziB,EAAO3Y,MAAP,uCACI2Y,EAAO3Y,OACsB,UAA5B2Y,EAAO3Y,MAAM9U,YAA0B,CAC1C9C,KAAMuwB,EAAO3Y,MAAM9U,aAHrB,IAKCA,WAAY,WAGdytB,EAAO3Y,MAAP,2BACI2Y,EAAO3Y,OADX,IAECvM,YAAaC,KAAKC,UAAL,2BACTD,KAAKkY,MAAM+M,EAAO3Y,MAAMvM,aAAe,OAD9B,IAEZG,WAAWs+B,GAAU,cAIxBjrC,EAAMqZ,OAAOrZ,EAAMkB,GAAI,CAAElB,MAAO0xB,IACzB,eAAK1xB,IAIbg9C,QAnEkB,SAmEVh9C,EAAO44B,GAGd54B,EAAMqZ,OAAO,KAAM,CAClB8wB,OAAQvR,EAAQqkB,UAChBj9C,MAAO,GACPk9C,SAAUtkB,EAAQG,aAIpBc,WA7EkB,SA6EP75B,EAAO44B,GACjB,OAAO54B,EAAMkB,KAAO03B,EAAQG,UAAU73B,KAKlCi8C,EAAa,CAGlBxkB,MAHkB,SAGZ34B,EAAO44B,GACZ,MASIA,EAAQG,UARJqkB,EADR,EACCtkC,MAKSukC,EANV,EAMC5T,QACI6T,EAPL,EAOCp8C,GACOq8C,EARR,EAQCxkC,MAGOigB,EAOJh5B,EAPH8Y,MACS0kC,EAMNx9C,EANHypC,QACIgU,EAKDz9C,EALHkB,GACOw8C,EAIJ19C,EAJH+Y,MACAZ,EAGGnY,EAHHmY,MACAu1B,EAEG1tC,EAFH0tC,KACAl0B,EACGxZ,EADHwZ,aAEKmkC,EAAW,CAChBb,IAAYlzC,MACZkzC,IAAY5yC,aACZ4yC,IAAY3yC,aACZ2yC,IAAY1yC,cAEP0+B,EAAgC,gBAAhB9oC,EAAMgE,MACtBoN,EACW,gBAAhBpR,EAAMgE,MAA0BmU,EAAMC,mBAAqBD,EAAM/G,QAC5D7J,EAAcvH,EAAMypC,QAAUr4B,EAAQpR,EAAMypC,SAAW,KAI7D,GAAuB,eAAnB8T,EAAUp8C,MAOTusC,EAAL,CACA,GAAI6P,EAAUp8C,OAAS27C,IAAYjzC,KAAM,CACxC,GAAiB,IAAb6jC,EAAK1Y,MAAcuoB,EAAUtT,MAAO,OACxC,GAAIyD,EAAKriC,KAAM,CACd,IAAIuyC,EAAWrU,KAAK/9B,IAAL,MAAA+9B,KAAI,YAAQmE,EAAKriC,KAAKpE,KAAI,SAAC0tB,GAAD,OAAOA,EAAE8Z,cAClD,GAAIf,EAAK1Y,IAAM4oB,EACd,QAMH,GAAIL,EAAUp8C,OAAS27C,IAAYlzC,MAAO,CACzC,IAAQyB,EAAcqiC,EAAdriC,KAAM2pB,EAAQ0Y,EAAR1Y,IACR6oB,EAAUxyC,GAAQA,EAAK/C,MAAK,SAACI,GAAD,OAAOA,EAAEvH,OAAS27C,IAAYjzC,QAChE,GAAIg0C,GAAWA,EAAQpP,SAAWzZ,EACjC,OAKF,GAAI7c,EAAMtX,YAAcE,IAAWC,MAAS8nC,EAA5C,CAGA,GAAI,CAACgU,IAAYp1C,QAASo1C,IAAYr1C,SAASzC,SAASu4C,EAAUp8C,MAAO,CACxE,IAGM28C,EAHMtqC,OAAOG,OAAOwE,EAAM/G,SAAW,IAAI9I,MAAK,SAAC03B,GAAD,MACnD,CAAC8c,IAAYp1C,QAASo1C,IAAYr1C,SAASzC,SAASg7B,EAAE7+B,SAEhC,EAAI,EAC3B,GAAIq8C,EAAc,OAClB,IAAK9P,EAAM,OACX,GAAIA,EAAK1Y,IAAM8oB,GAAyB,IAAbpQ,EAAKqI,IAAW,OAE5C,IACE59B,EAAMtX,YAAcE,IAAWE,SAAU6nC,IAC1C,CAACgU,IAAYp1C,QAASo1C,IAAYr1C,SAASzC,SAASu4C,EAAUt5C,eAK7D,CAAC64C,IAAYxyC,SAAUwyC,IAAYzyC,KAAMyyC,IAAYvyC,SAASvF,SAC9Du4C,EAAUt5C,cAEXsD,GACAA,EAAYpG,OAAS27C,IAAYzyC,SAKjC,CAACyyC,IAAYxyC,SAAUwyC,IAAYvyC,SAASvF,SAC3Cu4C,EAAUt5C,aAETsD,GAAeA,EAAYpG,OAAS27C,IAAYzyC,SAKlD,CAACyyC,IAAYzyC,MAAMrF,SAASu4C,EAAUt5C,aACpCsD,GACA,CAACu1C,IAAYzyC,KAAMyyC,IAAYp1C,SAAS1C,SAASuC,EAAYpG,UAK/DoG,GACAA,EAAYpG,OAAS27C,IAAYp1C,SACjC61C,EAAUp8C,OAAS27C,IAAYzyC,SAK/B9C,GACAA,EAAYpG,OAAS27C,IAAYr1C,SACjC81C,EAAUp8C,OAAS0J,IAAWhL,UAK7B0H,GACA,UACGo2C,EADH,CAEAb,IAAYjzC,KACZizC,IAAY7yC,WACZ6yC,IAAYp1C,QACZo1C,IAAYr1C,UACXzC,SAASu4C,EAAUp8C,UAMrBoG,GACAA,EAAYpG,OAAS27C,IAAY7yC,YAChC0zC,EAAS34C,SAASu4C,EAAUp8C,UAK7BoG,GACAA,EAAYpG,OAAS27C,IAAYjzC,MAChC8zC,EAAS34C,SAASu4C,EAAUp8C,OAH9B,CAOA,GACCgX,EAAMtX,YAAcE,IAAWE,QACf,gBAAhBjB,EAAMgE,MACL,CAED,GACC,CACC84C,IAAY5yC,aACZ4yC,IAAY1yC,aACZ0yC,IAAY3yC,aACZ2yC,IAAY7yC,YACXjF,SAASu4C,EAAUp8C,MAErB,OAGD,IAAMiQ,EACW,gBAAhBpR,EAAMgE,MACHmU,EAAMC,mBACND,EAAM/G,QACJ2sC,EACW,gBAAhB/9C,EAAMgE,MAA0BmU,EAAMyB,iBAAmBzB,EAAMlM,MAKhE,IADQ,IAFPuH,OAAOC,KAAKrC,GAAS0R,WACpB,SAACk7B,GAAD,OAAe5sC,EAAQ4sC,GAAW78C,OAAS27C,IAAYjzC,SAIxD0zC,EAAUp8C,OAAS27C,IAAYjzC,MAC/B0zC,EAAUtT,MAEV,OAED,GACC,CAAC6S,IAAYlzC,MAAOkzC,IAAYjzC,MAAM7E,SAASu4C,EAAUp8C,OACzDnB,EAAMypC,UACLsU,EAAW/4C,SAAShF,EAAMypC,SAE3B,OAGD,GACCliC,GACAg2C,EAAUp8C,OAAS27C,IAAYlzC,OAC/BrC,EAAYpG,OAAS27C,IAAYjzC,KAEjC,OAED,GACCtC,GACAg2C,EAAUp8C,OAAS27C,IAAYjzC,MAC/BtC,EAAYpG,OAAS27C,IAAYlzC,MAEjC,OAED,IACA,EADsBuO,EAAdkwB,UACA77B,mBAAR,MAAsB,KAAtB,EACM69B,EAAS59B,KAAKkY,MAAMnY,GAM1B,IACCjF,GACAg2C,EAAUp8C,OAAS27C,IAAYlzC,OAC/BrC,EAAYpG,OAAS27C,IAAYjzC,MAC/BwgC,EAAO3oC,KAAsB,SAAf2oC,EAAO3oC,KAMjB,IACL6F,GACDg2C,EAAUp8C,OAAS27C,IAAYlzC,SAC7BygC,EAAO3oC,KAAsB,UAAf2oC,EAAO3oC,KACtB,CACD,IAAMu8C,EAAkBxxC,KAAKkY,MAAM44B,EAAU/wC,aAAe,MAC/B,SAA7B,UAAGyxC,EAAgBv8C,MAClB8X,EAAa,CACZhN,YAAaC,KAAKC,UAAU,CAAEhL,IAAK,kBAZrC8X,EAAa,CACZrZ,MAAOo9C,EAAUp9C,OAAS+gB,YAAU,OACpC1U,YAAaC,KAAKC,UAAU,CAAEhL,IAAK,gBAcrC,GAAI1B,EAAMypC,QAAS,CAClB,IAAMliC,EAAc6J,EAAQpR,EAAMypC,SAClC,GACCliC,GACA,CAACu1C,IAAYjzC,KAAMizC,IAAY7yC,YAAYjF,SAASu4C,EAAUp8C,MAE9D,OAED,GACC,CACC27C,IAAY5yC,aACZ4yC,IAAY3yC,aACZ2yC,IAAY1yC,cACXpF,SAASuC,EAAYpG,MAEvB,OAIH,KAA8B,IAA1Bo8C,EAAU3a,aAAyC,gBAAhB5iC,EAAMgE,UAQ3Cy5C,IAAYH,GAAUD,IAAgBG,IACtCD,EAAUtxC,OAAS,IAAIrK,QAAQ67C,IAAY,IAC3C7kB,EAAQslB,OAAO,CAAEC,SAAS,KAC1BZ,EAAUp8C,OAAS27C,IAAYhzC,OAC/B4zC,EAAWv8C,OAAS27C,IAAY9yC,MAChCuzC,EAAUp8C,OAAS27C,IAAYhzC,YAAyBsC,IAAhBpM,EAAM6qC,OAC9C7qC,EAAMmY,MAAMe,aACZlZ,EAAMmY,MAAMe,YAAYhY,KAAOu8C,GAC/Bz9C,EAAMmY,MAAMe,YAAYJ,QAAUkgB,GAClCh5B,EAAMmY,MAAMe,YAAYuwB,UAAY+T,GAVtC,CAeA,GAAIF,IAAWt9C,EAAMmY,MAAMc,WAC1B,IAAK,IAAD,YACG6f,GACL,UAAA94B,EAAM0tC,KAAKriC,YAAX,mBAAiB/C,MAAK,SAACC,GAAD,OAAUA,EAAKrH,KAAOo8C,YAA5C,eAAqDxP,aACrDsP,EAED,GAAIE,IAAWC,EAAUtT,OAASoT,IAAgBG,IAC7C1kB,EAAY,IAAME,GAAcF,EAAY,IAAME,GAErD,YADAh5B,EAAMmY,MAAMe,aAAelZ,EAAMsZ,QAAQ,OAK3C,GACCo0B,EAAK8K,eACJ,UAAA9K,EAAKriC,YAAL,mBAAY2tB,EAAa,UAAzB,eAA6B73B,QAAS27C,IAAYjzC,MACjDmvB,IACA,UAAA0U,EAAKriC,YAAL,mBAAY2tB,EAAa,UAAzB,eAA6B73B,QAAS27C,IAAYjzC,MAGpD,YADA7J,EAAMmY,MAAMe,aAAelZ,EAAMsZ,QAAQ,OAItBtZ,EAAMoZ,OACzB,CACCyT,OAAQ,CACP4c,QAAS4T,EACTvkC,MAAOggB,EACP53B,GAAIo8C,EACJvkC,MAAOwkC,GAER1T,YAAa,CACZJ,QAAS+T,EACT1kC,MAAOkgB,EACP93B,GAAIu8C,EACJ1kC,MAAO2kC,EACP15C,MAAOhE,EAAMgE,SAGf,EACAhE,EAAMgE,OAjBC+lC,SAmBO/pC,EAAMsZ,QACpBtZ,EAAMsZ,QAAQ,CACbo0B,KAAM1tC,EAAM0tC,MAAQ,GACpBxsC,GAAIu8C,EACJ3kC,MAAOkgB,EACPyQ,QAAS+T,EACT/nC,UACCzV,EAAMy4C,cACuB,MAA5B,UAAGz4C,EAAMy4C,eACT,UAAGz4C,EAAMy4C,gBAAT,UAA+B8E,EAAUzxC,eAC1BM,IAAhBpM,EAAM6qC,OACe,YAAX,OAAV6S,QAAU,IAAVA,OAAA,EAAAA,EAAYv8C,OACe,YAAjB,OAAVu8C,QAAU,IAAVA,OAAA,EAAAA,EAAYz5C,YAET,UADA,MAEJ8U,MAAO2kC,EACP15C,MAAOhE,EAAMgE,QAGdhE,EAAMmY,MAAMe,aAAelZ,EAAMsZ,QAAQ,MAEzC,MAAOpJ,IAGV,GAAI3I,GAAeA,EAAYiF,YAAa,CAC3C,IAAI4xC,EAAoB3xC,KAAKkY,MAAMpd,EAAYiF,aAAe,MAC1D6xC,EAAuB5xC,KAAKkY,MAAM44B,EAAU/wC,aAAe,MAC/D,GACC4xC,EAAkBxxC,WACjByxC,EAAqBvyC,SACtB,CAAC,cAAe,gBAAgB9G,SAASu4C,EAAUt5C,YAClD,CAMD,IAAM8U,EAAQtM,KAAKkY,MAAM44B,EAAU/wC,aAAe,MAOlDgN,EANmB,CAClBhN,YAAaC,KAAKC,UAAL,2BACTqM,GADS,IAEZjN,QAASsyC,EAAkBxxC,qBAOhC0xC,QA3WkB,SA2WVt+C,EAAO44B,GAAU,IAAD,EACvB,MAA2B,UAAlB,OAAL54B,QAAK,IAALA,GAAA,UAAAA,EAAO+Y,aAAP,eAAc5X,QAIdwjB,EAAQ,SAACuL,GACd,OAAOzjB,KAAKkY,MAAMuL,GAAQ,OAG3B,SAAS9sB,EAAOpD,GACf,IACCkB,EAeGlB,EAfHkB,GACA24B,EAcG75B,EAdH65B,WACAtC,EAaGv3B,EAbHu3B,kBACAC,EAYGx3B,EAZHw3B,kBACA+mB,EAWGv+C,EAXHu+C,YACAC,EAUGx+C,EAVHw+C,QACA3T,EASG7qC,EATH6qC,MACAlyB,EAQG3Y,EARH2Y,UACW8lC,EAORz+C,EAPH64B,UATD,EAgBI74B,EANH+Y,aAVD,MAUS,GAVT,EAWCZ,EAKGnY,EALHmY,MACA1H,EAIGzQ,EAJHyQ,OACA8I,EAGGvZ,EAHHuZ,eAbD,EAgBIvZ,EAFHqY,iBAdD,MAca,GAdb,EAeIoM,EAfJ,YAgBIzkB,EAhBJ,GAiBQiZ,EAA6Cd,EAA7Cc,WAAYqxB,EAAiCnyB,EAAjCmyB,gBAAiBpxB,EAAgBf,EAAhBe,YACrC,EAAgCW,IAAMG,SAAS,MAA/C,mBAAOuiC,EAAP,KAAiBmC,EAAjB,KAEM1U,EACU,gBAAfvlB,EAAKzgB,MAA0BmU,EAAMC,mBAAqBD,EAAM/G,QAM3DkL,EAAc,WACnBoiC,EAAY,OA0Cb7kC,IAAMrB,WAAU,WACf/H,GAAO,SAACS,GACPA,EAAMgI,cAAgBhI,EAAMgI,YAAYylC,QAAUH,QAEjD,CAAC/tC,EAAQ+tC,EAASt9C,EAAI+X,EAAYF,IAErC,IAAI6lC,EAAgBC,EAAS9lC,EAAM5X,OAAS09C,EAAS/0C,MAEjD2a,EAAK0sB,QAAU0N,EAAS9lC,EAAM5X,QACjCy9C,EAAgBC,EAAQ,OAGzB,MACCD,EADgBzI,EAAjB,EAAMtd,UAAN,IAAkC74B,MAAO8+C,OAAzC,MAA0D,GAA1D,EAGIL,IACHtI,EAAkBsI,GAGnB,IAAIM,GAAc,EACdvrC,OAAOG,OAAOlI,IAAIC,eAAe9J,QAAQV,IAAO,IACnD69C,GAAc,EACdvnB,EAAoB,SAACtnB,GAAD,OAAOA,IAE5B,IAAM8uC,EAASD,GAAe5mC,EAAMgB,aAAejY,EAC7C+9C,OAAwB7yC,IAAVy+B,EACdqU,IAAqBD,IAAex6B,EAAK0sB,MACzCgO,EACLJ,GACApgB,OAAOz9B,GAAM,IACZg+C,GACDz6B,EAAK5M,SACc,IAAnB4M,EAAKi0B,UAWN,IATCwG,GACCh+C,GACAA,IAAOuK,IAAIzB,MACG,kBAAP9I,GACc,WAArB6X,EAAM9U,YACS,WAAf8U,EAAM5X,QAEPq2B,EAAoB,SAACtnB,GAAD,OAAOA,KAEN,IAAlB6I,EAAMqmC,UAAuB36B,EAAK5M,QAAUpM,IAAI1B,UAAY,OAAO,KAEvE,IAAMs1C,EACL56B,EAAK0sB,OAA4D,SAAnD,UAAG1kC,KAAKkY,MAAM5L,EAAMvM,aAAe,MAAM9K,KAExD,OACC,kBAAC,IAAMmgB,SAAP,KACE0V,EACAC,EACC,yCACKsnB,EADL,CAECnmC,UAAWC,IACVD,EACA,SACAmmC,EAAenmC,UACf,CACC,eAAgBI,EAAMumC,QACtB,gBACgB,WAAfvmC,EAAM5X,MAA0C,WAArB4X,EAAM9U,WAClCs7C,KAAMP,EACNT,YAAaA,EACbC,QAASA,EACTgB,OAAQT,GAAellB,EACvB,aAAcklB,EACd,cAA8B,UAAfhmC,EAAM5X,KACrB,kBACgB,UAAf4X,EAAM5X,OAAqBk+C,IAAWtmC,EAAM5Y,MAC7C,cAA8B,UAAf4Y,EAAM5X,OAAqBk+C,GAAUtmC,EAAM5Y,MAC1D,cAAeqnB,QAAQnP,EAAUnX,IACjC,gBAAiBujB,EAAKoe,iBAGxB7+B,MAAOygB,EAAKzgB,MACZ0a,QAAS,SAACxO,GACL6uC,GAAet6B,EAAKzL,WACvB9I,EAAE8rC,kBAEkB,gBADLhS,GAAYA,EAAS9oC,IACzBC,MAAyBD,IAAOuK,IAAI1B,WAC9C0a,EAAKzL,SAAS,CAAE9X,KAAIC,KAAMsjB,EAAKzgB,SAG7Bi7C,IACH/uC,EAAE8rC,kBACE96C,IAAOuK,IAAI1B,WAAaigC,EAASa,IACpCtxB,EAAe,CACdrY,GAAI2pC,EACJ7qC,MAAO,CACNyY,QAASvX,EACT8C,MAAOygB,EAAKzgB,cAOfk7C,GACD/mC,EAAMe,aACQ,kBAAPhY,GACPy9B,OAAOz9B,IAAO,GACdiX,EAAMe,YAAYJ,QAAU2L,EAAK3L,QACH,IAA9BX,EAAMe,YAAYylC,SAClBxmC,EAAMe,YAAYuwB,UAAYhlB,EAAKglB,SAClC,yBACC9wB,UAAWC,IACV,cACA,CAAE,eAAgBG,EAAMumC,SAAkB,IAAPp+C,GACnCiX,EAAMe,YAAYzD,SAClB,CAAE,UA7IU,WAAO,IAAD,cAC1B,GACoC,YAAxB,OAAXyD,QAAW,IAAXA,GAAA,UAAAA,EAAaH,aAAb,eAAoB9U,aACS,YAAlB,OAAXiV,QAAW,IAAXA,GAAA,UAAAA,EAAaH,aAAb,eAAoB5X,QADpB,OAEA+X,QAFA,IAEAA,GAFA,UAEAA,EAAaw0B,YAFb,aAEA,EAAmB8K,aAEnB,OAAO,EAER,IAAMiH,EAC0B,kBAA/B,OAAOnV,QAAP,IAAOA,OAAP,EAAOA,EAAiBppC,KACxB,CAAC,cAAe,gBAAgB8D,SAAhC,OACCslC,QADD,IACCA,GADD,UACCA,EAAiBvxB,aADlB,aACC,EAAwB9U,iBAEtBmI,EACAuY,EAAK,OAAC2lB,QAAD,IAACA,GAAD,UAACA,EAAiBvxB,aAAlB,aAAC,EAAwBvM,aAAaV,QAEzC4zC,EAA4B/6B,EAAK,WACrCqlB,GAAY,IAAb,OAAiB9wB,QAAjB,IAAiBA,OAAjB,EAAiBA,EAAauwB,gBADQ,aACtC,EAAwCj9B,aACvCI,SAEIA,EAAW6yC,GAA0BC,GAA6B,EAGxE,SAFe,OAAGxmC,QAAH,IAAGA,GAAH,UAAGA,EAAaw0B,YAAhB,aAAG,EAAmB5hC,SAErBc,GAsHK+yC,OAIhBxJ,GACA,kBAACA,EAAD,eACCj1C,GAAIA,EACJ24B,WAAY1hB,EAAMc,aAAe/X,EACjC6X,MAAOA,EACP/U,MAAOygB,EAAKzgB,MACZqU,UAAWA,EACXqgC,UAAWj0B,EAAKi0B,UAChBhB,UAAW3+B,EAAM5X,OAAS27C,IAAYp1C,SAClC+c,IAGL06B,IAAehnC,EAAMc,YACrB,0BACCyF,QA/KoB,SAACuJ,GAC3By2B,EAAYz2B,EAAM23B,gBA+KZjnC,UAAU,gBACVxY,MAAO+gB,YAAU,kBAEjB,uBAAGvI,UAAU,kBAGd4jC,GACA,kBAACD,EAAD,CACCC,SAAUA,EACVjgC,YAAaA,EACbkgC,UAlLW,WACb/3B,EAAKqmB,WACRrmB,EAAKqmB,SAASrmB,EAAKglB,QAAShlB,EAAK3L,MAAO5X,EAAIujB,EAAKzgB,OACjDsY,YAyLH,IAAMujC,EAAe,SAAC7/C,GAAD,OACpB,kBAACoD,EAAD,iBACKpD,EADL,CAECw3B,kBAAmB,SAACtnB,GAAD,OAAOA,GAC1BqnB,kBAAmB,SAACrnB,GAAD,OAAOA,OAItB4vC,EAAkBC,YACvBrnB,YAAWlxB,EAAM21C,GAAY,SAAC3jB,EAASZ,GAAV,MAAuB,CACnD2lB,aAAa,EACbC,QAAS5lB,EAAQslB,SACjB1mB,kBAAmBgC,EAAQC,iBAE5BC,YAAWlyB,EAAMo1C,GAAY,SAACpjB,EAASZ,GAAV,MAAuB,CACnDrB,kBAAmBiC,EAAQI,aAC3BC,WAAYjB,EAAQiB,iBAREkmB,CAUtB38C,GAEW+yC,EAAkB,SAACn2C,GAC/B,IAAM8X,EAAQC,cACNI,EAAUL,EAAVK,MACF6xB,EACW,gBAAhBhqC,EAAMgE,MAA0BmU,EAAMC,mBAAqBD,EAAM/G,QAC5D2H,EACLixB,GAAYA,EAAShqC,EAAMkB,IAAM8oC,EAAShqC,EAAMkB,IAAMlB,EAAM+Y,OAAS,GAChE2Y,EAAM,2BAAQ5Z,GAAR,IAAeiB,UACrB2+B,EAAY3+B,EAAM5X,OAAS27C,IAAYp1C,QAE7C,OAAI1H,EAAM6X,QAAU6/B,EACZ,kBAACoI,EAAD,iBAAqBpuB,EAAY1xB,IAClC,kBAAC,EAAD,iBAAkB0xB,EAAY1xB,KAGvB6Z,cAAMC,KAAKq8B,I,wICnpBX6J,IA1Df,YAA6E,EAApDjnC,MAAqD,IAAD,IAAxC9M,aAAwC,MAAhC,GAAgC,EAA5B4L,EAA4B,EAA5BA,OAAQzG,EAAoB,EAApBA,QAAYqT,EAAQ,iBAEtEw7B,EAAYpmC,IAAMiY,SAAQ,WAC/B,IAAMrkB,EAAUxB,EAAMxD,QACrB,SAAC+jB,GAAD,OAAOpb,EAAQob,IAAM,CAAC,QAAQ,GAAMxnB,SAASoM,EAAQob,GAAG/e,YAEnDyyC,EAAYj0C,EAAMxD,QACvB,SAAC+jB,GAAD,OAAOpb,EAAQob,KAAO,CAAC,QAAQ,GAAMxnB,SAASoM,EAAQob,GAAG/e,YAI1D,OAFmBA,EAAQvJ,OAAS,EAGjC,CACA+H,MAAO,CACN,CACCC,OAAQhB,IAAWG,KACnBY,MAAOi0C,EACPp0C,QAAS,GAEV,CACCI,OAAQhB,IAAWG,KACnBY,MAAOwB,EACP3B,QAAS,KAIX,CACAG,MAAO,CACN,CACCC,OAAQhB,IAAWG,KACnBY,MAAOi0C,EACPp0C,QAAS,QAIZ,CAACG,EAAOmF,IAEX,OACC,yBAAKuH,UAAU,kBACbsnC,EAAUh0C,MAAMhF,KAAI,WAA+BE,GAA/B,IAAG8E,EAAH,EAAGA,MAAOH,EAAV,EAAUA,QAAYiN,EAAtB,wBACpB,yBAAKJ,UAAS,yBAAoB7M,GAAWsT,IAAKjY,GACjD,kBAAC,IAAD,CACCiY,IAAKjY,EACL0Q,OAAQA,EACRc,UAAU,YACV1M,MAAOA,EACP8M,MAAOA,EACP/U,MAAOygB,EAAKzgB,MACZoN,QAASA,EACTiH,UAAWoM,EAAKpM,UAChBqgC,UAAWj0B,EAAKi0B,mB,2JCrDhB5pC,EAAkB,IAAIJ,IAAc,CACzCrC,MAAO,gCAEF8zC,EAAkB,CAAC,QAAS,QAAS,SAAU,UAE/CC,EAAa,SAAC73C,GACnB,OACE43C,EAAgBn7C,SAASuD,EAAKpH,OAASoH,EAAK83C,gBAAkB93C,EAAKiF,QAwIvD8yC,MApIf,YAAiD,IAAdvnC,EAAa,EAAbA,MAAO7X,EAAM,EAANA,GACzC,EAOI6X,GAAS,GANZ6a,EADD,EACCA,SACazV,EAFd,EAEC2G,YACA3kB,EAHD,EAGCA,MACA6yC,EAJD,EAICA,UACAxgC,EALD,EAKCA,OACA+tC,EAND,EAMCA,gBAED,EAAkCvmC,mBAAS,IAA3C,mBAAOwmC,EAAP,KAAkBC,EAAlB,KACA,EAAkCzmC,mBAAS,MAA3C,mBAAO0mC,EAAP,KAAkBC,EAAlB,KA8FA,OA5FAnoC,qBAAU,WAAM,4CACf,sCAAA/I,EAAA,yDACKokC,EAAWjgB,GACXphB,EAFL,uBAMQpT,EAAO,CACZoT,SACAnG,MAAO,gCACPjN,KAAM,CACLqT,QAPe,CAChBF,IAAK,QAJR,SAc6BzD,EAAgB0D,OAAOpT,GAdpD,QAcQwhD,EAdR,QAgBgBxhD,MACbwhD,EAAaxhD,KAAK,IAClBwhD,EAAaxhD,KAAK,GAAG4T,MACrB4tC,EAAaxhD,KAAK,GAAG4T,KAAKG,QAEpBH,EAAO4tC,EAAaxhD,KAAK,GAAG4T,KAAKG,MAAM7K,MAC5C,SAAC8lB,GAAD,MAAkB,SAAXA,EAAEjtB,WAGT0yC,EAAW7gC,EAAK9S,MAzBpB,WA6BKqgD,EA7BL,oBA+BOA,EAAgBrgD,OAAQqgD,EAAgBr/C,GA/B/C,kCAgCiBwR,YAAiB6tC,EAAgBr/C,IAhClD,QAgCGmL,EAhCH,eAkCEwnC,EAAWhgB,YACVxnB,GAASk0C,GACT,GACA,GArCH,QAwCO3uC,EAAU,CACfvF,MAAO8R,EACP/e,KAAM,CACL+B,KAAM,OACNjB,KAAM2zC,IAGJA,EACH/kC,EAAgBkE,KAAKpB,GAASb,MAAK,SAACpB,GACnC,GAAIA,EAAIvQ,MAAQuQ,EAAIvQ,KAAK4T,KAAM,CAC9B,MAA8BrD,EAAIvQ,KAAK4T,KAAvC,IAAQ/G,aAAR,MAAgB,GAAhB,EAAoB9L,EAApB,EAAoBA,MAEpB,GADAwgD,EAAaxgD,GACTogD,EAAiB,CACpB,IAAMC,EAAY,GAUlB,OATAv0C,EAAM0e,SAAQ,SAACpiB,GACd,MAA4BA,EAApBs4C,iBAAR,MAAqB,GAArB,GACWl2B,SAAQ,SAACxjB,GACfi5C,EAAWj5C,IACdq5C,EAAU5vC,KAAKzJ,cAIlBs5C,GAAa,8BAAWD,GAAa,OAGtC,MAAwC7wC,EAAIvQ,KAA5C,IAAQyQ,cAAR,MAAiB,GAAjB,MAAqBixC,iBAArB,MAAiC,GAAjC,EACIC,EAAgB,GACpBlxC,EAAO8a,SAAQ,SAAC7gB,GACfi3C,EAAcj3C,EAAM5J,MAAQ4J,EAAM3J,SAEnC,IAAM6gD,EAAY/0C,EAAMhF,KAAI,SAACE,GAC5B,OAAO,2BAAKA,GAAZ,IAAehH,MAAO4gD,EAAc55C,EAAEjH,WAGnC4gD,GAAaA,EAAU58C,OAAS,GACnC48C,EAAUn2B,SAAQ,SAACxjB,GACdi5C,EAAWj5C,IACd65C,EAAUpwC,KAAKzJ,MAIlBs5C,EAAaO,OAIfP,EAAa,IArFf,6CADe,uBAAC,WAAD,wBAyFfQ,KACE,CAACrtB,EAAUzV,EAAQoiC,EAAiBr/C,EAAIsR,IAG1C,6BACC,yBAAKmG,UAAU,sBACd,8BAAOuI,YAAU/gB,GAASugD,GAAa1N,KAExC,+BACC,2BAAOr6B,UAAU,mBACf,YAAI5R,MAAM,IAAIE,KAAI,SAACiJ,EAAG4I,GAAJ,OAClB,wBAAIxD,MAAO,CAAEsB,QAAS,QAAUwI,IAAG,cAAStG,IAC1C0nC,EAAUv5C,KAAI,SAACsB,EAAMpB,GAAP,OACd,wBACCwR,UAAU,yCACVyG,IAAG,aAAQjY,GACXmO,MAAO,CAAE8F,aAAwB,IAAVtC,EAAc,iBAAmB,KAE7C,IAAVA,GAAevQ,EACb2Y,YAAU3Y,EAAKpI,OAASoI,EAAKyqC,WAC7B,e,yCC3GCkO,EAAY,SAAClhD,GACzB,OACC,yCAAOmB,KAAK,OAAO6e,aAAa,OAAUhgB,EAA1C,CAAiD2Y,UAAU,iBAKhDwoC,EAAiB,SAACnhD,GAC9B,OAAO,4CAAUm7B,KAAM,GAAOn7B,KAIlBohD,EAAS,SAACphD,GAAD,OAAW,yBAAK2Y,UAAU,YAEnC0oC,EAAY,SAACrhD,GAAD,OACxB,yBAAK2Y,UAAU,UACd,wBAAIA,UAAU,sBAIH6O,EAAU,SAAC,GAAD,IAAGhF,EAAH,EAAGA,WAAexiB,EAAlB,wBACtB,yBAAK2Y,UAAU,mBACd,2CAAW6J,EAAX,CAAuBrhB,KAAK,cAC5B,0BAAMwX,UAAU,eAAexY,MAAO+gB,YAAUlhB,EAAMG,OAASH,EAAME,OACnEghB,YAAUlhB,EAAMG,OAASH,EAAME,SAMtB2f,EAAS,SAAC,GAAD,IAAG1f,EAAH,EAAGA,MAAUH,EAAb,wBACrB,yBAAK2Y,UAAU,oBACd,4CAAY3Y,EAAZ,CAAmB2Y,UAAU,cAAcxY,MAAO+gB,YAAU/gB,KAC1D+gB,YAAU/gB,MAKDmhD,EAAW,SAAC,GAAD,IAAGnhD,EAAH,EAAGA,MAAH,wBACvB,yBAAKwY,UAAU,uBAAuBuI,YAAU/gB,KAGpCohD,EAAS,SAAC,GAAmC,IAAjCxhC,EAAgC,EAAhCA,MAAOjF,EAAyB,EAAzBA,WAAY0mC,EAAa,EAAbA,OAC3C,OACC,yBACC7oC,UAAWC,IAAW,mCAAD,OACekC,EADf,wBACyCiF,GAC7D,CAAE,gBAAiByhC,KAHrB,WA6Fa1f,IA9Ef,YAAwC,IAAd5gC,EAAa,EAAbA,GAAI6X,EAAS,EAATA,MAE7B,GAAI7X,IAAOuK,IAAI1B,UACd,OAAO,yBAAK4O,UAAU,eAGvB,IAxFyB3Y,EAwFjBE,EAAgE6Y,EAAhE7Y,KAAMC,EAA0D4Y,EAA1D5Y,MAAO8D,EAAmD8U,EAAnD9U,WAAY6J,EAAuCiL,EAAvCjL,UAAW3M,EAA4B4X,EAA5B5X,KAAM6xC,EAAsBj6B,EAAtBi6B,UAAW9tB,EAAWnM,EAAXmM,OACvD1C,GAzFmBxiB,EAyFW+Y,EAxFpB,CACf,OACA,QACA,eACA,cACA,WACA,UACA,WACA,OACA,YAGcstB,QAAO,SAAC1e,EAAK8D,GAK3B,YAJoBrf,IAAhBpM,EAAMyrB,KAAqB9D,EAAI8D,GAAQzrB,EAAMyrB,IACpC,aAATA,IACH9D,EAAI8D,GAAwB,SAAhBzrB,EAAMyrB,IAEZ9D,IACL,KAuEC3jB,EACHC,GAA6B,UAAfA,EAAyBA,EAAW4gB,cAAgB1jB,EAC7DsgD,EAAgB,kBACrB,kBAAC,IAAM5/B,SAAP,KAEE,2BACClJ,UAAU,eACVxY,MAAO+gB,YAAU/gB,GAAS4Y,EAAMi6B,WAAa9yC,IAE5CghB,YAAU/gB,GAAS4Y,EAAMi6B,WAAa9yC,IAGxC4N,EACA,kBAAC,EAAmB0U,GACA,UAAjBzJ,EAAMmM,OACT,yBACCw8B,IAAKvhD,GAAS4Y,EAAMi6B,WAAa9yC,EACjCyhD,IAAI,yBACJhpC,UAAU,iBAGX,kBAAC,EAAD,eACCxX,KAAM8C,IAAe4G,IAAWC,OAAS,SAAW,QAChD0X,MAMR,cAAQxe,QAAR,IAAQA,OAAR,EAAQA,EAAO6gB,eACd,KAAKha,IAAWxL,QACf,OACC,kBAAC,EAAD,CACCc,MAAOA,GAAS6yC,EAChB9yC,KAAMA,EACNsiB,WAAYA,IAGf,KAAK3X,IAAWE,OACf,OAAO,kBAAC,EAAD,MACR,KAAKF,IAAWI,OACf,OAAO,kBAAC,EAAW8N,GACpB,KAAKlO,IAAWG,UAChB,KAAKxD,IAAK+C,QACT,OAAO,kBAAC,EAAD,MACR,KAAK/C,IAAK8C,SACT,OAAO,kBAAC,EAAD,CAAUnK,MAAOA,IACzB,KAAK0K,IAAWhL,OACf,OAAO,kBAAC,EAAD,iBAAY2iB,EAAZ,CAAwBriB,MAAOA,GAASD,KAChD,IAAK,YACL,IAAK,QACJ,OAAO,0BAAM4wB,wBAAyB,CAAEC,OAAQ5wB,KAEjD,IAAK,gBACL,IAAK,gBACL,IAAK,cACL,IAAK,mBACJ,OAAO,kBAAC,EAAD,CAAyB4Y,MAAOA,EAAO7X,GAAIA,IACnD,IAAK,eACL,IAAK,oBACJ,MAAkB,cAAXgkB,EACN,kBAAC,EAAD,CAAyBnM,MAAOA,EAAO7X,GAAIA,IAE3C,kBAACugD,EAAD,MAEF,QACC,OAAO,kBAACA,EAAD,S,gCCnKV,+EAEanf,EAAa,CACzB,CACCpiC,KAAM,SACNuB,MAAO,CACN,CACCvB,KAAM,QACNC,MAAO,QACPgB,KAAM,QACN6K,MAAO,YACP9K,GAAIuK,IAAIC,cAAc5B,MACtB7F,WAAY,QACZ6H,QAAS,GAEV,CACC5L,KAAM,SACNiB,KAAM,SACNhB,MAAO,SACP6L,MAAO,aACP9K,GAAIuK,IAAIC,cAAc5B,MACtB7F,WAAY,SACZ6H,QAAS,GAEV,CACC5L,KAAM,YACNiB,KAAM,YACNhB,MAAO,YACP6L,MAAO,gBACP9K,GAAIuK,IAAIC,cAAc5B,MACtB7F,WAAY,YACZ6H,QAAS,GAEV,CACC5L,KAAM,YACNC,MAAO,YACPgB,KAAMqJ,IAAUG,KAChBqB,MAAO,qBACP9K,GAAIuK,IAAIC,cAAc5B,MACtB7F,WAAY,SACZs3B,kBAAkB,EAClBzvB,QAAS,KAIZ,CACC5L,KAAM,SACNuB,MAAO,CACN,CACCvB,KAAM,QACNiB,KAAMqJ,IAAUC,UAChBwB,MAAO,GACPD,MAAO,YACP9K,GAAIuK,IAAIC,cAAc9B,MACtB3F,WAAYuD,IAAKoC,MACjBmC,KAAM,GACNG,OAAQ,OACRJ,QAAS,IAEV,CACC5L,KAAM,OACNiB,KAAMqG,IAAKqC,KACXmC,MAAO,iBACPtK,KAAK,EACLuK,MAAO,GACP/K,GAAIuK,IAAIC,cAAc7B,KACtB5F,WAAYuD,IAAKoC,MACjBqgC,OAAO,EACPn+B,QAAS,GACT3L,MAAO,OACPsY,QAAS,KACTvM,OAAQ,WAMCq2B,EAAc,CAC1B,CACCriC,KAAM,SACNuB,MAAO,CACN,CACCvB,KAAM,SACNiB,KAAMqJ,IAAUG,KAChBxK,MAAO,SACP6L,MAAO,aACP9K,GAAIuK,IAAIC,cAAc5B,MACtBqqC,cAAc,EACdlwC,WAAY,SACZ6H,QAAS,GAEV,CACC5L,KAAM,UACNiB,KAAMqJ,IAAUG,KAChBxK,MAAO,UACP6L,MAAO,cACP9K,GAAIuK,IAAIC,cAAc5B,MACtBqqC,cAAc,EACdlwC,WAAY,UACZ6H,QAAS,GAEV,CACC5L,KAAM,UACNiB,KAAMqJ,IAAUG,KAChBxK,MAAO,UACP6L,MAAO,cACP9K,GAAIuK,IAAIC,cAAc5B,MACtBqqC,cAAc,EACdlwC,WAAY,UACZ6H,QAAS,GAEV,CACC5L,KAAM,UACNiB,KAAMqJ,IAAUG,KAChBxK,MAAO,UACP6L,MAAO,cACP9K,GAAIuK,IAAIC,cAAc5B,MACtBqqC,cAAc,EACdlwC,WAAY,UACZ6H,QAAS,GAEV,CACC5L,KAAM,WACNiB,KAAMqJ,IAAUG,KAChBxK,MAAO,YACP6L,MAAO,eACP9K,GAAIuK,IAAIC,cAAc5B,MACtBqqC,cAAc,EACdlwC,WAAY,WACZ6H,QAAS,GAEV,CACC5L,KAAM,OACNiB,KAAMqJ,IAAUG,KAChBxK,MAAO,OACP6L,MAAO,WACP9K,GAAIuK,IAAIC,cAAc5B,MACtBqqC,cAAc,EACdlwC,WAAY,OACZ6H,QAAS,GAEV,CACC5L,KAAM,OACNiB,KAAMqJ,IAAUG,KAChBxK,MAAO,OACP6L,MAAO,WACP9K,GAAIuK,IAAIC,cAAc5B,MACtBqqC,cAAc,EACdlwC,WAAY,OACZ6H,QAAS,KAIZ,CACC5L,KAAM,oBACNuB,MAAO,CACN,CACCvB,KAAM,YACNiB,KAAMqJ,IAAUG,KAChBxK,MAAO,cACP6L,MAAO,kBACP9K,GAAIuK,IAAIC,cAAc5B,MACtBqqC,cAAc,EACdlwC,WAAY,cACZ6H,QAAS,GAEV,CACC5L,KAAM,YACNiB,KAAMqJ,IAAUG,KAChBxK,MAAO,cACP6L,MAAO,kBACP9K,GAAIuK,IAAIC,cAAc5B,MACtBqqC,cAAc,EACdlwC,WAAY,cACZ6H,QAAS,GAEV,CACC5L,KAAM,aACNiB,KAAMqJ,IAAUG,KAChBxK,MAAO,eACP6L,MAAO,mBACP9K,GAAIuK,IAAIC,cAAc5B,MACtBqqC,cAAc,EACdlwC,WAAY,eACZ6H,QAAS,O,6RCrLPgmC,EAAgB,CACrB,QACA,OACA,aACA,UACA,OACA,cACA,UACA,gBACA,YACA,eACA,WACA,eACA,UACA,YACA,eACA,SACA,aACA,QACA,MAuED,SAAS8P,EAAqB18B,GAAsC,IAA9BrkB,EAA6B,uDAAjBE,IAAWC,KAC5D,OAAOo4C,EAAgBl0B,EAAQ,GAAI,KAAMrkB,GAGnC,SAASw4C,EAAT,GAUH,IATHl7B,EASE,EATFA,OACAhd,EAQE,EARFA,KACAsU,EAOE,EAPFA,SACAoX,EAME,EANFA,OACA3sB,EAKE,EALFA,KACAuB,EAIE,EAJFA,MACA+K,EAGE,EAHFA,YAIMkd,GADJ,EAFFm4B,WAEE,iBACiB,CAAE1jC,WACjByO,EAAW,GAYf,GAXIpgB,IAAgB,CAAC,UAAW,YAAa,QAAQxH,SAAS7D,KACzD4F,MAAMkL,QAAQzF,GACjBogB,EAAWpgB,EACTvF,KAAI,SAACie,GACL,OAAO08B,EAAqB18B,MAE5Bzc,QAAO,SAACyH,GAAD,OAAOA,KAEhB0c,EAAShc,KAAKgxC,EAAqBp1C,KAGjCogB,EAAS1oB,QAAU,CAAC,UAAW,YAAa,QAAQc,SAAS7D,GAAO,CACvE,IAAMwoC,EAAS,CACdjgB,aACAvoB,KAAM,UACNjB,KAAM,SACN0sB,SAAU,CACT,CACCzrB,KAAM,UACNjB,KAAMiB,EACNuoB,WAAY,CACXjU,WACAoX,SACA3sB,OACAuB,SAEDmrB,cAIH,OAAOngB,KAAKkY,MAAMlY,KAAKC,UAAUi9B,KAK5B,SAASyP,EAAgBl0B,GAAsC,IAA9BjJ,EAA6B,uDAArB,GAAUpb,EAAW,uCACpE,GAAoDqkB,EAA5ChkB,GAA4CgkB,EAAxClZ,MAAwCkZ,EAAjC0H,iBAAnB,MAA8B,GAA9B,EAAqClD,EAArC,YAAoDxE,EAApD,GACM48B,EAAW,CAChB,QACA,gBACA,gBACA,aACA,cACA,gBACA,SACA,QACA,SACA,YACA,OACA,OACA,UACA,UACA,WAEGjQ,EAAM,UAAOC,GACbhoC,EAAQg4C,EAAS98C,SAAS0kB,EAAWvoB,MAAQuoB,EAAWvoB,KAAO,QACnE2I,EAAQg4C,EAAS98C,SAAS0kB,EAAWzlB,YAClCylB,EAAWzlB,WACX6F,EACHA,EAAQob,EAAOxjB,IAAM,aAAeoI,EAChC4f,EAAWvoB,OAASqG,IAAK4C,eAC5BynC,EAAM,sBAAOA,GAAP,CAAe,QAAS,aAE3B/nC,IAAUtC,IAAKqC,OAClBgoC,EAAM,sBAAOA,GAAP,CAAe,MAAO,WAEf,WAAV/nC,IACH+nC,EAAM,sBAAOA,GAAP,CAAe,QAAS,aAE3B/nC,IAAUtC,IAAK4C,eAClBynC,EAAM,sBAAOA,GAAP,CAAe,SAAU,UAE5B,CAACrqC,IAAK6C,KAAM7C,IAAK8C,SAAU9C,IAAKC,QAASD,IAAKE,SAAS1C,SAAS8E,KACnE+nC,EAAM,sBAAOA,GAAP,CAAe,aAElB,CAACrqC,IAAKC,QAASD,IAAKE,SAAS1C,SAAS8E,KACzC+nC,EAAM,sBAAOA,GAAP,CAAe,UAAW,OAAQ,WAErC,CAACrqC,IAAK+C,SAASvF,SAAS8E,KAC3B+nC,EAAM,sBAAOA,GAAP,CAAe,UAAW,WAWjC,MARS,CACRnoB,WAAW,eACPtW,IAAM8gC,eAAexqB,EAAYmoB,EAAQhxC,IAE7CM,KAAM,UACNjB,KAAM4J,EACN8iB,SAAS,GAAD,mBAAM3Q,GAAN,YAAgB2Q,KAKnB,SAAS0C,EAAale,EAASnF,EAAOpL,GAC5C,IAAImS,EAAO,GACP4Z,EAAW,GAef,OAdI3gB,EAAM/H,QACT+H,EAAM0e,SAAQ,SAACpiB,GACd,IAAM2c,EAAS9T,EAAQ7I,GACnBw5C,EAAW,GACX78B,IACCA,EAAOjZ,OAASiZ,EAAOjZ,MAAM/H,SAChC69C,EAAWzyB,EAAale,EAAS8T,EAAOjZ,MAAOpL,IAEhD+rB,EAAShc,KAAT,eACIwoC,EAAgBl0B,EAAQ68B,EAAU/uC,EAAMnS,SAKxC+rB,I,sPC3NK3sB,EAAc,SAAC,GAAD,IAAMD,EAAN,wCAC1BmB,KAAM,UACHnB,IAGSyC,EAAuB,SAAC,GAAD,IAAMzC,EAAN,wCACnCmB,KAAM,mBACHnB,IAGS6C,EAAe,SAAC,GAAD,IAAM7C,EAAN,wCAC3BmB,KAAM,WACHnB,IAGSkD,EAAc,SAAC,GAAD,IAAMlD,EAAN,wCAC1BmB,KAAM,SACNgC,WAAY,QACTnD,IAGS+B,EAAoB,SAAC,GAAD,IAAM/B,EAAN,wCAChCmB,KAAM,gBACHnB,IAGS6D,EAAe,SAAC,GAAD,IAAM7D,EAAN,wCAC3BmB,KAAM,WACHnB,K,kMCnBEgiD,EAAa,CAAEj2C,KAAM,GAmFZk2C,IA7Ef,SAA2BjiD,GAC1B,IAAMm2C,EAAkBD,cAChBr1C,EAAcmnC,cAAdnnC,UACAK,EAA+DlB,EAA/DkB,GAAI6X,EAA2D/Y,EAA3D+Y,MAAZ,GAAuE/Y,EAApD65B,WAAoD75B,EAAxCmxC,cAA/B,SAA8C13B,EAAyBzZ,EAAzByZ,YAAgBgL,EAA9D,YAAuEzkB,EAAvE,GACQG,EAAsB4Y,EAAtB5Y,MAAR,EAA8B4Y,EAAf9M,aAAf,MAAuB,GAAvB,EACMwM,EAAYM,EAAZN,QACA5O,EAAO,YAAIoC,EAAM2gC,SAASvG,QAC/B,SAACt2B,EAAKrO,GAAN,OAAcqO,EAAI04B,OAAO,CAAC/mC,EAAK,MAC/B,CAAC,IAGIwgD,EAAmB,SAAChhD,EAAI4X,GAAL,MAAgB,CACxCsG,IAAMle,GAAD,UAASA,GAAT,OAAc4X,GACnB5X,KACAwsC,KAAM,CACLiC,YAAY,GAEb72B,QACA2wB,QAASzpC,EAAMkB,GACfu3C,aAAc1/B,EAAMhN,KACpB8+B,MAAO7qC,EAAMkB,KAEVihD,EAAiBl2C,EAAMrK,QAAQ6W,GAOnC,OALwB,IAApB0pC,IACHA,EAAiB,EACjB1pC,EAAUxM,EAAM/H,OAAS+H,EAAM,GAAK,GAIpC,kBAAC,IAAM4V,SAAP,KACE1hB,GACA,yBACCwY,UAAWC,IAAW,gCAAiC,CACtD+/B,OAAQxH,KAGRhxC,IAGDgxC,GACD,kBAAC,IAAD,CAAex4B,UAAW,aAAcI,MAAOipC,GAC9C,yBAAKrpC,UAAWC,IAAW,SACzB/O,EAAK5C,KACL,SAACvF,EAAKyF,GAAN,OACCgvC,GACC,kBAACA,EAAD,iBACK1xB,EACAy9B,EAAiBxgD,EAAKyF,GAF3B,CAGCgqC,OAAO,EACPx4B,UAAWF,IAAY/W,EAAM,aAAe,WAK/Cb,IAAcE,IAAWC,MAAwB,gBAAhBhB,EAAMgE,QAEvC,yBAAKsR,MAAO,CAAEsB,QAAS,OAAQa,WAAY,WAC1C,kBAAC,IAAD,CAAStX,MAAO+gB,YAAU,WAAY+gB,OAAK,GAC1C,kBAAC,IAAD,CAASvjB,QAAS,kBAAMjF,EAAY,CAAEV,QAAO7X,aAKhD+K,EAAM/H,OAAS,GAAKiyC,GACpB,kBAACA,EAAD,iBACK1xB,EACAy9B,EAAiBzpC,EAAS0pC,U","file":"static/js/main.7fc3b59c.chunk.js","sourcesContent":["const selectWidget = [\n\t\"NavSelect\",\n\t\"CheckboxSelect\",\n\t\"RadioSelect\",\n\t\"MultiSelect\",\n\t\"ImageSelect\",\n];\nconst data = {\n\tboolean: [\n\t\t\"InlineCheckbox\",\n\t\t\"Toggle\",\n\t\t\"BooleanSelect\",\n\t\t\"BooleanRadio\",\n\t\t\"BooleanSwitch\",\n\t\t...selectWidget,\n\t],\n\tinteger: [\n\t\t\"RelativeTime\",\n\t\t\"Duration\",\n\t\t\"Progress\",\n\t\t\"SelectProgress\",\n\t\t...selectWidget,\n\t],\n\tstring: [\n\t\t\"Email\",\n\t\t\"Url\",\n\t\t\"Password\",\n\t\t\"Html\",\n\t\t\"CodeEditor\",\n\t\t\"ImageLine\",\n\t\t...selectWidget,\n\t],\n\ttext: [\"Html\", \"CodeEditor\", ...selectWidget],\n\t\"many-to-one\": [\"SuggestBox\", \"Image\", \"binary-link\"],\n\t\"json-many-to-one\": [\"SuggestBox\", \"Image\", \"binary-link\"],\n\t\"one-to-one\": [\"SuggestBox\", \"Image\"],\n\t\"json-one-to-one\": [\"SuggestBox\", \"Image\"],\n\t\"many-to-many\": [\"TagSelect\"],\n\t\"json-many-to-many\": [\"TagSelect\"],\n\tbinary: [\"Image\", \"BinaryLink\", ...selectWidget],\n\tdate: [...selectWidget],\n\tdatetime: [...selectWidget],\n\ttime: [...selectWidget],\n\tbutton: [\"Button\", \"InfoButton\", \"ToolButton\"],\n\tdecimal: [\n\t\t\"RelativeTime\",\n\t\t\"Duration\",\n\t\t\"Progress\",\n\t\t\"SelectProgress\",\n\t\t...selectWidget,\n\t],\n};\n\nexport default data;\n","import {\n\tStringField,\n\tObjectSelectionField,\n\tIntegerField,\n\tSelectField,\n\tStaticSelectField,\n\tBooleanField,\n} from \"./fieldTypes\";\nimport widgetList from \"./widgetList\";\nimport { MODEL_TYPE, DataTypes, relationalFields, TYPE } from \"../constants\";\nimport { getMenuBuilderTitle } from \"./properties.helper\";\n\n/** Overview Fields */\nexport const Name = ({ ...props } = {}) =>\n\tStringField({\n\t\tname: \"name\",\n\t\ttitle: \"Name\",\n\t\trequired: true,\n\t\treadOnly: true,\n\t\tregex: /^[a-z]/i,\n\t\tregexErrorMessage: \"First Letter of the name should always be alphabet\",\n\t\tunique: true,\n\t\tisDisabled: ({\n\t\t\tproperties,\n\t\t\tmetaFieldStore,\n\t\t\teditWidgetType,\n\t\t\tmodelType,\n\t\t\tisStudioLite,\n\t\t}) => {\n\t\t\tif (modelType === MODEL_TYPE.BASE && editWidgetType !== \"customField\") {\n\t\t\t\treturn true;\n\t\t\t}\n\t\t\tif (\n\t\t\t\tmodelType === MODEL_TYPE.CUSTOM &&\n\t\t\t\tproperties &&\n\t\t\t\t(properties.id || isStudioLite) &&\n\t\t\t\tproperties.type === \"form\"\n\t\t\t) {\n\t\t\t\treturn true;\n\t\t\t}\n\t\t\treturn false;\n\t\t},\n\t\trequiredFor: [\n\t\t\t\"button\",\n\t\t\t\"label\",\n\t\t\t\"panel\",\n\t\t\t\"string\",\n\t\t\t\"panel-dashlet\",\n\t\t\t\"separator\",\n\t\t\t\"panel-stack\",\n\t\t\t\"integer\",\n\t\t\t\"date\",\n\t\t\t\"time\",\n\t\t\t\"datetime\",\n\t\t\t\"decimal\",\n\t\t\t\"one-to-many\",\n\t\t\t\"many-to-many\",\n\t\t\t\"boolean\",\n\t\t\t\"label\",\n\t\t\t\"viewer\",\n\t\t\t\"editor\",\n\t\t\t\"one-to-one\",\n\t\t\t\"spacer\",\n\t\t\t\"long\",\n\t\t\t\"hilite\",\n\t\t],\n\t\t...props,\n\t});\n\nexport const Type = StringField({\n\tname: \"type\",\n\tcolumn: \"type_name\",\n\ttitle: \"Type\",\n\trequired: true,\n\tselection: \"json.field.type\",\n\treadOnly: \"true\",\n\tformatter: (value, properties) => {\n\t\tif (properties.tab) {\n\t\t\treturn \"panel-tabs\";\n\t\t}\n\t\tconst entityIndex = value.indexOf(\"entity\");\n\t\tif (entityIndex !== -1) {\n\t\t\treturn value.substring(0, entityIndex);\n\t\t}\n\t\treturn value;\n\t},\n});\n\nexport const SelectableType = StaticSelectField({\n\tname: \"type\",\n\ttitle: \"Type\",\n\tcolumn: \"type_name\",\n\trequired: true,\n\tdata: [\"string\", \"integer\"],\n\tdefaultOption: false,\n\tdisableClearable: true,\n\tisDisabled: ({ properties, metaFieldStore, editWidgetType, modelType }) => {\n\t\tif (modelType === MODEL_TYPE.BASE && editWidgetType !== \"customField\") {\n\t\t\treturn true;\n\t\t}\n\t},\n});\n\nexport const DummyType = StaticSelectField({\n\tname: \"dummyType\",\n\ttitle: \"Type\",\n\tdata: [...DataTypes],\n});\n\nexport const Title = StringField({\n\tname: \"title\",\n\ttitle: \"Title\",\n\ttranslationView: false,\n});\n\nexport const DefaultValue = StringField({\n\tname: \"defaultValue\",\n\tdependModelType: MODEL_TYPE.CUSTOM,\n\ttitle: \"Default value\",\n});\n\nexport const StudioApp = ObjectSelectionField({\n\tname: \"studioApp\",\n\ttitle: \"App name\",\n\tref: \"com.axelor.studio.db.StudioApp\",\n\tdependModelType: MODEL_TYPE.CUSTOM,\n});\n\nexport const Help = StringField({\n\tname: \"help\",\n\ttitle: \"Help\",\n\tdependModelType: MODEL_TYPE.CUSTOM,\n});\n\nexport const Sequence = IntegerField({\n\tname: \"sequence\",\n\ttitle: \"Sequence\",\n\tdependModelType: MODEL_TYPE.CUSTOM,\n});\n\n/** Roles Fields */\nexport const Roles = ObjectSelectionField({\n\tname: \"roles\",\n\ttitle: \"Roles\",\n\tref: \"com.axelor.auth.db.Role\",\n\tmultiple: true,\n\tdependModelType: MODEL_TYPE.CUSTOM,\n});\n\n/** ValueExpr Fields */\nexport const ValueExpression = {\n\tname: \"valueExpr\",\n\ttitle: \"Value expr\",\n\ttype: \"text\",\n\tdependModelType: MODEL_TYPE.CUSTOM,\n};\n\n/** Field Options Fields */\nexport const Selection = SelectField({\n\tname: \"selection\",\n\ttitle: \"Selection\",\n\tref: \"com.axelor.meta.db.MetaSelect\",\n\tvalueField: \"name\",\n\tdependModelType: MODEL_TYPE.CUSTOM,\n\ttype: \"selection\",\n});\n\nexport const Widget = StaticSelectField({\n\tname: \"widget\",\n\tdata: widgetList,\n\ttitle: \"Widget\",\n\tdependModelType: MODEL_TYPE.CUSTOM,\n});\n\nexport const OnChange = SelectField({\n\tname: \"onChange\",\n\tref: \"com.axelor.meta.db.MetaAction\",\n\tdependModelType: MODEL_TYPE.CUSTOM,\n\ttitle: \"On change\",\n\tmultiple: true,\n\tcanAddNew: true,\n\tcommaSeparated: true,\n});\n\nexport const OnNew = SelectField({\n\ttitle: \"On new\",\n\tname: \"onNew\",\n\tref: \"com.axelor.meta.db.MetaAction\",\n\tdependModelType: MODEL_TYPE.CUSTOM,\n\tmultiple: true,\n\tcommaSeparated: true,\n\tcanAddNew: true,\n});\n\nexport const OnLoad = SelectField({\n\ttitle: \"On load\",\n\tname: \"onLoad\",\n\tref: \"com.axelor.meta.db.MetaAction\",\n\tmultiple: true,\n\tcommaSeparated: true,\n\tcanAddNew: true,\n});\n\nexport const OnSave = SelectField({\n\tname: \"onSave\",\n\tref: \"com.axelor.meta.db.MetaAction\",\n\tmultiple: true,\n\tcommaSeparated: true,\n\ttitle: \"On save\",\n\tcanAddNew: true,\n});\n\nexport const Min = IntegerField({\n\tname: \"minSize\",\n\ttitle: \"Min\",\n\tdependModelType: MODEL_TYPE.CUSTOM,\n});\n\nexport const Max = IntegerField({\n\tname: \"maxSize\",\n\ttitle: \"Max\",\n\tdependModelType: MODEL_TYPE.CUSTOM,\n});\n\nexport const JsonRelationalField = BooleanField({\n\tname: \"isJsonRelationalField\",\n\ttitle: \"Is json relational field\",\n\tdependModelType: MODEL_TYPE.CUSTOM,\n\tgetValue: (properties) => {\n\t\tconst type = properties[\"type\"];\n\t\tif (type) {\n\t\t\tconst hasJSONField = type.indexOf(\"json\") === 0;\n\t\t\tif (hasJSONField) {\n\t\t\t\treturn true;\n\t\t\t}\n\t\t}\n\t\treturn false;\n\t},\n\tchange: (value, properties) => {\n\t\tconst type = properties[\"type\"];\n\t\tif (value === true) {\n\t\t\tconst has = type.indexOf(\"json\") === 0;\n\t\t\tif (!has) {\n\t\t\t\tconst _type = `json-${type}`;\n\t\t\t\treturn {\n\t\t\t\t\ttype: _type,\n\t\t\t\t\tserverType: _type,\n\t\t\t\t};\n\t\t\t}\n\t\t} else if (value === false) {\n\t\t\tconst has = type.indexOf(\"json\") === 0;\n\t\t\tif (has) {\n\t\t\t\tconst _type = type.substring(\"json-\".length);\n\t\t\t\treturn {\n\t\t\t\t\ttype: _type,\n\t\t\t\t\tserverType: _type,\n\t\t\t\t};\n\t\t\t}\n\t\t}\n\t\treturn {};\n\t},\n});\n\nexport const Domain = StringField({\n\tname: \"domain\",\n\ttitle: \"Domain\",\n});\n\nexport const Prompt = StringField({\n\tname: \"prompt\",\n\ttitle: \"Prompt\",\n\tparentField: \"widgetAttrs\",\n});\n\nexport const SelectionIn = StringField({\n\tname: \"selection-in\",\n\tdependModelType: MODEL_TYPE.BASE,\n\tshowInCustomField: false,\n\ttitle: \"Selection in\",\n});\n\nexport const Value = StringField({\n\tname: \"value\",\n\ttitle: \"Value\",\n\tdependModelType: MODEL_TYPE.BASE,\n\tshowInCustomField: false,\n});\n\nexport const ValueAdd = StringField({\n\tname: \"value:add\",\n\ttitle: \"Value:add\",\n\tdependModelType: MODEL_TYPE.BASE,\n\tshowInCustomField: false,\n});\n\nexport const ValueDel = StringField({\n\tname: \"value:del\",\n\ttitle: \"Value:del\",\n\tdependModelType: MODEL_TYPE.BASE,\n\tshowInCustomField: false,\n});\n\nexport const Refresh = BooleanField({\n\tname: \"refresh\",\n\ttitle: \"Refresh\",\n\tdependModelType: MODEL_TYPE.BASE,\n\tshowInCustomField: false,\n});\n\nexport const Active = BooleanField({\n\tname: \"active\",\n\ttitle: \"Active\",\n\tdependModelType: MODEL_TYPE.BASE,\n\tshowInCustomField: false,\n\tshouldRender: (list) => {\n\t\treturn list.xPath && list.xPath.includes(\"panel-tabs\");\n\t},\n});\n\nexport const TargetJsonModel = ObjectSelectionField({\n\tname: \"targetJsonModel\",\n\trequired: true,\n\tref: \"com.axelor.meta.db.MetaJsonModel\",\n\tdisplayField: \"title\",\n\tdependModelType: MODEL_TYPE.CUSTOM,\n\ttitle: \"Target json model\",\n});\n\nexport const TargetModel = SelectField({\n\tname: \"targetModel\",\n\ttitle: \"Target model\",\n\trequired: true,\n\tref: \"com.axelor.meta.db.MetaModel\",\n\tvalueField: \"fullName\",\n\tcanAddNew: false,\n\tisDisabled: (property, editWidgetType, modelType) => {\n\t\treturn (\n\t\t\teditWidgetType !== \"customField\" &&\n\t\t\tproperty.serverType !== \"field\" &&\n\t\t\tmodelType !== MODEL_TYPE.CUSTOM\n\t\t);\n\t},\n});\n\nexport const GridView = SelectField({\n\tname: \"gridView\",\n\ttitle: \"Grid view\",\n\tref: \"com.axelor.meta.db.MetaView\",\n\tvalueField: \"name\",\n\tdependModelType: MODEL_TYPE.CUSTOM,\n\tneedsTargetModel: [\n\t\trelationalFields.OneToMany,\n\t\trelationalFields.ManyToMany,\n\t\trelationalFields.ManyToOne,\n\t],\n});\n\nexport const FormView = SelectField({\n\tname: \"formView\",\n\ttitle: \"Form view\",\n\tref: \"com.axelor.meta.db.MetaView\",\n\tvalueField: \"name\",\n\tdependModelType: MODEL_TYPE.CUSTOM,\n\tneedsTargetModel: [\n\t\trelationalFields.OneToMany,\n\t\trelationalFields.ManyToMany,\n\t\trelationalFields.ManyToOne,\n\t],\n});\n\n/** Ui options fields */\nexport const Required = BooleanField({\n\tname: \"required\",\n\ttitle: \"Required\",\n\tdefaultValue: \"false\",\n\tisDisabled: ({ properties, metaFieldStore, editWidgetType, modelType }) => {\n\t\tif (modelType === MODEL_TYPE.BASE && editWidgetType !== \"customField\") {\n\t\t\tif (properties[\"requiredIf\"] && properties[\"requiredIf\"].length) {\n\t\t\t\treturn true;\n\t\t\t}\n\t\t}\n\t\treturn false;\n\t},\n});\n\nexport const ColumnSequence = IntegerField({\n\tname: \"columnSequence\",\n\ttitle: \"Column sequence\",\n\tdependModelType: MODEL_TYPE.CUSTOM,\n});\n\nexport const ReadOnly = BooleanField({\n\tname: \"readonly\",\n\ttitle: \"Readonly\",\n\tisDisabled: ({ properties, metaFieldStore, editWidgetType, modelType }) => {\n\t\tif (modelType === MODEL_TYPE.BASE && editWidgetType !== \"customField\") {\n\t\t\tif (properties[\"readonlyIf\"] && properties[\"readonlyIf\"].length) {\n\t\t\t\treturn true;\n\t\t\t}\n\t\t}\n\t\treturn false;\n\t},\n});\n\nexport const Hidden = BooleanField({\n\tname: \"hidden\",\n\ttitle: \"Hidden\",\n\tisDisabled: ({ properties }) => {\n\t\tif (properties[\"hideIf\"] && properties[\"hideIf\"].length) {\n\t\t\treturn true;\n\t\t}\n\t\treturn false;\n\t},\n});\n\nexport const VisibleInGrid = BooleanField({\n\tname: \"visibleInGrid\",\n\ttitle: \"Visible in grid\",\n\tdependModelType: MODEL_TYPE.CUSTOM,\n});\n\n/** Conditions Fields*/\nexport const ShowIf = StringField({\n\tname: \"showIf\",\n\ttitle: \"Show if\",\n\tdependModelType: MODEL_TYPE.CUSTOM,\n});\n\nexport const HideIf = StringField({\n\tname: \"hideIf\",\n\ttitle: \"Hide if\",\n\tisDisabled: ({ properties }) => {\n\t\tif (properties[\"hidden\"]) {\n\t\t\treturn true;\n\t\t}\n\t\treturn false;\n\t},\n});\n\nexport const If = StringField({\n\tname: \"if\",\n\ttitle: \"If\",\n\tdependModelType: MODEL_TYPE.CUSTOM,\n});\n\nexport const RequiredIf = StringField({\n\tname: \"requiredIf\",\n\ttitle: \"Required if\",\n\tisDisabled: ({ properties, metaFieldStore, editWidgetType, modelType }) => {\n\t\tif (modelType === MODEL_TYPE.BASE && editWidgetType !== \"customField\") {\n\t\t\tif (properties[\"required\"]) {\n\t\t\t\treturn true;\n\t\t\t}\n\t\t}\n\t\treturn false;\n\t},\n});\n\nexport const ReadOnlyIf = StringField({\n\tname: \"readonlyIf\",\n\ttitle: \"Readonly if\",\n\tisDisabled: ({ properties, metaFieldStore, editWidgetType, modelType }) => {\n\t\tif (modelType === MODEL_TYPE.BASE && editWidgetType !== \"customField\") {\n\t\t\tif (properties[\"readonly\"]) {\n\t\t\t\treturn true;\n\t\t\t}\n\t\t}\n\t\treturn false;\n\t},\n});\n\nexport const IncludeIf = StringField({\n\tname: \"includeIf\",\n\ttitle: \"Include if\",\n\tdependModelType: MODEL_TYPE.CUSTOM,\n});\n\nexport const ValidIf = StringField({\n\tname: \"validIf\",\n\ttitle: \"Valid if\",\n\tparentField: \"widgetAttrs\",\n\tmodelType: MODEL_TYPE.CUSTOM,\n\tdependModelType: MODEL_TYPE.CUSTOM,\n});\n\nexport const OnlyIf = SelectField({\n\tname: \"contextField\",\n\ttitle: \"Only if\",\n\tref: \"com.axelor.meta.db.MetaField\",\n\tvalueField: \"name\",\n\ttype: \"onlyIf\",\n\t_domain:\n\t\t\"self.name not in ('createdBy', 'updatedBy') and self.relationship = 'ManyToOne' and self.metaModel.fullName = :model\",\n\tdependModelType: MODEL_TYPE.BASE,\n\tshowInBaseView: false,\n});\n\nexport const CanSave = StringField({\n\tname: \"canSave\",\n\tdependModelType: MODEL_TYPE.CUSTOM,\n\ttitle: \"Can save\",\n});\n\nexport const Css = StringField({\n\tname: \"css\",\n\ttitle: \"Css\",\n\tparentField: \"widgetAttrs\",\n\tmodelType: MODEL_TYPE.CUSTOM,\n});\n\nexport const Editable = BooleanField({\n\tname: \"editable\",\n\ttitle: \"Editable\",\n\tdependModelType: MODEL_TYPE.CUSTOM,\n});\n\n/** Widget Fields*/\nexport const ColSpan = StaticSelectField({\n\tname: \"colSpan\",\n\ttitle: \"Colspan\",\n\tparentField: \"widgetAttrs\",\n\tdata: [\n\t\t\"\",\n\t\t...Array(12)\n\t\t\t.fill()\n\t\t\t.map((_, i) => (i + 1).toString()),\n\t],\n\tmodelType: MODEL_TYPE.CUSTOM,\n\tdependModelType: MODEL_TYPE.CUSTOM,\n\tgetOptionLabel: (option) => {\n\t\treturn option ? option.toString() : \"\";\n\t},\n\tisDisabled: ({ properties, parentPanel }) => {\n\t\tif (parentPanel) {\n\t\t\tif ([TYPE.toolbar, TYPE.menubar].includes(parentPanel.serverType)) {\n\t\t\t\treturn true;\n\t\t\t}\n\t\t}\n\t\treturn false;\n\t},\n});\n\nexport const ItemSpan = StaticSelectField({\n\tname: \"itemSpan\",\n\ttitle: \"Itemspan\",\n\tparentField: \"widgetAttrs\",\n\tdata: [\n\t\t\"\",\n\t\t...Array(12)\n\t\t\t.fill()\n\t\t\t.map((_, i) => (i + 1).toString()),\n\t],\n\tmodelType: MODEL_TYPE.CUSTOM,\n\tdependModelType: MODEL_TYPE.CUSTOM,\n\tgetOptionLabel: (option) => {\n\t\treturn option ? option.toString() : \"\";\n\t},\n\tisDisabled: ({ properties, parentPanel }) => {\n\t\tif (\n\t\t\tparentPanel &&\n\t\t\t[TYPE.toolbar, TYPE.menubar].includes(parentPanel.serverType)\n\t\t) {\n\t\t\treturn true;\n\t\t}\n\t\treturn false;\n\t},\n});\n\nexport const IsGenerateMenu = BooleanField({\n\tname: \"isGenerateMenu\",\n\ttitle: \"Generate menu\",\n});\n\nexport const MenuBuilderTitle = StringField({\n\tname: \"menuBuilderTitle\",\n\ttitle: \"Menu title\",\n\tdepends: \"isGenerateMenu\",\n\tdependValue: true,\n\trequiredWhen: IsGenerateMenu.name,\n});\n\nexport const MenuBuilderParent = ObjectSelectionField({\n\tname: \"menuBuilderParent\",\n\tref: \"com.axelor.meta.db.MetaMenu\",\n\ttitle: \"Parent\",\n\tdepends: \"isGenerateMenu\",\n\tdependValue: true,\n\tvalueField: \"id\",\n\tdisplayField: \"title\",\n\tshouldFetchInStart: true,\n\tlimit: null,\n\tgetOptionLabel: (option, data) => {\n\t\treturn getMenuBuilderTitle(option, data);\n\t},\n});\n\nexport const ShowTitle = BooleanField({\n\tname: \"showTitle\",\n\tparentField: \"widgetAttrs\",\n\tdefaultValue: true,\n\tmodelType: MODEL_TYPE.CUSTOM,\n\tdependModelType: MODEL_TYPE.CUSTOM,\n\ttitle: \"Show title\",\n});\n\nexport const CanSearch = BooleanField({\n\tname: \"canSearch\",\n\tdependModelType: MODEL_TYPE.CUSTOM,\n\ttitle: \"Can search\",\n});\n\nexport const IfModule = StringField({\n\tname: \"if-module\",\n\ttitle: \"If-module\",\n\tdependModelType: MODEL_TYPE.CUSTOM,\n});\n\nexport const Height = StringField({\n\tname: \"height\",\n\tdependModelType: MODEL_TYPE.CUSTOM,\n});\n\nexport const Action = SelectField({\n\tname: \"action\",\n\ttitle: \"Action\",\n\tref: \"com.axelor.meta.db.MetaAction\",\n\trequiredFor: [\"panel-dashlet\", \"item\"],\n\tdependModelType: MODEL_TYPE.CUSTOM,\n\tmultiple: true,\n\tcommaSeparated: true,\n\tcanAddNew: true,\n});\n\nexport const Field = StringField({\n\tname: \"field\",\n\ttitle: \"Field\",\n\trequired: true,\n\trequiredFor: [\"panel-related\"],\n\tdependModelType: MODEL_TYPE.CUSTOM,\n});\n\nexport const CanMove = BooleanField({\n\tname: \"canMove\",\n\tdependModelType: MODEL_TYPE.CUSTOM,\n\ttitle: \"Can move\",\n});\n\nexport const OrderBy = StringField({\n\tname: \"orderBy\",\n\tdependModelType: MODEL_TYPE.CUSTOM,\n\ttitle: \"Order by\",\n});\n\nexport const IncludeView = SelectField({\n\tname: \"view\",\n\ttitle: \"View\",\n\tref: \"com.axelor.meta.db.MetaView\",\n\tvalueField: \"name\",\n\trequiredFor: [\"panel-include\"],\n\tdependModelType: MODEL_TYPE.CUSTOM,\n});\n\nexport const IncludeFrom = StringField({\n\tname: \"from\",\n\ttitle: \"From\",\n});\n\nexport const Sidebar = BooleanField({\n\tname: \"sidebar\",\n\ttitle: \"Sidebar\",\n\tparentField: \"widgetAttrs\",\n\tmodelType: MODEL_TYPE.CUSTOM,\n\tdependModelType: MODEL_TYPE.CUSTOM,\n\tshowInCustomField: false,\n});\n\nexport const Password = BooleanField({\n\tname: \"password\",\n\ttitle: \"Password\",\n});\n\nexport const Model = SelectField({\n\tname: \"model\",\n\ttitle: \"Model\",\n\trequired: true,\n\tref: \"com.axelor.meta.db.MetaModel\",\n\tvalueField: \"fullName\",\n});\n\nexport const Color = StaticSelectField({\n\tname: \"color\",\n\ttitle: \"Color\",\n\tdata: [\"default\", \"primary\", \"warning\", \"success\", \"danger\", \"info\"],\n});\n\nexport const Background = StaticSelectField({\n\tname: \"background\",\n\ttitle: \"Background\",\n\tdata: [\"default\", \"primary\", \"warning\", \"success\", \"danger\", \"info\"],\n});\n\nexport const Strong = BooleanField({\n\tname: \"strong\",\n\ttitle: \"Strong\",\n\tdependModelType: MODEL_TYPE.BASE,\n});\n\nexport default {\n\tName,\n\tType,\n\tTitle,\n\tDefaultValue,\n\tStudioApp,\n\tHelp,\n\tSequence,\n\tRoles,\n\tValueExpression,\n\tSelection,\n\tWidget,\n\tOnChange,\n\tMin,\n\tMax,\n\tJsonRelationalField,\n\tDomain,\n\tTargetJsonModel,\n\tTargetModel,\n\tGridView,\n\tFormView,\n\tRequired,\n\tColumnSequence,\n\tReadOnly,\n\tHidden,\n\tVisibleInGrid,\n\tShowIf,\n\tHideIf,\n\tRequiredIf,\n\tReadOnlyIf,\n\tIncludeIf,\n\tValidIf,\n\tOnlyIf,\n\tColSpan,\n\tShowTitle,\n\tOnNew,\n\tOnLoad,\n\tOnSave,\n\tEditable,\n\tDummyType,\n\tIfModule,\n\tAction,\n\tHeight,\n\tCanSearch,\n\tField,\n\tCanMove,\n\tOrderBy,\n\tIncludeFrom,\n\tIncludeView,\n\tPassword,\n\tImage,\n\tIsGenerateMenu,\n\tMenuBuilderParent,\n\tMenuBuilderTitle,\n\tModel,\n\tColor,\n\tStrong,\n\tBackground,\n\tItemSpan,\n\tCss,\n};\n","export const getMenuBuilderTitle = (option, data) => {\n\tlet text = option.title || \"\";\n\tif (option.parent) {\n\t\tconst parent = data.find((item) => item.id === option.parent.id);\n\t\tif (parent) {\n\t\t\tconst parentText = getMenuBuilderTitle(\n\t\t\t\tparent,\n\t\t\t\t(data && data.filter((f) => f.id !== parent.id)) || []\n\t\t\t);\n\t\t\tif (parentText) {\n\t\t\t\ttext = `${parentText} > ${text}`;\n\t\t\t}\n\t\t}\n\t}\n\treturn text;\n};\n","const fontAwesome = [\n\t\"fa-500px\",\n\t\"fa-address-book\",\n\t\"fa-address-book-o\",\n\t\"fa-address-card\",\n\t\"fa-address-card-o\",\n\t\"fa-adjust\",\n\t\"fa-adn\",\n\t\"fa-align-center\",\n\t\"fa-align-justify\",\n\t\"fa-align-left\",\n\t\"fa-align-right\",\n\t\"fa-amazon\",\n\t\"fa-ambulance\",\n\t\"fa-american-sign-language-interpreting\",\n\t\"fa-anchor\",\n\t\"fa-android\",\n\t\"fa-angellist\",\n\t\"fa-angle-double-down\",\n\t\"fa-angle-double-left\",\n\t\"fa-angle-double-right\",\n\t\"fa-angle-double-up\",\n\t\"fa-angle-down\",\n\t\"fa-angle-left\",\n\t\"fa-angle-right\",\n\t\"fa-angle-up\",\n\t\"fa-apple\",\n\t\"fa-archive\",\n\t\"fa-area-chart\",\n\t\"fa-arrow-circle-down\",\n\t\"fa-arrow-circle-left\",\n\t\"fa-arrow-circle-o-down\",\n\t\"fa-arrow-circle-o-left\",\n\t\"fa-arrow-circle-o-right\",\n\t\"fa-arrow-circle-o-up\",\n\t\"fa-arrow-circle-right\",\n\t\"fa-arrow-circle-up\",\n\t\"fa-arrow-down\",\n\t\"fa-arrow-left\",\n\t\"fa-arrow-right\",\n\t\"fa-arrow-up\",\n\t\"fa-arrows\",\n\t\"fa-arrows-alt\",\n\t\"fa-arrows-h\",\n\t\"fa-arrows-v\",\n\t\"fa-asl-interpreting\",\n\t\"fa-assistive-listening-systems\",\n\t\"fa-asterisk\",\n\t\"fa-at\",\n\t\"fa-audio-description\",\n\t\"fa-automobile\",\n\t\"fa-backward\",\n\t\"fa-balance-scale\",\n\t\"fa-ban\",\n\t\"fa-bandcamp\",\n\t\"fa-bank\",\n\t\"fa-bar-chart\",\n\t\"fa-bar-chart-o\",\n\t\"fa-barcode\",\n\t\"fa-bars\",\n\t\"fa-bath\",\n\t\"fa-bathtub\",\n\t\"fa-battery\",\n\t\"fa-battery-0\",\n\t\"fa-battery-1\",\n\t\"fa-battery-2\",\n\t\"fa-battery-3\",\n\t\"fa-battery-4\",\n\t\"fa-battery-empty\",\n\t\"fa-battery-full\",\n\t\"fa-battery-half\",\n\t\"fa-battery-quarter\",\n\t\"fa-battery-three-quarters\",\n\t\"fa-bed\",\n\t\"fa-beer\",\n\t\"fa-behance\",\n\t\"fa-behance-square\",\n\t\"fa-bell\",\n\t\"fa-bell-o\",\n\t\"fa-bell-slash\",\n\t\"fa-bell-slash-o\",\n\t\"fa-bicycle\",\n\t\"fa-binoculars\",\n\t\"fa-birthday-cake\",\n\t\"fa-bitbucket\",\n\t\"fa-bitbucket-square\",\n\t\"fa-bitcoin\",\n\t\"fa-black-tie\",\n\t\"fa-blind\",\n\t\"fa-bluetooth\",\n\t\"fa-bluetooth-b\",\n\t\"fa-bold\",\n\t\"fa-bolt\",\n\t\"fa-bomb\",\n\t\"fa-book\",\n\t\"fa-bookmark\",\n\t\"fa-bookmark-o\",\n\t\"fa-braille\",\n\t\"fa-briefcase\",\n\t\"fa-btc\",\n\t\"fa-bug\",\n\t\"fa-building\",\n\t\"fa-building-o\",\n\t\"fa-bullhorn\",\n\t\"fa-bullseye\",\n\t\"fa-bus\",\n\t\"fa-buysellads\",\n\t\"fa-cab\",\n\t\"fa-calculator\",\n\t\"fa-calendar\",\n\t\"fa-calendar-check-o\",\n\t\"fa-calendar-minus-o\",\n\t\"fa-calendar-o\",\n\t\"fa-calendar-plus-o\",\n\t\"fa-calendar-times-o\",\n\t\"fa-camera\",\n\t\"fa-camera-retro\",\n\t\"fa-car\",\n\t\"fa-caret-down\",\n\t\"fa-caret-left\",\n\t\"fa-caret-right\",\n\t\"fa-caret-square-o-down\",\n\t\"fa-caret-square-o-left\",\n\t\"fa-caret-square-o-right\",\n\t\"fa-caret-square-o-up\",\n\t\"fa-caret-up\",\n\t\"fa-cart-arrow-down\",\n\t\"fa-cart-plus\",\n\t\"fa-cc\",\n\t\"fa-cc-amex\",\n\t\"fa-cc-diners-club\",\n\t\"fa-cc-discover\",\n\t\"fa-cc-jcb\",\n\t\"fa-cc-mastercard\",\n\t\"fa-cc-paypal\",\n\t\"fa-cc-stripe\",\n\t\"fa-cc-visa\",\n\t\"fa-certificate\",\n\t\"fa-chain\",\n\t\"fa-chain-broken\",\n\t\"fa-check\",\n\t\"fa-check-circle\",\n\t\"fa-check-circle-o\",\n\t\"fa-check-square\",\n\t\"fa-check-square-o\",\n\t\"fa-chevron-circle-down\",\n\t\"fa-chevron-circle-left\",\n\t\"fa-chevron-circle-right\",\n\t\"fa-chevron-circle-up\",\n\t\"fa-chevron-down\",\n\t\"fa-chevron-left\",\n\t\"fa-chevron-right\",\n\t\"fa-chevron-up\",\n\t\"fa-child\",\n\t\"fa-chrome\",\n\t\"fa-circle\",\n\t\"fa-circle-o\",\n\t\"fa-circle-o-notch\",\n\t\"fa-circle-thin\",\n\t\"fa-clipboard\",\n\t\"fa-clock-o\",\n\t\"fa-clone\",\n\t\"fa-close\",\n\t\"fa-cloud\",\n\t\"fa-cloud-download\",\n\t\"fa-cloud-upload\",\n\t\"fa-cny\",\n\t\"fa-code\",\n\t\"fa-code-fork\",\n\t\"fa-codepen\",\n\t\"fa-codiepie\",\n\t\"fa-coffee\",\n\t\"fa-cog\",\n\t\"fa-cogs\",\n\t\"fa-columns\",\n\t\"fa-comment\",\n\t\"fa-comment-o\",\n\t\"fa-commenting\",\n\t\"fa-commenting-o\",\n\t\"fa-comments\",\n\t\"fa-comments-o\",\n\t\"fa-compass\",\n\t\"fa-compress\",\n\t\"fa-connectdevelop\",\n\t\"fa-contao\",\n\t\"fa-copy\",\n\t\"fa-copyright\",\n\t\"fa-creative-commons\",\n\t\"fa-credit-card\",\n\t\"fa-credit-card-alt\",\n\t\"fa-crop\",\n\t\"fa-crosshairs\",\n\t\"fa-css3\",\n\t\"fa-cube\",\n\t\"fa-cubes\",\n\t\"fa-cut\",\n\t\"fa-cutlery\",\n\t\"fa-dashboard\",\n\t\"fa-dashcube\",\n\t\"fa-database\",\n\t\"fa-deaf\",\n\t\"fa-deafness\",\n\t\"fa-dedent\",\n\t\"fa-delicious\",\n\t\"fa-desktop\",\n\t\"fa-deviantart\",\n\t\"fa-diamond\",\n\t\"fa-digg\",\n\t\"fa-dollar\",\n\t\"fa-dot-circle-o\",\n\t\"fa-download\",\n\t\"fa-dribbble\",\n\t\"fa-drivers-license\",\n\t\"fa-drivers-license-o\",\n\t\"fa-dropbox\",\n\t\"fa-drupal\",\n\t\"fa-edge\",\n\t\"fa-edit\",\n\t\"fa-eercast\",\n\t\"fa-eject\",\n\t\"fa-ellipsis-h\",\n\t\"fa-ellipsis-v\",\n\t\"fa-empire\",\n\t\"fa-envelope\",\n\t\"fa-envelope-o\",\n\t\"fa-envelope-open\",\n\t\"fa-envelope-open-o\",\n\t\"fa-envelope-square\",\n\t\"fa-envira\",\n\t\"fa-eraser\",\n\t\"fa-etsy\",\n\t\"fa-eur\",\n\t\"fa-euro\",\n\t\"fa-exchange\",\n\t\"fa-exclamation\",\n\t\"fa-exclamation-circle\",\n\t\"fa-exclamation-triangle\",\n\t\"fa-expand\",\n\t\"fa-expeditedssl\",\n\t\"fa-external-link\",\n\t\"fa-external-link-square\",\n\t\"fa-eye\",\n\t\"fa-eye-slash\",\n\t\"fa-eyedropper\",\n\t\"fa-fa\",\n\t\"fa-facebook\",\n\t\"fa-facebook-f\",\n\t\"fa-facebook-official\",\n\t\"fa-facebook-square\",\n\t\"fa-fast-backward\",\n\t\"fa-fast-forward\",\n\t\"fa-fax\",\n\t\"fa-feed\",\n\t\"fa-female\",\n\t\"fa-fighter-jet\",\n\t\"fa-file\",\n\t\"fa-file-archive-o\",\n\t\"fa-file-audio-o\",\n\t\"fa-file-code-o\",\n\t\"fa-file-excel-o\",\n\t\"fa-file-image-o\",\n\t\"fa-file-movie-o\",\n\t\"fa-file-o\",\n\t\"fa-file-pdf-o\",\n\t\"fa-file-photo-o\",\n\t\"fa-file-picture-o\",\n\t\"fa-file-powerpoint-o\",\n\t\"fa-file-sound-o\",\n\t\"fa-file-text\",\n\t\"fa-file-text-o\",\n\t\"fa-file-video-o\",\n\t\"fa-file-word-o\",\n\t\"fa-file-zip-o\",\n\t\"fa-files-o\",\n\t\"fa-film\",\n\t\"fa-filter\",\n\t\"fa-fire\",\n\t\"fa-fire-extinguisher\",\n\t\"fa-firefox\",\n\t\"fa-first-order\",\n\t\"fa-flag\",\n\t\"fa-flag-checkered\",\n\t\"fa-flag-o\",\n\t\"fa-flash\",\n\t\"fa-flask\",\n\t\"fa-flickr\",\n\t\"fa-floppy-o\",\n\t\"fa-folder\",\n\t\"fa-folder-o\",\n\t\"fa-folder-open\",\n\t\"fa-folder-open-o\",\n\t\"fa-font\",\n\t\"fa-font-awesome\",\n\t\"fa-fonticons\",\n\t\"fa-fort-awesome\",\n\t\"fa-forumbee\",\n\t\"fa-forward\",\n\t\"fa-foursquare\",\n\t\"fa-free-code-camp\",\n\t\"fa-frown-o\",\n\t\"fa-futbol-o\",\n\t\"fa-gamepad\",\n\t\"fa-gavel\",\n\t\"fa-gbp\",\n\t\"fa-ge\",\n\t\"fa-gear\",\n\t\"fa-gears\",\n\t\"fa-genderless\",\n\t\"fa-get-pocket\",\n\t\"fa-gg\",\n\t\"fa-gg-circle\",\n\t\"fa-gift\",\n\t\"fa-git\",\n\t\"fa-git-square\",\n\t\"fa-github\",\n\t\"fa-github-alt\",\n\t\"fa-github-square\",\n\t\"fa-gitlab\",\n\t\"fa-gittip\",\n\t\"fa-glass\",\n\t\"fa-glide\",\n\t\"fa-glide-g\",\n\t\"fa-globe\",\n\t\"fa-google\",\n\t\"fa-google-plus\",\n\t\"fa-google-plus-circle\",\n\t\"fa-google-plus-official\",\n\t\"fa-google-plus-square\",\n\t\"fa-google-wallet\",\n\t\"fa-graduation-cap\",\n\t\"fa-gratipay\",\n\t\"fa-grav\",\n\t\"fa-group\",\n\t\"fa-h-square\",\n\t\"fa-hacker-news\",\n\t\"fa-hand-grab-o\",\n\t\"fa-hand-lizard-o\",\n\t\"fa-hand-o-down\",\n\t\"fa-hand-o-left\",\n\t\"fa-hand-o-right\",\n\t\"fa-hand-o-up\",\n\t\"fa-hand-paper-o\",\n\t\"fa-hand-peace-o\",\n\t\"fa-hand-pointer-o\",\n\t\"fa-hand-rock-o\",\n\t\"fa-hand-scissors-o\",\n\t\"fa-hand-spock-o\",\n\t\"fa-hand-stop-o\",\n\t\"fa-handshake-o\",\n\t\"fa-hard-of-hearing\",\n\t\"fa-hashtag\",\n\t\"fa-hdd-o\",\n\t\"fa-header\",\n\t\"fa-headphones\",\n\t\"fa-heart\",\n\t\"fa-heart-o\",\n\t\"fa-heartbeat\",\n\t\"fa-history\",\n\t\"fa-home\",\n\t\"fa-hospital-o\",\n\t\"fa-hotel\",\n\t\"fa-hourglass\",\n\t\"fa-hourglass-1\",\n\t\"fa-hourglass-2\",\n\t\"fa-hourglass-3\",\n\t\"fa-hourglass-end\",\n\t\"fa-hourglass-half\",\n\t\"fa-hourglass-o\",\n\t\"fa-hourglass-start\",\n\t\"fa-houzz\",\n\t\"fa-html5\",\n\t\"fa-i-cursor\",\n\t\"fa-id-badge\",\n\t\"fa-id-card\",\n\t\"fa-id-card-o\",\n\t\"fa-ils\",\n\t\"fa-image\",\n\t\"fa-imdb\",\n\t\"fa-inbox\",\n\t\"fa-indent\",\n\t\"fa-industry\",\n\t\"fa-info\",\n\t\"fa-info-circle\",\n\t\"fa-inr\",\n\t\"fa-instagram\",\n\t\"fa-institution\",\n\t\"fa-internet-explorer\",\n\t\"fa-intersex\",\n\t\"fa-ioxhost\",\n\t\"fa-italic\",\n\t\"fa-joomla\",\n\t\"fa-jpy\",\n\t\"fa-jsfiddle\",\n\t\"fa-key\",\n\t\"fa-keyboard-o\",\n\t\"fa-krw\",\n\t\"fa-language\",\n\t\"fa-laptop\",\n\t\"fa-lastfm\",\n\t\"fa-lastfm-square\",\n\t\"fa-leaf\",\n\t\"fa-leanpub\",\n\t\"fa-legal\",\n\t\"fa-lemon-o\",\n\t\"fa-level-down\",\n\t\"fa-level-up\",\n\t\"fa-life-bouy\",\n\t\"fa-life-buoy\",\n\t\"fa-life-ring\",\n\t\"fa-life-saver\",\n\t\"fa-lightbulb-o\",\n\t\"fa-line-chart\",\n\t\"fa-link\",\n\t\"fa-linkedin\",\n\t\"fa-linkedin-square\",\n\t\"fa-linode\",\n\t\"fa-linux\",\n\t\"fa-list\",\n\t\"fa-list-alt\",\n\t\"fa-list-ol\",\n\t\"fa-list-ul\",\n\t\"fa-location-arrow\",\n\t\"fa-lock\",\n\t\"fa-long-arrow-down\",\n\t\"fa-long-arrow-left\",\n\t\"fa-long-arrow-right\",\n\t\"fa-long-arrow-up\",\n\t\"fa-low-vision\",\n\t\"fa-magic\",\n\t\"fa-magnet\",\n\t\"fa-mail-forward\",\n\t\"fa-mail-reply\",\n\t\"fa-mail-reply-all\",\n\t\"fa-male\",\n\t\"fa-map\",\n\t\"fa-map-marker\",\n\t\"fa-map-o\",\n\t\"fa-map-pin\",\n\t\"fa-map-signs\",\n\t\"fa-mars\",\n\t\"fa-mars-double\",\n\t\"fa-mars-stroke\",\n\t\"fa-mars-stroke-h\",\n\t\"fa-mars-stroke-v\",\n\t\"fa-maxcdn\",\n\t\"fa-meanpath\",\n\t\"fa-medium\",\n\t\"fa-medkit\",\n\t\"fa-meetup\",\n\t\"fa-meh-o\",\n\t\"fa-mercury\",\n\t\"fa-microchip\",\n\t\"fa-microphone\",\n\t\"fa-microphone-slash\",\n\t\"fa-minus\",\n\t\"fa-minus-circle\",\n\t\"fa-minus-square\",\n\t\"fa-minus-square-o\",\n\t\"fa-mixcloud\",\n\t\"fa-mobile\",\n\t\"fa-mobile-phone\",\n\t\"fa-modx\",\n\t\"fa-money\",\n\t\"fa-moon-o\",\n\t\"fa-mortar-board\",\n\t\"fa-motorcycle\",\n\t\"fa-mouse-pointer\",\n\t\"fa-music\",\n\t\"fa-navicon\",\n\t\"fa-neuter\",\n\t\"fa-newspaper-o\",\n\t\"fa-object-group\",\n\t\"fa-object-ungroup\",\n\t\"fa-odnoklassniki\",\n\t\"fa-odnoklassniki-square\",\n\t\"fa-opencart\",\n\t\"fa-openid\",\n\t\"fa-opera\",\n\t\"fa-optin-monster\",\n\t\"fa-outdent\",\n\t\"fa-pagelines\",\n\t\"fa-paint-brush\",\n\t\"fa-paper-plane\",\n\t\"fa-paper-plane-o\",\n\t\"fa-paperclip\",\n\t\"fa-paragraph\",\n\t\"fa-paste\",\n\t\"fa-pause\",\n\t\"fa-pause-circle\",\n\t\"fa-pause-circle-o\",\n\t\"fa-paw\",\n\t\"fa-paypal\",\n\t\"fa-pencil\",\n\t\"fa-pencil-square\",\n\t\"fa-pencil-square-o\",\n\t\"fa-percent\",\n\t\"fa-phone\",\n\t\"fa-phone-square\",\n\t\"fa-photo\",\n\t\"fa-picture-o\",\n\t\"fa-pie-chart\",\n\t\"fa-pied-piper\",\n\t\"fa-pied-piper-alt\",\n\t\"fa-pied-piper-pp\",\n\t\"fa-pinterest\",\n\t\"fa-pinterest-p\",\n\t\"fa-pinterest-square\",\n\t\"fa-plane\",\n\t\"fa-play\",\n\t\"fa-play-circle\",\n\t\"fa-play-circle-o\",\n\t\"fa-plug\",\n\t\"fa-plus\",\n\t\"fa-plus-circle\",\n\t\"fa-plus-square\",\n\t\"fa-plus-square-o\",\n\t\"fa-podcast\",\n\t\"fa-power-off\",\n\t\"fa-print\",\n\t\"fa-product-hunt\",\n\t\"fa-puzzle-piece\",\n\t\"fa-qq\",\n\t\"fa-qrcode\",\n\t\"fa-question\",\n\t\"fa-question-circle\",\n\t\"fa-question-circle-o\",\n\t\"fa-quora\",\n\t\"fa-quote-left\",\n\t\"fa-quote-right\",\n\t\"fa-ra\",\n\t\"fa-random\",\n\t\"fa-ravelry\",\n\t\"fa-rebel\",\n\t\"fa-recycle\",\n\t\"fa-reddit\",\n\t\"fa-reddit-alien\",\n\t\"fa-reddit-square\",\n\t\"fa-refresh\",\n\t\"fa-registered\",\n\t\"fa-remove\",\n\t\"fa-renren\",\n\t\"fa-reorder\",\n\t\"fa-repeat\",\n\t\"fa-reply\",\n\t\"fa-reply-all\",\n\t\"fa-resistance\",\n\t\"fa-retweet\",\n\t\"fa-rmb\",\n\t\"fa-road\",\n\t\"fa-rocket\",\n\t\"fa-rotate-left\",\n\t\"fa-rotate-right\",\n\t\"fa-rouble\",\n\t\"fa-rss\",\n\t\"fa-rss-square\",\n\t\"fa-rub\",\n\t\"fa-ruble\",\n\t\"fa-rupee\",\n\t\"fa-s15\",\n\t\"fa-safari\",\n\t\"fa-save\",\n\t\"fa-scissors\",\n\t\"fa-scribd\",\n\t\"fa-search\",\n\t\"fa-search-minus\",\n\t\"fa-search-plus\",\n\t\"fa-sellsy\",\n\t\"fa-send\",\n\t\"fa-send-o\",\n\t\"fa-server\",\n\t\"fa-share\",\n\t\"fa-share-alt\",\n\t\"fa-share-alt-square\",\n\t\"fa-share-square\",\n\t\"fa-share-square-o\",\n\t\"fa-shekel\",\n\t\"fa-sheqel\",\n\t\"fa-shield\",\n\t\"fa-ship\",\n\t\"fa-shirtsinbulk\",\n\t\"fa-shopping-bag\",\n\t\"fa-shopping-basket\",\n\t\"fa-shopping-cart\",\n\t\"fa-shower\",\n\t\"fa-sign-in\",\n\t\"fa-sign-language\",\n\t\"fa-sign-out\",\n\t\"fa-signal\",\n\t\"fa-signing\",\n\t\"fa-simplybuilt\",\n\t\"fa-sitemap\",\n\t\"fa-skyatlas\",\n\t\"fa-skype\",\n\t\"fa-slack\",\n\t\"fa-sliders\",\n\t\"fa-slideshare\",\n\t\"fa-smile-o\",\n\t\"fa-snapchat\",\n\t\"fa-snapchat-ghost\",\n\t\"fa-snapchat-square\",\n\t\"fa-snowflake-o\",\n\t\"fa-soccer-ball-o\",\n\t\"fa-sort\",\n\t\"fa-sort-alpha-asc\",\n\t\"fa-sort-alpha-desc\",\n\t\"fa-sort-amount-asc\",\n\t\"fa-sort-amount-desc\",\n\t\"fa-sort-asc\",\n\t\"fa-sort-desc\",\n\t\"fa-sort-down\",\n\t\"fa-sort-numeric-asc\",\n\t\"fa-sort-numeric-desc\",\n\t\"fa-sort-up\",\n\t\"fa-soundcloud\",\n\t\"fa-space-shuttle\",\n\t\"fa-spinner\",\n\t\"fa-spoon\",\n\t\"fa-spotify\",\n\t\"fa-square\",\n\t\"fa-square-o\",\n\t\"fa-stack-exchange\",\n\t\"fa-stack-overflow\",\n\t\"fa-star\",\n\t\"fa-star-half\",\n\t\"fa-star-half-empty\",\n\t\"fa-star-half-full\",\n\t\"fa-star-half-o\",\n\t\"fa-star-o\",\n\t\"fa-steam\",\n\t\"fa-steam-square\",\n\t\"fa-step-backward\",\n\t\"fa-step-forward\",\n\t\"fa-stethoscope\",\n\t\"fa-sticky-note\",\n\t\"fa-sticky-note-o\",\n\t\"fa-stop\",\n\t\"fa-stop-circle\",\n\t\"fa-stop-circle-o\",\n\t\"fa-street-view\",\n\t\"fa-strikethrough\",\n\t\"fa-stumbleupon\",\n\t\"fa-stumbleupon-circle\",\n\t\"fa-subscript\",\n\t\"fa-subway\",\n\t\"fa-suitcase\",\n\t\"fa-sun-o\",\n\t\"fa-superpowers\",\n\t\"fa-superscript\",\n\t\"fa-support\",\n\t\"fa-table\",\n\t\"fa-tablet\",\n\t\"fa-tachometer\",\n\t\"fa-tag\",\n\t\"fa-tags\",\n\t\"fa-tasks\",\n\t\"fa-taxi\",\n\t\"fa-telegram\",\n\t\"fa-television\",\n\t\"fa-tencent-weibo\",\n\t\"fa-terminal\",\n\t\"fa-text-height\",\n\t\"fa-text-width\",\n\t\"fa-th\",\n\t\"fa-th-large\",\n\t\"fa-th-list\",\n\t\"fa-themeisle\",\n\t\"fa-thermometer\",\n\t\"fa-thermometer-0\",\n\t\"fa-thermometer-1\",\n\t\"fa-thermometer-2\",\n\t\"fa-thermometer-3\",\n\t\"fa-thermometer-4\",\n\t\"fa-thermometer-empty\",\n\t\"fa-thermometer-full\",\n\t\"fa-thermometer-half\",\n\t\"fa-thermometer-quarter\",\n\t\"fa-thermometer-three-quarters\",\n\t\"fa-thumb-tack\",\n\t\"fa-thumbs-down\",\n\t\"fa-thumbs-o-down\",\n\t\"fa-thumbs-o-up\",\n\t\"fa-thumbs-up\",\n\t\"fa-ticket\",\n\t\"fa-times\",\n\t\"fa-times-circle\",\n\t\"fa-times-circle-o\",\n\t\"fa-times-rectangle\",\n\t\"fa-times-rectangle-o\",\n\t\"fa-tint\",\n\t\"fa-toggle-down\",\n\t\"fa-toggle-left\",\n\t\"fa-toggle-off\",\n\t\"fa-toggle-on\",\n\t\"fa-toggle-right\",\n\t\"fa-toggle-up\",\n\t\"fa-trademark\",\n\t\"fa-train\",\n\t\"fa-transgender\",\n\t\"fa-transgender-alt\",\n\t\"fa-trash\",\n\t\"fa-trash-o\",\n\t\"fa-tree\",\n\t\"fa-trello\",\n\t\"fa-tripadvisor\",\n\t\"fa-trophy\",\n\t\"fa-truck\",\n\t\"fa-try\",\n\t\"fa-tty\",\n\t\"fa-tumblr\",\n\t\"fa-tumblr-square\",\n\t\"fa-turkish-lira\",\n\t\"fa-tv\",\n\t\"fa-twitch\",\n\t\"fa-twitter\",\n\t\"fa-twitter-square\",\n\t\"fa-umbrella\",\n\t\"fa-underline\",\n\t\"fa-undo\",\n\t\"fa-universal-access\",\n\t\"fa-university\",\n\t\"fa-unlink\",\n\t\"fa-unlock\",\n\t\"fa-unlock-alt\",\n\t\"fa-unsorted\",\n\t\"fa-upload\",\n\t\"fa-usb\",\n\t\"fa-usd\",\n\t\"fa-user\",\n\t\"fa-user-circle\",\n\t\"fa-user-circle-o\",\n\t\"fa-user-md\",\n\t\"fa-user-o\",\n\t\"fa-user-plus\",\n\t\"fa-user-secret\",\n\t\"fa-user-times\",\n\t\"fa-users\",\n\t\"fa-vcard\",\n\t\"fa-vcard-o\",\n\t\"fa-venus\",\n\t\"fa-venus-double\",\n\t\"fa-venus-mars\",\n\t\"fa-viacoin\",\n\t\"fa-viadeo\",\n\t\"fa-viadeo-square\",\n\t\"fa-video-camera\",\n\t\"fa-vimeo\",\n\t\"fa-vimeo-square\",\n\t\"fa-vine\",\n\t\"fa-vk\",\n\t\"fa-volume-control-phone\",\n\t\"fa-volume-down\",\n\t\"fa-volume-off\",\n\t\"fa-volume-up\",\n\t\"fa-warning\",\n\t\"fa-wechat\",\n\t\"fa-weibo\",\n\t\"fa-weixin\",\n\t\"fa-whatsapp\",\n\t\"fa-wheelchair\",\n\t\"fa-wheelchair-alt\",\n\t\"fa-wifi\",\n\t\"fa-wikipedia-w\",\n\t\"fa-window-close\",\n\t\"fa-window-close-o\",\n\t\"fa-window-maximize\",\n\t\"fa-window-minimize\",\n\t\"fa-window-restore\",\n\t\"fa-windows\",\n\t\"fa-won\",\n\t\"fa-wordpress\",\n\t\"fa-wpbeginner\",\n\t\"fa-wpexplorer\",\n\t\"fa-wpforms\",\n\t\"fa-wrench\",\n\t\"fa-xing\",\n\t\"fa-xing-square\",\n\t\"fa-y-combinator\",\n\t\"fa-y-combinator-square\",\n\t\"fa-yahoo\",\n\t\"fa-yc\",\n\t\"fa-yc-square\",\n\t\"fa-yelp\",\n\t\"fa-yen\",\n\t\"fa-yoast\",\n\t\"fa-youtube\",\n\t\"fa-youtube-play\",\n\t\"fa-youtube-square\",\n];\n\nexport default fontAwesome;\n","// TYPE define all elements\nexport const TYPE = {\n\tpanel: \"panel\",\n\ttabs: \"panel-tabs\",\n\tfield: \"field\",\n\tdumpField: \"dump_field\",\n\tform: \"form\",\n\tpanelStack: \"panel-stack\",\n\tpanelDashlet: \"panel-dashlet\",\n\tpanelRelated: \"panel-related\",\n\tpanelInclude: \"panel-include\",\n\tmenu: \"menu\",\n\tmenuItem: \"item\",\n\tdivider: \"divider\",\n\tmenubar: \"menubar\",\n\ttoolbar: \"toolbar\",\n};\n\nexport const ItemTypes = {\n\tCONTAINER: \"panel\",\n\tROOTCONTAINER: \"root-container\",\n\tITEM: \"item\",\n\tDUMMY: \"dummy\",\n};\n\n// FIELD_TYPE define all field types(manage on server end)\nexport const FIELD_TYPE = {\n\tstring: \"string\",\n\tnumber: \"number\",\n\tbutton: \"button\",\n\tspacer: \"spacer\",\n\tboolean: \"boolean\",\n\tseparator: \"separator\",\n\thilite: \"hilite\",\n};\n\n// Panel Container Types\nexport const PANEL_TYPE = {\n\tstack: \"stack\",\n\tflow: \"flow\",\n\tgrid: \"grid\",\n\tcustom: \"custom\",\n};\n\n// define Grid Size constants\nexport const GRID_SIZE = {\n\tmax: 12,\n};\n\n// contains all unique ids for special widgets\nexport const IDS = {\n\tcreateWidgets: {\n\t\ttabs: Symbol(),\n\t\tpanel: Symbol(),\n\t\tfield: Symbol(),\n\t},\n\tform: -1,\n\tcustomForm: -2,\n\tdumpField: 0,\n};\n\nexport const PANEL_PROPS = {\n\tcolSpan: 12,\n\tcols: 12,\n\tid: IDS.createWidgets.panel,\n\timage: \"panel.png\",\n\titems: [],\n\tlayout: \"grid\",\n\tmappedBy: undefined,\n\tmodel: \"com.axelor.meta.db.MetaJsonRecord\",\n\tmodelField: \"attrs\",\n\trelationship: undefined,\n\ttitle: undefined,\n\ttype: ItemTypes.CONTAINER,\n\twidgetAttrs: JSON.stringify({\n\t\tshowTitle: \"false\",\n\t\tcolSpan: 12,\n\t\titemSpan: 6,\n\t}),\n};\n\nexport const relationalFields = {\n\tOneToMany: \"one-to-many\",\n\tManyToMany: \"many-to-many\",\n\tManyToOne: \"many-to-one\",\n\tOneToOne: \"one-to-one\",\n};\n\nexport const typeReplacer = {\n\tinclude: TYPE.panelInclude,\n\tMANY_TO_MANY: \"many-to-many\",\n\tMANY_TO_ONE: \"many-to-one\",\n\tONE_TO_ONE: \"one-to-one\",\n\tONE_TO_MANY: \"one-to-many\",\n};\n\nexport const MODEL_TYPE = {\n\tBASE: \"BASE\",\n\tCUSTOM: \"CUSTOM\",\n};\n\nexport const ENTITY_TYPE = {\n\tMETA: \"META\",\n};\n\nexport const DEFAULT_VALUE = {\n\tshowTitle: true,\n\treadonly: false,\n\trequired: false,\n\thidden: false,\n\tsidebar: false,\n\tcanCollapse: false,\n\tstacked: false,\n\tcanMove: false,\n\tcanSearch: false,\n\tmultiline: false,\n};\n\nexport const DataTypes = [\n\t\"string\",\n\t\"integer\",\n\t\"decimal\",\n\t\"boolean\",\n\t\"datetime\",\n\t\"date\",\n\t\"time\",\n\t\"many-to-one\",\n\t\"one-to-many\",\n\t\"many-to-many\",\n];\n\nexport const conditionProperties = {\n\treadonlyIf: \"readonly\",\n\trequiredIf: \"required\",\n\thideIf: \"hidden\",\n\tcollapseIf: \"canCollapse\",\n};\n\nexport const otherNoQuoteProps = [\n\t\"value:add\",\n\t\"value:del\",\n\t\"refresh\",\n\t\"active\",\n];\n\nexport const ACTIONS ={\n\tMODEL: 0,\n\tGLOBAL: 1,\n\tOTHER: 2,\n}\n","import { conditionProperties } from \"../constants\";\nimport AxelorService from \"./../services/axelor.rest\";\nimport Utils, { generateCustomModelSchema, getMenuBuilder } from \"./../utils\";\n\nexport const metaJsonFieldService = new AxelorService({\n\tmodel: \"com.axelor.meta.db.MetaJsonField\",\n});\nexport const metaModelService = new AxelorService({\n\tmodel: \"com.axelor.meta.db.MetaJsonModel\",\n});\nconst appStudioService = new AxelorService({\n\tmodel: \"com.axelor.studio.db.AppStudio\",\n});\nconst appUserService = new AxelorService({ model: \"com.axelor.auth.db.User\" });\n\nconst metaViewService = new AxelorService({\n\tmodel: \"com.axelor.meta.db.MetaView\",\n});\nexport const modelService = new AxelorService({\n\tmodel: \"com.axelor.meta.db.MetaModel\",\n});\n\nexport const metaAttrsService = new AxelorService({\n\tmodel: \"com.axelor.meta.db.MetaAttrs\",\n});\n\nexport const metaSelectService = new AxelorService({\n\tmodel: \"com.axelor.meta.db.MetaSelect\",\n});\n\nexport const selectionBuilderService = new AxelorService({\n\tmodel: \"com.axelor.studio.db.StudioSelection\",\n});\n\nexport const metaTranslationService = new AxelorService({\n\tmodel: \"com.axelor.meta.db.MetaTranslation\",\n});\n\nexport async function getCustomModel(options) {\n\tconst result = await metaModelService.search(options);\n\tconst { data = [] } = result;\n\treturn data[0];\n}\n\nexport function fetchCustomFields(modelField, model) {\n\tconst _domain = `self.jsonModel = null and self.modelField='${modelField.name}' and self.model='${model.fullName}'`;\n\treturn metaJsonFieldService.search({\n\t\tdata: { _domain },\n\t\tsortBy: [\"sequence\"],\n\t});\n}\n\n/**\n * selection fields are needs to be save seperately to save selections\n */\nexport async function saveCustomModel(model) {\n\tif (!model) return;\n\tconst res = await metaModelService.save(model);\n\tconst { data, status } = res || {};\n\tif (status === -1) {\n\t\treturn res;\n\t}\n\tconst { fields } = (data && data[0]) || {};\n\tconst getFields = (all) => {\n\t\tconst fields = all\n\t\t\t.map((res) => {\n\t\t\t\tconst { data = [] } = res;\n\t\t\t\tif (data[0]) {\n\t\t\t\t\treturn { id: data[0].id, $version: data[0].version };\n\t\t\t\t}\n\t\t\t\treturn undefined;\n\t\t\t})\n\t\t\t.filter((e) => e);\n\t\treturn fields;\n\t};\n\tconst response = await Promise.all(\n\t\tmodel.fields.map((field) => {\n\t\t\tconst updatedField = fields && fields.find((f) => f.name === field.name);\n\t\t\treturn metaJsonFieldService.save({\n\t\t\t\t...field,\n\t\t\t\tid: updatedField?.id,\n\t\t\t\tversion: updatedField?.version,\n\t\t\t});\n\t\t})\n\t);\n\tconst updatedFields = getFields(response);\n\treturn {\n\t\tdata: [\n\t\t\t{\n\t\t\t\t...((data && data[0]) || {}),\n\t\t\t\tfields: updatedFields,\n\t\t\t},\n\t\t],\n\t};\n}\n\nexport function fetchJSONFields(ids, update, record = {}) {\n\tconst criteria = [];\n\tif (ids.length) {\n\t\tcriteria.push({ fieldName: \"id\", operator: \"in\", value: ids });\n\n\t\tconst data = {\n\t\t\tcriteria,\n\t\t};\n\t\tmetaJsonFieldService.search({ data, sortBy: [\"sequence\"] }).then((res) => {\n\t\t\tif (res.data) {\n\t\t\t\tconst list = res.data || [];\n\t\t\t\tconst schema = generateCustomModelSchema(list, record);\n\t\t\t\tupdate((draft) => {\n\t\t\t\t\tdraft.items = list.filter((l) => l.type === \"panel\").map((e) => e.id);\n\t\t\t\t\tdraft.widgets = {\n\t\t\t\t\t\t...schema.widgets,\n\t\t\t\t\t};\n\t\t\t\t\tdraft.items = schema.items;\n\t\t\t\t});\n\t\t\t}\n\t\t});\n\t} else {\n\t\tupdate((draft) => {\n\t\t\tdraft.widgets = {\n\t\t\t\t\"-1\": {\n\t\t\t\t\ttype: \"form\",\n\t\t\t\t\t...record,\n\t\t\t\t\t...getMenuBuilder(record ? record.studioMenu : undefined),\n\t\t\t\t},\n\t\t\t\t0: { type: \"dump_field\", name: \"\" },\n\t\t\t};\n\t\t\tdraft.items = [];\n\t\t\tdraft.loader = false;\n\t\t});\n\t}\n}\n\nexport function removeCustomModel(model) {\n\treturn metaModelService.removeAll([model]);\n}\n\nexport async function getEnableAppBuilder() {\n\tconst payload = {\n\t\tdata: {\n\t\t\t_domain: \"self.app.code = :code\",\n\t\t\t_domainContext: { code: \"studio\" },\n\t\t},\n\t\tfields: [\"enableStudioApp\"],\n\t\tlimit: 1,\n\t\toffset: 0,\n\t};\n\tconst studioResult = await appStudioService.search({ ...payload });\n\tif (\n\t\tArray.isArray(studioResult && studioResult.data) &&\n\t\tstudioResult.data[0]\n\t) {\n\t\treturn studioResult.data[0].enableStudioApp;\n\t}\n\treturn false;\n}\n\nexport async function generateMenuChange(customModel) {\n\tconst _context = {\n\t\t_model: \"com.axelor.meta.db.MetaJsonModel\",\n\t\t_id: null,\n\t\t...customModel,\n\t};\n\tconst changeAction =\n\t\t\"action-studio-json-model-method-isgeneratemenu-onchange\";\n\tconst data = {\n\t\taction: changeAction,\n\t\tmodel: \"com.axelor.meta.db.MetaJsonModel\",\n\t\tdata: {\n\t\t\tcontext: _context,\n\t\t},\n\t};\n\treturn await metaModelService.action(data);\n}\n\nexport async function fetchCustomModel(modelId, handleError = () => {}) {\n\tconst result = await metaModelService.fetch(modelId);\n\tif (result?.status === -1) {\n\t\thandleError(result.data || {});\n\t\treturn;\n\t}\n\tconst { data = [] } = result || {};\n\treturn data[0];\n}\n\nexport async function fetchViews(view) {\n\tconst viewCriteria = {\n\t\toperator: \"and\",\n\t\tcriteria: [{ fieldName: \"name\", operator: \"=\", value: `${view.name}` }],\n\t};\n\tconst viewList = await metaViewService.search({ data: viewCriteria });\n\tlet views;\n\tif (viewList.data) {\n\t\tviews = Utils.getViews(viewList.data, view.name);\n\t}\n\treturn views;\n}\n\nexport async function fetchModelFields(model) {\n\tif (!model || (model && (!model.packageName || !model.name))) return [];\n\tlet fields = [];\n\tconst _data = {\n\t\t_domain: `self.packageName = '${model.packageName}' and self.name = '${model.name}'`,\n\t};\n\tconst result = await modelService.search({ data: _data });\n\tif (result.data && result.data[0]) {\n\t\tconst record = result.data[0];\n\t\tconst data = {\n\t\t\tfields: [\"metaFields\"],\n\t\t\trelated: {\n\t\t\t\tmetaFields: [\n\t\t\t\t\t\"typeName\",\n\t\t\t\t\t\"label\",\n\t\t\t\t\t\"mappedBy\",\n\t\t\t\t\t\"relationship\",\n\t\t\t\t\t\"name\",\n\t\t\t\t\t\"packageName\",\n\t\t\t\t\t\"typeName\",\n\t\t\t\t],\n\t\t\t},\n\t\t};\n\t\tconst modelData = await modelService.fetch(record.id, data);\n\n\t\tif (modelData && modelData.data[0]) {\n\t\t\tfields = modelData.data[0].metaFields;\n\t\t\treturn fields;\n\t\t}\n\t}\n\treturn fields;\n}\n\nexport async function fetchAttrsList({ model, view }) {\n\tconst criteria = [\n\t\t{ fieldName: \"model\", operator: \"=\", value: model },\n\t\t{ fieldName: \"view\", operator: \"=\", value: view },\n\t];\n\tconst result = await metaAttrsService.search({\n\t\tdata: { criteria },\n\t\tlimit: null,\n\t});\n\tif (result.data && Array.isArray(result.data)) {\n\t\tconst conditionPropertiesKeys = Object.keys(conditionProperties);\n\t\tconst conditionPropertiesValues = Object.values(conditionProperties);\n\n\t\tconst data = [...result.data].map((item) => {\n\t\t\tif (conditionPropertiesValues.includes(item.name)) {\n\t\t\t\tif (item.value.startsWith('\"') && item.value.endsWith('\"')) {\n\t\t\t\t\titem.value = item.value.replace(`\"`, \"\");\n\t\t\t\t\titem.value = item.value.replace(`\"`, \"\");\n\t\t\t\t} else {\n\t\t\t\t\tif (![\"true\", \"false\"].includes(item.value)) {\n\t\t\t\t\t\titem.name =\n\t\t\t\t\t\t\tconditionPropertiesKeys[\n\t\t\t\t\t\t\t\tconditionPropertiesValues.indexOf(item.name)\n\t\t\t\t\t\t\t];\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t} else {\n\t\t\t\titem.value = item.value.replace(`\"`, \"\");\n\t\t\t\titem.value = item.value.replace(`\"`, \"\");\n\t\t\t}\n\t\t\treturn item;\n\t\t});\n\t\treturn data;\n\t}\n\treturn [];\n}\n\nexport async function saveAttrsList(list, handleError = () => {}) {\n\tconst result = await metaAttrsService.saveAll([...list]);\n\n\tif (result?.status === -1) {\n\t\thandleError(result.data || {});\n\t\treturn [];\n\t}\n\tif (result.data && Array.isArray(result.data)) {\n\t\treturn result.data;\n\t}\n\treturn [];\n}\n\nexport async function deleteAttrsList(list, handleError = () => {}) {\n\tconst result = await metaAttrsService.removeAll(list);\n\tif (result?.status === -1) {\n\t\thandleError(result.data || {});\n\t\treturn [];\n\t}\n\tif (result.data && Array.isArray(result.data)) {\n\t\treturn result.data;\n\t}\n\treturn [];\n}\n\nexport async function fetchLanguages() {\n\tconst criteria = [\n\t\t{ fieldName: \"name\", operator: \"=\", value: \"select.language\" },\n\t];\n\tconst result = await metaSelectService.search({\n\t\tdata: { criteria },\n\t\tfields: [\"items.value\", \"items.title\"],\n\t});\n\tif (result && result.data && Array.isArray(result.data)) {\n\t\treturn result.data.map((d) => {\n\t\t\treturn { title: d[\"items.title\"], value: d[\"items.value\"] };\n\t\t});\n\t}\n\treturn [];\n}\n\nexport async function getTranslationList(keyList) {\n\tconst criteria = [{ fieldName: \"key\", operator: \"in\", value: keyList }];\n\tconst result = await metaTranslationService.search({ data: { criteria } });\n\tif (result.data && Array.isArray(result.data)) {\n\t\treturn result.data;\n\t}\n\treturn [];\n}\n\nexport async function saveTranslationList(list, handleError = () => {}) {\n\tconst result = await metaTranslationService.saveAll([...list]);\n\tif (result?.status === -1) {\n\t\thandleError(result.data || {});\n\t\treturn [];\n\t}\n\tif (result.data && Array.isArray(result.data)) {\n\t\treturn result.data;\n\t}\n\treturn [];\n}\n\nexport async function deleteTranslationList(list, handleError = () => {}) {\n\tconst result = await metaTranslationService.removeAll(list);\n\tif (result?.status === -1) {\n\t\thandleError(result.data || {});\n\t\treturn [];\n\t}\n\tif (result.data && Array.isArray(result.data)) {\n\t\treturn result.data;\n\t}\n\treturn [];\n}\n\nexport async function fetchUserPreferences() {\n\tconst userInfo = await appUserService.info();\n\tif (userInfo && userInfo[\"user.id\"]) {\n\t\tconst userResponse = await appUserService.fetch(userInfo[\"user.id\"], {\n\t\t\tfields: [\"theme\"],\n\t\t});\n\t\tif (userResponse && userResponse.data && userResponse.data[0]) {\n\t\t\treturn userResponse.data[0];\n\t\t}\n\t}\n\treturn null;\n}\n\nexport async function getSelectionText(metaSelect) {\n\tlet selectionText = \"\";\n\tif (metaSelect) {\n\t\tconst context = {\n\t\t\tmetaSelect: {\n\t\t\t\t...metaSelect,\n\t\t\t},\n\t\t};\n\t\tconst payloadData = {\n\t\t\tdata: { context },\n\t\t\taction: \"action-studio-selection-method-fill-selection-text\",\n\t\t\tmodel: \"com.axelor.studio.db.StudioSelection\",\n\t\t};\n\t\tconst actionResponse = await selectionBuilderService.action(payloadData);\n\t\tconst { data = [] } = actionResponse;\n\t\tif (data[0]) {\n\t\t\tconst _properties = data[0].values || {};\n\t\t\tif (_properties.selectionText) {\n\t\t\t\tselectionText = _properties.selectionText;\n\t\t\t}\n\t\t}\n\t}\n\treturn selectionText;\n}\n","export function getScrollParent(element, includeHidden = false) {\n\tvar style = getComputedStyle(element);\n\tvar excludeStaticParent = style.position === \"absolute\";\n\tvar overflowRegex = includeHidden ? /(auto|scroll|hidden)/ : /(auto|scroll)/;\n\n\tif (style.position === \"fixed\") return document.body;\n\tfor (var parent = element; (parent = parent.parentElement); ) {\n\t\tstyle = getComputedStyle(parent);\n\t\tif (excludeStaticParent && style.position === \"static\") {\n\t\t\tcontinue;\n\t\t}\n\t\tif (overflowRegex.test(style.overflow + style.overflowY + style.overflowX))\n\t\t\treturn parent;\n\t}\n\n\treturn document.body;\n}\n\nexport function customScrollTo(element) {\n\tconst scrollableParent = getScrollParent(element);\n\tif (scrollableParent) {\n\t\twindow.requestAnimationFrame(() => {\n\t\t\tscrollableParent.scrollTo({\n\t\t\t\ttop: element.offsetTop + 14, //14 is top padding of div\n\t\t\t\tbehavior: \"smooth\",\n\t\t\t});\n\t\t});\n\t}\n}\n","import React, { useRef, useEffect } from \"react\";\nimport CircularProgress from \"@material-ui/core/CircularProgress\";\nimport { makeStyles } from \"@material-ui/core/styles\";\nimport classNames from \"classnames\";\n\nimport { Widget, Form } from \"../components\";\nimport { IDS, MODEL_TYPE } from \"../constants\";\nimport { useStore } from \"../store/context\";\nimport { customScrollTo } from \"./utils\";\n\nconst useStyles = makeStyles({\n\tuiContainer: {\n\t\tdisplay: \"flex\",\n\t\tflexDirection: \"column\",\n\t\talignSelf: \"baseline\",\n\t},\n\tcontainer: {\n\t\tdisplay: \"flex\",\n\t\tflexDirection: \"column\",\n\t\theight: \"fit-content\",\n\t\tposition: \"relative\",\n\t},\n\tloaderContainer: {\n\t\tdisplay: \"flex\",\n\t\tflexDirection: \"column\",\n\t\tjustifyContent: \"center\",\n\t\theight: \"100%\",\n\t\tposition: \"absolute\",\n\t\tzIndex: 1000,\n\t\tborder: \"0px\",\n\t\tbackgroundColor: \"rgba(0,0,0,0.05)\",\n\t\tbottom: 0,\n\t\ttop: 0,\n\t\tleft: 0,\n\t\tright: 0,\n\t\talignItems: \"center\",\n\t},\n\temptyFormInfo: {\n\t\tminHeight: \"24vh !important\",\n\t},\n});\n// Render Main Form UI View\nfunction FormViewUI({ design }) {\n\tconst store = useStore();\n\tconst classes = useStyles();\n\tconst customPanelRef = useRef(null);\n\tconst {\n\t\twidgets,\n\t\tcustomFieldWidgets,\n\t\tloader,\n\t\terrorList,\n\t\tmodelField,\n\t\tmodelType,\n\t} = store.state;\n\tconst formInfo = (store.state.widgets || [])[-1];\n\n\tconst customFieldWidgetsExists = !!customFieldWidgets;\n\tuseEffect(() => {\n\t\tconst grid = customPanelRef.current;\n\t\tif (grid && customFieldWidgetsExists) {\n\t\t\tcustomScrollTo(grid);\n\t\t\tgrid && grid.focus();\n\t\t}\n\t}, [customFieldWidgetsExists]);\n\n\treturn (\n\t\t<div className={classNames(classes.uiContainer)}>\n\t\t\t<div\n\t\t\t\tid=\"form-view\"\n\t\t\t\tclassName={classNames(classes.container, {\n\t\t\t\t\t[classes.emptyFormInfo]: !formInfo && !customFieldWidgets,\n\t\t\t\t})}\n\t\t\t>\n\t\t\t\t{loader && (\n\t\t\t\t\t<div className={classNames(classes.loaderContainer)}>\n\t\t\t\t\t\t<CircularProgress />\n\t\t\t\t\t</div>\n\t\t\t\t)}\n\t\t\t\t{widgets && (\n\t\t\t\t\t<Widget\n\t\t\t\t\t\tindex={0}\n\t\t\t\t\t\tid={IDS.form}\n\t\t\t\t\t\tattrs={store.state.widgets[IDS.form]}\n\t\t\t\t\t\tonSelect={store.onSelect}\n\t\t\t\t\t\t{...{\n\t\t\t\t\t\t\titems: store.state.items,\n\t\t\t\t\t\t\tdragWidget: store.state.dragWidget,\n\t\t\t\t\t\t\thoverWidget: store.state.hoverWidget,\n\t\t\t\t\t\t\teditWidget: store.state.editWidget,\n\t\t\t\t\t\t\twidgets: store.state.widgets,\n\t\t\t\t\t\t\tonSelect: store.onSelect,\n\t\t\t\t\t\t\tonMove: store.onMove,\n\t\t\t\t\t\t\tonDrag: store.onDrag,\n\t\t\t\t\t\t\tonHover: store.onHover,\n\t\t\t\t\t\t\tonWidgetChange: store.onWidgetChange,\n\t\t\t\t\t\t\tsetHoverAttr: store.setHoverAttr,\n\t\t\t\t\t\t\taddTabPanel: store.addTabPanel,\n\t\t\t\t\t\t\tcanRemove: modelType === MODEL_TYPE.BASE ? false : true,\n\t\t\t\t\t\t\terrorList,\n\t\t\t\t\t\t}}\n\t\t\t\t\t\tdesign={design}\n\t\t\t\t\t\tcomponent={Form}\n\t\t\t\t\t/>\n\t\t\t\t)}\n\t\t\t\t{customFieldWidgets && (\n\t\t\t\t\t<div\n\t\t\t\t\t\tclassName=\"custom-field-pallett-view\"\n\t\t\t\t\t\tref={customPanelRef}\n\t\t\t\t\t\ttabIndex={1}\n\t\t\t\t\t>\n\t\t\t\t\t\t<div className=\"custom-field-view-header\">\n\t\t\t\t\t\t\t{modelField?.name || \"attrs\"}\n\t\t\t\t\t\t</div>\n\t\t\t\t\t\t<Widget\n\t\t\t\t\t\t\t_type=\"customField\"\n\t\t\t\t\t\t\tindex={0}\n\t\t\t\t\t\t\tid={IDS.customForm}\n\t\t\t\t\t\t\tattrs={store.state.customFieldWidgets[IDS.customForm]}\n\t\t\t\t\t\t\tonSelect={store.onSelect}\n\t\t\t\t\t\t\t{...{\n\t\t\t\t\t\t\t\titems: store.state.customFieldItems,\n\t\t\t\t\t\t\t\tdragWidget: store.state.dragWidget,\n\t\t\t\t\t\t\t\thoverWidget: store.state.hoverWidget,\n\t\t\t\t\t\t\t\teditWidget: store.state.editWidget,\n\t\t\t\t\t\t\t\twidgets: store.state.customFieldWidgets,\n\t\t\t\t\t\t\t\tonSelect: store.onSelect,\n\t\t\t\t\t\t\t\tonMove: store.onMove,\n\t\t\t\t\t\t\t\tonDrag: store.onDrag,\n\t\t\t\t\t\t\t\taddTabPanel: store.addTabPanel,\n\t\t\t\t\t\t\t\tonHover: store.onHover,\n\t\t\t\t\t\t\t\tonWidgetChange: store.onWidgetChange,\n\t\t\t\t\t\t\t\tsetHoverAttr: store.setHoverAttr,\n\t\t\t\t\t\t\t\terrorList,\n\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t\tdesign={design}\n\t\t\t\t\t\t\tcomponent={Form}\n\t\t\t\t\t\t/>\n\t\t\t\t\t</div>\n\t\t\t\t)}\n\t\t\t</div>\n\t\t</div>\n\t);\n}\n\nexport default FormViewUI;\n","import React from \"react\";\nimport classNames from \"classnames\";\nimport Editor from \"./../Editor\";\n\nexport default React.memo(function MainPanel({ toolbarOffset }) {\n\tconst [design] = React.useState(true);\n\n\treturn (\n\t\t<div\n\t\t\tclassName={classNames(\"form-layout-container\", {\n\t\t\t\t\"form-layout-design\": design,\n\t\t\t})}\n\t\t\tstyle={{\n\t\t\t\tdisplay: \"flex\",\n\t\t\t\twidth: \"100%\",\n\t\t\t\theight: `calc(100vh - ${toolbarOffset}px)`,\n\t\t\t\tjustifyContent: \"center\",\n\t\t\t\toverflow: \"auto\",\n\t\t\t\tposition: \"relative\",\n\t\t\t\tpaddingRight: \"1em\",\n\t\t\t}}\n\t\t>\n\t\t\t<Editor design={design} />\n\t\t</div>\n\t);\n});\n","import React from \"react\";\n\nexport function useDebounceEffect(handler, interval) {\n\tconst isMounted = React.useRef(false);\n\tReact.useEffect(() => {\n\t\tif (isMounted.current) {\n\t\t\tconst timer = setTimeout(() => handler(), interval);\n\t\t\treturn () => clearTimeout(timer);\n\t\t}\n\t\tisMounted.current = true;\n\t}, [handler, interval]);\n}\n","import React from \"react\";\nimport { makeStyles } from \"@material-ui/core/styles\";\nimport Button from \"@material-ui/core/Button\";\nimport Grid from \"@material-ui/core/Grid\";\nimport ChevronLeft from \"@material-ui/icons/ChevronLeft\";\nimport ChevronRight from \"@material-ui/icons/ChevronRight\";\nimport Typography from \"@material-ui/core/Typography\";\nimport Dialog from \"@material-ui/core/Dialog\";\nimport DialogActions from \"@material-ui/core/DialogActions\";\nimport DialogContent from \"@material-ui/core/DialogContent\";\nimport DialogTitle from \"@material-ui/core/DialogTitle\";\nimport useMediaQuery from \"@material-ui/core/useMediaQuery\";\nimport List from \"@material-ui/core/List\";\nimport ListItem from \"@material-ui/core/ListItem\";\nimport ListItemText from \"@material-ui/core/ListItemText\";\nimport { useTheme } from \"@material-ui/core/styles\";\nimport IconButton from \"@material-ui/core/IconButton\";\nimport { Search } from \"@material-ui/icons\";\nimport {\n\tTabs,\n\tTab,\n\tCircularProgress,\n\tBox,\n\tInputAdornment,\n\tTextField,\n} from \"@material-ui/core\";\n\nconst useStyles = makeStyles((theme) => ({\n\troot: {\n\t\twidth: \"100%\",\n\t\tbackgroundColor: theme.palette.background.paper,\n\t\theight: 300,\n\t\toverflow: \"auto\",\n\t},\n\tinput: {\n\t\t\"& .MuiOutlinedInput-root\": {\n\t\t\tborderRadius: 20,\n\t\t\t\"& fieldset\": {\n\t\t\t\tborderColor: \"#bdbdbd\",\n\t\t\t},\n\t\t\t\"&:hover fieldset\": {\n\t\t\t\tborderColor: \"#bdbdbd\",\n\t\t\t},\n\t\t\t\"&.Mui-focused fieldset\": {\n\t\t\t\tborderColor: \"#bdbdbd\",\n\t\t\t},\n\t\t},\n\t},\n\ttitleHeader: {\n\t\tborderBottom: \"0.5px solid #ddd\",\n\t},\n\tlistItem: {\n\t\tborderBottom: \"1px solid #ddd\",\n\t\tpaddingTop: 10,\n\t\tpaddingBottom: 10,\n\t},\n\tcloseText: {\n\t\ttextTransform: \"capitalize\",\n\t},\n\ttabContainer: {\n\t\t\"& .MuiTabs-indicator\": {\n\t\t\tbackgroundColor: \"#3f51b5\",\n\t\t},\n\t},\n\tlabelStyle: {\n\t\ttextTransform: \"none\",\n\t},\n\tcenterElement: {\n\t\theight: 300,\n\t\tpadding: \"8px\",\n\t\tdisplay: \"flex\",\n\t\talignItems: \"center\",\n\t\tjustifyContent: \"center\",\n\t},\n}));\n\nconst tabsLabel = [\"Model actions\", \"Global actions\", \"Other actions\"];\n\nfunction TabPanel(props) {\n\tconst { children, value, index, ...other } = props;\n\n\treturn (\n\t\t<div\n\t\t\trole=\"tabpanel\"\n\t\t\thidden={value !== index}\n\t\t\tid={`horizontal-tabpanel-${index}`}\n\t\t\taria-labelledby={`horizontal-tab-${index}`}\n\t\t\t{...other}\n\t\t>\n\t\t\t{value === index && <>{children}</>}\n\t\t</div>\n\t);\n}\n\nexport default function ResponsiveDialog(props) {\n\tconst {\n\t\tlist = [],\n\t\tonChange,\n\t\thandleClose,\n\t\toffset,\n\t\ttotal,\n\t\tdisplayField,\n\t\tgetOptionLabel,\n\t\tisTypeOnClick = false,\n\t\tisDataLoading,\n\t} = props;\n\tconst theme = useTheme();\n\tconst classes = useStyles();\n\tconst fullScreen = useMediaQuery(theme.breakpoints.down(\"sm\"));\n\n\tconst handleItemClick = React.useCallback(\n\t\t(item) => {\n\t\t\tonChange(item);\n\t\t\thandleClose();\n\t\t},\n\t\t[onChange, handleClose]\n\t);\n\n\tconst canNext = list.length > 0 && offset + list.length < total;\n\tconst canPrev = offset > 0;\n\n\tconst getLabel = (item) => {\n\t\treturn getOptionLabel ? getOptionLabel(item) : item[displayField || \"name\"];\n\t};\n\n\treturn (\n\t\t<div>\n\t\t\t<Dialog\n\t\t\t\tfullScreen={fullScreen}\n\t\t\t\tmaxWidth=\"sm\"\n\t\t\t\tfullWidth={true}\n\t\t\t\topen={props.open}\n\t\t\t\tonClose={props.handleClose}\n\t\t\t\taria-labelledby=\"responsive-dialog-title\"\n\t\t\t>\n\t\t\t\t<DialogTitle\n\t\t\t\t\tid=\"responsive-dialog-title\"\n\t\t\t\t\tclassName={classes.titleHeader}\n\t\t\t\t>{`Search ${props.title || \"item\"}`}</DialogTitle>\n\t\t\t\t<DialogContent>\n\t\t\t\t\t<Grid container>\n\t\t\t\t\t\t<Grid container item alignItems=\"center\">\n\t\t\t\t\t\t\t{/* Add tabbed view for distinguising between different types of models */}\n\t\t\t\t\t\t\t<Grid\n\t\t\t\t\t\t\t\titem\n\t\t\t\t\t\t\t\txs={10}\n\t\t\t\t\t\t\t\tstyle={{\n\t\t\t\t\t\t\t\t\tflex: 1,\n\t\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t<TextField\n\t\t\t\t\t\t\t\t\tsize=\"small\"\n\t\t\t\t\t\t\t\t\tfullWidth\n\t\t\t\t\t\t\t\t\tclassName={classes.input}\n\t\t\t\t\t\t\t\t\tvalue={props.searchText}\n\t\t\t\t\t\t\t\t\tvariant=\"outlined\"\n\t\t\t\t\t\t\t\t\tonChange={(e) => props.setSearchText(e.target.value)}\n\t\t\t\t\t\t\t\t\tInputProps={{\n\t\t\t\t\t\t\t\t\t\tstartAdornment: (\n\t\t\t\t\t\t\t\t\t\t\t<InputAdornment position=\"start\">\n\t\t\t\t\t\t\t\t\t\t\t\t<Search style={{ fill: \"#bdbdbd\" }} />\n\t\t\t\t\t\t\t\t\t\t\t</InputAdornment>\n\t\t\t\t\t\t\t\t\t\t),\n\t\t\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t\t\t\tplaceholder={\"Search\"}\n\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t</Grid>\n\t\t\t\t\t\t\t<Grid item>\n\t\t\t\t\t\t\t\t<IconButton onClick={props.onPrevious} disabled={!canPrev}>\n\t\t\t\t\t\t\t\t\t<ChevronLeft />\n\t\t\t\t\t\t\t\t</IconButton>\n\t\t\t\t\t\t\t\t<IconButton onClick={props.onNext} disabled={!canNext}>\n\t\t\t\t\t\t\t\t\t<ChevronRight />\n\t\t\t\t\t\t\t\t</IconButton>\n\t\t\t\t\t\t\t</Grid>\n\t\t\t\t\t\t</Grid>\n\t\t\t\t\t\t{isTypeOnClick && (\n\t\t\t\t\t\t\t<Grid item xs={12}>\n\t\t\t\t\t\t\t\t<Tabs\n\t\t\t\t\t\t\t\t\torientation=\"horizontal\"\n\t\t\t\t\t\t\t\t\tvariant=\"fullWidth\"\n\t\t\t\t\t\t\t\t\tvalue={props.currentTab}\n\t\t\t\t\t\t\t\t\tonChange={props.onTabChange}\n\t\t\t\t\t\t\t\t\tclassName={classes.tabContainer}\n\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t{tabsLabel.map((label, i) => (\n\t\t\t\t\t\t\t\t\t\t<Tab\n\t\t\t\t\t\t\t\t\t\t\tkey={`${i}-${label}`}\n\t\t\t\t\t\t\t\t\t\t\tlabel={label}\n\t\t\t\t\t\t\t\t\t\t\tclassName={classes.labelStyle}\n\t\t\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t\t))}\n\t\t\t\t\t\t\t\t</Tabs>\n\t\t\t\t\t\t\t</Grid>\n\t\t\t\t\t\t)}\n\t\t\t\t\t</Grid>\n\t\t\t\t\t{isDataLoading ? (\n\t\t\t\t\t\t<Box className={classes.centerElement}>\n\t\t\t\t\t\t\t<CircularProgress size={20} />\n\t\t\t\t\t\t</Box>\n\t\t\t\t\t) : list.length !== 0 ? (\n\t\t\t\t\t\t!isTypeOnClick ? (\n\t\t\t\t\t\t\t<List className={classes.root}>\n\t\t\t\t\t\t\t\t{list\n\t\t\t\t\t\t\t\t\t.filter((item) => item.id !== \"studio_show_More_View\")\n\t\t\t\t\t\t\t\t\t.map((item, i) => (\n\t\t\t\t\t\t\t\t\t\t<ListItem\n\t\t\t\t\t\t\t\t\t\t\tclassName={classes.listItem}\n\t\t\t\t\t\t\t\t\t\t\tkey={`${i}-${getLabel(item)}`}\n\t\t\t\t\t\t\t\t\t\t\trole={undefined}\n\t\t\t\t\t\t\t\t\t\t\tdense\n\t\t\t\t\t\t\t\t\t\t\tbutton\n\t\t\t\t\t\t\t\t\t\t\tonClick={() => handleItemClick(item)}\n\t\t\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t\t\t<ListItemText id={i} primary={getLabel(item)} />\n\t\t\t\t\t\t\t\t\t\t</ListItem>\n\t\t\t\t\t\t\t\t\t))}\n\t\t\t\t\t\t\t</List>\n\t\t\t\t\t\t) : (\n\t\t\t\t\t\t\ttabsLabel.map(\n\t\t\t\t\t\t\t\t(_, index) =>\n\t\t\t\t\t\t\t\t\tprops.currentTab === index && (\n\t\t\t\t\t\t\t\t\t\t<Grid item>\n\t\t\t\t\t\t\t\t\t\t\t<TabPanel value={index} index={index}>\n\t\t\t\t\t\t\t\t\t\t\t\t<Grid item>\n\t\t\t\t\t\t\t\t\t\t\t\t\t<List className={classes.root}>\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t{list\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t.filter(\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t(item) => item.id !== \"studio_show_More_View\"\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t)\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t.map((item, i) => (\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<ListItem\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tclassName={classes.listItem}\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tkey={`${i}-${getLabel(item)}`}\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\trole={undefined}\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tdense\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tbutton\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tonClick={() => handleItemClick(item)}\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<ListItemText\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tid={i}\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tprimary={getLabel(item)}\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t</ListItem>\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t))}\n\t\t\t\t\t\t\t\t\t\t\t\t\t</List>\n\t\t\t\t\t\t\t\t\t\t\t\t</Grid>\n\t\t\t\t\t\t\t\t\t\t\t</TabPanel>\n\t\t\t\t\t\t\t\t\t\t</Grid>\n\t\t\t\t\t\t\t\t\t)\n\t\t\t\t\t\t\t)\n\t\t\t\t\t\t)\n\t\t\t\t\t) : (\n\t\t\t\t\t\t<Box className={classes.centerElement}>\n\t\t\t\t\t\t\t<Typography variant=\"body2\">No data found</Typography>\n\t\t\t\t\t\t</Box>\n\t\t\t\t\t)}\n\t\t\t\t</DialogContent>\n\t\t\t\t<DialogActions>\n\t\t\t\t\t<Button autoFocus onClick={props.handleClose} color=\"primary\">\n\t\t\t\t\t\t<Typography className={classes.closeText}>Close</Typography>\n\t\t\t\t\t</Button>\n\t\t\t\t</DialogActions>\n\t\t\t</Dialog>\n\t\t</div>\n\t);\n}\n","import React, { useState, useEffect } from \"react\";\nimport { TextField } from \"@material-ui/core\";\nimport AutoComplete from \"@material-ui/lab/Autocomplete\";\nimport _ from \"lodash\";\nimport { makeStyles } from \"@material-ui/core/styles\";\n\nimport AxelorService from \"./../services/axelor.rest\";\nimport { useDebounceEffect } from \"./../common.func\";\nimport SearchView from \"../components/SearchView\";\nimport { translate } from \"../utils\";\nconst useStyles = makeStyles({\n\tautoComplete: {\n\t\t\"& > div > label\": {\n\t\t\tcolor: \"#e7eaec !important\",\n\t\t\tfontSize: 12,\n\t\t},\n\t},\n\tautoCompleteRoot: {\n\t\twidth: 200,\n\t\tmarginLeft: 10,\n\t\tcolor: \"#e7eaec\",\n\t},\n\tinputView: {\n\t\tcolor: \"#fff\",\n\t\tfontSize: 13,\n\t\t\"& > *\": {\n\t\t\tcolor: \"#fff\",\n\t\t},\n\t},\n\tpopperView: {\n\t\t\"& ul, .MuiAutocomplete-noOptions\": {\n\t\t\tbackgroundColor: \"rgb(41, 56, 70) !important\",\n\t\t\t\".modern-dark &\": {\n\t\t\t\tbackgroundColor: \"#1b1b1b !important\",\n\t\t\t},\n\t\t},\n\t\t\"& li, .MuiAutocomplete-noOptions\": {\n\t\t\tcolor: \"#e7eaec !important\",\n\t\t\tbackgroundColor: \"rgb(41, 56, 70) !important\",\n\t\t\t\".modern-dark &\": {\n\t\t\t\tbackgroundColor: \"#1b1b1b !important\",\n\t\t\t},\n\t\t},\n\t\t\"& li:hover, .MuiAutocomplete-noOptions\": {\n\t\t\tcolor: \"#e7eaec !important\",\n\t\t\tbackgroundColor: \"#2f4050 !important\",\n\t\t\t\".modern-dark &\": {\n\t\t\t\tbackgroundColor: \"#323232 !important\",\n\t\t\t},\n\t\t},\n\t},\n\toption: {\n\t\tfontSize: 13,\n\t},\n});\n\nfunction Select({\n\tvalue,\n\tlabel,\n\tmodel,\n\tsearchFilter,\n\tonChange,\n\toptions,\n\tfilterData,\n\tlimit = 10,\n\tonSearch,\n\tmodelType,\n\t...props\n}) {\n\tconst classes = useStyles();\n\tconst [searchText, setSearchText] = useState(\"\");\n\tconst [loading, setLoading] = useState(false);\n\tconst [list, setList] = useState([...(options ? options : [])]);\n\tconst [searchMore, setSearchMore] = useState(false);\n\tconst [offset, setOffset] = useState(0);\n\tconst [total, setTotal] = useState(0);\n\n\tconst search = React.useCallback(\n\t\tasync (searchText = \"\") => {\n\t\t\tif (onSearch) {\n\t\t\t\tsetLoading(true);\n\t\t\t\tconst { models, total } = await onSearch({\n\t\t\t\t\tlimit,\n\t\t\t\t\tsearchText,\n\t\t\t\t\tsearchFilter,\n\t\t\t\t\tfilterData,\n\t\t\t\t\tmodelType,\n\t\t\t\t\toffset,\n\t\t\t\t});\n\t\t\t\t!searchMore &&\n\t\t\t\t\ttotal > limit &&\n\t\t\t\t\tmodels.push({\n\t\t\t\t\t\tname: translate(\"Show more...\"),\n\t\t\t\t\t\tid: \"studio_show_More_View\",\n\t\t\t\t\t});\n\t\t\t\tconst uniqueList = _.uniqBy(models, \"name\");\n\t\t\t\tsetList(uniqueList);\n\t\t\t\tsetLoading(false);\n\t\t\t\tsetTotal(total);\n\t\t\t} else {\n\t\t\t\tconst service = new AxelorService({ model });\n\t\t\t\tsetLoading(true);\n\t\t\t\tconst _data = searchFilter(searchText) || {};\n\t\t\t\tconst criteria = [];\n\t\t\t\tif (searchText) {\n\t\t\t\t\tcriteria.push({\n\t\t\t\t\t\tfieldName: \"name\",\n\t\t\t\t\t\toperator: \"like\",\n\t\t\t\t\t\tvalue: searchText,\n\t\t\t\t\t});\n\t\t\t\t}\n\t\t\t\tconst data = {\n\t\t\t\t\t...(_data._domain && { _domain: _data._domain }),\n\t\t\t\t\t...(_data._domainContext && { _domainContext: _data._domainContext }),\n\t\t\t\t\tcriteria: [...criteria, ...(_data.criteria || [])],\n\t\t\t\t\toperator: \"and\",\n\t\t\t\t};\n\t\t\t\tconst fields = _data.fields || [];\n\t\t\t\tservice\n\t\t\t\t\t.search({ fields, data, limit, offset: offset })\n\t\t\t\t\t.then((response = {}) => {\n\t\t\t\t\t\tconst { data = [], total } = response;\n\t\t\t\t\t\tsetLoading(false);\n\t\t\t\t\t\tconst list = filterData ? filterData([...data]) : [...data];\n\t\t\t\t\t\t!searchMore &&\n\t\t\t\t\t\t\ttotal > limit &&\n\t\t\t\t\t\t\tlist.push({\n\t\t\t\t\t\t\t\tname: translate(\"Show more...\"),\n\t\t\t\t\t\t\t\tid: \"studio_show_More_View\",\n\t\t\t\t\t\t\t});\n\t\t\t\t\t\tsetTotal(total);\n\t\t\t\t\t\tconst uniqueList = _.uniqBy(list, \"name\");\n\t\t\t\t\t\tsetList(uniqueList);\n\t\t\t\t\t});\n\t\t\t}\n\t\t},\n\t\t[\n\t\t\tsearchFilter,\n\t\t\tmodel,\n\t\t\tfilterData,\n\t\t\tsearchMore,\n\t\t\tlimit,\n\t\t\tonSearch,\n\t\t\tmodelType,\n\t\t\toffset,\n\t\t]\n\t);\n\n\tconst handleNext = React.useCallback(() => {\n\t\tconst newOffset = offset + limit;\n\t\tif (newOffset <= total) {\n\t\t\tsetOffset(newOffset);\n\t\t}\n\t}, [limit, total, offset]);\n\n\tconst handlePrevious = React.useCallback(() => {\n\t\tsetOffset((offset) => {\n\t\t\tconst newOffset = offset - limit;\n\t\t\treturn newOffset > 0 ? newOffset : 0;\n\t\t});\n\t}, [limit]);\n\n\tconst debounceHandler = React.useCallback(() => {\n\t\t!options && search(searchText);\n\t}, [searchText, search, options]);\n\n\tconst handleChange = React.useCallback(\n\t\t(e, value) => {\n\t\t\tif (value?.id === \"studio_show_More_View\") {\n\t\t\t\tsetSearchMore(true);\n\t\t\t} else {\n\t\t\t\tonChange(value);\n\t\t\t}\n\t\t},\n\t\t[onChange]\n\t);\n\n\tconst handleTextChange = React.useCallback((value) => {\n\t\tsetSearchText(value);\n\t\tsetOffset(0);\n\t}, []);\n\n\tconst handleClose = React.useCallback(() => {\n\t\tsetSearchMore(false);\n\t\tsetOffset(0);\n\t}, []);\n\n\tuseDebounceEffect(debounceHandler, 500);\n\n\tuseEffect(() => {\n\t\t!options && search();\n\t}, [search, options, model]);\n\n\tuseEffect(() => {\n\t\tif (!value) {\n\t\t\tsetSearchText(\"\");\n\t\t}\n\t}, [value]);\n\treturn (\n\t\t<React.Fragment>\n\t\t\t<AutoComplete\n\t\t\t\tclearOnEscape\n\t\t\t\tautoComplete\n\t\t\t\tclasses={{\n\t\t\t\t\troot: classes.autoCompleteRoot,\n\t\t\t\t\tinputFocused: classes.input,\n\t\t\t\t\tclearIndicator: classes.input,\n\t\t\t\t\tpopupIndicator: classes.input,\n\t\t\t\t\tinput: classes.inputView,\n\t\t\t\t\tendAdornment: classes.inputView,\n\t\t\t\t\tpopper: classes.popperView,\n\t\t\t\t\toption: classes.option,\n\t\t\t\t\tnoOptions: classes.option,\n\t\t\t\t}}\n\t\t\t\tsize=\"small\"\n\t\t\t\tclassName={classes.autoComplete}\n\t\t\t\tonInputChange={(e, value) => setSearchText(value)}\n\t\t\t\trenderInput={(params) => {\n\t\t\t\t\tparams.inputProps.value = searchText;\n\t\t\t\t\treturn (\n\t\t\t\t\t\t<TextField {...params} placeholder={translate(label)} fullWidth />\n\t\t\t\t\t);\n\t\t\t\t}}\n\t\t\t\toptions={[...list]}\n\t\t\t\tloading={loading}\n\t\t\t\tgetOptionLabel={(option) =>\n\t\t\t\t\ttypeof option === \"string\"\n\t\t\t\t\t\t? option\n\t\t\t\t\t\t: props.getOptionLabel\n\t\t\t\t\t\t? props.getOptionLabel(option)\n\t\t\t\t\t\t: option.name\n\t\t\t\t}\n\t\t\t\tonChange={handleChange}\n\t\t\t\tfilterOptions={(options) => options}\n\t\t\t\tvalue={value || null}\n\t\t\t\tgetOptionSelected={(option, value) => option.name === value.name}\n\t\t\t\t{...props}\n\t\t\t/>\n\t\t\t<SearchView\n\t\t\t\tsearchText={searchText}\n\t\t\t\tlist={list}\n\t\t\t\tmodel={model}\n\t\t\t\ttotal={total}\n\t\t\t\toffset={offset}\n\t\t\t\topen={searchMore}\n\t\t\t\tonNext={handleNext}\n\t\t\t\tonPrevious={handlePrevious}\n\t\t\t\thandleClose={handleClose}\n\t\t\t\tsetSearchText={handleTextChange}\n\t\t\t\tonChange={onChange}\n\t\t\t\ttitle={translate(label)}\n\t\t\t\tgetOptionLabel={props.getOptionLabel}\n\t\t\t/>\n\t\t</React.Fragment>\n\t);\n}\n\nexport default React.memo(Select);\n","import { modelService, metaModelService } from \"./api\";\nimport { ENTITY_TYPE, MODEL_TYPE } from \"../constants\";\n\nexport async function modelSearch({\n\tsearchFilter,\n\tlimit,\n\tsearchText,\n\tmodelType,\n\toffset,\n}) {\n\tconst _data = searchFilter(searchText) || {};\n\tconst criteria = [];\n\tif (searchText) {\n\t\tcriteria.push({\n\t\t\tfieldName: \"name\",\n\t\t\toperator: \"like\",\n\t\t\tvalue: searchText,\n\t\t});\n\t}\n\tconst data = {\n\t\t...(_data._domain && { _domain: _data._domain }),\n\t\t...(_data._domainContext && { _domainContext: _data._domainContext }),\n\t\tcriteria: [...criteria, ...(_data.criteria || [])],\n\t\toperator: \"and\",\n\t};\n\tconst fields = _data.fields || [];\n\tconst service =\n\t\tmodelType === MODEL_TYPE.CUSTOM ? metaModelService : modelService;\n\tconst modelResult = await service.search({ fields, data, limit, offset });\n\tconst models = [];\n\tif (modelResult && modelResult.data && Array.isArray(modelResult.data)) {\n\t\tconst list = modelResult.data\n\t\t\t.map((record) => {\n\t\t\t\tconst modelIndex = models.findIndex(\n\t\t\t\t\t(m) => m.name === record.name && m.packageName === record.packageName\n\t\t\t\t);\n\t\t\t\tif (modelIndex === -1 || modelType === MODEL_TYPE.BASE) {\n\t\t\t\t\tif (modelType === MODEL_TYPE.BASE && modelIndex !== -1) {\n\t\t\t\t\t\tmodels.splice(modelIndex, 1);\n\t\t\t\t\t}\n\t\t\t\t\treturn { ...record, entityType: ENTITY_TYPE.META };\n\t\t\t\t} else {\n\t\t\t\t\tmodels.splice(modelIndex, 1, {\n\t\t\t\t\t\t...models[modelIndex],\n\t\t\t\t\t\tactualType: ENTITY_TYPE.META,\n\t\t\t\t\t});\n\t\t\t\t}\n\t\t\t\treturn undefined;\n\t\t\t})\n\t\t\t.filter((e) => e);\n\t\tmodels.push(...list);\n\t}\n\treturn { models, total: modelResult && modelResult.total };\n}\n","import React from \"react\";\n\nimport AxelorService from \"./../services/axelor.rest\";\nimport Utils, { generateCustomModelSchema, translate } from \"./../utils\";\nimport Select from \"./Select\";\nimport { relationalFields, MODEL_TYPE, PANEL_PROPS } from \"./../constants\";\nimport {\n\tfetchCustomFields,\n\tgetEnableAppBuilder,\n\tfetchViews,\n\tfetchAttrsList,\n\tgetTranslationList,\n\tmetaJsonFieldService,\n} from \"./api\";\nimport { modelSearch } from \"./customModelSearch\";\nimport { generateXpath } from \"./../store/xpathGenerator\";\nimport convert from \"xml-js\";\nimport _ from \"lodash\";\n\nconst metaViewService = new AxelorService({\n\tmodel: \"com.axelor.meta.db.MetaView\",\n});\n\nconst modelTypes = [\n\t{ name: translate(\"View\"), value: MODEL_TYPE.BASE },\n\t{ name: translate(\"Custom\"), value: MODEL_TYPE.CUSTOM },\n];\n\nfunction ViewSelection({\n\tmodel,\n\tupdate,\n\tmodelType,\n\tmodelField,\n\tstartLoader,\n\tentityType,\n\tmetaFieldStore,\n\tclearHistory,\n\treset,\n\t...props\n}) {\n\tconst modelName = `com.axelor.meta.db.${\n\t\tmodelType !== MODEL_TYPE.CUSTOM ? \"MetaModel\" : \"MetaJsonModel\"\n\t}`;\n\n\tconst fetchJSONFields = React.useCallback(\n\t\t(ids, record) => {\n\t\t\tconst criteria = [];\n\t\t\tif (ids.length) {\n\t\t\t\tcriteria.push({ fieldName: \"id\", operator: \"in\", value: ids });\n\t\t\t\tconst data = {\n\t\t\t\t\tcriteria,\n\t\t\t\t};\n\t\t\t\tmetaJsonFieldService\n\t\t\t\t\t.search({ data, sortBy: [\"sequence\"] })\n\t\t\t\t\t.then((res) => {\n\t\t\t\t\t\tif (res.data) {\n\t\t\t\t\t\t\tconst list = res.data || [];\n\t\t\t\t\t\t\tconst schema = generateCustomModelSchema(list, record);\n\t\t\t\t\t\t\tupdate((draft) => {\n\t\t\t\t\t\t\t\tdraft.widgets = {\n\t\t\t\t\t\t\t\t\t...schema.widgets,\n\t\t\t\t\t\t\t\t};\n\t\t\t\t\t\t\t\tdraft.items = schema.items;\n\t\t\t\t\t\t\t\tdraft.loader = false;\n\t\t\t\t\t\t\t});\n\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\tupdate((draft) => {\n\t\t\t\t\t\t\t\tdraft.loader = false;\n\t\t\t\t\t\t\t});\n\t\t\t\t\t\t}\n\t\t\t\t\t});\n\t\t\t} else {\n\t\t\t\tconst schema = generateCustomModelSchema([], record);\n\t\t\t\tupdate((draft) => {\n\t\t\t\t\tdraft.widgets = {\n\t\t\t\t\t\t...schema.widgets,\n\t\t\t\t\t};\n\t\t\t\t\tdraft.items = schema.items;\n\t\t\t\t\tdraft.loader = false;\n\t\t\t\t\tdraft.model = record;\n\t\t\t\t\tdraft.customModel = record;\n\t\t\t\t\tdraft.editWidget = -1;\n\t\t\t\t\tdraft.editWidgetType = null;\n\t\t\t\t});\n\t\t\t}\n\t\t},\n\t\t[update]\n\t);\n\n\tconst handleModelSelect = React.useCallback(\n\t\tasync (model) => {\n\t\t\tconst metaModelService = new AxelorService({ model: modelName });\n\t\t\tif (!model) {\n\t\t\t\tif (modelType === MODEL_TYPE.CUSTOM) {\n\t\t\t\t\treset();\n\t\t\t\t\treturn;\n\t\t\t\t}\n\t\t\t\tupdate((draft) => {\n\t\t\t\t\tclearHistory(draft);\n\t\t\t\t\tdraft.model = null;\n\t\t\t\t\tdraft.customModel = null;\n\t\t\t\t\tdraft.items = [];\n\t\t\t\t\tdraft.exView = null;\n\t\t\t\t\tdraft.view = null;\n\t\t\t\t\tdraft.widgets = null;\n\t\t\t\t\tdraft.initialItems = null;\n\t\t\t\t\tdraft.initialWidgets = null;\n\t\t\t\t\tdraft.customFieldWidgets = null;\n\t\t\t\t\tdraft.customFieldItems = null;\n\t\t\t\t\tdraft.customFields = [];\n\t\t\t\t\tdraft.modelField = null;\n\t\t\t\t\tdraft.extensionXML = null;\n\t\t\t\t\tdraft.extensionView = null;\n\t\t\t\t\tdraft.originalXML = null;\n\t\t\t\t\tdraft.selectedView = null;\n\t\t\t\t\tdraft.metaFields = [];\n\t\t\t\t\tdraft.metaFieldStore = [];\n\t\t\t\t\tdraft.extensionMoves = [];\n\t\t\t\t\tdraft.errorList = {};\n\t\t\t\t\tdraft.attrsList = [];\n\t\t\t\t\tdraft.translationList = [];\n\t\t\t\t\tdraft.initialTranslationList = [];\n\t\t\t\t\tdraft.removedTranslationList = [];\n\t\t\t\t});\n\t\t\t\treturn;\n\t\t\t}\n\t\t\tlet data = {\n\t\t\t\tfields: [\"metaFields\", \"packageName\", \"name\", \"fullName\"],\n\t\t\t\trelated: {\n\t\t\t\t\tmetaFields: [\n\t\t\t\t\t\t\"typeName\",\n\t\t\t\t\t\t\"label\",\n\t\t\t\t\t\t\"mappedBy\",\n\t\t\t\t\t\t\"relationship\",\n\t\t\t\t\t\t\"name\",\n\t\t\t\t\t\t\"packageName\",\n\t\t\t\t\t],\n\t\t\t\t},\n\t\t\t};\n\t\t\tif (modelType === MODEL_TYPE.CUSTOM) {\n\t\t\t\tupdate((draft) => {\n\t\t\t\t\tdraft.loader = true;\n\t\t\t\t});\n\t\t\t\tdata = {\n\t\t\t\t\trelated: {\n\t\t\t\t\t\tstudioMenu: [\"title\", \"parentMenu\"],\n\t\t\t\t\t},\n\t\t\t\t};\n\t\t\t}\n\t\t\tmetaModelService.fetch(model.id, data).then((res) => {\n\t\t\t\tif (res.data) {\n\t\t\t\t\tconst record = res.data[0];\n\t\t\t\t\tconst { fields = [], ...rest } = record;\n\t\t\t\t\tupdate((draft) => {\n\t\t\t\t\t\tclearHistory(draft);\n\t\t\t\t\t\tdraft.model = model;\n\t\t\t\t\t\tdraft.entityType = model.entityType;\n\t\t\t\t\t\tdraft.widgets = null;\n\t\t\t\t\t\tdraft.initialWidgets = null;\n\t\t\t\t\t\tdraft.items = [];\n\t\t\t\t\t\tdraft.initialItems = null;\n\t\t\t\t\t\tdraft.view = null;\n\t\t\t\t\t\tdraft.exView = null;\n\t\t\t\t\t\tdraft.modelField = null;\n\t\t\t\t\t\tdraft.customFields = [];\n\t\t\t\t\t\tdraft.customFieldWidgets = null;\n\t\t\t\t\t\tdraft.originalXML = null;\n\t\t\t\t\t\tdraft.extensionXML = null;\n\t\t\t\t\t\tdraft.extensionView = null;\n\t\t\t\t\t\tdraft.extensionMoves = [];\n\t\t\t\t\t\tdraft.errorList = {};\n\t\t\t\t\t\tdraft.attrsList = [];\n\t\t\t\t\t\tdraft.translationList = [];\n\t\t\t\t\t\tdraft.initialTranslationList = [];\n\t\t\t\t\t\tdraft.removedTranslationList = [];\n\t\t\t\t\t\tdraft.selectedView = null;\n\t\t\t\t\t\tdraft.editWidget = -1;\n\t\t\t\t\t\tdraft.editWidgetType = null;\n\t\t\t\t\t\tdraft.tabIndex = 0;\n\t\t\t\t\t\tconst _fields = (record.metaFields || []).map((f) => {\n\t\t\t\t\t\t\treturn JSON.parse(\n\t\t\t\t\t\t\t\tJSON.stringify({\n\t\t\t\t\t\t\t\t\t...f,\n\t\t\t\t\t\t\t\t\ttype:\n\t\t\t\t\t\t\t\t\t\trelationalFields[f.relationship] ||\n\t\t\t\t\t\t\t\t\t\t(f.typeName || \"\").toLowerCase(),\n\t\t\t\t\t\t\t\t\t...(f.relationship && {\n\t\t\t\t\t\t\t\t\t\ttargetModel: `${f.packageName}.${f.typeName}`,\n\t\t\t\t\t\t\t\t\t}),\n\t\t\t\t\t\t\t\t\tpackageName: undefined,\n\t\t\t\t\t\t\t\t})\n\t\t\t\t\t\t\t);\n\t\t\t\t\t\t});\n\t\t\t\t\t\tif (modelType === MODEL_TYPE.BASE) {\n\t\t\t\t\t\t\tdraft.metaFieldStore = [..._fields];\n\t\t\t\t\t\t\tdraft.metaFields = [..._fields];\n\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\tfetchJSONFields(\n\t\t\t\t\t\t\t\tfields.map((f) => f.id),\n\t\t\t\t\t\t\t\trest\n\t\t\t\t\t\t\t);\n\t\t\t\t\t\t\tdraft.customModel = record;\n\t\t\t\t\t\t}\n\t\t\t\t\t});\n\t\t\t\t}\n\t\t\t});\n\t\t},\n\t\t[update, modelName, modelType, fetchJSONFields, clearHistory, reset]\n\t);\n\n\tconst handleViewSelect = React.useCallback(\n\t\tasync (view) => {\n\t\t\tstartLoader();\n\t\t\tif (!view) {\n\t\t\t\tupdate((draft) => {\n\t\t\t\t\tclearHistory(draft);\n\t\t\t\t\tdraft.items = [];\n\t\t\t\t\tdraft.exView = null;\n\t\t\t\t\tdraft.view = null;\n\t\t\t\t\tdraft.widgets = null;\n\t\t\t\t\tdraft.initialItems = null;\n\t\t\t\t\tdraft.initialWidgets = null;\n\t\t\t\t\tdraft.customFieldWidgets = null;\n\t\t\t\t\tdraft.customFieldItems = null;\n\t\t\t\t\tdraft.customFields = [];\n\t\t\t\t\tdraft.modelField = null;\n\t\t\t\t\tdraft.extensionXML = null;\n\t\t\t\t\tdraft.extensionView = null;\n\t\t\t\t\tdraft.originalXML = null;\n\t\t\t\t\tdraft.loader = false;\n\t\t\t\t\tdraft.metaFields = draft.metaFieldStore;\n\t\t\t\t\tdraft.selectedView = null;\n\t\t\t\t\tdraft.extensionMoves = [];\n\t\t\t\t\tdraft.errorList = {};\n\t\t\t\t\tdraft.attrsList = [];\n\t\t\t\t\tdraft.translationList = [];\n\t\t\t\t\tdraft.initialTranslationList = [];\n\t\t\t\t\tdraft.removedTranslationList = [];\n\t\t\t\t});\n\t\t\t\treturn;\n\t\t\t}\n\t\t\tconst views = await fetchViews(view);\n\t\t\tconst attrsList = await fetchAttrsList({\n\t\t\t\tmodel: model.name,\n\t\t\t\tview: view.name,\n\t\t\t});\n\t\t\tconst schema = Utils.generateXMLToViewSchema({\n\t\t\t\tview: views.view,\n\t\t\t\tfields: metaFieldStore,\n\t\t\t\textensionXML: views.extensionXML,\n\t\t\t\tattrsList,\n\t\t\t});\n\t\t\tconst translationNames = Object.values(schema.widgets)\n\t\t\t\t.filter((widget) => widget.title && widget.title.startsWith(\"studio:\"))\n\t\t\t\t.map((widget) => widget.title);\n\t\t\tconst translationList = await getTranslationList(translationNames);\n\t\t\tconst originalViewData = {\n\t\t\t\toperator: \"and\",\n\t\t\t\tcriteria: [\n\t\t\t\t\t{\n\t\t\t\t\t\toperator: \"or\",\n\t\t\t\t\t\tcriteria: [\n\t\t\t\t\t\t\t{ fieldName: \"computed\", operator: \"=\", value: false },\n\t\t\t\t\t\t\t{ fieldName: \"computed\", operator: \"isNull\" },\n\t\t\t\t\t\t],\n\t\t\t\t\t},\n\t\t\t\t\t{\n\t\t\t\t\t\toperator: \"or\",\n\t\t\t\t\t\tcriteria: [\n\t\t\t\t\t\t\t{ fieldName: \"extension\", operator: \"=\", value: false },\n\t\t\t\t\t\t\t{ fieldName: \"extension\", operator: \"isNull\" },\n\t\t\t\t\t\t],\n\t\t\t\t\t},\n\t\t\t\t\t{ fieldName: \"name\", operator: \"=\", value: `${view.name}` },\n\t\t\t\t],\n\t\t\t};\n\t\t\tmetaViewService.search({ data: originalViewData }).then((res) => {\n\t\t\t\tconst { data = [] } = res;\n\t\t\t\tif (data[0]) {\n\t\t\t\t\tupdate((draft) => {\n\t\t\t\t\t\tdraft.originalXML = JSON.parse(\n\t\t\t\t\t\t\tconvert.xml2json(data[0].xml, {\n\t\t\t\t\t\t\t\tcompact: false,\n\t\t\t\t\t\t\t\tfullTagEmptyElement: false,\n\t\t\t\t\t\t\t})\n\t\t\t\t\t\t);\n\t\t\t\t\t});\n\t\t\t\t}\n\t\t\t});\n\t\t\t// fetch studio extension view\n\t\t\tconst _viewSearch = {\n\t\t\t\t_domain: `self.xmlId = 'studio-${view.name}' and self.extension = true`,\n\t\t\t};\n\t\t\tconst res = await metaViewService.search({ data: _viewSearch });\n\t\t\tconst { data: resData = [] } = res;\n\t\t\tconst record = resData[0];\n\t\t\tif (record) {\n\t\t\t\tupdate((draft) => {\n\t\t\t\t\tdraft.extensionView = record;\n\t\t\t\t\tdraft.extensionXML = JSON.parse(\n\t\t\t\t\t\tconvert.xml2json(record.xml, {\n\t\t\t\t\t\t\tcompact: false,\n\t\t\t\t\t\t\tfullTagEmptyElement: false,\n\t\t\t\t\t\t})\n\t\t\t\t\t);\n\t\t\t\t});\n\t\t\t}\n\t\t\tupdate((draft) => {\n\t\t\t\tclearHistory(draft);\n\t\t\t\tdraft.attrsList = attrsList;\n\t\t\t\tdraft.translationList = translationList;\n\t\t\t\tdraft.initialTranslationList = translationList;\n\t\t\t\tdraft.removedTranslationList = [];\n\t\t\t\tif (schema) {\n\t\t\t\t\tdraft.widgets = schema.widgets;\n\t\t\t\t\tdraft.initialWidgets = schema.widgets;\n\t\t\t\t\tdraft.items = schema.items;\n\t\t\t\t\tdraft.initialItems = schema.items;\n\t\t\t\t\tdraft.metaFields = [...draft.metaFieldStore].filter(\n\t\t\t\t\t\t(field) =>\n\t\t\t\t\t\t\tschema.fieldList.findIndex((f) => f.name === field.name) === -1\n\t\t\t\t\t);\n\t\t\t\t}\n\t\t\t\tdraft.selectedView = view;\n\t\t\t\tif (views.view) {\n\t\t\t\t\tdraft.view = { fields: draft.metaFields, view: views.view };\n\t\t\t\t\tdraft.exView = views.view;\n\t\t\t\t}\n\t\t\t\tdraft.customFields = [];\n\t\t\t\tdraft.customFieldWidgets = null;\n\t\t\t\tdraft.customFieldItems = null;\n\t\t\t\tdraft.modelField = null;\n\t\t\t\tdraft.loader = false;\n\t\t\t\tdraft.extensionMoves = [];\n\t\t\t\tdraft.errorList = {};\n\t\t\t\tgenerateXpath(draft);\n\t\t\t});\n\t\t},\n\t\t[update, startLoader, metaFieldStore, clearHistory, model]\n\t);\n\n\tconst viewFilter = React.useCallback(() => {\n\t\tlet _domain = `self.type='form'`;\n\t\tlet _model = `${model ? model.fullName : \"\"}`;\n\t\t_domain = `${_domain} and self.model='${_model}' and (self.computed = true OR self.name NOT IN (select meta.name from MetaView meta where meta.computed = true))`;\n\t\treturn {\n\t\t\t_domain,\n\t\t\tfields: [\n\t\t\t\t\"name\",\n\t\t\t\t\"model\",\n\t\t\t\t\"title\",\n\t\t\t\t\"type\",\n\t\t\t\t\"extension\",\n\t\t\t\t\"xmlId\",\n\t\t\t\t\"computed\",\n\t\t\t\t\"xml\",\n\t\t\t],\n\t\t};\n\t}, [model]);\n\n\tconst modelFilter = React.useCallback(() => {\n\t\treturn {\n\t\t\tfields: [\"name\", \"fullName\", \"packageName\"],\n\t\t};\n\t}, []);\n\n\tconst metaFieldFilter = React.useCallback(() => {\n\t\tconst _domain = `self.json = true and self.metaModel.id='${\n\t\t\tmodel ? model.id : -1\n\t\t}'`;\n\t\treturn {\n\t\t\t_domain,\n\t\t\tfields: [\"name\"],\n\t\t};\n\t}, [model]);\n\n\tconst handleMetaFieldSelect = React.useCallback(\n\t\t(field) => {\n\t\t\tif (field) {\n\t\t\t\tfetchCustomFields(field, model).then((res) => {\n\t\t\t\t\tconst { data = [] } = res;\n\t\t\t\t\tconst schema = generateCustomModelSchema(\n\t\t\t\t\t\tdata,\n\t\t\t\t\t\tundefined,\n\t\t\t\t\t\t\"\",\n\t\t\t\t\t\t\"customForm\"\n\t\t\t\t\t);\n\t\t\t\t\tupdate((draft) => {\n\t\t\t\t\t\tconst newId = _.uniqueId();\n\t\t\t\t\t\tdraft.customFieldWidgets =\n\t\t\t\t\t\t\tObject.keys(schema.widgets)?.length > 2\n\t\t\t\t\t\t\t\t? schema.widgets\n\t\t\t\t\t\t\t\t: {\n\t\t\t\t\t\t\t\t\t\t...schema.widgets,\n\t\t\t\t\t\t\t\t\t\t[newId]: {\n\t\t\t\t\t\t\t\t\t\t\tname: `panel${newId}`,\n\t\t\t\t\t\t\t\t\t\t\t...PANEL_PROPS,\n\t\t\t\t\t\t\t\t\t\t\tmodel: draft.model.fullName,\n\t\t\t\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t\t  };\n\t\t\t\t\t\tdraft.customFieldItems =\n\t\t\t\t\t\t\tschema.items?.length > 0 ? schema.items : [`${newId}`];\n\t\t\t\t\t\tdraft.customFields = data;\n\t\t\t\t\t\tdraft.modelField = field;\n\t\t\t\t\t});\n\t\t\t\t});\n\t\t\t} else {\n\t\t\t\tupdate((draft) => {\n\t\t\t\t\tdraft.customFieldWidgets = null;\n\t\t\t\t\tdraft.customFieldItems = null;\n\t\t\t\t\tdraft.customFields = [];\n\t\t\t\t\tdraft.modelField = field;\n\t\t\t\t});\n\t\t\t}\n\t\t},\n\t\t[model, update]\n\t);\n\n\tconst handleTypeSelect = React.useCallback(\n\t\t(type) => {\n\t\t\tconst { value } = type;\n\t\t\tif ([MODEL_TYPE.CUSTOM, MODEL_TYPE.BASE].includes(value)) {\n\t\t\t\tgetEnableAppBuilder().then((res) => {\n\t\t\t\t\tupdate((draft) => {\n\t\t\t\t\t\tdraft.enableStudioApp = res;\n\t\t\t\t\t});\n\t\t\t\t});\n\t\t\t}\n\t\t\tconst updater = (draft) => {\n\t\t\t\tdraft.modelType = type ? type.value : null;\n\t\t\t\tdraft.entityType = null;\n\t\t\t\tdraft.initialWidgets = null;\n\t\t\t\tdraft.initialItems = null;\n\t\t\t\tdraft.modelField = null;\n\t\t\t\tdraft.customFields = [];\n\t\t\t\tdraft.customFieldWidgets = null;\n\t\t\t\tdraft.metaFieldStore = [];\n\t\t\t\tdraft.extensionMoves = [];\n\t\t\t\tdraft.removedTranslationList = [];\n\t\t\t};\n\t\t\tif (value === MODEL_TYPE.CUSTOM) {\n\t\t\t\treset(updater);\n\t\t\t\treturn;\n\t\t\t}\n\t\t\tupdate((draft) => {\n\t\t\t\tclearHistory(draft);\n\t\t\t\tupdater(draft);\n\t\t\t\tdraft.model = null;\n\t\t\t\tdraft.customModel = null;\n\t\t\t\tdraft.widgets = null;\n\t\t\t\tdraft.items = [];\n\t\t\t\tdraft.view = null;\n\t\t\t\tdraft.exView = null;\n\t\t\t\tdraft.metaFields = [];\n\t\t\t\tdraft.metaFields = [];\n\t\t\t\tdraft.selectedView = null;\n\t\t\t\tdraft.errorList = {};\n\t\t\t\tdraft.attrsList = [];\n\t\t\t\tdraft.translationList = [];\n\t\t\t\tdraft.initialTranslationList = [];\n\t\t\t});\n\t\t},\n\t\t[update, reset, clearHistory]\n\t);\n\n\tconst handleViewFilterData = React.useCallback((list) => {\n\t\tconst newList = list.filter((view) => {\n\t\t\tif (!view.computed) {\n\t\t\t\tconst index = list.findIndex((e) => e.name === view.name && e.computed);\n\t\t\t\tif (index !== -1) {\n\t\t\t\t\treturn false;\n\t\t\t\t}\n\t\t\t}\n\t\t\tif (view.extension === true) {\n\t\t\t\treturn false;\n\t\t\t}\n\t\t\treturn true;\n\t\t});\n\t\treturn newList;\n\t}, []);\n\n\tconst getOptionLabel = (option) => {\n\t\tif (option.extension === true) {\n\t\t\treturn `${option.name} (Extension)`;\n\t\t}\n\t\tif (option.computed === true) {\n\t\t\treturn `${option.name} (Computed)`;\n\t\t}\n\t\treturn option.name;\n\t};\n\treturn (\n\t\t<>\n\t\t\t<Select\n\t\t\t\toptions={modelTypes}\n\t\t\t\tvalue={modelTypes.find((e) => e.value === modelType)}\n\t\t\t\tfilterSelectedOptions={true}\n\t\t\t\tlabel=\"Type\"\n\t\t\t\tonChange={handleTypeSelect}\n\t\t\t\tdisableClearable\n\t\t\t/>\n\t\t\t<Select\n\t\t\t\tonChange={handleModelSelect}\n\t\t\t\tlabel=\"Model\"\n\t\t\t\tmodel={modelName}\n\t\t\t\tsearchFilter={modelFilter}\n\t\t\t\tvalue={model}\n\t\t\t\tonSearch={modelSearch}\n\t\t\t\tmodelType={modelType}\n\t\t\t/>\n\t\t\t{modelType === MODEL_TYPE.BASE && (\n\t\t\t\t<React.Fragment>\n\t\t\t\t\t<Select\n\t\t\t\t\t\tonChange={handleViewSelect}\n\t\t\t\t\t\tlabel=\"View\"\n\t\t\t\t\t\tmodel=\"com.axelor.meta.db.MetaView\"\n\t\t\t\t\t\tsearchFilter={viewFilter}\n\t\t\t\t\t\tgetOptionLabel={getOptionLabel}\n\t\t\t\t\t\tvalue={props.selectedView}\n\t\t\t\t\t\tfilterData={handleViewFilterData}\n\t\t\t\t\t/>\n\t\t\t\t\t<Select\n\t\t\t\t\t\tlabel=\"Custom fields\"\n\t\t\t\t\t\tmodel=\"com.axelor.meta.db.MetaField\"\n\t\t\t\t\t\tsearchFilter={metaFieldFilter}\n\t\t\t\t\t\tonChange={handleMetaFieldSelect}\n\t\t\t\t\t\tvalue={modelField}\n\t\t\t\t\t/>\n\t\t\t\t</React.Fragment>\n\t\t\t)}\n\t\t</>\n\t);\n}\n\nexport default React.memo(ViewSelection);\n","import React from \"react\";\nimport { IconButton } from \"@material-ui/core\";\nimport { makeStyles } from \"@material-ui/core/styles\";\nimport classnames from \"classnames\";\nimport ViewSelection from \"./ViewSelection\";\nimport { MODEL_TYPE } from \"./../constants\";\nimport { useKeyPress } from \"../custom-hooks/useKeyPress\";\n\nconst useStyles = makeStyles({\n\ttoolbarContainer: {\n\t\tdisplay: \"flex\",\n\t\tflexWrap: \"wrap\",\n\t\twidth: \"100%\",\n\t\theight: \"inherit\",\n\t\tbackgroundColor: \"rgb(41, 56, 70)\",\n\t\tpadding: \"0.5rem 0.75rem\",\n\t\t\".modern-dark &\": {\n\t\t\tbackgroundColor: \"#323232\",\n\t\t},\n\t},\n\ttoolItemView: {\n\t\tcolor: \"#fff\",\n\t\tpadding: \"5px 10px\",\n\t},\n\tcrudIcon: {\n\t\theight: \"1em\",\n\t\twidth: \"1em\",\n\t\tfontSize: 14,\n\t\tcursor: \"pointer\",\n\t},\n\tselectionContainer: {\n\t\tflex: 1,\n\t\tdisplay: \"flex\",\n\t\talignItems: \"center\",\n\t\tflexWrap: \"wrap\",\n\t},\n\ttoolbarActions: {\n\t\tdisplay: \"flex\",\n\t\talignItems: \"center\",\n\t},\n\tdisableBtn: {\n\t\tcolor: \"#555 !important\",\n\t},\n});\n\nfunction isStudioView(view) {\n\tif (view && view.xmlId && view.xmlId.indexOf(\"studio-\") === 0) {\n\t\treturn true;\n\t}\n\treturn false;\n}\n\nfunction ToolbarButton(props) {\n\tconst classes = useStyles();\n\treturn (\n\t\t<IconButton\n\t\t\tclassName={classes.toolItemView}\n\t\t\tclasses={{ disabled: classes.disableBtn }}\n\t\t\t{...props}\n\t\t/>\n\t);\n}\n\nfunction Toolbar({\n\tupdate,\n\tsaveView,\n\tmodelType,\n\tsaveCustomFieldView,\n\tremoveView,\n\tmodel,\n\tonNew,\n\treset,\n\terrorList,\n\tshowAlert,\n\tonSelect,\n\tisStudioLite,\n\t...props\n}) {\n\tconst classes = useStyles();\n\tconst isRemoveDisabled = !(\n\t\tprops.extensionView ||\n\t\tisStudioView(props.selectedView) ||\n\t\t(modelType === MODEL_TYPE.CUSTOM && Boolean(props.customModel))\n\t);\n\tconst isNewDisabled = modelType === MODEL_TYPE.BASE && !model;\n\tconst isSaveDisabled = Object.keys(errorList).length > 0;\n\tconst getValue = (obj) => Object.values(obj || {});\n\tconst save = React.useCallback(() => {\n\t\tif (isSaveDisabled) {\n\t\t\tshowAlert((getValue((getValue(errorList) || [])[0]) || [])[0]);\n\t\t\treturn;\n\t\t}\n\t\tsaveView();\n\t\tif (modelType === MODEL_TYPE.BASE) {\n\t\t\tsaveCustomFieldView();\n\t\t}\n\t\tonSelect({ id: -1 });\n\t}, [\n\t\tsaveView,\n\t\tsaveCustomFieldView,\n\t\tmodelType,\n\t\tisSaveDisabled,\n\t\tshowAlert,\n\t\terrorList,\n\t\tonSelect,\n\t]);\n\n\tuseKeyPress([\"s\"], save);\n\n\treturn (\n\t\t<div className={classes.toolbarContainer}>\n\t\t\t<div className={classes.toolbarActions}>\n\t\t\t\t{modelType !== MODEL_TYPE.BASE && (\n\t\t\t\t\t<ToolbarButton\n\t\t\t\t\t\tclassName={classes.toolItemView}\n\t\t\t\t\t\tonClick={onNew}\n\t\t\t\t\t\tdisabled={isNewDisabled}\n\t\t\t\t\t>\n\t\t\t\t\t\t<i className={classnames(\"fa fa-plus\", classes.crudIcon)} />\n\t\t\t\t\t</ToolbarButton>\n\t\t\t\t)}\n\t\t\t\t<ToolbarButton\n\t\t\t\t\tclassName={classes.toolItemView}\n\t\t\t\t\tonClick={save}\n\t\t\t\t\tdisabled={isSaveDisabled}\n\t\t\t\t>\n\t\t\t\t\t<i className={classnames(\"fa fa-floppy-o\", classes.crudIcon)} />\n\t\t\t\t</ToolbarButton>\n\t\t\t\t{modelType === MODEL_TYPE.CUSTOM && (\n\t\t\t\t\t<ToolbarButton\n\t\t\t\t\t\tclassName={classes.toolItemView}\n\t\t\t\t\t\tonClick={removeView}\n\t\t\t\t\t\tdisabled={isRemoveDisabled}\n\t\t\t\t\t>\n\t\t\t\t\t\t<i className={classnames(\"fa fa-trash-o\", classes.crudIcon)} />\n\t\t\t\t\t</ToolbarButton>\n\t\t\t\t)}\n\t\t\t</div>\n\t\t\t{!isStudioLite && (\n\t\t\t\t<div className={classes.selectionContainer}>\n\t\t\t\t\t<ViewSelection\n\t\t\t\t\t\tmodel={model}\n\t\t\t\t\t\tupdate={update}\n\t\t\t\t\t\tmodelType={modelType}\n\t\t\t\t\t\treset={reset}\n\t\t\t\t\t\t{...props}\n\t\t\t\t\t/>\n\t\t\t\t</div>\n\t\t\t)}\n\t\t\t<div className={classes.toolbarActions}>\n\t\t\t\t<ToolbarButton\n\t\t\t\t\tclassName={classes.toolItemView}\n\t\t\t\t\tonClick={() => props.refresh()}\n\t\t\t\t\tdisabled={!props.customModel && !model}\n\t\t\t\t>\n\t\t\t\t\t<i className={classnames(\"fa fa-refresh\", classes.crudIcon)} />\n\t\t\t\t</ToolbarButton>\n\t\t\t\t<ToolbarButton\n\t\t\t\t\tclassName={classes.toolItemView}\n\t\t\t\t\tonClick={() => props.undo()}\n\t\t\t\t\tdisabled={props.pastLength <= 0}\n\t\t\t\t>\n\t\t\t\t\t<i className={classnames(\"fa fa-reply\", classes.crudIcon)} />\n\t\t\t\t</ToolbarButton>\n\t\t\t\t<ToolbarButton\n\t\t\t\t\tonClick={() => props.redo()}\n\t\t\t\t\tdisabled={props.futureLength <= 0}\n\t\t\t\t>\n\t\t\t\t\t<i className={classnames(\"fa fa-share\", classes.crudIcon)} />\n\t\t\t\t</ToolbarButton>\n\t\t\t</div>\n\t\t</div>\n\t);\n}\n\nexport default React.memo(Toolbar);\n","import { useEffect, useRef, useLayoutEffect, useCallback } from \"react\";\n\nexport const useKeyPress = (keys, callback, node = null) => {\n\t// implement the callback ref pattern\n\tconst callbackRef = useRef(callback);\n\tuseLayoutEffect(() => {\n\t\tcallbackRef.current = callback;\n\t});\n\n\t// handle what happens on key press\n\tconst handleKeyPress = useCallback(\n\t\t(event) => {\n\t\t\t// check if one of the key is part of the ones we want\n\t\t\tif (keys.some((key) => event.key === key && event.ctrlKey)) {\n\t\t\t\tevent.preventDefault();\n\t\t\t\tcallbackRef.current(event);\n\t\t\t}\n\t\t},\n\t\t[keys]\n\t);\n\n\tuseEffect(() => {\n\t\t// target is either the provided node or the document\n\t\tconst targetNode = node ?? document;\n\t\t// attach the event listener\n\t\ttargetNode && targetNode.addEventListener(\"keydown\", handleKeyPress);\n\n\t\t// remove the event listener\n\t\treturn () =>\n\t\t\ttargetNode && targetNode.removeEventListener(\"keydown\", handleKeyPress);\n\t}, [handleKeyPress, node]);\n};\n","import React from \"react\";\nimport Button from \"@material-ui/core/Button\";\nimport Dialog from \"@material-ui/core/Dialog\";\nimport DialogActions from \"@material-ui/core/DialogActions\";\nimport DialogContent from \"@material-ui/core/DialogContent\";\nimport DialogContentText from \"@material-ui/core/DialogContentText\";\nimport DialogTitle from \"@material-ui/core/DialogTitle\";\nimport { makeStyles } from \"@material-ui/core/styles\";\n\nimport { translate } from \"../utils\";\n\nconst useStyles = makeStyles({\n\tpaper: {\n\t\tminWidth: 300,\n\t},\n\tbutton: {\n\t\ttextTransform: \"none\",\n\t\tbackgroundColor: \"#0275d8\",\n\t\tborderColor: \"#0275d8\",\n\t\tcolor: \"#fff\",\n\t\t\"&:hover\": {\n\t\t\tbackgroundColor: \"#0275d8\",\n\t\t\tborderColor: \"#0275d8\",\n\t\t\tcolor: \"#fff\",\n\t\t},\n\t},\n});\n\nexport default function DeleteConfirmation({\n\tonOk,\n\tonClose,\n\topen,\n\tmessage,\n\ttitle = \"Delete Confirmation\",\n}) {\n\tconst classes = useStyles();\n\treturn (\n\t\t<Dialog\n\t\t\topen={open}\n\t\t\tonClose={onClose}\n\t\t\taria-labelledby=\"alert-dialog-title\"\n\t\t\taria-describedby=\"alert-dialog-description\"\n\t\t\tclasses={{\n\t\t\t\tpaper: classes.paper,\n\t\t\t}}\n\t\t>\n\t\t\t<DialogTitle id=\"alert-dialog-title\">{translate(title)}</DialogTitle>\n\t\t\t<DialogContent>\n\t\t\t\t<DialogContentText id=\"alert-dialog-description\">\n\t\t\t\t\t{translate(message)}\n\t\t\t\t</DialogContentText>\n\t\t\t</DialogContent>\n\t\t\t<DialogActions>\n\t\t\t\t<Button onClick={onOk} color=\"primary\" className={classes.button}>\n\t\t\t\t\t{translate(\"Yes\")}\n\t\t\t\t</Button>\n\t\t\t\t<Button onClick={onClose} color=\"primary\" autoFocus className={classes.button}>\n\t\t\t\t\t{translate(\"No\")}\n\t\t\t\t</Button>\n\t\t\t</DialogActions>\n\t\t</Dialog>\n\t);\n}\n","import Utils from \"../utils\";\nimport { DEFAULT_VALUE, conditionProperties } from \"../constants\";\nimport { eGeneratePath } from \"./../store/xpathGenerator\";\n\nfunction hasIndex(path) {\n\treturn path.split(\"[\").length - 1 > 1;\n}\n\nfunction convertConditionName(name) {\n\tconst propertyName = conditionProperties[name];\n\treturn propertyName;\n}\n\nconst getWidgets = ({ widgets, items }) => {\n\tObject.keys(widgets).forEach((widgetId) => {\n\t\tconst path = eGeneratePath(widgets, items, widgetId);\n\t\twidgets[widgetId].xPath = path;\n\t});\n\treturn widgets;\n};\n\nfunction getName({ self, parent }) {\n\tlet name = \"\";\n\tconst pathText = self || parent;\n\tif (pathText) {\n\t\tconst finder = \"@name='\";\n\t\tconst index = pathText.indexOf(finder) + finder.length;\n\t\tconst endIndex = pathText.indexOf(\"']\");\n\t\tname = pathText.substring(index, endIndex);\n\t}\n\treturn name;\n}\n\nconst isSameAsOriginal = (item, originalWidgets) => {\n\tif (item) {\n\t\tconst { attributes } = item;\n\t\tconst itemExplore = Utils.exploreTarget(item.target);\n\t\tconst widget = Object.values(originalWidgets).find((widget) => {\n\t\t\tconst widgetExplore = Utils.exploreTarget(widget.xPath);\n\t\t\tif (widgetExplore.self || itemExplore.self) {\n\t\t\t\treturn widgetExplore.self === itemExplore.self;\n\t\t\t} else if (widgetExplore.parent || itemExplore.parent) {\n\t\t\t\treturn widgetExplore.parent === itemExplore.parent;\n\t\t\t}\n\t\t\treturn false;\n\t\t});\n\t\tconst attributeName = Utils.dashToCamelCase(attributes.name);\n\t\tif (widget) {\n\t\t\tlet widgetValue = widget[attributeName];\n\t\t\tlet maskedValue = widget[attributes.maskName];\n\t\t\tif (maskedValue === undefined) {\n\t\t\t\tmaskedValue = \"\";\n\t\t\t}\n\t\t\tif (widgetValue === undefined) {\n\t\t\t\twidgetValue = false;\n\t\t\t}\n\t\t\tif (attributes.maskName !== attributes.name) {\n\t\t\t\tif (`${maskedValue}` === `${attributes.value}`) {\n\t\t\t\t\treturn true;\n\t\t\t\t}\n\t\t\t} else if (`${widgetValue}` === `${attributes.value}`) {\n\t\t\t\treturn true;\n\t\t\t} else if (\n\t\t\t\t[\"\", undefined, null].includes(widget[attributeName]) &&\n\t\t\t\t[\"\", undefined, null].includes(attributes.value)\n\t\t\t) {\n\t\t\t\treturn true;\n\t\t\t} else if (\n\t\t\t\tattributes.maskName !== attributes.name &&\n\t\t\t\t[\"\", undefined, null].includes(widget[attributes.maskName]) &&\n\t\t\t\t[\"\", undefined, null].includes(attributes.value)\n\t\t\t) {\n\t\t\t\treturn true;\n\t\t\t}\n\t\t}\n\t}\n\treturn false;\n};\n\nexport function getUpdatedAttrsList(state, originalWidgets) {\n\tconst newAttrsList = [];\n\tconst removedAttrsList = [];\n\tconst { attrsList = [] } = state;\n\tconst moves = state.extensionMoves.filter((m) => m.name === \"attribute\");\n\tconst view = state.selectedView;\n\tconst model = state.model;\n\tconst movesMap = new Map();\n\tconst currentSchema = Utils.generateXMLToViewSchema({\n\t\tview: state.view.view,\n\t\tfields: state.metaFieldStore,\n\t\tattrsList: state.attrsList,\n\t});\n\tconst currentWidgets = getWidgets(currentSchema);\n\n\tmoves.forEach((move) => {\n\t\tconst convertedName = convertConditionName(move.attributes.name);\n\t\tconst name = convertedName || move.attributes.name;\n\t\tconst id = move.id;\n\t\tconst value = move.attributes.value;\n\t\tconst newMove = Object.assign(\n\t\t\t{},\n\t\t\t{\n\t\t\t\t...move,\n\t\t\t\tattributes: {\n\t\t\t\t\t...move.attributes,\n\t\t\t\t\tname,\n\t\t\t\t\tvalue,\n\t\t\t\t\tmaskName: move.attributes.name,\n\t\t\t\t},\n\t\t\t}\n\t\t);\n\t\tmovesMap.set(name + id, newMove);\n\t});\n\tmovesMap.forEach((value) => {\n\t\tconst move = value;\n\t\tconst moveExplore = Utils.exploreTarget(move.target);\n\t\tconst { attributes } = move;\n\t\tconst fieldName = getName(moveExplore);\n\t\tconst fieldIndex = attrsList.findIndex(\n\t\t\t(attr) =>\n\t\t\t\tfieldName.includes(attr.field) &&\n\t\t\t\t(attr.name === attributes.name ||\n\t\t\t\t\tconditionProperties[attr.name] === attributes.name)\n\t\t);\n\t\tconst field = attrsList[fieldIndex];\n\t\tconst isOriginal = isSameAsOriginal(move, originalWidgets);\n\t\tconst isCurrent = isSameAsOriginal(move, currentWidgets);\n\t\tconst selectValueRegEx = /(['\"])(?:(?!\\1|\\\\).|\\\\.)*\\1/;\n\t\tconst newAttrsIndex = newAttrsList.findIndex(\n\t\t\t(attr) =>\n\t\t\t\tmoveExplore.self &&\n\t\t\t\tmoveExplore.self.match(selectValueRegEx)?.[0].includes(attr.field) &&\n\t\t\t\tattr.name === attributes.name\n\t\t);\n\t\tlet defaultValue = DEFAULT_VALUE[attributes.name];\n\t\tif (isOriginal || isCurrent) {\n\t\t\tif (newAttrsIndex !== -1) {\n\t\t\t\tnewAttrsList.splice(newAttrsIndex, 1);\n\t\t\t} else if (field && field.id) {\n\t\t\t\tremovedAttrsList.push({ id: field.id, version: field.version });\n\t\t\t}\n\t\t} else {\n\t\t\tif (field) {\n\t\t\t\tif ([null, undefined].includes(attributes.value)) {\n\t\t\t\t\tif (defaultValue) {\n\t\t\t\t\t\tif (defaultValue === attributes.value) {\n\t\t\t\t\t\t\tremovedAttrsList.push({ id: field.id, version: field.version });\n\t\t\t\t\t\t}\n\t\t\t\t\t} else {\n\t\t\t\t\t\tremovedAttrsList.push({ id: field.id, version: field.version });\n\t\t\t\t\t}\n\t\t\t\t} else if (field.value !== attributes.value) {\n\t\t\t\t\tif (defaultValue) {\n\t\t\t\t\t\tif (defaultValue === attributes.value) {\n\t\t\t\t\t\t\tremovedAttrsList.push({ id: field.id, version: field.version });\n\t\t\t\t\t\t}\n\t\t\t\t\t} else {\n\t\t\t\t\t\tif (newAttrsIndex === -1) {\n\t\t\t\t\t\t\tnewAttrsList.push({\n\t\t\t\t\t\t\t\t...field,\n\t\t\t\t\t\t\t\tname: attributes.name,\n\t\t\t\t\t\t\t\tvalue: attributes.value,\n\t\t\t\t\t\t\t\tmaskName: attributes.maskName,\n\t\t\t\t\t\t\t});\n\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\tnewAttrsList[newAttrsIndex].value = attributes.value;\n\t\t\t\t\t\t\tnewAttrsList[newAttrsIndex].maskName = attributes.maskName;\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t} else {\n\t\t\t\tif (fieldName) {\n\t\t\t\t\tif (newAttrsIndex === -1) {\n\t\t\t\t\t\tnewAttrsList.push({\n\t\t\t\t\t\t\tview: view.name,\n\t\t\t\t\t\t\tmodel: model.fullName,\n\t\t\t\t\t\t\tname: attributes.name,\n\t\t\t\t\t\t\tmaskName: attributes.maskName,\n\t\t\t\t\t\t\tvalue: attributes.value,\n\t\t\t\t\t\t\tfield: fieldName,\n\t\t\t\t\t\t});\n\t\t\t\t\t} else {\n\t\t\t\t\t\tnewAttrsList[newAttrsIndex].value = attributes.value;\n\t\t\t\t\t\tnewAttrsList[newAttrsIndex].maskName = attributes.maskName;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t});\n\treturn { changedAttrsList: newAttrsList, removedAttrsList };\n}\n\nexport function optimizeExtension(state, originalWidgets) {\n\tconst processed = [];\n\tconst moves = state.extensionMoves.filter((m) => m.name !== \"attribute\");\n\tlet list = [...moves];\n\tconst filterListForAttribute = (move) => {\n\t\tif (\n\t\t\tprocessed.findIndex(\n\t\t\t\t(p) => p.target === move.target && p.name === move.attributes.name\n\t\t\t) === -1\n\t\t) {\n\t\t\tconst _list = list\n\t\t\t\t.map((_item, i) => {\n\t\t\t\t\tif (\n\t\t\t\t\t\t_item.target === move.target &&\n\t\t\t\t\t\t_item.attributes &&\n\t\t\t\t\t\tmove.attributes.name === _item.attributes.name\n\t\t\t\t\t) {\n\t\t\t\t\t\treturn i;\n\t\t\t\t\t}\n\t\t\t\t\treturn undefined;\n\t\t\t\t})\n\t\t\t\t.filter((e) => e !== undefined);\n\t\t\tconst lastItem = _list[_list.length - 1];\n\t\t\tprocessed.push({ target: move.target, name: move.attributes.name });\n\t\t\tlist = list.filter((item, k) => {\n\t\t\t\tif (item.target === move.target) {\n\t\t\t\t\tif (\n\t\t\t\t\t\tmove.attributes &&\n\t\t\t\t\t\titem.attributes &&\n\t\t\t\t\t\tmove.attributes.name === item.attributes.name\n\t\t\t\t\t) {\n\t\t\t\t\t\treturn lastItem === k ? true : false;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\treturn true;\n\t\t\t});\n\t\t}\n\t};\n\n\tconst filterListForRemove = (move) => {\n\t\tlet canRemoveReplace = false;\n\t\tconst explore = Utils.exploreTarget(move.target);\n\t\t// check for insert nodes\n\t\tconst insertIndex = list.findIndex((item) => {\n\t\t\tif (item.name === \"insert\") {\n\t\t\t\treturn item.elements && item.elements[0] && explore.self\n\t\t\t\t\t? explore.self.includes(`'${item.elements[0].name}'`)\n\t\t\t\t\t: explore.parent && explore.parent.includes(item.elements[0].name);\n\t\t\t}\n\t\t\treturn false;\n\t\t});\n\t\tconst depends = list.filter((item) => {\n\t\t\tif (item.target) {\n\t\t\t\tconst itemExplore = Utils.exploreTarget(item.target);\n\t\t\t\treturn (\n\t\t\t\t\t[\"insert\", \"move\"].includes(item.name) &&\n\t\t\t\t\titemExplore.self &&\n\t\t\t\t\titemExplore.self.includes(explore.self)\n\t\t\t\t);\n\t\t\t}\n\t\t\treturn false;\n\t\t});\n\t\tif (insertIndex !== -1 && !depends.length) {\n\t\t\tcanRemoveReplace = true;\n\t\t\tlist.splice(insertIndex, 1);\n\t\t\t// check for move\n\t\t\t[...list].forEach((item) => {\n\t\t\t\tif (\n\t\t\t\t\titem.name === \"move\" &&\n\t\t\t\t\titem.source &&\n\t\t\t\t\titem.source === move.target\n\t\t\t\t) {\n\t\t\t\t\tconst moveIndex = list.findIndex(\n\t\t\t\t\t\t(_item) =>\n\t\t\t\t\t\t\t_item.name === \"move\" &&\n\t\t\t\t\t\t\t_item.source &&\n\t\t\t\t\t\t\t_item.source === move.target\n\t\t\t\t\t);\n\t\t\t\t\tif (moveIndex !== -1) {\n\t\t\t\t\t\tlist.splice(moveIndex, 1);\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t});\n\t\t}\n\t\t// remove attribute changes\n\t\tlist = list.filter((item) => {\n\t\t\tif (item.name === \"attribute\" && item.target === move.target) {\n\t\t\t\treturn false;\n\t\t\t}\n\t\t\treturn true;\n\t\t});\n\t\tif (canRemoveReplace) {\n\t\t\tconst removeIndex = list.findIndex(\n\t\t\t\t(item) => item.name === \"replace\" && item.target === move.target\n\t\t\t);\n\t\t\tif (removeIndex !== -1) {\n\t\t\t\tlist.splice(removeIndex, 1);\n\t\t\t}\n\t\t}\n\t};\n\n\tmoves.forEach((move, i) => {\n\t\tif (move.target) {\n\t\t\tconst explore = Utils.exploreTarget(move.target);\n\t\t\tlet flag = true;\n\t\t\tif (explore.self && hasIndex(explore.self)) {\n\t\t\t\tflag = false;\n\t\t\t}\n\t\t\tif (explore.parent && hasIndex(explore.parent)) {\n\t\t\t\tflag = false;\n\t\t\t}\n\t\t\tif (move.name === \"attribute\" && flag) {\n\t\t\t\tfilterListForAttribute(move);\n\t\t\t}\n\t\t\tif (move.name === \"replace\" && flag) {\n\t\t\t\tif (\n\t\t\t\t\t!(\n\t\t\t\t\t\t(explore?.self && explore.self.includes(\"panel\")) ||\n\t\t\t\t\t\t(!explore?.self && explore?.parent.includes(\"panel\"))\n\t\t\t\t\t)\n\t\t\t\t) {\n\t\t\t\t\tfilterListForRemove(move);\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t});\n\treturn list;\n}\n","import React from \"react\";\nimport convert from \"xml-js\";\nimport {\n\tDialog,\n\tDialogTitle,\n\tDialogContent,\n\tDialogActions,\n\tButton,\n} from \"@material-ui/core\";\nimport _ from \"lodash\";\nimport { makeStyles } from \"@material-ui/core/styles\";\n\nimport Toolbar from \"./Toolbar\";\nimport { useStore } from \"../store/context\";\nimport { generateView } from \"../store/extensionGenerator\";\nimport AxelorService from \"./../services/axelor.rest\";\nimport Utils, {\n\tgenerateCustomModelSchema,\n\ttranslate,\n\tisPanelTab,\n} from \"../utils\";\nimport {\n\tMODEL_TYPE,\n\tconditionProperties,\n\totherNoQuoteProps,\n\tItemTypes,\n\tPANEL_PROPS,\n\tTYPE,\n} from \"../constants\";\nimport {\n\tsaveCustomModel,\n\tfetchJSONFields,\n\tremoveCustomModel,\n\tgenerateMenuChange,\n\tfetchCustomModel,\n\tfetchCustomFields,\n\tfetchViews,\n\tsaveAttrsList,\n\tfetchAttrsList,\n\tsaveTranslationList,\n\tgetTranslationList,\n\tdeleteAttrsList,\n\tdeleteTranslationList,\n} from \"./api\";\nimport DeleteConfirmation from \"./DeleteConfirmation\";\nimport { getXML } from \"./../store/computeXML\";\nimport { generateXpath, eGeneratePath } from \"./../store/xpathGenerator\";\nimport {\n\toptimizeExtension,\n\tgetUpdatedAttrsList,\n} from \"../store/optimizeExtension\";\n\nconst metaViewService = new AxelorService({\n\tmodel: \"com.axelor.meta.db.MetaView\",\n});\nconst customFieldService = new AxelorService({\n\tmodel: \"com.axelor.meta.db.MetaJsonField\",\n});\n\nconst useStyles = makeStyles(() => ({\n\tpaper: {\n\t\tminWidth: 300,\n\t},\n\tbutton: {\n\t\ttextTransform: \"none\",\n\t\tbackgroundColor: \"#0275d8\",\n\t\tborderColor: \"#0275d8\",\n\t\tcolor: \"#fff\",\n\t\t\"&:hover\": {\n\t\t\tbackgroundColor: \"#0275d8\",\n\t\t\tborderColor: \"#0275d8\",\n\t\t\tcolor: \"#fff\",\n\t\t},\n\t},\n}));\n\nconst getWidgets = ({ widgets, items }) => {\n\tObject.keys(widgets).forEach((widgetId) => {\n\t\tconst path = eGeneratePath(widgets, items, widgetId);\n\t\twidgets[widgetId].xPath = path;\n\t});\n\treturn widgets;\n};\n\nconst getChangedTranslationList = (\n\tlist,\n\tinitialList,\n\tremovedTranslationList\n) => {\n\tconst deletedTranslationList = [];\n\tconst changedTranslationList = list.filter((item) => {\n\t\tif (removedTranslationList.indexOf(item.key) !== -1) {\n\t\t\titem.id &&\n\t\t\t\tdeletedTranslationList.push({ id: item.id, version: item.version });\n\t\t\treturn false;\n\t\t}\n\t\tif (item.id) {\n\t\t\tconst initialItem = initialList.find(\n\t\t\t\t(i) => i.language === item.language && i.key === item.key\n\t\t\t);\n\t\t\tif (initialItem && initialItem.message !== item.message) {\n\t\t\t\treturn true;\n\t\t\t}\n\t\t\treturn false;\n\t\t}\n\t\treturn true;\n\t});\n\treturn { changedTranslationList, deletedTranslationList };\n};\n\nfunction ToolbarContainer(props) {\n\tconst { state, update, startLoader, undo, redo, clearHistory, onSelect } =\n\t\tuseStore();\n\tconst [deleteConfirmationDialog, setDeleteConfirmationDialog] =\n\t\tReact.useState(false);\n\tconst { customFieldWidgets, widgets, modelType, isStudioLite, queryModel } =\n\t\tstate;\n\tconst classes = useStyles();\n\n\tconst closeLoader = React.useCallback(() => {\n\t\tupdate((draft) => {\n\t\t\tdraft.loader = false;\n\t\t});\n\t}, [update]);\n\n\tconst showAlert = React.useCallback(\n\t\t(message, title) => {\n\t\t\tconst dialog = {\n\t\t\t\tmessage: translate(message) || translate(\"Some error occured\"),\n\t\t\t\t...(title ? { title: translate(title) } : {}),\n\t\t\t\ttype: \"alert\",\n\t\t\t};\n\t\t\tupdate((draft) => {\n\t\t\t\tdraft.loader = false;\n\t\t\t\tdraft.dialog = dialog;\n\t\t\t});\n\t\t},\n\t\t[update]\n\t);\n\n\tconst reset = React.useCallback(\n\t\t(updater, draft) => {\n\t\t\tconst callbackfn = (draft) => {\n\t\t\t\tupdater && updater(draft);\n\t\t\t\tdraft.errorList = {};\n\t\t\t\tdraft.customModel = null;\n\t\t\t\tdraft.exView = null;\n\t\t\t\tdraft.view = null;\n\t\t\t\tdraft.extensionXML = null;\n\t\t\t\tdraft.extensionView = null;\n\t\t\t\tdraft.loader = false;\n\t\t\t\tdraft.metaFields = draft.metaFieldStore || [];\n\t\t\t\tdraft.selectedView = null;\n\t\t\t\tdraft.translationList = [];\n\t\t\t\tdraft.initialTranslationList = [];\n\t\t\t\tdraft.attrsList = [];\n\t\t\t\tdraft.model = null;\n\t\t\t\tconst newId = _.uniqueId();\n\t\t\t\tdraft.widgets = {\n\t\t\t\t\t\"-1\": {\n\t\t\t\t\t\ttype: \"form\",\n\t\t\t\t\t\tcols: 12,\n\t\t\t\t\t\textension: false,\n\t\t\t\t\t\tname: isStudioLite ? queryModel?.name : null,\n\t\t\t\t\t\ttitle: isStudioLite ? queryModel?.title : null,\n\t\t\t\t\t\t...Utils.getDefaultProperties(draft.modelType),\n\t\t\t\t\t},\n\t\t\t\t\t0: { type: \"dump_field\", name: \"\" },\n\t\t\t\t\t[newId]: {\n\t\t\t\t\t\tname: `panel${newId}`,\n\t\t\t\t\t\t...PANEL_PROPS,\n\t\t\t\t\t},\n\t\t\t\t};\n\t\t\t\tdraft.items = [`${newId}`];\n\t\t\t\tdraft.editWidget = -1;\n\t\t\t\tdraft.editWidgetType = null;\n\t\t\t\tdraft.tabIndex = 0;\n\t\t\t};\n\t\t\tif (draft) {\n\t\t\t\tcallbackfn(draft);\n\t\t\t} else {\n\t\t\t\tupdate(callbackfn);\n\t\t\t}\n\t\t},\n\t\t[update, isStudioLite, queryModel]\n\t);\n\n\tconst removeView = React.useCallback(\n\t\tfunction removeView() {\n\t\t\tstartLoader();\n\t\t\tconst clearView = (dialog) => {\n\t\t\t\tupdate((draft) => {\n\t\t\t\t\tclearHistory(draft);\n\t\t\t\t\tdraft.customModel = null;\n\t\t\t\t\tdraft.dialog = dialog;\n\t\t\t\t\tdraft.widgets = null;\n\t\t\t\t\tdraft.initialItems = null;\n\t\t\t\t\tdraft.initialWidgets = null;\n\t\t\t\t\tdraft.items = [];\n\t\t\t\t\tdraft.view = null;\n\t\t\t\t\tdraft.metaFields = [];\n\t\t\t\t\tdraft.selectedView = null;\n\t\t\t\t\tdraft.originalXML = null;\n\t\t\t\t\tdraft.extensionXML = null;\n\t\t\t\t\tdraft.selectedView = null;\n\t\t\t\t\tdraft.loader = false;\n\t\t\t\t\tdraft.extensionView = null;\n\t\t\t\t\tdraft.errorList = {};\n\t\t\t\t\tif (draft.modelType === MODEL_TYPE.CUSTOM) {\n\t\t\t\t\t\treset(null, draft);\n\t\t\t\t\t}\n\t\t\t\t});\n\t\t\t};\n\t\t\tif (state.modelType === MODEL_TYPE.CUSTOM) {\n\t\t\t\tif (state.model || state.customModel) {\n\t\t\t\t\tremoveCustomModel(state.model || state.customModel).then((res) => {\n\t\t\t\t\t\tconst { data, status } = res || {};\n\t\t\t\t\t\tif (status === -1) {\n\t\t\t\t\t\t\tconst { message = \"\" } = data || {};\n\t\t\t\t\t\t\tshowAlert(message);\n\t\t\t\t\t\t\treturn;\n\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\tclearView(null);\n\t\t\t\t\t\t}\n\t\t\t\t\t});\n\t\t\t\t}\n\t\t\t} else {\n\t\t\t\tlet record;\n\t\t\t\tif (state.extensionView) {\n\t\t\t\t\trecord = {\n\t\t\t\t\t\tid: state.extensionView.id,\n\t\t\t\t\t\tversion: state.extensionView.version,\n\t\t\t\t\t};\n\t\t\t\t} else if (\n\t\t\t\t\tstate.selectedView &&\n\t\t\t\t\tstate.selectedView.xmlId &&\n\t\t\t\t\tstate.selectedView.xmlId.indexOf(\"studio-\") === 0\n\t\t\t\t) {\n\t\t\t\t\trecord = {\n\t\t\t\t\t\tid: state.selectedView.id,\n\t\t\t\t\t\tversion: state.selectedView.version,\n\t\t\t\t\t};\n\t\t\t\t}\n\t\t\t\tif (record) {\n\t\t\t\t\tmetaViewService.removeAll([record]).then((e) => {\n\t\t\t\t\t\tclearView(null);\n\t\t\t\t\t});\n\t\t\t\t}\n\t\t\t}\n\t\t},\n\t\t[update, state, startLoader, clearHistory, reset, showAlert]\n\t);\n\n\tconst refresh = React.useCallback(async () => {\n\t\tif (state.modelType === MODEL_TYPE.CUSTOM) {\n\t\t\tconst { customModel } = state;\n\t\t\tif (!customModel) return;\n\t\t\tconst record =\n\t\t\t\t(await fetchCustomModel(customModel.id, (error) => {\n\t\t\t\t\tshowAlert(error?.message, error?.title);\n\t\t\t\t})) || {};\n\t\t\tconst { fields = [], ...rest } = record;\n\t\t\tif (rest.studioMenu) {\n\t\t\t\trest.studioMenu = {\n\t\t\t\t\t...customModel.studioMenu,\n\t\t\t\t\t...rest.studioMenu,\n\t\t\t\t};\n\t\t\t}\n\t\t\tfetchJSONFields(\n\t\t\t\tfields.map((f) => f.id),\n\t\t\t\tupdate,\n\t\t\t\trest\n\t\t\t);\n\t\t\tupdate((draft) => {\n\t\t\t\tdraft.customModel = {\n\t\t\t\t\t...(record || {}),\n\t\t\t\t\tstudioMenu: rest?.studioMenu,\n\t\t\t\t};\n\t\t\t\tdraft.model = record;\n\t\t\t\tdraft.loader = false;\n\t\t\t\tdraft.removedCustomFields = [];\n\t\t\t\tdraft.errorList = {};\n\t\t\t});\n\t\t} else {\n\t\t\tif (state.widgets) {\n\t\t\t\tconst { view } = state;\n\t\t\t\tconst res = await metaViewService.fetch(view?.view?.id);\n\t\t\t\tif (res && res.status === -1) {\n\t\t\t\t\tconst { message, title } = res.data || {};\n\t\t\t\t\tshowAlert(message, title);\n\t\t\t\t\treturn;\n\t\t\t\t}\n\t\t\t\tconst record = res && res.data && res.data[0];\n\t\t\t\tconst attrsList = await fetchAttrsList({\n\t\t\t\t\tmodel: state.model.fullName,\n\t\t\t\t\tview: state.selectedView.name,\n\t\t\t\t});\n\t\t\t\tupdate((draft) => {\n\t\t\t\t\tdraft.loader = false;\n\t\t\t\t\tconst views = draft.view;\n\t\t\t\t\tconst schema = Utils.generateXMLToViewSchema({\n\t\t\t\t\t\tview: record,\n\t\t\t\t\t\tfields: draft.metaFieldStore,\n\t\t\t\t\t\textensionXML: views.extensionXML,\n\t\t\t\t\t\tattrsList: attrsList || [],\n\t\t\t\t\t});\n\t\t\t\t\tdraft.widgets = schema.widgets;\n\t\t\t\t\tdraft.initialWidgets = schema.widgets;\n\t\t\t\t\tdraft.items = schema.items;\n\t\t\t\t\tdraft.initialItems = schema.items;\n\t\t\t\t\tdraft.extensionMoves = [];\n\t\t\t\t\tdraft.attrsList = attrsList || [];\n\t\t\t\t\tdraft.errorList = {};\n\t\t\t\t\tgenerateXpath(draft);\n\t\t\t\t});\n\t\t\t}\n\t\t\tif (\n\t\t\t\t(state.customFieldItems || state.removedCustomFields.length) &&\n\t\t\t\tstate.modelField?.name\n\t\t\t) {\n\t\t\t\tstartLoader();\n\t\t\t\tfetchCustomFields(state.modelField, state.model).then((res) => {\n\t\t\t\t\tif (res && res.status === -1) {\n\t\t\t\t\t\tconst { message, title } = res.data || {};\n\t\t\t\t\t\tshowAlert(message, title);\n\t\t\t\t\t\treturn;\n\t\t\t\t\t}\n\t\t\t\t\tconst { data = [] } = res;\n\t\t\t\t\tconst schema = generateCustomModelSchema(\n\t\t\t\t\t\tdata,\n\t\t\t\t\t\tundefined,\n\t\t\t\t\t\t\"\",\n\t\t\t\t\t\t\"customForm\"\n\t\t\t\t\t);\n\t\t\t\t\tupdate((draft) => {\n\t\t\t\t\t\tdraft.customFieldWidgets = schema.widgets;\n\t\t\t\t\t\tdraft.customFieldItems = schema.items;\n\t\t\t\t\t\tdraft.customFields = data;\n\t\t\t\t\t\tdraft.loader = false;\n\t\t\t\t\t\tdraft.removedCustomFields = [];\n\t\t\t\t\t\tdraft.errorList = {};\n\t\t\t\t\t});\n\t\t\t\t});\n\t\t\t} else {\n\t\t\t\tcloseLoader();\n\t\t\t}\n\t\t}\n\t}, [update, state, closeLoader, startLoader, showAlert]);\n\n\tconst isTabsPanelEmpty = React.useCallback(() => {\n\t\tconst propertyValues =\n\t\t\tObject.values(\n\t\t\t\t(modelType === MODEL_TYPE.BASE ? customFieldWidgets : widgets) || {}\n\t\t\t) || [];\n\t\tconst panelTab = propertyValues.find((v) => v.type === TYPE.tabs);\n\t\tif (panelTab && !panelTab?.items?.length) {\n\t\t\tshowAlert(\"Tabs should have atleast one panel\");\n\t\t\treturn false;\n\t\t} else {\n\t\t\treturn true;\n\t\t}\n\t}, [customFieldWidgets, widgets, modelType, showAlert]);\n\n\tconst saveView = React.useCallback(async () => {\n\t\tif (!state.widgets) {\n\t\t\treturn;\n\t\t}\n\t\tif (!isTabsPanelEmpty()) return;\n\t\tstartLoader();\n\t\tif (window.parent) {\n\t\t\twindow.parent.studioOutput = JSON.stringify({\n\t\t\t\tisSave: true,\n\t\t\t\tform: state.widgets[-1]?.title,\n\t\t\t});\n\t\t}\n\t\tif (state.modelType === MODEL_TYPE.CUSTOM) {\n\t\t\tconst { fields } = Utils.getCustomModelFields(\n\t\t\t\tstate.items,\n\t\t\t\tstate.widgets,\n\t\t\t\tnull,\n\t\t\t\ttrue\n\t\t\t);\n\t\t\tconst propertyValues = Object.values(state.widgets || {}) || [];\n\t\t\tconst uniqueValues = new Set(propertyValues.map((v) => v.name)) || [];\n\t\t\tif (uniqueValues.size < propertyValues.length) {\n\t\t\t\tshowAlert(\"Field name should be unique\");\n\t\t\t\treturn;\n\t\t\t}\n\t\t\tconst formProperties = state.widgets[-1];\n\t\t\tif (!formProperties.name || !formProperties.title) {\n\t\t\t\tshowAlert(\"Please enter form name and title\");\n\t\t\t\treturn;\n\t\t\t}\n\t\t\tif (state.removedCustomFields.length) {\n\t\t\t\tconst res = await customFieldService.removeAll(\n\t\t\t\t\tstate.removedCustomFields\n\t\t\t\t);\n\t\t\t\tif (res && res.status === -1) {\n\t\t\t\t\tconst { message, title } = res.data || {};\n\t\t\t\t\tshowAlert(message, title);\n\t\t\t\t\treturn;\n\t\t\t\t}\n\t\t\t}\n\t\t\tlet customModel = {\n\t\t\t\t...state.customModel,\n\t\t\t\t...Utils.getFormProperties(formProperties),\n\t\t\t\tfields,\n\t\t\t\t...(state.customModel && { version: state.customModel.version }),\n\t\t\t};\n\t\t\tif (formProperties.isGenerateMenu === true) {\n\t\t\t\tcustomModel[\"studioMenu\"] = {\n\t\t\t\t\t...(state.customModel || {}).studioMenu,\n\t\t\t\t\ttitle: formProperties.menuBuilderTitle,\n\t\t\t\t\tparentMenu: formProperties.menuBuilderParent,\n\t\t\t\t\tversion: ((state.customModel || {}).studioMenu || {}).$version,\n\t\t\t\t};\n\t\t\t}\n\t\t\tconst { isGenerateMenu } = state.customModel || {};\n\t\t\tif (formProperties.isGenerateMenu !== isGenerateMenu) {\n\t\t\t\tconst res = await generateMenuChange(customModel);\n\t\t\t\tconst { data = [] } = res;\n\t\t\t\tif (data[0] && data[0].reload) {\n\t\t\t\t\tconst modelResult = await fetchCustomModel(\n\t\t\t\t\t\tcustomModel.id,\n\t\t\t\t\t\t(error) => {\n\t\t\t\t\t\t\tshowAlert(error?.message, error?.title);\n\t\t\t\t\t\t}\n\t\t\t\t\t);\n\t\t\t\t\tif (!modelResult) return;\n\t\t\t\t\tcustomModel = {\n\t\t\t\t\t\t...customModel,\n\t\t\t\t\t\tstudioMenu: null,\n\t\t\t\t\t\tversion: modelResult.version,\n\t\t\t\t\t};\n\t\t\t\t}\n\t\t\t}\n\t\t\tsaveCustomModel(customModel).then((res) => {\n\t\t\t\tconst { data, status } = res || {};\n\t\t\t\tif (status === -1) {\n\t\t\t\t\tconst { message = \"\", title } = data || {};\n\t\t\t\t\tlet errorMessage = message;\n\t\t\t\t\tif (\n\t\t\t\t\t\ttitle &&\n\t\t\t\t\t\ttitle.includes(translate(\"Unique constraint violation\"))\n\t\t\t\t\t) {\n\t\t\t\t\t\terrorMessage = translate(\"Model name should be unique\");\n\t\t\t\t\t\tif (message.includes(\"com.axelor.meta.db.MetaJsonRecord\")) {\n\t\t\t\t\t\t\terrorMessage = translate(\"Field name should be unique\");\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t\tshowAlert(errorMessage);\n\t\t\t\t\treturn;\n\t\t\t\t}\n\t\t\t\tconst record = data && data[0];\n\t\t\t\tconst { fields = [], ...rest } = record;\n\t\t\t\tif (rest.studioMenu) {\n\t\t\t\t\trest.studioMenu = {\n\t\t\t\t\t\t...customModel.studioMenu,\n\t\t\t\t\t\t...rest.studioMenu,\n\t\t\t\t\t};\n\t\t\t\t}\n\t\t\t\tfetchJSONFields(\n\t\t\t\t\tfields.map((f) => f.id),\n\t\t\t\t\tupdate,\n\t\t\t\t\trest\n\t\t\t\t);\n\t\t\t\tupdate((draft) => {\n\t\t\t\t\tdraft.customModel = record;\n\t\t\t\t\tdraft.model = record;\n\t\t\t\t\tdraft.loader = false;\n\t\t\t\t\tdraft.removedCustomFields = [];\n\t\t\t\t\tclearHistory(draft);\n\t\t\t\t});\n\t\t\t});\n\t\t} else {\n\t\t\tif (state.widgets) {\n\t\t\t\tconst exemptAttributes = [\n\t\t\t\t\t\"viewId\",\n\t\t\t\t\t\"modelId\",\n\t\t\t\t\t\"version\",\n\t\t\t\t\t\"helpOverride\",\n\t\t\t\t\t\"menubar\",\n\t\t\t\t\t\"xml\",\n\t\t\t\t\t\"computed\",\n\t\t\t\t\t\"xmlId\",\n\t\t\t\t\t\"type\",\n\t\t\t\t\t\"cols\",\n\t\t\t\t\t\"colSpan\",\n\t\t\t\t\t\"serverType\",\n\t\t\t\t];\n\t\t\t\tif (!state.exView || Utils.isCreatedFromStudio(state.exView)) {\n\t\t\t\t\tconst formProperties = state.widgets[-1];\n\t\t\t\t\tif (!formProperties.name || !formProperties.title) {\n\t\t\t\t\t\tshowAlert(\"Please enter form name and title\");\n\t\t\t\t\t\treturn;\n\t\t\t\t\t}\n\t\t\t\t\tconst viewSearch = await metaViewService.search({\n\t\t\t\t\t\tdata: { _domain: `self.name = '${formProperties.name}'` },\n\t\t\t\t\t});\n\t\t\t\t\tif (\n\t\t\t\t\t\tviewSearch &&\n\t\t\t\t\t\tviewSearch.total &&\n\t\t\t\t\t\tviewSearch.total > 0 &&\n\t\t\t\t\t\t!state.exView?.id\n\t\t\t\t\t) {\n\t\t\t\t\t\tshowAlert(\"View name already exists\");\n\t\t\t\t\t\treturn;\n\t\t\t\t\t}\n\t\t\t\t\tconst patch = generateView(\n\t\t\t\t\t\tstate.widgets,\n\t\t\t\t\t\tstate.items,\n\t\t\t\t\t\tstate.modelType\n\t\t\t\t\t);\n\t\t\t\t\tconst model = state.model.fullName;\n\t\t\t\t\tconst form = {\n\t\t\t\t\t\telements: [\n\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\tname: \"form\",\n\t\t\t\t\t\t\t\ttype: \"element\",\n\t\t\t\t\t\t\t\tattributes: {\n\t\t\t\t\t\t\t\t\tmodel,\n\t\t\t\t\t\t\t\t\t...Utils.getFormProperties(formProperties, [\n\t\t\t\t\t\t\t\t\t\t...exemptAttributes,\n\t\t\t\t\t\t\t\t\t\t\"extension\",\n\t\t\t\t\t\t\t\t\t\t\"id\",\n\t\t\t\t\t\t\t\t\t]),\n\t\t\t\t\t\t\t\t\tid:\n\t\t\t\t\t\t\t\t\t\tstate.exView && state.exView.xmlId\n\t\t\t\t\t\t\t\t\t\t\t? state.exView.xmlId\n\t\t\t\t\t\t\t\t\t\t\t: `studio-${formProperties.name}`,\n\t\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t\telements: [...patch],\n\t\t\t\t\t\t\t},\n\t\t\t\t\t\t],\n\t\t\t\t\t};\n\t\t\t\t\tconst xml = Utils.processXML(\n\t\t\t\t\t\tconvert.json2xml(form, {\n\t\t\t\t\t\t\tcompact: false,\n\t\t\t\t\t\t\tfullTagEmptyElement: false,\n\t\t\t\t\t\t})\n\t\t\t\t\t);\n\t\t\t\t\tlet data = {\n\t\t\t\t\t\txml,\n\t\t\t\t\t\textension: formProperties.extension,\n\t\t\t\t\t\ttype: \"form\",\n\t\t\t\t\t\tname: formProperties.name,\n\t\t\t\t\t\ttitle: formProperties.title,\n\t\t\t\t\t\tmodel,\n\t\t\t\t\t\txmlId: `studio-${formProperties.name}`,\n\t\t\t\t\t};\n\t\t\t\t\tif (state.exView && state.exView.id) {\n\t\t\t\t\t\tdata[\"id\"] = state.exView.id;\n\t\t\t\t\t\tdata[\"version\"] = state.exView.version;\n\t\t\t\t\t\tdata[\"xmlId\"] = state.exView.xmlId || data.xmlId;\n\t\t\t\t\t}\n\t\t\t\t\tmetaViewService.save(data).then(async (res) => {\n\t\t\t\t\t\tif (res.status === -1) {\n\t\t\t\t\t\t\tconst error = res.data;\n\t\t\t\t\t\t\tshowAlert(error?.string || error?.message, error?.title);\n\t\t\t\t\t\t} else if (res.data && res.data[0]) {\n\t\t\t\t\t\t\tconst fetchResult = await metaViewService.fetch(res.data[0].id);\n\t\t\t\t\t\t\tif (fetchResult.data && fetchResult.data[0]) {\n\t\t\t\t\t\t\t\tconst record = fetchResult.data[0];\n\t\t\t\t\t\t\t\tupdate((draft) => {\n\t\t\t\t\t\t\t\t\tconst schema = Utils.generateXMLToViewSchema({\n\t\t\t\t\t\t\t\t\t\tview: record,\n\t\t\t\t\t\t\t\t\t\tfields: draft.metaFieldStore,\n\t\t\t\t\t\t\t\t\t});\n\t\t\t\t\t\t\t\t\tdraft.widgets = schema.widgets;\n\t\t\t\t\t\t\t\t\tdraft.initialWidgets = schema.widgets;\n\t\t\t\t\t\t\t\t\tdraft.items = schema.items;\n\t\t\t\t\t\t\t\t\tdraft.initialItems = schema.items;\n\t\t\t\t\t\t\t\t\tdraft.metaView = record;\n\t\t\t\t\t\t\t\t\tdraft.exView = record;\n\t\t\t\t\t\t\t\t\tdraft.selectedView = { ...record };\n\t\t\t\t\t\t\t\t\tdraft.loader = false;\n\t\t\t\t\t\t\t\t\tclearHistory(draft);\n\t\t\t\t\t\t\t\t});\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t});\n\t\t\t\t} else {\n\t\t\t\t\tconst { view } = state.view;\n\t\t\t\t\tconst model = state.model.fullName;\n\t\t\t\t\tconst originalSchema = Utils.generateViewFromJson({\n\t\t\t\t\t\tview: state.originalXML,\n\t\t\t\t\t\tfields: state.metaFieldStore,\n\t\t\t\t\t});\n\t\t\t\t\tconst widgets = getWidgets(originalSchema);\n\t\t\t\t\tconst moves = optimizeExtension(state, widgets);\n\t\t\t\t\tconst { changedAttrsList, removedAttrsList } = getUpdatedAttrsList(\n\t\t\t\t\t\tstate,\n\t\t\t\t\t\twidgets\n\t\t\t\t\t);\n\t\t\t\t\tconst extension = getXML(moves, state);\n\t\t\t\t\tlet isAttrsChanged = false;\n\t\t\t\t\tlet attrsList = [];\n\t\t\t\t\tif (changedAttrsList.length) {\n\t\t\t\t\t\tisAttrsChanged = true;\n\t\t\t\t\t\tconst conditionalValues = Object.values(conditionProperties);\n\t\t\t\t\t\tconst list = changedAttrsList.map((attr) => {\n\t\t\t\t\t\t\tif (\n\t\t\t\t\t\t\t\t[...conditionalValues, ...otherNoQuoteProps].includes(attr.name)\n\t\t\t\t\t\t\t) {\n\t\t\t\t\t\t\t\treturn attr;\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\treturn { ...attr, value: `\"${attr.value}\"` };\n\t\t\t\t\t\t});\n\t\t\t\t\t\tawait saveAttrsList(list, (error) => {\n\t\t\t\t\t\t\tshowAlert(error?.message, error?.title);\n\t\t\t\t\t\t});\n\t\t\t\t\t}\n\t\t\t\t\tif (removedAttrsList.length) {\n\t\t\t\t\t\tisAttrsChanged = true;\n\t\t\t\t\t\tawait deleteAttrsList(removedAttrsList, (error) => {\n\t\t\t\t\t\t\tshowAlert(error?.message, error?.title);\n\t\t\t\t\t\t});\n\t\t\t\t\t}\n\t\t\t\t\tif (isAttrsChanged) {\n\t\t\t\t\t\tattrsList = await fetchAttrsList({\n\t\t\t\t\t\t\tmodel: state.model.fullName,\n\t\t\t\t\t\t\tview: state.selectedView.name,\n\t\t\t\t\t\t});\n\t\t\t\t\t}\n\t\t\t\t\tconst { changedTranslationList, deletedTranslationList } =\n\t\t\t\t\t\tgetChangedTranslationList(\n\t\t\t\t\t\t\tstate.translationList,\n\t\t\t\t\t\t\tstate.initialTranslationList,\n\t\t\t\t\t\t\tstate.removedTranslationList\n\t\t\t\t\t\t);\n\t\t\t\t\tlet translationList = [];\n\t\t\t\t\tlet isTranslationChanged = false;\n\t\t\t\t\tif (changedTranslationList.length) {\n\t\t\t\t\t\tisTranslationChanged = true;\n\t\t\t\t\t\tawait saveTranslationList(changedTranslationList, (error) => {\n\t\t\t\t\t\t\tshowAlert(error?.message, error?.title);\n\t\t\t\t\t\t});\n\t\t\t\t\t}\n\t\t\t\t\tif (deletedTranslationList.length) {\n\t\t\t\t\t\tisTranslationChanged = true;\n\t\t\t\t\t\tawait deleteTranslationList(deletedTranslationList, (error) => {\n\t\t\t\t\t\t\tshowAlert(error?.message, error?.title);\n\t\t\t\t\t\t});\n\t\t\t\t\t}\n\t\t\t\t\tif (isTranslationChanged) {\n\t\t\t\t\t\tconst translationNames = Object.values(state.widgets)\n\t\t\t\t\t\t\t.filter(\n\t\t\t\t\t\t\t\t(widget) => widget.title && widget.title.startsWith(\"studio:\")\n\t\t\t\t\t\t\t)\n\t\t\t\t\t\t\t.map((widget) => widget.title);\n\t\t\t\t\t\ttranslationList = await getTranslationList(translationNames);\n\t\t\t\t\t\tupdate((draft) => {\n\t\t\t\t\t\t\tdraft.translationList = translationList;\n\t\t\t\t\t\t\tdraft.initialTranslationList = translationList;\n\t\t\t\t\t\t\tdraft.removedTranslationList = [];\n\t\t\t\t\t\t});\n\t\t\t\t\t}\n\t\t\t\t\tif (!extension.length && !state.extensionXML) {\n\t\t\t\t\t\tif (state.extensionView) {\n\t\t\t\t\t\t\tremoveView();\n\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\tupdate((draft) => {\n\t\t\t\t\t\t\t\tdraft.loader = false;\n\t\t\t\t\t\t\t\tconst views = draft.view;\n\t\t\t\t\t\t\t\tif (isAttrsChanged) {\n\t\t\t\t\t\t\t\t\tconst schema = Utils.generateXMLToViewSchema({\n\t\t\t\t\t\t\t\t\t\tview: views.view,\n\t\t\t\t\t\t\t\t\t\tfields: draft.metaFieldStore,\n\t\t\t\t\t\t\t\t\t\textensionXML: views.extensionXML,\n\t\t\t\t\t\t\t\t\t\tattrsList,\n\t\t\t\t\t\t\t\t\t});\n\t\t\t\t\t\t\t\t\tdraft.widgets = schema.widgets;\n\t\t\t\t\t\t\t\t\tdraft.initialWidgets = schema.widgets;\n\t\t\t\t\t\t\t\t\tdraft.items = schema.items;\n\t\t\t\t\t\t\t\t\tdraft.initialItems = schema.items;\n\t\t\t\t\t\t\t\t\tdraft.extensionMoves = [];\n\t\t\t\t\t\t\t\t\tdraft.attrsList = attrsList;\n\t\t\t\t\t\t\t\t\tgenerateXpath(draft);\n\t\t\t\t\t\t\t\t\tclearHistory(draft);\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t});\n\t\t\t\t\t\t}\n\t\t\t\t\t\treturn;\n\t\t\t\t\t}\n\t\t\t\t\tconst getExistingExtension = (json) => {\n\t\t\t\t\t\tif (!json) {\n\t\t\t\t\t\t\treturn [];\n\t\t\t\t\t\t}\n\t\t\t\t\t\tconst { elements } = json;\n\t\t\t\t\t\tif (elements[0] && elements[0].elements) {\n\t\t\t\t\t\t\treturn elements[0].elements;\n\t\t\t\t\t\t}\n\t\t\t\t\t};\n\t\t\t\t\tconst form = {\n\t\t\t\t\t\telements: [\n\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\ttype: \"element\",\n\t\t\t\t\t\t\t\tname: state.widgets[-1].type,\n\t\t\t\t\t\t\t\tattributes: {\n\t\t\t\t\t\t\t\t\tmodel,\n\t\t\t\t\t\t\t\t\tid: `studio-${view.name}`,\n\t\t\t\t\t\t\t\t\ttitle: state.widgets[-1].title,\n\t\t\t\t\t\t\t\t\tname: view.name,\n\t\t\t\t\t\t\t\t\textension: \"true\",\n\t\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t\telements: [\n\t\t\t\t\t\t\t\t\t...getExistingExtension(state.extensionXML),\n\t\t\t\t\t\t\t\t\t...extension,\n\t\t\t\t\t\t\t\t],\n\t\t\t\t\t\t\t},\n\t\t\t\t\t\t],\n\t\t\t\t\t};\n\t\t\t\t\tconst xml = Utils.processXML(\n\t\t\t\t\t\tconvert.json2xml(form, {\n\t\t\t\t\t\t\tcompact: false,\n\t\t\t\t\t\t\tfullTagEmptyElement: false,\n\t\t\t\t\t\t})\n\t\t\t\t\t);\n\t\t\t\t\tlet data = {\n\t\t\t\t\t\txml,\n\t\t\t\t\t\textension: true,\n\t\t\t\t\t\ttype: state.widgets[-1].type,\n\t\t\t\t\t};\n\t\t\t\t\tif (state.extensionView) {\n\t\t\t\t\t\tdata = {\n\t\t\t\t\t\t\t...data,\n\t\t\t\t\t\t\tid: state.extensionView.id,\n\t\t\t\t\t\t\tversion: state.extensionView.version,\n\t\t\t\t\t\t};\n\t\t\t\t\t} else {\n\t\t\t\t\t\tdata = {\n\t\t\t\t\t\t\t...data,\n\t\t\t\t\t\t\tmodel,\n\t\t\t\t\t\t\tname: view.name,\n\t\t\t\t\t\t\ttitle: view.title,\n\t\t\t\t\t\t\txmlId: `studio-${view.name}`,\n\t\t\t\t\t\t};\n\t\t\t\t\t}\n\t\t\t\t\tif (state.extensionView) {\n\t\t\t\t\t\tif (state.extensionView.xml === data.xml) {\n\t\t\t\t\t\t\tupdate((draft) => {\n\t\t\t\t\t\t\t\tdraft.loader = false;\n\t\t\t\t\t\t\t\tif (isAttrsChanged) {\n\t\t\t\t\t\t\t\t\tupdate((draft) => {\n\t\t\t\t\t\t\t\t\t\tdraft.loader = false;\n\t\t\t\t\t\t\t\t\t\tconst views = draft.view;\n\t\t\t\t\t\t\t\t\t\tconst schema = Utils.generateXMLToViewSchema({\n\t\t\t\t\t\t\t\t\t\t\tview: views.view,\n\t\t\t\t\t\t\t\t\t\t\tfields: draft.metaFieldStore,\n\t\t\t\t\t\t\t\t\t\t\textensionXML: views.extensionXML,\n\t\t\t\t\t\t\t\t\t\t\tattrsList,\n\t\t\t\t\t\t\t\t\t\t});\n\t\t\t\t\t\t\t\t\t\tdraft.widgets = schema.widgets;\n\t\t\t\t\t\t\t\t\t\tdraft.initialWidgets = schema.widgets;\n\t\t\t\t\t\t\t\t\t\tdraft.items = schema.items;\n\t\t\t\t\t\t\t\t\t\tdraft.initialItems = schema.items;\n\t\t\t\t\t\t\t\t\t\tif (isAttrsChanged) {\n\t\t\t\t\t\t\t\t\t\t\tdraft.attrsList = attrsList;\n\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\tgenerateXpath(draft);\n\t\t\t\t\t\t\t\t\t\tclearHistory(draft);\n\t\t\t\t\t\t\t\t\t});\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t});\n\t\t\t\t\t\t\treturn;\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t\tmetaViewService.save(data).then(async (res) => {\n\t\t\t\t\t\tif (res.status === -1) {\n\t\t\t\t\t\t\tshowAlert(res.data?.string);\n\t\t\t\t\t\t} else if (res.data && res.data[0]) {\n\t\t\t\t\t\t\tconst record = res.data[0];\n\t\t\t\t\t\t\tconst { view } = state.view;\n\t\t\t\t\t\t\tconst views = await fetchViews(view);\n\t\t\t\t\t\t\tupdate((draft) => {\n\t\t\t\t\t\t\t\tconst schema = Utils.generateXMLToViewSchema({\n\t\t\t\t\t\t\t\t\tview: views.view,\n\t\t\t\t\t\t\t\t\tfields: draft.metaFieldStore,\n\t\t\t\t\t\t\t\t\textensionXML: views.extensionXML,\n\t\t\t\t\t\t\t\t\tattrsList,\n\t\t\t\t\t\t\t\t});\n\t\t\t\t\t\t\t\tdraft.widgets = schema.widgets;\n\t\t\t\t\t\t\t\tdraft.initialWidgets = schema.widgets;\n\t\t\t\t\t\t\t\tdraft.items = schema.items;\n\t\t\t\t\t\t\t\tdraft.initialItems = schema.items;\n\t\t\t\t\t\t\t\tdraft.exView = res.data[0];\n\t\t\t\t\t\t\t\tdraft.extensionMoves = [];\n\t\t\t\t\t\t\t\tdraft.loader = false;\n\t\t\t\t\t\t\t\tif (isAttrsChanged) {\n\t\t\t\t\t\t\t\t\tdraft.attrsList = attrsList;\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\tdraft.extensionView = {\n\t\t\t\t\t\t\t\t\t...draft.extensionView,\n\t\t\t\t\t\t\t\t\t...record,\n\t\t\t\t\t\t\t\t\tversion:\n\t\t\t\t\t\t\t\t\t\tviews.extensionXML.id === record.id\n\t\t\t\t\t\t\t\t\t\t\t? views.extensionXML.version\n\t\t\t\t\t\t\t\t\t\t\t: record.version,\n\t\t\t\t\t\t\t\t};\n\t\t\t\t\t\t\t\tgenerateXpath(draft);\n\t\t\t\t\t\t\t\tclearHistory(draft);\n\t\t\t\t\t\t\t});\n\t\t\t\t\t\t}\n\t\t\t\t\t});\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}, [\n\t\tstate,\n\t\tupdate,\n\t\tstartLoader,\n\t\tisTabsPanelEmpty,\n\t\tremoveView,\n\t\tclearHistory,\n\t\tshowAlert,\n\t]);\n\n\tconst handleClose = React.useCallback(() => {\n\t\tupdate((draft) => {\n\t\t\tdraft.dialog = null;\n\t\t});\n\t}, [update]);\n\n\tconst handleNew = React.useCallback(() => {\n\t\tstartLoader();\n\t\treset((draft) => {\n\t\t\tclearHistory(draft);\n\t\t});\n\t}, [reset, startLoader, clearHistory]);\n\n\tReact.useEffect(() => {\n\t\treset((draft) => {\n\t\t\tdraft.modelType = MODEL_TYPE.CUSTOM;\n\t\t});\n\t}, [reset]);\n\n\tconst saveCustomFieldView = React.useCallback(async () => {\n\t\tif (\n\t\t\t(state.customFieldItems || state.removedCustomFields.length) &&\n\t\t\tstate.modelField?.name\n\t\t) {\n\t\t\tif (!isTabsPanelEmpty()) return;\n\t\t\tconst customWidgets = Object.fromEntries(\n\t\t\t\tObject.entries(state.customFieldWidgets).filter(\n\t\t\t\t\t([, value]) =>\n\t\t\t\t\t\t(value.type === ItemTypes.CONTAINER && value.items?.length > 0) ||\n\t\t\t\t\t\tisPanelTab(value) || //allowing empty panel tab\n\t\t\t\t\t\tvalue.type !== ItemTypes.CONTAINER ||\n\t\t\t\t\t\ttypeof value.id === \"number\"\n\t\t\t\t)\n\t\t\t);\n\t\t\tconst propertyValues = Object.values(customWidgets || {}) || [];\n\t\t\tconst uniqueValues = new Set(propertyValues.map((v) => v.name)) || [];\n\t\t\tif (\n\t\t\t\tuniqueValues.size <\n\t\t\t\t(\n\t\t\t\t\t(propertyValues &&\n\t\t\t\t\t\tpropertyValues.filter((f) => f.type !== \"customForm\")) ||\n\t\t\t\t\t[]\n\t\t\t\t).length\n\t\t\t) {\n\t\t\t\tshowAlert(\"Field name should be unique\");\n\t\t\t\treturn;\n\t\t\t}\n\t\t\tstartLoader();\n\t\t\tconst extraProps = {\n\t\t\t\tmodelField: state.modelField.name,\n\t\t\t\tmodel: state.model.fullName,\n\t\t\t};\n\t\t\tconst { fields } = Utils.getCustomModelFields(\n\t\t\t\tstate.customFieldItems,\n\t\t\t\tcustomWidgets,\n\t\t\t\textraProps,\n\t\t\t\ttrue\n\t\t\t);\n\t\t\tif (fields.length || state.removedCustomFields.length) {\n\t\t\t\tif (state.removedCustomFields.length) {\n\t\t\t\t\tconst res = await customFieldService.removeAll(\n\t\t\t\t\t\tstate.removedCustomFields\n\t\t\t\t\t);\n\t\t\t\t\tif (res && res.status === -1) {\n\t\t\t\t\t\tconst { message, title } = res.data || {};\n\t\t\t\t\t\tshowAlert(message, title);\n\t\t\t\t\t\treturn;\n\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t\tconst all = fields.map((field) => customFieldService.save(field));\n\t\t\t\tconst res = await Promise.all(all);\n\t\t\t\tconst failedRes = res && res.find((r) => r.status === -1);\n\t\t\t\tif (failedRes && failedRes.data) {\n\t\t\t\t\tconst { title, message } = failedRes.data || {};\n\t\t\t\t\tlet errorMessage = message;\n\t\t\t\t\tif (\n\t\t\t\t\t\ttitle &&\n\t\t\t\t\t\ttitle.includes(translate(\"Unique constraint violation\"))\n\t\t\t\t\t) {\n\t\t\t\t\t\terrorMessage = \"Field name should be unique\";\n\t\t\t\t\t}\n\t\t\t\t\tshowAlert(errorMessage);\n\t\t\t\t\treturn;\n\t\t\t\t}\n\t\t\t\tfetchCustomFields(state.modelField, state.model).then((res) => {\n\t\t\t\t\tconst { data = [] } = res;\n\t\t\t\t\tconst schema = generateCustomModelSchema(\n\t\t\t\t\t\tdata,\n\t\t\t\t\t\tundefined,\n\t\t\t\t\t\t\"\",\n\t\t\t\t\t\t\"customForm\"\n\t\t\t\t\t);\n\t\t\t\t\tupdate((draft) => {\n\t\t\t\t\t\tdraft.customFieldWidgets = schema.widgets;\n\t\t\t\t\t\tdraft.customFieldItems = schema.items;\n\t\t\t\t\t\tdraft.customFields = data;\n\t\t\t\t\t\tdraft.loader = false;\n\t\t\t\t\t\tdraft.removedCustomFields = [];\n\t\t\t\t\t\tclearHistory(draft);\n\t\t\t\t\t});\n\t\t\t\t});\n\t\t\t} else {\n\t\t\t\tcloseLoader();\n\t\t\t}\n\t\t}\n\t}, [\n\t\tupdate,\n\t\tcloseLoader,\n\t\tstate,\n\t\tstartLoader,\n\t\tisTabsPanelEmpty,\n\t\tclearHistory,\n\t\tshowAlert,\n\t]);\n\n\tconst handleConfirmationClose = React.useCallback(() => {\n\t\tsetDeleteConfirmationDialog(false);\n\t}, []);\n\n\tconst deleteView = React.useCallback(() => {\n\t\tsetDeleteConfirmationDialog(true);\n\t}, []);\n\n\tconst handleRemoveConfirmation = React.useCallback(() => {\n\t\thandleConfirmationClose();\n\t\tremoveView();\n\t}, [removeView, handleConfirmationClose]);\n\n\tfunction renderDialog() {\n\t\tconst { dialog } = state;\n\t\treturn (\n\t\t\tdialog && (\n\t\t\t\t<Dialog\n\t\t\t\t\topen={Boolean(translate(dialog.message))}\n\t\t\t\t\tclasses={{\n\t\t\t\t\t\tpaper: classes.paper,\n\t\t\t\t\t}}\n\t\t\t\t>\n\t\t\t\t\t<DialogTitle>{translate(dialog.title || \"Alert\")}</DialogTitle>\n\t\t\t\t\t<DialogContent>\n\t\t\t\t\t\t<div\n\t\t\t\t\t\t\tdangerouslySetInnerHTML={{ __html: translate(dialog.message) }}\n\t\t\t\t\t\t></div>\n\t\t\t\t\t</DialogContent>\n\t\t\t\t\t<DialogActions>\n\t\t\t\t\t\t<Button\n\t\t\t\t\t\t\tonClick={handleClose}\n\t\t\t\t\t\t\tclassName={classes.button}\n\t\t\t\t\t\t\tcolor=\"primary\"\n\t\t\t\t\t\t\tautoFocus\n\t\t\t\t\t\t>\n\t\t\t\t\t\t\tOK\n\t\t\t\t\t\t</Button>\n\t\t\t\t\t</DialogActions>\n\t\t\t\t</Dialog>\n\t\t\t)\n\t\t);\n\t}\n\n\treturn (\n\t\t<React.Fragment>\n\t\t\t{renderDialog()}\n\t\t\t<Toolbar\n\t\t\t\tupdate={update}\n\t\t\t\tisStudioLite={isStudioLite}\n\t\t\t\tsaveView={saveView}\n\t\t\t\tsaveCustomFieldView={saveCustomFieldView}\n\t\t\t\tremoveView={deleteView}\n\t\t\t\tmodel={state.model}\n\t\t\t\textensionView={state.extensionView}\n\t\t\t\tmodelType={state.modelType}\n\t\t\t\tonNew={handleNew}\n\t\t\t\tmodelField={state.modelField}\n\t\t\t\tcustomModel={state.customModel}\n\t\t\t\tselectedView={state.selectedView}\n\t\t\t\tstartLoader={startLoader}\n\t\t\t\terrorList={state.errorList}\n\t\t\t\tentityType={state.entityType}\n\t\t\t\tmetaFieldStore={state.metaFieldStore}\n\t\t\t\tundo={undo}\n\t\t\t\tredo={redo}\n\t\t\t\trefresh={refresh}\n\t\t\t\tpastLength={state.past.length}\n\t\t\t\tfutureLength={state.future.length}\n\t\t\t\tclearHistory={clearHistory}\n\t\t\t\treset={reset}\n\t\t\t\tshowAlert={showAlert}\n\t\t\t\tonSelect={onSelect}\n\t\t\t/>\n\t\t\t<DeleteConfirmation\n\t\t\t\topen={deleteConfirmationDialog}\n\t\t\t\tonClose={handleConfirmationClose}\n\t\t\t\tonOk={handleRemoveConfirmation}\n\t\t\t\tmessage=\"Are you sure? Do you want to delete it?\"\n\t\t\t/>\n\t\t</React.Fragment>\n\t);\n}\n\nexport default React.memo(ToolbarContainer);\n","import React, { useState, useEffect, useCallback, useMemo } from \"react\";\nimport AutoComplete, {\n\tcreateFilterOptions,\n} from \"@material-ui/lab/Autocomplete\";\nimport _ from \"lodash\";\nimport { TextField, Typography, Box } from \"@material-ui/core\";\nimport { makeStyles } from \"@material-ui/core/styles\";\nimport AxelorService from \"../services/axelor.rest\";\nimport { camleCaseString, getDefaultGridFormName, translate } from \"../utils\";\nimport { useDebounceEffect } from \"./../common.func\";\nimport SearchView from \"./SearchView\";\nimport { useStore } from \"../store/context\";\nimport { ACTIONS } from \"../constants\";\n\nconst filter = createFilterOptions();\nconst useStyles = makeStyles({\n\tautoComplete: {\n\t\tbackgroundColor: \"#293846\",\n\t\tmarginTop: 15,\n\t\t\".modern-dark &\": {\n\t\t\tbackgroundColor: \"#323232\",\n\t\t},\n\t},\n\tlabel: {\n\t\tcolor: \"#e7eaec !important\",\n\t\tfontSize: 12,\n\t},\n\tpopperAutoComplete: {\n\t\t\"& ul, .MuiAutocomplete-noOptions\": {\n\t\t\tbackgroundColor: \"rgb(41, 56, 70) !important\",\n\t\t\t\".modern-dark &\": {\n\t\t\t\tbackgroundColor: \"#1b1b1b !important\",\n\t\t\t},\n\t\t},\n\t\t\"& li, .MuiAutocomplete-noOptions\": {\n\t\t\tcolor: \"#e7eaec !important\",\n\t\t\tbackgroundColor: \"rgb(41, 56, 70) !important\",\n\t\t\t\".modern-dark &\": {\n\t\t\t\tbackgroundColor: \"#1b1b1b !important\",\n\t\t\t},\n\t\t},\n\t\t\"& li:hover, .MuiAutocomplete-noOptions\": {\n\t\t\tcolor: \"#e7eaec !important\",\n\t\t\tbackgroundColor: \"#2f4050 !important\",\n\t\t\t\".modern-dark &\": {\n\t\t\t\tbackgroundColor: \"#323232 !important\",\n\t\t\t},\n\t\t},\n\t},\n\tinput: {\n\t\tcolor: \"#e7eaec\",\n\t\tfontSize: 13,\n\t},\n\troot: {\n\t\tcolor: \"#e7eaec\",\n\t},\n\terror: {\n\t\tcolor: \"red\",\n\t\tmarginBottom: 5,\n\t\tfontSize: 13,\n\t},\n\toption: {\n\t\tfontSize: 13,\n\t},\n\tdisabled: {\n\t\tcolor: \"#a3a3a3 !important\",\n\t\tfontSize: 12,\n\t},\n\tgroupTitle: {\n\t\tposition: \"sticky\",\n\t\ttop: \"-8px\",\n\t\tpadding: \"4px 10px\",\n\t\tcolor: \"white\",\n\t\tfontSize: 14,\n\t\tfontWeight: \"bold\",\n\t\tbackgroundColor: \"#293846\",\n\t},\n});\n\nexport default function SelectComponent(_props) {\n\tconst {\n\t\tname,\n\t\tref,\n\t\ttitle,\n\t\tvalueField = \"id\",\n\t\ttype,\n\t\tmultiple = false,\n\t\tcommaSeparated,\n\t\tdisplayField = \"name\",\n\t\tlimit = 10,\n\t\tdata: preData = [],\n\t\tisDisabled,\n\t\tneedsTargetModel,\n\t\tcanAddNew = false,\n\t\tgetOptionLabel,\n\t\tshouldFetchInStart = false,\n\t\t_domain,\n\t} = _props.field;\n\tconst { props, error } = _props;\n\tconst { propertyList, setPropertyList, onChange, editWidgetType, modelType } =\n\t\tprops;\n\tconst value = useMemo(() => {\n\t\tlet value = propertyList[name] || \"\";\n\t\tif (commaSeparated && type === \"select\") {\n\t\t\tconst values = value ? value.split(\",\") : [];\n\t\t\tvalue = values.map((val) => {\n\t\t\t\treturn { [valueField]: val };\n\t\t\t});\n\t\t}\n\t\treturn value;\n\t}, [propertyList, name, commaSeparated, type, valueField]);\n\n\tconst [data, setData] = useState([...preData]);\n\tconst [searchText, setsearchText] = useState(null);\n\tconst isMounted = React.useRef(true);\n\tconst [moreDialog, setMoreDialog] = useState(false);\n\tconst [offset, setOffset] = useState(0);\n\tconst [total, setTotal] = useState(0);\n\tconst [initialFetch, setInitialFetch] = useState(false);\n\tconst { targetModel } = propertyList;\n\tconst classes = useStyles();\n\tconst disabled = isDisabled\n\t\t? isDisabled(propertyList, editWidgetType, modelType)\n\t\t: false;\n\tconst isTypeOnClick = name === \"onClick\" && type === \"select\";\n\tconst [isLoading, setIsLoading] = useState(true);\n\tconst { state } = useStore();\n\tconst { model, modelType: stateModelType } = state;\n\tconst [tabIndex, setTabIndex] = useState(state.model ? 0 : 1);\n\n\tconst handleInputChange = useCallback(\n\t\t(e, value, reason) => {\n\t\t\tif (reason !== \"reset\") {\n\t\t\t\tif (type === \"objectSelection\" && typeof value === \"object\") {\n\t\t\t\t\tsetsearchText(value[displayField]);\n\t\t\t\t} else {\n\t\t\t\t\tsetsearchText(value);\n\t\t\t\t}\n\t\t\t}\n\t\t},\n\t\t[type, displayField]\n\t);\n\n\tconst getSelectValue = useCallback(\n\t\t(value = []) => {\n\t\t\tif (commaSeparated) {\n\t\t\t\treturn value ? value.map((e) => e.name).join(\",\") : \"\";\n\t\t\t}\n\t\t\treturn ref ? value[valueField] : value;\n\t\t},\n\t\t[valueField, commaSeparated, ref]\n\t);\n\n\tconst fetchOptions = useCallback(\n\t\t(searchText = \"\", offset = 0) => {\n\t\t\tconst currentModel =\n\t\t\t\tstateModelType === \"CUSTOM\"\n\t\t\t\t\t? \"com.axelor.meta.db.MetaJsonRecord\"\n\t\t\t\t\t: model?.fullName;\n\t\t\tconst modelFilters = [\n\t\t\t\t{\n\t\t\t\t\ttype: \"Model actions\",\n\t\t\t\t\tcriteria: {\n\t\t\t\t\t\tfieldName: \"model\",\n\t\t\t\t\t\toperator: \"=\",\n\t\t\t\t\t\tvalue: currentModel || \"\",\n\t\t\t\t\t},\n\t\t\t\t},\n\t\t\t\t{\n\t\t\t\t\ttype: \"Global actions\",\n\t\t\t\t\tcriteria: {\n\t\t\t\t\t\tfieldName: \"model\",\n\t\t\t\t\t\toperator: \"isNull\",\n\t\t\t\t\t},\n\t\t\t\t},\n\t\t\t\t{\n\t\t\t\t\ttype: \"Other actions\",\n\t\t\t\t\tcriteria: {\n\t\t\t\t\t\tfieldName: \"model\",\n\t\t\t\t\t\toperator: \"!=\",\n\t\t\t\t\t\tvalue: currentModel || \"\",\n\t\t\t\t\t},\n\t\t\t\t},\n\t\t\t];\n\t\t\tconst criteria = [];\n\t\t\tif (searchText) {\n\t\t\t\tcriteria.push({\n\t\t\t\t\tfieldName: \"name\",\n\t\t\t\t\toperator: \"like\",\n\t\t\t\t\tvalue: searchText,\n\t\t\t\t});\n\t\t\t}\n\t\t\tif (\n\t\t\t\t(name === \"gridView\" || name === \"formView\") &&\n\t\t\t\tneedsTargetModel.includes(props.type)\n\t\t\t) {\n\t\t\t\tif (!targetModel) return;\n\t\t\t}\n\t\t\tif (name === \"gridView\") {\n\t\t\t\tneedsTargetModel.includes(props.type) &&\n\t\t\t\t\tcriteria.push({\n\t\t\t\t\t\tfieldName: \"model\",\n\t\t\t\t\t\toperator: \"=\",\n\t\t\t\t\t\tvalue: targetModel,\n\t\t\t\t\t});\n\t\t\t\tcriteria.push({ fieldName: \"type\", operator: \"=\", value: \"grid\" });\n\t\t\t}\n\t\t\tif (name === \"formView\") {\n\t\t\t\tneedsTargetModel.includes(props.type) &&\n\t\t\t\t\tcriteria.push({\n\t\t\t\t\t\tfieldName: \"model\",\n\t\t\t\t\t\toperator: \"=\",\n\t\t\t\t\t\tvalue: targetModel,\n\t\t\t\t\t});\n\t\t\t\tcriteria.push({ fieldName: \"type\", operator: \"=\", value: \"form\" });\n\t\t\t}\n\t\t\tif (isTypeOnClick && moreDialog) {\n\t\t\t\ttabIndex === ACTIONS.GLOBAL\n\t\t\t\t\t? criteria.push(modelFilters[ACTIONS.GLOBAL].criteria)\n\t\t\t\t\t: tabIndex === ACTIONS.MODEL\n\t\t\t\t\t? criteria.push(modelFilters[ACTIONS.MODEL].criteria)\n\t\t\t\t\t: criteria.push(modelFilters[ACTIONS.OTHER].criteria);\n\t\t\t}\n\t\t\tconst data = {\n\t\t\t\t...(_domain\n\t\t\t\t\t? {\n\t\t\t\t\t\t\t_domain,\n\t\t\t\t\t\t\t_domainContext: { model: model?.fullName },\n\t\t\t\t\t  }\n\t\t\t\t\t: {}),\n\t\t\t\tcriteria,\n\t\t\t\toperator: \"and\",\n\t\t\t};\n\t\t\tconst fields = [\n\t\t\t\t\"name\",\n\t\t\t\t\"fullName\",\n\t\t\t\tvalueField,\n\t\t\t\tdisplayField,\n\t\t\t\t\"parent\",\n\t\t\t].filter((e) => e);\n\t\t\tif (shouldFetchInStart && initialFetch) {\n\t\t\t\t// setData(data);\n\t\t\t} else if (isTypeOnClick && !moreDialog) {\n\t\t\t\tconst getActions = async () => {\n\t\t\t\t\tconst fetchedData = await Promise.all([\n\t\t\t\t\t\tnew AxelorService({ model: ref }).search({\n\t\t\t\t\t\t\tfields,\n\t\t\t\t\t\t\tdata: {\n\t\t\t\t\t\t\t\tcriteria: [...criteria, modelFilters[ACTIONS.MODEL].criteria],\n\t\t\t\t\t\t\t\toperator: \"and\",\n\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\tlimit: 5,\n\t\t\t\t\t\t\toffset,\n\t\t\t\t\t\t}),\n\t\t\t\t\t\tnew AxelorService({ model: ref }).search({\n\t\t\t\t\t\t\tfields,\n\t\t\t\t\t\t\tdata: {\n\t\t\t\t\t\t\t\tcriteria: [...criteria, modelFilters[ACTIONS.GLOBAL].criteria],\n\t\t\t\t\t\t\t\toperator: \"and\",\n\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\tlimit: 5,\n\t\t\t\t\t\t\toffset,\n\t\t\t\t\t\t}),\n\t\t\t\t\t\tnew AxelorService({ model: ref }).search({\n\t\t\t\t\t\t\tfields,\n\t\t\t\t\t\t\tdata: {\n\t\t\t\t\t\t\t\tcriteria: [...criteria, modelFilters[ACTIONS.OTHER].criteria],\n\t\t\t\t\t\t\t\toperator: \"and\",\n\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\tlimit: 5,\n\t\t\t\t\t\t\toffset,\n\t\t\t\t\t\t}),\n\t\t\t\t\t]);\n\n\t\t\t\t\tconst data = await Promise.all(\n\t\t\t\t\t\tfetchedData.map((result, index) =>\n\t\t\t\t\t\t\tresult.data\n\t\t\t\t\t\t\t\t? result.data.map((action) => ({\n\t\t\t\t\t\t\t\t\t\t...action,\n\t\t\t\t\t\t\t\t\t\ttype: modelFilters[index].type,\n\t\t\t\t\t\t\t\t  }))\n\t\t\t\t\t\t\t\t: {\n\t\t\t\t\t\t\t\t\t\ttype: modelFilters[index].type,\n\t\t\t\t\t\t\t\t\t\tname: translate(\"No data found\"),\n\t\t\t\t\t\t\t\t\t\tid: \"no_data_found\",\n\t\t\t\t\t\t\t\t  }\n\t\t\t\t\t\t)\n\t\t\t\t\t);\n\t\t\t\t\tdata.push({\n\t\t\t\t\t\tname: translate(\"Show more...\"),\n\t\t\t\t\t\tid: \"studio_show_More_View\",\n\t\t\t\t\t});\n\t\t\t\t\tsetData(data.flat());\n\t\t\t\t};\n\t\t\t\tgetActions();\n\t\t\t} else {\n\t\t\t\treturn new AxelorService({ model: ref })\n\t\t\t\t\t.search({ fields, data, limit, offset })\n\t\t\t\t\t.then(({ data, total } = {}) => {\n\t\t\t\t\t\tshouldFetchInStart && setInitialFetch(true);\n\t\t\t\t\t\tif (data && data.length) {\n\t\t\t\t\t\t\tif (isMounted.current) {\n\t\t\t\t\t\t\t\t!moreDialog &&\n\t\t\t\t\t\t\t\t\ttotal > limit &&\n\t\t\t\t\t\t\t\t\tdata.push({\n\t\t\t\t\t\t\t\t\t\t[displayField]: translate(\"Show more...\"),\n\t\t\t\t\t\t\t\t\t\tid: \"studio_show_More_View\",\n\t\t\t\t\t\t\t\t\t});\n\t\t\t\t\t\t\t\tsetTotal(total);\n\t\t\t\t\t\t\t\tconst uniqueData = _.uniqBy(data, displayField);\n\t\t\t\t\t\t\t\tsetData(uniqueData);\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\tsetData([]);\n\t\t\t\t\t\t}\n\t\t\t\t\t\tsetIsLoading(false);\n\t\t\t\t\t});\n\t\t\t}\n\t\t},\n\t\t[\n\t\t\tname,\n\t\t\tref,\n\t\t\ttargetModel,\n\t\t\tvalueField,\n\t\t\tdisplayField,\n\t\t\tlimit,\n\t\t\tneedsTargetModel,\n\t\t\tprops.type,\n\t\t\tmoreDialog,\n\t\t\tinitialFetch,\n\t\t\tshouldFetchInStart,\n\t\t\tisTypeOnClick,\n\t\t\ttabIndex,\n\t\t\tmodel,\n\t\t\tstateModelType,\n\t\t\t_domain,\n\t\t]\n\t);\n\n\tconst optionDebounceHandler = React.useCallback(() => {\n\t\tref && searchText != null && fetchOptions(searchText);\n\t}, [fetchOptions, searchText, ref]);\n\n\tconst getValue = useCallback(\n\t\t(value) => {\n\t\t\treturn typeof value === \"string\" && ref\n\t\t\t\t? {\n\t\t\t\t\t\t[valueField]: value,\n\t\t\t\t\t\t[displayField]: value,\n\t\t\t\t  }\n\t\t\t\t: value;\n\t\t},\n\t\t[valueField, ref, displayField]\n\t);\n\n\tconst getInputAsOption = React.useCallback(\n\t\t(value) => {\n\t\t\tif (value && typeof value === \"string\" && ref) {\n\t\t\t\tvalue = { [valueField]: value };\n\t\t\t}\n\t\t\treturn value;\n\t\t},\n\t\t[ref, valueField]\n\t);\n\n\tconst handleSearch = React.useCallback((value) => {\n\t\tsetsearchText(value);\n\t\tsetOffset(0);\n\t}, []);\n\n\tconst handleNext = React.useCallback(() => {\n\t\tconst newOffset = offset + limit;\n\t\tif (newOffset <= total) {\n\t\t\tsetOffset(newOffset);\n\t\t\tfetchOptions(searchText, newOffset);\n\t\t}\n\t}, [limit, total, offset, fetchOptions, searchText]);\n\n\tconst handlePrevious = React.useCallback(() => {\n\t\tlet newOffset = offset - limit;\n\t\tnewOffset = newOffset > 0 ? newOffset : 0;\n\t\tsetOffset(newOffset);\n\t\tfetchOptions(searchText, newOffset);\n\t}, [offset, limit, searchText, fetchOptions]);\n\n\tconst handleClose = React.useCallback(() => {\n\t\tsetMoreDialog(false);\n\t\tsetsearchText(null);\n\t\tsetOffset(0);\n\t}, []);\n\n\tconst handleChange = React.useCallback(\n\t\tasync (e, _value) => {\n\t\t\tif (_value?.id === \"studio_show_More_View\") {\n\t\t\t\tsetMoreDialog(true);\n\t\t\t\treturn;\n\t\t\t}\n\t\t\tif (multiple) {\n\t\t\t\tif (e.fromDialog) {\n\t\t\t\t\t_value = [...value, _value];\n\t\t\t\t\thandleSearch(\"\");\n\t\t\t\t} else {\n\t\t\t\t\tconst hasMoreView =\n\t\t\t\t\t\t_value.findIndex((v) => v?.id === \"studio_show_More_View\") !== -1;\n\t\t\t\t\tif (hasMoreView) {\n\t\t\t\t\t\tsetMoreDialog(true);\n\t\t\t\t\t} else {\n\t\t\t\t\t\thandleSearch(\"\");\n\t\t\t\t\t}\n\t\t\t\t\tconst isNoDataFound =\n\t\t\t\t\t\t_value.findIndex((v) => v?.id === \"no_data_found\") !== -1;\n\t\t\t\t\tif (isNoDataFound) return;\n\t\t\t\t}\n\t\t\t\t_value = _value\n\t\t\t\t\t.map((val) => {\n\t\t\t\t\t\tif (val?.id !== \"studio_show_More_View\") {\n\t\t\t\t\t\t\treturn getInputAsOption(val);\n\t\t\t\t\t\t}\n\t\t\t\t\t\treturn undefined;\n\t\t\t\t\t})\n\t\t\t\t\t.filter((e) => e);\n\t\t\t} else {\n\t\t\t\tif (_value && _value.inputValue && _value.inputValue.length && ref) {\n\t\t\t\t\t_value[valueField] = _value.inputValue;\n\t\t\t\t}\n\t\t\t}\n\t\t\tlet updatedValue = {\n\t\t\t\t...propertyList,\n\t\t\t\t[name]:\n\t\t\t\t\ttype === \"objectSelection\"\n\t\t\t\t\t\t? _value\n\t\t\t\t\t\t: _value && getSelectValue(_value),\n\t\t\t};\n\t\t\tlet payload = {};\n\t\t\tif (name === \"targetModel\") {\n\t\t\t\tconst { targetModel } = updatedValue || {};\n\t\t\t\tpayload = {\n\t\t\t\t\tgridView: _value ? getDefaultGridFormName(targetModel) : null,\n\t\t\t\t\tformView: _value ? getDefaultGridFormName(targetModel, true) : null,\n\t\t\t\t};\n\t\t\t}\n\t\t\tif (name === \"contextField\") {\n\t\t\t\tif (updatedValue[name]) {\n\t\t\t\t\tconst res = await new AxelorService({ model: ref }).action({\n\t\t\t\t\t\taction: \"com.axelor.meta.web.MetaController:contextFieldChange\",\n\t\t\t\t\t\tdata: {\n\t\t\t\t\t\t\tcontext: {\n\t\t\t\t\t\t\t\t...updatedValue,\n\t\t\t\t\t\t\t\t...(!updatedValue.model ? { model: model?.fullName } : {}),\n\t\t\t\t\t\t\t},\n\t\t\t\t\t\t},\n\t\t\t\t\t\tmodel: \"com.axelor.meta.db.MetaJsonField\",\n\t\t\t\t\t});\n\t\t\t\t\tif (res?.data?.[0]?.values) {\n\t\t\t\t\t\tupdatedValue = {\n\t\t\t\t\t\t\t...updatedValue,\n\t\t\t\t\t\t\t...res.data[0].values,\n\t\t\t\t\t\t};\n\t\t\t\t\t}\n\t\t\t\t} else {\n\t\t\t\t\tupdatedValue = {\n\t\t\t\t\t\t...updatedValue,\n\t\t\t\t\t\tcontextFieldTarget: null,\n\t\t\t\t\t\tcontextFieldTargetName: null,\n\t\t\t\t\t\tcontextFieldValue: null,\n\t\t\t\t\t\tcontextFieldTitle: null,\n\t\t\t\t\t};\n\t\t\t\t}\n\t\t\t}\n\t\t\tif (name === \"contextFieldTitle\") {\n\t\t\t\tupdatedValue.contextFieldValue = _value?.id?.toString() || null;\n\t\t\t}\n\t\t\tsetPropertyList({ ...(updatedValue || {}), ...payload });\n\t\t\tonChange(\n\t\t\t\t{ ...(updatedValue || {}), ...payload },\n\t\t\t\tname !== \"selection\" ? name : undefined\n\t\t\t);\n\t\t},\n\t\t[\n\t\t\tgetSelectValue,\n\t\t\tmultiple,\n\t\t\tname,\n\t\t\tonChange,\n\t\t\tsetPropertyList,\n\t\t\tpropertyList,\n\t\t\tvalue,\n\t\t\ttype,\n\t\t\tref,\n\t\t\tgetInputAsOption,\n\t\t\tvalueField,\n\t\t\thandleSearch,\n\t\t\tmodel,\n\t\t]\n\t);\n\n\tconst handleTabChange = useCallback((_, value) => {\n\t\tsetTabIndex(value);\n\t}, []);\n\n\tuseDebounceEffect(optionDebounceHandler, 500);\n\n\tuseEffect(() => {\n\t\tisMounted.current = true;\n\t\treturn () => {\n\t\t\tisMounted.current = false;\n\t\t};\n\t}, []);\n\n\tconst _value = useMemo(\n\t\t() => (multiple ? value || [] : getValue(value)),\n\t\t[value, multiple, getValue]\n\t);\n\n\tuseEffect(() => {\n\t\tif (moreDialog) {\n\t\t\tsetIsLoading(true);\n\t\t\tfetchOptions(searchText);\n\t\t\tsetOffset(0);\n\t\t\tsetData([]);\n\t\t}\n\t}, [fetchOptions, moreDialog, searchText]);\n\n\treturn (\n\t\t<div style={{ display: \"flex\", flexDirection: \"column\", width: \"100%\" }}>\n\t\t\t<AutoComplete\n\t\t\t\tclasses={{\n\t\t\t\t\tinputFocused: disabled ? classes.disabled : classes.input,\n\t\t\t\t\tclearIndicator: classes.input,\n\t\t\t\t\tpopupIndicator: disabled ? classes.disabled : classes.input,\n\t\t\t\t\tpopper: classes.popperAutoComplete,\n\t\t\t\t\toption: classes.option,\n\t\t\t\t\tnoOptions: classes.option,\n\t\t\t\t}}\n\t\t\t\tclassName={classes.autoComplete}\n\t\t\t\tonOpen={() => {\n\t\t\t\t\tref && setData([]);\n\t\t\t\t\tref && fetchOptions(searchText);\n\t\t\t\t}}\n\t\t\t\tdisabled={disabled}\n\t\t\t\tmultiple={multiple}\n\t\t\t\toptions={data}\n\t\t\t\tgroupBy={(option) => option.type}\n\t\t\t\tforcePopupIcon={true}\n\t\t\t\tfreeSolo={type !== \"objectSelection\"}\n\t\t\t\tclearOnBlur={moreDialog}\n\t\t\t\tvalue={_value}\n\t\t\t\tsize=\"small\"\n\t\t\t\tonInputChange={handleInputChange}\n\t\t\t\t{...{\n\t\t\t\t\tfilterOptions: (options, params) => {\n\t\t\t\t\t\tconst filtered = filter(options, params);\n\t\t\t\t\t\t// Suggest the creation of a new value\n\t\t\t\t\t\tif (searchText && canAddNew) {\n\t\t\t\t\t\t\tfiltered.splice(0, 0, {\n\t\t\t\t\t\t\t\tinputValue: searchText,\n\t\t\t\t\t\t\t\tname: searchText,\n\t\t\t\t\t\t\t\ttitle: `Add \"${searchText}\"`,\n\t\t\t\t\t\t\t\ttype: \"Add new\",\n\t\t\t\t\t\t\t});\n\t\t\t\t\t\t}\n\t\t\t\t\t\tconst showMore = options.find(\n\t\t\t\t\t\t\t(o) => o.id === \"studio_show_More_View\"\n\t\t\t\t\t\t);\n\t\t\t\t\t\tif (\n\t\t\t\t\t\t\tshowMore &&\n\t\t\t\t\t\t\t![\"\", null, undefined].includes(params.inputValue)\n\t\t\t\t\t\t) {\n\t\t\t\t\t\t\tconst hasShowMore =\n\t\t\t\t\t\t\t\tfiltered.findIndex((o) => o.id === \"studio_show_More_View\") !==\n\t\t\t\t\t\t\t\t-1;\n\n\t\t\t\t\t\t\t!hasShowMore && filtered.push({ ...showMore });\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\treturn filtered;\n\t\t\t\t\t},\n\t\t\t\t}}\n\t\t\t\tonChange={handleChange}\n\t\t\t\trenderInput={(params) => (\n\t\t\t\t\t<TextField\n\t\t\t\t\t\t{...params}\n\t\t\t\t\t\tautoComplete=\"off\"\n\t\t\t\t\t\terror={Boolean(error)}\n\t\t\t\t\t\tvariant=\"outlined\"\n\t\t\t\t\t\tlabel={translate(camleCaseString(title || name))}\n\t\t\t\t\t\tInputLabelProps={{\n\t\t\t\t\t\t\tclassName: disabled ? classes.disabled : classes.label,\n\t\t\t\t\t\t}}\n\t\t\t\t\t/>\n\t\t\t\t)}\n\t\t\t\trenderGroup={(params) => (\n\t\t\t\t\t<Box key={params.key}>\n\t\t\t\t\t\t<Typography\n\t\t\t\t\t\t\tclassName={classes.groupTitle}\n\t\t\t\t\t\t\tstyle={{\n\t\t\t\t\t\t\t\tborderBottom: `${isTypeOnClick ? \"2px solid gray\" : \"none\"}`,\n\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t>\n\t\t\t\t\t\t\t{params.group}\n\t\t\t\t\t\t</Typography>\n\t\t\t\t\t\t{params.children}\n\t\t\t\t\t</Box>\n\t\t\t\t)}\n\t\t\t\tgetOptionLabel={(option) => {\n\t\t\t\t\tif (getOptionLabel) {\n\t\t\t\t\t\treturn getOptionLabel(option, data);\n\t\t\t\t\t}\n\t\t\t\t\treturn option.type === \"Add new\"\n\t\t\t\t\t\t? option[\"title\"]\n\t\t\t\t\t\t: typeof option === \"string\"\n\t\t\t\t\t\t? option\n\t\t\t\t\t\t: option[displayField] || \"\";\n\t\t\t\t}}\n\t\t\t/>\n\t\t\t{error && <Typography className={classes.error}>{error}</Typography>}\n\t\t\t{moreDialog && isTypeOnClick ? (\n\t\t\t\t<SearchView\n\t\t\t\t\tsearchText={searchText}\n\t\t\t\t\tlist={data}\n\t\t\t\t\ttotal={total}\n\t\t\t\t\toffset={offset}\n\t\t\t\t\tdisplayField={displayField}\n\t\t\t\t\topen={moreDialog}\n\t\t\t\t\tonNext={handleNext}\n\t\t\t\t\tonPrevious={handlePrevious}\n\t\t\t\t\thandleClose={handleClose}\n\t\t\t\t\tsetSearchText={handleSearch}\n\t\t\t\t\ttitle={translate(camleCaseString(title || name))}\n\t\t\t\t\tonChange={(value) => handleChange({ fromDialog: true }, value)}\n\t\t\t\t\tcurrentTab={tabIndex}\n\t\t\t\t\tonTabChange={handleTabChange}\n\t\t\t\t\tisTypeOnClick={isTypeOnClick}\n\t\t\t\t\tisDataLoading={isLoading}\n\t\t\t\t/>\n\t\t\t) : (\n\t\t\t\t<SearchView\n\t\t\t\t\tsearchText={searchText}\n\t\t\t\t\tlist={data}\n\t\t\t\t\ttotal={total}\n\t\t\t\t\toffset={offset}\n\t\t\t\t\tdisplayField={displayField}\n\t\t\t\t\topen={moreDialog}\n\t\t\t\t\tonNext={handleNext}\n\t\t\t\t\tonPrevious={handlePrevious}\n\t\t\t\t\thandleClose={handleClose}\n\t\t\t\t\tsetSearchText={handleSearch}\n\t\t\t\t\ttitle={translate(camleCaseString(title || name))}\n\t\t\t\t\tonChange={(value) => handleChange({ fromDialog: true }, value)}\n\t\t\t\t\tisDataLoading={isLoading}\n\t\t\t\t/>\n\t\t\t)}\n\t\t</div>\n\t);\n}\n","import React from \"react\";\nimport { TextField, Typography } from \"@material-ui/core\";\nimport { makeStyles } from \"@material-ui/core/styles\";\nimport { useStore } from \"../store/context\";\nconst useStyles = makeStyles({\n\tcontainer: {\n\t\tmarginBottom: 15,\n\t},\n\trow: {\n\t\tdisplay: \"flex\",\n\t},\n\tlanguageText: {\n\t\twidth: \"15%\",\n\t\tmarginTop: 8,\n\t\ttextTransform: \"capitalize\",\n\t\ttextAlign: \"center\",\n\t},\n});\n\nfunction TranslationGrid(props) {\n\tconst classes = useStyles();\n\tconst { state, update } = useStore();\n\tconst { keyValue, ...rest } = props;\n\tconst { translationList } = state;\n\tconst [translations, setTranslations] = React.useState([]);\n\n\tconst handleTranslationChange = React.useCallback(\n\t\t({ key, message, language }) => {\n\t\t\tsetTranslations((_translations) => {\n\t\t\t\tlet newList = [..._translations];\n\t\t\t\tconst translationIndex = newList.findIndex(\n\t\t\t\t\t(e) => e.key === key && e.language === language\n\t\t\t\t);\n\n\t\t\t\tif (translationIndex !== -1) {\n\t\t\t\t\tnewList[translationIndex] = { ...newList[translationIndex], message };\n\t\t\t\t} else {\n\t\t\t\t\tnewList.push({ key, message, language });\n\t\t\t\t}\n\t\t\t\treturn [...newList];\n\t\t\t});\n\t\t},\n\t\t[]\n\t);\n\n\tconst handleTranslationUpdate = React.useCallback(\n\t\t({ key, message, language }) => {\n\t\t\tupdate((draft) => {\n\t\t\t\tconst translationIndex = draft.translationList.findIndex(\n\t\t\t\t\t(e) => e.key === key && e.language === language\n\t\t\t\t);\n\n\t\t\t\tif (translationIndex !== -1) {\n\t\t\t\t\tdraft.translationList[translationIndex].message = message;\n\t\t\t\t} else {\n\t\t\t\t\tdraft.translationList.push({ key, message, language });\n\t\t\t\t}\n\t\t\t});\n\t\t},\n\t\t[update]\n\t);\n\n\tReact.useEffect(() => {\n\t\tsetTranslations([...translationList]);\n\t}, [translationList]);\n\n\treturn (\n\t\t<div className={classes.container}>\n\t\t\t{state.languageList.map((lang, i) => (\n\t\t\t\t<div key={i} className={classes.row}>\n\t\t\t\t\t<Typography classes={{ root: classes.languageText }}>\n\t\t\t\t\t\t{lang.value}\n\t\t\t\t\t</Typography>\n\t\t\t\t\t<TextField\n\t\t\t\t\t\tvariant=\"outlined\"\n\t\t\t\t\t\t{...rest}\n\t\t\t\t\t\tvalue={\n\t\t\t\t\t\t\ttranslations.find(\n\t\t\t\t\t\t\t\t(e) => e.key === keyValue && e.language === lang.value\n\t\t\t\t\t\t\t)?.message || \"\"\n\t\t\t\t\t\t}\n\t\t\t\t\t\tonChange={(e) =>\n\t\t\t\t\t\t\thandleTranslationChange({\n\t\t\t\t\t\t\t\tkey: keyValue,\n\t\t\t\t\t\t\t\tmessage: e.target.value,\n\t\t\t\t\t\t\t\tlanguage: lang.value,\n\t\t\t\t\t\t\t})\n\t\t\t\t\t\t}\n\t\t\t\t\t\tonBlur={(e) =>\n\t\t\t\t\t\t\te.target.value &&\n\t\t\t\t\t\t\thandleTranslationUpdate({\n\t\t\t\t\t\t\t\tkey: keyValue,\n\t\t\t\t\t\t\t\tmessage: e.target.value,\n\t\t\t\t\t\t\t\tlanguage: lang.value,\n\t\t\t\t\t\t\t})\n\t\t\t\t\t\t}\n\t\t\t\t\t/>\n\t\t\t\t</div>\n\t\t\t))}\n\t\t</div>\n\t);\n}\n\nexport default TranslationGrid;\n","import React from \"react\";\nimport TextField from \"@material-ui/core/TextField\";\nimport AutoComplete from \"@material-ui/lab/Autocomplete\";\nimport { makeStyles } from \"@material-ui/core/styles\";\nimport { camleCaseString, translate, getProperty } from \"../../utils\";\nimport { typeReplacer } from \"../../constants\";\n\nconst useStyles = makeStyles({\n\tselection: {\n\t\tcolor: \"#ffffff\",\n\t\tbackgroundColor: \"#293846\",\n\t\t\".modern-dark &\": {\n\t\t\tbackgroundColor: \"#323232\",\n\t\t},\n\t},\n\tautoComplete: {\n\t\twidth: \"100%\",\n\t\tmarginTop: 15,\n\t\tbackgroundColor: \"#293846\",\n\t\t\"& > div > label\": {\n\t\t\tcolor: \"#ffffff !important\",\n\t\t\tfontSize: 13,\n\t\t},\n\t\t\".modern-dark &\": {\n\t\t\tbackgroundColor: \"#323232\",\n\t\t},\n\t},\n\tautoCompleteInput: {\n\t\tcolor: \"#ffffff\",\n\t\tfontSize: 13,\n\t},\n\tautoCompleteOption: {\n\t\tfontSize: 13,\n\t\t\"& ul, .MuiAutocomplete-noOptions\": {\n\t\t\tbackgroundColor: \"rgb(41, 56, 70) !important\",\n\t\t\t\".modern-dark &\": {\n\t\t\t\tbackgroundColor: \"#1b1b1b !important\",\n\t\t\t},\n\t\t},\n\t\t\"& li, .MuiAutocomplete-noOptions\": {\n\t\t\tcolor: \"#ffffff !important\",\n\t\t\tbackgroundColor: \"rgb(41, 56, 70) !important\",\n\t\t\t\".modern-dark &\": {\n\t\t\t\tbackgroundColor: \"#1b1b1b !important\",\n\t\t\t},\n\t\t},\n\t\t\"& li:hover, .MuiAutocomplete-noOptions\": {\n\t\t\tcolor: \"#ffffff !important\",\n\t\t\tbackgroundColor: \"#2f4050 !important\",\n\t\t\t\".modern-dark &\": {\n\t\t\t\tbackgroundColor: \"#323232 !important\",\n\t\t\t},\n\t\t},\n\t},\n\n\tdisabled: {\n\t\tcolor: \"#a3a3a3 !important\",\n\t\tfontSize: 12,\n\t},\n});\n\nexport default function StaticSelection(_props) {\n\tconst { index } = _props;\n\tlet {\n\t\tname,\n\t\trequired,\n\t\tdata,\n\t\thelper,\n\t\ttitle,\n\t\tcolor,\n\t\tdisableClearable = false,\n\t\tparentField,\n\t\tparentPanel,\n\t\tgetOptionLabel,\n\t\t...rest\n\t} = _props.field;\n\tconst { props } = _props;\n\tconst {\n\t\tpropertyList,\n\t\tsetPropertyList,\n\t\ttype,\n\t\tonChange,\n\t\tmodelType,\n\t\tmetaFieldStore,\n\t\teditWidgetType,\n\t} = props || {};\n\tconst classes = useStyles();\n\n\tif (typeof data === \"object\" && !Array.isArray(data)) {\n\t\tdata = data[(typeReplacer[type] || type).toLowerCase()] || [];\n\t}\n\ttitle = translate(camleCaseString(title || name));\n\n\tconst ColorTag = ({ color }) => (\n\t\t<div style={{ width: 15, height: 15, backgroundColor: color }}></div>\n\t);\n\tlet value = propertyList[name] || \"\";\n\tif (\n\t\t(modelType === rest.modelType || props.editWidgetType === \"customField\") &&\n\t\tparentField\n\t) {\n\t\tconst field = propertyList[parentField]\n\t\t\t? JSON.parse(propertyList[parentField])\n\t\t\t: {};\n\t\tvalue = field[name] || \"\";\n\t}\n\tlet disabled = false;\n\tif (rest.isDisabled) {\n\t\tdisabled = rest.isDisabled({\n\t\t\tproperties: propertyList,\n\t\t\tmetaFieldStore,\n\t\t\teditWidgetType,\n\t\t\tmodelType,\n\t\t});\n\t}\n\treturn (\n\t\t<AutoComplete\n\t\t\toptions={data}\n\t\t\tclasses={{\n\t\t\t\troot: classes.selection,\n\t\t\t\tinputFocused: disabled ? classes.disabled : classes.autoCompleteInput,\n\t\t\t\tclearIndicator: classes.autoCompleteInput,\n\t\t\t\tpopupIndicator: disabled ? classes.disabled : classes.autoCompleteInput,\n\t\t\t\toption: classes.autoCompleteOption,\n\t\t\t\tgroupLabel: classes.autoCompleteOption,\n\t\t\t\tpopper: classes.autoCompleteOption,\n\t\t\t\tnoOptions: classes.autoCompleteOption,\n\t\t\t}}\n\t\t\tdisableClearable={disableClearable}\n\t\t\tsize=\"small\"\n\t\t\tclassName={classes.autoComplete}\n\t\t\tautoHighlight\n\t\t\tdisabled={disabled}\n\t\t\tonChange={(e, _value) => {\n\t\t\t\tconst value = {\n\t\t\t\t\t...propertyList,\n\t\t\t\t\t...getProperty(\n\t\t\t\t\t\tname,\n\t\t\t\t\t\t_value,\n\t\t\t\t\t\tparentField,\n\t\t\t\t\t\tpropertyList[parentField],\n\t\t\t\t\t\tmodelType === rest.modelType ||\n\t\t\t\t\t\t\tprops.editWidgetType === \"customField\"\n\t\t\t\t\t),\n\t\t\t\t};\n\t\t\t\tif (name === \"colSpan\") {\n\t\t\t\t\tvalue.colSpan = _value;\n\t\t\t\t}\n\t\t\t\tsetPropertyList(value);\n\t\t\t\tonChange(value, name);\n\t\t\t}}\n\t\t\tgetOptionLabel={(option) =>\n\t\t\t\tgetOptionLabel\n\t\t\t\t\t? getOptionLabel(option)\n\t\t\t\t\t: typeof option === \"object\"\n\t\t\t\t\t? option.text\n\t\t\t\t\t: option\n\t\t\t}\n\t\t\trenderOption={(option) =>\n\t\t\t\ttypeof option === \"object\" ? (\n\t\t\t\t\t<div key={index} value={option.value}>\n\t\t\t\t\t\t<i className={`fa ${option}`} style={{ marginRight: 4 }} />\n\t\t\t\t\t\t{translate(option.text)}\n\t\t\t\t\t</div>\n\t\t\t\t) : (\n\t\t\t\t\t<div key={index} value={option}>\n\t\t\t\t\t\t{color && <ColorTag color={option} />}\n\t\t\t\t\t\t<i className={`fa ${option}`} style={{ marginRight: 4 }} />\n\t\t\t\t\t\t<span>{translate(option)}</span>\n\t\t\t\t\t</div>\n\t\t\t\t)\n\t\t\t}\n\t\t\tvalue={value}\n\t\t\trenderInput={(params) => (\n\t\t\t\t<TextField\n\t\t\t\t\t{...params}\n\t\t\t\t\tlabel={translate(camleCaseString(title || name))}\n\t\t\t\t\tvariant=\"outlined\"\n\t\t\t\t\tclasses={{\n\t\t\t\t\t\troot: classes.selection,\n\t\t\t\t\t}}\n\t\t\t\t\tautoComplete=\"off\"\n\t\t\t\t\tinputProps={{\n\t\t\t\t\t\t...params.inputProps,\n\t\t\t\t\t\tautoComplete: \"new-password\", // disable autocomplete and autofill\n\t\t\t\t\t}}\n\t\t\t\t/>\n\t\t\t)}\n\t\t/>\n\t);\n}\n","import React, { useEffect, useState } from \"react\";\nimport classnames from \"classnames\";\nimport { makeStyles } from \"@material-ui/core/styles\";\nimport { TextField, Chip } from \"@material-ui/core\";\nimport Autocomplete from \"@material-ui/lab/Autocomplete\";\n\nconst useStyles = makeStyles(() => ({\n\tselect: {\n\t\twidth: \"100%\",\n\t\tbackground: \"white\",\n\t},\n\tinput: {\n\t\tfontSize: 13,\n\t},\n}));\n\nexport default function StaticSelect({\n\tvalue,\n\tonChange,\n\toptions = [],\n\tselectClassName,\n\tclassName,\n\toptionLabel,\n\toptionValue,\n\tname,\n\ttitle,\n}) {\n\tconst classes = useStyles();\n\tconst [val, setVal] = useState(value[optionValue] || value || \"\");\n\n\tconst onSelectUpdate = (e, value) => {\n\t\tonChange(value, e);\n\t\tsetVal(value);\n\t};\n\n\tconst renderChip = (value) => {\n\t\tlet option = options.find((option) => option[optionValue] === value);\n\t\tif (!option) return <React.Fragment>{value}</React.Fragment>;\n\t\treturn (\n\t\t\t<Chip\n\t\t\t\tlabel={option[optionLabel]}\n\t\t\t\tsize=\"small\"\n\t\t\t\tstyle={{\n\t\t\t\t\tbackground: option && option.color,\n\t\t\t\t\tcolor: (option && option.border) || \"white\",\n\t\t\t\t}}\n\t\t\t/>\n\t\t);\n\t};\n\n\tuseEffect(() => {\n\t\tif (optionValue) {\n\t\t\tsetVal(value[optionValue]);\n\t\t} else {\n\t\t\tsetVal(value);\n\t\t}\n\t}, [optionValue, value]);\n\n\treturn (\n\t\t<Autocomplete\n\t\t\tclassName={classnames(classes.select, className)}\n\t\t\tvalue={val || \"\"}\n\t\t\tonChange={onSelectUpdate}\n\t\t\trenderValue={renderChip}\n\t\t\tclasses={{\n\t\t\t\tselect: selectClassName,\n\t\t\t\tinput: classes.input\n\t\t\t}}\n\t\t\toptions={options}\n\t\t\tgetOptionLabel={(option) =>\n\t\t\t\ttypeof option === \"object\" ? option[optionValue] : option\n\t\t\t}\n\t\t\tlabel={title}\n\t\t\trenderOption={(option) => {\n\t\t\t\treturn !optionValue && option ? (\n\t\t\t\t\t<div>\n\t\t\t\t\t\t{name === \"icon\" && (\n\t\t\t\t\t\t\t<i className={`fa ${option}`} style={{ marginRight: 4 }} />\n\t\t\t\t\t\t)}\n\t\t\t\t\t\t{option}\n\t\t\t\t\t</div>\n\t\t\t\t) : (\n\t\t\t\t\t<div>\n\t\t\t\t\t\t<Chip\n\t\t\t\t\t\t\tkey={option[optionValue]}\n\t\t\t\t\t\t\tlabel={option[optionLabel]}\n\t\t\t\t\t\t\tsize=\"small\"\n\t\t\t\t\t\t\tstyle={{\n\t\t\t\t\t\t\t\tbackground: option && option.color,\n\t\t\t\t\t\t\t\tcolor: (option && option.border) || \"white\",\n\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t/>\n\t\t\t\t\t</div>\n\t\t\t\t);\n\t\t\t}}\n\t\t\trenderInput={(params) => (\n\t\t\t\t<TextField\n\t\t\t\t\t{...params}\n\t\t\t\t\tlabel={title}\n\t\t\t\t\tautoComplete=\"off\"\n\t\t\t\t/>\n\t\t\t)}\n\t\t/>\n\t);\n}\n\nStaticSelect.defaultProps = {\n\tvalue: {},\n\tonChange: () => {},\n};\n","import React, { useImperativeHandle, useRef } from \"react\";\nimport Chip from \"@material-ui/core/Chip\";\nimport IconButton from \"@material-ui/core/IconButton\";\nimport clsx from \"clsx\";\nimport { DragSource, DropTarget } from \"react-dnd\";\nimport { makeStyles } from \"@material-ui/core/styles\";\n\nimport TextField from \"@material-ui/core/TextField\";\nimport Select from \"./Select\";\nimport fontAwesomeList from \"../fa-icons\";\n\nconst ItemTypes = {\n\tCARD: \"card\",\n};\n\nexport const WKF_COLORS = [\n\t{ name: \"red\", title: \"Red\", color: \"#f44336\", border: \"#fff\" },\n\t{ name: \"pink\", title: \"Pink\", color: \"#e91e63\", border: \"#fff\" },\n\t{ name: \"purple\", title: \"Purple\", color: \"#9c27b0\", border: \"#fff\" },\n\t{\n\t\tname: \"deeppurple\",\n\t\ttitle: \"Deep Purple\",\n\t\tcolor: \"#673ab7\",\n\t\tborder: \"#fff\",\n\t},\n\t{ name: \"indigo\", title: \"Indigo\", color: \"#3f51b5\", border: \"#fff\" },\n\t{ name: \"blue\", title: \"Blue\", color: \"#2196f3\", border: \"#fff\" },\n\t{ name: \"lightblue\", title: \"Light Blue\", color: \"#03a9f4\", border: \"#fff\" },\n\t{ name: \"cyan\", title: \"Cyan\", color: \"#00bcd4\", border: \"#fff\" },\n\t{ name: \"teal\", title: \"Teal\", color: \"#009688\", border: \"#fff\" },\n\t{ name: \"green\", title: \"Green\", color: \"#4caf50\", border: \"#fff\" },\n\t{\n\t\tname: \"lightgreen\",\n\t\ttitle: \"Light Green\",\n\t\tcolor: \"#8bc34a\",\n\t\tborder: \"black\",\n\t},\n\t{ name: \"lime\", title: \"Lime\", color: \"#cddc39\", border: \"black\" },\n\t{ name: \"yellow\", title: \"Yellow\", color: \"#ffeb3b\", border: \"black\" },\n\t{ name: \"amber\", title: \"Amber\", color: \"#ffc107\", border: \"black\" },\n\t{ name: \"orange\", title: \"Orange\", color: \"#ff9800\", border: \"black\" },\n\t{\n\t\tname: \"deeporange\",\n\t\ttitle: \"Deep Orange\",\n\t\tcolor: \"#ff5722\",\n\t\tborder: \"#fff\",\n\t},\n\t{ name: \"brown\", title: \"Brown\", color: \"#795548\", border: \"#fff\" },\n\t{ name: \"grey\", title: \"Grey\", color: \"#9e9e9e\", border: \"black\" },\n\t{ name: \"bluegrey\", title: \"Blue Grey\", color: \"#607d8b\", border: \"#fff\" },\n\t{ name: \"black\", title: \"Black\", color: \"black\", border: \"#fff\" },\n\t{ name: \"white\", title: \"White\", color: \"whitesmoke\", border: \"black\" },\n];\n\nconst useStyles = makeStyles(() => ({\n\tcrudIcon: {\n\t\theight: \"1.5em\",\n\t\twidth: \"1.5em\",\n\t\tfontSize: 16,\n\t\tcursor: \"pointer\",\n\t\tcolor: \"#000\",\n\t\tdisplay: \"flex\",\n\t\talignItems: \"center\",\n\t\tjustifyContent: \"center\",\n\t},\n\ttextField: {\n\t\tfontSize: 13,\n\t},\n}));\n\nconst Content = React.forwardRef(\n\t(\n\t\t{\n\t\t\trow = {},\n\t\t\tindex,\n\t\t\tconnectDragSource,\n\t\t\tconnectDropTarget,\n\t\t\thandleRow,\n\t\t\tdeleteRow,\n\t\t\thandleChange,\n\t\t\tupdateSelection,\n\t\t\taddRow,\n\t\t\trowsCount,\n\t\t},\n\t\tref\n\t) => {\n\t\tconst elementRef = useRef(null);\n\t\tconnectDragSource(elementRef);\n\t\tconnectDropTarget(elementRef);\n\n\t\tuseImperativeHandle(ref, () => ({\n\t\t\tgetNode: () => elementRef.current,\n\t\t}));\n\n\t\tconst classes = useStyles();\n\t\treturn (\n\t\t\t<tr\n\t\t\t\tstyle={{ display: \"flex\", alignItems: \"center\" }}\n\t\t\t\tkey={row.id || index}\n\t\t\t\tref={elementRef}\n\t\t\t\tonKeyDown={(e) => {\n\t\t\t\t\tif (e.key === \"Enter\" && rowsCount - 1 === index) {\n\t\t\t\t\t\thandleRow(rowsCount-1)\n\t\t\t\t\t\taddRow();\n\t\t\t\t\t}\n\t\t\t\t}}\n\t\t\t>\n\t\t\t\t<td\n\t\t\t\t\tclassName=\"one-to-many-col one-to-many-col-border\"\n\t\t\t\t\tstyle={{ maxWidth: \"4%\", display: 'flex', justifyContent: \"center\" }}\n\t\t\t\t>\n\t\t\t\t\t<IconButton\n\t\t\t\t\t\tonClick={() => handleRow(row.id)}\n\t\t\t\t\t\taria-label=\"add\"\n\t\t\t\t\t\tsize=\"small\"\n\t\t\t\t\t\tclassName={classes.iconButton}\n\t\t\t\t\t\tdisabled={!updateSelection}\n\t\t\t\t\t>\n\t\t\t\t\t\t<i\n\t\t\t\t\t\t\tclassName={clsx(\"fa fa-pencil\", classes.crudIcon)}\n\t\t\t\t\t\t\tstyle={{\n\t\t\t\t\t\t\t\tcolor: updateSelection ? \"black\" : \"rgba(0, 0, 0, 0.26)\",\n\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t/>\n\t\t\t\t\t</IconButton>\n\t\t\t\t</td>\n\t\t\t\t<td\n\t\t\t\t\tclassName=\"one-to-many-col one-to-many-col-border\"\n\t\t\t\t\tstyle={{\n\t\t\t\t\t\tmaxWidth: \"22%\",\n\t\t\t\t\t\toverflow: \"hidden\",\n\t\t\t\t\t\twhiteSpace: \"nowrap\",\n\t\t\t\t\t\ttextOverflow: \"ellipsis\",\n\t\t\t\t\t}}\n\t\t\t\t>\n\t\t\t\t\t{row.editable ? (\n\t\t\t\t\t\t<TextField\n\t\t\t\t\t\t\tvalue={row?.value || \"\"}\n\t\t\t\t\t\t\tname=\"value\"\n\t\t\t\t\t\t\tonChange={(e) => {\n\t\t\t\t\t\t\t\thandleChange(row.id, \"value\", e.target.value);\n\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t\tstyle={{ width: \"100%\" }}\n\t\t\t\t\t\t\tInputProps={{\n\t\t\t\t\t\t\t\tclasses: { input: classes.textField },\n\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t\tautoFocus={true}\n\t\t\t\t\t\t/>\n\t\t\t\t\t) : (\n\t\t\t\t\t\trow.value\n\t\t\t\t\t)}\n\t\t\t\t</td>\n\t\t\t\t<td\n\t\t\t\t\tclassName=\"one-to-many-col one-to-many-col-border\"\n\t\t\t\t\tstyle={{\n\t\t\t\t\t\tmaxWidth: \"22%\",\n\t\t\t\t\t\toverflow: \"hidden\",\n\t\t\t\t\t\twhiteSpace: \"nowrap\",\n\t\t\t\t\t\ttextOverflow: \"ellipsis\",\n\t\t\t\t\t}}\n\t\t\t\t>\n\t\t\t\t\t{row.editable ? (\n\t\t\t\t\t\t<TextField\n\t\t\t\t\t\t\tvalue={row?.title || \"\"}\n\t\t\t\t\t\t\tname=\"title\"\n\t\t\t\t\t\t\tonChange={(e) => {\n\t\t\t\t\t\t\t\thandleChange(row.id, \"title\", e.target.value);\n\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t\tstyle={{ width: \"100%\" }}\n\t\t\t\t\t\t\tInputProps={{\n\t\t\t\t\t\t\t\tclasses: { input: classes.textField },\n\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t/>\n\t\t\t\t\t) : (\n\t\t\t\t\t\trow.title\n\t\t\t\t\t)}\n\t\t\t\t</td>\n\t\t\t\t<td\n\t\t\t\t\tclassName={\"one-to-many-col one-to-many-col-border\"}\n\t\t\t\t\tstyle={{ overflow: \"hidden\", maxWidth: \"22%\" }}\n\t\t\t\t>\n\t\t\t\t\t{row.editable ? (\n\t\t\t\t\t\t<Select\n\t\t\t\t\t\t\tname=\"color\"\n\t\t\t\t\t\t\tonChange={(value) => {\n\t\t\t\t\t\t\t\thandleChange(row.id, \"color\", value);\n\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t\tvalue={row?.color || \"\"}\n\t\t\t\t\t\t\toptions={WKF_COLORS}\n\t\t\t\t\t\t\toptionLabel=\"title\"\n\t\t\t\t\t\t\toptionValue=\"name\"\n\t\t\t\t\t\t/>\n\t\t\t\t\t) : (\n\t\t\t\t\t\trow?.color && (\n\t\t\t\t\t\t\t<Chip\n\t\t\t\t\t\t\t\tlabel={row.color?.title}\n\t\t\t\t\t\t\t\tsize=\"small\"\n\t\t\t\t\t\t\t\tstyle={{\n\t\t\t\t\t\t\t\t\tbackground: row.color?.color,\n\t\t\t\t\t\t\t\t\tcolor: row.color?.border || \"white\",\n\t\t\t\t\t\t\t\t\tfontWeight: 800,\n\t\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t)\n\t\t\t\t\t)}\n\t\t\t\t</td>\n\t\t\t\t<td\n\t\t\t\t\tclassName=\"one-to-many-col one-to-many-col-border\"\n\t\t\t\t\tstyle={{\n\t\t\t\t\t\tmaxWidth: \"22%\",\n\t\t\t\t\t\toverflow: \"hidden\",\n\t\t\t\t\t\twhiteSpace: \"nowrap\",\n\t\t\t\t\t\ttextOverflow: \"ellipsis\",\n\t\t\t\t\t}}\n\t\t\t\t>\n\t\t\t\t\t{row.editable ? (\n\t\t\t\t\t\t<Select\n\t\t\t\t\t\t\tname=\"icon\"\n\t\t\t\t\t\t\tonChange={(value) => {\n\t\t\t\t\t\t\t\thandleChange(row.id, \"icon\", value);\n\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t\tvalue={row?.icon || \"\"}\n\t\t\t\t\t\t\toptions={fontAwesomeList}\n\t\t\t\t\t\t/>\n\t\t\t\t\t) : (\n\t\t\t\t\t\trow.icon\n\t\t\t\t\t)}\n\t\t\t\t</td>\n\t\t\t\t<td\n\t\t\t\t\tclassName=\"one-to-many-col one-to-many-col-border\"\n\t\t\t\t\tstyle={{ maxWidth: \"4%\" }}\n\t\t\t\t>\n\t\t\t\t\t<IconButton\n\t\t\t\t\t\tonClick={() => deleteRow(row.id)}\n\t\t\t\t\t\taria-label=\"add\"\n\t\t\t\t\t\tsize=\"small\"\n\t\t\t\t\t\tclassName={classes.iconButton}\n\t\t\t\t\t\tdisabled={!updateSelection}\n\t\t\t\t\t>\n\t\t\t\t\t\t<i\n\t\t\t\t\t\t\tclassName={clsx(\"fa fa-trash-o\", classes.crudIcon)}\n\t\t\t\t\t\t\tstyle={{\n\t\t\t\t\t\t\t\tcolor: updateSelection ? \"black\" : \"rgba(0, 0, 0, 0.26)\",\n\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t/>\n\t\t\t\t\t</IconButton>\n\t\t\t\t</td>\n\t\t\t\t<td\n\t\t\t\t\tclassName=\"one-to-many-col one-to-many-col-border\"\n\t\t\t\t\tstyle={{ maxWidth: \"4%\" }}\n\t\t\t\t>\n\t\t\t\t\t<IconButton\n\t\t\t\t\t\tonClick={() => handleRow(row.id)}\n\t\t\t\t\t\taria-label=\"add\"\n\t\t\t\t\t\tsize=\"small\"\n\t\t\t\t\t\tclassName={classes.iconButton}\n\t\t\t\t\t\tdisabled={!updateSelection}\n\t\t\t\t\t>\n\t\t\t\t\t\t<i\n\t\t\t\t\t\t\tclassName={clsx(\"fa fa-bars\", classes.crudIcon)}\n\t\t\t\t\t\t\tstyle={{\n\t\t\t\t\t\t\t\tcolor: updateSelection ? \"black\" : \"rgba(0, 0, 0, 0.26)\",\n\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t/>\n\t\t\t\t\t</IconButton>\n\t\t\t\t</td>\n\t\t\t</tr>\n\t\t);\n\t}\n);\n\nexport default DropTarget(\n\tItemTypes.CARD,\n\t{\n\t\thover(props, monitor, component) {\n\t\t\tif (!component) {\n\t\t\t\treturn null;\n\t\t\t}\n\t\t\tconst node = component.getNode();\n\t\t\tif (!node) {\n\t\t\t\treturn null;\n\t\t\t}\n\t\t\tconst dragIndex = monitor.getItem().index;\n\t\t\tconst hoverIndex = props.index;\n\t\t\tif (dragIndex === hoverIndex) {\n\t\t\t\treturn;\n\t\t\t}\n\t\t\tconst hoverBoundingRect = node.getBoundingClientRect();\n\t\t\tconst hoverMiddleY =\n\t\t\t\t(hoverBoundingRect.bottom - hoverBoundingRect.top) / 2;\n\t\t\tconst clientOffset = monitor.getClientOffset();\n\t\t\tconst hoverClientY = clientOffset.y - hoverBoundingRect.top;\n\n\t\t\tif (dragIndex < hoverIndex && hoverClientY < hoverMiddleY) {\n\t\t\t\treturn;\n\t\t\t}\n\t\t\tif (dragIndex > hoverIndex && hoverClientY > hoverMiddleY) {\n\t\t\t\treturn;\n\t\t\t}\n\t\t\tprops.moveCard(dragIndex, hoverIndex);\n\t\t\tmonitor.getItem().index = hoverIndex;\n\t\t},\n\t},\n\t(connect) => ({\n\t\tconnectDropTarget: connect.dropTarget(),\n\t})\n)(\n\tDragSource(\n\t\tItemTypes.CARD,\n\t\t{\n\t\t\tbeginDrag: (props) => ({\n\t\t\t\tid: props.id,\n\t\t\t\tindex: props.index,\n\t\t\t}),\n\t\t},\n\t\t(connect, monitor) => ({\n\t\t\tconnectDragSource: connect.dragSource(),\n\t\t\tisDragging: monitor.isDragging(),\n\t\t})\n\t)(Content)\n);\n","import React, { useState } from \"react\";\nimport Checkbox from \"@material-ui/core/Checkbox\";\nimport { makeStyles } from \"@material-ui/core\";\n\nimport {\n\tcamleCaseString,\n\ttranslate,\n\tgetProperty,\n\tgetPropertyValue,\n} from \"../../utils\";\nimport DialogConfirmation from \"../../Toolbar/DeleteConfirmation\";\n\nconst useStyles = makeStyles(() => ({\n\troot: {\n\t\tcolor: \"#0275d8 !important\",\n\t\t\"&$checked\": {\n\t\t\tcolor: \"#0275d8 !important\",\n\t\t},\n\t},\n}));\n\nexport default function CheckboxField(_props) {\n\tconst [openAlert, setAlertOpen] = useState(false);\n\tlet {\n\t\tname,\n\t\ttitle,\n\t\tparentField,\n\t\tdefaultValue,\n\t\tuncheckDialog,\n\t\talertMessage,\n\t\t...rest\n\t} = _props.field;\n\tconst { props, classNames, handleDialogOk } = _props;\n\tconst classes = useStyles();\n\tconst {\n\t\tpropertyList,\n\t\tsetPropertyList,\n\t\tonChange,\n\t\tmodelType,\n\t\teditWidgetType,\n\t\tmetaFieldStore,\n\t} = props;\n\tlet _value = getPropertyValue(\n\t\tpropertyList,\n\t\tname,\n\t\tparentField,\n\t\tdefaultValue,\n\t\t!(modelType !== rest.modelType) || editWidgetType === \"customField\"\n\t);\n\tlet fieldValue = Boolean(_value ? !(_value === \"false\") : _value);\n\tif (rest.getValue) {\n\t\tfieldValue = rest.getValue(propertyList);\n\t}\n\tlet disabled = false;\n\tif (rest.isDisabled) {\n\t\tdisabled = rest.isDisabled({\n\t\t\tproperties: propertyList,\n\t\t\tmetaFieldStore,\n\t\t\teditWidgetType,\n\t\t\tmodelType,\n\t\t});\n\t}\n\ttitle = translate(camleCaseString(title || name));\n\n\tconst handleOnChange = () => {\n\t\tif (uncheckDialog) {\n\t\t\tsetAlertOpen(false);\n\t\t}\n\t\tsetPropertyList({\n\t\t\t...propertyList,\n\t\t\t...(rest.change ? rest.change(!fieldValue, propertyList) : {}),\n\t\t\t...getProperty(\n\t\t\t\tname,\n\t\t\t\t!fieldValue,\n\t\t\t\tparentField,\n\t\t\t\tpropertyList[parentField],\n\t\t\t\t!(modelType !== rest.modelType) || editWidgetType === \"customField\"\n\t\t\t),\n\t\t});\n\t\tonChange(\n\t\t\t{\n\t\t\t\t...propertyList,\n\t\t\t\t...(rest.change ? rest.change(!fieldValue, propertyList) : {}),\n\t\t\t\t...getProperty(\n\t\t\t\t\tname,\n\t\t\t\t\t!fieldValue,\n\t\t\t\t\tparentField,\n\t\t\t\t\tpropertyList[parentField],\n\t\t\t\t\t!(modelType !== rest.modelType) || editWidgetType === \"customField\"\n\t\t\t\t),\n\t\t\t},\n\t\t\tname\n\t\t);\n\t\thandleDialogOk();\n\t};\n\n\treturn (\n\t\t<React.Fragment>\n\t\t\t<Checkbox\n\t\t\t\tclassName={classNames}\n\t\t\t\tchecked={fieldValue}\n\t\t\t\tdisabled={disabled}\n\t\t\t\tclasses={{\n\t\t\t\t\troot: classes.root,\n\t\t\t\t}}\n\t\t\t\tonChange={() => {\n\t\t\t\t\tif (\n\t\t\t\t\t\tuncheckDialog &&\n\t\t\t\t\t\tfieldValue &&\n\t\t\t\t\t\tpropertyList &&\n\t\t\t\t\t\tpropertyList.selectionText\n\t\t\t\t\t) {\n\t\t\t\t\t\tsetAlertOpen(true);\n\t\t\t\t\t\treturn;\n\t\t\t\t\t}\n\t\t\t\t\thandleOnChange();\n\t\t\t\t}}\n\t\t\t\tvalue={propertyList[name]}\n\t\t\t/>\n\t\t\t{openAlert && (\n\t\t\t\t<DialogConfirmation\n\t\t\t\t\topen={openAlert}\n\t\t\t\t\tmessage={alertMessage}\n\t\t\t\t\tonClose={() => setAlertOpen(false)}\n\t\t\t\t\tonOk={handleOnChange}\n\t\t\t\t\ttitle=\"Confirm\"\n\t\t\t\t/>\n\t\t\t)}\n\t\t</React.Fragment>\n\t);\n}\n","import React, { useState, useEffect } from \"react\";\nimport { makeStyles } from \"@material-ui/core/styles\";\nimport SelectComponent from \"../../components/SelectComponent\";\n\nimport { IconButton } from \"@material-ui/core\";\nimport clsx from \"clsx\";\nimport Button from \"@material-ui/core/Button\";\nimport Dialog from \"@material-ui/core/Dialog\";\nimport DialogTitle from \"@material-ui/core/DialogTitle\";\nimport DialogContent from \"@material-ui/core/DialogContent\";\nimport DialogActions from \"@material-ui/core/DialogActions\";\nimport DialogContentText from \"@material-ui/core/DialogContentText\";\nimport FormControlLabel from \"@material-ui/core/FormControlLabel\";\nimport _ from \"lodash\";\nimport CardContent from \"@material-ui/core/CardContent\";\nimport { useStore } from \"../../store/context\";\nimport { getSelectionText } from \"../../Toolbar/api\";\nimport { translate } from \"../../utils\";\nimport Content from \"./Content\";\nimport CheckboxField from \"./CheckboxField\";\nimport { MODEL_TYPE } from \"../../constants\";\n\nexport const WKF_COLORS = [\n\t{ name: \"red\", title: \"Red\", color: \"#f44336\", border: \"#fff\" },\n\t{ name: \"pink\", title: \"Pink\", color: \"#e91e63\", border: \"#fff\" },\n\t{ name: \"purple\", title: \"Purple\", color: \"#9c27b0\", border: \"#fff\" },\n\t{\n\t\tname: \"deeppurple\",\n\t\ttitle: \"Deep Purple\",\n\t\tcolor: \"#673ab7\",\n\t\tborder: \"#fff\",\n\t},\n\t{ name: \"indigo\", title: \"Indigo\", color: \"#3f51b5\", border: \"#fff\" },\n\t{ name: \"blue\", title: \"Blue\", color: \"#2196f3\", border: \"#fff\" },\n\t{ name: \"lightblue\", title: \"Light Blue\", color: \"#03a9f4\", border: \"#fff\" },\n\t{ name: \"cyan\", title: \"Cyan\", color: \"#00bcd4\", border: \"#fff\" },\n\t{ name: \"teal\", title: \"Teal\", color: \"#009688\", border: \"#fff\" },\n\t{ name: \"green\", title: \"Green\", color: \"#4caf50\", border: \"#fff\" },\n\t{\n\t\tname: \"lightgreen\",\n\t\ttitle: \"Light Green\",\n\t\tcolor: \"#8bc34a\",\n\t\tborder: \"black\",\n\t},\n\t{ name: \"lime\", title: \"Lime\", color: \"#cddc39\", border: \"black\" },\n\t{ name: \"yellow\", title: \"Yellow\", color: \"#ffeb3b\", border: \"black\" },\n\t{ name: \"amber\", title: \"Amber\", color: \"#ffc107\", border: \"black\" },\n\t{ name: \"orange\", title: \"Orange\", color: \"#ff9800\", border: \"black\" },\n\t{\n\t\tname: \"deeporange\",\n\t\ttitle: \"Deep Orange\",\n\t\tcolor: \"#ff5722\",\n\t\tborder: \"#fff\",\n\t},\n\t{ name: \"brown\", title: \"Brown\", color: \"#795548\", border: \"#fff\" },\n\t{ name: \"grey\", title: \"Grey\", color: \"#9e9e9e\", border: \"black\" },\n\t{ name: \"bluegrey\", title: \"Blue Grey\", color: \"#607d8b\", border: \"#fff\" },\n\t{ name: \"black\", title: \"Black\", color: \"black\", border: \"#fff\" },\n\t{ name: \"white\", title: \"White\", color: \"whitesmoke\", border: \"black\" },\n];\n\nconst useStyles = makeStyles(() => ({\n\tpaper: {\n\t\tminWidth: \"50%\",\n\t\twidth: \"50%\",\n\t\tmaxWidth: \"100%\",\n\t\tresize: \"auto\",\n\t},\n\talertPaper: {\n\t\tminWidth: 300,\n\t},\n\tcheckbox: {\n\t\tcolor: \"#0275d8 !important\",\n\t\t\"&$checked\": {\n\t\t\tcolor: \"#0275d8 !important\",\n\t\t},\n\t},\n\tbutton: {\n\t\ttextTransform: \"none\",\n\t\tbackgroundColor: \"#0275d8\",\n\t\tborderColor: \"#0275d8\",\n\t\tcolor: \"#fff\",\n\t\t\"&:hover\": {\n\t\t\tbackgroundColor: \"#0275d8\",\n\t\t\tborderColor: \"#0275d8\",\n\t\t\tcolor: \"#fff\",\n\t\t},\n\t},\n\tcrudIcon: {\n\t\theight: \"1.5em\",\n\t\twidth: \"1.5em\",\n\t\tfontSize: 16,\n\t\tcursor: \"pointer\",\n\t\tcolor: \"#fff\",\n\t\tdisplay: \"flex\",\n\t\talignItems: \"center\",\n\t\tjustifyContent: \"center\",\n\t},\n\tcontent: {\n\t\toverflow: \"auto\",\n\t\tpadding: \"0px 8px 16px 8px\",\n\t},\n\tdialogContent: {\n\t\tdisplay: \"flex\",\n\t\tflexDirection: \"column\",\n\t},\n\tok: {\n\t\tbackgroundColor: \"#0275d8\",\n\t\tborderColor: \"#0275d8\",\n\t\tcolor: \"#fff\",\n\t\t\"&:hover\": {\n\t\t\tbackgroundColor: \"#0275d8\",\n\t\t\tborderColor: \"#0275d8\",\n\t\t\tcolor: \"#fff\",\n\t\t},\n\t},\n\tbtn: {\n\t\ttextTransform: \"none\",\n\t},\n\tdialogActions: {\n\t\tpaddingBottom: 16,\n\t},\n\troot: {\n\t\tdisplay: \"flex\",\n\t\tjustifyContent: \"space-between\",\n\t\talignItems: \"flex-start\",\n\t},\n\ticonButton: {\n\t\tmarginTop: 25,\n\t\tpaddingLeft: 10,\n\t},\n\ticon: {\n\t\tcolor: \"white\",\n\t},\n\tlabel: {\n\t\tfontSize: 13,\n\t},\n}));\n\nexport default function SelectionWidget(_props) {\n\tconst { field, index, props, error } = _props;\n\tconst [rows, setRows] = useState([]);\n\tconst [openGrid, setOpenGrid] = useState(false);\n\tconst [openAlert, setAlertOpen] = useState(false);\n\tconst classes = useStyles();\n\tconst { propertyList, setPropertyList, onChange } = props;\n\tconst { state, update } = useStore();\n\tconst { editWidget } = state;\n\tconst { selection, selectionText, updateSelection, isSelectionField } =\n\t\tpropertyList;\n\n\tconst handleChange = (id, name, value) => {\n\t\tsetRows((rows) =>\n\t\t\trows.map((row) => (row.id === id ? { ...row, [name]: value } : row))\n\t\t);\n\t};\n\n\tconst updateWidget = (rows) => {\n\t\tlet selectionText = \"\";\n\t\tif (rows?.length <= 0) {\n\t\t\tselectionText = null;\n\t\t} else {\n\t\t\trows.forEach((row, i) => {\n\t\t\t\tif (row.title) {\n\t\t\t\t\tselectionText += `${i > 0 ? \"\\n\" : \"\"}${row.title}:${row.value}`;\n\t\t\t\t}\n\t\t\t\tif (row.color && row.color.name) {\n\t\t\t\t\tselectionText += \"\\ncolor:\" + row.color?.name;\n\t\t\t\t}\n\t\t\t\tif (row.icon) {\n\t\t\t\t\tselectionText += \"\\nicon:\" + row.icon;\n\t\t\t\t}\n\t\t\t});\n\t\t}\n\t\tsetPropertyList((propertyList) => ({\n\t\t\t...propertyList,\n\t\t\tselectionText,\n\t\t}));\n\t\tonChange(\n\t\t\t{\n\t\t\t\t...propertyList,\n\t\t\t\tselectionText,\n\t\t\t},\n\t\t\t\"selectionText\"\n\t\t);\n\t};\n\n\tconst addRow = () => {\n\t\tsetRows((rows) => {\n\t\t\treturn [\n\t\t\t\t...rows?.map((row) => {\n\t\t\t\t\treturn {\n\t\t\t\t\t\t...row,\n\t\t\t\t\t\teditable: false,\n\t\t\t\t\t};\n\t\t\t\t}),\n\t\t\t\t{\n\t\t\t\t\ttitle: \"\",\n\t\t\t\t\tvalue: \"\",\n\t\t\t\t\tcolor: null,\n\t\t\t\t\ticon: null,\n\t\t\t\t\tid: _.uniqueId(),\n\t\t\t\t\teditable: true,\n\t\t\t\t},\n\t\t\t];\n\t\t});\n\t};\n\n\tconst deleteRow = (id) => {\n\t\tsetRows((rows) => rows.filter((row) => row?.id !== id));\n\t};\n\n\tconst moveCard = React.useCallback(\n\t\t(dragIndex, hoverIndex) => {\n\t\t\tif (!updateSelection) return;\n\t\t\tif (dragIndex <= -1 || hoverIndex <= -1) {\n\t\t\t\treturn;\n\t\t\t}\n\t\t\tconst cloneRows = [...(rows || [])];\n\t\t\tlet dragCard = cloneRows[dragIndex];\n\t\t\tcloneRows[dragIndex] = cloneRows[hoverIndex];\n\t\t\tcloneRows[hoverIndex] = dragCard;\n\t\t\tsetRows(cloneRows);\n\t\t},\n\t\t[rows, updateSelection]\n\t);\n\n\tconst handleRow = (id) => {\n\t\tsetRows((rows) =>\n\t\t\trows.map((row) =>\n\t\t\t\trow.id === id\n\t\t\t\t\t? { ...row, editable: !row.editable || false }\n\t\t\t\t\t: { ...row, editable: false }\n\t\t\t)\n\t\t);\n\t};\n\n\tconst saveRow = () => {\n\t\tsetRows((rows) =>\n\t\t\trows.map((row) => (row.editable ? { ...row, editable: false } : row))\n\t\t);\n\t};\n\n\tconst handleOk = () => {\n\t\tif (updateSelection && !rows.length) {\n\t\t\tsetAlertOpen(true);\n\t\t\treturn;\n\t\t}\n\t\tconst isError = rows.findIndex((r) => !r.title);\n\t\tif (isError > -1) {\n\t\t\tsetAlertOpen(true);\n\t\t\treturn;\n\t\t}\n\t\tupdateWidget(rows);\n\t\tsetOpenGrid(false);\n\t\tvalidateErrors();\n\t};\n\n\tconst handleDialogOk = () => {\n\t\tif (!selection && !updateSelection) {\n\t\t\tsetRows([]);\n\t\t}\n\t};\n\n\tconst createRows = React.useCallback((selectionText) => {\n\t\tconst selection = selectionText?.trim().split(\"\\n\");\n\t\tlet rows = [];\n\t\tfor (let i = 0; i < selection?.length; i++) {\n\t\t\tconst option = selection[i];\n\t\t\tconst optionKeyValue = option.split(\":\");\n\t\t\tconst title = optionKeyValue[0];\n\t\t\tconst titleLower = title?.toLowerCase();\n\t\t\tlet value = optionKeyValue[1];\n\t\t\tif (titleLower && titleLower !== \"color\" && titleLower !== \"icon\") {\n\t\t\t\trows.push({\n\t\t\t\t\tid: _.uniqueId(),\n\t\t\t\t\ttitle: title,\n\t\t\t\t\tvalue: value || title,\n\t\t\t\t});\n\t\t\t} else if (titleLower === \"color\" || titleLower === \"icon\") {\n\t\t\t\tlet row = rows.pop();\n\t\t\t\tvalue =\n\t\t\t\t\ttitle === \"color\" ? WKF_COLORS.find((f) => f.name === value) : value;\n\t\t\t\trow = { ...row, [title]: value };\n\t\t\t\trows.push(row);\n\t\t\t}\n\t\t}\n\t\tsetRows(rows);\n\t}, []);\n\n\tconst addOptions = async () => {\n\t\tsetOpenGrid(true);\n\t\tif (!updateSelection && selection) {\n\t\t\tconst res = await getSelectionText({ name: selection });\n\t\t\tcreateRows(res);\n\t\t} else if (selectionText) {\n\t\t\tcreateRows(selectionText);\n\t\t} else {\n\t\t\tsetRows([]);\n\t\t}\n\t};\n\n\tconst validateErrors = React.useCallback(() => {\n\t\tif (!selectionText && !selection && editWidget && isSelectionField) {\n\t\t\tupdate((draft) => {\n\t\t\t\tdraft.errorList[editWidget] = {\n\t\t\t\t\tselection: \"Selection or selection options are required\",\n\t\t\t\t};\n\t\t\t});\n\t\t} else {\n\t\t\tupdate((draft) => {\n\t\t\t\tdelete draft.errorList[editWidget];\n\t\t\t});\n\t\t}\n\t}, [selection, editWidget, selectionText, isSelectionField, update]);\n\n\tuseEffect(() => {\n\t\tvalidateErrors();\n\t}, [validateErrors]);\n\n\tuseEffect(() => {\n\t\tif (!selectionText) {\n\t\t\tsetRows([]);\n\t\t\treturn;\n\t\t}\n\t\tcreateRows(selectionText);\n\t}, [selectionText, createRows]);\n\n\treturn (\n\t\t<div className={classes.root}>\n\t\t\t<SelectComponent\n\t\t\t\tfield={field}\n\t\t\t\tkey={index}\n\t\t\t\tindex={index}\n\t\t\t\tprops={props}\n\t\t\t\terror={error}\n\t\t\t/>\n\t\t\t<IconButton\n\t\t\t\tonClick={addOptions}\n\t\t\t\taria-label=\"add\"\n\t\t\t\tsize=\"small\"\n\t\t\t\tclassName={classes.iconButton}\n\t\t\t>\n\t\t\t\t<i\n\t\t\t\t\tclassName={clsx(\n\t\t\t\t\t\tpropertyList[field.name] || selectionText\n\t\t\t\t\t\t\t? \"fa fa-pencil\"\n\t\t\t\t\t\t\t: \"fa fa-plus\",\n\t\t\t\t\t\tclasses.icon\n\t\t\t\t\t)}\n\t\t\t\t/>\n\t\t\t</IconButton>\n\t\t\t{openGrid && (\n\t\t\t\t<Dialog\n\t\t\t\t\topen={openGrid}\n\t\t\t\t\tonClose={(_, reason) => {\n\t\t\t\t\t\tif (reason !== \"backdropClick\") {\n\t\t\t\t\t\t\tsetOpenGrid(false);\n\t\t\t\t\t\t}\n\t\t\t\t\t}}\n\t\t\t\t\tclasses={{\n\t\t\t\t\t\tpaper: classes.paper,\n\t\t\t\t\t}}\n\t\t\t\t>\n\t\t\t\t\t<DialogTitle>{translate(\"Selection\")}</DialogTitle>\n\t\t\t\t\t<DialogContent className={classes.dialogContent}>\n\t\t\t\t\t\t<CardContent className={classes.content}>\n\t\t\t\t\t\t\t<div>\n\t\t\t\t\t\t\t\t<FormControlLabel\n\t\t\t\t\t\t\t\t\tclasses={{\n\t\t\t\t\t\t\t\t\t\tlabel: classes.label,\n\t\t\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t\t\t\tcontrol={\n\t\t\t\t\t\t\t\t\t\t<CheckboxField\n\t\t\t\t\t\t\t\t\t\t\tfield={{\n\t\t\t\t\t\t\t\t\t\t\t\tname: \"updateSelection\",\n\t\t\t\t\t\t\t\t\t\t\t\tdependModelType: MODEL_TYPE.CUSTOM,\n\t\t\t\t\t\t\t\t\t\t\t\ttitle: \"New selection\",\n\t\t\t\t\t\t\t\t\t\t\t\tuncheckDialog: true,\n\t\t\t\t\t\t\t\t\t\t\t\talertMessage:\n\t\t\t\t\t\t\t\t\t\t\t\t\t\"All options and selection will be lost. Are you sure ?\",\n\t\t\t\t\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t\t\t\t\t\thandleDialogOk={handleDialogOk}\n\t\t\t\t\t\t\t\t\t\t\tprops={props}\n\t\t\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\tlabel={translate(\"New selection\")}\n\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t<div className=\"one-to-many-header\">\n\t\t\t\t\t\t\t\t\t<span>{translate(\"Selection items\")}</span>\n\t\t\t\t\t\t\t\t\t<Button\n\t\t\t\t\t\t\t\t\t\tonClick={addRow}\n\t\t\t\t\t\t\t\t\t\taria-label=\"add\"\n\t\t\t\t\t\t\t\t\t\tsize=\"small\"\n\t\t\t\t\t\t\t\t\t\tclassName={classes.btn}\n\t\t\t\t\t\t\t\t\t\tdisabled={!updateSelection}\n\t\t\t\t\t\t\t\t\t\tstartIcon={\n\t\t\t\t\t\t\t\t\t\t\t<i\n\t\t\t\t\t\t\t\t\t\t\t\tclassName={clsx(\"fa fa-plus\", classes.crudIcon)}\n\t\t\t\t\t\t\t\t\t\t\t\tstyle={{\n\t\t\t\t\t\t\t\t\t\t\t\t\tcolor: updateSelection\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t? \"black\"\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t: \"rgba(0, 0, 0, 0.26)\",\n\t\t\t\t\t\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t\t{translate(\"New\")}\n\t\t\t\t\t\t\t\t\t</Button>\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t<table>\n\t\t\t\t\t\t\t\t\t<tbody\n\t\t\t\t\t\t\t\t\t\tclassName=\"one-to-many-row\"\n\t\t\t\t\t\t\t\t\t\tstyle={{ textAlign: \"left\" }}\n\t\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t\t<tr style={{ display: \"flex\", alignItems: \"center\" }}>\n\t\t\t\t\t\t\t\t\t\t\t{[\n\t\t\t\t\t\t\t\t\t\t\t\t\"\\u00A0\",\n\t\t\t\t\t\t\t\t\t\t\t\t\"Title\",\n\t\t\t\t\t\t\t\t\t\t\t\t\"Value\",\n\t\t\t\t\t\t\t\t\t\t\t\t\"Color\",\n\t\t\t\t\t\t\t\t\t\t\t\t\"Icon\",\n\t\t\t\t\t\t\t\t\t\t\t\t\"\\u00A0\",\n\t\t\t\t\t\t\t\t\t\t\t\t\"\\u00A0\",\n\t\t\t\t\t\t\t\t\t\t\t].map((item, i) => (\n\t\t\t\t\t\t\t\t\t\t\t\t<td\n\t\t\t\t\t\t\t\t\t\t\t\t\tclassName=\"one-to-many-col one-to-many-col-border\"\n\t\t\t\t\t\t\t\t\t\t\t\t\tkey={`td_${i}`}\n\t\t\t\t\t\t\t\t\t\t\t\t\tstyle={{\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tborderBottom: \"1px solid #ddd\",\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tmaxWidth: item === \"\\u00A0\" ? \"4%\" : \"22%\",\n\t\t\t\t\t\t\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t\t\t\t\t{item}\n\t\t\t\t\t\t\t\t\t\t\t\t</td>\n\t\t\t\t\t\t\t\t\t\t\t))}\n\t\t\t\t\t\t\t\t\t\t</tr>\n\t\t\t\t\t\t\t\t\t\t{rows?.map((row, i) => (\n\t\t\t\t\t\t\t\t\t\t\t<Content\n\t\t\t\t\t\t\t\t\t\t\t\tkey={row.id}\n\t\t\t\t\t\t\t\t\t\t\t\tindex={i}\n\t\t\t\t\t\t\t\t\t\t\t\tid={row.id}\n\t\t\t\t\t\t\t\t\t\t\t\thandleRow={handleRow}\n\t\t\t\t\t\t\t\t\t\t\t\tdeleteRow={deleteRow}\n\t\t\t\t\t\t\t\t\t\t\t\tsaveRow={saveRow}\n\t\t\t\t\t\t\t\t\t\t\t\trow={row}\n\t\t\t\t\t\t\t\t\t\t\t\tmoveCard={moveCard}\n\t\t\t\t\t\t\t\t\t\t\t\thandleChange={handleChange}\n\t\t\t\t\t\t\t\t\t\t\t\tupdateSelection={updateSelection}\n\t\t\t\t\t\t\t\t\t\t\t\taddRow={addRow}\n\t\t\t\t\t\t\t\t\t\t\t\trowsCount={rows?.length}\n\t\t\t\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t\t\t))}\n\t\t\t\t\t\t\t\t\t</tbody>\n\t\t\t\t\t\t\t\t</table>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t</CardContent>\n\t\t\t\t\t</DialogContent>\n\t\t\t\t\t<DialogActions className={classes.dialogActions}>\n\t\t\t\t\t\t<Button\n\t\t\t\t\t\t\tonClick={() => {\n\t\t\t\t\t\t\t\tsetRows([]);\n\t\t\t\t\t\t\t\tsetOpenGrid(false);\n\t\t\t\t\t\t\t\tvalidateErrors();\n\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t\tclassName={classes.btn}\n\t\t\t\t\t\t\tvariant=\"outlined\"\n\t\t\t\t\t\t>\n\t\t\t\t\t\t\t{translate(\"Close\")}\n\t\t\t\t\t\t</Button>\n\t\t\t\t\t\t<Button\n\t\t\t\t\t\t\tonClick={handleOk}\n\t\t\t\t\t\t\tautoFocus\n\t\t\t\t\t\t\tclassName={clsx(classes.btn, classes.ok)}\n\t\t\t\t\t\t>\n\t\t\t\t\t\t\t{translate(\"OK\")}\n\t\t\t\t\t\t</Button>\n\t\t\t\t\t</DialogActions>\n\t\t\t\t</Dialog>\n\t\t\t)}\n\t\t\t{openAlert && (\n\t\t\t\t<Dialog\n\t\t\t\t\topen={openAlert}\n\t\t\t\t\tonClose={() => setAlertOpen(false)}\n\t\t\t\t\taria-labelledby=\"alert-dialog-title\"\n\t\t\t\t\taria-describedby=\"alert-dialog-description\"\n\t\t\t\t\tclasses={{\n\t\t\t\t\t\tpaper: classes.alertPaper,\n\t\t\t\t\t}}\n\t\t\t\t>\n\t\t\t\t\t<DialogTitle id=\"alert-dialog-title\">\n\t\t\t\t\t\t{translate(\"Alert\")}\n\t\t\t\t\t</DialogTitle>\n\t\t\t\t\t<DialogContent>\n\t\t\t\t\t\t<DialogContentText id=\"alert-dialog-description\">\n\t\t\t\t\t\t\t{translate(\"Value is required\")}\n\t\t\t\t\t\t</DialogContentText>\n\t\t\t\t\t</DialogContent>\n\t\t\t\t\t<DialogActions>\n\t\t\t\t\t\t<Button\n\t\t\t\t\t\t\tonClick={() => setAlertOpen(false)}\n\t\t\t\t\t\t\tcolor=\"primary\"\n\t\t\t\t\t\t\tclassName={classes.button}\n\t\t\t\t\t\t>\n\t\t\t\t\t\t\t{translate(\"OK\")}\n\t\t\t\t\t\t</Button>\n\t\t\t\t\t</DialogActions>\n\t\t\t\t</Dialog>\n\t\t\t)}\n\t\t</div>\n\t);\n}\n","import React from \"react\";\nimport SelectComponent from \"../../components/SelectComponent\";\n\nfunction OnlyIf({ field, error, props }) {\n\tconst { contextFieldTarget, contextFieldTargetName } = props.propertyList;\n\treturn (\n\t\t<>\n\t\t\t<SelectComponent field={field} props={props} error={error} />\n\t\t\t{contextFieldTarget && contextFieldTargetName && (\n\t\t\t\t<SelectComponent\n\t\t\t\t\tfield={{\n\t\t\t\t\t\tname: \"contextFieldTitle\",\n\t\t\t\t\t\tref: contextFieldTarget,\n\t\t\t\t\t\ttitle: \"Value\",\n\t\t\t\t\t\tvalueField: contextFieldTargetName,\n\t\t\t\t\t\tdisplayField: contextFieldTargetName,\n\t\t\t\t\t}}\n\t\t\t\t\tprops={props}\n\t\t\t\t\terror={error}\n\t\t\t\t/>\n\t\t\t)}\n\t\t</>\n\t);\n}\n\nexport default OnlyIf;\n","import React, { useState } from \"react\";\nimport {\n\tTextField,\n\tGrid,\n\tTypography,\n\tFormControlLabel,\n\tSwitch,\n\tIconButton,\n} from \"@material-ui/core\";\nimport classNames from \"classnames\";\nimport { makeStyles } from \"@material-ui/core/styles\";\nimport { options } from \"./list\";\nimport {\n\tcamleCaseString,\n\ttranslate,\n\tgetProperty,\n\tgetPropertyValue,\n\tgenerateFieldUniqueTitle,\n\tcapitalizeFirst,\n} from \"../utils\";\nimport SelectComponent from \"../components/SelectComponent\";\nimport { MODEL_TYPE, TYPE, ENTITY_TYPE } from \"../constants\";\nimport { useStore } from \"../store/context\";\nimport {\n\tFormView,\n\tGridView,\n\tJsonRelationalField,\n\tSelectableType,\n\tTargetJsonModel,\n\tTargetModel,\n} from \"./propertyFields\";\nimport TranslationGrid from \"../components/TranslationGrid\";\nimport TranslateIcon from \"@material-ui/icons/Translate\";\nimport CloseIcon from \"@material-ui/icons/Delete\";\nimport ClearIcon from \"@material-ui/icons/Close\";\nimport { getSelectionText } from \"../Toolbar/api\";\nimport StaticSelection from \"./widgets/StaticSelection\";\nimport SelectionWidget from \"./widgets/SelectionWidget\";\nimport DialogConfirmation from \"../Toolbar/DeleteConfirmation\";\nimport OnlyIfComponent from \"./widgets/OnlyIf\";\n\nconst useStyles = makeStyles({\n\tinput: {\n\t\tbackgroundColor: \"#293846\",\n\t\tmarginTop: 15,\n\t\t\".modern-dark &\": {\n\t\t\tbackgroundColor: \"#323232\",\n\t\t},\n\t\t\"& .MuiInputBase-inputMultiline\": {\n\t\t\theight: \"auto !important\",\n\t\t},\n\t},\n\ttranslationInput: {\n\t\tpaddingTop: 10,\n\t\tpaddingBottom: 10,\n\t},\n\ttranslationInputView: {\n\t\tbackgroundColor: \"#293846\",\n\t\tmarginBottom: 5,\n\t\t\".modern-dark &\": {\n\t\t\tbackgroundColor: \"#323232\",\n\t\t},\n\t},\n\tlabel: {\n\t\tcolor: \"#f7f7f7\",\n\t\tfontSize: 12,\n\t\t\"&#outlined-basic-label\": {\n\t\t\tcolor: \"#f7f7f7\",\n\t\t},\n\t\t\"&.MuiInputLabel-shrink\": {\n\t\t\ttop: \"1px !important\",\n\t\t},\n\t},\n\toutlinedRoot: {\n\t\tcolor: \"#ffffff\",\n\t\t\"&:hover $notchedOutline\": {\n\t\t\tborderColor: \"#ffffff\",\n\t\t},\n\t\t\"&$focused $notchedOutline\": {\n\t\t\tborderColor: \"white\",\n\t\t\tborderWidth: 1,\n\t\t},\n\t},\n\tnotchedOutline: {},\n\tfocused: {\n\t\tcolor: \"#ffffff\",\n\t},\n\tswitchBase: {\n\t\t\"&$checked\": {\n\t\t\tcolor: \"#ffffff\",\n\t\t},\n\t\t\"&$checked + $track\": {\n\t\t\tbackgroundColor: \"#ffffff\",\n\t\t},\n\t},\n\tchecked: {},\n\ttrack: {},\n\tselection: {\n\t\tcolor: \"#ffffff\",\n\t\tbackgroundColor: \"#293846\",\n\t\t\".modern-dark &\": {\n\t\t\tbackgroundColor: \"#323232\",\n\t\t},\n\t},\n\ticonOutlined: {\n\t\tcolor: \"#ffffff\",\n\t},\n\tpanelTitle: {\n\t\tcolor: \"white\",\n\t\tfontWeight: \"600\",\n\t},\n\tpanelMargin: {\n\t\tmargin: \"25px 0px 0px 0px\",\n\t},\n\tdisableInput: {\n\t\tcolor: \"#a3a3a3 !important\",\n\t},\n\tunique: {\n\t\tcolor: \"#0275d8\",\n\t},\n\trequired: {\n\t\tcolor: \"red\",\n\t},\n\ttranslateButton: {\n\t\tcolor: \"#ffffff\",\n\t\tpadding: \"10px 12px\",\n\t\t\"& > span > svg\": {\n\t\t\tfontSize: \"1.1rem\",\n\t\t},\n\t},\n\tstaticSelectMenuItem: {\n\t\tcolor: \"#ffffff\",\n\t\tbackgroundColor: \"rgb(41, 56, 70) !important\",\n\t\t\"&:hover\": {\n\t\t\tbackgroundColor: \"#293846 !important\",\n\t\t},\n\t},\n\tautoComplete: {\n\t\twidth: \"100%\",\n\t\tmarginTop: 15,\n\t\tbackgroundColor: \"#293846\",\n\t\t\"& > div > label\": {\n\t\t\tcolor: \"#ffffff !important\",\n\t\t\tfontSize: 13,\n\t\t},\n\t\t\".modern-dark &\": {\n\t\t\tbackgroundColor: \"#323232\",\n\t\t},\n\t},\n\tautoCompleteInput: {\n\t\tcolor: \"#ffffff\",\n\t\tfontSize: 13,\n\t},\n\tautoCompleteOption: {\n\t\tfontSize: 13,\n\t\t\"& ul, .MuiAutocomplete-noOptions\": {\n\t\t\tbackgroundColor: \"rgb(41, 56, 70) !important\",\n\t\t\t\".modern-dark &\": {\n\t\t\t\tbackgroundColor: \"#1b1b1b !important\",\n\t\t\t},\n\t\t},\n\t\t\"& li, .MuiAutocomplete-noOptions\": {\n\t\t\tcolor: \"#ffffff !important\",\n\t\t\tbackgroundColor: \"rgb(41, 56, 70) !important\",\n\t\t\t\".modern-dark &\": {\n\t\t\t\tbackgroundColor: \"#1b1b1b !important\",\n\t\t\t},\n\t\t},\n\t\t\"& li:hover, .MuiAutocomplete-noOptions\": {\n\t\t\tcolor: \"#ffffff !important\",\n\t\t\tbackgroundColor: \"#2f4050 !important\",\n\t\t\t\".modern-dark &\": {\n\t\t\t\tbackgroundColor: \"#323232 !important\",\n\t\t\t},\n\t\t},\n\t},\n\ttextFieldInput: {\n\t\tfontSize: 13,\n\t},\n\tbooleanInputLabel: {\n\t\tfontSize: 12,\n\t},\n\tdisabled: {\n\t\tcolor: \"#a3a3a3 !important\",\n\t\tfontSize: 12,\n\t},\n});\n\nconst PropertiesContext = React.createContext();\n\nfunction Label(text, field) {\n\tconst classes = useStyles();\n\treturn (\n\t\t<span>\n\t\t\t<span>{text}</span>\n\t\t\t{field.unique && <span className={classes.unique}> (unique) </span>}\n\t\t\t{field.required && <span className={classes.required}> * </span>}\n\t\t</span>\n\t);\n}\n\nconst isValueGenerated = (value) => {\n\treturn value.includes(\"studio:\");\n};\n\nconst hasPropertyToShow = (list, type) => {\n\treturn (\n\t\tlist.filter(\n\t\t\t(item) => !item.dependModelType || item.dependModelType === type\n\t\t).length > 0\n\t);\n};\n\nfunction StringInput(_props) {\n\tconst {\n\t\tindex,\n\t\tmultiline = false,\n\t\terror,\n\t\tparentPanel,\n\t\tonTranslationRemove,\n\t\tclearable = false,\n\t\tisStudioLite,\n\t} = _props;\n\tconst classes = useStyles();\n\tconst [confirm, setConfirm] = React.useState(false);\n\tconst {\n\t\ttitle,\n\t\tname,\n\t\ttype,\n\t\trequired,\n\t\treadOnly,\n\t\tmax,\n\t\tmin,\n\t\tparentField,\n\t\ttranslationView,\n\t\t...rest\n\t} = _props.field;\n\tconst props = React.useContext(PropertiesContext);\n\tconst {\n\t\tpropertyList,\n\t\tsetPropertyList,\n\t\tonChange,\n\t\tmodelType,\n\t\tmetaFieldStore = [],\n\t\teditWidgetType,\n\t} = props;\n\tlet label = Label(translate(camleCaseString(title || name)), _props.field);\n\tlet placeholder = translate(camleCaseString(title || name));\n\tif (name === \"showIf\" || name === \"requiredIf\") {\n\t\tplaceholder = \"id == 1\";\n\t} else if (name === \"hideIf\") {\n\t\tplaceholder = \"id == null\";\n\t} else if (name === \"readOnlyIf\") {\n\t\tplaceholder = \"id != null\";\n\t}\n\tlet value = propertyList[name] || \"\";\n\tif (\n\t\t(modelType === rest.modelType || props.editWidgetType === \"customField\") &&\n\t\tparentField\n\t) {\n\t\tconst field = propertyList[parentField]\n\t\t\t? JSON.parse(propertyList[parentField])\n\t\t\t: {};\n\t\tvalue = field[name] || \"\";\n\t}\n\tif (rest.formatter) {\n\t\tvalue = rest.formatter(value, propertyList);\n\t}\n\tlet disabled = Boolean(readOnly);\n\tif (rest.isDisabled) {\n\t\tdisabled = rest.isDisabled({\n\t\t\tproperties: propertyList,\n\t\t\tmetaFieldStore,\n\t\t\teditWidgetType,\n\t\t\tmodelType,\n\t\t\tparentPanel,\n\t\t\tisStudioLite,\n\t\t});\n\t}\n\n\tconst handleTranslationClick = React.useCallback(() => {\n\t\tif (isValueGenerated(value)) {\n\t\t\treturn;\n\t\t}\n\t\tconst newValue = generateFieldUniqueTitle({\n\t\t\tname,\n\t\t\tfieldName: propertyList[name] || type,\n\t\t});\n\t\tonChange(\n\t\t\t{\n\t\t\t\t...(propertyList || {}),\n\t\t\t\t...getProperty(\n\t\t\t\t\tname,\n\t\t\t\t\tnewValue,\n\t\t\t\t\tparentField,\n\t\t\t\t\tpropertyList[parentField],\n\t\t\t\t\t!(modelType === rest.modelType) || editWidgetType === \"customField\"\n\t\t\t\t),\n\t\t\t},\n\t\t\tname\n\t\t);\n\t}, [\n\t\tpropertyList,\n\t\tname,\n\t\ttype,\n\t\tvalue,\n\t\tonChange,\n\t\trest.modelType,\n\t\tmodelType,\n\t\tparentField,\n\t\teditWidgetType,\n\t]);\n\n\tconst handleTranslationRemove = React.useCallback(() => {\n\t\tsetConfirm(false);\n\t\tonChange(\n\t\t\t{\n\t\t\t\t...(propertyList || {}),\n\t\t\t\t...getProperty(\n\t\t\t\t\tname,\n\t\t\t\t\t\"\",\n\t\t\t\t\tparentField,\n\t\t\t\t\tpropertyList[parentField],\n\t\t\t\t\t!(modelType === rest.modelType)\n\t\t\t\t),\n\t\t\t},\n\t\t\tname\n\t\t);\n\t\tonTranslationRemove(value);\n\t}, [\n\t\tonTranslationRemove,\n\t\tvalue,\n\t\tname,\n\t\tparentField,\n\t\tmodelType,\n\t\tonChange,\n\t\tpropertyList,\n\t\trest.modelType,\n\t]);\n\n\tconst removeTranslation = React.useCallback(() => {\n\t\tsetConfirm(true);\n\t}, []);\n\n\tconst onClose = React.useCallback(() => {\n\t\tsetConfirm(false);\n\t}, []);\n\n\treturn (\n\t\t<React.Fragment>\n\t\t\t<TextField\n\t\t\t\terror={(required && !value) || Boolean(error)}\n\t\t\t\thelperText={error}\n\t\t\t\tInputLabelProps={{\n\t\t\t\t\tclassName: disabled ? classes.disabled : classes.label,\n\t\t\t\t}}\n\t\t\t\tsize=\"small\"\n\t\t\t\tInputProps={{\n\t\t\t\t\tclasses: {\n\t\t\t\t\t\troot: classes && disabled ? \"\" : classes.outlinedRoot,\n\t\t\t\t\t\tnotchedOutline: classes && classes.notchedOutline,\n\t\t\t\t\t\tfocused: classes && classes.focused,\n\t\t\t\t\t\tdisabled: classes && classes.disableInput,\n\t\t\t\t\t\tinput: classes && classes.textFieldInput,\n\t\t\t\t\t},\n\t\t\t\t\tendAdornment: translationView ? (\n\t\t\t\t\t\tisValueGenerated(value) ? (\n\t\t\t\t\t\t\t<IconButton\n\t\t\t\t\t\t\t\tclassName={classes.translateButton}\n\t\t\t\t\t\t\t\tonClick={removeTranslation}\n\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t<CloseIcon />\n\t\t\t\t\t\t\t</IconButton>\n\t\t\t\t\t\t) : (\n\t\t\t\t\t\t\t<IconButton\n\t\t\t\t\t\t\t\tclassName={classes.translateButton}\n\t\t\t\t\t\t\t\tonClick={handleTranslationClick}\n\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t<TranslateIcon />\n\t\t\t\t\t\t\t</IconButton>\n\t\t\t\t\t\t)\n\t\t\t\t\t) : clearable ? (\n\t\t\t\t\t\t<IconButton\n\t\t\t\t\t\t\tclassName={classes.translateButton}\n\t\t\t\t\t\t\tonClick={() => {\n\t\t\t\t\t\t\t\tlet value = \"\";\n\t\t\t\t\t\t\t\tlet flag = true;\n\t\t\t\t\t\t\t\tif (\n\t\t\t\t\t\t\t\t\trest.modelType === MODEL_TYPE.BASE &&\n\t\t\t\t\t\t\t\t\tprops.editWidgetType !== \"customField\"\n\t\t\t\t\t\t\t\t) {\n\t\t\t\t\t\t\t\t\tflag =\n\t\t\t\t\t\t\t\t\t\tvalue === \"\"\n\t\t\t\t\t\t\t\t\t\t\t? propertyList[name] !== undefined\n\t\t\t\t\t\t\t\t\t\t\t\t? true\n\t\t\t\t\t\t\t\t\t\t\t\t: false\n\t\t\t\t\t\t\t\t\t\t\t: true;\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\tif (\n\t\t\t\t\t\t\t\t\trest.modelType === MODEL_TYPE.CUSTOM &&\n\t\t\t\t\t\t\t\t\tprops.editWidgetType === \"customField\"\n\t\t\t\t\t\t\t\t) {\n\t\t\t\t\t\t\t\t\t// set null value when value is negative for custom view & custom fields\n\t\t\t\t\t\t\t\t\tvalue = value || null;\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\tif (flag) {\n\t\t\t\t\t\t\t\t\tonChange(\n\t\t\t\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t\t\t\t...(propertyList || {}),\n\t\t\t\t\t\t\t\t\t\t\t...getProperty(\n\t\t\t\t\t\t\t\t\t\t\t\tname,\n\t\t\t\t\t\t\t\t\t\t\t\tvalue,\n\t\t\t\t\t\t\t\t\t\t\t\tparentField,\n\t\t\t\t\t\t\t\t\t\t\t\tpropertyList[parentField],\n\t\t\t\t\t\t\t\t\t\t\t\t!(modelType === rest.modelType) ||\n\t\t\t\t\t\t\t\t\t\t\t\t\teditWidgetType === \"customField\"\n\t\t\t\t\t\t\t\t\t\t\t),\n\t\t\t\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t\t\t\tname\n\t\t\t\t\t\t\t\t\t);\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t>\n\t\t\t\t\t\t\t<ClearIcon />\n\t\t\t\t\t\t</IconButton>\n\t\t\t\t\t) : null,\n\t\t\t\t}}\n\t\t\t\tinputProps={{ min: min, max: max }}\n\t\t\t\tkey={index}\n\t\t\t\tclassName={classes && classes.input}\n\t\t\t\tid=\"outlined-basic\"\n\t\t\t\tmultiline={multiline}\n\t\t\t\ttype={type === \"integer\" ? \"number\" : type}\n\t\t\t\tlabel={label}\n\t\t\t\tplaceholder={placeholder}\n\t\t\t\tvariant=\"outlined\"\n\t\t\t\tdisabled={disabled || (translationView && isValueGenerated(value))}\n\t\t\t\tvalue={value}\n\t\t\t\tminRows={3}\n\t\t\t\tautoComplete=\"off\"\n\t\t\t\tonChange={(e) => {\n\t\t\t\t\tif (type === \"integer\" && isNaN(Number(e.target.value))) {\n\t\t\t\t\t\treturn;\n\t\t\t\t\t}\n\t\t\t\t\tif (min && max) {\n\t\t\t\t\t\tconst value = Number(e.target.value);\n\t\t\t\t\t\tif (value < min || value > max) {\n\t\t\t\t\t\t\treturn;\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t\tlet value = e.target.value;\n\t\t\t\t\tsetPropertyList({\n\t\t\t\t\t\t...(propertyList || {}),\n\t\t\t\t\t\t...getProperty(\n\t\t\t\t\t\t\tname,\n\t\t\t\t\t\t\tvalue,\n\t\t\t\t\t\t\tparentField,\n\t\t\t\t\t\t\tpropertyList[parentField],\n\t\t\t\t\t\t\t!(modelType !== rest.modelType) ||\n\t\t\t\t\t\t\t\teditWidgetType === \"customField\"\n\t\t\t\t\t\t),\n\t\t\t\t\t});\n\t\t\t\t}}\n\t\t\t\tonBlur={(e) => {\n\t\t\t\t\tif (type === \"integer\" && isNaN(Number(e.target.value))) {\n\t\t\t\t\t\treturn;\n\t\t\t\t\t}\n\t\t\t\t\tif (min && max) {\n\t\t\t\t\t\tconst value = Number(e.target.value);\n\t\t\t\t\t\tif (value < min || value > max) {\n\t\t\t\t\t\t\treturn;\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t\tlet value = e.target.value;\n\t\t\t\t\tlet flag = true;\n\t\t\t\t\tif (\n\t\t\t\t\t\trest.modelType === MODEL_TYPE.BASE &&\n\t\t\t\t\t\tprops.editWidgetType !== \"customField\"\n\t\t\t\t\t) {\n\t\t\t\t\t\tflag =\n\t\t\t\t\t\t\tvalue === \"\"\n\t\t\t\t\t\t\t\t? propertyList[name] !== undefined\n\t\t\t\t\t\t\t\t\t? true\n\t\t\t\t\t\t\t\t\t: false\n\t\t\t\t\t\t\t\t: true;\n\t\t\t\t\t}\n\t\t\t\t\tif (\n\t\t\t\t\t\trest.modelType === MODEL_TYPE.CUSTOM &&\n\t\t\t\t\t\tprops.editWidgetType === \"customField\"\n\t\t\t\t\t) {\n\t\t\t\t\t\t// set null value when value is negative for custom view & custom fields\n\t\t\t\t\t\tvalue = value || null;\n\t\t\t\t\t}\n\t\t\t\t\tif (flag) {\n\t\t\t\t\t\tonChange(\n\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t...(propertyList || {}),\n\t\t\t\t\t\t\t\t...getProperty(\n\t\t\t\t\t\t\t\t\tname,\n\t\t\t\t\t\t\t\t\tvalue && (name === \"name\" || value?.trim() === \"\")\n\t\t\t\t\t\t\t\t\t\t? value.trim()\n\t\t\t\t\t\t\t\t\t\t: value,\n\t\t\t\t\t\t\t\t\tparentField,\n\t\t\t\t\t\t\t\t\tpropertyList[parentField],\n\t\t\t\t\t\t\t\t\t!(modelType === rest.modelType) ||\n\t\t\t\t\t\t\t\t\t\teditWidgetType === \"customField\"\n\t\t\t\t\t\t\t\t),\n\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\tname\n\t\t\t\t\t\t);\n\t\t\t\t\t}\n\t\t\t\t}}\n\t\t\t/>\n\t\t\t{translationView && isValueGenerated(value) && (\n\t\t\t\t<TranslationGrid\n\t\t\t\t\tInputProps={{\n\t\t\t\t\t\tclasses: {\n\t\t\t\t\t\t\troot: classes && classes.outlinedRoot,\n\t\t\t\t\t\t\tnotchedOutline: classes && classes.notchedOutline,\n\t\t\t\t\t\t\tfocused: classes && classes.focused,\n\t\t\t\t\t\t\tdisabled: classes && classes.disableInput,\n\t\t\t\t\t\t\tinput: classes && classes.translationInput,\n\t\t\t\t\t\t},\n\t\t\t\t\t}}\n\t\t\t\t\tInputLabelProps={{\n\t\t\t\t\t\tclassName: disabled ? classes.disabled : classes.label,\n\t\t\t\t\t}}\n\t\t\t\t\tclassName={classes && classes.translationInputView}\n\t\t\t\t\tkeyValue={value}\n\t\t\t\t/>\n\t\t\t)}\n\t\t\t{confirm && (\n\t\t\t\t<DialogConfirmation\n\t\t\t\t\topen={confirm}\n\t\t\t\t\tmessage=\"Are you sure, do you want to delete translations?\"\n\t\t\t\t\tonClose={onClose}\n\t\t\t\t\tonOk={handleTranslationRemove}\n\t\t\t\t/>\n\t\t\t)}\n\t\t</React.Fragment>\n\t);\n}\n\nfunction BooleanField(_props) {\n\tconst [openAlert, setAlertOpen] = useState(false);\n\tconst { index } = _props;\n\tlet { name, title, parentField, defaultValue, uncheckDialog, ...rest } =\n\t\t_props.field;\n\tconst props = React.useContext(PropertiesContext);\n\tconst {\n\t\tpropertyList,\n\t\tsetPropertyList,\n\t\tonChange,\n\t\tmodelType,\n\t\teditWidgetType,\n\t\tmetaFieldStore,\n\t} = props;\n\tlet _value = getPropertyValue(\n\t\tpropertyList,\n\t\tname,\n\t\tparentField,\n\t\tdefaultValue,\n\t\t!(modelType !== rest.modelType) || editWidgetType === \"customField\"\n\t);\n\tlet fieldValue = Boolean(_value ? !(_value === \"false\") : _value);\n\tconst classes = useStyles();\n\tif (rest.getValue) {\n\t\tfieldValue = rest.getValue(propertyList);\n\t}\n\tlet disabled = false;\n\tif (rest.isDisabled) {\n\t\tdisabled = rest.isDisabled({\n\t\t\tproperties: propertyList,\n\t\t\tmetaFieldStore,\n\t\t\teditWidgetType,\n\t\t\tmodelType,\n\t\t});\n\t}\n\ttitle = translate(camleCaseString(title || name));\n\n\tconst handleOnChange = () => {\n\t\tif (uncheckDialog) {\n\t\t\tsetAlertOpen(false);\n\t\t}\n\t\tsetPropertyList({\n\t\t\t...propertyList,\n\t\t\t...(rest.change ? rest.change(!fieldValue, propertyList) : {}),\n\t\t\t...getProperty(\n\t\t\t\tname,\n\t\t\t\t!fieldValue,\n\t\t\t\tparentField,\n\t\t\t\tpropertyList[parentField],\n\t\t\t\t!(modelType !== rest.modelType) || editWidgetType === \"customField\"\n\t\t\t),\n\t\t});\n\t\tonChange(\n\t\t\t{\n\t\t\t\t...propertyList,\n\t\t\t\t...(rest.change ? rest.change(!fieldValue, propertyList) : {}),\n\t\t\t\t...getProperty(\n\t\t\t\t\tname,\n\t\t\t\t\t!fieldValue,\n\t\t\t\t\tparentField,\n\t\t\t\t\tpropertyList[parentField],\n\t\t\t\t\t!(modelType !== rest.modelType) || editWidgetType === \"customField\"\n\t\t\t\t),\n\t\t\t},\n\t\t\tname\n\t\t);\n\t};\n\treturn (\n\t\t<React.Fragment>\n\t\t\t<FormControlLabel\n\t\t\t\tstyle={{ marginTop: 15, alignSelf: \"flex-start\" }}\n\t\t\t\tkey={index}\n\t\t\t\tclasses={{\n\t\t\t\t\tlabel: classes && classes.booleanInputLabel,\n\t\t\t\t\tdisabled: classes.disabled,\n\t\t\t\t}}\n\t\t\t\tcontrol={\n\t\t\t\t\t<Switch\n\t\t\t\t\t\tclasses={{\n\t\t\t\t\t\t\tswitchBase: classes && classes.switchBase,\n\t\t\t\t\t\t\ttrack: classes && classes.track,\n\t\t\t\t\t\t\tchecked: classes && classes.checked,\n\t\t\t\t\t\t}}\n\t\t\t\t\t\tchecked={fieldValue}\n\t\t\t\t\t\tdisabled={disabled}\n\t\t\t\t\t\tonChange={() => {\n\t\t\t\t\t\t\tif (\n\t\t\t\t\t\t\t\tuncheckDialog &&\n\t\t\t\t\t\t\t\tfieldValue &&\n\t\t\t\t\t\t\t\tpropertyList &&\n\t\t\t\t\t\t\t\tpropertyList.selectionText\n\t\t\t\t\t\t\t) {\n\t\t\t\t\t\t\t\tsetAlertOpen(true);\n\t\t\t\t\t\t\t\treturn;\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\thandleOnChange();\n\t\t\t\t\t\t}}\n\t\t\t\t\t\tvalue={propertyList[name]}\n\t\t\t\t\t/>\n\t\t\t\t}\n\t\t\t\tlabel={translate(camleCaseString(title || name))}\n\t\t\t/>\n\t\t\t{openAlert && (\n\t\t\t\t<DialogConfirmation\n\t\t\t\t\topen={openAlert}\n\t\t\t\t\tmessage=\"Are you sure?\"\n\t\t\t\t\tonClose={() => setAlertOpen(false)}\n\t\t\t\t\tonOk={handleOnChange}\n\t\t\t\t\ttitle=\"Confirm\"\n\t\t\t\t/>\n\t\t\t)}\n\t\t</React.Fragment>\n\t);\n}\n\nfunction checkDepend(field, propertyList) {\n\tif (field.depends) {\n\t\tconst value = propertyList[field.depends];\n\t\tif (field.dependValue !== value) {\n\t\t\treturn false;\n\t\t}\n\t\treturn true;\n\t}\n\treturn;\n}\n\nfunction checkModel(field, modelType, editWidgetType, propertyList) {\n\tif (field.dependModelType && field.dependModelType !== modelType) {\n\t\tif (editWidgetType !== \"customField\") {\n\t\t\treturn false;\n\t\t}\n\t}\n\tif (field.showInBaseView === false && editWidgetType !== \"customField\") {\n\t\treturn false;\n\t}\n\tif (editWidgetType === \"customField\" && field.showInCustomField === false) {\n\t\treturn false;\n\t}\n\tif (field.shouldRender && !field.shouldRender(propertyList)) {\n\t\treturn false;\n\t}\n\treturn true;\n}\n\nfunction RenderPropertyField() {\n\tconst props = React.useContext(PropertiesContext);\n\tconst {\n\t\telements,\n\t\tid,\n\t\tpropertyList,\n\t\tenableStudioApp,\n\t\tmodelType,\n\t\teditWidgetType,\n\t\terrors,\n\t\tentityType,\n\t\tactualType,\n\t\tparentPanel,\n\t\tonTranslationRemove,\n\t\tisStudioLite,\n\t} = props;\n\treturn (\n\t\t<>\n\t\t\t{elements.map((field, index) => {\n\t\t\t\tconst depend = checkDepend(field, propertyList);\n\t\t\t\tif (depend === false) {\n\t\t\t\t\treturn null;\n\t\t\t\t}\n\t\t\t\tif (!checkModel(field, modelType, editWidgetType, propertyList)) {\n\t\t\t\t\treturn null;\n\t\t\t\t}\n\t\t\t\tif (field.name === \"studioApp\" && !enableStudioApp) {\n\t\t\t\t\treturn null;\n\t\t\t\t}\n\t\t\t\tif (\n\t\t\t\t\t[actualType, entityType].includes(ENTITY_TYPE.META) &&\n\t\t\t\t\tfield.name === \"packageName\"\n\t\t\t\t) {\n\t\t\t\t\treturn null;\n\t\t\t\t}\n\t\t\t\tconst key = `${index}_${id}`;\n\t\t\t\tswitch (field.type) {\n\t\t\t\t\tcase \"string\":\n\t\t\t\t\t\treturn (\n\t\t\t\t\t\t\t<StringInput\n\t\t\t\t\t\t\t\tfield={field}\n\t\t\t\t\t\t\t\tkey={key}\n\t\t\t\t\t\t\t\tindex={key}\n\t\t\t\t\t\t\t\tmultiline={false}\n\t\t\t\t\t\t\t\terror={errors[field.name]}\n\t\t\t\t\t\t\t\tisStudioLite={isStudioLite}\n\t\t\t\t\t\t\t\tonTranslationRemove={onTranslationRemove}\n\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t);\n\t\t\t\t\tcase \"integer\":\n\t\t\t\t\t\treturn (\n\t\t\t\t\t\t\t<StringInput\n\t\t\t\t\t\t\t\tfield={field}\n\t\t\t\t\t\t\t\tkey={key}\n\t\t\t\t\t\t\t\tindex={key}\n\t\t\t\t\t\t\t\tmultiline={false}\n\t\t\t\t\t\t\t\terror={errors[field.name]}\n\t\t\t\t\t\t\t\tparentPanel={parentPanel}\n\t\t\t\t\t\t\t\tclearable={true}\n\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t);\n\t\t\t\t\tcase \"boolean\":\n\t\t\t\t\t\treturn (\n\t\t\t\t\t\t\t<BooleanField\n\t\t\t\t\t\t\t\tfield={field}\n\t\t\t\t\t\t\t\tkey={key}\n\t\t\t\t\t\t\t\tindex={key}\n\t\t\t\t\t\t\t\terror={errors[field.name]}\n\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t);\n\t\t\t\t\tcase \"selection\":\n\t\t\t\t\t\treturn (\n\t\t\t\t\t\t\t<SelectionWidget\n\t\t\t\t\t\t\t\tfield={field}\n\t\t\t\t\t\t\t\tkey={key}\n\t\t\t\t\t\t\t\tindex={key}\n\t\t\t\t\t\t\t\tprops={props}\n\t\t\t\t\t\t\t\terror={errors[field.name]}\n\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t);\n\t\t\t\t\tcase \"select\":\n\t\t\t\t\tcase \"objectSelection\":\n\t\t\t\t\t\treturn (\n\t\t\t\t\t\t\t<SelectComponent\n\t\t\t\t\t\t\t\tfield={field}\n\t\t\t\t\t\t\t\tkey={key}\n\t\t\t\t\t\t\t\tindex={key}\n\t\t\t\t\t\t\t\tprops={props}\n\t\t\t\t\t\t\t\terror={errors[field.name]}\n\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t);\n\t\t\t\t\tcase \"staticSelect\":\n\t\t\t\t\t\treturn (\n\t\t\t\t\t\t\t<StaticSelection\n\t\t\t\t\t\t\t\tfield={field}\n\t\t\t\t\t\t\t\tkey={key}\n\t\t\t\t\t\t\t\tindex={key}\n\t\t\t\t\t\t\t\terror={errors[field.name]}\n\t\t\t\t\t\t\t\tparentPanel={parentPanel}\n\t\t\t\t\t\t\t\tprops={props}\n\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t);\n\t\t\t\t\tcase \"text\":\n\t\t\t\t\t\treturn (\n\t\t\t\t\t\t\t<StringInput\n\t\t\t\t\t\t\t\tfield={field}\n\t\t\t\t\t\t\t\tkey={key}\n\t\t\t\t\t\t\t\tindex={key}\n\t\t\t\t\t\t\t\tmultiline={true}\n\t\t\t\t\t\t\t\terror={errors[field.name]}\n\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t);\n\t\t\t\t\tcase \"onlyIf\":\n\t\t\t\t\t\treturn (\n\t\t\t\t\t\t\t<OnlyIfComponent\n\t\t\t\t\t\t\t\tfield={field}\n\t\t\t\t\t\t\t\tkey={key}\n\t\t\t\t\t\t\t\tprops={props}\n\t\t\t\t\t\t\t\terror={errors[field.name]}\n\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t);\n\t\t\t\t\tdefault:\n\t\t\t\t\t\treturn (\n\t\t\t\t\t\t\t<StringInput\n\t\t\t\t\t\t\t\tfield={field}\n\t\t\t\t\t\t\t\tkey={key}\n\t\t\t\t\t\t\t\tindex={key}\n\t\t\t\t\t\t\t\terror={errors[field.name]}\n\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t);\n\t\t\t\t}\n\t\t\t})}\n\t\t</>\n\t);\n}\n\nfunction PropertiesProvider({ children, ...value }) {\n\treturn (\n\t\t<PropertiesContext.Provider value={value}>\n\t\t\t{children}\n\t\t</PropertiesContext.Provider>\n\t);\n}\n\nexport default function Properties(props) {\n\tconst { state, onWidgetChange, onTranslationRemove } = useStore();\n\tconst {\n\t\twidgets,\n\t\teditWidget,\n\t\teditWidgetType,\n\t\tcustomFieldWidgets,\n\t\tmodelType,\n\t\tenableStudioApp,\n\t\tmetaFieldStore = [],\n\t\terrorList = {},\n\t\tentityType,\n\t\tactualType,\n\t\tisStudioLite,\n\t} = state;\n\tlet widget = null;\n\tif (editWidget) {\n\t\tif (editWidgetType === \"customField\" && customFieldWidgets) {\n\t\t\twidget = customFieldWidgets[editWidget];\n\t\t} else if (editWidgetType !== \"customField\" && widgets) {\n\t\t\twidget = widgets[editWidget];\n\t\t}\n\t}\n\tconst { serverType, isSelectionField } = widget || {};\n\tlet { type } = widget || {};\n\tlet selectedType =\n\t\tserverType === \"field\" ? type || \"string\" : serverType || type;\n\tselectedType = selectedType && selectedType.toLowerCase().replace(/_/g, \"-\");\n\tif (selectedType === \"datetime\") {\n\t\tconst field = metaFieldStore?.find((f) => f.name === widget.name);\n\t\tif (field && `${field.tz}` === \"true\") {\n\t\t\tselectedType = \"zoneddatetime\";\n\t\t}\n\t}\n\tconst [propertyList, setPropertyList] = useState({});\n\tlet property = options.find((option) => option.type === selectedType);\n\tif (selectedType === \"form\") {\n\t\tif (state.modelType === MODEL_TYPE.CUSTOM) {\n\t\t\tproperty = options.find((option) => option.type === \"modelForm\");\n\t\t}\n\t}\n\tif (isSelectionField) {\n\t\tselectedType = [\"string\", \"integer\"].includes(widget && widget.type)\n\t\t\t? widget.type\n\t\t\t: selectedType;\n\t\tif (property && property.value) {\n\t\t\tconst typeFieldIndex = property.value.overview.findIndex(\n\t\t\t\t(item) => item.name === \"type\"\n\t\t\t);\n\t\t\tproperty.value.overview.splice(typeFieldIndex, 1, SelectableType);\n\t\t\tconst { fieldOptions, widgetAttributes } =\n\t\t\t\t(property && property.value) || {};\n\t\t\tproperty = {\n\t\t\t\t...(property || {}),\n\t\t\t\tvalue: {\n\t\t\t\t\t...(property.value || {}),\n\t\t\t\t\tfieldOptions: (fieldOptions || []).filter(\n\t\t\t\t\t\t(f) => ![\"minSize\", \"maxSize\", \"regex\"].includes(f.name)\n\t\t\t\t\t),\n\t\t\t\t\twidgetAttributes: (widgetAttributes || []).filter(\n\t\t\t\t\t\t(f) => ![\"multiline\"].includes(f.name)\n\t\t\t\t\t),\n\t\t\t\t},\n\t\t\t};\n\t\t}\n\t}\n\tconst classes = useStyles();\n\tconst inputLabel = React.useRef(null);\n\tconst [labelWidth, setLabelWidth] = React.useState(0);\n\tReact.useEffect(() => {\n\t\tsetPropertyList({\n\t\t\t...(widget || {}),\n\t\t\ttype: selectedType,\n\t\t});\n\t\tsetLabelWidth(\n\t\t\tinputLabel && inputLabel.current && inputLabel.current.offsetWidth\n\t\t);\n\t}, [widget, selectedType]);\n\n\tasync function onChange(props, changedPropertyName) {\n\t\tconst newProperties = { ...props };\n\t\tif (changedPropertyName === JsonRelationalField.name) {\n\t\t\t// when isJsonRelationalField changes\n\t\t\tnewProperties[TargetJsonModel.name] = null;\n\t\t\tnewProperties[TargetModel.name] = null;\n\t\t\tnewProperties[GridView.name] = null;\n\t\t\tnewProperties[FormView.name] = null;\n\t\t}\n\t\tif (\n\t\t\tchangedPropertyName !== JsonRelationalField.name &&\n\t\t\tchangedPropertyName !== \"type\"\n\t\t) {\n\t\t\tnewProperties.type = widget.type;\n\t\t}\n\t\t/* selectionText implementation starts here */\n\t\tif (\n\t\t\tchangedPropertyName === \"updateSelection\" &&\n\t\t\t!newProperties.updateSelection\n\t\t) {\n\t\t\tnewProperties.selection = null;\n\t\t\tnewProperties.selectionText = null;\n\t\t}\n\t\tif (!newProperties.updateSelection) {\n\t\t\tnewProperties.selectionText = null;\n\t\t} else {\n\t\t\tconst obj = { name: newProperties.selection };\n\t\t\tconst text = await getSelectionText(obj);\n\t\t\tnewProperties.selectionText = newProperties.selectionText || text;\n\t\t}\n\t\tif (\n\t\t\tnewProperties.selection &&\n\t\t\tnewProperties.updateSelection &&\n\t\t\t!changedPropertyName\n\t\t) {\n\t\t\tconst obj = { name: newProperties.selection };\n\t\t\tconst text = await getSelectionText(obj);\n\t\t\tnewProperties.selectionText = newProperties.selectionText || text;\n\t\t}\n\t\tif (!newProperties.selection && !changedPropertyName) {\n\t\t\tnewProperties.selectionText = \"\";\n\t\t}\n\t\tif (\n\t\t\tnewProperties.selection &&\n\t\t\ttypeof newProperties.selection === \"object\"\n\t\t) {\n\t\t\tnewProperties.selection = newProperties.selection.name;\n\t\t}\n\t\t/* selectionText implementation ends here */\n\t\tonWidgetChange({ id: editWidget, props: { ...newProperties } });\n\t}\n\n\ttype = selectedType;\n\tlet errors = {};\n\tif (editWidget && errorList) {\n\t\terrors = errorList[editWidget] || {};\n\t}\n\tconst parentPanel = Object.values(widgets || {}).find(\n\t\t(w) => w.items && w.items.indexOf(editWidget) !== -1\n\t);\n\tif (widget?.type === \"panel-tabs\" && editWidgetType === \"customField\") {\n\t\treturn null;\n\t}\n\tif (\n\t\tproperty?.dependModelType &&\n\t\t`${widget?.tab}` === \"true\" &&\n\t\tproperty?.dependModelType !== modelType\n\t) {\n\t\treturn null;\n\t}\n\treturn (\n\t\t<Grid style={{ padding: 20 }}>\n\t\t\t{type &&\n\t\t\t\tproperty &&\n\t\t\t\t!(\n\t\t\t\t\tstate.modelType === MODEL_TYPE.CUSTOM && property.type === TYPE.tabs\n\t\t\t\t) &&\n\t\t\t\tObject.keys(property.value).map((panel, i) => (\n\t\t\t\t\t<Grid key={i}>\n\t\t\t\t\t\t<Typography\n\t\t\t\t\t\t\tvariant=\"body1\"\n\t\t\t\t\t\t\tclassName={classNames(\n\t\t\t\t\t\t\t\tclasses.panelTitle,\n\t\t\t\t\t\t\t\ti !== 0 && classes.panelMargin\n\t\t\t\t\t\t\t)}\n\t\t\t\t\t\t>\n\t\t\t\t\t\t\t{hasPropertyToShow(property.value[panel], modelType) &&\n\t\t\t\t\t\t\t\ttranslate(capitalizeFirst(panel))}\n\t\t\t\t\t\t</Typography>\n\t\t\t\t\t\t<Grid style={{ display: \"flex\", flexDirection: \"column\" }}>\n\t\t\t\t\t\t\t<PropertiesProvider\n\t\t\t\t\t\t\t\tkey={editWidget}\n\t\t\t\t\t\t\t\telements={property.value[panel]}\n\t\t\t\t\t\t\t\tpropertyList={propertyList}\n\t\t\t\t\t\t\t\tsetPropertyList={setPropertyList}\n\t\t\t\t\t\t\t\tlabelWidth={labelWidth}\n\t\t\t\t\t\t\t\tinputLabel={inputLabel}\n\t\t\t\t\t\t\t\ttype={type}\n\t\t\t\t\t\t\t\tonWidgetChange={onWidgetChange}\n\t\t\t\t\t\t\t\tid={editWidget}\n\t\t\t\t\t\t\t\tonChange={onChange}\n\t\t\t\t\t\t\t\tmodelType={modelType}\n\t\t\t\t\t\t\t\tenableStudioApp={enableStudioApp}\n\t\t\t\t\t\t\t\teditWidgetType={editWidgetType}\n\t\t\t\t\t\t\t\tmetaFieldStore={metaFieldStore}\n\t\t\t\t\t\t\t\terrors={errors}\n\t\t\t\t\t\t\t\tentityType={entityType}\n\t\t\t\t\t\t\t\tactualType={actualType}\n\t\t\t\t\t\t\t\tparentPanel={parentPanel}\n\t\t\t\t\t\t\t\tonTranslationRemove={onTranslationRemove}\n\t\t\t\t\t\t\t\tisStudioLite={isStudioLite}\n\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t<RenderPropertyField />\n\t\t\t\t\t\t\t</PropertiesProvider>\n\t\t\t\t\t\t</Grid>\n\t\t\t\t\t</Grid>\n\t\t\t\t))}\n\t\t</Grid>\n\t);\n}\n","import React from \"react\";\nimport Properties from \"../../Properties\";\n\nexport default React.memo(function PropertiesView() {\n\treturn (\n\t\t<div style={{ color: \"#fff\" }}>\n\t\t\t<Properties />\n\t\t</div>\n\t);\n});\n","import { Drawer } from \"@material-ui/core\";\nimport { makeStyles } from \"@material-ui/core/styles\";\nimport React, { useState } from \"react\";\nimport { Resizable } from \"re-resizable\";\n\nimport { translate } from \"../../utils\";\nimport PropertiesView from \"./PropertiesView\";\n\nconst drawerWidth = 380;\nconst resizeStyle = {\n\tdisplay: \"flex\",\n\talignItems: \"center\",\n\tjustifyContent: \"center\",\n\tborderLeft: \"solid 1px #ddd\",\n\tbackground: \"#f0f0f0\",\n};\n\nconst useStyles = makeStyles({\n\tdrawerPaper: {\n\t\tbackground: \"#2f4050\",\n\t\twidth: \"100%\",\n\t\theight: \"100%\",\n\t\tposition: \"absolute\",\n\t\tborderLeft: \"1px solid #2f4050\",\n\t\toverflow: \"auto\",\n\t},\n\tpropertyToggle: {\n\t\tposition: \"absolute\",\n\t\tleft: \"-30px\",\n\t\ttop: \"calc(50% + 60px)\",\n\t\tbackground: \"#293846\",\n\t\tcolor: \"white\",\n\t\tpadding: \"5px 20px 7px 20px\",\n\t\ttransform: \"rotate(-90deg)\",\n\t\twhiteSpace: \"nowrap\",\n\t\tfontSize: \"13px\",\n\t\tborder: \"solid 1px #293846\",\n\t\tborderBottom: \"none\",\n\t\tborderRadius: \"5px 5px 0 0\",\n\t\ttransformOrigin: \"top left\",\n\t\tzIndex: \"10\",\n\t\tcursor: \"default\",\n\t\tuserSelect: \"none\",\n\t\tboxShadow: \"1px 2px 8px 0px rgb(1 1 1 / 75%) !important\",\n\t},\n\tcontainer: {\n\t\tposition: \"sticky\",\n\t\ttop: \"0px\",\n\t\theight: \"100vh\",\n\t},\n});\nexport default React.memo(function PropertiesPanel() {\n\tconst classes = useStyles();\n\tconst [drawerOpen, setDrawerOpen] = useState(true);\n\tconst [width, setWidth] = useState(drawerWidth);\n\tconst [height, setHeight] = useState(\"100%\");\n\n\tconst setCSSWidth = (width) => {\n\t\tsetDrawerOpen(width === \"0px\" ? false : true);\n\t};\n\n\tReact.useEffect(() => {\n\t\tconst checkWindowSize = () => {\n\t\t\tif (drawerOpen) {\n\t\t\t\tsetWidth((prev) =>\n\t\t\t\t\twindow.innerWidth - prev < drawerWidth\n\t\t\t\t\t\t? window.innerWidth - drawerWidth\n\t\t\t\t\t\t: prev < drawerWidth\n\t\t\t\t\t\t? window.innerWidth - prev\n\t\t\t\t\t\t: prev\n\t\t\t\t);\n\t\t\t}\n\t\t};\n\t\twindow.addEventListener(\"resize\", checkWindowSize);\n\n\t\treturn () => {\n\t\t\twindow.removeEventListener(\"resize\", checkWindowSize);\n\t\t};\n\t});\n\n\treturn (\n\t\t<div className={classes.container}>\n\t\t\t<Resizable\n\t\t\t\tstyle={resizeStyle}\n\t\t\t\tsize={{ width, height }}\n\t\t\t\tonResizeStop={(e, direction, ref, d) => {\n\t\t\t\t\tsetWidth((width) => width + d.width);\n\t\t\t\t\tsetHeight(height + d.height);\n\t\t\t\t\tsetCSSWidth(`${width + d.width}px`);\n\t\t\t\t}}\n\t\t\t\tmaxWidth={window.innerWidth - drawerWidth}\n\t\t\t\tminHeight={height}\n\t\t\t\tenable={{\n\t\t\t\t\tleft: true,\n\t\t\t\t}}\n\t\t\t>\n\t\t\t\t<Drawer\n\t\t\t\t\tvariant=\"persistent\"\n\t\t\t\t\tanchor=\"right\"\n\t\t\t\t\topen={drawerOpen}\n\t\t\t\t\tstyle={{\n\t\t\t\t\t\twidth: drawerWidth,\n\t\t\t\t\t}}\n\t\t\t\t\tclasses={{\n\t\t\t\t\t\tpaper: classes.drawerPaper,\n\t\t\t\t\t}}\n\t\t\t\t\ttransitionDuration={0}\n\t\t\t\t>\n\t\t\t\t\t<PropertiesView />\n\t\t\t\t</Drawer>\n\t\t\t\t<div\n\t\t\t\t\tclassName={classes.propertyToggle}\n\t\t\t\t\tonClick={() => {\n\t\t\t\t\t\tsetWidth((width) => (width === 0 ? drawerWidth : 0));\n\t\t\t\t\t\tsetCSSWidth(`${width === 0 ? drawerWidth : 0}px`);\n\t\t\t\t\t}}\n\t\t\t\t>\n\t\t\t\t\t{translate(\"Properties\")}\n\t\t\t\t</div>\n\t\t\t</Resizable>\n\t\t</div>\n\t);\n});\n","import React from \"react\";\nimport { Grid, Tooltip } from \"@material-ui/core\";\nimport { makeStyles } from \"@material-ui/core/styles\";\n\nimport { translate } from \"../utils\";\n\nconst useStyles = makeStyles({\n\tfieldImage: {\n\t\tdisplay: \"flex\",\n\t\tjustifyContent: \"center\",\n\t\talignItems: \"center\",\n\t\tpadding: 15,\n\t},\n\ticon: {\n\t\twidth: 25,\n\t\theight: 25,\n\t\tbackgroundRepeat: \"no-repeat\",\n\t\tbackgroundSize: \"contain\",\n\t\tbackgroundPosition: \"center\",\n\t\tposition: \"absolute\",\n\t},\n});\n\nconst getImageURL = (widget) => {\n\tconst type = widget.serverType || widget.type;\n\tif (type && type.indexOf(\"datetime\") !== -1) {\n\t\treturn \"datetime.png\";\n\t}\n\tif (type && type.indexOf(\"date\") !== -1) {\n\t\treturn \"date.png\";\n\t}\n\tif (type && type.indexOf(\"time\") !== -1) {\n\t\treturn \"time.png\";\n\t}\n\tif (type && type.indexOf(\"decimal\") !== -1) {\n\t\treturn \"decimal.png\";\n\t}\n\tif (widget.image) {\n\t\treturn widget.image;\n\t}\n\treturn `${type}.png`;\n};\n\nexport function FieldComponent(props) {\n\tconst classes = useStyles();\n\tconst { attrs, targetName } = props;\n\treturn (\n\t\t<div>\n\t\t\t<Tooltip\n\t\t\t\tarrow\n\t\t\t\ttitle={translate(attrs.title || attrs[targetName] || attrs[\"name\"])}\n\t\t\t\tplacement=\"right\"\n\t\t\t>\n\t\t\t\t<Grid className={classes.fieldImage}>\n\t\t\t\t\t<div\n\t\t\t\t\t\tclassName={classes.icon}\n\t\t\t\t\t\tstyle={{\n\t\t\t\t\t\t\tbackgroundImage: `url(./images/${getImageURL(attrs)})`,\n\t\t\t\t\t\t}}\n\t\t\t\t\t/>\n\t\t\t\t</Grid>\n\t\t\t</Tooltip>\n\t\t</div>\n\t);\n}\n\nexport default FieldComponent;\n","import React from \"react\";\nimport { makeStyles } from \"@material-ui/core/styles\";\nimport classNames from \"classnames\";\n\nconst useStyles = makeStyles((theme) => ({\n\tfield: {\n\t\t[theme.breakpoints.down(\"sm\")]: {\n\t\t\twidth: \"100%\",\n\t\t},\n\t},\n}));\n\nexport default function Field(props) {\n\tconst classes = useStyles();\n\treturn (\n\t\t<div {...props} className={classNames(classes.field, props.className)} />\n\t);\n}\n","import React from \"react\";\nimport { Divider, Container, Grid, useMediaQuery } from \"@material-ui/core\";\nimport { makeStyles } from \"@material-ui/core/styles\";\n\nimport { fieldTypes, modelFields } from \"../../fields\";\nimport FieldComponent from \"../../components/FieldComponent\";\nimport Widget from \"../../components/Widget\";\nimport Field from \"./Field\";\nimport { useStore } from \"../../store/context\";\nimport { MODEL_TYPE, TYPE } from \"../../constants\";\nimport classNames from \"classnames\";\n\nconst useStyles = makeStyles((theme) => ({\n\tcontainer: {\n\t\twidth: \"min-content\",\n\t\theight: \"fit-content\",\n\t\tbackgroundColor: \"#fafafa\",\n\t\tborder: \"1px solid lightgray\",\n\t\tpadding: \"0\",\n\t\tmargin: \"1rem 0\",\n\t\tborderRadius: 5,\n\t\tmarginTop: 14,\n\t\tboxShadow: \"1px 2px 8px 0px rgb(1 1 1 / 50%) !important\",\n\t},\n\tattributeItem: {\n\t\t\"&:hover\": {\n\t\t\tbackgroundColor: \"rgb(41 56 70 / 35%)\",\n\t\t},\n\t},\n\tdivider: {\n\t\tmargin: \"4px\",\n\t\tbackground: \"gray\",\n\t},\n\twidget: {\n\t\tborder: \"none !important\",\n\t\tboxShadow: \"none\",\n\t\tpadding: \"5px 0\",\n\t},\n}));\n\nexport default React.memo(function AddPanelView({ toolbarOffset }) {\n\tconst classes = useStyles();\n\tconst { state } = useStore();\n\tconst { isStudioLite } = state;\n\n\tconst isResponsive = useMediaQuery(`(max-height: ${720 + toolbarOffset}px)`);\n\tconst fields = [...fieldTypes, ...modelFields].filter((e) => {\n\t\tif (e.name === \"Menu\" && state.modelType === MODEL_TYPE.CUSTOM) {\n\t\t\treturn false;\n\t\t}\n\t\treturn true;\n\t});\n\n\tconst showField = (field) => {\n\t\tif ([TYPE.menubar, TYPE.toolbar].includes(field.type) && state.widgets) {\n\t\t\tconst index = Object.values(state.widgets).findIndex(\n\t\t\t\t(w) => w.type === field.type\n\t\t\t);\n\t\t\treturn index === -1;\n\t\t} else if (isStudioLite && field.name === \"oneToMany\") {\n\t\t\treturn false;\n\t\t}\n\t\treturn true;\n\t};\n\n\treturn (\n\t\t<Container className={classNames(classes.container, \"toolbar-pallete\")}>\n\t\t\t{fields.map(\n\t\t\t\t(fieldType, index) =>\n\t\t\t\t\t(!isStudioLite ||\n\t\t\t\t\t\t(isStudioLite &&\n\t\t\t\t\t\t\t[\"Fields\", \"Relational fields\"].includes(fieldType.name))) && (\n\t\t\t\t\t\t<React.Fragment key={index}>\n\t\t\t\t\t\t\t<Grid container style={{ width: isResponsive ? \"80px\" : \"40px\" }}>\n\t\t\t\t\t\t\t\t{fieldType.value &&\n\t\t\t\t\t\t\t\t\tfieldType.value.map((field, i) => {\n\t\t\t\t\t\t\t\t\t\tif (\n\t\t\t\t\t\t\t\t\t\t\tfield.editorType &&\n\t\t\t\t\t\t\t\t\t\t\t!field.editorType.includes(state.modelType)\n\t\t\t\t\t\t\t\t\t\t) {\n\t\t\t\t\t\t\t\t\t\t\treturn null;\n\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\tif (!showField(field)) {\n\t\t\t\t\t\t\t\t\t\t\treturn null;\n\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\treturn (\n\t\t\t\t\t\t\t\t\t\t\t<Grid\n\t\t\t\t\t\t\t\t\t\t\t\titem\n\t\t\t\t\t\t\t\t\t\t\t\txs={isResponsive ? 6 : 12}\n\t\t\t\t\t\t\t\t\t\t\t\tclassName={classes.attributeItem}\n\t\t\t\t\t\t\t\t\t\t\t\tkey={i}\n\t\t\t\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t\t\t\t<Field key={i}>\n\t\t\t\t\t\t\t\t\t\t\t\t\t<Widget\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tid={field.id}\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tattrs={field}\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tdesign={true}\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tcomponent={FieldComponent}\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tisCoreField={true}\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tisPalleteField={true}\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tclassName={classes.widget}\n\t\t\t\t\t\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t\t\t\t\t</Field>\n\t\t\t\t\t\t\t\t\t\t\t</Grid>\n\t\t\t\t\t\t\t\t\t\t);\n\t\t\t\t\t\t\t\t\t})}\n\t\t\t\t\t\t\t</Grid>\n\t\t\t\t\t\t\t{index < fields.length - 1 && (\n\t\t\t\t\t\t\t\t<Divider className={classes.divider} />\n\t\t\t\t\t\t\t)}\n\t\t\t\t\t\t</React.Fragment>\n\t\t\t\t\t)\n\t\t\t)}\n\t\t</Container>\n\t);\n});\n","import React from \"react\";\nimport { Grid } from \"@material-ui/core\";\nimport {\n\tmakeStyles,\n\tcreateTheme,\n\tThemeProvider,\n} from \"@material-ui/core/styles\";\nimport { DndProvider } from \"react-dnd\";\nimport Backend from \"react-dnd-html5-backend\";\nimport MainPanel from \"./Panels/MainPanel\";\nimport Toolbar from \"./Toolbar/ToolbarContainer\";\nimport StudioProvider, { useStore } from \"./store/context\";\nimport PropertiesPanel from \"./Panels/PropertiesPanel/PropertiesPanelView\";\nimport AddPanelView from \"./Panels/AttributesPanel/AddPanelView\";\nimport {\n\tfetchLanguages,\n\tfetchUserPreferences,\n\tgetEnableAppBuilder,\n\tmetaJsonFieldService,\n} from \"./Toolbar/api\";\nimport AxelorService from \"./services/axelor.rest\";\nimport { generateCustomModelSchema } from \"./utils\";\nimport { ENTITY_TYPE } from \"./constants\";\n\nconst useStyles = makeStyles({\n\ttoolbarWrapper: {\n\t\tpaddingRight: \"1rem\",\n\t},\n\tpanelContainer: {\n\t\tdisplay: \"flex\",\n\t\tpadding: \"0 0 0 1rem\",\n\t},\n\tpropertiesPanel: {\n\t\t\".modern-dark &\": {\n\t\t\tbackgroundColor: \"#202124\",\n\t\t},\n\t},\n\tmainPanel: {\n\t\theight: \"100vh\",\n\t\toverflow: \"auto\",\n\t\t\".modern-dark &\": {\n\t\t\tbackgroundColor: \"#202124\",\n\t\t},\n\t},\n\tcontainer: { display: \"flex\" },\n});\n\nconst theme = createTheme({\n\ttypography: {\n\t\tfontFamily: '\"Open Sans\", \"Helvetica Neue\", Helvetica, Arial, sans-serif',\n\t},\n});\n\nconst getParams = () => {\n\tconst params = new URL(document.location).searchParams;\n\tconst isStudioLite = params.get(\"isStudioLite\");\n\tconst model = params.get(\"model\");\n\tconst modelTitle = params.get(\"modelTitle\");\n\treturn {\n\t\tisStudioLite,\n\t\tmodel,\n\t\tmodelTitle,\n\t};\n};\n\nfunction AppContent() {\n\tconst classes = useStyles();\n\tconst { update, state } = useStore();\n\tconst { past = [], future = [] } = state;\n\tconst [toolbarHeight, setToolbarHeight] = React.useState();\n\tconst gridRef = React.useRef();\n\tconst mainContainerRef = React.useRef();\n\tconst toolbarSelector = `.${classes.toolbarWrapper}`;\n\n\tconst alertUser = (event) => {\n\t\tevent.preventDefault();\n\t\tevent.returnValue = \"Are you sure you want to close the tab?\";\n\t};\n\n\tconst fetchJSONFields = React.useCallback(\n\t\t(ids, record) => {\n\t\t\tconst criteria = [];\n\t\t\tif (ids.length) {\n\t\t\t\tcriteria.push({ fieldName: \"id\", operator: \"in\", value: ids });\n\t\t\t\tconst data = {\n\t\t\t\t\tcriteria,\n\t\t\t\t};\n\t\t\t\tmetaJsonFieldService\n\t\t\t\t\t.search({ data, sortBy: [\"sequence\"] })\n\t\t\t\t\t.then((res) => {\n\t\t\t\t\t\tif (res.data) {\n\t\t\t\t\t\t\tconst list = res.data || [];\n\t\t\t\t\t\t\tconst schema = generateCustomModelSchema(list, record);\n\t\t\t\t\t\t\tupdate((draft) => {\n\t\t\t\t\t\t\t\tdraft.widgets = {\n\t\t\t\t\t\t\t\t\t...schema.widgets,\n\t\t\t\t\t\t\t\t};\n\t\t\t\t\t\t\t\tdraft.items = schema.items;\n\t\t\t\t\t\t\t\tdraft.loader = false;\n\t\t\t\t\t\t\t});\n\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\tupdate((draft) => {\n\t\t\t\t\t\t\t\tdraft.loader = false;\n\t\t\t\t\t\t\t});\n\t\t\t\t\t\t}\n\t\t\t\t\t});\n\t\t\t} else {\n\t\t\t\tconst schema = generateCustomModelSchema([], record);\n\t\t\t\tupdate((draft) => {\n\t\t\t\t\tdraft.widgets = {\n\t\t\t\t\t\t...schema.widgets,\n\t\t\t\t\t};\n\t\t\t\t\tdraft.items = schema.items;\n\t\t\t\t\tdraft.loader = false;\n\t\t\t\t\tdraft.model = record;\n\t\t\t\t\tdraft.customModel = record;\n\t\t\t\t\tdraft.editWidget = -1;\n\t\t\t\t\tdraft.editWidgetType = null;\n\t\t\t\t});\n\t\t\t}\n\t\t},\n\t\t[update]\n\t);\n\n\tReact.useEffect(() => {\n\t\tfetchLanguages().then((result) => {\n\t\t\tupdate((draft) => {\n\t\t\t\tdraft.languageList = [...result];\n\t\t\t});\n\t\t});\n\t\tfetchUserPreferences().then((result) => {\n\t\t\tif ((result?.theme || \"\").includes(\"dark\")) {\n\t\t\t\tdocument.body.className = result?.theme;\n\t\t\t}\n\t\t});\n\n\t\tgetEnableAppBuilder().then((res) => {\n\t\t\tupdate((draft) => {\n\t\t\t\tdraft.enableStudioApp = res;\n\t\t\t});\n\t\t});\n\t}, [update]);\n\n\tReact.useEffect(() => {\n\t\tconst grid = gridRef.current;\n\t\tgrid && grid.focus();\n\t}, []);\n\n\tReact.useEffect(() => {\n\t\tconst toolbar = document.querySelector(toolbarSelector);\n\n\t\tif (toolbar) {\n\t\t\tconst resizeObserver = new ResizeObserver(() => {\n\t\t\t\tsetToolbarHeight(toolbar.offsetHeight);\n\t\t\t});\n\n\t\t\tresizeObserver.observe(toolbar);\n\t\t\treturn () => resizeObserver.unobserve(toolbar);\n\t\t}\n\t}, [toolbarSelector]);\n\n\tReact.useEffect(() => {\n\t\twindow.top && window.top.addEventListener(\"beforeunload\", alertUser);\n\t\treturn () => {\n\t\t\twindow.top && window.top.removeEventListener(\"beforeunload\", alertUser);\n\t\t};\n\t});\n\n\tReact.useEffect(() => {\n\t\tconst scope =\n\t\t\twindow.top &&\n\t\t\twindow.top.angular &&\n\t\t\twindow.top.angular\n\t\t\t\t.element(\n\t\t\t\t\twindow.top.document.querySelector(\n\t\t\t\t\t\t'[ng-repeat=\"tab in navTabs\"][class=\"ng-scope active\"] [ng-click=\"closeTab(tab)\"]'\n\t\t\t\t\t)\n\t\t\t\t)\n\t\t\t\t.scope();\n\t\tif (!scope?.tab?.$viewScope) return;\n\t\tscope.tab.$viewScope.confirmDirty = function (callback, cancelCallback) {\n\t\t\ttry {\n\t\t\t\tconst isDirty = past?.length > 0 || future?.length > 0;\n\t\t\t\tif (!isDirty) {\n\t\t\t\t\treturn callback && callback();\n\t\t\t\t} else {\n\t\t\t\t\twindow.top.axelor.dialogs.confirm(\n\t\t\t\t\t\twindow.top._t(\n\t\t\t\t\t\t\t\"Current changes will be lost. Do you really want to proceed?\"\n\t\t\t\t\t\t),\n\t\t\t\t\t\t(confirmed) => {\n\t\t\t\t\t\t\tif (!confirmed) {\n\t\t\t\t\t\t\t\treturn cancelCallback && cancelCallback();\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\treturn callback && callback();\n\t\t\t\t\t\t}\n\t\t\t\t\t);\n\t\t\t\t}\n\t\t\t} catch (error) {\n\t\t\t\tconsole.error(error);\n\t\t\t}\n\t\t};\n\t}, [future.length, past.length]);\n\n\tReact.useEffect(() => {\n\t\tconst { isStudioLite, model, modelTitle } = getParams();\n\t\tasync function init() {\n\t\t\tif (!isStudioLite || !model) return;\n\t\t\tconst metaModelService = new AxelorService({\n\t\t\t\tmodel: \"com.axelor.meta.db.MetaJsonModel\",\n\t\t\t});\n\t\t\tlet data = {\n\t\t\t\trelated: {\n\t\t\t\t\tmenuBuilder: [\"title\", \"parentMenu\"],\n\t\t\t\t},\n\t\t\t\tdata: {\n\t\t\t\t\t_domain: `name = '${model}'`,\n\t\t\t\t},\n\t\t\t};\n\t\t\tupdate((draft) => {\n\t\t\t\tdraft.loader = true;\n\t\t\t});\n\t\t\tconst res = await metaModelService.search(data);\n\t\t\tif (res.data) {\n\t\t\t\tconst record = res.data[0];\n\t\t\t\tconst { fields = [], ...rest } = record;\n\t\t\t\tupdate((draft) => {\n\t\t\t\t\tdraft.model = { ...record, entityType: ENTITY_TYPE.META };\n\t\t\t\t\tdraft.entityType = ENTITY_TYPE.META;\n\t\t\t\t\tdraft.widgets = null;\n\t\t\t\t\tdraft.initialWidgets = null;\n\t\t\t\t\tdraft.items = [];\n\t\t\t\t\tdraft.initialItems = null;\n\t\t\t\t\tdraft.view = null;\n\t\t\t\t\tdraft.exView = null;\n\t\t\t\t\tdraft.modelField = null;\n\t\t\t\t\tdraft.customFields = [];\n\t\t\t\t\tdraft.customFieldWidgets = null;\n\t\t\t\t\tdraft.originalXML = null;\n\t\t\t\t\tdraft.extensionXML = null;\n\t\t\t\t\tdraft.extensionView = null;\n\t\t\t\t\tdraft.extensionMoves = [];\n\t\t\t\t\tdraft.errorList = {};\n\t\t\t\t\tdraft.attrsList = [];\n\t\t\t\t\tdraft.translationList = [];\n\t\t\t\t\tdraft.initialTranslationList = [];\n\t\t\t\t\tdraft.removedTranslationList = [];\n\t\t\t\t\tdraft.selectedView = null;\n\t\t\t\t\tdraft.editWidget = -1;\n\t\t\t\t\tdraft.editWidgetType = null;\n\t\t\t\t\tdraft.tabIndex = 0;\n\t\t\t\t\tfetchJSONFields(\n\t\t\t\t\t\tfields.map((f) => f.id),\n\t\t\t\t\t\trest\n\t\t\t\t\t);\n\t\t\t\t\tdraft.customModel = record;\n\t\t\t\t});\n\t\t\t}\n\t\t}\n\t\tinit();\n\t\tupdate((draft) => {\n\t\t\tdraft.isStudioLite = JSON.parse(isStudioLite || \"false\");\n\t\t\tdraft.queryModel = { title: modelTitle || model, name: model };\n\t\t});\n\t}, [update, fetchJSONFields]);\n\n\treturn (\n\t\t<Grid className={classes.container} ref={gridRef}>\n\t\t\t<Grid container>\n\t\t\t\t<Grid item xs={12} className={classes.toolbarWrapper}>\n\t\t\t\t\t<Toolbar />\n\t\t\t\t</Grid>\n\t\t\t\t<Grid item xs className={classes.panelContainer} ref={mainContainerRef}>\n\t\t\t\t\t<AddPanelView toolbarOffset={toolbarHeight} />\n\t\t\t\t\t<MainPanel\n\t\t\t\t\t\tclassName={classes.mainPanel}\n\t\t\t\t\t\ttoolbarOffset={toolbarHeight}\n\t\t\t\t\t/>\n\t\t\t\t</Grid>\n\t\t\t</Grid>\n\t\t\t<Grid>\n\t\t\t\t<PropertiesPanel />\n\t\t\t</Grid>\n\t\t</Grid>\n\t);\n}\n\nexport default function App() {\n\treturn (\n\t\t<StudioProvider>\n\t\t\t<DndProvider backend={Backend}>\n\t\t\t\t<ThemeProvider theme={theme}>\n\t\t\t\t\t<AppContent />\n\t\t\t\t</ThemeProvider>\n\t\t\t</DndProvider>\n\t\t</StudioProvider>\n\t);\n}\n","import React from \"react\";\nimport ReactDOM from \"react-dom\";\nimport \"./index.css\";\nimport \"./theme.css\";\nimport App from \"./App\";\n\nReactDOM.render(<App />, document.getElementById(\"root\"));\n","import axios from \"axios\";\n\nconst headers = {\n\t\"X-Requested-With\": \"XMLHttpRequest\",\n\t\"Content-Type\": \"application/json\",\n\tAccept: \"application/json\",\n};\nlet lastCookieString;\nlet lastCookies = {};\n\nfunction readCookie(name) {\n\tlet cookieString = document.cookie || \"\";\n\tif (cookieString !== lastCookieString) {\n\t\tlastCookieString = cookieString;\n\t\tlastCookies = cookieString.split(\"; \").reduce((obj, value) => {\n\t\t\tlet parts = value.split(\"=\");\n\t\t\tobj[parts[0]] = parts[1];\n\t\t\treturn obj;\n\t\t}, {});\n\t}\n\treturn lastCookies[name];\n}\n\nclass service {\n\tconstructor(props) {\n\t\tthis.baseURL =\n\t\t\tprocess.env.NODE_ENV === \"production\" ? \"../../\" : \"/axelor-erp/\";\n\t}\n\n\trequest(url, method, data) {\n\t\tlet options = {};\n\t\tif (method !== \"get\") {\n\t\t\toptions[\"data\"] = data;\n\t\t}\n\t\treturn axios({\n\t\t\tmethod: method,\n\t\t\tbaseURL: this.baseURL,\n\t\t\theaders: {\n\t\t\t\t...headers,\n\t\t\t\t\"X-CSRF-Token\": readCookie(\"CSRF-TOKEN\"),\n\t\t\t},\n\t\t\turl,\n\t\t\t...options,\n\t\t});\n\t}\n\n\tinterceptor(url, method, data) {\n\t\treturn this.request(url, method, data)\n\t\t\t.then((result) => {\n\t\t\t\tif (result.status === 200) {\n\t\t\t\t\treturn result.data || { status: result.status };\n\t\t\t\t} else if (result.status === 401) {\n\t\t\t\t\tconst credential = localStorage.getItem(\"credential\");\n\t\t\t\t\tif (credential) {\n\t\t\t\t\t\tconst { username, password } = JSON.parse(credential);\n\t\t\t\t\t\treturn this.login(username, password).then((res) => {\n\t\t\t\t\t\t\tif (res.status === 200) {\n\t\t\t\t\t\t\t\treturn this.interceptor(url, method, data);\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t});\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\treturn Promise.resolve(\"Error\");\n\t\t\t})\n\t\t\t.catch((e) => {\n\t\t\t\tif (e.response && e.response.status === 401) {\n\t\t\t\t\treturn this.relogin(url, method, data);\n\t\t\t\t}\n\t\t\t});\n\t}\n\n\trelogin(url, method, data) {\n\t\tconst credential = localStorage.getItem(\"credential\");\n\t\tif (credential) {\n\t\t\tconst { username, password } = JSON.parse(credential);\n\t\t\treturn this.login(username, password).then((res) => {\n\t\t\t\tif (res.status === 200) {\n\t\t\t\t\treturn this.interceptor(url, method, data);\n\t\t\t\t}\n\t\t\t});\n\t\t}\n\t}\n\n\tget(url) {\n\t\treturn this.interceptor(url, \"get\");\n\t}\n\n\tpost(url, data = {}) {\n\t\treturn this.interceptor(url, \"post\", data);\n\t}\n\n\tdelete(url, data) {\n\t\treturn this.interceptor(url, \"delete\", data);\n\t}\n\n\tlogin(username, password) {\n\t\tconst data = { username, password };\n\t\treturn this.interceptor(\"login.jsp\", \"post\", data).then((res) => {\n\t\t\tif (res.status === 200) {\n\t\t\t\tlocalStorage.setItem(\n\t\t\t\t\t\"credential\",\n\t\t\t\t\tJSON.stringify({ username, password })\n\t\t\t\t);\n\t\t\t}\n\t\t\treturn { status: res.status };\n\t\t});\n\t}\n\n\tlogout() {\n\t\treturn this.interceptor(\"logout\").then(() => {\n\t\t\tlocalStorage.removeItem(\"credential\");\n\t\t});\n\t}\n}\n\nexport default service;\n","import httpService from \"./http\";\n\nconst joinURL = (model, subURL) => {\n\treturn `ws/rest/${model}/${subURL}`;\n};\n\nconst services = new httpService();\n\nclass AxelorService {\n\tconstructor(props) {\n\t\tthis.model = props.model;\n\t}\n\n\tsearch({ fields, sortBy, data, limit, offset }) {\n\t\tconst _subURL = `search`;\n\t\tconst url = joinURL(this.model, _subURL);\n\t\treturn services.post(url, { fields, sortBy, data, limit, offset });\n\t}\n\n\tfetch(id, data) {\n\t\tconst _subURL = `${id}/fetch`;\n\t\tconst url = joinURL(this.model, _subURL);\n\t\treturn services.post(url, data);\n\t}\n\n\tview(data) {\n\t\tconst url = \"/ws/meta/view\";\n\t\treturn services.post(url, data);\n\t}\n\n\tsave(data) {\n\t\tconst url = joinURL(this.model, \"\");\n\t\treturn services.post(url, { data });\n\t}\n\n\tsaveAll(data) {\n\t\tconst url = joinURL(this.model, \"\");\n\t\treturn services.post(url, { records: data });\n\t}\n\n\tremoveAll(records) {\n\t\tconst url = joinURL(this.model, \"removeAll\");\n\t\treturn services.post(url, { records });\n\t}\n\n\tlogin(username, password) {\n\t\treturn services.login(username, password);\n\t}\n\n\tlogout() {\n\t\treturn services.logout();\n\t}\n\n\taction(data) {\n\t\tconst url = \"ws/action\";\n\t\treturn services.post(url, data);\n\t}\n\n\tinfo() {\n\t\tconst url = \"ws/app/info\";\n\t\treturn services.get(url);\n\t}\n}\n\nexport default AxelorService;\n","import React from \"react\";\nimport produce from \"immer\";\nimport _ from \"lodash\";\n\nimport {\n\tTYPE,\n\tIDS,\n\tPANEL_TYPE,\n\tMODEL_TYPE,\n\tENTITY_TYPE,\n\tPANEL_PROPS,\n} from \"../constants\";\nimport {\n\treorderGrid,\n\tcheckExclusive,\n\tarrangeGrid,\n\tsetErrorList,\n\tcaseConverter,\n} from \"../utils\";\nimport { original } from \"immer\";\nimport { generateExtension } from \"./computeXML\";\nimport { generateXpath } from \"./xpathGenerator\";\nimport { validateParentPanelItems, validateOnRemove } from \"./validation\";\nimport Utils, { isExtensionView } from \"./../utils\";\n\nconst StoreContext = React.createContext();\n\nfunction useMutableState(defaultValue) {\n\tconst [state, setState] = React.useState(defaultValue);\n\treturn [\n\t\tstate,\n\t\tReact.useCallback((updater) => setState(produce(updater)), [setState]),\n\t];\n}\n\nfunction StoreProvider({ children }) {\n\t/*\n\tWARNING: Never nest two setState calls(windows-all_browsers/firefox-linux bugs),\n\tEx: funtion NeverDoIt(){\n\t\tsetState((draft)=>{\n\t\t\t...some code...\n\t\t\tonRemove()   <-- this function calls setState within it\n\t\t})\n\t}\n\t*/\n\tconst [state, setState] = useMutableState({\n\t\tfuture: [],\n\t\tpast: [],\n\t\ttitle: \"\",\n\t\titems: [],\n\t\twidgets: null,\n\t\tdragWidget: null,\n\t\teditWidget: null,\n\t\thoverWidget: null,\n\t\tinitialWidgets: null,\n\t\tinitialItems: null,\n\t\ttabIndex: 0,\n\t\tmodelType: \"BASE\",\n\t\tcustomFields: [],\n\t\tcustomFieldItems: [],\n\t\tcustomFieldWidgets: null,\n\t\tmodelField: null,\n\t\thoverAttr: {},\n\t\tloader: false,\n\t\tremovedCustomFields: [],\n\t\terrorList: {},\n\t\tentityType: ENTITY_TYPE.META,\n\t\tactualType: null,\n\t\textensionMoves: [],\n\t\tattrsList: [],\n\t\tremovedTranslationList: [],\n\t\tisStudioLite: false\n\t});\n\tconst { widgets } = state;\n\n\tfunction getAllChildrenIds(id, widgetType) {\n\t\tconst widgets =\n\t\t\twidgetType === \"customField\" ? state.customFieldWidgets : state.widgets;\n\t\tconst collectIds = (parent) => {\n\t\t\tconst { items = [] } = widgets[parent];\n\t\t\treturn items.reduce(\n\t\t\t\t(all, item) => all.concat(collectIds(item)),\n\t\t\t\t[parent]\n\t\t\t);\n\t\t};\n\t\treturn collectIds(id);\n\t}\n\n\tfunction onExtension(moveIds, state) {\n\t\tif (state.exView && !Utils.isCreatedFromStudio(state.exView)) {\n\t\t\tgenerateExtension(moveIds, state);\n\t\t}\n\t}\n\n\t// update widget properties\n\t// pass draft if calling from inside another immer setState\n\tfunction onWidgetChange({ id, props, reset = false }, draft) {\n\t\tconst callbackfn = (draft) => {\n\t\t\tgenerateHistory(draft);\n\t\t\tconst isCustomField = draft.editWidgetType === \"customField\";\n\t\t\tconst extendList = [];\n\t\t\tsetErrorList(props, draft, id, isCustomField);\n\t\t\tconst widgets =\n\t\t\t\tdraft.editWidgetType === \"customField\"\n\t\t\t\t\t? draft.customFieldWidgets\n\t\t\t\t\t: draft.widgets;\n\t\t\tif (reset) {\n\t\t\t\twidgets[id] = {};\n\t\t\t}\n\t\t\tconst widget =\n\t\t\t\tdraft.editWidgetType === \"customField\" && draft.customFieldWidgets\n\t\t\t\t\t? draft.customFieldWidgets[id]\n\t\t\t\t\t: draft.widgets && draft.widgets[id];\n\t\t\tif (widget) {\n\t\t\t\tObject.keys(props).forEach((key) => {\n\t\t\t\t\tlet value = props[key];\n\t\t\t\t\tif (/^[a-z]/i.test(widget[\"name\"])) {\n\t\t\t\t\t\twidget[\"name\"] = caseConverter(\n\t\t\t\t\t\t\twidget[\"name\"],\n\t\t\t\t\t\t\t!(props[\"type\"] === TYPE.form)\n\t\t\t\t\t\t);\n\t\t\t\t\t}\n\t\t\t\t\tlet doChange = true;\n\t\t\t\t\t// add change in move\n\t\t\t\t\tconst _value = widget[key] === undefined ? \"\" : widget[key];\n\t\t\t\t\tif (_value !== value) {\n\t\t\t\t\t\tconst xPath = id === -1 ? \"/\" : widgets[id].xPath;\n\t\t\t\t\t\tlet _value = [undefined, null].includes(value) ? \"\" : value;\n\n\t\t\t\t\t\tisExtensionView(state) &&\n\t\t\t\t\t\t\textendList.push({\n\t\t\t\t\t\t\t\tname: \"attribute\",\n\t\t\t\t\t\t\t\ttarget: xPath,\n\t\t\t\t\t\t\t\tattributes: {\n\t\t\t\t\t\t\t\t\tname: Utils.keyReplacer(key, MODEL_TYPE.BASE),\n\t\t\t\t\t\t\t\t\tvalue: Utils.valueConverter(_value, key),\n\t\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t\tid,\n\t\t\t\t\t\t\t});\n\t\t\t\t\t}\n\t\t\t\t\tif (key === \"colSpan\") {\n\t\t\t\t\t\tconst parentId = Object.keys(widgets).find(\n\t\t\t\t\t\t\t(x) => (widgets[x].items || []).indexOf(id) > -1\n\t\t\t\t\t\t);\n\t\t\t\t\t\tvalue = Math.min(\n\t\t\t\t\t\t\tNumber((widgets[parentId] && widgets[parentId].cols) || value),\n\t\t\t\t\t\t\tvalue\n\t\t\t\t\t\t);\n\t\t\t\t\t\tif (widgets && parentId && widgets[parentId].type === TYPE.panel) {\n\t\t\t\t\t\t\tconst { itemSpan } = JSON.parse(\n\t\t\t\t\t\t\t\t(widgets[parentId] || {}).widgetAttrs || \"{}\"\n\t\t\t\t\t\t\t);\n\t\t\t\t\t\t\tvalue = itemSpan || value;\n\t\t\t\t\t\t}\n\t\t\t\t\t} else if (key === \"cols\" && value) {\n\t\t\t\t\t\tvalue = Math.min(12, Number(value));\n\t\t\t\t\t} else if (key === \"widgetAttrs\") {\n\t\t\t\t\t\tconst newValue = JSON.parse(value || \"{}\");\n\t\t\t\t\t\tconst items = widgets[id].items;\n\t\t\t\t\t\titems &&\n\t\t\t\t\t\t\titems.forEach((item) => {\n\t\t\t\t\t\t\t\tconst child = widgets[item];\n\t\t\t\t\t\t\t\tlet widgetAttrs = JSON.parse(child.widgetAttrs || \"{}\");\n\t\t\t\t\t\t\t\tif (!widgetAttrs[\"colSpan\"]) {\n\t\t\t\t\t\t\t\t\tchild.colSpan = newValue.itemSpan;\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t});\n\t\t\t\t\t}\n\t\t\t\t\tif (doChange) {\n\t\t\t\t\t\twidget[key] = value;\n\t\t\t\t\t\tkey === \"layout\" &&\n\t\t\t\t\t\t\tvalue === PANEL_TYPE.stack &&\n\t\t\t\t\t\t\t(widget.cols = 12);\n\t\t\t\t\t}\n\t\t\t\t});\n\t\t\t}\n\t\t\tif (\n\t\t\t\tdraft.editWidgetType !== \"customField\" &&\n\t\t\t\tdraft.modelType === MODEL_TYPE.BASE\n\t\t\t) {\n\t\t\t\tonExtension(extendList, draft);\n\t\t\t\tgenerateXpath(draft);\n\t\t\t}\n\t\t};\n\n\t\tif (draft) {\n\t\t\tcallbackfn(draft);\n\t\t} else {\n\t\t\tsetState(callbackfn);\n\t\t}\n\t}\n\n\t// remove widget\n\tfunction onRemove(panelId, index, id, widgetType) {\n\t\tconst extendList = [];\n\t\tconst isCustomField = widgetType === \"customField\";\n\t\tsetState((draft) => {\n\t\t\tgenerateHistory(draft);\n\t\t\tconst widgets =\n\t\t\t\twidgetType === \"customField\" ? draft.customFieldWidgets : draft.widgets;\n\t\t\tconst widgetItems =\n\t\t\t\twidgetType === \"customField\" ? \"customFieldItems\" : \"items\";\n\t\t\tconst widget = widgets[id];\n\n\t\t\tif (!isCustomField && draft.modelType === MODEL_TYPE.BASE) {\n\t\t\t\tconst index = draft.metaFieldStore.findIndex(\n\t\t\t\t\t(f) =>\n\t\t\t\t\t\t(f.typeName === widget.typeName || widget.type === \"field\") &&\n\t\t\t\t\t\tf.name === widget.name\n\t\t\t\t);\n\t\t\t\tif (index !== -1) {\n\t\t\t\t\tdraft.metaFields.unshift(draft.metaFieldStore[index]);\n\t\t\t\t}\n\t\t\t}\n\t\t\tconst isPanel = panelId && IDS.form !== panelId;\n\t\t\tindex = (isPanel ? widgets[panelId].items : draft[widgetItems]).findIndex(\n\t\t\t\t(x) => `${x}` === `${id}`\n\t\t\t);\n\t\t\tif (index > -1 && widgets[id]) {\n\t\t\t\tlet ids = getAllChildrenIds(id, widgetType);\n\t\t\t\tids.forEach((id) => {\n\t\t\t\t\tif (isCustomField || state.modelType === MODEL_TYPE.CUSTOM) {\n\t\t\t\t\t\tconst widget = widgets[id];\n\t\t\t\t\t\tif (widget.id && typeof widget.id !== \"symbol\") {\n\t\t\t\t\t\t\tdraft.removedCustomFields.push({\n\t\t\t\t\t\t\t\tid: widget.id,\n\t\t\t\t\t\t\t\tversion: widget.version,\n\t\t\t\t\t\t\t});\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t});\n\t\t\t\tconst childrenIds = [...ids];\n\t\t\t\tif (isPanel) {\n\t\t\t\t\tif (\n\t\t\t\t\t\twidgets[panelId].layout === PANEL_TYPE.grid &&\n\t\t\t\t\t\t![TYPE.menubar, TYPE.toolbar].includes(widgets[panelId].type)\n\t\t\t\t\t) {\n\t\t\t\t\t\tconst arrangeItems = arrangeGrid(\n\t\t\t\t\t\t\tdraft,\n\t\t\t\t\t\t\t{ panelId, index, id },\n\t\t\t\t\t\t\twidgetType\n\t\t\t\t\t\t);\n\t\t\t\t\t\tids = ids.concat(arrangeItems.ids);\n\t\t\t\t\t\tisExtensionView(state) &&\n\t\t\t\t\t\t\textendList.push(...arrangeItems.extendList);\n\t\t\t\t\t} else {\n\t\t\t\t\t\twidgets[panelId].items.splice(index, 1);\n\t\t\t\t\t}\n\t\t\t\t} else {\n\t\t\t\t\tdraft[widgetItems].splice(index, 1);\n\t\t\t\t}\n\t\t\t\tif (widgets[id]) {\n\t\t\t\t\tisExtensionView(state) &&\n\t\t\t\t\t\textendList.push({ name: \"replace\", target: widgets[id].xPath });\n\t\t\t\t}\n\t\t\t\tids.forEach((id) => {\n\t\t\t\t\tconst widget = widgets[id];\n\t\t\t\t\tif (widget) {\n\t\t\t\t\t\tif (!childrenIds.includes(id)) {\n\t\t\t\t\t\t\tisExtensionView(state) &&\n\t\t\t\t\t\t\t\textendList.push({ name: \"replace\", target: widget.xPath });\n\t\t\t\t\t\t}\n\t\t\t\t\t\tif (\n\t\t\t\t\t\t\twidget.id &&\n\t\t\t\t\t\t\ttypeof widget.id !== \"symbol\" &&\n\t\t\t\t\t\t\t!draft.removedCustomFields.find((field) => field.id === widget.id)\n\t\t\t\t\t\t) {\n\t\t\t\t\t\t\tdraft.removedCustomFields.push({\n\t\t\t\t\t\t\t\tid: widget.id,\n\t\t\t\t\t\t\t\tversion: widget.version,\n\t\t\t\t\t\t\t});\n\t\t\t\t\t\t}\n\t\t\t\t\t\tdelete widgets[id];\n\t\t\t\t\t}\n\t\t\t\t});\n\t\t\t\tif (ids.indexOf(draft.editWidget) > -1) {\n\t\t\t\t\tdraft.editWidget = null;\n\t\t\t\t}\n\t\t\t}\n\t\t\tvalidateOnRemove(draft, id);\n\t\t\tif (!isCustomField && draft.modelType === MODEL_TYPE.BASE) {\n\t\t\t\tvalidateParentPanelItems(draft, panelId);\n\t\t\t\tonExtension(extendList, draft);\n\t\t\t\tgenerateXpath(draft);\n\t\t\t}\n\t\t});\n\t}\n\n\t// select widget, to open properties editor\n\t// pass draft if calling from inside another immer setState\n\tfunction onSelect({ id = null, type = null }, draft) {\n\t\tconst callbackfn = (draft) => {\n\t\t\tdraft.editWidget = id;\n\t\t\tdraft.tabIndex = 0;\n\t\t\tdraft.editWidgetType = type;\n\t\t};\n\t\tif (draft) {\n\t\t\tcallbackfn(draft);\n\t\t} else {\n\t\t\tsetState(callbackfn);\n\t\t}\n\t}\n\n\t// pass draft if calling from inside another immer setState\n\tfunction addTabPanel({ attrs, id }, draft) {\n\t\tconst panelId = _.uniqueId();\n\t\tconst callbackfn = (draft) => {\n\t\t\tconst widgets =\n\t\t\t\tdraft.modelType === MODEL_TYPE.BASE ? \"customFieldWidgets\" : \"widgets\";\n\t\t\tdraft[widgets][id] = {\n\t\t\t\t...attrs,\n\t\t\t\titems: [...(attrs.items || []), panelId],\n\t\t\t};\n\t\t\tdraft[widgets][panelId] = {\n\t\t\t\t...PANEL_PROPS,\n\t\t\t\t...(widgets === \"customFieldWidgets\"\n\t\t\t\t\t? { model: draft.model.fullName }\n\t\t\t\t\t: {}),\n\t\t\t\tname: `panel${panelId}`,\n\t\t\t\ttitle: \"Tab\",\n\t\t\t\twidgetAttrs: JSON.stringify({ tab: \"true\" }),\n\t\t\t};\n\t\t\tdraft.editWidgetType =\n\t\t\t\tdraft.modelType === MODEL_TYPE.BASE ? \"customField\" : null;\n\t\t};\n\t\tif (draft) {\n\t\t\tcallbackfn(draft);\n\t\t} else {\n\t\t\tsetState(callbackfn);\n\t\t}\n\t\tconst _type = state.modelType === MODEL_TYPE.BASE ? \"customField\" : null;\n\t\tonWidgetChange(\n\t\t\t{\n\t\t\t\tid,\n\t\t\t\tprops: {\n\t\t\t\t\tcurrent: panelId,\n\t\t\t\t\t_type,\n\t\t\t\t},\n\t\t\t},\n\t\t\tdraft\n\t\t);\n\t\tonSelect({ id: panelId, type: _type }, draft);\n\t}\n\n\t// set current dragging widget\n\tfunction onDrag(id = null, { props, isDrop } = {}) {\n\t\tsetState((draft) => {\n\t\t\tconst _extendList = [];\n\t\t\tconst { attrs = {} } = props;\n\t\t\tconst _attrs = {\n\t\t\t\ttype: attrs.type,\n\t\t\t\ttitle: attrs.label,\n\t\t\t\tname: attrs.name,\n\t\t\t\trelationship: attrs.relationship,\n\t\t\t\tmappedBy: attrs.mappedBy,\n\t\t\t\t...attrs,\n\t\t\t};\n\t\t\tif (attrs && attrs.name === \"string\") {\n\t\t\t\t_attrs[\"visibleInGrid\"] = true;\n\t\t\t}\n\t\t\tif (attrs && attrs.name === \"selection\") {\n\t\t\t\t_attrs[\"updateSelection\"] = true;\n\t\t\t}\n\t\t\tconst {\n\t\t\t\tdragWidget,\n\t\t\t\thoverWidget,\n\t\t\t\teditWidget,\n\t\t\t\tdragWidgetProps,\n\t\t\t\twidgets,\n\t\t\t\tcustomFieldWidgets,\n\t\t\t} = draft;\n\t\t\tdraft.dragWidget = null;\n\t\t\tdraft.hoverWidget = null;\n\t\t\tconst extraAttr = { ...draft.hoverAttr };\n\t\t\tif (_attrs.widgetAttrs && extraAttr.widgetAttrs) {\n\t\t\t\tconst _eWidgetAttr = JSON.parse(extraAttr.widgetAttrs || \"{}\");\n\t\t\t\tconst _attrsWidgetAttr = JSON.parse(_attrs.widgetAttrs || \"{}\");\n\t\t\t\textraAttr.widgetAttrs = JSON.stringify({\n\t\t\t\t\t..._attrsWidgetAttr,\n\t\t\t\t\t..._eWidgetAttr,\n\t\t\t\t});\n\t\t\t}\n\t\t\tdraft.dragWidgetProps = Object.assign({}, props, {\n\t\t\t\tattrs: { ..._attrs, ...extraAttr },\n\t\t\t});\n\n\t\t\tif (editWidget && editWidget === dragWidget) {\n\t\t\t\tdraft.editWidget = null;\n\t\t\t}\n\t\t\tif (isDrop) {\n\t\t\t\tif (!hoverWidget || !dragWidgetProps) return;\n\t\t\t\tgenerateHistory(draft);\n\t\t\t\tconst index = draft.metaFields.findIndex(\n\t\t\t\t\t(f) =>\n\t\t\t\t\t\tf.typeName === dragWidgetProps.attrs.typeName &&\n\t\t\t\t\t\tf.name === dragWidgetProps.attrs.name\n\t\t\t\t);\n\t\t\t\tif (index !== -1) {\n\t\t\t\t\tdraft.metaFields.splice(index, 1);\n\t\t\t\t}\n\n\t\t\t\tconst hoverAttr = { ...draft.hoverAttr };\n\t\t\t\t//if both dragWidget & hoverAttr has widgetAttrs, combine them\n\t\t\t\tif (dragWidgetProps.attrs.widgetAttrs && hoverAttr.widgetAttrs) {\n\t\t\t\t\thoverAttr.widgetAttrs = JSON.stringify({\n\t\t\t\t\t\t...JSON.parse(dragWidgetProps.attrs.widgetAttrs || \"{}\"),\n\t\t\t\t\t\t...JSON.parse(hoverAttr.widgetAttrs || \"{}\"),\n\t\t\t\t\t});\n\t\t\t\t}\n\t\t\t\t/* \n\t\t\t\tcombining dragWidgetAttr with hoverAttr , so that any special properties\n\t\t\t\tdefined for a particular hoverWidget will be copied over to dropped widget\n\t\t\t\t*/\n\t\t\t\tdragWidgetProps.attrs = {\n\t\t\t\t\t...dragWidgetProps.attrs,\n\t\t\t\t\t...hoverAttr,\n\t\t\t\t};\n\n\t\t\t\tconst { extendList, newId } = reorderGrid({\n\t\t\t\t\thoverWidget,\n\t\t\t\t\tdragWidgetProps,\n\t\t\t\t})(draft);\n\n\t\t\t\t_extendList.push(...extendList);\n\n\t\t\t\tif (\n\t\t\t\t\thoverWidget._type !== \"customField\" &&\n\t\t\t\t\tdraft.modelType === MODEL_TYPE.BASE\n\t\t\t\t) {\n\t\t\t\t\tvalidateParentPanelItems(draft, dragWidgetProps.panelId);\n\t\t\t\t\tvalidateParentPanelItems(draft, hoverWidget.panelId);\n\t\t\t\t\tonExtension(_extendList, draft);\n\t\t\t\t\tgenerateXpath(draft);\n\t\t\t\t}\n\t\t\t\tdraft.hoverAttr = {};\n\t\t\t\t/**\n\t\t\t\t * While adding panel tabs add default tab panel\n\t\t\t\t */\n\t\t\t\tconst allWidgets =\n\t\t\t\t\tdraft.modelType === MODEL_TYPE.BASE ? customFieldWidgets : widgets;\n\t\t\t\tconst tabId = Object.keys(allWidgets || {})?.find(\n\t\t\t\t\t(key) => allWidgets[key]?.type === TYPE.tabs\n\t\t\t\t);\n\t\t\t\tif (\n\t\t\t\t\tdragWidgetProps?.attrs?.type === TYPE.tabs &&\n\t\t\t\t\t!dragWidgetProps?.attrs?.items?.length\n\t\t\t\t) {\n\t\t\t\t\taddTabPanel(\n\t\t\t\t\t\t{ attrs: state.dragWidgetProps?.attrs, id: tabId },\n\t\t\t\t\t\tdraft\n\t\t\t\t\t);\n\t\t\t\t}\n\t\t\t\t//When panel is moved into tabs, set it as current tab\n\t\t\t\tif (\n\t\t\t\t\tallWidgets[hoverWidget.panelId]?.type === TYPE.tabs &&\n\t\t\t\t\tdragWidgetProps?.attrs?.type === TYPE.panel\n\t\t\t\t) {\n\t\t\t\t\tonWidgetChange(\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tid: tabId,\n\t\t\t\t\t\t\tprops: {\n\t\t\t\t\t\t\t\tcurrent: newId || dragWidgetProps.id,\n\t\t\t\t\t\t\t\t_type: dragWidgetProps._type, // not sure why we need _type here,\n\t\t\t\t\t\t\t},\n\t\t\t\t\t\t},\n\t\t\t\t\t\tdraft\n\t\t\t\t\t);\n\t\t\t\t}\n\t\t\t\tif (newId) {\n\t\t\t\t\tonSelect({ id: newId, type: hoverWidget?._type }, draft);\n\t\t\t\t}\n\t\t\t} else {\n\t\t\t\tdraft.dragWidget = id;\n\t\t\t}\n\t\t});\n\t}\n\n\tfunction onTranslationRemove(key) {\n\t\tsetState((draft) => {\n\t\t\tdraft.removedTranslationList.push(key);\n\t\t});\n\t}\n\n\tfunction onHover(hoverWidget) {\n\t\tsetState((draft) => {\n\t\t\tdraft.hoverWidget = hoverWidget;\n\t\t});\n\t}\n\n\t// move widget in form\n\tfunction onMove({ source, destination }, flag, _type) {\n\t\tconst resolver = (isMoved) => ({ isMoved });\n\n\t\tif (\n\t\t\t// avoid drop target of form itself\n\t\t\t!source ||\n\t\t\t!destination ||\n\t\t\t(destination.id === IDS.form && state.items.length > 1)\n\t\t) {\n\t\t\treturn resolver(false);\n\t\t}\n\n\t\t// on create widget case\n\t\tif (Object.values(IDS.createWidgets).indexOf(source.id) > -1) {\n\t\t\treturn resolver(true);\n\t\t}\n\n\t\tconst _widgets =\n\t\t\t_type === \"customField\" ? state.customFieldWidgets : widgets;\n\t\tif (\n\t\t\t// case for create new widget\n\t\t\t// special case for exclusive\n\t\t\t(!source.attrs.isNew && checkExclusive(_widgets, source, destination)) ||\n\t\t\t// avoid to drag panel on its one of children element\n\t\t\t([TYPE.panel, TYPE.tabs].includes(source.attrs.type) &&\n\t\t\t\tgetAllChildrenIds(source.id, _type).indexOf(\n\t\t\t\t\tdestination.id === IDS.dumpField\n\t\t\t\t\t\t? destination.panelId\n\t\t\t\t\t\t: destination.id\n\t\t\t\t) > -1)\n\t\t) {\n\t\t\treturn resolver(false);\n\t\t}\n\n\t\treturn resolver(true);\n\t}\n\n\tfunction setHoverAttr(attr) {\n\t\tsetState((draft) => {\n\t\t\tdraft.hoverAttr = attr;\n\t\t});\n\t}\n\n\tconst startLoader = React.useCallback(\n\t\tfunction startLoader() {\n\t\t\tsetState((draft) => {\n\t\t\t\tdraft.loader = true;\n\t\t\t});\n\t\t},\n\t\t[setState]\n\t);\n\n\tfunction undo() {\n\t\tsetState((draft) => {\n\t\t\tif (draft.past.length) {\n\t\t\t\tdraft.future.unshift({\n\t\t\t\t\twidgets: original(draft.widgets),\n\t\t\t\t\titems: original(draft.items),\n\t\t\t\t\textensionMoves: original(draft.extensionMoves),\n\t\t\t\t\tcustomFieldWidgets: original(draft.customFieldWidgets),\n\t\t\t\t\tcustomFields: original(draft.customFields),\n\t\t\t\t\tcustomFieldItems: original(draft.customFieldItems),\n\t\t\t\t\tmetaFields: original(draft.metaFields),\n\t\t\t\t\tremovedCustomFields: original(draft.removedCustomFields),\n\t\t\t\t\terrorList: original(draft.errorList),\n\t\t\t\t});\n\t\t\t\tsetPresent(draft.past[draft.past.length - 1], draft);\n\t\t\t\tdraft.past.splice(draft.past.length - 1, 1);\n\t\t\t}\n\t\t});\n\t}\n\n\tfunction redo() {\n\t\tsetState((draft) => {\n\t\t\tif (draft.future.length) {\n\t\t\t\tdraft.past.push({\n\t\t\t\t\twidgets: original(draft.widgets),\n\t\t\t\t\titems: original(draft.items),\n\t\t\t\t\textensionMoves: original(draft.extensionMoves),\n\t\t\t\t\tcustomFieldWidgets: original(draft.customFieldWidgets),\n\t\t\t\t\tcustomFieldItems: original(draft.customFieldItems),\n\t\t\t\t\tmetaFields: original(draft.metaFields),\n\t\t\t\t\tcustomFields: original(draft.customFields),\n\t\t\t\t\tremovedCustomFields: original(draft.removedCustomFields),\n\t\t\t\t\terrorList: original(draft.errorList),\n\t\t\t\t});\n\t\t\t\tsetPresent(draft.future[0], draft);\n\t\t\t\tdraft.future.splice(0, 1);\n\t\t\t}\n\t\t});\n\t}\n\n\tfunction setPresent(object, draft) {\n\t\tObject.keys(object).forEach((key) => {\n\t\t\tdraft[key] = original(object[key]);\n\t\t});\n\t}\n\n\tfunction generateHistory(draft) {\n\t\tdraft.past.push({\n\t\t\twidgets: original(draft.widgets),\n\t\t\titems: original(draft.items),\n\t\t\textensionMoves: original(draft.extensionMoves),\n\t\t\tcustomFieldWidgets: original(draft.customFieldWidgets),\n\t\t\tcustomFields: original(draft.customFields),\n\t\t\tcustomFieldItems: original(draft.customFieldItems),\n\t\t\tmetaFields: original(draft.metaFields),\n\t\t\tremovedCustomFields: original(draft.removedCustomFields),\n\t\t\terrorList: original(draft.errorList),\n\t\t});\n\t\tif (draft.future.length) {\n\t\t\tdraft.future = [];\n\t\t}\n\t}\n\n\tfunction clearHistory(draft) {\n\t\tdraft.future = [];\n\t\tdraft.past = [];\n\t}\n\n\tconst value = {\n\t\tonWidgetChange,\n\t\tonMove,\n\t\tonDrag,\n\t\tonRemove,\n\t\tonHover,\n\t\tonSelect,\n\t\tstate,\n\t\tupdate: setState,\n\t\tsetHoverAttr,\n\t\tstartLoader,\n\t\tundo,\n\t\tredo,\n\t\tclearHistory,\n\t\tonTranslationRemove,\n\t\taddTabPanel,\n\t};\n\treturn (\n\t\t<StoreContext.Provider value={value}>{children}</StoreContext.Provider>\n\t);\n}\n\nexport function useStore() {\n\treturn React.useContext(StoreContext);\n}\n\nexport function useStoreState() {\n\tconst { state } = React.useContext(StoreContext);\n\treturn state;\n}\n\nexport function useWidget(id) {\n\tconst { widgets } = useStore();\n\treturn widgets[id];\n}\n\nexport default StoreProvider;\n","import Utils from \"./../utils\";\nimport { TYPE } from \"./../constants\";\n\nconst getItemType = (type) => {\n\tconst types = [\"viewer\", \"editor\", \"hilite\"];\n\treturn types.includes(type) ? \"field\" : type;\n};\n\nexport function eGeneratePath(widgets, items = [], itemId, path = \"\") {\n\tif (itemId === -1) {\n\t\treturn \"\";\n\t}\n\tconst isFirstLevel = path === \"\";\n\tconst hasSameNameInParentItems = (items, itemId) => {\n\t\tconst widget = widgets[itemId];\n\t\tconst sameWidgets = items.filter(\n\t\t\t(item) =>\n\t\t\t\titem !== itemId &&\n\t\t\t\twidgets[item] &&\n\t\t\t\t[widgets[item].name, widgets[item].originalName].includes(widget.name)\n\t\t);\n\t\treturn sameWidgets.length > 0;\n\t};\n\n\tconst getSameItemIndex = (items, itemId) => {\n\t\tconst widget = widgets[itemId];\n\t\tconst sameWidgets = items.filter(\n\t\t\t(item) =>\n\t\t\t\twidgets[item] &&\n\t\t\t\t[widgets[item].name, widgets[item].originalName].includes(widget.name)\n\t\t);\n\t\treturn sameWidgets.indexOf(itemId) + 1;\n\t};\n\n\tconst getTypeWiseItemIndex = (items, type, itemId) => {\n\t\tconst sameWidgets = items.filter(\n\t\t\t(item) =>\n\t\t\t\twidgets[item] &&\n\t\t\t\tgetItemType(Utils.getWidgetType(widgets[item], \"field\")) === type\n\t\t);\n\t\treturn sameWidgets.indexOf(itemId) + 1;\n\t};\n\n\tconst isUniquePanel = () => {\n\t\tconst widget = widgets[itemId];\n\t\tif (!widget.name) {\n\t\t\treturn false;\n\t\t}\n\t\tconst widgetList = Object.values(widgets);\n\t\tconst sameWidgets = widgetList.filter((w) => w.name === widget.name);\n\t\treturn sameWidgets.length === 1;\n\t};\n\n\tconst canStopParentLink = () => {\n\t\tif (isFirstLevel) {\n\t\t\treturn false;\n\t\t}\n\t\tif (!isUniquePanel()) {\n\t\t\treturn false;\n\t\t}\n\t\treturn true;\n\t};\n\n\tlet findRoot = true;\n\tconst widgetList = Object.values(widgets);\n\tconst widgetIds = Object.keys(widgets);\n\twidgetList.forEach((widget, i) => {\n\t\tif (widget.items) {\n\t\t\tconst index = widget.items.findIndex((e) => e === itemId);\n\t\t\tif (index !== -1) {\n\t\t\t\tfindRoot = false;\n\t\t\t\tconst _widget = widgets[itemId];\n\t\t\t\tconst widgetType = getItemType(Utils.getWidgetType(_widget, \"field\"));\n\t\t\t\tif (_widget.name) {\n\t\t\t\t\tlet itemPath = `/${widgetType}[@name='${_widget.name}']`;\n\t\t\t\t\tif (hasSameNameInParentItems(widget.items, itemId)) {\n\t\t\t\t\t\tconst itemIndex = getSameItemIndex(widget.items, itemId);\n\t\t\t\t\t\tif (itemIndex > 0) {\n\t\t\t\t\t\t\titemPath = `${itemPath}[${itemIndex}]`;\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t\tpath = `${itemPath}${path}`;\n\t\t\t\t} else {\n\t\t\t\t\tconst itemIndex = getTypeWiseItemIndex(\n\t\t\t\t\t\twidget.items,\n\t\t\t\t\t\twidgetType,\n\t\t\t\t\t\titemId\n\t\t\t\t\t);\n\t\t\t\t\tpath = `/${widgetType}[${itemIndex}]${path}`;\n\t\t\t\t}\n\t\t\t\tif (!canStopParentLink()) {\n\t\t\t\t\tpath = eGeneratePath(widgets, items, widgetIds[i], path);\n\t\t\t\t} else {\n\t\t\t\t\tpath = `/${path}`;\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t});\n\tif (findRoot) {\n\t\tconst index = items.findIndex((e) => e === itemId);\n\t\tif (index !== -1) {\n\t\t\tconst _widget = widgets[itemId];\n\t\t\tif (_widget.name) {\n\t\t\t\tlet itemPath = `//${_widget.type}[@name='${_widget.name}']`;\n\t\t\t\tif ([TYPE.menubar, TYPE.toolbar, TYPE.divider].includes(_widget.type)) {\n\t\t\t\t\titemPath = `//${_widget.type}`;\n\t\t\t\t}\n\t\t\t\tif (hasSameNameInParentItems(items, itemId)) {\n\t\t\t\t\tconst itemIndex = getSameItemIndex(items, itemId);\n\t\t\t\t\tif (itemIndex > 0) {\n\t\t\t\t\t\titemPath = `${itemPath}[${itemIndex}]`;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\tpath = `${itemPath}${path}`;\n\t\t\t} else {\n\t\t\t\tconst itemIndex = getTypeWiseItemIndex(items, _widget.type, itemId);\n\t\t\t\tpath = `//${_widget.type}[${itemIndex}]${path}`;\n\t\t\t}\n\t\t}\n\t}\n\treturn path;\n}\n\n// generate xpath for all widgets\nexport function generateXpath(draft) {\n\tObject.keys(draft.widgets || {}).forEach((widgetId) => {\n\t\tconst path = eGeneratePath(draft.widgets, draft.items, widgetId);\n\t\tdraft.widgets[widgetId].xPath = path;\n\t});\n}\n","import _, { camelCase } from \"lodash\";\nimport {\n\tTYPE,\n\tFIELD_TYPE,\n\tPANEL_TYPE,\n\tIDS,\n\tMODEL_TYPE,\n\tDEFAULT_VALUE,\n\ttypeReplacer as TYPE_REPLACER,\n} from \"./constants\";\nimport { modelFields } from \"./fields\";\nimport convert from \"xml-js\";\nimport { validate } from \"./store/validation\";\nimport format from \"xml-beautifier\";\nimport { eGeneratePath } from \"./store/xpathGenerator\";\nimport { processMoves } from \"./store/computeXML\";\nimport dasherize from \"dasherize\";\n\nexport function camleCaseString(word) {\n\tlet string =\n\t\tword &&\n\t\tword.replace(/([A-Z])/g, \" $1\").replace(/^./, function (str) {\n\t\t\treturn str.toUpperCase();\n\t\t});\n\treturn string;\n}\n\nexport const caseConverter = (value, isCamelCase = true) => {\n\tif (!value) return;\n\tvalue = value.trim();\n\tlet convertedText;\n\tif (isCamelCase) {\n\t\tconvertedText = camelCase(value);\n\t} else {\n\t\tlet textToConvert = camelCase(value);\n\t\tconvertedText = textToConvert[0].toUpperCase() + textToConvert.slice(1);\n\t}\n\treturn convertedText;\n};\n\nexport const capitalizeFirst = (value) => {\n\tlet result = value.replace(/([A-Z])/g, \" $1\");\n\tlet finalResult =\n\t\tresult && result.charAt(0).toUpperCase() + result.slice(1).toLowerCase();\n\treturn finalResult;\n};\n\nexport function translate(str) {\n\tif (window && window.top && window.top._t && typeof str === \"string\") {\n\t\treturn window.top._t(str);\n\t}\n\treturn str;\n}\n\nconst getSpacer = ({ widget, id, ...other }) => ({\n\tcolSpan: widget.colSpan || 1,\n\tserverType: FIELD_TYPE.spacer,\n\ttype: TYPE.field,\n\tname: `spacer${id}`,\n\ttitle: \"Spacer\",\n\t...other,\n});\n\nexport const getGrid = (\n\tstate,\n\t{ cols = 12, items },\n\ttrackElement,\n\tisCustomField = false\n) => {\n\tconst widgets = isCustomField ? state.customFieldWidgets : state.widgets;\n\tconst grid = [];\n\tlet ind = 0;\n\tlet span = 0;\n\tlet row = [];\n\n\tlet fillRow = (start) => {\n\t\tfor (let i = start; i < cols; i++) {\n\t\t\trow.push({ index: i, item: true, colSpan: 1, indices: [i] });\n\t\t}\n\t};\n\n\titems.forEach((item) => {\n\t\tlet parentPanelIndex = Object.keys(widgets).find(\n\t\t\t(widgetIndex) =>\n\t\t\t\twidgets[widgetIndex].type === \"panel\" &&\n\t\t\t\twidgets[widgetIndex].items?.includes(item)\n\t\t);\n\n\t\tlet colSpan = Number(\n\t\t\tJSON.parse(widgets[item].widgetAttrs || \"{}\").colSpan ||\n\t\t\t\tJSON.parse(widgets[parentPanelIndex].widgetAttrs || \"{}\").itemSpan ||\n\t\t\t\twidgets[item].colSpan ||\n\t\t\t\t1\n\t\t);\n\t\tspan += colSpan;\n\t\t//next row\n\t\tif (span > cols) {\n\t\t\tfillRow(ind);\n\t\t\tind = 0;\n\t\t\tspan = colSpan;\n\t\t\tgrid.push(row);\n\t\t\trow = [];\n\t\t}\n\t\ttrackElement &&\n\t\t\ttrackElement(item, {\n\t\t\t\tcolumn: ind,\n\t\t\t\trow: grid.length,\n\t\t\t});\n\t\trow.push({\n\t\t\tindex: ind,\n\t\t\titem,\n\t\t\tcolSpan,\n\t\t\tindices: new Array(colSpan).fill(0).map((x, i) => ind + i),\n\t\t});\n\t\tind += colSpan;\n\t});\n\n\tfillRow(ind);\n\tgrid.push(row);\n\treturn grid;\n};\n\nexport const arrangeGrid = (state, { id, index, panelId }, widgetType) => {\n\tconst extendList = [];\n\tconst isCustomField = widgetType === \"customField\";\n\tconst widgets = isCustomField ? state.customFieldWidgets : state.widgets;\n\tconst panel = widgets[panelId];\n\tconst removeWidget = widgets[id] || { colSpan: 1 };\n\tconst isLastItemRemove = panel.items[panel.items.length - 1] === id;\n\tlet ids = [];\n\n\tconst isLastItemSpacer = (items) => {\n\t\tif (!items || !items.length) return false;\n\t\tconst lastItem = items[items.length - 1];\n\t\tconst lastWidget = widgets[lastItem];\n\t\treturn lastWidget.type === \"spacer\" || lastWidget.serverType === \"spacer\";\n\t};\n\n\tconst deleteItem = panel.items.splice(index, 1);\n\n\tif (isLastItemRemove) {\n\t\t// Delete all spacers at the end of panel\n\t\twhile (isLastItemSpacer(panel.items)) {\n\t\t\tids.push(panel.items.pop());\n\t\t}\n\t}\n\n\tif (\n\t\t!(\n\t\t\twidgets[deleteItem].type === \"spacer\" ||\n\t\t\twidgets[deleteItem].serverType === \"spacer\"\n\t\t) &&\n\t\t!isLastItemRemove\n\t) {\n\t\tlet newId = _.uniqueId();\n\t\tlet otherProps = {};\n\t\tif (state.modelType === MODEL_TYPE.CUSTOM) {\n\t\t\totherProps = {\n\t\t\t\tmodel: removeWidget.model,\n\t\t\t\tmodelField: removeWidget.modelField,\n\t\t\t};\n\t\t}\n\t\t//creating spacer for the removed widget\n\t\twidgets[newId] = getSpacer({\n\t\t\twidget: {},\n\t\t\tid: newId,\n\t\t\tcolSpan: removeWidget.colSpan,\n\t\t\t//if removed widget has colSpan in its widgetAttrs, copy it to the spacer\n\t\t\t...(JSON.parse(removeWidget.widgetAttrs || \"{}\").colSpan\n\t\t\t\t? {\n\t\t\t\t\t\twidgetAttrs: JSON.stringify({\n\t\t\t\t\t\t\tcolSpan: JSON.parse(removeWidget.widgetAttrs).colSpan,\n\t\t\t\t\t\t}),\n\t\t\t\t  }\n\t\t\t\t: {}),\n\t\t\t...otherProps,\n\t\t});\n\t\tconst targetWidget = widgets[panel.items[index]];\n\t\tisExtensionView(state) &&\n\t\t\textendList.push({\n\t\t\t\tname: \"insert\",\n\t\t\t\tposition: \"before\",\n\t\t\t\telements: [widgets[newId]],\n\t\t\t\ttarget: targetWidget.xPath,\n\t\t\t});\n\t\tpanel.items.splice(index, 0, newId);\n\t}\n\treturn { ids: [...ids, id], extendList };\n};\n\n// generates widgets(spacers)\nconst collectWidgets = ({ grid, items, widgetIndex, hoverCellRowIndex }) => {\n\tlet beforeWidgets = [];\n\tlet afterWidgets = [];\n\tlet flag = true;\n\tlet itemIndex = 0;\n\tif (grid.length) {\n\t\tgrid.forEach((cell, cellIndex) => {\n\t\t\tcell.colSpan = Number(cell.colSpan || 1);\n\t\t\t// once any valid id cell find, take its index as default value\n\t\t\tif (cell.id && flag && cellIndex < widgetIndex) {\n\t\t\t\titemIndex = items.indexOf(cell.id) + 1;\n\t\t\t}\n\t\t\t// consider hover row cells\n\t\t\tif (!cell.separator && cell.rowIndex <= hoverCellRowIndex) {\n\t\t\t\t// before hover widget\n\t\t\t\tif (cellIndex < widgetIndex) {\n\t\t\t\t\t// reset before row if you find valid cell with id\n\t\t\t\t\tif (cell.id) {\n\t\t\t\t\t\tbeforeWidgets = [];\n\t\t\t\t\t\titemIndex = items.indexOf(cell.id) + 1;\n\t\t\t\t\t} else {\n\t\t\t\t\t\tbeforeWidgets.push({\n\t\t\t\t\t\t\t...cell,\n\t\t\t\t\t\t\tcolSpan: cell.colSpan || 6,\n\t\t\t\t\t\t\tisSpacer: true,\n\t\t\t\t\t\t});\n\t\t\t\t\t}\n\t\t\t\t\t// after hover widget\n\t\t\t\t} else if (flag && cellIndex > widgetIndex) {\n\t\t\t\t\tif (cell.id) {\n\t\t\t\t\t\titemIndex = items.indexOf(cell.id);\n\t\t\t\t\t\tflag = false;\n\t\t\t\t\t} else if (items.length) {\n\t\t\t\t\t\tafterWidgets.push({ ...cell, isSpacer: true });\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t});\n\t\tif (items.length) {\n\t\t\t// find last item index\n\t\t\tconst lastItem = items[items.length - 1];\n\t\t\tconst lastItemIndex = grid.findIndex((x) => `${x.id}` === `${lastItem}`);\n\t\t\t// if drop at end of list then fill only one widget so empty after widgets\n\t\t\tif (widgetIndex > lastItemIndex && lastItemIndex !== -1) {\n\t\t\t\tafterWidgets = [];\n\t\t\t\titemIndex = items.length + 1;\n\t\t\t}\n\t\t}\n\t\t// clear beforeWidgets that occupy the entire row (when widget is dropped into the first separator of a row)\n\t\tif (beforeWidgets.length) {\n\t\t\tconst _beforeWidgets = [...beforeWidgets];\n\t\t\t_beforeWidgets.forEach((widget, index, widgets) => {\n\t\t\t\tif (\n\t\t\t\t\twidgets.findIndex((el) => widget.rowIndex === el.rowIndex) === index\n\t\t\t\t) {\n\t\t\t\t\tconst totalColSpan = widgets.reduce(\n\t\t\t\t\t\t(acc, el) =>\n\t\t\t\t\t\t\tel.rowIndex === widget.rowIndex ? acc + el.colSpan : acc,\n\t\t\t\t\t\t0\n\t\t\t\t\t);\n\t\t\t\t\tif (totalColSpan >= 12) {\n\t\t\t\t\t\tbeforeWidgets = _beforeWidgets.filter(\n\t\t\t\t\t\t\t(el) => el.rowIndex !== widget.rowIndex\n\t\t\t\t\t\t);\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t});\n\t\t}\n\t}\n\treturn { afterWidgets, beforeWidgets, itemIndex };\n};\n\nexport const setErrorList = (attrs, state, id, isCustomField) => {\n\tconst errors = validate(attrs, state.modelType, isCustomField);\n\tif (Object.keys(errors).length) {\n\t\tstate.errorList[id] = errors;\n\t} else if (state.errorList[id]) {\n\t\tdelete state.errorList[id];\n\t}\n};\n\nexport function isExtensionView(state) {\n\treturn state.exView && !isCreatedFromStudio(state.exView);\n}\n\n// reorder widgets based on dummy widgets\nexport const reorderGrid =\n\t({ hoverWidget, dragWidgetProps }) =>\n\t(state) => {\n\t\t/* TODO \n\t\t\tAttributes for the dragged widget is being modified from onHover, onDrag, beginDrag, \n\t\t\tand reorderGrid functions, Try to move all of them here,\n\t\t\tLook for setHoverAttr, which could be eliminated.\n\t\t*/\n\t\tconst extendList = [];\n\t\tconst isCustomField = hoverWidget._type === \"customField\";\n\t\tconst dragWidgetItems =\n\t\t\thoverWidget._type === \"customField\" && !dragWidgetProps.panelId\n\t\t\t\t? \"customFieldItems\"\n\t\t\t\t: \"items\";\n\t\tconst _items =\n\t\t\thoverWidget._type === \"customField\" && !hoverWidget.panelId\n\t\t\t\t? \"customFieldItems\"\n\t\t\t\t: \"items\";\n\t\tconst _widgets =\n\t\t\thoverWidget._type === \"customField\"\n\t\t\t\t? state.customFieldWidgets\n\t\t\t\t: state.widgets;\n\t\tconst destinationItems = (\n\t\t\t(hoverWidget.panelId ? _widgets[hoverWidget.panelId] : state)[_items] ||\n\t\t\t[]\n\t\t).slice();\n\t\tconst {\n\t\t\tcolSpan,\n\t\t\tgrid = [],\n\t\t\trow: hoverCellRowIndex,\n\t\t\trelatedColSpan,\n\t\t} = hoverWidget.meta;\n\t\t/*  \n\t\t\tIf layout changes while the element is being dragged, then dragWidgetProps.index will be outdated,\n\t\t\trely on dragWidgetIndex for grid layouts\n\t\t*/\n\t\tconst dragWidgetIndex =\n\t\t\tgrid.find((item) => item.id === dragWidgetProps.id)?.cellIndice ??\n\t\t\tdragWidgetProps.index;\n\n\t\t// remove isNew attribute\n\t\tif (dragWidgetProps.attrs && dragWidgetProps.attrs.isNew !== undefined) {\n\t\t\tdelete dragWidgetProps.attrs.isNew;\n\t\t}\n\n\t\tconst removedWidgetAttrsColSpan = //saving colSpan of the existing widget since it gets modified later\n\t\t\tdragWidgetProps.id && _widgets[dragWidgetProps.id] // check if  dragwidget is an existing one\n\t\t\t\t? JSON.parse(dragWidgetProps.attrs?.widgetAttrs || \"{}\").colSpan\n\t\t\t\t: undefined;\n\n\t\t// TODO: Move the everything inside the next if logic to a similar if logic further down (line:509)\n\t\t// TODO: replaced spacer is not removed from widgets, to be done after moving\n\t\t// if widget is dropped on the spacer\n\t\tif (\n\t\t\thoverWidget.attrs?.serverType === \"spacer\" ||\n\t\t\thoverWidget.attrs?.type === \"spacer\"\n\t\t) {\n\t\t\tconst spacerWidgetAttrsColSpan = JSON.parse(\n\t\t\t\thoverWidget.attrs?.widgetAttrs || \"{}\"\n\t\t\t).colSpan;\n\t\t\t/* copy spacer's widgetAttrs colSpan to the dragged widget to\n\t\t\t make dragged widget fit into the spacer */\n\t\t\tdragWidgetProps.attrs.widgetAttrs = JSON.stringify({\n\t\t\t\t...JSON.parse(dragWidgetProps.attrs?.widgetAttrs || \"{}\"),\n\t\t\t\tcolSpan: spacerWidgetAttrsColSpan,\n\t\t\t});\n\t\t\t// add spacer to the delete list if spacer is already saved\n\t\t\tif (hoverWidget.attrs?.id && typeof hoverWidget.attrs?.id !== \"symbol\") {\n\t\t\t\tstate.removedCustomFields.push({\n\t\t\t\t\tid: hoverWidget.attrs.id,\n\t\t\t\t\tversion: hoverWidget.attrs.version,\n\t\t\t\t});\n\t\t\t}\n\n\t\t\tconst parentPanelItemSpan = JSON.parse(\n\t\t\t\t_widgets[hoverWidget.panelId]?.widgetAttrs || \"{}\"\n\t\t\t).itemSpan;\n\t\t\t/* reset colSpan to default(6) to make it fit into spacer when both\n\t\t\t ItemSpan & widgetAttr colspan doesn't exist */\n\t\t\tif (!parentPanelItemSpan && !spacerWidgetAttrsColSpan) {\n\t\t\t\tdragWidgetProps.attrs.colSpan = 6;\n\t\t\t}\n\t\t}\n\t\t// clone colSpan of hover widget\n\t\tconst parentPanel = _widgets[hoverWidget.panelId];\n\t\tconst hoverType = parentPanel?.serverType;\n\t\tif (dragWidgetProps.attrs && !dragWidgetProps.attrs.colSpan) {\n\t\t\tif (\n\t\t\t\tcolSpan &&\n\t\t\t\tdragWidgetProps.attrs &&\n\t\t\t\t![TYPE.menu, TYPE.menuItem, TYPE.divider].includes(\n\t\t\t\t\tdragWidgetProps.attrs.type\n\t\t\t\t) &&\n\t\t\t\t![TYPE.toolbar, TYPE.menubar].includes(hoverType)\n\t\t\t) {\n\t\t\t\tconst existingColspan = dragWidgetProps.attrs.colSpan;\n\t\t\t\t// set itemSpan if exists\n\t\t\t\tif (hoverType === TYPE.panel && Number(parentPanel.itemSpan)) {\n\t\t\t\t\tdragWidgetProps.attrs.colSpan = Number(parentPanel.itemSpan);\n\t\t\t\t} else {\n\t\t\t\t\tdragWidgetProps.attrs.colSpan = relatedColSpan || colSpan;\n\t\t\t\t}\n\t\t\t\tif (isCustomField) {\n\t\t\t\t\t// set colSpan in widgetAttrs for custom field\n\t\t\t\t\tconst widgetAttrs = { colSpan: relatedColSpan || colSpan };\n\t\t\t\t\tdragWidgetProps.attrs.widgetAttrs = JSON.stringify(widgetAttrs);\n\t\t\t\t}\n\t\t\t\tif (`${dragWidgetProps.attrs.colSpan}` !== `${existingColspan}`) {\n\t\t\t\t\tif (state.modelType === MODEL_TYPE.CUSTOM) {\n\t\t\t\t\t\t// change widgetAttrs for colSpan\n\t\t\t\t\t\tconst widgetAttrs = JSON.parse(\n\t\t\t\t\t\t\tdragWidgetProps.attrs.widgetAttrs || \"{}\"\n\t\t\t\t\t\t);\n\t\t\t\t\t\twidgetAttrs.colSpan = relatedColSpan || colSpan;\n\t\t\t\t\t\tdragWidgetProps.attrs.widgetAttrs = JSON.stringify(widgetAttrs);\n\t\t\t\t\t}\n\t\t\t\t\tisExtensionView(state) &&\n\t\t\t\t\t\textendList.push({\n\t\t\t\t\t\t\tname: \"attribute\",\n\t\t\t\t\t\t\ttarget: dragWidgetProps.attrs.xPath,\n\t\t\t\t\t\t\tattributes: {\n\t\t\t\t\t\t\t\tname: \"colSpan\",\n\t\t\t\t\t\t\t\tvalue: dragWidgetProps.attrs.colSpan,\n\t\t\t\t\t\t\t},\n\t\t\t\t\t\t});\n\t\t\t\t}\n\t\t\t\tif (state.modelType === MODEL_TYPE.CUSTOM) {\n\t\t\t\t\tconst widgetAttrs = JSON.parse(\n\t\t\t\t\t\tdragWidgetProps.attrs.widgetAttrs || \"{}\"\n\t\t\t\t\t);\n\t\t\t\t\twidgetAttrs.colSpan = 6;\n\t\t\t\t\tdragWidgetProps.attrs.widgetAttrs = JSON.stringify(widgetAttrs);\n\t\t\t\t}\n\t\t\t} else if (\n\t\t\t\tdragWidgetProps.attrs &&\n\t\t\t\tstate.modelType === MODEL_TYPE.CUSTOM\n\t\t\t) {\n\t\t\t\tconst widgetAttrs = JSON.parse(\n\t\t\t\t\tdragWidgetProps.attrs.widgetAttrs || \"{}\"\n\t\t\t\t);\n\t\t\t\twidgetAttrs.colSpan = relatedColSpan || colSpan;\n\t\t\t\tdragWidgetProps.attrs.colSpan = relatedColSpan || colSpan;\n\t\t\t\tdragWidgetProps.attrs.widgetAttrs = JSON.stringify(widgetAttrs);\n\t\t\t}\n\t\t}\n\t\tconst newIds = [];\n\t\tlet widgetIndex = Number(hoverWidget.index);\n\t\tlet {\n\t\t\tbeforeWidgets, //holds spacers to be added before the dropped widget\n\t\t\tafterWidgets, // holds spacers to be added after the dropped widget\n\t\t\titemIndex = 0,\n\t\t} = collectWidgets({\n\t\t\tgrid,\n\t\t\titems: destinationItems,\n\t\t\twidgetIndex,\n\t\t\thoverCellRowIndex,\n\t\t});\n\n\t\tlet isRemovedFromSameList = false;\n\t\t// if drag widget is existing one then remove it from its panel\n\t\tif (dragWidgetProps.id && _widgets[dragWidgetProps.id]) {\n\t\t\tconst sourcePanel = dragWidgetProps.panelId\n\t\t\t\t? _widgets[dragWidgetProps.panelId]\n\t\t\t\t: state;\n\t\t\tconst sourceItems = sourcePanel[dragWidgetItems];\n\t\t\tconst sourceItemIndex = sourceItems.indexOf(dragWidgetProps.id);\n\n\t\t\tif ([PANEL_TYPE.grid].includes(sourcePanel.layout)) {\n\t\t\t\tlet newId = _.uniqueId();\n\t\t\t\tconst isLastItem =\n\t\t\t\t\tsourceItems[sourceItems.length - 1] === dragWidgetProps.id;\n\t\t\t\tlet isLastItemInSamePanel = false; // true if last widget is dropped after itself in the same panel\n\t\t\t\tif (isLastItem && dragWidgetProps.panelId === hoverWidget.panelId) {\n\t\t\t\t\tif (dragWidgetIndex < hoverWidget.index) {\n\t\t\t\t\t\tisLastItemInSamePanel = true;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\tconst hoverParent = dragWidgetProps.panelId\n\t\t\t\t\t? _widgets[dragWidgetProps.panelId]\n\t\t\t\t\t: null;\n\t\t\t\tlet isPanelTab = false;\n\t\t\t\tif (\n\t\t\t\t\thoverParent &&\n\t\t\t\t\t[TYPE.tabs, TYPE.panelStack].includes(hoverParent.type)\n\t\t\t\t) {\n\t\t\t\t\tisPanelTab = true;\n\t\t\t\t}\n\t\t\t\tif (\n\t\t\t\t\t(isLastItem && !isLastItemInSamePanel) ||\n\t\t\t\t\tisPanelTab ||\n\t\t\t\t\t[TYPE.menubar, TYPE.toolbar].includes(hoverType)\n\t\t\t\t) {\n\t\t\t\t\tsourceItems.splice(sourceItemIndex, 1);\n\n\t\t\t\t\tconst isLastItemRemovable = (items) => {\n\t\t\t\t\t\tif (!items || !items.length) return false;\n\t\t\t\t\t\tconst lastItem = items[items.length - 1];\n\t\t\t\t\t\tif (lastItem === hoverWidget.id) return false; //Do not remove hover spacer\n\n\t\t\t\t\t\tconst lastItemMetaGrid = hoverWidget?.meta?.grid?.find(\n\t\t\t\t\t\t\t(cell) => cell.id === lastItem\n\t\t\t\t\t\t);\n\n\t\t\t\t\t\tif (lastItemMetaGrid) {\n\t\t\t\t\t\t\tif (lastItemMetaGrid.rowIndex < hoverWidget.meta.row) {\n\t\t\t\t\t\t\t\treturn false; //Do not remove widgets above hoverWidget\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\tif (\n\t\t\t\t\t\t\t\tlastItemMetaGrid.rowIndex === hoverWidget.meta.row &&\n\t\t\t\t\t\t\t\tlastItemMetaGrid.columnIndex < hoverWidget.meta.colIndex\n\t\t\t\t\t\t\t) {\n\t\t\t\t\t\t\t\treturn false; // Do not remove widgets before hoverWidget in the same row\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\tconst lastWidget = _widgets[lastItem];\n\t\t\t\t\t\treturn (\n\t\t\t\t\t\t\tlastWidget.type === \"spacer\" || lastWidget.serverType === \"spacer\"\n\t\t\t\t\t\t);\n\t\t\t\t\t};\n\n\t\t\t\t\t//remove all spacers at the end of panel\n\t\t\t\t\twhile (isLastItemRemovable(sourcePanel.items)) {\n\t\t\t\t\t\tconst id = sourcePanel.items.pop();\n\t\t\t\t\t\tif (_widgets[id].id && typeof _widgets[id].id !== \"symbol\") {\n\t\t\t\t\t\t\tstate.removedCustomFields.push({\n\t\t\t\t\t\t\t\tid: _widgets[id].id,\n\t\t\t\t\t\t\t\tversion: _widgets[id].version,\n\t\t\t\t\t\t\t});\n\t\t\t\t\t\t}\n\t\t\t\t\t\tdelete _widgets[id];\n\t\t\t\t\t}\n\t\t\t\t} else {\n\t\t\t\t\tlet attrs = {\n\t\t\t\t\t\tcolSpan: _widgets[dragWidgetProps.id].colSpan || 1,\n\t\t\t\t\t\tserverType: FIELD_TYPE.spacer,\n\t\t\t\t\t\ttype: TYPE.field, // check later if this can be changed to spacer\n\t\t\t\t\t\tname: `spacer${newId}`,\n\t\t\t\t\t\ttitle: \"Spacer\",\n\t\t\t\t\t};\n\t\t\t\t\tif (state.modelType === MODEL_TYPE.CUSTOM) {\n\t\t\t\t\t\tattrs[\"model\"] = dragWidgetProps.attrs.model;\n\t\t\t\t\t\tattrs[\"modelField\"] = dragWidgetProps.attrs.modelField;\n\t\t\t\t\t}\n\t\t\t\t\tif (removedWidgetAttrsColSpan) {\n\t\t\t\t\t\tattrs[\"widgetAttrs\"] = JSON.stringify({\n\t\t\t\t\t\t\t//copy the removed widget's colspan to the spacer\n\t\t\t\t\t\t\tcolSpan: removedWidgetAttrsColSpan,\n\t\t\t\t\t\t});\n\t\t\t\t\t}\n\t\t\t\t\t_widgets[newId] = Object.assign({}, attrs);\n\t\t\t\t\tisExtensionView(state) &&\n\t\t\t\t\t\textendList.push({\n\t\t\t\t\t\t\tname: \"insert\",\n\t\t\t\t\t\t\tposition: \"before\",\n\t\t\t\t\t\t\ttarget: dragWidgetProps.attrs.xPath,\n\t\t\t\t\t\t\telements: [attrs],\n\t\t\t\t\t\t\tid: newId,\n\t\t\t\t\t\t});\n\t\t\t\t\tsourceItems.splice(sourceItemIndex, 1, newId);\n\t\t\t\t}\n\t\t\t} else {\n\t\t\t\t// if same panel, drag widget is before hover widget\n\t\t\t\tif (dragWidgetProps.panelId === hoverWidget.panelId) {\n\t\t\t\t\tif (dragWidgetIndex < hoverWidget.index) {\n\t\t\t\t\t\tisRemovedFromSameList = true;\n\t\t\t\t\t\titemIndex--;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\tsourceItems.splice(sourceItemIndex, 1);\n\t\t\t}\n\t\t}\n\n\t\t//TODO: Move logic inside a similar if statement from above inside this\n\t\t// replace spacer with the dragged widget\n\t\tif (\n\t\t\thoverWidget.attrs.type === \"spacer\" ||\n\t\t\thoverWidget.attrs.serverType === \"spacer\"\n\t\t) {\n\t\t\tlet isNew =\n\t\t\t\t!dragWidgetProps.id ||\n\t\t\t\tObject.values(IDS.createWidgets).indexOf(dragWidgetProps.id) > -1;\n\t\t\tlet newId = isNew ? _.uniqueId() : dragWidgetProps.id;\n\t\t\tlet attrs = Object.assign({}, dragWidgetProps.attrs || {});\n\t\t\tif (isNew && attrs.isCoreField !== false && attrs.name) {\n\t\t\t\tattrs.name = `${attrs.name}${newId}`;\n\t\t\t}\n\t\t\tsetErrorList(attrs, state, newId, isCustomField);\n\t\t\tif (isNew) {\n\t\t\t\t_widgets[newId] = Object.assign({}, attrs);\n\t\t\t\tisExtensionView(state) &&\n\t\t\t\t\textendList.push({\n\t\t\t\t\t\tname: \"insert\",\n\t\t\t\t\t\tposition: \"before\",\n\t\t\t\t\t\ttarget: hoverWidget.attrs.xPath,\n\t\t\t\t\t\telements: [attrs],\n\t\t\t\t\t\tid: newId,\n\t\t\t\t\t});\n\t\t\t} else {\n\t\t\t\tisExtensionView(state) &&\n\t\t\t\t\textendList.push({\n\t\t\t\t\t\tname: \"move\",\n\t\t\t\t\t\tsource: dragWidgetProps.attrs.xPath,\n\t\t\t\t\t\tposition: \"before\",\n\t\t\t\t\t\ttarget: hoverWidget.attrs.xPath,\n\t\t\t\t\t});\n\t\t\t\t_widgets[dragWidgetProps.id] = Object.assign(\n\t\t\t\t\t{ ..._widgets[dragWidgetProps.id] },\n\t\t\t\t\tattrs\n\t\t\t\t);\n\t\t\t}\n\t\t\t(hoverWidget.panelId ? _widgets[hoverWidget.panelId] : state)[\n\t\t\t\t_items\n\t\t\t].splice(\n\t\t\t\tdestinationItems.indexOf(hoverWidget.id) -\n\t\t\t\t\t(isRemovedFromSameList ? 1 : 0),\n\t\t\t\t1,\n\t\t\t\tnewId\n\t\t\t);\n\t\t\tisExtensionView(state) &&\n\t\t\t\textendList.push({ name: \"replace\", target: hoverWidget.attrs.xPath });\n\t\t\treturn { extendList, newId };\n\t\t}\n\n\t\t// cell placement is horizontal special case for Tabs widget\n\t\tif (hoverWidget.meta && hoverWidget.meta.horizontal) {\n\t\t\tlet index = Number(hoverWidget.index);\n\t\t\t// if tab is moved forward\n\t\t\tif (\n\t\t\t\tdragWidgetProps.panelId === hoverWidget.panelId &&\n\t\t\t\tdragWidgetIndex < hoverWidget.index\n\t\t\t) {\n\t\t\t\tindex = index - 2;\n\t\t\t}\n\t\t\t// calculate item position\n\t\t\titemIndex = Math.ceil(Number(index / 2));\n\t\t}\n\n\t\t// remove all dummy cells for flow layout\n\t\tconst destinationPanel = hoverWidget.panelId\n\t\t\t? _widgets[hoverWidget.panelId]\n\t\t\t: state;\n\t\tif ((destinationPanel.layout || PANEL_TYPE.flow) === PANEL_TYPE.flow) {\n\t\t\tbeforeWidgets = [];\n\t\t\tafterWidgets = [];\n\t\t}\n\t\t// fill all widgets in panel\n\t\tconst newWidgetIds = [];\n\t\tconst hoverWidgetParentItems =\n\t\t\t(hoverWidget.panelId ? _widgets[hoverWidget.panelId] : state)[_items] ||\n\t\t\t[];\n\t\tlet hoverWidgetId = hoverWidgetParentItems[itemIndex];\n\t\tlet hoverPath;\n\t\tlet actualHoverWidget = _widgets[hoverWidgetParentItems[itemIndex]];\n\t\tlet position = \"before\";\n\t\tif (!actualHoverWidget && hoverWidgetParentItems.length <= itemIndex) {\n\t\t\thoverWidgetId = hoverWidgetParentItems[hoverWidgetParentItems.length - 1];\n\t\t\tactualHoverWidget =\n\t\t\t\t_widgets[hoverWidgetParentItems[hoverWidgetParentItems.length - 1]];\n\t\t\tposition = \"after\";\n\t\t}\n\t\t// check for sidebar widget\n\t\tif (actualHoverWidget && `${actualHoverWidget.sidebar}` === \"true\") {\n\t\t\tdragWidgetProps.attrs.sidebar = \"true\";\n\t\t\tisExtensionView(state) &&\n\t\t\t\textendList.push({\n\t\t\t\t\tname: \"attribute\",\n\t\t\t\t\ttarget: dragWidgetProps.attrs.xPath,\n\t\t\t\t\tattributes: { name: \"sidebar\", value: \"true\" },\n\t\t\t\t});\n\t\t}\n\t\tif (actualHoverWidget) {\n\t\t\thoverPath =\n\t\t\t\tactualHoverWidget.xPath ||\n\t\t\t\teGeneratePath(_widgets, state[_items], hoverWidgetId);\n\t\t}\n\t\tconst shouldInsertInParent = (dragWidget, hoverWidget) => {\n\t\t\tconst hoverPathInfo = exploreTarget(hoverWidget.xPath);\n\t\t\tconst list = state.extensionMoves.filter((m) => {\n\t\t\t\tif (m.target) {\n\t\t\t\t\tconst targetInfo = exploreTarget(m.target);\n\t\t\t\t\tif (m.name === \"replace\") {\n\t\t\t\t\t\tif (hoverPathInfo.self) {\n\t\t\t\t\t\t\tif (targetInfo.parent.indexOf(hoverPathInfo.self) >= 0) {\n\t\t\t\t\t\t\t\treturn true;\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\treturn false;\n\t\t\t\t\t\t} else if (targetInfo.parent.indexOf(hoverPathInfo.parent) >= 0) {\n\t\t\t\t\t\t\treturn true;\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\treturn false;\n\t\t\t});\n\t\t\tif (\n\t\t\t\t[TYPE.menu, FIELD_TYPE.button, TYPE.menuItem].includes(\n\t\t\t\t\tdragWidget.attrs.type\n\t\t\t\t) &&\n\t\t\t\t[TYPE.menubar, TYPE.toolbar, TYPE.menu].includes(hoverWidget.type)\n\t\t\t) {\n\t\t\t\t// hoverwidget should not have any child remove\n\t\t\t\tif (hoverWidget.items.length === 0 && !list.length) {\n\t\t\t\t\treturn true;\n\t\t\t\t}\n\t\t\t}\n\t\t\treturn false;\n\t\t};\n\t\tconst list = [];\n\t\tbeforeWidgets\n\t\t\t.concat([dragWidgetProps])\n\t\t\t.concat(afterWidgets)\n\t\t\t.forEach((widget) => {\n\t\t\t\tlet attrs = Object.assign({}, widget.attrs || {});\n\t\t\t\tlet newId = widget.id;\n\t\t\t\tconst isCreateWidget = typeof newId === \"symbol\";\n\t\t\t\tconst isNew = !newId || isCreateWidget;\n\t\t\t\tlet shouldAdd = true;\n\t\t\t\t// new drag widgets\n\t\t\t\tif (\n\t\t\t\t\t[TYPE.menubar, TYPE.toolbar].includes(hoverType) &&\n\t\t\t\t\twidget.isSpacer\n\t\t\t\t) {\n\t\t\t\t\tshouldAdd = false;\n\t\t\t\t}\n\t\t\t\tif (shouldAdd) {\n\t\t\t\t\tif (isNew) {\n\t\t\t\t\t\tnewId = _.uniqueId();\n\t\t\t\t\t\tif (attrs.isCoreField !== false) {\n\t\t\t\t\t\t\tif (attrs && Object.keys(attrs).length) {\n\t\t\t\t\t\t\t\tsetErrorList(attrs, state, newId, isCustomField);\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\tif (attrs.name) {\n\t\t\t\t\t\t\t\tattrs.name = `${attrs.name}${newId}`;\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t\t// set new drag widget as edit widget\n\t\t\t\t\t\tif (isCreateWidget) {\n\t\t\t\t\t\t\tstate.editWidget = newId;\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t\tif (widget.isSpacer)\n\t\t\t\t\t\tif (widget.isSpacer) {\n\t\t\t\t\t\t\t// if its spacer widgets\n\t\t\t\t\t\t\tconst _attrs = dragWidgetProps.attrs || {};\n\t\t\t\t\t\t\tconst parentPanelItemSpan = JSON.parse(\n\t\t\t\t\t\t\t\t_widgets[hoverWidget.panelId]?.widgetAttrs || \"{}\"\n\t\t\t\t\t\t\t).itemSpan;\n\n\t\t\t\t\t\t\tattrs = getSpacer({\n\t\t\t\t\t\t\t\twidget,\n\t\t\t\t\t\t\t\tid: newId,\n\t\t\t\t\t\t\t\tmodel: _attrs.model,\n\t\t\t\t\t\t\t\tmodelField: _attrs.modelField,\n\t\t\t\t\t\t\t\t...(Number(parentPanelItemSpan || 6) !==\n\t\t\t\t\t\t\t\tNumber(widget.colSpan || 6)\n\t\t\t\t\t\t\t\t\t? {\n\t\t\t\t\t\t\t\t\t\t\twidgetAttrs: JSON.stringify({\n\t\t\t\t\t\t\t\t\t\t\t\tcolSpan: widget.colSpan || 6,\n\t\t\t\t\t\t\t\t\t\t\t}),\n\t\t\t\t\t\t\t\t\t  }\n\t\t\t\t\t\t\t\t\t: {}),\n\t\t\t\t\t\t\t});\n\t\t\t\t\t\t}\n\t\t\t\t\t// add new widget\n\t\t\t\t\tif (isNew) {\n\t\t\t\t\t\tif (isExtensionView(state) && !isCustomField) {\n\t\t\t\t\t\t\tif (actualHoverWidget) {\n\t\t\t\t\t\t\t\tisExtensionView(state) &&\n\t\t\t\t\t\t\t\t\tlist[position === \"after\" ? \"unshift\" : \"push\"]({\n\t\t\t\t\t\t\t\t\t\tname: \"insert\",\n\t\t\t\t\t\t\t\t\t\tposition,\n\t\t\t\t\t\t\t\t\t\ttarget: hoverPath,\n\t\t\t\t\t\t\t\t\t\telements: [attrs],\n\t\t\t\t\t\t\t\t\t\tid: newId,\n\t\t\t\t\t\t\t\t\t});\n\t\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\t\tconst widget = _widgets[hoverWidget.panelId];\n\t\t\t\t\t\t\t\tif (shouldInsertInParent(dragWidgetProps, widget)) {\n\t\t\t\t\t\t\t\t\tprocessMoves(state, attrs, newId, hoverWidget.panelId);\n\t\t\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\t\t\tlist[position === \"after\" ? \"unshift\" : \"push\"]({\n\t\t\t\t\t\t\t\t\t\tname: \"insert\",\n\t\t\t\t\t\t\t\t\t\tposition: \"inside\",\n\t\t\t\t\t\t\t\t\t\ttarget: widget.xPath,\n\t\t\t\t\t\t\t\t\t\telements: [attrs],\n\t\t\t\t\t\t\t\t\t\tid: newId,\n\t\t\t\t\t\t\t\t\t});\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\tnewWidgetIds.push(newId);\n\t\t\t\t\t\t_widgets[newId] = Object.assign({}, attrs);\n\t\t\t\t\t} else {\n\t\t\t\t\t\tif (isExtensionView(state) && !isCustomField) {\n\t\t\t\t\t\t\tif (actualHoverWidget) {\n\t\t\t\t\t\t\t\tisExtensionView(state) &&\n\t\t\t\t\t\t\t\t\tlist[position === \"after\" ? \"unshift\" : \"push\"]({\n\t\t\t\t\t\t\t\t\t\tname: \"move\",\n\t\t\t\t\t\t\t\t\t\tsource: dragWidgetProps.attrs.xPath,\n\t\t\t\t\t\t\t\t\t\tposition,\n\t\t\t\t\t\t\t\t\t\ttarget: hoverPath,\n\t\t\t\t\t\t\t\t\t});\n\t\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\t\tconst widget = _widgets[hoverWidget.panelId];\n\t\t\t\t\t\t\t\tif (shouldInsertInParent(dragWidgetProps, widget)) {\n\t\t\t\t\t\t\t\t\tprocessMoves(\n\t\t\t\t\t\t\t\t\t\tstate,\n\t\t\t\t\t\t\t\t\t\tdragWidgetProps.attrs,\n\t\t\t\t\t\t\t\t\t\tdragWidgetProps.id,\n\t\t\t\t\t\t\t\t\t\thoverWidget.panelId\n\t\t\t\t\t\t\t\t\t);\n\t\t\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\t\t\tisExtensionView(state) &&\n\t\t\t\t\t\t\t\t\t\tlist[position === \"after\" ? \"unshift\" : \"push\"]({\n\t\t\t\t\t\t\t\t\t\t\tname: \"move\",\n\t\t\t\t\t\t\t\t\t\t\tsource: dragWidgetProps.attrs.xPath,\n\t\t\t\t\t\t\t\t\t\t\tposition: \"inside\",\n\t\t\t\t\t\t\t\t\t\t\ttarget: widget.xPath,\n\t\t\t\t\t\t\t\t\t\t});\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\t_widgets[dragWidgetProps.id] = Object.assign(\n\t\t\t\t\t\t\t{ ..._widgets[dragWidgetProps.id] },\n\t\t\t\t\t\t\tattrs\n\t\t\t\t\t\t);\n\t\t\t\t\t}\n\t\t\t\t\tnewIds.push(newId);\n\t\t\t\t}\n\t\t\t});\n\t\textendList.push(...list);\n\t\t// put all new widgets into panel\n\t\t(\n\t\t\t(hoverWidget.panelId ? _widgets[hoverWidget.panelId] : state)[_items] ||\n\t\t\t[]\n\t\t).splice(itemIndex, 0, ...newIds);\n\t\treturn { extendList, newId: newIds && newIds[newIds.length - 1] };\n\t};\n\nconst getWidgetType = (widgetAttrs, defaultType) => {\n\tconst uiFields = [\"spacer\", \"label\", \"button\"];\n\tlet _type =\n\t\twidgetAttrs.isModelField ||\n\t\twidgetAttrs.isCoreField === false ||\n\t\twidgetAttrs.serverType === \"field\"\n\t\t\t? \"field\"\n\t\t\t: widgetAttrs.type\n\t\t\t? widgetAttrs.type.toLowerCase()\n\t\t\t: defaultType;\n\t_type = uiFields.includes(widgetAttrs.serverType)\n\t\t? widgetAttrs.serverType\n\t\t: _type;\n\treturn _type;\n};\n\n// check source or destination panel is exclusive or not\nexport const checkExclusive = (widgets, source, destination) => {\n\t// special case for exclusive\n\tif (widgets[source.id]) {\n\t\tif (widgets[source.panelId]) {\n\t\t\tlet sourcePanelAttrs = widgets[source.panelId];\n\t\t\tif (\n\t\t\t\tsourcePanelAttrs.exclusive &&\n\t\t\t\tdestination.panelId !== source.panelId\n\t\t\t) {\n\t\t\t\treturn true;\n\t\t\t}\n\t\t}\n\t}\n\tif (widgets[destination.id]) {\n\t\tif (widgets[destination.panelId]) {\n\t\t\tlet destinationPanelAttrs = widgets[destination.panelId];\n\t\t\tif (\n\t\t\t\tdestinationPanelAttrs.exclusive &&\n\t\t\t\tsource.panelId !== destination.panelId\n\t\t\t) {\n\t\t\t\treturn true;\n\t\t\t}\n\t\t}\n\t}\n\treturn false;\n};\n\nconst isSamePositionInOriginal = (elements, panel, widget, hoverItemIndex) => {\n\tconst field = widget.attrs || widget || {};\n\tlet flag = false;\n\t(elements || []).forEach((element) => {\n\t\tif (element.elements) {\n\t\t\tif (\n\t\t\t\telement.attributes &&\n\t\t\t\tpanel &&\n\t\t\t\telement.attributes.name === panel.name\n\t\t\t) {\n\t\t\t\tconst item = element.elements[hoverItemIndex];\n\t\t\t\tif (\n\t\t\t\t\titem &&\n\t\t\t\t\titem.attributes &&\n\t\t\t\t\tfield &&\n\t\t\t\t\titem.attributes.name === field.name\n\t\t\t\t) {\n\t\t\t\t\tflag = true;\n\t\t\t\t}\n\t\t\t}\n\t\t\tif (!flag && element.elements && element.elements.length) {\n\t\t\t\tconst result = isSamePositionInOriginal(\n\t\t\t\t\telement.elements,\n\t\t\t\t\tpanel,\n\t\t\t\t\twidget,\n\t\t\t\t\thoverItemIndex\n\t\t\t\t);\n\t\t\t\tif (result === true) {\n\t\t\t\t\tflag = true;\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t});\n\treturn flag;\n};\n\nconst getTarget = (fieldTarget, itemTarget) => {\n\treturn fieldTarget || itemTarget;\n};\n\nexport const isPanelTab = (field) => {\n\tconst { type, widgetAttrs } = field;\n\tif (type === TYPE.panel && widgetAttrs) {\n\t\tconst attrs = JSON.parse(widgetAttrs || \"{}\");\n\t\tif (attrs.tab === \"true\") {\n\t\t\treturn true;\n\t\t}\n\t}\n\treturn false;\n};\n\nconst getColSpan = (widget) => {\n\tconst attrs = JSON.parse(widget.widgetAttrs || \"{}\");\n\tconst defaultColspan = widget.type === TYPE.panel ? 12 : 6;\n\treturn attrs.colSpan || defaultColspan;\n};\n\nconst getCols = (widget) => {\n\tif ([TYPE.panel, TYPE.tabs].includes(widget.type)) {\n\t\treturn { cols: 12 };\n\t}\n\treturn {};\n};\n\nexport const getMenuBuilder = (studioMenu) => {\n\tif (studioMenu) {\n\t\treturn {\n\t\t\tmenuBuilderTitle: studioMenu.title,\n\t\t\tmenuBuilderParent: studioMenu.parentMenu,\n\t\t};\n\t}\n\treturn {};\n};\n\nexport const generateCustomModelSchema = (\n\tfields = [],\n\trecord,\n\ttypeLateral = \"\",\n\tformType = \"form\"\n) => {\n\tlet flag = false;\n\tconst _widgets = {};\n\tconst formItems = [];\n\tconst tabItems = [];\n\tlet _panelId;\n\tfields &&\n\t\tfields.length &&\n\t\tfields.forEach((f) => {\n\t\t\tconst _ID = _.uniqueId();\n\t\t\tconst isTab = isPanelTab(f);\n\t\t\tif ([TYPE.panel, TYPE.tabs].includes(f.type)) {\n\t\t\t\tflag = true;\n\t\t\t\t_panelId = _ID;\n\t\t\t\tf[\"items\"] = [];\n\t\t\t\tf[\"layout\"] = \"grid\";\n\t\t\t} else if (!flag) {\n\t\t\t\tconst _item = _widgets[_panelId];\n\t\t\t\tif (_item) {\n\t\t\t\t\t_item.items.push(_ID);\n\t\t\t\t\t_widgets[_panelId] = {\n\t\t\t\t\t\t..._widgets[_panelId],\n\t\t\t\t\t\titems: [..._item.items],\n\t\t\t\t\t};\n\t\t\t\t} else {\n\t\t\t\t\tflag = true;\n\t\t\t\t}\n\t\t\t}\n\t\t\tif (flag) {\n\t\t\t\tflag = false;\n\t\t\t\tif (isTab) {\n\t\t\t\t\ttabItems.push(_ID);\n\t\t\t\t} else {\n\t\t\t\t\tformItems.push(_ID);\n\t\t\t\t}\n\t\t\t}\n\t\t\tif (f.selectionText && f.selectionText.length) {\n\t\t\t\tf.updateSelection = true;\n\t\t\t}\n\t\t\t_widgets[_ID] = {\n\t\t\t\t...f,\n\t\t\t\tcolSpan: getColSpan(f),\n\t\t\t\t...getCols(f),\n\t\t\t\ttype: `${f.type}${typeLateral}`,\n\t\t\t};\n\t\t});\n\t// add tab panel if tabItems has length\n\tif (tabItems.length) {\n\t\tconst _ID = _.uniqueId();\n\t\tconst field = {\n\t\t\titems: [...tabItems],\n\t\t\ttype: TYPE.tabs,\n\t\t\ttitle: \"Tab Panel\",\n\t\t};\n\t\tformItems.push(_ID);\n\t\t_widgets[_ID] = { ...field };\n\t}\n\tconst form = formType === \"customForm\" ? IDS.customForm : IDS.form;\n\tconst schema = {\n\t\twidgets: {\n\t\t\t[form]: {\n\t\t\t\ttype: formType,\n\t\t\t\tcols: 12,\n\t\t\t\t...record,\n\t\t\t\t...getMenuBuilder(record ? record.studioMenu : undefined),\n\t\t\t},\n\t\t\t[IDS.dumpField]: {\n\t\t\t\ttype: TYPE.dumpField,\n\t\t\t\tname: \"\",\n\t\t\t},\n\t\t\t..._widgets,\n\t\t},\n\t\titems: [...formItems],\n\t};\n\treturn schema;\n};\n\nfunction processXML(xmlString, indent) {\n\treturn format(xmlString);\n}\n\nconst replacer = (key, modelType) => {\n\tconst camelToDash = [\"formView\", \"gridView\", \"minSize\", \"maxSize\"];\n\tconst xField = [\"bind\"];\n\tif (modelType === MODEL_TYPE.BASE) {\n\t\tconst keyReplacer = {\n\t\t\ttargetModel: \"target\",\n\t\t\tminSize: \"min\",\n\t\t\tmaxSize: \"max\",\n\t\t};\n\t\tkey = keyReplacer[key] || key;\n\t\tif (camelToDash.includes(key)) {\n\t\t\tkey = camelToDashCase(key);\n\t\t}\n\t\tif (xField.includes(key)) {\n\t\t\tkey = `x-${camelToDashCase(key)}`;\n\t\t}\n\t}\n\treturn key;\n};\n\nconst editorKeyReplacer = (key, modelType) => {\n\tconst keyReplacer = {\n\t\ttargetModel: \"target\",\n\t\tminSize: \"min\",\n\t\tmaxSize: \"max\",\n\t};\n\tif (modelType === MODEL_TYPE.BASE) {\n\t\tconst _keyIndex = Object.values(keyReplacer).findIndex((v) => v === key);\n\t\tif (_keyIndex !== -1) {\n\t\t\tkey = Object.keys(keyReplacer)[_keyIndex];\n\t\t}\n\t}\n\treturn key;\n};\n\n//this is similar to isDummyWidget , to be checked later for removal\nfunction isDummyField(widget) {\n\tconst modelTypes = [];\n\tmodelFields.forEach((f) => {\n\t\tconst { value = [] } = f;\n\t\tconst types = value.map((v) => v.serverType);\n\t\tmodelTypes.push(...types);\n\t});\n\treturn widget.serverType === \"field\" && modelTypes.includes(widget.type);\n}\n\nfunction valueConverter(value, key) {\n\tconst ltKeys = [\"title\", \"text\"];\n\tif (value && ltKeys.includes(key)) {\n\t\tvalue = value.replace(/</g, \"&lt;\");\n\t}\n\treturn value;\n}\n\nconst getWidgetAttrs = (attrs, exempt = [], modelType) => {\n\tconst widgetAttrs = {};\n\tconst exemptedAttrs = [\n\t\t\"version\",\n\t\t\"type\",\n\t\t\"typeName\",\n\t\t\"label\",\n\t\t\"items\",\n\t\t\"serverType\",\n\t\t\"layout\",\n\t\t\"cols\",\n\t\t\"isCoreField\",\n\t\t\"isModelField\",\n\t\t\"relationship\",\n\t\t\"current\",\n\t\t\"autoTitle\",\n\t\t\"metaModel\",\n\t\t\"targetSearch\",\n\t\t\"editorType\",\n\t\t\"studioApp\",\n\t\t...exempt,\n\t];\n\tif (attrs.serverType !== \"field\") {\n\t\texemptedAttrs.push(\"targetModel\", \"targetName\", \"target\");\n\t}\n\tObject.keys(attrs).forEach((key) => {\n\t\tif (!exemptedAttrs.includes(key) && attrs[key] !== \"\") {\n\t\t\tlet flag = true;\n\t\t\tif (modelType === MODEL_TYPE.BASE && isDefaultValue(key, attrs[key])) {\n\t\t\t\tflag = false;\n\t\t\t}\n\t\t\tif (flag) {\n\t\t\t\tif (key === \"dummyType\") {\n\t\t\t\t\twidgetAttrs[\"type\"] = attrs[key];\n\t\t\t\t} else {\n\t\t\t\t\twidgetAttrs[replacer(key, modelType)] = valueConverter(\n\t\t\t\t\t\tattrs[key],\n\t\t\t\t\t\tkey\n\t\t\t\t\t);\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t});\n\t// check for dummy model field\n\tif (attrs.type === TYPE.panelInclude) {\n\t\tif (typeof attrs.view === \"object\") {\n\t\t\twidgetAttrs.view = attrs.view.name;\n\t\t}\n\t}\n\tif (attrs.isModelField || isDummyField(attrs)) {\n\t\twidgetAttrs[\"type\"] = attrs.type;\n\t}\n\tif (attrs.type === TYPE.panelRelated) {\n\t\twidgetAttrs[\"name\"] = attrs.field;\n\t}\n\tif (widgetAttrs.name) {\n\t\t// change array field index\n\t\tconst squareIndex = widgetAttrs.name.indexOf(\"[\");\n\t\tif (squareIndex !== -1) {\n\t\t\twidgetAttrs.name = widgetAttrs.name.substring(0, squareIndex);\n\t\t}\n\t}\n\treturn widgetAttrs;\n};\n\nconst getCustomWidget = (widget, exempt = []) => {\n\tconst _widget = {};\n\tconst exemptedAttrs = [\n\t\t\"image\",\n\t\t\"serverType\",\n\t\t\"isModelField\",\n\t\t\"isCoreField\",\n\t\t\"current\",\n\t\t...exempt,\n\t];\n\tObject.keys(widget).forEach((key) => {\n\t\tif (!exemptedAttrs.includes(key)) {\n\t\t\tif (key === \"type\" && [\"item\", \"field\"].includes(widget[key])) {\n\t\t\t\t_widget[key] = widget[\"serverType\"];\n\t\t\t} else {\n\t\t\t\t_widget[key] = widget[key] === \"\" ? null : widget[key];\n\t\t\t}\n\t\t}\n\t});\n\treturn _widget;\n};\n\nconst getCustomModelFields = (\n\titems = [],\n\twidgets,\n\tadditionalProps = {},\n\tcountSequence = false,\n\tsequence = 0\n) => {\n\tconst fields = [];\n\titems.forEach((item) => {\n\t\tif (widgets[item]) {\n\t\t\tlet _widget = { ...widgets[item] };\n\t\t\tconst exempt = [];\n\t\t\tif (![\"dump_field\", \"form\"].includes(_widget.type)) {\n\t\t\t\tif (_widget.type !== TYPE.tabs) {\n\t\t\t\t\tif (typeof _widget.id === \"symbol\") {\n\t\t\t\t\t\tdelete _widget.id;\n\t\t\t\t\t}\n\t\t\t\t\tif (_widget.showTitle !== \"false\") {\n\t\t\t\t\t\tdelete _widget.showTitle;\n\t\t\t\t\t}\n\t\t\t\t\tif (countSequence) {\n\t\t\t\t\t\t_widget.sequence = sequence;\n\t\t\t\t\t\tsequence++;\n\t\t\t\t\t}\n\t\t\t\t\tif (_widget.serverType === \"spacer\") {\n\t\t\t\t\t\texempt.push(\"title\");\n\t\t\t\t\t}\n\t\t\t\t\tfields.push({\n\t\t\t\t\t\t...getCustomWidget(_widget, exempt),\n\t\t\t\t\t\t...additionalProps,\n\t\t\t\t\t});\n\t\t\t\t}\n\t\t\t\tif (_widget.items && _widget.items.length) {\n\t\t\t\t\tconst modelFields = getCustomModelFields(\n\t\t\t\t\t\t_widget.items,\n\t\t\t\t\t\twidgets,\n\t\t\t\t\t\tadditionalProps,\n\t\t\t\t\t\tcountSequence,\n\t\t\t\t\t\tsequence\n\t\t\t\t\t);\n\t\t\t\t\tfields.push(...modelFields.fields);\n\t\t\t\t\tsequence = modelFields.sequence;\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t});\n\treturn { fields, sequence };\n};\n\nconst isCreatedFromStudio = ({ xmlId = null, extension }) => {\n\tif (xmlId && !extension) {\n\t\tconst index = xmlId.indexOf(\"studio-\");\n\t\tif (index === 0) {\n\t\t\treturn true;\n\t\t}\n\t}\n\treturn false;\n};\n\nconst getFormProperties = (form, exempt = []) => {\n\tconst except = [\"type\", \"cols\", \"items\", ...exempt];\n\tconst properties = {};\n\tObject.keys(form).forEach((key) => {\n\t\tif (!except.includes(key)) {\n\t\t\tproperties[key] = form[key] === \"\" ? null : form[key];\n\t\t}\n\t});\n\treturn properties;\n};\n\n/**\n * Checks whether value is same as default value or not\n * for given property name.\n * Returns boolean true/false\n * @param {string} name\n * @param {string} value\n */\nconst isAttrHasDefaultValue = (name, value) => {\n\tconst defaultValue = DEFAULT_VALUE[name];\n\tif (defaultValue !== undefined && `${defaultValue}` === `${value}`) {\n\t\treturn true;\n\t}\n\treturn false;\n};\n\nexport const getProperty = (\n\tname,\n\tvalue,\n\tparentField,\n\tparentValue,\n\tshouldCheckParent = true\n) => {\n\tconst obj = { [name]: value };\n\tif (shouldCheckParent) {\n\t\tconst _value =\n\t\t\ttypeof parentValue === \"string\"\n\t\t\t\t? JSON.parse(parentValue)\n\t\t\t\t: parentValue || {};\n\t\tif (parentField && ![undefined, \"\", null].includes(value)) {\n\t\t\t// check for default value\n\t\t\tif (isAttrHasDefaultValue(name, value)) {\n\t\t\t\tdelete _value[name];\n\t\t\t\treturn { [parentField]: JSON.stringify({ ..._value }) };\n\t\t\t}\n\t\t\tconst _obj = { [name]: `${value}` };\n\t\t\treturn { [parentField]: JSON.stringify({ ..._value, ..._obj }) };\n\t\t} else if (parentField && (!value || value === \"\")) {\n\t\t\tdelete _value[name];\n\t\t\treturn { [parentField]: JSON.stringify({ ..._value }) };\n\t\t}\n\t}\n\tif (name === \"showTitle\" && value === true) {\n\t\treturn { showTitle: undefined };\n\t}\n\treturn obj;\n};\n\nexport const getPropertyValue = (\n\tlist,\n\tname,\n\tparentField,\n\tdefaultValue,\n\tshouldCheckParent = true\n) => {\n\tif (shouldCheckParent && parentField) {\n\t\tif (list[parentField]) {\n\t\t\tconst field = JSON.parse(list[parentField]);\n\t\t\treturn [undefined, null].includes(field[name])\n\t\t\t\t? defaultValue\n\t\t\t\t: field[name];\n\t\t}\n\t\treturn defaultValue || null;\n\t}\n\treturn [undefined, null].includes(list[name]) ? defaultValue : list[name];\n};\n\nconst getDefaultProperties = (modelType) => {\n\tswitch (modelType) {\n\t\tcase MODEL_TYPE.CUSTOM:\n\t\t\treturn { formWidth: \"large\" };\n\t\tcase MODEL_TYPE.BASE: {\n\t\t\treturn { width: \"large\" };\n\t\t}\n\t\tdefault:\n\t\t\treturn {};\n\t}\n};\n\nconst getPatchList = (xmlJson) => {\n\tif (xmlJson) {\n\t\tconst { elements = [] } = xmlJson;\n\t\tif (elements[0]) {\n\t\t\treturn elements[0].elements || [];\n\t\t}\n\t}\n\treturn [];\n};\n\nconst filterFormPatch = (patchList) => {\n\treturn patchList.filter((element) => element.attributes.target === \"/\");\n};\n\nconst getCurrentFormAttributes = (xml) => {\n\tconst { elements = [] } = xml;\n\treturn elements[0].attributes || {};\n};\n\nconst mergeFormAttributes = (patchList, formPatch) => {\n\tconst index = patchList.findIndex(\n\t\t(element) => element.attributes.target === \"/\"\n\t);\n\tconst targetIndex = index === -1 ? 0 : index;\n\tconst remove = index === -1 ? 0 : 1;\n\tif (Object.keys(formPatch).length) {\n\t\tpatchList.splice(targetIndex, remove, { ...formPatch });\n\t} else if (index !== -1) {\n\t\tpatchList.splice(index, 1);\n\t}\n\treturn patchList;\n};\n\nconst camelToDashCase = (string, caseString = \"-\") => {\n\treturn string.replace(/[A-Z]/g, (m) => caseString + m.toLowerCase());\n};\n\nconst dashToCamelCase = (string) => {\n\treturn string.replace(/-([a-z])/g, function (g) {\n\t\treturn g[1].toUpperCase();\n\t});\n};\n\nconst isDefaultValue = (field, value) => {\n\tconst fieldValue = DEFAULT_VALUE[field];\n\tif ([true, false].includes(fieldValue) && `${value}` === `${fieldValue}`) {\n\t\treturn true;\n\t}\n\treturn false;\n};\n\nconst getReferenceProperty = (widgetType) => {\n\tconst referenceProperty = {\n\t\t[TYPE.panelInclude]: \"view\",\n\t};\n\tconst refProp = referenceProperty[widgetType];\n\treturn refProp || \"name\";\n};\n\nconst checkTarget = (target, checkString, which) => {\n\t// 2 for parent check and 3 for itself/child element check\n\tconst targetSplit = target.split(\"/\");\n\tif (which) {\n\t\tif (targetSplit[which] === checkString) {\n\t\t\treturn true;\n\t\t}\n\t\treturn false;\n\t}\n\treturn target === checkString;\n};\n\nconst exploreTarget = (target, which = 3) => {\n\t// 2 for parent check and 3 for itself/child element check\n\tconst targetSplit = target.split(\"/\");\n\tconst length = targetSplit.length;\n\tlet parent = length > 3 ? targetSplit[length - 2] : targetSplit[length - 1];\n\tlet self = length > 3 ? targetSplit[length - 1] : undefined;\n\treturn { parent, self };\n};\n\nconst getViews = (list, viewName) => {\n\tlet view = list.find((v) => v.computed === true);\n\tlet originalXML = list.find(\n\t\t(v) => v.computed !== true && v.extension !== true\n\t);\n\tconst extensionXML = list.find(\n\t\t(v) => v.extension === true && v.xmlId === `studio-${viewName}`\n\t);\n\treturn {\n\t\tview: view || originalXML,\n\t\toriginalXML,\n\t\textensionXML,\n\t};\n};\n\nconst getElementTypes = (name, field, _type) => {\n\tlet serverType;\n\tlet type;\n\tif (field) {\n\t\tserverType = field.type.toLowerCase();\n\t\ttype = name;\n\t} else {\n\t\tserverType = name;\n\t\ttype = _type ? _type : name === \"field\" ? undefined : name; // if element is field then set default type string\n\t}\n\treturn {\n\t\tserverType: TYPE_REPLACER[serverType] || serverType,\n\t\ttype: TYPE_REPLACER[type] || type,\n\t};\n};\n\nconst getTitle = (attributes, field) => {\n\tif (attributes.title) {\n\t\treturn { title: attributes.title };\n\t}\n\tif (field?.label) {\n\t\treturn { autoTitle: field.label };\n\t}\n\tif (attributes.name) {\n\t\treturn { autoTitle: camelToDashCase(attributes.name, \" \") };\n\t}\n\treturn {};\n};\n\nconst generateViewFromJson = ({\n\tview,\n\tfields,\n\toriginal,\n\textensionXML,\n\tattrsList,\n}) => {\n\tconst { elements } = view;\n\n\tconst getElementName = (attributes, parent, itemList, elementType) => {\n\t\tconst nameObj = { name: attributes.name };\n\t\treturn nameObj;\n\t};\n\n\tconst getElementToWidget = (element, fields, parent, itemList) => {\n\t\tlet widget = {};\n\t\tlet field;\n\t\tif (element) {\n\t\t\tconst { type, ...attributes } = element.attributes || {};\n\t\t\tif (element.name.indexOf(\"panel\") === -1) {\n\t\t\t\tfield = fields.find((f) => f.name === attributes.name);\n\t\t\t}\n\t\t\tconst attrs = {};\n\t\t\tObject.keys(attributes).map((key) => {\n\t\t\t\tlet _key = key;\n\t\t\t\tif (key.indexOf(\"x-\") === 0) {\n\t\t\t\t\t_key = key.substring(2);\n\t\t\t\t}\n\t\t\t\tattrs[editorKeyReplacer(dashToCamelCase(_key), MODEL_TYPE.BASE)] =\n\t\t\t\t\tattributes[key];\n\t\t\t\treturn undefined;\n\t\t\t});\n\t\t\tconst targetModel = getTarget(\n\t\t\t\tfield?.target || field?.targetModel,\n\t\t\t\tattributes.target\n\t\t\t);\n\t\t\twidget = {\n\t\t\t\t...attrs,\n\t\t\t\tcolSpan: Number(attributes.colSpan || 6),\n\t\t\t\t...getElementName(attributes, parent, itemList, element.name),\n\t\t\t\t...getElementTypes(element.name, field, type),\n\t\t\t\t...getTitle(attributes, field),\n\t\t\t};\n\t\t\tif (targetModel) {\n\t\t\t\twidget.targetModel = targetModel;\n\t\t\t}\n\t\t\tif (\n\t\t\t\telement.name &&\n\t\t\t\t(element.name.indexOf(TYPE.panel) >= 0 ||\n\t\t\t\t\t[TYPE.menubar, TYPE.toolbar].includes(element.name))\n\t\t\t) {\n\t\t\t\twidget.colSpan = Number(attributes.colSpan || 12);\n\t\t\t\twidget.cols = 12;\n\t\t\t\twidget.layout = \"grid\";\n\t\t\t\twidget.serverType =\n\t\t\t\t\twidget.type === \"panel\" && widget.tab === true\n\t\t\t\t\t\t? TYPE.tabs\n\t\t\t\t\t\t: widget.serverType || widget.type;\n\t\t\t}\n\t\t}\n\t\treturn { widget, field };\n\t};\n\n\tconst getSpecialType = (element) => {\n\t\treturn element.name;\n\t};\n\tconst getXMLToViewItems = (elements = [], fields, parent) => {\n\t\tconst exclude = [\"panel-mail\"];\n\t\tlet _widgets = {};\n\t\tconst itemList = [];\n\t\tconst fieldList = [];\n\t\telements.forEach((element) => {\n\t\t\tif (element.attributes && `${element.attributes.json}` === \"true\") {\n\t\t\t\treturn;\n\t\t\t}\n\t\t\tif (!exclude.includes(element.name) && element.type !== \"cdata\") {\n\t\t\t\tconst _ID = _.uniqueId();\n\t\t\t\tconst { widget, field } = getElementToWidget(\n\t\t\t\t\telement,\n\t\t\t\t\tfields,\n\t\t\t\t\tparent,\n\t\t\t\t\titemList\n\t\t\t\t);\n\t\t\t\tif (field) {\n\t\t\t\t\tfieldList.push(field);\n\t\t\t\t}\n\t\t\t\titemList.push(_ID);\n\t\t\t\tif (element.name && element.name.indexOf(TYPE.panel) >= 0) {\n\t\t\t\t\twidget.items = [];\n\t\t\t\t}\n\t\t\t\tif (element.elements && element.name !== \"field\") {\n\t\t\t\t\tconst items = getXMLToViewItems(\n\t\t\t\t\t\telement.elements,\n\t\t\t\t\t\tfields,\n\t\t\t\t\t\telement.attributes\n\t\t\t\t\t);\n\t\t\t\t\t_widgets = { ..._widgets, ...items._widgets };\n\t\t\t\t\twidget.items = [...items.itemList];\n\t\t\t\t\tfieldList.push(...items.fieldList);\n\t\t\t\t}\n\t\t\t\tif (element.elements && element.name === \"field\") {\n\t\t\t\t\t// check for viewer\n\t\t\t\t\tconst type = getSpecialType(element.elements[0]);\n\t\t\t\t\tif (type) {\n\t\t\t\t\t\twidget.type = type;\n\t\t\t\t\t\twidget.elements = element.elements;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\t// override with meta attrs list\n\t\t\t\tif (widget.name) {\n\t\t\t\t\tconst list = (attrsList || []).filter(\n\t\t\t\t\t\t(attr) => attr.field === widget.name\n\t\t\t\t\t);\n\t\t\t\t\tlist.forEach((attr) => {\n\t\t\t\t\t\tif ([\"selection-in\"].includes(attr.name)) {\n\t\t\t\t\t\t\twidget[attr.name] = attr.value;\n\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\twidget[\n\t\t\t\t\t\t\t\teditorKeyReplacer(dashToCamelCase(attr.name), MODEL_TYPE.BASE)\n\t\t\t\t\t\t\t] = attr.value;\n\t\t\t\t\t\t}\n\t\t\t\t\t});\n\t\t\t\t}\n\t\t\t\t_widgets[_ID] = { ...widget };\n\t\t\t}\n\t\t});\n\t\treturn { _widgets, itemList, fieldList };\n\t};\n\n\tconst { itemList, _widgets, fieldList } = getXMLToViewItems(elements, fields);\n\tconst form = _widgets[itemList[0]];\n\tconst items = form.items || [];\n\tdelete _widgets[itemList[0]];\n\tconst schema = {\n\t\twidgets: {\n\t\t\t[IDS.form]: {\n\t\t\t\ttype: TYPE.form,\n\t\t\t\tcols: 12,\n\t\t\t\t...form,\n\t\t\t\titems: undefined,\n\t\t\t},\n\t\t\t[IDS.dumpField]: {\n\t\t\t\ttype: TYPE.dumpField,\n\t\t\t\tname: \"\",\n\t\t\t},\n\t\t\t..._widgets,\n\t\t},\n\t\titems,\n\t\tfieldList,\n\t};\n\treturn schema;\n};\n\nconst generateXMLToViewSchema = ({\n\tview,\n\tfields,\n\toriginal = false,\n\textensionXML,\n\tattrsList,\n}) => {\n\tconst { elements } = JSON.parse(\n\t\tconvert.xml2json(view.xml, {\n\t\t\tcompact: false,\n\t\t\tfullTagEmptyElement: false,\n\t\t})\n\t);\n\treturn generateViewFromJson({\n\t\tview: { elements },\n\t\tfields,\n\t\toriginal,\n\t\textensionXML,\n\t\tattrsList,\n\t});\n};\n\nconst getChangeList = (schema, extensionXml) => {\n\tconst list = [];\n\tconst { widgets } = schema;\n\tconst elems = getExtensionElements(extensionXml);\n\tconst widgetList = Object.values(widgets);\n\tconst widgetIds = Object.keys(widgets);\n\telems.forEach((json) => {\n\t\tconst { elements = [] } = json;\n\t\tconst moveElement = elements[0];\n\t\tif (moveElement && moveElement.attributes && moveElement.name === \"move\") {\n\t\t\tconst source = exploreTarget(moveElement.attributes.source);\n\t\t\tif (source.self) {\n\t\t\t\tconst index = source.self\n\t\t\t\t\t? widgetList.findIndex(\n\t\t\t\t\t\t\t(w) => `${w.type}[@name='${w.name}']` === source.self\n\t\t\t\t\t  )\n\t\t\t\t\t: widgetList.findIndex(\n\t\t\t\t\t\t\t(w) => `${w.type}[@name='${w.name}']` === source.parent\n\t\t\t\t\t  );\n\t\t\t\tif (widgetIds[index]) {\n\t\t\t\t\tlist.push(widgetIds[index]);\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t});\n\treturn list;\n};\n\nconst getExtensionElements = (xml) => {\n\tconst extensionJson = JSON.parse(\n\t\tconvert.xml2json(xml, {\n\t\t\tcompact: false,\n\t\t\tfullTagEmptyElement: false,\n\t\t})\n\t);\n\tconst elems = extensionJson.elements[0].elements;\n\treturn elems;\n};\n\nfunction randomString(length) {\n\tconst chars =\n\t\t\"0123456789abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ\";\n\tvar result = \"\";\n\tfor (var i = length; i > 0; --i)\n\t\tresult += chars[Math.floor(Math.random() * chars.length)];\n\treturn result;\n}\n\nexport const generateFieldUniqueTitle = ({ name, fieldName }) => {\n\tconst text = randomString(6);\n\treturn `studio:${text}:${fieldName}:${name}`;\n};\n\nexport function getDefaultGridFormName(str, isForm = false, isJson = false) {\n\tif (!str) return;\n\tif (isJson) {\n\t\treturn `custom-model-${str.name}-${isForm ? \"form\" : \"grid\"}`;\n\t}\n\tconst models = str.split(\".\");\n\tconst modelString = models[models.length - 1];\n\tif (!modelString) return;\n\tconst viewName = dasherize(modelString);\n\treturn `${viewName.toLowerCase()}-${isForm ? \"form\" : \"grid\"}`;\n}\n\nexport default {\n\tcamleCaseString,\n\ttranslate,\n\tprocessXML,\n\tgetWidgetAttrs,\n\tgetCustomModelFields,\n\tisCreatedFromStudio,\n\tgetFormProperties,\n\tgetDefaultProperties,\n\tgetPatchList,\n\tkeyReplacer: replacer,\n\tvalueConverter,\n\tfilterFormPatch,\n\tgetCurrentFormAttributes,\n\tmergeFormAttributes,\n\tcamelToDashCase,\n\tdashToCamelCase,\n\tisSamePositionInOriginal,\n\tgetWidgetType,\n\tisDefaultValue,\n\tgetReferenceProperty,\n\tcheckTarget,\n\texploreTarget,\n\tgetViews,\n\tgenerateXMLToViewSchema,\n\tgenerateViewFromJson,\n\tgetChangeList,\n\tgetDefaultGridFormName,\n\tisPanelTab,\n};\n","import React from \"react\";\nimport classNames from \"classnames\";\nimport { GRID_SIZE, PANEL_TYPE, TYPE } from \"../constants\";\nimport { useStore } from \"../store/context\";\n\nconst DEFAULTS = {\n\tITEM_COLSPAN: 1,\n\tMAX_SIZE: 12,\n\tPARENT_ITEM_SPAN: 6,\n};\n\nconst getColSpan = (col, parentItemSpan) => {\n\tconst widgetAttrs = col.widgetAttrs ? JSON.parse(col.widgetAttrs) : {};\n\tif (widgetAttrs.colSpan) {\n\t\treturn Number(widgetAttrs.colSpan);\n\t} else {\n\t\treturn Number(parentItemSpan) || col.colSpan || DEFAULTS.PARENT_ITEM_SPAN;\n\t}\n};\n\n// get Column cell CSS according to colSpan and Container size\nexport const getColumnCss = (columns, colSpan) => {\n\tconst [n, span] = [Number(columns), Number(colSpan)];\n\tif (n > GRID_SIZE.max) return \"\";\n\treturn `col-span col-${\n\t\tspan > n ? GRID_SIZE.max : Math.floor((GRID_SIZE.max * span) / n)\n\t}`;\n};\n\nconst getFullGrid = (\n\titems,\n\tsize = DEFAULTS.MAX_SIZE,\n\tisStackLayout,\n\tparentItemSpan,\n\tdraggedWidgetAttrsColSpan\n) => {\n\tconst grid = [];\n\tconst isStack = size === 1 || isStackLayout;\n\tconst gridSize = isStack ? DEFAULTS.MAX_SIZE : size;\n\tconst _parentItemSpan = parentItemSpan || DEFAULTS.PARENT_ITEM_SPAN;\n\tlet row = [];\n\tlet span = 0;\n\n\tconst getItemColspan = (colSpan) => {\n\t\treturn Number(colSpan);\n\t};\n\n\tif (!items.length) {\n\t\tlet remainingSpan = gridSize;\n\t\tconst row = [];\n\t\tconst $cell = { id: 0, separator: true };\n\n\t\twhile (remainingSpan > 0) {\n\t\t\trow.push($cell);\n\t\t\tconst colSpan = isStack\n\t\t\t\t? gridSize\n\t\t\t\t: remainingSpan < _parentItemSpan\n\t\t\t\t? remainingSpan\n\t\t\t\t: _parentItemSpan;\n\t\t\trow.push({\n\t\t\t\tid: 0,\n\t\t\t\tdummy: true,\n\t\t\t\tdummyPanel: true,\n\t\t\t\tcolSpan: Number(colSpan),\n\t\t\t});\n\t\t\tremainingSpan -= colSpan;\n\t\t\tif (remainingSpan <= 0) {\n\t\t\t\trow.push($cell);\n\t\t\t}\n\t\t}\n\n\t\treturn [row];\n\t}\n\n\tconst addRow = ({ item, overflow = false } = {}) => {\n\t\tif (overflow) {\n\t\t\tlet fillColspan = gridSize - (span - getItemColspan(item.colSpan));\n\t\t\twhile (fillColspan > 0) {\n\t\t\t\tif (fillColspan > (draggedWidgetAttrsColSpan || _parentItemSpan)) {\n\t\t\t\t\trow.push({\n\t\t\t\t\t\tid: 0,\n\t\t\t\t\t\tdummy: true,\n\t\t\t\t\t\tcolSpan: draggedWidgetAttrsColSpan || _parentItemSpan,\n\t\t\t\t\t});\n\t\t\t\t} else {\n\t\t\t\t\trow.push({\n\t\t\t\t\t\tid: 0,\n\t\t\t\t\t\tdummy: true,\n\t\t\t\t\t\tcolSpan: fillColspan,\n\t\t\t\t\t});\n\t\t\t\t}\n\t\t\t\tfillColspan -= draggedWidgetAttrsColSpan || _parentItemSpan;\n\t\t\t}\n\t\t}\n\t\tgrid.push(row);\n\t\trow = [];\n\t\tspan = 0;\n\t};\n\n\tconst addItem = (item) => row.push(item);\n\n\tfor (let i = 0; i < items.length; i++) {\n\t\tconst item = Object.assign(\n\t\t\titems[i],\n\t\t\tisStack\n\t\t\t\t? { colSpan: DEFAULTS.MAX_SIZE }\n\t\t\t\t: { colSpan: getItemColspan(getColSpan(items[i], parentItemSpan)) }\n\t\t);\n\t\tconst { colSpan: itemSpan = DEFAULTS.ITEM_COLSPAN } = item;\n\t\tconst isLastItem = i === items.length - 1;\n\t\tspan += getItemColspan(itemSpan);\n\t\tif (span > gridSize) {\n\t\t\taddRow({ item, overflow: true });\n\t\t\tspan = itemSpan;\n\t\t\taddItem(item);\n\t\t} else if (span === gridSize) {\n\t\t\trow.push(item);\n\t\t\taddRow({ item });\n\t\t} else {\n\t\t\trow.push(item);\n\t\t}\n\n\t\tif (isLastItem && row.length) {\n\t\t\tconst occupiedSpan = row.reduce(\n\t\t\t\t(total, { colSpan = DEFAULTS.ITEM_COLSPAN }) => total + colSpan,\n\t\t\t\t0\n\t\t\t);\n\t\t\tlet remainSpan = gridSize - occupiedSpan;\n\t\t\twhile (remainSpan > 0) {\n\t\t\t\tif (remainSpan <= (draggedWidgetAttrsColSpan || _parentItemSpan)) {\n\t\t\t\t\trow.push({\n\t\t\t\t\t\tid: 0,\n\t\t\t\t\t\tdummy: true,\n\t\t\t\t\t\tcolSpan: remainSpan,\n\t\t\t\t\t});\n\t\t\t\t} else {\n\t\t\t\t\trow.push({\n\t\t\t\t\t\tid: 0,\n\t\t\t\t\t\tdummy: true,\n\t\t\t\t\t\tcolSpan: Number(draggedWidgetAttrsColSpan || _parentItemSpan),\n\t\t\t\t\t});\n\t\t\t\t}\n\t\t\t\tremainSpan -= draggedWidgetAttrsColSpan || _parentItemSpan;\n\t\t\t}\n\t\t\tgrid.push(row);\n\t\t}\n\t}\n\n\tconst fullGrid = [];\n\tfor (let i = 0; i < grid.length; i++) {\n\t\tconst row = grid[i];\n\t\tconst draggable = ![TYPE.menubar, TYPE.toolbar].includes(row[0]?.type);\n\t\tconst upRow = [];\n\t\tconst midRow = [];\n\t\tconst addCell = ($row, options = { separator: true }) =>\n\t\t\t$row.push({\n\t\t\t\tid: 0,\n\t\t\t\tcolSpan: 1,\n\t\t\t\t...options,\n\t\t\t});\n\t\taddCell(upRow);\n\n\t\tdraggable &&\n\t\t\taddCell(midRow, {\n\t\t\t\trelatedColSpan: getColSpan(row[0], parentItemSpan),\n\t\t\t\tseparator: true,\n\t\t\t});\n\n\t\tfor (let j = 0; j < row.length; j++) {\n\t\t\tconst col = row[j];\n\t\t\tconst colSpan = getColSpan(col, parentItemSpan);\n\t\t\taddCell(midRow, col);\n\n\t\t\tdraggable &&\n\t\t\t\taddCell(midRow, { relatedColSpan: colSpan, separator: true });\n\t\t}\n\t\tif (row.length) {\n\t\t\tlet totalSpan = gridSize;\n\t\t\twhile (totalSpan > 0) {\n\t\t\t\taddCell(upRow, {\n\t\t\t\t\tdummy: true,\n\t\t\t\t\tcolSpan: Number(\n\t\t\t\t\t\ttotalSpan <= (draggedWidgetAttrsColSpan || _parentItemSpan)\n\t\t\t\t\t\t\t? totalSpan\n\t\t\t\t\t\t\t: draggedWidgetAttrsColSpan || _parentItemSpan\n\t\t\t\t\t),\n\t\t\t\t});\n\t\t\t\taddCell(upRow, {\n\t\t\t\t\trelatedColSpan: Number(_parentItemSpan),\n\t\t\t\t\tseparator: true,\n\t\t\t\t});\n\t\t\t\ttotalSpan -= draggedWidgetAttrsColSpan || _parentItemSpan;\n\t\t\t}\n\t\t}\n\n\t\tdraggable ? fullGrid.push(upRow) : fullGrid.push([]);\n\t\tfullGrid.push(midRow);\n\n\t\tif (i === grid.length - 1) {\n\t\t\tfullGrid.push(upRow);\n\t\t}\n\t}\n\treturn fullGrid;\n};\n\n// Grid Container embeds grid cell\nexport const GridContainer = ({ className, attrs, children, ...rest }) => (\n\t<div\n\t\tclassName={classNames(\n\t\t\tclassName,\n\t\t\tattrs.cols ? `grid-span grid-${attrs.cols}` : \"\"\n\t\t)}\n\t\t{...rest}\n\t>\n\t\t{children}\n\t</div>\n);\n\nexport function useGridWidget() {\n\tconst [WidgetComponent, setWidgetComponent] = React.useState(() => null);\n\n\tReact.useEffect(() => {\n\t\timport(\"./Widget\").then((module) =>\n\t\t\tsetWidgetComponent(() => module.default)\n\t\t);\n\t}, []);\n\n\treturn WidgetComponent;\n}\n\n/**\n * Grid Component handle layout of Container Components like panels\n */\nfunction Grid(props) {\n\tconst WidgetComponent = useGridWidget();\n\tconst {\n\t\tstate: { widgets: _widgets, customFieldWidgets, dragWidgetProps },\n\t} = useStore();\n\tconst draggedWidgetAttrsColSpan =\n\t\ttypeof dragWidgetProps?.id === \"symbol\" &&\n\t\t[\"one-to-many\", \"many-to-many\"].includes(dragWidgetProps?.attrs?.serverType)\n\t\t\t? undefined //Tempory fix for AOP issue\n\t\t\t: JSON.parse(dragWidgetProps?.attrs?.widgetAttrs || \"{}\").colSpan;\n\tconst { className, items, attrs = {}, panelId, design } = props;\n\tlet widgets = props._type === \"customField\" ? customFieldWidgets : _widgets;\n\tconst widgetAttrs = JSON.parse(attrs.widgetAttrs || \"{}\");\n\tconst gridSize = Number(attrs.cols || 1);\n\tconst columns = gridSize * 2 + 1;\n\tconst isStackLayout = attrs.layout === PANEL_TYPE.stack;\n\tconst spacers = columns === 1 ? 0 : columns / 2 + 1;\n\tconst spacerWidth = design ? 1 : 0;\n\tconst cols = (columns - 1) / 2;\n\tconst colWidth = (100 - spacers * spacerWidth) / cols;\n\tconst itemSpan = widgetAttrs?.itemSpan;\n\tconst rows = React.useMemo(() => {\n\t\tlet cellIndice = 0;\n\t\tconst childs = items.map((x) =>\n\t\t\tObject.assign({}, widgets[x] || {}, { id: x })\n\t\t);\n\t\treturn getFullGrid(\n\t\t\tchilds,\n\t\t\tgridSize,\n\t\t\tisStackLayout,\n\t\t\titemSpan,\n\t\t\tdraggedWidgetAttrsColSpan\n\t\t).map((columns, rowIndex) => {\n\t\t\tlet span = 0;\n\t\t\treturn columns.map((c) => {\n\t\t\t\tlet columnIndex = span;\n\t\t\t\tspan += c.separator ? 0 : Number(c.colSpan || 1);\n\t\t\t\treturn { ...c, rowIndex, columnIndex, cellIndice: cellIndice++ };\n\t\t\t});\n\t\t});\n\t}, [\n\t\titems,\n\t\twidgets,\n\t\tgridSize,\n\t\tisStackLayout,\n\t\titemSpan,\n\t\tdraggedWidgetAttrsColSpan,\n\t]);\n\n\tconst gridRows = rows.reduce((arr, row) => arr.concat(row), []);\n\treturn (\n\t\t<GridContainer {...{ attrs, className }}>\n\t\t\t<table cellPadding=\"0\" cellSpacing=\"0\">\n\t\t\t\t{design && (\n\t\t\t\t\t<colgroup>\n\t\t\t\t\t\t{isStackLayout ? (\n\t\t\t\t\t\t\t<col width={\"100%\"} />\n\t\t\t\t\t\t) : (\n\t\t\t\t\t\t\tnew Array(columns)\n\t\t\t\t\t\t\t\t.fill(0)\n\t\t\t\t\t\t\t\t.map((col, i) => (\n\t\t\t\t\t\t\t\t\t<col\n\t\t\t\t\t\t\t\t\t\tkey={i}\n\t\t\t\t\t\t\t\t\t\twidth={`${i % 2 === 1 ? colWidth : spacerWidth}%`}\n\t\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t))\n\t\t\t\t\t\t)}\n\t\t\t\t\t</colgroup>\n\t\t\t\t)}\n\t\t\t\t<tbody>\n\t\t\t\t\t{rows.map((cols, rowIndex) => (\n\t\t\t\t\t\t<tr\n\t\t\t\t\t\t\tclassName={rowIndex % 2 === 0 ? \"empty-row\" : \"fill-row\"}\n\t\t\t\t\t\t\tkey={rowIndex}\n\t\t\t\t\t\t>\n\t\t\t\t\t\t\t{cols.map(\n\t\t\t\t\t\t\t\t(\n\t\t\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t\t\tid,\n\t\t\t\t\t\t\t\t\t\tcolSpan,\n\t\t\t\t\t\t\t\t\t\tcellIndice: indice,\n\t\t\t\t\t\t\t\t\t\tcolumnIndex,\n\t\t\t\t\t\t\t\t\t\tseparator,\n\t\t\t\t\t\t\t\t\t\trelatedColSpan,\n\t\t\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t\t\ti\n\t\t\t\t\t\t\t\t) => {\n\t\t\t\t\t\t\t\t\treturn (\n\t\t\t\t\t\t\t\t\t\t<td\n\t\t\t\t\t\t\t\t\t\t\tclassName={separator ? \"separator\" : \"\"}\n\t\t\t\t\t\t\t\t\t\t\tkey={id ? id : \"\" + id + indice}\n\t\t\t\t\t\t\t\t\t\t\tcolSpan={colSpan > 1 ? colSpan * 2 - 1 : colSpan}\n\t\t\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t\t\t{WidgetComponent && (\n\t\t\t\t\t\t\t\t\t\t\t\t<WidgetComponent\n\t\t\t\t\t\t\t\t\t\t\t\t\tdesign={design}\n\t\t\t\t\t\t\t\t\t\t\t\t\tmeta={{\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tisSeparator: Boolean(separator),\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tcolSpan,\n\t\t\t\t\t\t\t\t\t\t\t\t\t\trow: rowIndex,\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tcol: i,\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tcolIndex: columnIndex,\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tgrid: gridRows,\n\t\t\t\t\t\t\t\t\t\t\t\t\t\ttotal: columns,\n\t\t\t\t\t\t\t\t\t\t\t\t\t\trelatedColSpan: relatedColSpan,\n\t\t\t\t\t\t\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t\t\t\t\t\t\t\tpanelId={panelId}\n\t\t\t\t\t\t\t\t\t\t\t\t\tkey={id ? id : \"\" + id + indice}\n\t\t\t\t\t\t\t\t\t\t\t\t\tid={id}\n\t\t\t\t\t\t\t\t\t\t\t\t\tindex={indice}\n\t\t\t\t\t\t\t\t\t\t\t\t\tpanelColumns={attrs.cols}\n\t\t\t\t\t\t\t\t\t\t\t\t\t_type={props._type}\n\t\t\t\t\t\t\t\t\t\t\t\t\terrorList={props.errorList}\n\t\t\t\t\t\t\t\t\t\t\t\t\tcanRemove={props.canRemove}\n\t\t\t\t\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t\t\t\t)}\n\t\t\t\t\t\t\t\t\t\t</td>\n\t\t\t\t\t\t\t\t\t);\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t)}\n\t\t\t\t\t\t</tr>\n\t\t\t\t\t))}\n\t\t\t\t</tbody>\n\t\t\t</table>\n\t\t</GridContainer>\n\t);\n}\n\nexport default Grid;\n","import React from \"react\";\nimport classNames from \"classnames\";\nimport Grid from \"./Grid\";\nimport { TYPE } from \"../constants\";\nimport { translate } from \"../utils\";\n\n/**\n * Panel Component\n * Used As Container to group Field Component like form group\n */\nfunction PanelComponent({ id, attrs, design, isTab = false, ...rest }) {\n\tconst errors = rest.errorList[id] || {};\n\treturn (\n\t\t<React.Fragment>\n\t\t\t{(attrs.title ||\n\t\t\t\t[TYPE.toolbar, TYPE.menubar].includes(attrs.serverType)) && (\n\t\t\t\t<div\n\t\t\t\t\tclassName={classNames(\"panel-header\", {\n\t\t\t\t\t\tinline: isTab,\n\t\t\t\t\t})}\n\t\t\t\t>\n\t\t\t\t\t{translate(attrs.title || attrs.autoTitle)}\n\t\t\t\t\t{attrs.serverType === TYPE.toolbar && (\n\t\t\t\t\t\t<i className=\"fa fa-wrench\" title=\"toolbar\" />\n\t\t\t\t\t)}\n\t\t\t\t\t{attrs.serverType === TYPE.menubar && (\n\t\t\t\t\t\t<i className=\"fa fa-bars\" title=\"menubar\" />\n\t\t\t\t\t)}\n\t\t\t\t</div>\n\t\t\t)}\n\t\t\t{errors.items && !isTab && (\n\t\t\t\t<div className={classNames(\"panel-children-error\")}>{errors.items}</div>\n\t\t\t)}\n\t\t\t{!isTab && (\n\t\t\t\t<Grid\n\t\t\t\t\tdesign={design}\n\t\t\t\t\tclassName=\"panel-body\"\n\t\t\t\t\titems={attrs.items || []}\n\t\t\t\t\tattrs={attrs}\n\t\t\t\t\tpanelId={id}\n\t\t\t\t\t_type={rest._type}\n\t\t\t\t\terrorList={rest.errorList}\n\t\t\t\t\tcanRemove={rest.canRemove}\n\t\t\t\t/>\n\t\t\t)}\n\t\t</React.Fragment>\n\t);\n}\n\nexport default React.memo(PanelComponent);\n","import { getExtendJson2, getWidgetObject } from \"./extensionGenerator\";\nimport { MODEL_TYPE } from \"./../constants\";\nimport Utils from \"./../utils\";\n\nfunction setAttributeOnNewWidget(items, widget, widgetId, state) {\n\tconst widgets = state.widgets;\n\tlet inserted = false;\n\tconst getWidgetName = () => widgets[widgetId] && widgets[widgetId].name;\n\tfor (let i = 0; i < items.length; i++) {\n\t\tconst item = items[i];\n\t\tif (item.name === getWidgetName()) {\n\t\t\titem[widget.attributes.name] = widget.attributes.value;\n\t\t\tinserted = true;\n\t\t}\n\t\tif (inserted) {\n\t\t\tbreak;\n\t\t}\n\t\tif (item.items && item.items.length) {\n\t\t\tconst _inserted = setAttributeOnNewWidget(\n\t\t\t\titem.items,\n\t\t\t\twidget,\n\t\t\t\twidgetId,\n\t\t\t\tstate\n\t\t\t);\n\t\t\tif (_inserted) {\n\t\t\t\tinserted = _inserted;\n\t\t\t\tbreak;\n\t\t\t}\n\t\t}\n\t}\n\treturn inserted;\n}\n\nexport function generateExtension(list, state) {\n\tconst cleatVirtualAction = () => {\n\t\tconst exemptedAttributes = [\n\t\t\t\"widgetAttrs\",\n\t\t\t\"items\",\n\t\t\t\"current\",\n\t\t\t\"elements\",\n\t\t\t\"tz\",\n\t\t\t\"targetModel\",\n\t\t\t\"_type\",\n\t\t];\n\t\t[...list].forEach((item, i) => {\n\t\t\tif (item.name === \"insert\") {\n\t\t\t\tconst id = item.id;\n\t\t\t\tconst removeIndex = list.findIndex(\n\t\t\t\t\t(item) => item.name === \"replace\" && item.id === id && !item.target\n\t\t\t\t);\n\t\t\t\tconst insertIndex = list.findIndex(\n\t\t\t\t\t(item) => item.id === id && item.name === \"insert\"\n\t\t\t\t);\n\t\t\t\tif (removeIndex !== -1) {\n\t\t\t\t\tlist.splice(removeIndex, 1);\n\t\t\t\t\tlist.splice(insertIndex, 1);\n\t\t\t\t}\n\t\t\t}\n\t\t\tif (item.name === \"attribute\") {\n\t\t\t\tconst id = item.id;\n\t\t\t\t// set blank values for default value\n\t\t\t\tif (\n\t\t\t\t\titem.attributes &&\n\t\t\t\t\tUtils.isDefaultValue(item.attributes.name, item.attributes.value)\n\t\t\t\t) {\n\t\t\t\t\tconst attrIndex = list.findIndex(\n\t\t\t\t\t\t(e) =>\n\t\t\t\t\t\t\te.id === id &&\n\t\t\t\t\t\t\te.name === \"attribute\" &&\n\t\t\t\t\t\t\te.attributes.name === item.attributes.name\n\t\t\t\t\t);\n\t\t\t\t\tlist.splice(attrIndex, 1, {\n\t\t\t\t\t\t...list[attrIndex],\n\t\t\t\t\t\tattributes: {\n\t\t\t\t\t\t\t...list[attrIndex].attributes,\n\t\t\t\t\t\t\tvalue: item.attributes.value,\n\t\t\t\t\t\t},\n\t\t\t\t\t});\n\t\t\t\t}\n\t\t\t\tif (\n\t\t\t\t\titem.attributes &&\n\t\t\t\t\texemptedAttributes.includes(item.attributes.name)\n\t\t\t\t) {\n\t\t\t\t\tconst attrIndex = list.findIndex(\n\t\t\t\t\t\t(item) =>\n\t\t\t\t\t\t\titem.id === id &&\n\t\t\t\t\t\t\titem.name === \"attribute\" &&\n\t\t\t\t\t\t\texemptedAttributes.includes(item.attributes.name)\n\t\t\t\t\t);\n\t\t\t\t\tlist.splice(attrIndex, 1);\n\t\t\t\t} else {\n\t\t\t\t\tlet processed = false;\n\t\t\t\t\tconst getWidgetName = () =>\n\t\t\t\t\t\tstate.widgets[id] && state.widgets[id].name;\n\t\t\t\t\tfor (let k = 0; k < state.extensionMoves.length; k++) {\n\t\t\t\t\t\tconst move = state.extensionMoves[k];\n\t\t\t\t\t\tif (move.name === \"insert\") {\n\t\t\t\t\t\t\tconst { elements } = move;\n\t\t\t\t\t\t\tfor (let j = 0; j < elements.length; j++) {\n\t\t\t\t\t\t\t\tconst element = elements[j];\n\t\t\t\t\t\t\t\tif (element.name === getWidgetName()) {\n\t\t\t\t\t\t\t\t\tstate.extensionMoves[k].elements[j][item.attributes.name] =\n\t\t\t\t\t\t\t\t\t\titem.attributes.value;\n\t\t\t\t\t\t\t\t\tprocessed = true;\n\t\t\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\tif (element.items && element.items.length) {\n\t\t\t\t\t\t\t\t\tlet inserted = setAttributeOnNewWidget(\n\t\t\t\t\t\t\t\t\t\telement.items,\n\t\t\t\t\t\t\t\t\t\titem,\n\t\t\t\t\t\t\t\t\t\tid,\n\t\t\t\t\t\t\t\t\t\tstate\n\t\t\t\t\t\t\t\t\t);\n\t\t\t\t\t\t\t\t\tif (inserted) {\n\t\t\t\t\t\t\t\t\t\tprocessed = true;\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t\tif (processed) {\n\t\t\t\t\t\t\tconst attrIndex = list.findIndex(\n\t\t\t\t\t\t\t\t(item) => item.id === id && item.name === \"attribute\"\n\t\t\t\t\t\t\t);\n\t\t\t\t\t\t\tlist.splice(attrIndex, 1);\n\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t});\n\t};\n\tcleatVirtualAction();\n\tstate.extensionMoves.push(...list);\n}\n\nconst generateNestedView = (items) => {\n\tconst _items = items.map((item) => {\n\t\tlet _subItems = [];\n\t\tif (item.items) {\n\t\t\t_subItems = generateNestedView(item.items);\n\t\t}\n\t\treturn getWidgetObject(\n\t\t\t{ ...item, elements: _subItems },\n\t\t\t[],\n\t\t\tnull,\n\t\t\tMODEL_TYPE.BASE\n\t\t);\n\t});\n\n\treturn _items;\n};\n\nexport function getXML(extensionMoves, state) {\n\tconst patches = extensionMoves\n\t\t.map((move) => {\n\t\t\tlet fields;\n\t\t\tif (move.name === \"insert\") {\n\t\t\t\tfields = move.elements\n\t\t\t\t\t.map((field) => {\n\t\t\t\t\t\tif (field && field.items && field.items.length) {\n\t\t\t\t\t\t\tconst f = { ...field };\n\t\t\t\t\t\t\tf.elements = generateNestedView(field.items);\n\t\t\t\t\t\t\treturn f;\n\t\t\t\t\t\t}\n\t\t\t\t\t\treturn field;\n\t\t\t\t\t})\n\t\t\t\t\t.filter((e) => e);\n\t\t\t}\n\t\t\tif (!move.target) {\n\t\t\t\treturn undefined;\n\t\t\t}\n\t\t\treturn getExtendJson2({\n\t\t\t\ttarget: move.target,\n\t\t\t\tposition: move.position,\n\t\t\t\tsource: move.source,\n\t\t\t\ttype: move.name,\n\t\t\t\twidgetAttrs: fields,\n\t\t\t\t...move.attributes,\n\t\t\t});\n\t\t})\n\t\t.filter((e) => e);\n\treturn patches;\n}\n\nfunction insertOnNewPanel(items, widget, panelId, state) {\n\tconst widgets = state.widgets;\n\tlet inserted = false;\n\tconst getPanelName = () => widgets[panelId].name;\n\tfor (let i = 0; i < items.length; i++) {\n\t\tconst item = items[i];\n\t\tif (item.name === getPanelName()) {\n\t\t\tif (item.items) {\n\t\t\t\titem.items.push(widget);\n\t\t\t} else {\n\t\t\t\titem.items = [widget];\n\t\t\t}\n\t\t\tinserted = true;\n\t\t}\n\t\tif (inserted) {\n\t\t\tbreak;\n\t\t}\n\t\tif (item.items && item.items.length) {\n\t\t\tconst _inserted = insertOnNewPanel(item.items, widget, panelId, state);\n\t\t\tif (_inserted) {\n\t\t\t\tinserted = _inserted;\n\t\t\t\tbreak;\n\t\t\t}\n\t\t}\n\t}\n\treturn inserted;\n}\n\nexport function processMoves(state, widget, id, panelId) {\n\tconst list = [];\n\tlet processed = false;\n\tconst widgets = state.widgets;\n\tconst getPanelName = () => widgets[panelId].name;\n\tfor (let i = 0; i < state.extensionMoves.length; i++) {\n\t\tconst move = state.extensionMoves[i];\n\t\tif (move.name === \"insert\") {\n\t\t\tconst { elements } = move;\n\t\t\tfor (let j = 0; j < elements.length; j++) {\n\t\t\t\tconst element = elements[j];\n\t\t\t\tif (\n\t\t\t\t\telement.name === getPanelName() &&\n\t\t\t\t\telement.items &&\n\t\t\t\t\telement.items.length === 0\n\t\t\t\t) {\n\t\t\t\t\tstate.extensionMoves[i].elements[j].items.push(widget);\n\t\t\t\t\tprocessed = true;\n\t\t\t\t\tbreak;\n\t\t\t\t}\n\t\t\t\tif (element.items && element.items.length) {\n\t\t\t\t\tlet inserted = insertOnNewPanel(\n\t\t\t\t\t\telement.items,\n\t\t\t\t\t\twidget,\n\t\t\t\t\t\tpanelId,\n\t\t\t\t\t\tstate\n\t\t\t\t\t);\n\t\t\t\t\tif (inserted) {\n\t\t\t\t\t\tprocessed = true;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t\tif (processed) {\n\t\t\tbreak;\n\t\t}\n\t}\n\tif (processed) {\n\t\tif (widget.xPath) {\n\t\t\tlist.push({ name: \"replace\", target: widget.xPath });\n\t\t}\n\t}\n\treturn list;\n}\n","import properties from \"./../Properties/list\";\nimport { MODEL_TYPE, TYPE } from \"./../constants\";\nimport { translate } from \"../utils\";\n\nexport function validate(field, modelType, isCustomField = false) {\n\tconst errors = {};\n\tlet selectedType =\n\t\tfield.serverType === \"field\" ? field.type : field.serverType || field.type;\n\tselectedType = selectedType && selectedType.toLowerCase().replace(/_/g, \"-\");\n\tlet property = properties.find((option) => option.type === selectedType);\n\tif (selectedType === \"form\") {\n\t\tif (modelType === MODEL_TYPE.CUSTOM) {\n\t\t\tproperty = properties.find((option) => option.type === \"modelForm\");\n\t\t}\n\t}\n\tif (\n\t\t!isCustomField &&\n\t\tmodelType === MODEL_TYPE.BASE &&\n\t\t[\n\t\t\tTYPE.panel,\n\t\t\tTYPE.panelStack,\n\t\t\tTYPE.tabs,\n\t\t\tTYPE.menu,\n\t\t\tTYPE.menubar,\n\t\t\tTYPE.toolbar,\n\t\t].includes(selectedType)\n\t) {\n\t\tif (field.items && field.items.length === 0) {\n\t\t\tconst message =\n\t\t\t\tselectedType === TYPE.menu\n\t\t\t\t\t? translate(\"Atleast one menu item required\")\n\t\t\t\t\t: translate(\"Atleast one children required\");\n\t\t\terrors[\"items\"] = message;\n\t\t}\n\t}\n\tif (!property) {\n\t\treturn errors;\n\t}\n\tconst propertyList = Object.keys(property.value).reduce((lst = [], key) => {\n\t\treturn [...lst, ...property.value[key]];\n\t}, []);\n\tpropertyList.forEach((property) => {\n\t\tconst addErrorMessage = () => {\n\t\t\terrors[property.name] = `${translate(\n\t\t\t\tproperty.title || property.name\n\t\t\t)} ${translate(\"required\")}`;\n\t\t};\n\t\tif (\n\t\t\t(property.requiredFor &&\n\t\t\t\tproperty.requiredFor.includes(selectedType) &&\n\t\t\t\t!field[property.name]) ||\n\t\t\t(property.required && !field[property.name])\n\t\t) {\n\t\t\taddErrorMessage();\n\t\t}\n\t\tif (\n\t\t\tproperty.requiredWhen &&\n\t\t\t(property.requiredNegation\n\t\t\t\t? !field[property.requiredWhen]\n\t\t\t\t: field[property.requiredWhen]) &&\n\t\t\t!field[property.name]\n\t\t) {\n\t\t\tif (field.isSelectionField) {\n\t\t\t\taddErrorMessage();\n\t\t\t} else if ([\"menuBuilderTitle\"].includes(property.name)) {\n\t\t\t\taddErrorMessage();\n\t\t\t} else if (\n\t\t\t\t[\"selectionText\"].includes(property.name) &&\n\t\t\t\tfield.updateSelection\n\t\t\t) {\n\t\t\t\taddErrorMessage();\n\t\t\t}\n\t\t}\n\t\tif (property.regex) {\n\t\t\tconst re = new RegExp(property.regex);\n\t\t\tif (!re.test(field[property.name]) && !errors[property.name]) {\n\t\t\t\terrors[property.name] = translate(property.regexErrorMessage);\n\t\t\t}\n\t\t}\n\t});\n\treturn errors;\n}\n\nexport function validateParentPanelItems(state, panelId) {\n\tconst panel = state.widgets[panelId];\n\tconst errors = state.errorList[panelId] || {};\n\tif (panel) {\n\t\tif (panel.items && panel.items.length > 0) {\n\t\t\tif (errors.items) {\n\t\t\t\tdelete errors.items;\n\t\t\t}\n\t\t} else {\n\t\t\terrors.items = translate(\"Atleast one children required\");\n\t\t}\n\t\tif (Object.keys(errors).length) {\n\t\t\tstate.errorList[panelId] = errors;\n\t\t} else {\n\t\t\tdelete state.errorList[panelId];\n\t\t}\n\t}\n}\n\nexport function validateOnRemove(state, id) {\n\tconst errors = state.errorList[id];\n\tif (errors) {\n\t\tdelete state.errorList[id];\n\t}\n}\n","import fontAwesomeList from \"./fa-icons\";\nimport {\n\tName,\n\tType,\n\tTitle,\n\tDefaultValue,\n\tStudioApp,\n\tHelp,\n\tSequence,\n\tRoles,\n\tValueExpression,\n\tSelection,\n\tWidget,\n\tOnChange,\n\tMin,\n\tMax,\n\tJsonRelationalField,\n\tDomain,\n\tTargetJsonModel,\n\tTargetModel,\n\tGridView,\n\tFormView,\n\tRequired,\n\tColumnSequence,\n\tReadOnly,\n\tHidden,\n\tVisibleInGrid,\n\tShowIf,\n\tHideIf,\n\tIf,\n\tRequiredIf,\n\tReadOnlyIf,\n\tIncludeIf,\n\tValidIf,\n\tColSpan,\n\tShowTitle,\n\tOnNew,\n\tEditable,\n\tDummyType,\n\tCanSearch,\n\tAction,\n\tIfModule,\n\tOnlyIf,\n\tHeight,\n\tField,\n\tCanMove,\n\tOrderBy,\n\tIncludeFrom,\n\tIncludeView,\n\tIsGenerateMenu,\n\tMenuBuilderParent,\n\tMenuBuilderTitle,\n\tModel,\n\tStrong,\n\tColor,\n\tBackground,\n\tItemSpan,\n\tCss,\n\tPrompt,\n\tSelectionIn,\n\tValueAdd,\n\tValueDel,\n\tActive,\n\tRefresh,\n\tValue,\n\tSidebar,\n} from \"./propertyFields\";\nimport {\n\tStringField,\n\tIntegerField,\n\tStaticSelectField,\n\tSelectField,\n\tBooleanField,\n} from \"./fieldTypes\";\nimport { MODEL_TYPE } from \"./../constants\";\n\n/** Options */\nconst stringOption = {\n\toverview: [\n\t\tName({ existsCheck: true }),\n\t\tType,\n\t\tTitle,\n\t\tDefaultValue,\n\t\tStudioApp,\n\t\tHelp,\n\t\tSequence,\n\t],\n\tfieldOptions: [\n\t\tSelection,\n\t\tSelectionIn,\n\t\tWidget,\n\t\tOnChange,\n\t\tMin,\n\t\tMax,\n\t\tStringField({ name: \"regex\", dependModelType: MODEL_TYPE.CUSTOM }),\n\t\tValue,\n\t],\n\tuiOptions: [\n\t\tRequired,\n\t\tReadOnly,\n\t\tBooleanField({\n\t\t\tname: \"nameField\",\n\t\t\ttitle: \"Name column\",\n\t\t\tdependModelType: MODEL_TYPE.CUSTOM,\n\t\t}),\n\t\tHidden,\n\t\tVisibleInGrid,\n\t\tColumnSequence,\n\t\tCss,\n\t],\n\tconditions: [\n\t\tOnlyIf,\n\t\tShowIf,\n\t\tHideIf,\n\t\tRequiredIf,\n\t\tReadOnlyIf,\n\t\tIncludeIf,\n\t\tValidIf,\n\t],\n\tvalueExpr: [ValueExpression],\n\troles: [Roles],\n\twidgetAttributes: [\n\t\tColSpan,\n\t\tShowTitle,\n\t\tBooleanField({\n\t\t\tname: \"multiline\",\n\t\t\tparentField: \"widgetAttrs\",\n\t\t\tmodelType: MODEL_TYPE.CUSTOM,\n\t\t\tdependModelType: MODEL_TYPE.CUSTOM,\n\t\t}),\n\t],\n};\n\nconst integerOption = {\n\toverview: [\n\t\tName({ existsCheck: true }),\n\t\tType,\n\t\tTitle,\n\t\tDefaultValue,\n\t\tStudioApp,\n\t\tHelp,\n\t\tSequence,\n\t],\n\tfieldOptions: [Selection, SelectionIn, Widget, OnChange, Min, Max, Value],\n\tuiOptions: [Required, ReadOnly, Hidden, VisibleInGrid, ColumnSequence, Css],\n\tconditions: [\n\t\tOnlyIf,\n\t\tShowIf,\n\t\tHideIf,\n\t\tRequiredIf,\n\t\tReadOnlyIf,\n\t\tIncludeIf,\n\t\tValidIf,\n\t],\n\tvalueExpr: [ValueExpression],\n\troles: [Roles],\n\twidgetAttributes: [ColSpan, ShowTitle],\n};\n\nconst decimalOption = {\n\toverview: [\n\t\tName({ existsCheck: true }),\n\t\tType,\n\t\tTitle,\n\t\tDefaultValue,\n\t\tStudioApp,\n\t\tHelp,\n\t\tSequence,\n\t],\n\tfieldOptions: [\n\t\tWidget,\n\t\tOnChange,\n\t\tMin,\n\t\tMax,\n\t\tIntegerField({\n\t\t\tname: \"precision\",\n\t\t\tdefault: 6,\n\t\t}),\n\t\tIntegerField({\n\t\t\tname: \"scale\",\n\t\t\tdefault: 2,\n\t\t}),\n\t\tValue,\n\t],\n\tuiOptions: [Required, ReadOnly, Hidden, VisibleInGrid, ColumnSequence, Css],\n\tconditions: [\n\t\tOnlyIf,\n\t\tShowIf,\n\t\tHideIf,\n\t\tRequiredIf,\n\t\tReadOnlyIf,\n\t\tIncludeIf,\n\t\tValidIf,\n\t],\n\tvalueExpr: [ValueExpression],\n\troles: [Roles],\n\twidgetAttributes: [ColSpan, ShowTitle],\n};\n\nconst booleanOption = {\n\toverview: [\n\t\tName({ existsCheck: true }),\n\t\tType,\n\t\tTitle,\n\t\tDefaultValue,\n\t\tStudioApp,\n\t\tHelp,\n\t\tSequence,\n\t],\n\tfieldOptions: [Widget, OnChange, Value],\n\tuiOptions: [Required, ReadOnly, Hidden, VisibleInGrid, ColumnSequence, Css],\n\tconditions: [\n\t\tOnlyIf,\n\t\tShowIf,\n\t\tHideIf,\n\t\tRequiredIf,\n\t\tReadOnlyIf,\n\t\tIncludeIf,\n\t\tValidIf,\n\t],\n\tvalueExpr: [ValueExpression],\n\troles: [Roles],\n\twidgetAttributes: [ColSpan, ShowTitle],\n};\n\nconst datetimeOption = {\n\toverview: [\n\t\tName({ existsCheck: true }),\n\t\tType,\n\t\tTitle,\n\t\tDefaultValue,\n\t\tStudioApp,\n\t\tHelp,\n\t\tSequence,\n\t],\n\tfieldOptions: [Widget, OnChange, Value],\n\tuiOptions: [Required, ReadOnly, Hidden, VisibleInGrid, ColumnSequence, Css],\n\tconditions: [\n\t\tOnlyIf,\n\t\tShowIf,\n\t\tHideIf,\n\t\tRequiredIf,\n\t\tReadOnlyIf,\n\t\tIncludeIf,\n\t\tValidIf,\n\t],\n\tvalueExpr: [ValueExpression],\n\troles: [Roles],\n\twidgetAttributes: [ColSpan, ShowTitle],\n};\n\nconst panelOption = {\n\toverview: [Name({ existsCheck: true }), Type, Title, StudioApp],\n\tuiOptions: [\n\t\tReadOnly,\n\t\tHidden,\n\t\tSidebar,\n\t\tBooleanField({\n\t\t\tname: \"canCollapse\",\n\t\t\tparentField: \"widgetAttrs\",\n\t\t\tmodelType: MODEL_TYPE.CUSTOM,\n\t\t\tdependModelType: MODEL_TYPE.CUSTOM,\n\t\t}),\n\t\tStringField({\n\t\t\tname: \"collapseIf\",\n\t\t\tparentField: \"widgetAttrs\",\n\t\t\tmodelType: MODEL_TYPE.CUSTOM,\n\t\t\tdependModelType: MODEL_TYPE.CUSTOM,\n\t\t}),\n\t\tColumnSequence,\n\t\tCss,\n\t\tActive,\n\t],\n\tconditions: [OnlyIf, ShowIf, HideIf, ReadOnlyIf],\n\troles: [Roles],\n\twidgetAttributes: [ColSpan, ItemSpan, ShowTitle],\n};\n\nconst panelStackOption = {\n\toverview: [Name({ existsCheck: true }), Type, StudioApp],\n\tuiOptions: [\n\t\tReadOnly,\n\t\tHidden,\n\t\tSidebar,\n\t\tBooleanField({\n\t\t\tname: \"canCollapse\",\n\t\t\tparentField: \"widgetAttrs\",\n\t\t\tmodelType: MODEL_TYPE.CUSTOM,\n\t\t\tdependModelType: MODEL_TYPE.CUSTOM,\n\t\t}),\n\t\tStringField({\n\t\t\tname: \"collapseIf\",\n\t\t\tparentField: \"widgetAttrs\",\n\t\t\tmodelType: MODEL_TYPE.CUSTOM,\n\t\t\tdependModelType: MODEL_TYPE.CUSTOM,\n\t\t}),\n\t\tColumnSequence,\n\t\tCss,\n\t],\n\tconditions: [ShowIf, HideIf, ReadOnlyIf],\n\troles: [Roles],\n\twidgetAttributes: [ColSpan],\n};\n\nconst panelTabOption = {\n\toverview: [Name({ existsCheck: true }), Type, Title, StudioApp],\n\tuiOptions: [ReadOnly, Hidden, ColumnSequence, Css],\n\tconditions: [ShowIf, HideIf, ReadOnlyIf],\n\troles: [Roles],\n\twidgetAttributes: [ShowTitle],\n};\n\nconst buttonOption = {\n\toverview: [\n\t\tName({ existsCheck: true }),\n\t\tType,\n\t\tTitle,\n\t\tStudioApp,\n\t\tHelp,\n\t\tSequence,\n\t\tPrompt,\n\t],\n\tfieldOptions: [\n\t\tWidget,\n\t\tSelectField({\n\t\t\tname: \"onClick\",\n\t\t\ttitle: \"On click\",\n\t\t\trequired: true,\n\t\t\tref: \"com.axelor.meta.db.MetaAction\",\n\t\t\trequiredFor: [\"button\"],\n\t\t\tdependModelType: MODEL_TYPE.CUSTOM,\n\t\t\tmultiple: true,\n\t\t\tcommaSeparated: true,\n\t\t\tcanAddNew: true,\n\t\t}),\n\t],\n\tuiOptions: [ReadOnly, Hidden, VisibleInGrid, ColumnSequence, Css],\n\tconditions: [\n\t\tOnlyIf,\n\t\tShowIf,\n\t\tHideIf,\n\t\tRequiredIf,\n\t\tReadOnlyIf,\n\t\tIncludeIf,\n\t\tValidIf,\n\t],\n\troles: [Roles],\n\twidgetAttributes: [\n\t\tColSpan,\n\t\tShowTitle,\n\t\tStaticSelectField({\n\t\t\tname: \"icon\",\n\t\t\ttitle: \"Icon\",\n\t\t\tdata: fontAwesomeList,\n\t\t\thelper: \"https://fontawesome.com/cheatsheet\",\n\t\t\tparentField: \"widgetAttrs\",\n\t\t\tmodelType: MODEL_TYPE.CUSTOM,\n\t\t}),\n\t],\n};\n\nconst seperatorOption = {\n\toverview: [\n\t\tName({ existsCheck: true }),\n\t\tType,\n\t\tTitle,\n\t\tDefaultValue,\n\t\tStudioApp,\n\t\tHelp,\n\t\tSequence,\n\t],\n\tuiOptions: [Hidden, ColumnSequence, Css],\n\tconditions: [\n\t\tOnlyIf,\n\t\tShowIf,\n\t\tHideIf,\n\t\tRequiredIf,\n\t\tReadOnlyIf,\n\t\tIncludeIf,\n\t\tValidIf,\n\t],\n\troles: [Roles],\n\twidgetAttributes: [ColSpan],\n};\n\nconst spacerOption = {\n\toverview: [Name({ existsCheck: true }), Type, StudioApp],\n\tfieldOptions: [],\n\tuiOptions: [Hidden, ColumnSequence, Css],\n\tconditions: [OnlyIf, ShowIf, HideIf, ValidIf],\n\troles: [Roles],\n\twidgetAttributes: [ColSpan],\n};\n\nconst labelOption = {\n\toverview: [Name({ existsCheck: true }), Type, Title, StudioApp],\n\tfieldOptions: [Widget],\n\tuiOptions: [Required, Hidden, ColumnSequence, Css],\n\tconditions: [OnlyIf, ShowIf, HideIf, RequiredIf, ReadOnlyIf, ValidIf],\n\tvalueExpr: [ValueExpression],\n\troles: [Roles],\n\twidgetAttributes: [ColSpan, ShowTitle],\n};\n\nconst viewerOption = {\n\toverview: [Name({ existsCheck: true }), Type, Title, StudioApp],\n\tfieldOptions: [Widget],\n\tuiOptions: [Required, Hidden, ReadOnly, ColumnSequence, Css],\n\tconditions: [ShowIf, HideIf, RequiredIf, ReadOnlyIf, ValidIf],\n\tvalueExpr: [ValueExpression],\n\troles: [Roles],\n\twidgetAttributes: [ColSpan, ShowTitle],\n};\n\nconst manyToOneOption = {\n\toverview: [\n\t\tName({ existsCheck: true }),\n\t\tType,\n\t\tTitle,\n\t\tDefaultValue,\n\t\tStudioApp,\n\t\tHelp,\n\t\tSequence,\n\t],\n\tfieldOptions: [\n\t\tWidget,\n\t\tOnChange,\n\t\tJsonRelationalField,\n\t\tDomain,\n\t\tTargetModel,\n\t\tGridView,\n\t\tFormView,\n\t\tValue,\n\t],\n\tuiOptions: [Required, ReadOnly, Hidden, VisibleInGrid, ColumnSequence, Css],\n\tconditions: [\n\t\tOnlyIf,\n\t\tShowIf,\n\t\tHideIf,\n\t\tRequiredIf,\n\t\tReadOnlyIf,\n\t\tIncludeIf,\n\t\tValidIf,\n\t],\n\tvalueExpr: [ValueExpression],\n\troles: [Roles],\n\twidgetAttributes: [ColSpan, ShowTitle],\n};\n\nconst manyToManyAndOneToManyOption = {\n\toverview: [\n\t\tName({ existsCheck: true }),\n\t\tType,\n\t\tTitle,\n\t\tStudioApp,\n\t\tHelp,\n\t\tSequence,\n\t],\n\tfieldOptions: [\n\t\tWidget,\n\t\tOnChange,\n\t\tJsonRelationalField,\n\t\tDomain,\n\t\tTargetModel,\n\t\tGridView,\n\t\tFormView,\n\t\tValueAdd,\n\t\tValueDel,\n\t\tValue,\n\t],\n\tuiOptions: [Required, ReadOnly, Hidden, VisibleInGrid, ColumnSequence, Css],\n\tconditions: [\n\t\tOnlyIf,\n\t\tShowIf,\n\t\tHideIf,\n\t\tRequiredIf,\n\t\tReadOnlyIf,\n\t\tIncludeIf,\n\t\tValidIf,\n\t],\n\tvalueExpr: [ValueExpression],\n\troles: [Roles],\n\twidgetAttributes: [ColSpan, ShowTitle],\n};\n\nconst customRelationOption = {\n\toverview: [\n\t\tName({ existsCheck: true }),\n\t\tType,\n\t\tTitle,\n\t\tStudioApp,\n\t\tHelp,\n\t\tSequence,\n\t],\n\tfieldOptions: [\n\t\tWidget,\n\t\tOnChange,\n\t\tJsonRelationalField,\n\t\tDomain,\n\t\tTargetJsonModel,\n\t\tValue,\n\t],\n\tuiOptions: [Required, ReadOnly, Hidden, VisibleInGrid, ColumnSequence, Css],\n\tconditions: [\n\t\tOnlyIf,\n\t\tShowIf,\n\t\tHideIf,\n\t\tRequiredIf,\n\t\tReadOnlyIf,\n\t\tIncludeIf,\n\t\tValidIf,\n\t],\n\tvalueExpr: [ValueExpression],\n\troles: [Roles],\n\twidgetAttributes: [ColSpan, ShowTitle],\n};\n\nconst formOption = {\n\toverview: [\n\t\tName({ existsCheck: true }),\n\t\t{ ...Title, required: true },\n\t\tStudioApp,\n\t\tStaticSelectField({\n\t\t\tname: \"formWidth\",\n\t\t\ttitle: \"Form width\",\n\t\t\tdata: [\"large\"],\n\t\t}),\n\t\tStringField({\n\t\t\tname: \"orderBy\",\n\t\t\ttitle: \"Order by\",\n\t\t}),\n\t\tIsGenerateMenu,\n\t\tMenuBuilderParent,\n\t\tMenuBuilderTitle,\n\t],\n\tactions: [\n\t\tSelectField({\n\t\t\ttitle: \"On new\",\n\t\t\tname: \"onNew\",\n\t\t\tref: \"com.axelor.meta.db.MetaAction\",\n\t\t\tdependModelType: MODEL_TYPE.CUSTOM,\n\t\t\tmultiple: true,\n\t\t\tcommaSeparated: true,\n\t\t\tcanAddNew: true,\n\t\t}),\n\t\tSelectField({\n\t\t\ttitle: \"On save\",\n\t\t\tname: \"onSave\",\n\t\t\tref: \"com.axelor.meta.db.MetaAction\",\n\t\t\tdependModelType: MODEL_TYPE.CUSTOM,\n\t\t\tmultiple: true,\n\t\t\tcommaSeparated: true,\n\t\t\tcanAddNew: true,\n\t\t}),\n\t],\n};\n\nconst commonOption = {\n\toverview: [Name(), Type, Title, StudioApp],\n\tuiOptions: [Hidden, VisibleInGrid, ColumnSequence, Css],\n\tconditions: [ShowIf, HideIf, ReadOnlyIf, IncludeIf, ValidIf],\n\twidgetAttributes: [ColSpan, ShowTitle],\n};\n\nconst dummyOption = {\n\toverview: [Name(), DummyType],\n};\nconst viewOption = {\n\toverview: [\n\t\tName({ existsCheck: true }),\n\t\tType,\n\t\t{ ...Title, readOnly: true, translationView: false },\n\t],\n};\n\nconst gridOption = {\n\toverview: [Name({ existsCheck: true }), Type, Title, Model, Editable],\n};\n\nconst panelDashletOption = {\n\toverview: [\n\t\tName({ existsCheck: true }),\n\t\tType,\n\t\tAction,\n\t\tTitle,\n\t\tCanSearch,\n\t\tIfModule,\n\t],\n\tuiOptions: [ReadOnly, Hidden, Height, Css, Refresh],\n\tconditions: [ShowIf, HideIf, ReadOnlyIf],\n\twidgetAttributes: [ColSpan, ShowTitle],\n};\n\nconst menuItemOption = {\n\toverview: [Name({ existsCheck: true }), Type, Action],\n\twidgetAttributes: [ShowTitle],\n};\n\nconst dividerOption = {\n\toverview: [Name({ existsCheck: true }), Type],\n\tconditions: [If, ShowIf, HideIf, IfModule],\n};\n\nconst menuOption = {\n\toverview: [Name({ existsCheck: true }), Type],\n\twidgetAttributes: [ShowTitle],\n\tconditions: [If, IfModule, IncludeIf],\n};\n\nconst panelRelatedOption = {\n\toverview: [Name({ existsCheck: true }), Type, Title, Field, OnNew, OnChange],\n\tuiOptions: [FormView, GridView, Height, Editable, ReadOnly, Hidden, Css],\n\tconditions: [ShowIf, HideIf, ReadOnlyIf, ValidIf, CanMove, OrderBy],\n\twidgetAttributes: [ColSpan, ShowTitle],\n};\n\nconst panelIncludeOption = {\n\toverview: [Type, IncludeView, IncludeFrom, IfModule],\n\twidgetAttributes: [ShowTitle],\n};\n\nconst hiliteOption = {\n\toverview: [Name({ existsCheck: true }), If, Color, Background, Strong, Css],\n};\n\nexport const options = [\n\t{ type: \"form\", value: viewOption },\n\t{ type: \"grid\", value: gridOption },\n\t{ type: \"modelForm\", value: formOption },\n\t{ type: \"string\", value: stringOption },\n\t{ type: \"byte[]\", value: stringOption },\n\t{ type: \"integer\", value: integerOption },\n\t{ type: \"number\", value: integerOption },\n\t{ type: \"decimal\", value: decimalOption },\n\t{ type: \"bigdecimal\", value: decimalOption },\n\t{ type: \"boolean\", value: booleanOption },\n\t{ type: \"datetime\", value: datetimeOption },\n\t{ type: \"localdatetime\", value: datetimeOption },\n\t{ type: \"zoneddatetime\", value: datetimeOption },\n\t{ type: \"date\", value: datetimeOption },\n\t{ type: \"localdate\", value: datetimeOption },\n\t{ type: \"time\", value: datetimeOption },\n\t{ type: \"panel\", value: panelOption, dependModelType: MODEL_TYPE.BASE },\n\t{ type: \"panel-stack\", value: panelStackOption },\n\t{ type: \"panel-tab\", value: panelTabOption },\n\t{ type: \"button\", value: buttonOption },\n\t{ type: \"separator\", value: seperatorOption },\n\t{ type: \"spacer\", value: spacerOption },\n\t{ type: \"label\", value: labelOption },\n\t{ type: \"many-to-one\", value: manyToOneOption },\n\t{ type: \"many-to-many\", value: manyToManyAndOneToManyOption },\n\t{ type: \"one-to-many\", value: manyToManyAndOneToManyOption },\n\t{ type: \"json-many-to-one\", value: customRelationOption },\n\t{ type: \"json-many-to-many\", value: customRelationOption },\n\t{ type: \"json-one-to-many\", value: customRelationOption },\n\t{ type: \"include\", value: formOption },\n\t{ type: \"panel-tabs\", value: panelTabOption, showInCustomField: false },\n\t{ type: \"panel-dashlet\", value: panelDashletOption },\n\t{ type: \"panel-related\", value: panelRelatedOption },\n\t{ type: \"panel-include\", value: panelIncludeOption },\n\t{ type: \"text\", value: commonOption },\n\t{ type: \"long\", value: decimalOption },\n\t{ type: \"panel-dashlet\", value: commonOption },\n\t{ type: \"dashlet\", value: commonOption },\n\t{ type: \"static\", value: commonOption },\n\t{ type: \"one-to-one\", value: manyToOneOption },\n\t{ type: \"binary\", value: commonOption },\n\t{ type: \"field\", value: commonOption },\n\t{ type: \"dummy\", value: dummyOption },\n\t{ type: \"viewer\", value: viewerOption },\n\t{ type: \"editor\", value: labelOption },\n\t{ type: \"menu\", value: menuOption },\n\t{ type: \"item\", value: menuItemOption },\n\t{ type: \"divider\", value: dividerOption },\n\t{ type: \"hilite\", value: hiliteOption },\n];\n\nexport default options;\n","import React from \"react\";\nimport classNames from \"classnames\";\nimport Grid from \"./Grid\";\nimport { translate } from \"../utils\";\n\n/**\n * Menu Component\n * Used As Container to group Field Component like form group\n */\nfunction MenuComponent({ id, attrs, design, isTab = true, ...rest }) {\n\tconst errors = rest.errorList[id] || {};\n\tconst [openMenu, setOpenMenu] = React.useState(false);\n\n\tconst handleToggleMenu = React.useCallback((e) => {\n\t\te.stopPropagation();\n\t\tsetOpenMenu((m) => !m);\n\t}, []);\n\n\tconst arrow = openMenu ? \"down\" : \"up\";\n\treturn (\n\t\t<React.Fragment>\n\t\t\t<div\n\t\t\t\tclassName={classNames(\"menu-header\", {\n\t\t\t\t\tinline: isTab,\n\t\t\t\t})}\n\t\t\t>\n\t\t\t\t<div className=\"menu-toggle-button\" onClick={handleToggleMenu}>\n\t\t\t\t\t<i className={`fa fa-chevron-${arrow}`} />\n\t\t\t\t</div>\n\t\t\t\t<span>{translate(attrs.title || attrs.autoTitle)}</span>\n\t\t\t\t<div className=\"menu-toggle-button\" onClick={handleToggleMenu}>\n\t\t\t\t\t<i className={`fa fa-chevron-${arrow}`} />\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t\t{errors.items && !isTab && (\n\t\t\t\t<div className={classNames(\"panel-children-error\")}>{errors.items}</div>\n\t\t\t)}\n\t\t\t{openMenu && (\n\t\t\t\t<Grid\n\t\t\t\t\tdesign={design}\n\t\t\t\t\tclassName=\"panel-body\"\n\t\t\t\t\titems={attrs.items || []}\n\t\t\t\t\tattrs={attrs}\n\t\t\t\t\tpanelId={id}\n\t\t\t\t\t_type={rest._type}\n\t\t\t\t\terrorList={rest.errorList}\n\t\t\t\t\tcanRemove={rest.canRemove}\n\t\t\t\t/>\n\t\t\t)}\n\t\t</React.Fragment>\n\t);\n}\n\nexport default React.memo(MenuComponent);\n","import Field from \"./Field\";\nimport Panel from \"./Panel\";\nimport TabPanel from \"./TabPanel\";\nimport Form from \"./Form\";\nimport Menu from \"./Menu\";\n\n// common Registery contains all Form Components\nconst Registery = {\n\tfield: { component: Field, props: { className: \"field-container\" } },\n\tdump_field: {\n\t\tcomponent: Field,\n\t\tprops: { className: \"field-container dump\" },\n\t},\n\tpanel: { component: Panel, props: { className: \"panel\" } },\n\tmenubar: { component: Panel, props: { className: \"panel menubar\" } },\n\tmenu: { component: Menu, props: { className: \"panel menu\" } },\n\ttoolbar: { component: Panel, props: { className: \"panel toolbar\" } },\n\t\"panel-stack\": { component: Panel, props: { className: \"panel\" } },\n\t\"panel-include\": { component: Panel, props: { className: \"panel\" } },\n\tform: { component: Form, props: { className: \"form-layout\" } },\n\tcustomForm: { component: Form, props: { className: \"form-layout\" } },\n\t\"panel-tabs\": {\n\t\tcomponent: TabPanel,\n\t\tprops: { className: \"panel tabs-panel\" },\n\t},\n};\n\nexport default Registery;\n","import React from \"react\";\nimport Popover from \"@material-ui/core/Popover\";\nimport Typography from \"@material-ui/core/Typography\";\nimport Box from \"@material-ui/core/Box\";\nimport Button from \"@material-ui/core/Button\";\nimport { makeStyles } from \"@material-ui/core/styles\";\n\nimport { translate } from \"../utils\";\n\nconst useStyles = makeStyles(() => ({\n\ttext: {\n\t\ttextAlign: \"center\",\n\t\tfontSize: 14,\n\t},\n\tdialogContainer: {\n\t\tdisplay: \"flex\",\n\t\talignItems: \"center\",\n\t\tjustifyContent: \"center\",\n\t\tflexDirection: \"column\",\n\t},\n\tbutton: {\n\t\twidth: \"min-content\",\n\t\tfontWeight: 600,\n\t\tcolor: \"#fff\",\n\t\tborderRadius: 25,\n\t\tbackgroundColor: \"#0275d8\",\n\t\tpadding: 0,\n\t\toverflow: \"hidden\",\n\t\ttextOverflow: \"ellipsis\",\n\t\ttextTransform: \"capitalize\",\n\t\t\"&:hover\": {\n\t\t\tbackgroundColor: \"#0275d8\",\n\t\t},\n\t},\n\tpaper: {\n\t\tborderRadius: 5,\n\t\tpadding: 15,\n\t\tboxShadow: \"rgb(0 0 0 / 16%) 0px 3px 6px, rgb(0 0 0 / 23%) 0px 3px 6px\",\n\t},\n}));\n\nexport default function PopoverAlert({ anchorEl, handleClose, handleYes }) {\n\tconst classes = useStyles();\n\n\tconst open = Boolean(anchorEl);\n\tconst id = open ? \"simple-popover\" : undefined;\n\n\treturn (\n\t\t<Popover\n\t\t\tid={id}\n\t\t\topen={open}\n\t\t\tanchorEl={anchorEl}\n\t\t\tonClose={handleClose}\n\t\t\tclasses={{ paper: classes.paper }}\n\t\t\tanchorOrigin={{\n\t\t\t\tvertical: \"bottom\",\n\t\t\t\thorizontal: \"right\",\n\t\t\t}}\n\t\t\ttransformOrigin={{\n\t\t\t\tvertical: \"top\",\n\t\t\t\thorizontal: \"right\",\n\t\t\t}}\n\t\t>\n\t\t\t<Box className={classes.dialogContainer}>\n\t\t\t\t<Typography className={classes.text}>\n\t\t\t\t\t{translate(\"Sure want to delete?\")}\n\t\t\t\t</Typography>\n\t\t\t\t<Box>\n\t\t\t\t\t<Button\n\t\t\t\t\t\tsize=\"small\"\n\t\t\t\t\t\tclassName={classes.button}\n\t\t\t\t\t\tstyle={{\n\t\t\t\t\t\t\tmarginRight: 4,\n\t\t\t\t\t\t}}\n\t\t\t\t\t\tonClick={handleYes}\n\t\t\t\t\t>\n\t\t\t\t\t\t{translate(\"Yes\")}\n\t\t\t\t\t</Button>\n\t\t\t\t\t<Button size=\"small\" className={classes.button} onClick={handleClose}>\n\t\t\t\t\t\t{translate(\"No\")}\n\t\t\t\t\t</Button>\n\t\t\t\t</Box>\n\t\t\t</Box>\n\t\t</Popover>\n\t);\n}\n","import React from \"react\";\nimport classNames from \"classnames\";\nimport { compose } from \"recompose\";\nimport { DragSource, DropTarget } from \"react-dnd\";\n\nimport { useStore } from \"../store/context\";\nimport { TYPE as WIDGET_TYPE, IDS, MODEL_TYPE, FIELD_TYPE } from \"../constants\";\nimport Registry from \"./Registery\";\nimport { translate } from \"../utils\";\nimport PopoverAlert from \"./PopoverAlert\";\n\n// Unique Type for Widget\nconst TYPE = Symbol();\n\n// DragSource\nconst CardSource = {\n\t// evaluate widget is draggable or not\n\tcanDrag(props) {\n\t\tconst { state } = props;\n\t\tconst isCustomField = props._type === \"customField\";\n\t\t// temporary restrict real view movement\n\t\tif (\n\t\t\tstate.modelType === MODEL_TYPE.BASE &&\n\t\t\t!isCustomField &&\n\t\t\t!props.isPalleteField\n\t\t) {\n\t\t\treturn;\n\t\t}\n\t\treturn !(\n\t\t\tprops.id === IDS.dumpField ||\n\t\t\tprops.attrs.draggable === false ||\n\t\t\tprops.attrs.type === \"spacer\" ||\n\t\t\tprops.attrs.serverType === \"spacer\" ||\n\t\t\tprops.attrs.type === WIDGET_TYPE.form\n\t\t);\n\t},\n\t// event, raise when start dragging widget\n\tbeginDrag(props) {\n\t\tconst _props = { ...props };\n\t\tconst isPanel = _props.attrs.serverType === \"panel\";\n\t\tconst isGrid = [\"one-to-many\", \"many-to-many\"].includes(\n\t\t\t_props.attrs.serverType\n\t\t);\n\t\tif (\n\t\t\tprops.state.modelType === MODEL_TYPE.CUSTOM ||\n\t\t\tprops._type === \"customField\"\n\t\t) {\n\t\t\t_props.attrs = {\n\t\t\t\t..._props.attrs,\n\t\t\t\tmodel: \"com.axelor.meta.db.MetaJsonRecord\",\n\t\t\t\tmodelField: \"attrs\",\n\t\t\t\twidgetAttrs: JSON.stringify({\n\t\t\t\t\t...JSON.parse(_props.attrs.widgetAttrs || \"{}\"),\n\t\t\t\t\tcolSpan:\n\t\t\t\t\t\tJSON.parse(_props.attrs.widgetAttrs || \"{}\").colSpan ||\n\t\t\t\t\t\t(isGrid ? 6 : undefined),\n\t\t\t\t\tshowTitle: isPanel ? \"false\" : true,\n\t\t\t\t}),\n\t\t\t};\n\t\t} else if (props.state.modelType === MODEL_TYPE.BASE) {\n\t\t\tif (_props.attrs.isModelField) {\n\t\t\t\t_props.attrs = {\n\t\t\t\t\t..._props.attrs,\n\t\t\t\t\t...(_props.attrs.serverType !== \"field\" && {\n\t\t\t\t\t\ttype: _props.attrs.serverType,\n\t\t\t\t\t}),\n\t\t\t\t\tserverType: \"field\",\n\t\t\t\t};\n\t\t\t}\n\t\t\t_props.attrs = {\n\t\t\t\t..._props.attrs,\n\t\t\t\twidgetAttrs: JSON.stringify({\n\t\t\t\t\t...JSON.parse(_props.attrs.widgetAttrs || \"{}\"),\n\t\t\t\t\tshowTitle: isPanel ? \"false\" : true,\n\t\t\t\t}),\n\t\t\t};\n\t\t}\n\t\tprops.onDrag(props.id, { props: _props });\n\t\treturn { ...props };\n\t},\n\t// event, raise when dragging widget is droped on target or somewhere else\n\t// reset tasks\n\tendDrag(props, monitor) {\n\t\t// check widget is dropped or not, if not reset back to its position for existing element\n\t\t// for new element, remove it from schema\n\t\tprops.onDrag(null, {\n\t\t\tisDrop: monitor.didDrop(),\n\t\t\tprops: {},\n\t\t\tnewProps: monitor.getItem(),\n\t\t});\n\t},\n\t// currently dragged element, special case for nested drag source\n\tisDragging(props, monitor) {\n\t\treturn props.id === monitor.getItem().id;\n\t},\n};\n\n// DropTarget\nconst CardTarget = {\n\t// event, raised when one widget is hover on another widget\n\n\thover(props, monitor) {\n\t\tlet {\n\t\t\tindex: maybeOutdatedDragIndex,\n\t\t\t/*  WARNING\n\t\t\tIf layout changes while the element is being dragged, then index will be outdated\n\t\t\trely on props.meta.grid?.find(item=>item.id === dragId).?cellIndice for grid layouts\n\t\t\t*/\n\t\t\tpanelId: dragPanelId,\n\t\t\tid: dragId,\n\t\t\tattrs: dragAttrs,\n\t\t} = monitor.getItem();\n\t\tlet {\n\t\t\tindex: hoverIndex,\n\t\t\tpanelId: hoverPanelId,\n\t\t\tid: hoverId,\n\t\t\tattrs: hoverAttrs,\n\t\t\tstate,\n\t\t\tmeta,\n\t\t\tsetHoverAttr,\n\t\t} = props;\n\t\tconst panelSet = [\n\t\t\tWIDGET_TYPE.panel,\n\t\t\tWIDGET_TYPE.panelDashlet,\n\t\t\tWIDGET_TYPE.panelRelated,\n\t\t\tWIDGET_TYPE.panelInclude,\n\t\t];\n\t\tconst isCustomField = props._type === \"customField\";\n\t\tconst widgets =\n\t\t\tprops._type === \"customField\" ? state.customFieldWidgets : state.widgets;\n\t\tconst parentPanel = props.panelId ? widgets[props.panelId] : null;\n\t\t/**\n\t\t * Restrict form move\n\t\t */\n\t\tif (dragAttrs.type === \"customForm\") {\n\t\t\treturn;\n\t\t}\n\t\t/**\n\t\t * Don't allow tabs to move if in edit state\n\t\t * Don't allow tabs drop in first row or in between panels\n\t\t */\n\t\tif (!meta) return;\n\t\tif (dragAttrs.type === WIDGET_TYPE.tabs) {\n\t\t\tif (meta.row === 0 && !dragAttrs.isNew) return;\n\t\t\tif (meta.grid) {\n\t\t\t\tlet maxIndex = Math.max(...meta.grid.map((o) => o.rowIndex));\n\t\t\t\tif (meta.row < maxIndex) {\n\t\t\t\t\treturn;\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\t//Don't allow panel after tabs\n\t\tif (dragAttrs.type === WIDGET_TYPE.panel) {\n\t\t\tconst { grid, row } = meta;\n\t\t\tconst gridTab = grid && grid.find((f) => f.type === WIDGET_TYPE.tabs);\n\t\t\tif (gridTab && gridTab.rowIndex < row) {\n\t\t\t\treturn;\n\t\t\t}\n\t\t}\n\n\t\t// temporary restrict real view movement\n\t\tif (state.modelType === MODEL_TYPE.BASE && !isCustomField) {\n\t\t\treturn;\n\t\t}\n\t\tif ([WIDGET_TYPE.menubar, WIDGET_TYPE.toolbar].includes(dragAttrs.type)) {\n\t\t\tconst bar = Object.values(state.widgets || {}).find((w) =>\n\t\t\t\t[WIDGET_TYPE.menubar, WIDGET_TYPE.toolbar].includes(w.type)\n\t\t\t);\n\t\t\tconst rowCount = bar ? 2 : 0;\n\t\t\tif (hoverPanelId) return;\n\t\t\tif (!meta) return;\n\t\t\tif (meta.row > rowCount || meta.col !== 1) return;\n\t\t}\n\t\tif (\n\t\t\t(state.modelType === MODEL_TYPE.CUSTOM || isCustomField) &&\n\t\t\t[WIDGET_TYPE.menubar, WIDGET_TYPE.toolbar].includes(dragAttrs.serverType)\n\t\t) {\n\t\t\treturn;\n\t\t}\n\t\tif (\n\t\t\t![WIDGET_TYPE.menuItem, WIDGET_TYPE.menu, WIDGET_TYPE.divider].includes(\n\t\t\t\tdragAttrs.serverType\n\t\t\t) &&\n\t\t\tparentPanel &&\n\t\t\tparentPanel.type === WIDGET_TYPE.menu\n\t\t) {\n\t\t\treturn;\n\t\t}\n\t\tif (\n\t\t\t[WIDGET_TYPE.menuItem, WIDGET_TYPE.divider].includes(\n\t\t\t\tdragAttrs.serverType\n\t\t\t) &&\n\t\t\t(!parentPanel || parentPanel.type !== WIDGET_TYPE.menu)\n\t\t) {\n\t\t\treturn;\n\t\t}\n\t\tif (\n\t\t\t[WIDGET_TYPE.menu].includes(dragAttrs.serverType) &&\n\t\t\t(!parentPanel ||\n\t\t\t\t![WIDGET_TYPE.menu, WIDGET_TYPE.menubar].includes(parentPanel.type))\n\t\t) {\n\t\t\treturn;\n\t\t}\n\t\tif (\n\t\t\tparentPanel &&\n\t\t\tparentPanel.type === WIDGET_TYPE.menubar &&\n\t\t\tdragAttrs.type !== WIDGET_TYPE.menu\n\t\t) {\n\t\t\treturn;\n\t\t}\n\t\tif (\n\t\t\tparentPanel &&\n\t\t\tparentPanel.type === WIDGET_TYPE.toolbar &&\n\t\t\tdragAttrs.type !== FIELD_TYPE.button\n\t\t) {\n\t\t\treturn;\n\t\t}\n\t\tif (\n\t\t\t!parentPanel &&\n\t\t\t![\n\t\t\t\t...panelSet,\n\t\t\t\tWIDGET_TYPE.tabs,\n\t\t\t\tWIDGET_TYPE.panelStack,\n\t\t\t\tWIDGET_TYPE.menubar,\n\t\t\t\tWIDGET_TYPE.toolbar,\n\t\t\t].includes(dragAttrs.type)\n\t\t) {\n\t\t\treturn;\n\t\t}\n\t\t// when stacked is true do not allow to drop field except specified panel types.\n\t\tif (\n\t\t\tparentPanel &&\n\t\t\tparentPanel.type === WIDGET_TYPE.panelStack &&\n\t\t\t!panelSet.includes(dragAttrs.type)\n\t\t) {\n\t\t\treturn;\n\t\t}\n\t\tif (\n\t\t\tparentPanel &&\n\t\t\tparentPanel.type === WIDGET_TYPE.tabs &&\n\t\t\t!panelSet.includes(dragAttrs.type)\n\t\t) {\n\t\t\treturn;\n\t\t}\n\t\tif (\n\t\t\tstate.modelType === MODEL_TYPE.CUSTOM ||\n\t\t\tprops._type === \"customField\"\n\t\t) {\n\t\t\t// let hasPanel = false;\n\t\t\tif (\n\t\t\t\t[\n\t\t\t\t\tWIDGET_TYPE.panelDashlet,\n\t\t\t\t\tWIDGET_TYPE.panelInclude,\n\t\t\t\t\tWIDGET_TYPE.panelRelated,\n\t\t\t\t\tWIDGET_TYPE.panelStack,\n\t\t\t\t].includes(dragAttrs.type)\n\t\t\t) {\n\t\t\t\treturn;\n\t\t\t}\n\t\t\t// restrict nested panel drop in custom model\n\t\t\tconst widgets =\n\t\t\t\tprops._type === \"customField\"\n\t\t\t\t\t? state.customFieldWidgets\n\t\t\t\t\t: state.widgets;\n\t\t\tconst stateItems =\n\t\t\t\tprops._type === \"customField\" ? state.customFieldItems : state.items;\n\t\t\tconst hasTabPanel =\n\t\t\t\tObject.keys(widgets).findIndex(\n\t\t\t\t\t(widgetKey) => widgets[widgetKey].type === WIDGET_TYPE.tabs\n\t\t\t\t) !== -1;\n\t\t\tif (\n\t\t\t\thasTabPanel &&\n\t\t\t\tdragAttrs.type === WIDGET_TYPE.tabs &&\n\t\t\t\tdragAttrs.isNew\n\t\t\t) {\n\t\t\t\treturn;\n\t\t\t}\n\t\t\tif (\n\t\t\t\t[WIDGET_TYPE.panel, WIDGET_TYPE.tabs].includes(dragAttrs.type) &&\n\t\t\t\tprops.panelId &&\n\t\t\t\t!stateItems.includes(props.panelId)\n\t\t\t) {\n\t\t\t\treturn;\n\t\t\t}\n\t\t\t// paneltab can drop inside panel tab\n\t\t\tif (\n\t\t\t\tparentPanel &&\n\t\t\t\tdragAttrs.type === WIDGET_TYPE.panel &&\n\t\t\t\tparentPanel.type !== WIDGET_TYPE.tabs\n\t\t\t) {\n\t\t\t\treturn;\n\t\t\t}\n\t\t\tif (\n\t\t\t\tparentPanel &&\n\t\t\t\tdragAttrs.type === WIDGET_TYPE.tabs &&\n\t\t\t\tparentPanel.type === WIDGET_TYPE.panel\n\t\t\t) {\n\t\t\t\treturn;\n\t\t\t}\n\t\t\tconst { hoverAttr } = state;\n\t\t\tconst { widgetAttrs = \"{}\" } = hoverAttr;\n\t\t\tconst _attrs = JSON.parse(widgetAttrs);\n\n\t\t\t/*\n\t\t\tif panel is being dragged into tabs, set title and mark it as a tab\n\t\t\telse if tab is being dragged outside , mark it as a non tab\n\t\t\t*/\n\t\t\tif (\n\t\t\t\tparentPanel &&\n\t\t\t\tdragAttrs.type === WIDGET_TYPE.panel &&\n\t\t\t\tparentPanel.type === WIDGET_TYPE.tabs &&\n\t\t\t\t(!_attrs.tab || _attrs.tab !== \"true\") //if hoverAttr tab is not ALREADY true\n\t\t\t) {\n\t\t\t\tsetHoverAttr({\n\t\t\t\t\ttitle: dragAttrs.title || translate(\"Tab\"),\n\t\t\t\t\twidgetAttrs: JSON.stringify({ tab: \"true\" }),\n\t\t\t\t});\n\t\t\t} else if (\n\t\t\t\t!parentPanel && //when there is no parentPanel, widget is not hovered on tabs,\n\t\t\t\tdragAttrs.type === WIDGET_TYPE.panel &&\n\t\t\t\t(!_attrs.tab || _attrs.tab !== \"false\") //if hoverAttr tab is not ALREADY false\n\t\t\t) {\n\t\t\t\tconst dragWidgetAttrs = JSON.parse(dragAttrs.widgetAttrs || \"{}\");\n\t\t\t\t`${dragWidgetAttrs.tab}` === \"true\" && // if dragged panel is a tab\n\t\t\t\t\tsetHoverAttr({\n\t\t\t\t\t\twidgetAttrs: JSON.stringify({ tab: \"false\" }),\n\t\t\t\t\t});\n\t\t\t}\n\t\t} else {\n\t\t\tif (props.panelId) {\n\t\t\t\tconst parentPanel = widgets[props.panelId];\n\t\t\t\tif (\n\t\t\t\t\tparentPanel &&\n\t\t\t\t\t[WIDGET_TYPE.tabs, WIDGET_TYPE.panelStack].includes(dragAttrs.type)\n\t\t\t\t) {\n\t\t\t\t\treturn;\n\t\t\t\t}\n\t\t\t\tif (\n\t\t\t\t\t[\n\t\t\t\t\t\tWIDGET_TYPE.panelDashlet,\n\t\t\t\t\t\tWIDGET_TYPE.panelRelated,\n\t\t\t\t\t\tWIDGET_TYPE.panelInclude,\n\t\t\t\t\t].includes(parentPanel.type)\n\t\t\t\t) {\n\t\t\t\t\treturn;\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t\tif (dragAttrs.isCoreField === false && props._type === \"customField\") {\n\t\t\treturn;\n\t\t}\n\t\t// skip for same item drag n drop\n\t\t// skip for dragging widget in same panel\n\t\t// skip for other hover elements(monitor.isOver) specially for nested target\n\t\t// skip for dragging field directly on form\n\t\tif (\n\t\t\t(hoverId === dragId && dragPanelId === hoverPanelId) ||\n\t\t\t(dragAttrs.items || []).indexOf(hoverId) > -1 ||\n\t\t\t!monitor.isOver({ shallow: true }) ||\n\t\t\t(dragAttrs.type === WIDGET_TYPE.field &&\n\t\t\t\thoverAttrs.type === WIDGET_TYPE.form) ||\n\t\t\t(dragAttrs.type === WIDGET_TYPE.field && props.tabId !== undefined) ||\n\t\t\t(props.state.hoverWidget &&\n\t\t\t\tprops.state.hoverWidget.id === hoverId &&\n\t\t\t\tprops.state.hoverWidget.index === hoverIndex &&\n\t\t\t\tprops.state.hoverWidget.panelId === hoverPanelId)\n\t\t) {\n\t\t\treturn;\n\t\t}\n\t\t// Only for current dragging widget\n\t\tif (dragId === props.state.dragWidget) {\n\t\t\ttry {\n\t\t\t\tconst dragIndex =\n\t\t\t\t\tprops.meta.grid?.find((item) => item.id === dragId)?.cellIndice ||\n\t\t\t\t\tmaybeOutdatedDragIndex;\n\t\t\t\t// skip for separator cell at the sides of dragged widget\n\t\t\t\tif (dragId && !dragAttrs.isNew && dragPanelId === hoverPanelId) {\n\t\t\t\t\tif (dragIndex + 1 === hoverIndex || dragIndex - 1 === hoverIndex) {\n\t\t\t\t\t\tprops.state.hoverWidget && props.onHover(null);\n\t\t\t\t\t\treturn;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\t//skip for separator cells beside tab panel\n\t\t\t\tif (\n\t\t\t\t\tmeta.isSeparator &&\n\t\t\t\t\t(meta.grid?.[hoverIndex + 1]?.type === WIDGET_TYPE.tabs ||\n\t\t\t\t\t\t(hoverIndex &&\n\t\t\t\t\t\t\tmeta.grid?.[hoverIndex - 1]?.type === WIDGET_TYPE.tabs))\n\t\t\t\t) {\n\t\t\t\t\tprops.state.hoverWidget && props.onHover(null);\n\t\t\t\t\treturn;\n\t\t\t\t}\n\n\t\t\t\tconst { isMoved } = props.onMove(\n\t\t\t\t\t{\n\t\t\t\t\t\tsource: {\n\t\t\t\t\t\t\tpanelId: dragPanelId,\n\t\t\t\t\t\t\tindex: dragIndex,\n\t\t\t\t\t\t\tid: dragId,\n\t\t\t\t\t\t\tattrs: dragAttrs,\n\t\t\t\t\t\t},\n\t\t\t\t\t\tdestination: {\n\t\t\t\t\t\t\tpanelId: hoverPanelId,\n\t\t\t\t\t\t\tindex: hoverIndex,\n\t\t\t\t\t\t\tid: hoverId,\n\t\t\t\t\t\t\tattrs: hoverAttrs,\n\t\t\t\t\t\t\t_type: props._type,\n\t\t\t\t\t\t},\n\t\t\t\t\t},\n\t\t\t\t\ttrue,\n\t\t\t\t\tprops._type\n\t\t\t\t);\n\t\t\t\tif (isMoved && props.onHover) {\n\t\t\t\t\tprops.onHover({\n\t\t\t\t\t\tmeta: props.meta || {},\n\t\t\t\t\t\tid: hoverId,\n\t\t\t\t\t\tindex: hoverIndex,\n\t\t\t\t\t\tpanelId: hoverPanelId,\n\t\t\t\t\t\tposition:\n\t\t\t\t\t\t\tprops.panelColumns &&\n\t\t\t\t\t\t\t(`${props.panelColumns}` === \"1\" ||\n\t\t\t\t\t\t\t\t`${props.panelColumns}` === `${dragAttrs.colSpan}`) &&\n\t\t\t\t\t\t\tprops.tabId === undefined &&\n\t\t\t\t\t\t\thoverAttrs?.type !== \"spacer\" &&\n\t\t\t\t\t\t\thoverAttrs?.serverType !== \"spacer\"\n\t\t\t\t\t\t\t\t? \"top\"\n\t\t\t\t\t\t\t\t: \"default\",\n\t\t\t\t\t\tattrs: hoverAttrs,\n\t\t\t\t\t\t_type: props._type,\n\t\t\t\t\t});\n\t\t\t\t} else {\n\t\t\t\t\tprops.state.hoverWidget && props.onHover(null);\n\t\t\t\t}\n\t\t\t} catch (e) {}\n\t\t}\n\n\t\tif (parentPanel && parentPanel.widgetAttrs) {\n\t\t\tlet parentWidgetAttrs = JSON.parse(parentPanel.widgetAttrs || \"{}\");\n\t\t\tlet dragAttrsWidgetAttrs = JSON.parse(dragAttrs.widgetAttrs || \"{}\");\n\t\t\tif (\n\t\t\t\tparentWidgetAttrs.itemSpan &&\n\t\t\t\t!dragAttrsWidgetAttrs.colSpan &&\n\t\t\t\t[\"one-to-many\", \"many-to-many\"].includes(dragAttrs.serverType)\n\t\t\t) {\n\t\t\t\t/**\n\t\t\t\t * Temporary fix for AOP issue\n\t\t\t\t * In AOP for grid relational fields, Parent panels itemSpan is not working\n\t\t\t\t * So adding default span from here\n\t\t\t\t */\n\t\t\t\tconst attrs = JSON.parse(dragAttrs.widgetAttrs || \"{}\");\n\t\t\t\tconst hoverAttrs = {\n\t\t\t\t\twidgetAttrs: JSON.stringify({\n\t\t\t\t\t\t...attrs,\n\t\t\t\t\t\tcolSpan: parentWidgetAttrs.itemSpan,\n\t\t\t\t\t}),\n\t\t\t\t};\n\t\t\t\tsetHoverAttr(hoverAttrs);\n\t\t\t}\n\t\t}\n\t},\n\tcanDrop(props, monitor) {\n\t\tif (props?.attrs?.type === \"form\") return false;\n\t\treturn true;\n\t},\n};\nconst parse = (json) => {\n\treturn JSON.parse(json || \"{}\");\n};\n\nfunction Widget(props) {\n\tlet {\n\t\tid,\n\t\tisDragging,\n\t\tconnectDragSource,\n\t\tconnectDropTarget,\n\t\thighlighted,\n\t\thovered,\n\t\ttabId,\n\t\tclassName,\n\t\tcomponent: DefaultWidgetComponent,\n\t\tattrs = {},\n\t\tstate,\n\t\tupdate,\n\t\tonWidgetChange,\n\t\terrorList = {},\n\t\t...rest\n\t} = props;\n\tconst { dragWidget, dragWidgetProps, hoverWidget } = state;\n\tconst [anchorEl, setAnchorEl] = React.useState(null);\n\n\tconst _widgets =\n\t\trest._type === \"customField\" ? state.customFieldWidgets : state.widgets;\n\n\tconst handleWidgetRemove = (event) => {\n\t\tsetAnchorEl(event.currentTarget);\n\t};\n\n\tconst handleClose = () => {\n\t\tsetAnchorEl(null);\n\t};\n\n\tconst handleYes = () => {\n\t\tif (rest.onRemove) {\n\t\t\trest.onRemove(rest.panelId, rest.index, id, rest._type);\n\t\t\thandleClose();\n\t\t}\n\t};\n\n\t// to determine if dragged widget will fit or not\n\tconst canWidgetFit = () => {\n\t\tif (\n\t\t\thoverWidget?.attrs?.serverType === \"spacer\" ||\n\t\t\thoverWidget?.attrs?.type === \"spacer\" ||\n\t\t\thoverWidget?.meta?.isSeparator\n\t\t) {\n\t\t\treturn true;\n\t\t}\n\t\tconst dragWidgetAttrsColSpan =\n\t\t\ttypeof dragWidgetProps?.id === \"symbol\" &&\n\t\t\t[\"one-to-many\", \"many-to-many\"].includes(\n\t\t\t\tdragWidgetProps?.attrs?.serverType\n\t\t\t)\n\t\t\t\t? undefined //Tempory fix for AOP issue\n\t\t\t\t: parse(dragWidgetProps?.attrs?.widgetAttrs).colSpan;\n\n\t\tconst hoverWidgetParentItemSpan = parse(\n\t\t\t(_widgets || {})[hoverWidget?.panelId]?.widgetAttrs\n\t\t).itemSpan;\n\n\t\tconst itemSpan = dragWidgetAttrsColSpan || hoverWidgetParentItemSpan || 6;\n\t\tconst hoverSpan = hoverWidget?.meta?.colSpan;\n\n\t\tif (hoverSpan < itemSpan) {\n\t\t\treturn false;\n\t\t}\n\t\treturn true;\n\t};\n\n\t// special case for new element\n\t// hide/remove element from schema, if it drag outside form container(id=1)\n\tReact.useEffect(() => {\n\t\tupdate((draft) => {\n\t\t\tdraft.hoverWidget && (draft.hoverWidget.visible = hovered);\n\t\t});\n\t}, [update, hovered, id, dragWidget, attrs]);\n\n\tlet registryField = Registry[attrs.type] || Registry.field;\n\n\tif (rest.isTab && !Registry[attrs.type]) {\n\t\tregistryField = Registry[\"panel\"];\n\t}\n\n\tlet { component: WidgetComponent, props: componentProps = {} } =\n\t\tregistryField;\n\n\tif (DefaultWidgetComponent) {\n\t\tWidgetComponent = DefaultWidgetComponent;\n\t}\n\n\tlet isFormField = true;\n\tif (Object.values(IDS.createWidgets).indexOf(id) > -1) {\n\t\tisFormField = false;\n\t\tconnectDropTarget = (e) => e;\n\t}\n\tconst isEdit = isFormField && state.editWidget === id;\n\tconst isTabWidget = tabId !== undefined;\n\tconst isTabWidgetContent = isTabWidget ? !rest.isTab : false;\n\tconst showRemove =\n\t\tisFormField &&\n\t\tNumber(id) > 0 &&\n\t\t!isTabWidgetContent &&\n\t\trest.design &&\n\t\trest.canRemove !== false;\n\tif (\n\t\tisTabWidgetContent ||\n\t\t(id &&\n\t\t\tid !== IDS.form &&\n\t\t\ttypeof id !== \"symbol\" &&\n\t\t\tattrs.serverType !== \"spacer\" &&\n\t\t\tattrs.type !== \"spacer\")\n\t) {\n\t\tconnectDropTarget = (e) => e;\n\t}\n\tif (attrs.isExist === false || (!rest.design && IDS.dumpField)) return null;\n\n\tconst _isTab =\n\t\trest.isTab || `${JSON.parse(attrs.widgetAttrs || \"{}\").tab}` === \"true\";\n\n\treturn (\n\t\t<React.Fragment>\n\t\t\t{connectDragSource(\n\t\t\t\tconnectDropTarget(\n\t\t\t\t\t<div\n\t\t\t\t\t\t{...componentProps}\n\t\t\t\t\t\tclassName={classNames(\n\t\t\t\t\t\t\tclassName,\n\t\t\t\t\t\t\t\"widget\",\n\t\t\t\t\t\t\tcomponentProps.className,\n\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t\"dummy-widget\": attrs.isDummy,\n\t\t\t\t\t\t\t\t\"spacer-widget\":\n\t\t\t\t\t\t\t\t\tattrs.type === \"spacer\" || attrs.serverType === \"spacer\",\n\t\t\t\t\t\t\t\tedit: isEdit,\n\t\t\t\t\t\t\t\thighlighted: highlighted,\n\t\t\t\t\t\t\t\thovered: hovered,\n\t\t\t\t\t\t\t\tactive: isFormField && isDragging,\n\t\t\t\t\t\t\t\t\"form-field\": isFormField,\n\t\t\t\t\t\t\t\t\"panel-field\": attrs.type === \"panel\",\n\t\t\t\t\t\t\t\t\"non-title-panel\":\n\t\t\t\t\t\t\t\t\tattrs.type === \"panel\" && !_isTab && !attrs.title,\n\t\t\t\t\t\t\t\t\"title-panel\": attrs.type === \"panel\" && !_isTab && attrs.title,\n\t\t\t\t\t\t\t\t\"error-field\": Boolean(errorList[id]),\n\t\t\t\t\t\t\t\t\"pallete-field\": rest.isPalleteField,\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t)}\n\t\t\t\t\t\t_type={rest._type}\n\t\t\t\t\t\tonClick={(e) => {\n\t\t\t\t\t\t\tif (isFormField && rest.onSelect) {\n\t\t\t\t\t\t\t\te.stopPropagation();\n\t\t\t\t\t\t\t\tconst widget = _widgets && _widgets[id];\n\t\t\t\t\t\t\t\tif (widget.type !== \"panel-tabs\" && id !== IDS.dumpField) {\n\t\t\t\t\t\t\t\t\trest.onSelect({ id, type: rest._type });\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\tif (isTabWidget) {\n\t\t\t\t\t\t\t\te.stopPropagation();\n\t\t\t\t\t\t\t\tif (id !== IDS.dumpField && _widgets[tabId]) {\n\t\t\t\t\t\t\t\t\tonWidgetChange({\n\t\t\t\t\t\t\t\t\t\tid: tabId,\n\t\t\t\t\t\t\t\t\t\tprops: {\n\t\t\t\t\t\t\t\t\t\t\tcurrent: id,\n\t\t\t\t\t\t\t\t\t\t\t_type: rest._type,\n\t\t\t\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t\t\t});\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}}\n\t\t\t\t\t>\n\t\t\t\t\t\t{!isTabWidgetContent &&\n\t\t\t\t\t\t\tstate.hoverWidget &&\n\t\t\t\t\t\t\ttypeof id !== \"symbol\" &&\n\t\t\t\t\t\t\tNumber(id) >= 0 &&\n\t\t\t\t\t\t\tstate.hoverWidget.index === rest.index &&\n\t\t\t\t\t\t\tstate.hoverWidget.visible !== false &&\n\t\t\t\t\t\t\tstate.hoverWidget.panelId === rest.panelId && (\n\t\t\t\t\t\t\t\t<div\n\t\t\t\t\t\t\t\t\tclassName={classNames(\n\t\t\t\t\t\t\t\t\t\t\"hover-liner\",\n\t\t\t\t\t\t\t\t\t\t{ \"dummy-widget\": attrs.isDummy || id === 0 },\n\t\t\t\t\t\t\t\t\t\tstate.hoverWidget.position,\n\t\t\t\t\t\t\t\t\t\t{ \"no-fit\": !canWidgetFit() }\n\t\t\t\t\t\t\t\t\t)}\n\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t)}\n\t\t\t\t\t\t{WidgetComponent && (\n\t\t\t\t\t\t\t<WidgetComponent\n\t\t\t\t\t\t\t\tid={id}\n\t\t\t\t\t\t\t\tisDragging={state.dragWidget === id}\n\t\t\t\t\t\t\t\tattrs={attrs}\n\t\t\t\t\t\t\t\t_type={rest._type}\n\t\t\t\t\t\t\t\terrorList={errorList}\n\t\t\t\t\t\t\t\tcanRemove={rest.canRemove}\n\t\t\t\t\t\t\t\tdraggable={attrs.type !== WIDGET_TYPE.menubar}\n\t\t\t\t\t\t\t\t{...rest}\n\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t)}\n\t\t\t\t\t\t{showRemove && !state.dragWidget && (\n\t\t\t\t\t\t\t<span\n\t\t\t\t\t\t\t\tonClick={handleWidgetRemove}\n\t\t\t\t\t\t\t\tclassName=\"widget-remove\"\n\t\t\t\t\t\t\t\ttitle={translate(\"Remove Widget\")}\n\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t<i className=\"fa fa-remove\" />\n\t\t\t\t\t\t\t</span>\n\t\t\t\t\t\t)}\n\t\t\t\t\t\t{anchorEl && (\n\t\t\t\t\t\t\t<PopoverAlert\n\t\t\t\t\t\t\t\tanchorEl={anchorEl}\n\t\t\t\t\t\t\t\thandleClose={handleClose}\n\t\t\t\t\t\t\t\thandleYes={handleYes}\n\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t)}\n\t\t\t\t\t</div>\n\t\t\t\t)\n\t\t\t)}\n\t\t</React.Fragment>\n\t);\n}\n\nconst SimpleWidget = (props) => (\n\t<Widget\n\t\t{...props}\n\t\tconnectDropTarget={(e) => e}\n\t\tconnectDragSource={(e) => e}\n\t/>\n);\n\nconst DraggableWidget = compose(\n\tDropTarget(TYPE, CardTarget, (connect, monitor) => ({\n\t\thighlighted: false,\n\t\thovered: monitor.isOver(),\n\t\tconnectDropTarget: connect.dropTarget(),\n\t})),\n\tDragSource(TYPE, CardSource, (connect, monitor) => ({\n\t\tconnectDragSource: connect.dragSource(),\n\t\tisDragging: monitor.isDragging(),\n\t}))\n)(Widget);\n\nexport const WidgetComponent = (props) => {\n\tconst store = useStore();\n\tconst { state } = store;\n\tconst _widgets =\n\t\tprops._type === \"customField\" ? state.customFieldWidgets : state.widgets;\n\tconst attrs =\n\t\t_widgets && _widgets[props.id] ? _widgets[props.id] : props.attrs || {};\n\tconst _props = { ...store, attrs };\n\tconst draggable = attrs.type !== WIDGET_TYPE.menubar;\n\n\tif (props.design || draggable)\n\t\treturn <DraggableWidget {..._props} {...props} />;\n\treturn <SimpleWidget {..._props} {...props} />;\n};\n\nexport default React.memo(WidgetComponent);\n","import React from \"react\";\nimport Grid from \"./Grid\";\nimport { PANEL_TYPE } from \"../constants\";\n\n/**\n * Form Component\n * Used As Main Container i.e. <form />\n */\nfunction FormComponent({ attrs = {}, items = [], design, widgets, ...rest }) {\n\t// render top level items as Widgets using Context FormConsumer\n\tconst rootPanel = React.useMemo(() => {\n\t\tconst sidebar = items.filter(\n\t\t\t(k) => widgets[k] && [\"true\", true].includes(widgets[k].sidebar)\n\t\t);\n\t\tconst mainItems = items.filter(\n\t\t\t(k) => widgets[k] && ![\"true\", true].includes(widgets[k].sidebar)\n\t\t);\n\t\tconst hasSidebar = sidebar.length > 0;\n\n\t\treturn hasSidebar\n\t\t\t? {\n\t\t\t\t\titems: [\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tlayout: PANEL_TYPE.grid,\n\t\t\t\t\t\t\titems: mainItems,\n\t\t\t\t\t\t\tcolSpan: 9,\n\t\t\t\t\t\t},\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tlayout: PANEL_TYPE.grid,\n\t\t\t\t\t\t\titems: sidebar,\n\t\t\t\t\t\t\tcolSpan: 3,\n\t\t\t\t\t\t},\n\t\t\t\t\t],\n\t\t\t  }\n\t\t\t: {\n\t\t\t\t\titems: [\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tlayout: PANEL_TYPE.grid,\n\t\t\t\t\t\t\titems: mainItems,\n\t\t\t\t\t\t\tcolSpan: 12,\n\t\t\t\t\t\t},\n\t\t\t\t\t],\n\t\t\t  };\n\t}, [items, widgets]);\n\n\treturn (\n\t\t<div className=\"flex-container\">\n\t\t\t{rootPanel.items.map(({ items, colSpan, ...attrs }, i) => (\n\t\t\t\t<div className={`flex-item span-${colSpan}`} key={i}>\n\t\t\t\t\t<Grid\n\t\t\t\t\t\tkey={i}\n\t\t\t\t\t\tdesign={design}\n\t\t\t\t\t\tclassName=\"form-body\"\n\t\t\t\t\t\titems={items}\n\t\t\t\t\t\tattrs={attrs}\n\t\t\t\t\t\t_type={rest._type}\n\t\t\t\t\t\twidgets={widgets}\n\t\t\t\t\t\terrorList={rest.errorList}\n\t\t\t\t\t\tcanRemove={rest.canRemove}\n\t\t\t\t\t/>\n\t\t\t\t</div>\n\t\t\t))}\n\t\t</div>\n\t);\n}\n\nexport default FormComponent;\n","import React, { useState, useEffect } from \"react\";\nimport AxelorService from \"../services/axelor.rest\";\nimport { fetchCustomModel } from \"../Toolbar/api\";\nimport { translate, getDefaultGridFormName } from \"../utils\";\n\nconst metaViewService = new AxelorService({\n\tmodel: \"com.axelor.meta.db.MetaView\",\n});\nconst excludedUITypes = [\"panel\", \"label\", \"spacer\", \"button\"];\n\nconst showInGrid = (item) => {\n\treturn (\n\t\t!excludedUITypes.includes(item.type) && item.visibleInGrid && !item.hidden\n\t);\n};\n\nfunction RelationalFieldGridView({ attrs, id }) {\n\tconst {\n\t\tgridView,\n\t\ttargetModel: target,\n\t\ttitle,\n\t\tautoTitle,\n\t\taction,\n\t\ttargetJsonModel,\n\t} = attrs || {};\n\tconst [gridItems, setGridItems] = useState([]);\n\tconst [gridTitle, setGridTitle] = useState(null);\n\n\tuseEffect(() => {\n\t\tasync function getGrid() {\n\t\t\tlet viewName = gridView;\n\t\t\tif (action) {\n\t\t\t\tconst _context = {\n\t\t\t\t\t_id: null,\n\t\t\t\t};\n\t\t\t\tconst data = {\n\t\t\t\t\taction,\n\t\t\t\t\tmodel: \"com.axelor.meta.db.MetaAction\",\n\t\t\t\t\tdata: {\n\t\t\t\t\t\tcontext: _context,\n\t\t\t\t\t},\n\t\t\t\t};\n\n\t\t\t\tconst actionResult = await metaViewService.action(data);\n\t\t\t\tif (\n\t\t\t\t\tactionResult.data &&\n\t\t\t\t\tactionResult.data[0] &&\n\t\t\t\t\tactionResult.data[0].view &&\n\t\t\t\t\tactionResult.data[0].view.views\n\t\t\t\t) {\n\t\t\t\t\tconst view = actionResult.data[0].view.views.find(\n\t\t\t\t\t\t(v) => v.type === \"grid\"\n\t\t\t\t\t);\n\t\t\t\t\tif (view) {\n\t\t\t\t\t\tviewName = view.name;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t\tif (targetJsonModel) {\n\t\t\t\tlet model;\n\t\t\t\tif (!targetJsonModel.name && targetJsonModel.id) {\n\t\t\t\t\tmodel = await fetchCustomModel(targetJsonModel.id);\n\t\t\t\t}\n\t\t\t\tviewName = getDefaultGridFormName(\n\t\t\t\t\tmodel || targetJsonModel,\n\t\t\t\t\tfalse,\n\t\t\t\t\ttrue\n\t\t\t\t);\n\t\t\t}\n\t\t\tconst payload = {\n\t\t\t\tmodel: target,\n\t\t\t\tdata: {\n\t\t\t\t\ttype: \"grid\",\n\t\t\t\t\tname: viewName,\n\t\t\t\t},\n\t\t\t};\n\t\t\tif (viewName) {\n\t\t\t\tmetaViewService.view(payload).then((res) => {\n\t\t\t\t\tif (res.data && res.data.view) {\n\t\t\t\t\t\tconst { items = [], title } = res.data.view;\n\t\t\t\t\t\tsetGridTitle(title);\n\t\t\t\t\t\tif (targetJsonModel) {\n\t\t\t\t\t\t\tconst gridItems = [];\n\t\t\t\t\t\t\titems.forEach((item) => {\n\t\t\t\t\t\t\t\tconst { jsonFields = [] } = item;\n\t\t\t\t\t\t\t\tjsonFields.forEach((i) => {\n\t\t\t\t\t\t\t\t\tif (showInGrid(i)) {\n\t\t\t\t\t\t\t\t\t\tgridItems.push(i);\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t});\n\t\t\t\t\t\t\t});\n\t\t\t\t\t\t\tsetGridItems(() => [...(gridItems || [])]);\n\t\t\t\t\t\t\treturn;\n\t\t\t\t\t\t}\n\t\t\t\t\t\tconst { fields = [], jsonAttrs = [] } = res.data;\n\t\t\t\t\t\tlet displayFields = {};\n\t\t\t\t\t\tfields.forEach((field) => {\n\t\t\t\t\t\t\tdisplayFields[field.name] = field.title;\n\t\t\t\t\t\t});\n\t\t\t\t\t\tconst allFields = items.map((i) => {\n\t\t\t\t\t\t\treturn { ...i, title: displayFields[i.name] };\n\t\t\t\t\t\t});\n\n\t\t\t\t\t\tif (jsonAttrs && jsonAttrs.length > 0) {\n\t\t\t\t\t\t\tjsonAttrs.forEach((i) => {\n\t\t\t\t\t\t\t\tif (showInGrid(i)) {\n\t\t\t\t\t\t\t\t\tallFields.push(i);\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t});\n\t\t\t\t\t\t}\n\t\t\t\t\t\tsetGridItems(allFields);\n\t\t\t\t\t}\n\t\t\t\t});\n\t\t\t} else {\n\t\t\t\tsetGridItems([]);\n\t\t\t}\n\t\t}\n\t\tgetGrid();\n\t}, [gridView, target, targetJsonModel, id, action]);\n\n\treturn (\n\t\t<div>\n\t\t\t<div className=\"one-to-many-header\">\n\t\t\t\t<span>{translate(title || gridTitle || autoTitle)}</span>\n\t\t\t</div>\n\t\t\t<table>\n\t\t\t\t<tbody className=\"one-to-many-row\">\n\t\t\t\t\t{[...Array(3)].map((e, index) => (\n\t\t\t\t\t\t<tr style={{ display: \"flex\" }} key={`row_${index}`}>\n\t\t\t\t\t\t\t{gridItems.map((item, i) => (\n\t\t\t\t\t\t\t\t<td\n\t\t\t\t\t\t\t\t\tclassName=\"one-to-many-col one-to-many-col-border\"\n\t\t\t\t\t\t\t\t\tkey={`td_${i}`}\n\t\t\t\t\t\t\t\t\tstyle={{ borderBottom: index === 0 ? \"1px solid #ddd\" : \"\" }}\n\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t{index === 0 && item\n\t\t\t\t\t\t\t\t\t\t? translate(item.title || item.autoTitle)\n\t\t\t\t\t\t\t\t\t\t: \"\"}\n\t\t\t\t\t\t\t\t</td>\n\t\t\t\t\t\t\t))}\n\t\t\t\t\t\t</tr>\n\t\t\t\t\t))}\n\t\t\t\t</tbody>\n\t\t\t</table>\n\t\t</div>\n\t);\n}\n\nexport default RelationalFieldGridView;\n","import React from \"react\";\nimport classNames from \"classnames\";\nimport { IDS, FIELD_TYPE, TYPE } from \"../constants\";\nimport RelationalFieldGridView from \"./RelationalFieldGridView\";\nimport { translate } from \"../utils\";\n\n// filter html(tags) compatible attributes\nconst filterInputProps = (props) => {\n\tconst allowed = [\n\t\t\"name\",\n\t\t\"title\",\n\t\t\"defaultValue\",\n\t\t\"placeholder\",\n\t\t\"readOnly\",\n\t\t\"checked\",\n\t\t\"disabled\",\n\t\t\"rows\",\n\t\t\"required\",\n\t];\n\t// return valid object with values\n\treturn allowed.reduce((obj, attr) => {\n\t\tif (props[attr] !== undefined) obj[attr] = props[attr];\n\t\tif (attr === \"required\") {\n\t\t\tobj[attr] = props[attr] === \"true\";\n\t\t}\n\t\treturn obj;\n\t}, {});\n};\n\n// Plain Textbox\nexport const TextInput = (props) => {\n\treturn (\n\t\t<input type=\"text\" autoComplete=\"off\" {...props} className=\"text-input\" />\n\t);\n};\n\n// Multiline Textbox i.e. Textarea\nexport const MultiTextInput = (props) => {\n\treturn <textarea rows={6} {...props} />;\n};\n\n// Blank Spacer to fill up space between two cells of Grid\nexport const Spacer = (props) => <div className=\"spacer\" />;\n\nexport const Separator = (props) => (\n\t<div className=\"spacer\">\n\t\t<hr className=\"separator-field\" />\n\t</div>\n);\n\nexport const Boolean = ({ inputProps, ...props }) => (\n\t<div className=\"boolean-wrapper\">\n\t\t<input {...inputProps} type=\"checkbox\" />\n\t\t<span className=\"boolean-text\" title={translate(props.title || props.name)}>\n\t\t\t{translate(props.title || props.name)}\n\t\t</span>\n\t</div>\n);\n\n// Button component\nexport const Button = ({ title, ...props }) => (\n\t<div className=\"button-container\">\n\t\t<button {...props} className=\"button-view\" title={translate(title)}>\n\t\t\t{translate(title)}\n\t\t</button>\n\t</div>\n);\n\nexport const MenuItem = ({ title, ...props }) => (\n\t<div className=\"menu-item-container\">{translate(title)}</div>\n);\n\nexport const Hilite = ({ color, background, strong }) => {\n\treturn (\n\t\t<div\n\t\t\tclassName={classNames(\n\t\t\t\t`hilite hilite hilite-background-${background} hilite-text-${color}`,\n\t\t\t\t{ \"hilite-strong\": strong }\n\t\t\t)}\n\t\t>\n\t\t\thilite\n\t\t</div>\n\t);\n};\n\n/**\n * Form \"Field\" Component\n * Used For User Inputs\n */\nfunction FieldComponent({ id, attrs }) {\n\t// check for dump field for empty panels\n\tif (id === IDS.dumpField) {\n\t\treturn <div className=\"dump-field\" />;\n\t}\n\n\tconst { name, title, serverType, multiline, type, autoTitle, widget } = attrs;\n\tconst inputProps = filterInputProps(attrs);\n\tlet _type =\n\t\tserverType && serverType !== \"field\" ? serverType.toLowerCase() : type;\n\tconst DefaultWidget = () => (\n\t\t<React.Fragment>\n\t\t\t{\n\t\t\t\t<label\n\t\t\t\t\tclassName=\"widget label\"\n\t\t\t\t\ttitle={translate(title || attrs.autoTitle || name)}\n\t\t\t\t>\n\t\t\t\t\t{translate(title || attrs.autoTitle || name)}\n\t\t\t\t</label>\n\t\t\t}\n\t\t\t{multiline ? (\n\t\t\t\t<MultiTextInput {...inputProps} />\n\t\t\t) : attrs.widget === \"Image\" ? (\n\t\t\t\t<img\n\t\t\t\t\talt={title || attrs.autoTitle || name}\n\t\t\t\t\tsrc=\"./images/not_found.png\"\n\t\t\t\t\tclassName=\"image-widget\"\n\t\t\t\t/>\n\t\t\t) : (\n\t\t\t\t<TextInput\n\t\t\t\t\ttype={serverType === FIELD_TYPE.number ? \"number\" : \"text\"}\n\t\t\t\t\t{...inputProps}\n\t\t\t\t/>\n\t\t\t)}\n\t\t</React.Fragment>\n\t);\n\n\tswitch (_type?.toLowerCase()) {\n\t\tcase FIELD_TYPE.boolean:\n\t\t\treturn (\n\t\t\t\t<Boolean\n\t\t\t\t\ttitle={title || autoTitle}\n\t\t\t\t\tname={name}\n\t\t\t\t\tinputProps={inputProps}\n\t\t\t\t/>\n\t\t\t);\n\t\tcase FIELD_TYPE.spacer:\n\t\t\treturn <Spacer />;\n\t\tcase FIELD_TYPE.hilite:\n\t\t\treturn <Hilite {...attrs} />;\n\t\tcase FIELD_TYPE.separator:\n\t\tcase TYPE.divider:\n\t\t\treturn <Separator />;\n\t\tcase TYPE.menuItem:\n\t\t\treturn <MenuItem title={title} />;\n\t\tcase FIELD_TYPE.button:\n\t\t\treturn <Button {...inputProps} title={title || name} />;\n\t\tcase \"selection\":\n\t\tcase \"label\": {\n\t\t\treturn <span dangerouslySetInnerHTML={{ __html: title }} />;\n\t\t}\n\t\tcase \"panel-dashlet\":\n\t\tcase \"panel-related\":\n\t\tcase \"one-to-many\":\n\t\tcase \"json-one-to-many\":\n\t\t\treturn <RelationalFieldGridView attrs={attrs} id={id} />;\n\t\tcase \"many-to-many\":\n\t\tcase \"json-many-to-many\":\n\t\t\treturn widget !== \"TagSelect\" ? (\n\t\t\t\t<RelationalFieldGridView attrs={attrs} id={id} />\n\t\t\t) : (\n\t\t\t\t<DefaultWidget />\n\t\t\t);\n\t\tdefault:\n\t\t\treturn <DefaultWidget />;\n\t}\n}\n\nexport default FieldComponent;\n","import { TYPE, IDS, ItemTypes } from \"./constants\";\n\nexport const fieldTypes = [\n\t{\n\t\tname: \"Common\",\n\t\tvalue: [\n\t\t\t{\n\t\t\t\tname: \"label\",\n\t\t\t\ttitle: \"Label\",\n\t\t\t\ttype: \"label\",\n\t\t\t\timage: \"label.png\",\n\t\t\t\tid: IDS.createWidgets.field,\n\t\t\t\tserverType: \"label\",\n\t\t\t\tcolSpan: 6,\n\t\t\t},\n\t\t\t{\n\t\t\t\tname: \"button\",\n\t\t\t\ttype: \"button\",\n\t\t\t\ttitle: \"Button\",\n\t\t\t\timage: \"button.png\",\n\t\t\t\tid: IDS.createWidgets.field,\n\t\t\t\tserverType: \"button\",\n\t\t\t\tcolSpan: 6,\n\t\t\t},\n\t\t\t{\n\t\t\t\tname: \"separator\",\n\t\t\t\ttype: \"separator\",\n\t\t\t\ttitle: \"Separator\",\n\t\t\t\timage: \"seperator.png\",\n\t\t\t\tid: IDS.createWidgets.field,\n\t\t\t\tserverType: \"separator\",\n\t\t\t\tcolSpan: 6,\n\t\t\t},\n\t\t\t{\n\t\t\t\tname: \"selection\",\n\t\t\t\ttitle: \"Selection\",\n\t\t\t\ttype: ItemTypes.ITEM,\n\t\t\t\timage: \"dropdown-arrow.png\",\n\t\t\t\tid: IDS.createWidgets.field,\n\t\t\t\tserverType: \"string\",\n\t\t\t\tisSelectionField: true,\n\t\t\t\tcolSpan: 6,\n\t\t\t},\n\t\t],\n\t},\n\t{\n\t\tname: \"Panels\",\n\t\tvalue: [\n\t\t\t{\n\t\t\t\tname: \"panel\",\n\t\t\t\ttype: ItemTypes.CONTAINER,\n\t\t\t\titems: [],\n\t\t\t\timage: \"panel.png\",\n\t\t\t\tid: IDS.createWidgets.panel,\n\t\t\t\tserverType: TYPE.panel,\n\t\t\t\tcols: 12,\n\t\t\t\tlayout: \"grid\",\n\t\t\t\tcolSpan: 12,\n\t\t\t},\n\t\t\t{\n\t\t\t\tname: \"Tabs\",\n\t\t\t\ttype: TYPE.tabs,\n\t\t\t\timage: \"panel_tabs.png\",\n\t\t\t\ttab: true,\n\t\t\t\titems: [],\n\t\t\t\tid: IDS.createWidgets.tabs,\n\t\t\t\tserverType: TYPE.panel,\n\t\t\t\tisNew: true,\n\t\t\t\tcolSpan: 12,\n\t\t\t\ttitle: \"Tabs\",\n\t\t\t\tcurrent: null,\n\t\t\t\tlayout: \"grid\",\n\t\t\t},\n\t\t],\n\t},\n];\n\nexport const modelFields = [\n\t{\n\t\tname: \"Fields\",\n\t\tvalue: [\n\t\t\t{\n\t\t\t\tname: \"string\",\n\t\t\t\ttype: ItemTypes.ITEM,\n\t\t\t\ttitle: \"String\",\n\t\t\t\timage: \"string.png\",\n\t\t\t\tid: IDS.createWidgets.field,\n\t\t\t\tisModelField: true,\n\t\t\t\tserverType: \"string\",\n\t\t\t\tcolSpan: 6,\n\t\t\t},\n\t\t\t{\n\t\t\t\tname: \"integer\",\n\t\t\t\ttype: ItemTypes.ITEM,\n\t\t\t\ttitle: \"Integer\",\n\t\t\t\timage: \"integer.png\",\n\t\t\t\tid: IDS.createWidgets.field,\n\t\t\t\tisModelField: true,\n\t\t\t\tserverType: \"integer\",\n\t\t\t\tcolSpan: 6,\n\t\t\t},\n\t\t\t{\n\t\t\t\tname: \"decimal\",\n\t\t\t\ttype: ItemTypes.ITEM,\n\t\t\t\ttitle: \"Decimal\",\n\t\t\t\timage: \"decimal.png\",\n\t\t\t\tid: IDS.createWidgets.field,\n\t\t\t\tisModelField: true,\n\t\t\t\tserverType: \"decimal\",\n\t\t\t\tcolSpan: 6,\n\t\t\t},\n\t\t\t{\n\t\t\t\tname: \"boolean\",\n\t\t\t\ttype: ItemTypes.ITEM,\n\t\t\t\ttitle: \"Boolean\",\n\t\t\t\timage: \"boolean.png\",\n\t\t\t\tid: IDS.createWidgets.field,\n\t\t\t\tisModelField: true,\n\t\t\t\tserverType: \"boolean\",\n\t\t\t\tcolSpan: 6,\n\t\t\t},\n\t\t\t{\n\t\t\t\tname: \"datetime\",\n\t\t\t\ttype: ItemTypes.ITEM,\n\t\t\t\ttitle: \"Date time\",\n\t\t\t\timage: \"datetime.png\",\n\t\t\t\tid: IDS.createWidgets.field,\n\t\t\t\tisModelField: true,\n\t\t\t\tserverType: \"datetime\",\n\t\t\t\tcolSpan: 6,\n\t\t\t},\n\t\t\t{\n\t\t\t\tname: \"date\",\n\t\t\t\ttype: ItemTypes.ITEM,\n\t\t\t\ttitle: \"Date\",\n\t\t\t\timage: \"date.png\",\n\t\t\t\tid: IDS.createWidgets.field,\n\t\t\t\tisModelField: true,\n\t\t\t\tserverType: \"date\",\n\t\t\t\tcolSpan: 6,\n\t\t\t},\n\t\t\t{\n\t\t\t\tname: \"time\",\n\t\t\t\ttype: ItemTypes.ITEM,\n\t\t\t\ttitle: \"Time\",\n\t\t\t\timage: \"time.png\",\n\t\t\t\tid: IDS.createWidgets.field,\n\t\t\t\tisModelField: true,\n\t\t\t\tserverType: \"time\",\n\t\t\t\tcolSpan: 6,\n\t\t\t},\n\t\t],\n\t},\n\t{\n\t\tname: \"Relational fields\",\n\t\tvalue: [\n\t\t\t{\n\t\t\t\tname: \"manyToOne\",\n\t\t\t\ttype: ItemTypes.ITEM,\n\t\t\t\ttitle: \"Many to one\",\n\t\t\t\timage: \"many-to-one.png\",\n\t\t\t\tid: IDS.createWidgets.field,\n\t\t\t\tisModelField: true,\n\t\t\t\tserverType: \"many-to-one\",\n\t\t\t\tcolSpan: 6,\n\t\t\t},\n\t\t\t{\n\t\t\t\tname: \"oneToMany\",\n\t\t\t\ttype: ItemTypes.ITEM,\n\t\t\t\ttitle: \"One to many\",\n\t\t\t\timage: \"one-to-many.png\",\n\t\t\t\tid: IDS.createWidgets.field,\n\t\t\t\tisModelField: true,\n\t\t\t\tserverType: \"one-to-many\",\n\t\t\t\tcolSpan: 6,\n\t\t\t},\n\t\t\t{\n\t\t\t\tname: \"manyToMany\",\n\t\t\t\ttype: ItemTypes.ITEM,\n\t\t\t\ttitle: \"Many to many\",\n\t\t\t\timage: \"many-to-many.png\",\n\t\t\t\tid: IDS.createWidgets.field,\n\t\t\t\tisModelField: true,\n\t\t\t\tserverType: \"many-to-many\",\n\t\t\t\tcolSpan: 6,\n\t\t\t},\n\t\t],\n\t},\n];\n","import Utils from \"./../utils\";\nimport { MODEL_TYPE, TYPE } from \"./../constants\";\n\nconst exemptedAttrs = [\n\t\"items\",\n\t\"cols\",\n\t\"serverType\",\n\t\"version\",\n\t\"type\",\n\t\"widgetAttrs\",\n\t\"current\",\n\t\"selectionList\",\n\t\"autoTitle\",\n\t\"isModelField\",\n\t\"elements\",\n\t\"relationship\",\n\t\"isDummy\",\n\t\"metaModel\",\n\t\"targetSearch\",\n\t\"layout\",\n\t\"massUpdate\",\n\t\"xPath\",\n\t\"tz\",\n];\n\nexport function getExtensionAttribute(patchList, target, keyName) {\n\tlet extend;\n\tfor (let i = 0; i < patchList.length; i++) {\n\t\tconst { elements = [], attributes: patchAttributes } = patchList[i];\n\t\tconst element = elements[0];\n\t\tif (element.name === \"attribute\" && patchAttributes.target === target) {\n\t\t\tconst attributes = element.attributes || {};\n\t\t\tif (attributes.name === keyName) {\n\t\t\t\textend = { ...patchList[i] };\n\t\t\t\tbreak;\n\t\t\t}\n\t\t}\n\t}\n\treturn extend;\n}\n\nfunction checkTarget(target, string, check) {\n\tconst splitTarget = Utils.exploreTarget(target);\n\tif (check) {\n\t\tconst newTarget = splitTarget[check];\n\t\tif (newTarget && newTarget === string) {\n\t\t\treturn true;\n\t\t}\n\t\treturn false;\n\t}\n\treturn target === string;\n}\n\nexport function isExtensionRemove(patchList, target, check) {\n\tlet flag = false;\n\tfor (let i = 0; i < patchList.length; i++) {\n\t\tconst { attributes, elements = [] } = patchList[i];\n\t\tconst element = elements[0];\n\t\tif (\n\t\t\telement.name === \"replace\" &&\n\t\t\tattributes &&\n\t\t\tcheckTarget(attributes.target, target, check)\n\t\t) {\n\t\t\tflag = true;\n\t\t\tbreak;\n\t\t}\n\t}\n\treturn flag;\n}\n\nexport function isExtensionMove(patchList, widget, parentWidget) {\n\tlet flag = false;\n\tfor (let i = 0; i < patchList.length; i++) {\n\t\tconst { elements = [] } = patchList[i];\n\t\tconst element = elements[0];\n\t\tlet sourceName = `/${Utils.getWidgetType(widget)}[@name='${widget.name}']`;\n\t\tif (parentWidget && parentWidget.name) {\n\t\t\tsourceName = `//${Utils.getWidgetType(parentWidget)}[@name='${\n\t\t\t\tparentWidget.name\n\t\t\t}']${sourceName}`;\n\t\t}\n\t\tif (\n\t\t\telement.name === \"move\" &&\n\t\t\telement.attributes &&\n\t\t\telement.attributes.source === sourceName\n\t\t) {\n\t\t\tflag = true;\n\t\t\tbreak;\n\t\t}\n\t}\n\treturn flag;\n}\n\nfunction getWidgetAttrsObject(widget, modelType = MODEL_TYPE.BASE) {\n\treturn getWidgetObject(widget, [], null, modelType);\n}\n\nexport function getExtendJson2({\n\ttarget,\n\ttype,\n\tposition,\n\tsource,\n\tname,\n\tvalue,\n\twidgetAttrs,\n\titemSource,\n\t...rest\n}) {\n\tconst attributes = { target };\n\tlet elements = [];\n\tif (widgetAttrs && ![\"replace\", \"attribute\", \"move\"].includes(type)) {\n\t\tif (Array.isArray(widgetAttrs)) {\n\t\t\telements = widgetAttrs\n\t\t\t\t.map((widget) => {\n\t\t\t\t\treturn getWidgetAttrsObject(widget);\n\t\t\t\t})\n\t\t\t\t.filter((e) => e);\n\t\t} else {\n\t\t\telements.push(getWidgetAttrsObject(widgetAttrs));\n\t\t}\n\t}\n\tif (elements.length || [\"replace\", \"attribute\", \"move\"].includes(type)) {\n\t\tconst object = {\n\t\t\tattributes,\n\t\t\ttype: \"element\",\n\t\t\tname: \"extend\",\n\t\t\telements: [\n\t\t\t\t{\n\t\t\t\t\ttype: \"element\",\n\t\t\t\t\tname: type,\n\t\t\t\t\tattributes: {\n\t\t\t\t\t\tposition,\n\t\t\t\t\t\tsource,\n\t\t\t\t\t\tname,\n\t\t\t\t\t\tvalue,\n\t\t\t\t\t},\n\t\t\t\t\telements,\n\t\t\t\t},\n\t\t\t],\n\t\t};\n\t\treturn JSON.parse(JSON.stringify(object));\n\t}\n\treturn;\n}\n\nexport function getWidgetObject(widget, other = [], view, modelType) {\n\tconst { id, image, elements = [], ...attributes } = widget;\n\tconst uiFields = [\n\t\t\"panel\",\n\t\t\"panel-related\",\n\t\t\"panel-dashlet\",\n\t\t\"panel-tabs\",\n\t\t\"panel-stack\",\n\t\t\"panel-include\",\n\t\t\"button\",\n\t\t\"label\",\n\t\t\"spacer\",\n\t\t\"separator\",\n\t\t\"menu\",\n\t\t\"item\",\n\t\t\"toolbar\",\n\t\t\"menubar\",\n\t\t\"divider\",\n\t];\n\tlet exempt = [...exemptedAttrs];\n\tlet field = uiFields.includes(attributes.type) ? attributes.type : \"field\";\n\tfield = uiFields.includes(attributes.serverType)\n\t\t? attributes.serverType\n\t\t: field;\n\tfield = widget.tab ? \"panel-tabs\" : field;\n\tif (attributes.type === TYPE.panelInclude) {\n\t\texempt = [...exempt, \"title\", \"colSpan\"];\n\t}\n\tif (field === TYPE.tabs) {\n\t\texempt = [...exempt, \"tab\", \"title\"];\n\t}\n\tif (field === \"spacer\") {\n\t\texempt = [...exempt, \"title\", \"isDummy\"];\n\t}\n\tif (field === TYPE.panelInclude) {\n\t\texempt = [...exempt, \"module\", \"name\"];\n\t}\n\tif ([TYPE.menu, TYPE.menuItem, TYPE.toolbar, TYPE.menubar].includes(field)) {\n\t\texempt = [...exempt, \"colSpan\"];\n\t}\n\tif ([TYPE.toolbar, TYPE.menubar].includes(field)) {\n\t\texempt = [...exempt, \"colSpan\", \"name\", \"title\"];\n\t}\n\tif ([TYPE.divider].includes(field)) {\n\t\texempt = [...exempt, \"colSpan\", \"title\"];\n\t}\n\tlet object = {};\n\tobject = {\n\t\tattributes: {\n\t\t\t...Utils.getWidgetAttrs(attributes, exempt, modelType),\n\t\t},\n\t\ttype: \"element\",\n\t\tname: field,\n\t\telements: [...other, ...elements],\n\t};\n\treturn object;\n}\n\nexport function generateView(widgets, items, modelType) {\n\tlet view = {};\n\tlet elements = [];\n\tif (items.length) {\n\t\titems.forEach((item) => {\n\t\t\tconst widget = widgets[item];\n\t\t\tlet subViews = [];\n\t\t\tif (widget) {\n\t\t\t\tif (widget.items && widget.items.length) {\n\t\t\t\t\tsubViews = generateView(widgets, widget.items, modelType);\n\t\t\t\t}\n\t\t\t\telements.push({\n\t\t\t\t\t...getWidgetObject(widget, subViews, view, modelType),\n\t\t\t\t});\n\t\t\t}\n\t\t});\n\t}\n\treturn elements;\n}\n","/** Set field types */\nexport const StringField = ({ ...props }) => ({\n\ttype: \"string\",\n\t...props,\n});\n\nexport const ObjectSelectionField = ({ ...props }) => ({\n\ttype: \"objectSelection\",\n\t...props,\n});\n\nexport const IntegerField = ({ ...props }) => ({\n\ttype: \"integer\",\n\t...props,\n});\n\nexport const SelectField = ({ ...props }) => ({\n\ttype: \"select\",\n\tvalueField: \"name\",\n\t...props,\n});\n\nexport const StaticSelectField = ({ ...props }) => ({\n\ttype: \"staticSelect\",\n\t...props,\n});\n\nexport const BooleanField = ({ ...props }) => ({\n\ttype: \"boolean\",\n\t...props,\n});\n\nexport default {\n\tStringField,\n\tObjectSelectionField,\n\tIntegerField,\n\tSelectField,\n\tStaticSelectField,\n\tBooleanField,\n};\n","import React from \"react\";\nimport classNames from \"classnames\";\nimport Tooltip from \"@material-ui/core/Tooltip\";\nimport AddIcon from \"@material-ui/icons/Add\";\n\nimport { GridContainer, useGridWidget } from \"./Grid\";\nimport { translate } from \"../utils\";\nimport { useStoreState } from \"../store/context\";\nimport { MODEL_TYPE } from \"../constants\";\n\nconst panelAttrs = { cols: 1 };\n\n/**\n * Panel Component\n * Used As Container to group Field Component like form group\n */\nfunction TabPanelComponent(props) {\n\tconst WidgetComponent = useGridWidget();\n\tconst { modelType } = useStoreState();\n\tconst { id, attrs, isDragging, isTab = false, addTabPanel, ...rest } = props;\n\tconst { title, items = [] } = attrs;\n\tlet { current } = attrs;\n\tconst tabs = [...items.slice()].reduce(\n\t\t(all, tab) => all.concat([tab, 0]),\n\t\t[0]\n\t);\n\t// reuse common tab attributes\n\tconst getTabAttributes = (id, index) => ({\n\t\tkey: !id ? `${id}${index}` : id,\n\t\tid,\n\t\tmeta: {\n\t\t\thorizontal: true,\n\t\t},\n\t\tindex,\n\t\tpanelId: props.id,\n\t\tpanelColumns: attrs.cols,\n\t\ttabId: props.id,\n\t});\n\tlet activeTabIndex = items.indexOf(current);\n\t// if active tab index not found, take first element as active one\n\tif (activeTabIndex === -1) {\n\t\tactiveTabIndex = 0;\n\t\tcurrent = items.length ? items[0] : 0;\n\t}\n\n\treturn (\n\t\t<React.Fragment>\n\t\t\t{title && (\n\t\t\t\t<div\n\t\t\t\t\tclassName={classNames(\"panel-header panel-tab-header\", {\n\t\t\t\t\t\tinline: isTab,\n\t\t\t\t\t})}\n\t\t\t\t>\n\t\t\t\t\t{title}\n\t\t\t\t</div>\n\t\t\t)}\n\t\t\t{!isTab && (\n\t\t\t\t<GridContainer className={\"panel-body\"} attrs={panelAttrs}>\n\t\t\t\t\t<div className={classNames(\"tabs\")}>\n\t\t\t\t\t\t{tabs.map(\n\t\t\t\t\t\t\t(tab, i) =>\n\t\t\t\t\t\t\t\tWidgetComponent && (\n\t\t\t\t\t\t\t\t\t<WidgetComponent\n\t\t\t\t\t\t\t\t\t\t{...rest}\n\t\t\t\t\t\t\t\t\t\t{...getTabAttributes(tab, i)}\n\t\t\t\t\t\t\t\t\t\tisTab={true}\n\t\t\t\t\t\t\t\t\t\tclassName={current === tab ? \"active-tab\" : \"\"}\n\t\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t)\n\t\t\t\t\t\t)}\n\t\t\t\t\t\t{!(\n\t\t\t\t\t\t\tmodelType === MODEL_TYPE.BASE && props._type !== \"customField\"\n\t\t\t\t\t\t) && (\n\t\t\t\t\t\t\t<div style={{ display: \"flex\", alignItems: \"center\" }}>\n\t\t\t\t\t\t\t\t<Tooltip title={translate(\"Add tab\")} arrow>\n\t\t\t\t\t\t\t\t\t<AddIcon onClick={() => addTabPanel({ attrs, id })} />\n\t\t\t\t\t\t\t\t</Tooltip>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t)}\n\t\t\t\t\t</div>\n\t\t\t\t\t{items.length > 0 && WidgetComponent && (\n\t\t\t\t\t\t<WidgetComponent\n\t\t\t\t\t\t\t{...rest}\n\t\t\t\t\t\t\t{...getTabAttributes(current, activeTabIndex)}\n\t\t\t\t\t\t/>\n\t\t\t\t\t)}\n\t\t\t\t</GridContainer>\n\t\t\t)}\n\t\t</React.Fragment>\n\t);\n}\n\n//panel tabs-panel\nexport default TabPanelComponent;\n"],"sourceRoot":""}