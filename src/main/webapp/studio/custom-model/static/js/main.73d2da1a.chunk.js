(this["webpackJsonpaxelor-studio"]=this["webpackJsonpaxelor-studio"]||[]).push([[0],{1:function(e,t,a){"use strict";var n=a(9),i=a(4),r=a(10),o=["NavSelect","CheckboxSelect","RadioSelect","MultiSelect","ImageSelect"],l={boolean:["InlineCheckbox","Toggle","BooleanSelect","BooleanRadio","BooleanSwitch"].concat(o),integer:["RelativeTime","Duration","Progress","SelectProgress"].concat(o),string:["Email","Url","Password","Html","CodeEditor","ImageLine"].concat(o),text:["Html","CodeEditor"].concat(o),"many-to-one":["SuggestBox","Image","binary-link"],"json-many-to-one":["SuggestBox","Image","binary-link"],"one-to-one":["SuggestBox","Image"],"json-one-to-one":["SuggestBox","Image"],"many-to-many":["TagSelect"],"json-many-to-many":["TagSelect"],binary:["Image","BinaryLink"].concat(o),date:[].concat(o),datetime:[].concat(o),time:[].concat(o),button:["Button","InfoButton","ToolButton"],decimal:["RelativeTime","Duration","Progress","SelectProgress"].concat(o)},c=a(2);a.d(t,"J",(function(){return m})),a.d(t,"hb",(function(){return p})),a.d(t,"V",(function(){return b})),a.d(t,"n",(function(){return v})),a.d(t,"d",(function(){return g})),a.d(t,"h",(function(){return h})),a.d(t,"gb",(function(){return y})),a.d(t,"l",(function(){return O})),a.d(t,"db",(function(){return j})),a.d(t,"t",(function(){return w})),a.d(t,"Y",(function(){return x})),a.d(t,"U",(function(){return k})),a.d(t,"mb",(function(){return S})),a.d(t,"W",(function(){return T})),a.d(t,"ob",(function(){return C})),a.d(t,"K",(function(){return E})),a.d(t,"L",(function(){return M})),a.d(t,"H",(function(){return F})),a.d(t,"E",(function(){return I})),a.d(t,"D",(function(){return N})),a.d(t,"m",(function(){return A})),a.d(t,"O",(function(){return L})),a.d(t,"X",(function(){return W})),a.d(t,"jb",(function(){return q})),a.d(t,"kb",(function(){return V})),a.d(t,"lb",(function(){return B})),a.d(t,"R",(function(){return P})),a.d(t,"b",(function(){return _})),a.d(t,"eb",(function(){return D})),a.d(t,"fb",(function(){return U})),a.d(t,"r",(function(){return J})),a.d(t,"q",(function(){return R})),a.d(t,"S",(function(){return z})),a.d(t,"j",(function(){return H})),a.d(t,"P",(function(){return X})),a.d(t,"u",(function(){return G})),a.d(t,"nb",(function(){return Z})),a.d(t,"Z",(function(){return Y})),a.d(t,"v",(function(){return Q})),a.d(t,"w",(function(){return K})),a.d(t,"T",(function(){return $})),a.d(t,"Q",(function(){return ee})),a.d(t,"z",(function(){return te})),a.d(t,"ib",(function(){return ae})),a.d(t,"M",(function(){return ne})),a.d(t,"k",(function(){return ie})),a.d(t,"o",(function(){return re})),a.d(t,"g",(function(){return oe})),a.d(t,"C",(function(){return le})),a.d(t,"B",(function(){return ce})),a.d(t,"G",(function(){return se})),a.d(t,"F",(function(){return de})),a.d(t,"ab",(function(){return ue})),a.d(t,"f",(function(){return fe})),a.d(t,"x",(function(){return me})),a.d(t,"s",(function(){return pe})),a.d(t,"a",(function(){return be})),a.d(t,"p",(function(){return ve})),a.d(t,"e",(function(){return ge})),a.d(t,"N",(function(){return he})),a.d(t,"A",(function(){return ye})),a.d(t,"y",(function(){return Oe})),a.d(t,"bb",(function(){return je})),a.d(t,"I",(function(){return we})),a.d(t,"i",(function(){return xe})),a.d(t,"c",(function(){return ke})),a.d(t,"cb",(function(){return Se}));var s={name:"canCollapse",title:"Can Collapse",type:"boolean",parentField:"widgetAttrs",modelType:c.i.CUSTOM,dependModelType:c.i.CUSTOM},d={name:"collapseIf",title:"Collapse If",type:"string",parentField:"widgetAttrs",modelType:c.i.CUSTOM,dependModelType:c.i.CUSTOM},u={name:"isGenerateMenu",title:"Generate menu",type:"boolean"},f={name:"tab",type:"boolean",parentField:"widgetAttrs",modelType:c.i.CUSTOM,dependModelType:c.i.CUSTOM},m=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=Object.assign({},e);return Object(r.f)(Object(i.a)({name:"name",title:"Name",required:!0,readOnly:!0,regex:/^[a-z]/i,regexErrorMessage:"First Letter of the name should always be alphabet",unique:!0,isDisabled:function(e){var t=e.properties,a=(e.metaFieldStore,e.editWidgetType),n=e.modelType,i=e.isStudioLite;return n===c.i.BASE&&"customField"!==a||!(n!==c.i.CUSTOM||!t||!t.id&&!i||"form"!==t.type)},requiredFor:["button","label","panel","string","panel-dashlet","separator","panel-stack","integer","date","time","datetime","decimal","one-to-many","many-to-many","boolean","label","viewer","editor","one-to-one","spacer","long","hilite"]},t))},p=Object(r.f)({name:"type",column:"type_name",title:"Type",required:!0,selection:"json.field.type",readOnly:"true",formatter:function(e,t){if(t.tab)return"panel-tabs";var a=e.indexOf("entity");return-1!==a?e.substring(0,a):e}}),b=Object(r.e)({name:"type",title:"Type",column:"type_name",required:!0,data:["string","integer"],defaultOption:!1,disableClearable:!0,isDisabled:function(e){e.properties,e.metaFieldStore;var t=e.editWidgetType;if(e.modelType===c.i.BASE&&"customField"!==t)return!0}}),v=Object(r.e)({name:"dummyType",title:"Type",data:Object(n.a)(c.c)}),g=Object(r.a)(s),h=Object(r.f)(d),y=Object(r.f)({name:"title",title:"Title",translationView:!1,requiredWhen:[s,d,f]}),O=Object(r.f)({name:"defaultValue",dependModelType:c.i.CUSTOM,title:"Default value"}),j=Object(r.c)({name:"studioApp",title:"App name",ref:"com.axelor.studio.db.StudioApp",dependModelType:c.i.CUSTOM}),w=Object(r.f)({name:"help",title:"Help",dependModelType:c.i.CUSTOM}),x=Object(r.b)({name:"sequence",title:"Sequence",dependModelType:c.i.CUSTOM}),k=Object(r.c)({name:"roles",title:"Roles",ref:"com.axelor.auth.db.Role",multiple:!0,dependModelType:c.i.CUSTOM}),S={name:"valueExpr",title:"Value expr",type:"text",dependModelType:c.i.CUSTOM},T=Object(r.d)({name:"selection",title:"Selection",ref:"com.axelor.meta.db.MetaSelect",valueField:"name",dependModelType:c.i.CUSTOM,type:"selection"}),C=Object(r.e)({name:"widget",data:l,title:"Widget",dependModelType:c.i.CUSTOM}),E=Object(r.d)({name:"onChange",ref:"com.axelor.meta.db.MetaAction",dependModelType:c.i.CUSTOM,title:"On change",multiple:!0,canAddNew:!0,commaSeparated:!0}),M=Object(r.d)({title:"On new",name:"onNew",ref:"com.axelor.meta.db.MetaAction",dependModelType:c.i.CUSTOM,multiple:!0,commaSeparated:!0,canAddNew:!0}),F=(Object(r.d)({title:"On load",name:"onLoad",ref:"com.axelor.meta.db.MetaAction",multiple:!0,commaSeparated:!0,canAddNew:!0}),Object(r.d)({name:"onSave",ref:"com.axelor.meta.db.MetaAction",multiple:!0,commaSeparated:!0,title:"On save",canAddNew:!0}),Object(r.b)({name:"minSize",title:"Min",dependModelType:c.i.CUSTOM})),I=Object(r.b)({name:"maxSize",title:"Max",dependModelType:c.i.CUSTOM}),N=Object(r.a)({name:"isJsonRelationalField",title:"Is json relational field",dependModelType:c.i.CUSTOM,getValue:function(e){var t=e.type;if(t&&0===t.indexOf("json"))return!0;return!1},change:function(e,t){var a=t.type;if(!0===e){if(!(0===a.indexOf("json"))){var n="json-".concat(a);return{type:n,serverType:n}}}else if(!1===e){if(0===a.indexOf("json")){var i=a.substring("json-".length);return{type:i,serverType:i}}}return{}}}),A=Object(r.f)({name:"domain",title:"Domain"}),L=Object(r.f)({name:"prompt",title:"Prompt",parentField:"widgetAttrs"}),W=Object(r.f)({name:"selection-in",dependModelType:c.i.BASE,showInCustomField:!1,title:"Selection in"}),q=Object(r.f)({name:"value",title:"Value",dependModelType:c.i.BASE,showInCustomField:!1}),V=Object(r.f)({name:"value:add",title:"Value:add",dependModelType:c.i.BASE,showInCustomField:!1}),B=Object(r.f)({name:"value:del",title:"Value:del",dependModelType:c.i.BASE,showInCustomField:!1}),P=Object(r.a)({name:"refresh",title:"Refresh",dependModelType:c.i.BASE,showInCustomField:!1}),_=Object(r.a)({name:"active",title:"Active",dependModelType:c.i.BASE,showInCustomField:!1,shouldRender:function(e){return e.xPath&&e.xPath.includes("panel-tabs")}}),D=Object(r.c)({name:"targetJsonModel",required:!0,ref:"com.axelor.meta.db.MetaJsonModel",displayField:"title",dependModelType:c.i.CUSTOM,title:"Target json model"}),U=Object(r.d)({name:"targetModel",title:"Target model",required:!0,ref:"com.axelor.meta.db.MetaModel",valueField:"fullName",canAddNew:!1,isDisabled:function(e,t,a){return"customField"!==t&&"field"!==e.serverType&&a!==c.i.CUSTOM}}),J=Object(r.d)({name:"gridView",title:"Grid view",ref:"com.axelor.meta.db.MetaView",valueField:"name",dependModelType:c.i.CUSTOM,needsTargetModel:[c.o.OneToMany,c.o.ManyToMany,c.o.ManyToOne]}),R=Object(r.d)({name:"formView",title:"Form view",ref:"com.axelor.meta.db.MetaView",valueField:"name",dependModelType:c.i.CUSTOM,needsTargetModel:[c.o.OneToMany,c.o.ManyToMany,c.o.ManyToOne]}),z=Object(r.a)({name:"required",title:"Required",defaultValue:"false",isDisabled:function(e){var t=e.properties,a=(e.metaFieldStore,e.editWidgetType);return!(e.modelType!==c.i.BASE||"customField"===a||!t.requiredIf||!t.requiredIf.length)}}),H=Object(r.b)({name:"columnSequence",title:"Column sequence",dependModelType:c.i.CUSTOM}),X=Object(r.a)({name:"readonly",title:"Readonly",isDisabled:function(e){var t=e.properties,a=(e.metaFieldStore,e.editWidgetType);return!(e.modelType!==c.i.BASE||"customField"===a||!t.readonlyIf||!t.readonlyIf.length)}}),G=Object(r.a)({name:"hidden",title:"Hidden",isDisabled:function(e){var t=e.properties;return!(!t.hideIf||!t.hideIf.length)}}),Z=Object(r.a)({name:"visibleInGrid",title:"Visible in grid",dependModelType:c.i.CUSTOM}),Y=Object(r.f)({name:"showIf",title:"Show if",dependModelType:c.i.CUSTOM}),Q=Object(r.f)({name:"hideIf",title:"Hide if",isDisabled:function(e){return!!e.properties.hidden}}),K=Object(r.f)({name:"if",title:"If",dependModelType:c.i.CUSTOM}),$=Object(r.f)({name:"requiredIf",title:"Required if",isDisabled:function(e){var t=e.properties,a=(e.metaFieldStore,e.editWidgetType);return!(e.modelType!==c.i.BASE||"customField"===a||!t.required)}}),ee=Object(r.f)({name:"readonlyIf",title:"Readonly if",isDisabled:function(e){var t=e.properties,a=(e.metaFieldStore,e.editWidgetType);return!(e.modelType!==c.i.BASE||"customField"===a||!t.readonly)}}),te=Object(r.f)({name:"includeIf",title:"Include if",dependModelType:c.i.CUSTOM}),ae=Object(r.f)({name:"validIf",title:"Valid if",parentField:"widgetAttrs",modelType:c.i.CUSTOM,dependModelType:c.i.CUSTOM}),ne=Object(r.d)({name:"contextField",title:"Only if",ref:"com.axelor.meta.db.MetaField",valueField:"name",type:"onlyIf",_domain:"self.name not in ('createdBy', 'updatedBy') and self.relationship = 'ManyToOne' and self.metaModel.fullName = :model",dependModelType:c.i.BASE,showInBaseView:!1}),ie=(Object(r.f)({name:"canSave",dependModelType:c.i.CUSTOM,title:"Can save"}),Object(r.f)({name:"css",title:"Css",parentField:"widgetAttrs",modelType:c.i.CUSTOM})),re=Object(r.a)({name:"editable",title:"Editable",dependModelType:c.i.CUSTOM}),oe=Object(r.e)({name:"colSpan",title:"Colspan",parentField:"widgetAttrs",data:[""].concat(Object(n.a)(Array(12).fill().map((function(e,t){return(t+1).toString()})))),modelType:c.i.CUSTOM,dependModelType:c.i.CUSTOM,getOptionLabel:function(e){return e?e.toString():""},isDisabled:function(e){e.properties;var t=e.parentPanel;return!(!t||![c.l.toolbar,c.l.menubar].includes(t.serverType))}}),le=Object(r.e)({name:"itemSpan",title:"Itemspan",parentField:"widgetAttrs",data:[""].concat(Object(n.a)(Array(12).fill().map((function(e,t){return(t+1).toString()})))),modelType:c.i.CUSTOM,dependModelType:c.i.CUSTOM,getOptionLabel:function(e){return e?e.toString():""},isDisabled:function(e){e.properties;var t=e.parentPanel;return!(!t||![c.l.toolbar,c.l.menubar].includes(t.serverType))}}),ce=Object(r.a)(u),se=Object(r.f)({name:"menuBuilderTitle",title:"Menu title",depends:"isGenerateMenu",dependValue:!0,requiredWhen:[u]}),de=Object(r.c)({name:"menuBuilderParent",ref:"com.axelor.meta.db.MetaMenu",title:"Parent",depends:"isGenerateMenu",dependValue:!0,valueField:"id",displayField:"title",shouldFetchInStart:!0,limit:null,getOptionLabel:function(e,t){return function e(t,a){var n=t.title||"";if(t.parent){var i=a.find((function(e){return e.id===t.parent.id}));if(i){var r=e(i,a&&a.filter((function(e){return e.id!==i.id}))||[]);r&&(n="".concat(r," > ").concat(n))}}return n}(e,t)}}),ue=Object(r.a)({name:"showTitle",parentField:"widgetAttrs",defaultValue:!0,modelType:c.i.CUSTOM,dependModelType:c.i.CUSTOM,title:"Show title"}),fe=Object(r.a)({name:"canSearch",dependModelType:c.i.CUSTOM,title:"Can search"}),me=Object(r.f)({name:"if-module",title:"If-module",dependModelType:c.i.CUSTOM}),pe=Object(r.f)({name:"height",dependModelType:c.i.CUSTOM}),be=Object(r.d)({name:"action",title:"Action",ref:"com.axelor.meta.db.MetaAction",requiredFor:["panel-dashlet","item"],dependModelType:c.i.CUSTOM,multiple:!0,commaSeparated:!0,canAddNew:!0}),ve=Object(r.f)({name:"field",title:"Field",required:!0,requiredFor:["panel-related"],dependModelType:c.i.CUSTOM}),ge=Object(r.a)({name:"canMove",dependModelType:c.i.CUSTOM,title:"Can move"}),he=Object(r.f)({name:"orderBy",dependModelType:c.i.CUSTOM,title:"Order by"}),ye=Object(r.d)({name:"view",title:"View",ref:"com.axelor.meta.db.MetaView",valueField:"name",requiredFor:["panel-include"],dependModelType:c.i.CUSTOM}),Oe=Object(r.f)({name:"from",title:"From"}),je=Object(r.a)({name:"sidebar",title:"Sidebar",parentField:"widgetAttrs",modelType:c.i.CUSTOM,dependModelType:c.i.CUSTOM,showInCustomField:!1,isDisabled:function(e){var t=e.mainItems,a=e.id;return 1===t.length&&t[0]===a},isHidden:function(e){return!!e.parentPanel}}),we=(Object(r.a)({name:"password",title:"Password"}),Object(r.d)({name:"model",title:"Model",required:!0,ref:"com.axelor.meta.db.MetaModel",valueField:"fullName"})),xe=Object(r.e)({name:"color",title:"Color",data:["default","primary","warning","success","danger","info"]}),ke=Object(r.e)({name:"background",title:"Background",data:["default","primary","warning","success","danger","info"]}),Se=Object(r.a)({name:"strong",title:"Strong",dependModelType:c.i.BASE});Image},10:function(e,t,a){"use strict";a.d(t,"f",(function(){return i})),a.d(t,"c",(function(){return r})),a.d(t,"b",(function(){return o})),a.d(t,"d",(function(){return l})),a.d(t,"e",(function(){return c})),a.d(t,"a",(function(){return s}));var n=a(4),i=function(e){var t=Object.assign({},e);return Object(n.a)({type:"string"},t)},r=function(e){var t=Object.assign({},e);return Object(n.a)({type:"objectSelection"},t)},o=function(e){var t=Object.assign({},e);return Object(n.a)({type:"integer"},t)},l=function(e){var t=Object.assign({},e);return Object(n.a)({type:"select",valueField:"name"},t)},c=function(e){var t=Object.assign({},e);return Object(n.a)({type:"staticSelect"},t)},s=function(e){var t=Object.assign({},e);return Object(n.a)({type:"boolean"},t)}},103:function(e,t,a){"use strict";t.a=["fa-500px","fa-address-book","fa-address-book-o","fa-address-card","fa-address-card-o","fa-adjust","fa-adn","fa-align-center","fa-align-justify","fa-align-left","fa-align-right","fa-amazon","fa-ambulance","fa-american-sign-language-interpreting","fa-anchor","fa-android","fa-angellist","fa-angle-double-down","fa-angle-double-left","fa-angle-double-right","fa-angle-double-up","fa-angle-down","fa-angle-left","fa-angle-right","fa-angle-up","fa-apple","fa-archive","fa-area-chart","fa-arrow-circle-down","fa-arrow-circle-left","fa-arrow-circle-o-down","fa-arrow-circle-o-left","fa-arrow-circle-o-right","fa-arrow-circle-o-up","fa-arrow-circle-right","fa-arrow-circle-up","fa-arrow-down","fa-arrow-left","fa-arrow-right","fa-arrow-up","fa-arrows","fa-arrows-alt","fa-arrows-h","fa-arrows-v","fa-asl-interpreting","fa-assistive-listening-systems","fa-asterisk","fa-at","fa-audio-description","fa-automobile","fa-backward","fa-balance-scale","fa-ban","fa-bandcamp","fa-bank","fa-bar-chart","fa-bar-chart-o","fa-barcode","fa-bars","fa-bath","fa-bathtub","fa-battery","fa-battery-0","fa-battery-1","fa-battery-2","fa-battery-3","fa-battery-4","fa-battery-empty","fa-battery-full","fa-battery-half","fa-battery-quarter","fa-battery-three-quarters","fa-bed","fa-beer","fa-behance","fa-behance-square","fa-bell","fa-bell-o","fa-bell-slash","fa-bell-slash-o","fa-bicycle","fa-binoculars","fa-birthday-cake","fa-bitbucket","fa-bitbucket-square","fa-bitcoin","fa-black-tie","fa-blind","fa-bluetooth","fa-bluetooth-b","fa-bold","fa-bolt","fa-bomb","fa-book","fa-bookmark","fa-bookmark-o","fa-braille","fa-briefcase","fa-btc","fa-bug","fa-building","fa-building-o","fa-bullhorn","fa-bullseye","fa-bus","fa-buysellads","fa-cab","fa-calculator","fa-calendar","fa-calendar-check-o","fa-calendar-minus-o","fa-calendar-o","fa-calendar-plus-o","fa-calendar-times-o","fa-camera","fa-camera-retro","fa-car","fa-caret-down","fa-caret-left","fa-caret-right","fa-caret-square-o-down","fa-caret-square-o-left","fa-caret-square-o-right","fa-caret-square-o-up","fa-caret-up","fa-cart-arrow-down","fa-cart-plus","fa-cc","fa-cc-amex","fa-cc-diners-club","fa-cc-discover","fa-cc-jcb","fa-cc-mastercard","fa-cc-paypal","fa-cc-stripe","fa-cc-visa","fa-certificate","fa-chain","fa-chain-broken","fa-check","fa-check-circle","fa-check-circle-o","fa-check-square","fa-check-square-o","fa-chevron-circle-down","fa-chevron-circle-left","fa-chevron-circle-right","fa-chevron-circle-up","fa-chevron-down","fa-chevron-left","fa-chevron-right","fa-chevron-up","fa-child","fa-chrome","fa-circle","fa-circle-o","fa-circle-o-notch","fa-circle-thin","fa-clipboard","fa-clock-o","fa-clone","fa-close","fa-cloud","fa-cloud-download","fa-cloud-upload","fa-cny","fa-code","fa-code-fork","fa-codepen","fa-codiepie","fa-coffee","fa-cog","fa-cogs","fa-columns","fa-comment","fa-comment-o","fa-commenting","fa-commenting-o","fa-comments","fa-comments-o","fa-compass","fa-compress","fa-connectdevelop","fa-contao","fa-copy","fa-copyright","fa-creative-commons","fa-credit-card","fa-credit-card-alt","fa-crop","fa-crosshairs","fa-css3","fa-cube","fa-cubes","fa-cut","fa-cutlery","fa-dashboard","fa-dashcube","fa-database","fa-deaf","fa-deafness","fa-dedent","fa-delicious","fa-desktop","fa-deviantart","fa-diamond","fa-digg","fa-dollar","fa-dot-circle-o","fa-download","fa-dribbble","fa-drivers-license","fa-drivers-license-o","fa-dropbox","fa-drupal","fa-edge","fa-edit","fa-eercast","fa-eject","fa-ellipsis-h","fa-ellipsis-v","fa-empire","fa-envelope","fa-envelope-o","fa-envelope-open","fa-envelope-open-o","fa-envelope-square","fa-envira","fa-eraser","fa-etsy","fa-eur","fa-euro","fa-exchange","fa-exclamation","fa-exclamation-circle","fa-exclamation-triangle","fa-expand","fa-expeditedssl","fa-external-link","fa-external-link-square","fa-eye","fa-eye-slash","fa-eyedropper","fa-fa","fa-facebook","fa-facebook-f","fa-facebook-official","fa-facebook-square","fa-fast-backward","fa-fast-forward","fa-fax","fa-feed","fa-female","fa-fighter-jet","fa-file","fa-file-archive-o","fa-file-audio-o","fa-file-code-o","fa-file-excel-o","fa-file-image-o","fa-file-movie-o","fa-file-o","fa-file-pdf-o","fa-file-photo-o","fa-file-picture-o","fa-file-powerpoint-o","fa-file-sound-o","fa-file-text","fa-file-text-o","fa-file-video-o","fa-file-word-o","fa-file-zip-o","fa-files-o","fa-film","fa-filter","fa-fire","fa-fire-extinguisher","fa-firefox","fa-first-order","fa-flag","fa-flag-checkered","fa-flag-o","fa-flash","fa-flask","fa-flickr","fa-floppy-o","fa-folder","fa-folder-o","fa-folder-open","fa-folder-open-o","fa-font","fa-font-awesome","fa-fonticons","fa-fort-awesome","fa-forumbee","fa-forward","fa-foursquare","fa-free-code-camp","fa-frown-o","fa-futbol-o","fa-gamepad","fa-gavel","fa-gbp","fa-ge","fa-gear","fa-gears","fa-genderless","fa-get-pocket","fa-gg","fa-gg-circle","fa-gift","fa-git","fa-git-square","fa-github","fa-github-alt","fa-github-square","fa-gitlab","fa-gittip","fa-glass","fa-glide","fa-glide-g","fa-globe","fa-google","fa-google-plus","fa-google-plus-circle","fa-google-plus-official","fa-google-plus-square","fa-google-wallet","fa-graduation-cap","fa-gratipay","fa-grav","fa-group","fa-h-square","fa-hacker-news","fa-hand-grab-o","fa-hand-lizard-o","fa-hand-o-down","fa-hand-o-left","fa-hand-o-right","fa-hand-o-up","fa-hand-paper-o","fa-hand-peace-o","fa-hand-pointer-o","fa-hand-rock-o","fa-hand-scissors-o","fa-hand-spock-o","fa-hand-stop-o","fa-handshake-o","fa-hard-of-hearing","fa-hashtag","fa-hdd-o","fa-header","fa-headphones","fa-heart","fa-heart-o","fa-heartbeat","fa-history","fa-home","fa-hospital-o","fa-hotel","fa-hourglass","fa-hourglass-1","fa-hourglass-2","fa-hourglass-3","fa-hourglass-end","fa-hourglass-half","fa-hourglass-o","fa-hourglass-start","fa-houzz","fa-html5","fa-i-cursor","fa-id-badge","fa-id-card","fa-id-card-o","fa-ils","fa-image","fa-imdb","fa-inbox","fa-indent","fa-industry","fa-info","fa-info-circle","fa-inr","fa-instagram","fa-institution","fa-internet-explorer","fa-intersex","fa-ioxhost","fa-italic","fa-joomla","fa-jpy","fa-jsfiddle","fa-key","fa-keyboard-o","fa-krw","fa-language","fa-laptop","fa-lastfm","fa-lastfm-square","fa-leaf","fa-leanpub","fa-legal","fa-lemon-o","fa-level-down","fa-level-up","fa-life-bouy","fa-life-buoy","fa-life-ring","fa-life-saver","fa-lightbulb-o","fa-line-chart","fa-link","fa-linkedin","fa-linkedin-square","fa-linode","fa-linux","fa-list","fa-list-alt","fa-list-ol","fa-list-ul","fa-location-arrow","fa-lock","fa-long-arrow-down","fa-long-arrow-left","fa-long-arrow-right","fa-long-arrow-up","fa-low-vision","fa-magic","fa-magnet","fa-mail-forward","fa-mail-reply","fa-mail-reply-all","fa-male","fa-map","fa-map-marker","fa-map-o","fa-map-pin","fa-map-signs","fa-mars","fa-mars-double","fa-mars-stroke","fa-mars-stroke-h","fa-mars-stroke-v","fa-maxcdn","fa-meanpath","fa-medium","fa-medkit","fa-meetup","fa-meh-o","fa-mercury","fa-microchip","fa-microphone","fa-microphone-slash","fa-minus","fa-minus-circle","fa-minus-square","fa-minus-square-o","fa-mixcloud","fa-mobile","fa-mobile-phone","fa-modx","fa-money","fa-moon-o","fa-mortar-board","fa-motorcycle","fa-mouse-pointer","fa-music","fa-navicon","fa-neuter","fa-newspaper-o","fa-object-group","fa-object-ungroup","fa-odnoklassniki","fa-odnoklassniki-square","fa-opencart","fa-openid","fa-opera","fa-optin-monster","fa-outdent","fa-pagelines","fa-paint-brush","fa-paper-plane","fa-paper-plane-o","fa-paperclip","fa-paragraph","fa-paste","fa-pause","fa-pause-circle","fa-pause-circle-o","fa-paw","fa-paypal","fa-pencil","fa-pencil-square","fa-pencil-square-o","fa-percent","fa-phone","fa-phone-square","fa-photo","fa-picture-o","fa-pie-chart","fa-pied-piper","fa-pied-piper-alt","fa-pied-piper-pp","fa-pinterest","fa-pinterest-p","fa-pinterest-square","fa-plane","fa-play","fa-play-circle","fa-play-circle-o","fa-plug","fa-plus","fa-plus-circle","fa-plus-square","fa-plus-square-o","fa-podcast","fa-power-off","fa-print","fa-product-hunt","fa-puzzle-piece","fa-qq","fa-qrcode","fa-question","fa-question-circle","fa-question-circle-o","fa-quora","fa-quote-left","fa-quote-right","fa-ra","fa-random","fa-ravelry","fa-rebel","fa-recycle","fa-reddit","fa-reddit-alien","fa-reddit-square","fa-refresh","fa-registered","fa-remove","fa-renren","fa-reorder","fa-repeat","fa-reply","fa-reply-all","fa-resistance","fa-retweet","fa-rmb","fa-road","fa-rocket","fa-rotate-left","fa-rotate-right","fa-rouble","fa-rss","fa-rss-square","fa-rub","fa-ruble","fa-rupee","fa-s15","fa-safari","fa-save","fa-scissors","fa-scribd","fa-search","fa-search-minus","fa-search-plus","fa-sellsy","fa-send","fa-send-o","fa-server","fa-share","fa-share-alt","fa-share-alt-square","fa-share-square","fa-share-square-o","fa-shekel","fa-sheqel","fa-shield","fa-ship","fa-shirtsinbulk","fa-shopping-bag","fa-shopping-basket","fa-shopping-cart","fa-shower","fa-sign-in","fa-sign-language","fa-sign-out","fa-signal","fa-signing","fa-simplybuilt","fa-sitemap","fa-skyatlas","fa-skype","fa-slack","fa-sliders","fa-slideshare","fa-smile-o","fa-snapchat","fa-snapchat-ghost","fa-snapchat-square","fa-snowflake-o","fa-soccer-ball-o","fa-sort","fa-sort-alpha-asc","fa-sort-alpha-desc","fa-sort-amount-asc","fa-sort-amount-desc","fa-sort-asc","fa-sort-desc","fa-sort-down","fa-sort-numeric-asc","fa-sort-numeric-desc","fa-sort-up","fa-soundcloud","fa-space-shuttle","fa-spinner","fa-spoon","fa-spotify","fa-square","fa-square-o","fa-stack-exchange","fa-stack-overflow","fa-star","fa-star-half","fa-star-half-empty","fa-star-half-full","fa-star-half-o","fa-star-o","fa-steam","fa-steam-square","fa-step-backward","fa-step-forward","fa-stethoscope","fa-sticky-note","fa-sticky-note-o","fa-stop","fa-stop-circle","fa-stop-circle-o","fa-street-view","fa-strikethrough","fa-stumbleupon","fa-stumbleupon-circle","fa-subscript","fa-subway","fa-suitcase","fa-sun-o","fa-superpowers","fa-superscript","fa-support","fa-table","fa-tablet","fa-tachometer","fa-tag","fa-tags","fa-tasks","fa-taxi","fa-telegram","fa-television","fa-tencent-weibo","fa-terminal","fa-text-height","fa-text-width","fa-th","fa-th-large","fa-th-list","fa-themeisle","fa-thermometer","fa-thermometer-0","fa-thermometer-1","fa-thermometer-2","fa-thermometer-3","fa-thermometer-4","fa-thermometer-empty","fa-thermometer-full","fa-thermometer-half","fa-thermometer-quarter","fa-thermometer-three-quarters","fa-thumb-tack","fa-thumbs-down","fa-thumbs-o-down","fa-thumbs-o-up","fa-thumbs-up","fa-ticket","fa-times","fa-times-circle","fa-times-circle-o","fa-times-rectangle","fa-times-rectangle-o","fa-tint","fa-toggle-down","fa-toggle-left","fa-toggle-off","fa-toggle-on","fa-toggle-right","fa-toggle-up","fa-trademark","fa-train","fa-transgender","fa-transgender-alt","fa-trash","fa-trash-o","fa-tree","fa-trello","fa-tripadvisor","fa-trophy","fa-truck","fa-try","fa-tty","fa-tumblr","fa-tumblr-square","fa-turkish-lira","fa-tv","fa-twitch","fa-twitter","fa-twitter-square","fa-umbrella","fa-underline","fa-undo","fa-universal-access","fa-university","fa-unlink","fa-unlock","fa-unlock-alt","fa-unsorted","fa-upload","fa-usb","fa-usd","fa-user","fa-user-circle","fa-user-circle-o","fa-user-md","fa-user-o","fa-user-plus","fa-user-secret","fa-user-times","fa-users","fa-vcard","fa-vcard-o","fa-venus","fa-venus-double","fa-venus-mars","fa-viacoin","fa-viadeo","fa-viadeo-square","fa-video-camera","fa-vimeo","fa-vimeo-square","fa-vine","fa-vk","fa-volume-control-phone","fa-volume-down","fa-volume-off","fa-volume-up","fa-warning","fa-wechat","fa-weibo","fa-weixin","fa-whatsapp","fa-wheelchair","fa-wheelchair-alt","fa-wifi","fa-wikipedia-w","fa-window-close","fa-window-close-o","fa-window-maximize","fa-window-minimize","fa-window-restore","fa-windows","fa-won","fa-wordpress","fa-wpbeginner","fa-wpexplorer","fa-wpforms","fa-wrench","fa-xing","fa-xing-square","fa-y-combinator","fa-y-combinator-square","fa-yahoo","fa-yc","fa-yc-square","fa-yelp","fa-yen","fa-yoast","fa-youtube","fa-youtube-play","fa-youtube-square"]},2:function(e,t,a){"use strict";a.d(t,"l",(function(){return n})),a.d(t,"h",(function(){return i})),a.d(t,"e",(function(){return r})),a.d(t,"k",(function(){return o})),a.d(t,"f",(function(){return l})),a.d(t,"g",(function(){return c})),a.d(t,"j",(function(){return s})),a.d(t,"o",(function(){return d})),a.d(t,"p",(function(){return u})),a.d(t,"i",(function(){return f})),a.d(t,"d",(function(){return m})),a.d(t,"b",(function(){return p})),a.d(t,"c",(function(){return b})),a.d(t,"m",(function(){return v})),a.d(t,"n",(function(){return g})),a.d(t,"a",(function(){return h}));var n={panel:"panel",tabs:"panel-tabs",field:"field",dumpField:"dump_field",form:"form",panelStack:"panel-stack",panelDashlet:"panel-dashlet",panelRelated:"panel-related",panelInclude:"panel-include",menu:"menu",menuItem:"item",divider:"divider",menubar:"menubar",toolbar:"toolbar"},i={CONTAINER:"panel",ROOTCONTAINER:"root-container",ITEM:"item",DUMMY:"dummy"},r={string:"string",number:"number",button:"button",spacer:"spacer",boolean:"boolean",separator:"separator",hilite:"hilite"},o={stack:"stack",flow:"flow",grid:"grid",custom:"custom"},l={max:12},c={createWidgets:{tabs:Symbol(),panel:Symbol(),field:Symbol()},form:-1,customForm:-2,dumpField:0},s={colSpan:12,cols:12,id:c.createWidgets.panel,image:"panel.png",items:[],layout:"grid",mappedBy:void 0,model:"com.axelor.meta.db.MetaJsonRecord",modelField:"attrs",relationship:void 0,title:void 0,type:i.CONTAINER,widgetAttrs:JSON.stringify({showTitle:"false"})},d={OneToMany:"one-to-many",ManyToMany:"many-to-many",ManyToOne:"many-to-one",OneToOne:"one-to-one"},u={include:n.panelInclude,MANY_TO_MANY:"many-to-many",MANY_TO_ONE:"many-to-one",ONE_TO_ONE:"one-to-one",ONE_TO_MANY:"one-to-many"},f={BASE:"BASE",CUSTOM:"CUSTOM"},m={META:"META"},p={showTitle:!0,readonly:!1,required:!1,hidden:!1,sidebar:!1,canCollapse:!1,stacked:!1,canMove:!1,canSearch:!1,multiline:!1},b=["string","integer","decimal","boolean","datetime","date","time","many-to-one","one-to-many","many-to-many"],v={readonlyIf:"readonly",requiredIf:"required",hideIf:"hidden",collapseIf:"canCollapse"},g=["value:add","value:del","refresh","active"],h={MODEL:0,GLOBAL:1,OTHER:2}},206:function(e,t,a){e.exports=a(258)},211:function(e,t,a){},212:function(e,t,a){},23:function(e,t,a){"use strict";a.d(t,"n",(function(){return u})),a.d(t,"o",(function(){return f})),a.d(t,"p",(function(){return v})),a.d(t,"d",(function(){return j})),a.d(t,"s",(function(){return w})),a.d(t,"f",(function(){return k})),a.d(t,"q",(function(){return S})),a.d(t,"k",(function(){return T})),a.d(t,"j",(function(){return E})),a.d(t,"e",(function(){return F})),a.d(t,"i",(function(){return N})),a.d(t,"c",(function(){return L})),a.d(t,"r",(function(){return q})),a.d(t,"a",(function(){return B})),a.d(t,"g",(function(){return _})),a.d(t,"m",(function(){return U})),a.d(t,"t",(function(){return R})),a.d(t,"b",(function(){return H})),a.d(t,"h",(function(){return G})),a.d(t,"l",(function(){return Y}));var n=a(9),i=a(11),r=a.n(i),o=a(4),l=a(22),c=a(2),s=a(28),d=a(5),u=new s.a({model:"com.axelor.meta.db.MetaJsonField"}),f=new s.a({model:"com.axelor.meta.db.MetaJsonModel"}),m=new s.a({model:"com.axelor.studio.db.AppStudio"}),p=new s.a({model:"com.axelor.auth.db.User"}),b=new s.a({model:"com.axelor.meta.db.MetaView"}),v=new s.a({model:"com.axelor.meta.db.MetaModel"}),g=new s.a({model:"com.axelor.meta.db.MetaAttrs"}),h=new s.a({model:"com.axelor.meta.db.MetaSelect"}),y=new s.a({model:"com.axelor.studio.db.StudioSelection"}),O=new s.a({model:"com.axelor.meta.db.MetaTranslation"});function j(e,t){var a="self.jsonModel = null and self.modelField='".concat(e.name,"' and self.model='").concat(t.fullName,"'");return u.search({data:{_domain:a},sortBy:["sequence"]})}function w(e){return x.apply(this,arguments)}function x(){return(x=Object(l.a)(r.a.mark((function e(t){var a,n,i,l,c,s,d,m;return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t){e.next=2;break}return e.abrupt("return");case 2:return e.next=4,f.save(t);case 4:if(a=e.sent,i=(n=a||{}).data,-1!==n.status){e.next=8;break}return e.abrupt("return",a);case 8:return l=i&&i[0]||{},c=l.fields,s=function(e){return e.map((function(e){var t=e.data,a=void 0===t?[]:t;if(a[0])return{id:a[0].id,$version:a[0].version}})).filter((function(e){return e}))},e.next=12,Promise.all(t.fields.map((function(e){var t=c&&c.find((function(t){return t.name===e.name}));return u.save(Object(o.a)(Object(o.a)({},e),{},{id:null===t||void 0===t?void 0:t.id,version:null===t||void 0===t?void 0:t.version}))})));case 12:return d=e.sent,m=s(d),e.abrupt("return",{data:[Object(o.a)(Object(o.a)({},i&&i[0]||{}),{},{fields:m})]});case 15:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function k(e,t){var a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},n=[];if(e.length){n.push({fieldName:"id",operator:"in",value:e});var i={criteria:n};u.search({data:i,sortBy:["sequence"]}).then((function(e){if(e.data){var n=e.data||[],i=Object(d.g)(n,a);t((function(e){e.items=n.filter((function(e){return"panel"===e.type})).map((function(e){return e.id})),e.widgets=Object(o.a)({},i.widgets),e.items=i.items}))}}))}else t((function(e){e.widgets={"-1":Object(o.a)(Object(o.a)({type:"form"},a),Object(d.j)(a?a.studioMenu:void 0)),0:{type:"dump_field",name:""}},e.items=[],e.loader=!1}))}function S(e){return f.removeAll([e])}function T(){return C.apply(this,arguments)}function C(){return(C=Object(l.a)(r.a.mark((function e(){var t,a;return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t={data:{_domain:"self.app.code = :code",_domainContext:{code:"studio"}},fields:["enableStudioApp"],limit:1,offset:0},e.next=3,m.search(Object(o.a)({},t));case 3:if(a=e.sent,!Array.isArray(a&&a.data)||!a.data[0]){e.next=6;break}return e.abrupt("return",a.data[0].enableStudioApp);case 6:return e.abrupt("return",!1);case 7:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function E(e){return M.apply(this,arguments)}function M(){return(M=Object(l.a)(r.a.mark((function e(t){var a,n;return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=Object(o.a)({_model:"com.axelor.meta.db.MetaJsonModel",_id:null},t),"action-studio-json-model-method-isgeneratemenu-onchange",n={action:"action-studio-json-model-method-isgeneratemenu-onchange",model:"com.axelor.meta.db.MetaJsonModel",data:{context:a}},e.next=5,f.action(n);case 5:return e.abrupt("return",e.sent);case 6:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function F(e){return I.apply(this,arguments)}function I(){return(I=Object(l.a)(r.a.mark((function e(t){var a,n,i,o,l=arguments;return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=l.length>1&&void 0!==l[1]?l[1]:function(){},e.next=3,f.fetch(t,{related:{studioMenu:["title","parentMenu"]}});case 3:if(-1!==(null===(n=e.sent)||void 0===n?void 0:n.status)){e.next=7;break}return a(n.data||{}),e.abrupt("return");case 7:return i=(n||{}).data,o=void 0===i?[]:i,e.abrupt("return",o[0]);case 9:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function N(e){return A.apply(this,arguments)}function A(){return(A=Object(l.a)(r.a.mark((function e(t){var a,n,i;return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a={operator:"and",criteria:[{fieldName:"name",operator:"=",value:"".concat(t.name)}]},e.next=3,b.search({data:a});case 3:return(n=e.sent).data&&(i=d.f.getViews(n.data,t.name)),e.abrupt("return",i);case 6:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function L(e){return W.apply(this,arguments)}function W(){return(W=Object(l.a)(r.a.mark((function e(t){var a,i,o,l,s,d,u;return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=t.model,i=t.view,o=[{fieldName:"model",operator:"=",value:a},{fieldName:"view",operator:"=",value:i}],e.next=4,g.search({data:{criteria:o},limit:null});case 4:if(!(l=e.sent).data||!Array.isArray(l.data)){e.next=10;break}return s=Object.keys(c.m),d=Object.values(c.m),u=Object(n.a)(l.data).map((function(e){return d.includes(e.name)?e.value.startsWith('"')&&e.value.endsWith('"')?(e.value=e.value.replace('"',""),e.value=e.value.replace('"',"")):["true","false"].includes(e.value)||(e.name=s[d.indexOf(e.name)]):(e.value=e.value.replace('"',""),e.value=e.value.replace('"',"")),e})),e.abrupt("return",u);case 10:return e.abrupt("return",[]);case 11:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function q(e){return V.apply(this,arguments)}function V(){return(V=Object(l.a)(r.a.mark((function e(t){var a,i,o=arguments;return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=o.length>1&&void 0!==o[1]?o[1]:function(){},e.next=3,g.saveAll(Object(n.a)(t));case 3:if(-1!==(null===(i=e.sent)||void 0===i?void 0:i.status)){e.next=7;break}return a(i.data||{}),e.abrupt("return",[]);case 7:if(!i.data||!Array.isArray(i.data)){e.next=9;break}return e.abrupt("return",i.data);case 9:return e.abrupt("return",[]);case 10:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function B(e){return P.apply(this,arguments)}function P(){return(P=Object(l.a)(r.a.mark((function e(t){var a,n,i=arguments;return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=i.length>1&&void 0!==i[1]?i[1]:function(){},e.next=3,g.removeAll(t);case 3:if(-1!==(null===(n=e.sent)||void 0===n?void 0:n.status)){e.next=7;break}return a(n.data||{}),e.abrupt("return",[]);case 7:if(!n.data||!Array.isArray(n.data)){e.next=9;break}return e.abrupt("return",n.data);case 9:return e.abrupt("return",[]);case 10:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function _(){return D.apply(this,arguments)}function D(){return(D=Object(l.a)(r.a.mark((function e(){var t,a;return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=[{fieldName:"name",operator:"=",value:"select.language"}],e.next=3,h.search({data:{criteria:t},fields:["items.value","items.title"]});case 3:if(!((a=e.sent)&&a.data&&Array.isArray(a.data))){e.next=6;break}return e.abrupt("return",a.data.map((function(e){return{title:e["items.title"],value:e["items.value"]}})));case 6:return e.abrupt("return",[]);case 7:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function U(e){return J.apply(this,arguments)}function J(){return(J=Object(l.a)(r.a.mark((function e(t){var a,n;return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=[{fieldName:"key",operator:"in",value:t}],e.next=3,O.search({data:{criteria:a}});case 3:if(!(n=e.sent).data||!Array.isArray(n.data)){e.next=6;break}return e.abrupt("return",n.data);case 6:return e.abrupt("return",[]);case 7:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function R(e){return z.apply(this,arguments)}function z(){return(z=Object(l.a)(r.a.mark((function e(t){var a,i,o=arguments;return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=o.length>1&&void 0!==o[1]?o[1]:function(){},e.next=3,O.saveAll(Object(n.a)(t));case 3:if(-1!==(null===(i=e.sent)||void 0===i?void 0:i.status)){e.next=7;break}return a(i.data||{}),e.abrupt("return",[]);case 7:if(!i.data||!Array.isArray(i.data)){e.next=9;break}return e.abrupt("return",i.data);case 9:return e.abrupt("return",[]);case 10:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function H(e){return X.apply(this,arguments)}function X(){return(X=Object(l.a)(r.a.mark((function e(t){var a,n,i=arguments;return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=i.length>1&&void 0!==i[1]?i[1]:function(){},e.next=3,O.removeAll(t);case 3:if(-1!==(null===(n=e.sent)||void 0===n?void 0:n.status)){e.next=7;break}return a(n.data||{}),e.abrupt("return",[]);case 7:if(!n.data||!Array.isArray(n.data)){e.next=9;break}return e.abrupt("return",n.data);case 9:return e.abrupt("return",[]);case 10:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function G(){return Z.apply(this,arguments)}function Z(){return(Z=Object(l.a)(r.a.mark((function e(){var t,a;return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,p.info();case 2:if(!(t=e.sent)||!t["user.id"]){e.next=9;break}return e.next=6,p.fetch(t["user.id"],{fields:["theme"]});case 6:if(!((a=e.sent)&&a.data&&a.data[0])){e.next=9;break}return e.abrupt("return",a.data[0]);case 9:return e.abrupt("return",null);case 10:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Y(e){return Q.apply(this,arguments)}function Q(){return(Q=Object(l.a)(r.a.mark((function e(t){var a,n,i,l,c,s,d;return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(a="",!t){e.next=9;break}return n={metaSelect:Object(o.a)({},t)},i={data:{context:n},action:"action-studio-selection-method-fill-selection-text",model:"com.axelor.studio.db.StudioSelection"},e.next=6,y.action(i);case 6:l=e.sent,c=l.data,(s=void 0===c?[]:c)[0]&&(d=s[0].values||{}).selectionText&&(a=d.selectionText);case 9:return e.abrupt("return",a);case 10:case"end":return e.stop()}}),e)})))).apply(this,arguments)}},235:function(e,t){},237:function(e,t){},258:function(e,t,a){"use strict";a.r(t);var n=a(0),i=a.n(n),r=a(27),o=a.n(r),l=(a(211),a(212),a(11)),c=a.n(l),s=a(17),d=a(22),u=a(9),f=a(4),m=a(15),p=a(307),b=a(299),v=a(178),g=a(323),h=a(322),y=a(179),O=a(24),j=a.n(O),w=a(16),x=a(302),k=(a(85),a(62),a(99),a(82)),S=a(84),T=a(2),C=a(26);function E(e){var t=function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],a=getComputedStyle(e),n="absolute"===a.position,i=t?/(auto|scroll|hidden)/:/(auto|scroll)/;if("fixed"===a.position)return document.body;for(var r=e;r=r.parentElement;)if(a=getComputedStyle(r),(!n||"static"!==a.position)&&i.test(a.overflow+a.overflowY+a.overflowX))return r;return document.body}(e);t&&window.requestAnimationFrame((function(){t.scrollTo({top:e.offsetTop+14,behavior:"smooth"})}))}var M=Object(b.a)({uiContainer:{display:"flex",flexDirection:"column",alignSelf:"baseline"},container:{display:"flex",flexDirection:"column",height:"fit-content",position:"relative"},loaderContainer:{display:"flex",flexDirection:"column",justifyContent:"center",height:"100%",position:"absolute",zIndex:1e3,border:"0px",backgroundColor:"rgba(0,0,0,0.05)",bottom:0,top:0,left:0,right:0,alignItems:"center"},emptyFormInfo:{minHeight:"24vh !important"}});var F=function(e){var t,a,r=e.design,o=Object(C.b)(),l=M(),c=Object(n.useRef)(null),s=o.state,d=s.widgets,u=s.customFieldWidgets,f=s.loader,m=s.errorList,p=s.modelField,b=s.modelType,v=(o.state.widgets||[])[-1],g=!!u;return Object(n.useEffect)((function(){var e=c.current;e&&g&&(E(e),e&&e.focus())}),[g]),i.a.createElement("div",{className:j()(l.uiContainer)},i.a.createElement("div",{id:"form-view",className:j()(l.container,Object(w.a)({},l.emptyFormInfo,!v&&!u))},f&&i.a.createElement("div",{className:j()(l.loaderContainer)},i.a.createElement(x.a,null)),d&&i.a.createElement(k.default,(t={index:0,id:T.g.form,attrs:o.state.widgets[T.g.form],onSelect:o.onSelect,items:o.state.items,dragWidget:o.state.dragWidget,hoverWidget:o.state.hoverWidget,editWidget:o.state.editWidget,widgets:o.state.widgets},Object(w.a)(t,"onSelect",o.onSelect),Object(w.a)(t,"onMove",o.onMove),Object(w.a)(t,"onDrag",o.onDrag),Object(w.a)(t,"onHover",o.onHover),Object(w.a)(t,"onWidgetChange",o.onWidgetChange),Object(w.a)(t,"setHoverAttr",o.setHoverAttr),Object(w.a)(t,"addTabPanel",o.addTabPanel),Object(w.a)(t,"canRemove",b!==T.i.BASE),Object(w.a)(t,"isBase",b===T.i.BASE),Object(w.a)(t,"errorList",m),Object(w.a)(t,"design",r),Object(w.a)(t,"component",S.a),t)),u&&i.a.createElement("div",{className:"custom-field-pallett-view",ref:c,tabIndex:1},i.a.createElement("div",{className:"custom-field-view-header"},(null===p||void 0===p?void 0:p.name)||"attrs"),i.a.createElement(k.default,(a={_type:"customField",index:0,id:T.g.customForm,attrs:o.state.customFieldWidgets[T.g.customForm],onSelect:o.onSelect,items:o.state.customFieldItems,dragWidget:o.state.dragWidget,hoverWidget:o.state.hoverWidget,editWidget:o.state.editWidget,widgets:o.state.customFieldWidgets},Object(w.a)(a,"onSelect",o.onSelect),Object(w.a)(a,"onMove",o.onMove),Object(w.a)(a,"onDrag",o.onDrag),Object(w.a)(a,"addTabPanel",o.addTabPanel),Object(w.a)(a,"onHover",o.onHover),Object(w.a)(a,"onWidgetChange",o.onWidgetChange),Object(w.a)(a,"setHoverAttr",o.setHoverAttr),Object(w.a)(a,"errorList",m),Object(w.a)(a,"design",r),Object(w.a)(a,"component",S.a),a)))))},I=i.a.memo((function(e){var t=e.toolbarOffset,a=i.a.useState(!0),n=Object(m.a)(a,1)[0];return i.a.createElement("div",{className:j()("form-layout-container",{"form-layout-design":n}),style:{display:"flex",width:"100%",height:"calc(100vh - ".concat(t,"px)"),justifyContent:"center",overflow:"auto",position:"relative",paddingRight:"1em"}},i.a.createElement(F,{design:n}))})),N=a(56),A=a.n(N),L=a(304),W=a(305),q=a(306),V=a(314),B=a(301),P=a(29),_=a.n(P),D=a(264),U=a(28),J=a(5),R=a(324),z=a(330);function H(e,t){var a=i.a.useRef(!1);i.a.useEffect((function(){if(a.current){var n=setTimeout((function(){return e()}),t);return function(){return clearTimeout(n)}}a.current=!0}),[e,t])}var X=a(173),G=a.n(X),Z=a(174),Y=a.n(Z),Q=a(64),K=a(303),$=a(308),ee=a(312),te=a(313),ae=a(35),ne=a(310),ie=a(309),re=a(326),oe=a(311),le=a(325),ce=["children","value","index"],se=Object(b.a)((function(e){return{root:{width:"100%",backgroundColor:e.palette.background.paper,height:300,overflow:"auto"},input:{"& .MuiOutlinedInput-root":{borderRadius:20,"& fieldset":{borderColor:"#bdbdbd"},"&:hover fieldset":{borderColor:"#bdbdbd"},"&.Mui-focused fieldset":{borderColor:"#bdbdbd"}}},titleHeader:{borderBottom:"0.5px solid #ddd"},listItem:{borderBottom:"1px solid #ddd",paddingTop:10,paddingBottom:10},closeText:{textTransform:"capitalize"},tabContainer:{"& .MuiTabs-indicator":{backgroundColor:"#3f51b5"}},labelStyle:{textTransform:"none"},centerElement:{height:300,padding:"8px",display:"flex",alignItems:"center",justifyContent:"center"}}})),de=["Model actions","Global actions","Other actions"];function ue(e){var t=e.children,a=e.value,n=e.index,r=Object(s.a)(e,ce);return i.a.createElement("div",Object.assign({role:"tabpanel",hidden:a!==n,id:"horizontal-tabpanel-".concat(n),"aria-labelledby":"horizontal-tab-".concat(n)},r),a===n&&i.a.createElement(i.a.Fragment,null,t))}function fe(e){var t=e.list,a=void 0===t?[]:t,n=e.onChange,r=e.handleClose,o=e.offset,l=e.total,c=e.displayField,s=e.getOptionLabel,d=e.isTypeOnClick,u=void 0!==d&&d,f=e.isDataLoading,m=Object(ae.a)(),b=se(),v=Object(K.a)(m.breakpoints.down("sm")),g=i.a.useCallback((function(e){n(e),r()}),[n,r]),h=a.length>0&&o+a.length<l,y=o>0,O=function(e){return s?s(e):e[c||"name"]};return i.a.createElement("div",null,i.a.createElement(L.a,{fullScreen:v,maxWidth:"sm",fullWidth:!0,open:e.open,onClose:e.handleClose,"aria-labelledby":"responsive-dialog-title"},i.a.createElement(W.a,{id:"responsive-dialog-title",className:b.titleHeader},"Search ".concat(e.title||"item")),i.a.createElement(q.a,null,i.a.createElement(p.a,{container:!0},i.a.createElement(p.a,{container:!0,item:!0,alignItems:"center"},i.a.createElement(p.a,{item:!0,xs:10,style:{flex:1}},i.a.createElement(R.a,{size:"small",fullWidth:!0,className:b.input,value:e.searchText,variant:"outlined",onChange:function(t){return e.setSearchText(t.target.value)},InputProps:{startAdornment:i.a.createElement(ie.a,{position:"start"},i.a.createElement(ne.a,{style:{fill:"#bdbdbd"}}))},placeholder:"Search"})),i.a.createElement(p.a,{item:!0},i.a.createElement(D.a,{onClick:e.onPrevious,disabled:!y},i.a.createElement(G.a,null)),i.a.createElement(D.a,{onClick:e.onNext,disabled:!h},i.a.createElement(Y.a,null)))),u&&i.a.createElement(p.a,{item:!0,xs:12},i.a.createElement(re.a,{orientation:"horizontal",variant:"fullWidth",value:e.currentTab,onChange:e.onTabChange,className:b.tabContainer},de.map((function(e,t){return i.a.createElement(oe.a,{key:"".concat(t,"-").concat(e),label:e,className:b.labelStyle})}))))),f?i.a.createElement(le.a,{className:b.centerElement},i.a.createElement(x.a,{size:20})):0!==a.length?u?de.map((function(t,n){return e.currentTab===n&&i.a.createElement(p.a,{item:!0},i.a.createElement(ue,{value:n,index:n},i.a.createElement(p.a,{item:!0},i.a.createElement($.a,{className:b.root},a.filter((function(e){return"studio_show_More_View"!==e.id})).map((function(e,t){return i.a.createElement(ee.a,{className:b.listItem,key:"".concat(t,"-").concat(O(e)),role:void 0,dense:!0,button:!0,onClick:function(){return g(e)}},i.a.createElement(te.a,{id:t,primary:O(e)}))}))))))})):i.a.createElement($.a,{className:b.root},a.filter((function(e){return"studio_show_More_View"!==e.id})).map((function(e,t){return i.a.createElement(ee.a,{className:b.listItem,key:"".concat(t,"-").concat(O(e)),role:void 0,dense:!0,button:!0,onClick:function(){return g(e)}},i.a.createElement(te.a,{id:t,primary:O(e)}))}))):i.a.createElement(le.a,{className:b.centerElement},i.a.createElement(Q.a,{variant:"body2"},"No data found"))),i.a.createElement(V.a,null,i.a.createElement(B.a,{autoFocus:!0,onClick:e.handleClose,color:"primary"},i.a.createElement(Q.a,{className:b.closeText},"Close")))))}var me=["value","label","model","searchFilter","onChange","options","filterData","limit","onSearch","modelType","onClose","handleHighlightChange","handleOutsideClick","getOptionSelected"],pe=Object(b.a)({autoComplete:{"& > div > label":{color:"#e7eaec !important",fontSize:12}},autoCompleteRoot:{width:200,marginLeft:10,color:"#e7eaec"},inputView:{color:"#fff",fontSize:13,"& > *":{color:"#fff"}},popperView:{"& ul, .MuiAutocomplete-noOptions":{backgroundColor:"rgb(41, 56, 70) !important",".modern-dark &":{backgroundColor:"#1b1b1b !important"}},"& li, .MuiAutocomplete-noOptions":{color:"#e7eaec !important",backgroundColor:"rgb(41, 56, 70) !important",".modern-dark &":{backgroundColor:"#1b1b1b !important"}},"& li:hover, .MuiAutocomplete-noOptions":{color:"#e7eaec !important",backgroundColor:"#2f4050 !important",".modern-dark &":{backgroundColor:"#323232 !important"}},'& li[data-focus="true"]':{backgroundColor:"#2f4050 !important",".modern-dark &":{backgroundColor:"#323232 !important"}}},option:{fontSize:13}});var be=i.a.memo((function(e){var t=e.value,a=e.label,r=e.model,o=e.searchFilter,l=void 0===o?function(){}:o,p=e.onChange,b=void 0===p?function(){}:p,v=e.options,g=e.filterData,h=e.limit,y=void 0===h?10:h,O=e.onSearch,j=e.modelType,w=(e.onClose,e.handleHighlightChange,e.handleOutsideClick),x=void 0===w?function(){}:w,k=e.getOptionSelected,S=void 0===k?function(e,t){return e.name===t.name}:k,T=Object(s.a)(e,me),C=pe(),E=Object(n.useState)(""),M=Object(m.a)(E,2),F=M[0],I=M[1],N=Object(n.useState)(!1),A=Object(m.a)(N,2),L=A[0],W=A[1],q=Object(n.useState)(Object(u.a)(v||[])),V=Object(m.a)(q,2),B=V[0],P=V[1],D=Object(n.useState)(!1),X=Object(m.a)(D,2),G=X[0],Z=X[1],Y=Object(n.useState)(0),Q=Object(m.a)(Y,2),K=Q[0],$=Q[1],ee=Object(n.useState)(0),te=Object(m.a)(ee,2),ae=te[0],ne=te[1],ie=i.a.useCallback(Object(d.a)(c.a.mark((function e(){var t,a,n,i,o,s,d,m,p,b,v=arguments;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=v.length>0&&void 0!==v[0]?v[0]:"",T.open){e.next=24;break}if(!O){e.next=16;break}return W(!0),e.next=6,O({limit:y,searchText:t,searchFilter:l,filterData:g,modelType:j,offset:K});case 6:a=e.sent,n=a.models,i=a.total,!G&&i>y&&n.push({name:Object(J.q)("Show more..."),id:"studio_show_More_View"}),o=_.a.uniqBy(n,"name"),P(o),W(!1),ne(i),e.next=24;break;case 16:s=new U.a({model:r}),W(!0),d=l(t)||{},m=[],t&&m.push({fieldName:"name",operator:"like",value:t}),p=Object(f.a)(Object(f.a)(Object(f.a)({},d._domain&&{_domain:d._domain}),d._domainContext&&{_domainContext:d._domainContext}),{},{criteria:[].concat(m,Object(u.a)(d.criteria||[])),operator:"and"}),b=d.fields||[],s.search({fields:b,data:p,limit:y,offset:K}).then((function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.data,a=void 0===t?[]:t,n=e.total;W(!1);var i=g?g(Object(u.a)(a)):Object(u.a)(a);!G&&n>y&&i.push({name:Object(J.q)("Show more..."),id:"studio_show_More_View"}),ne(n);var r=_.a.uniqBy(i,"name");P(r)}));case 24:case"end":return e.stop()}}),e)}))),[T.open,O,y,l,g,j,K,G,r]);Object(n.useEffect)((function(){T.open&&P(v)}),[B,v,T.open]);var re=i.a.useCallback((function(){var e=K+y;e<=ae&&$(e)}),[y,ae,K]),oe=i.a.useCallback((function(){$((function(e){var t=e-y;return t>0?t:0}))}),[y]),le=i.a.useCallback((function(){!v&&ie(F)}),[F,ie,v]),ce=i.a.useCallback((function(e,t){"studio_show_More_View"===(null===t||void 0===t?void 0:t.id)?Z(!0):b(t)}),[b]),se=i.a.useCallback((function(e){I(e),$(0)}),[]),de=i.a.useCallback((function(){Z(!1),$(0)}),[]);return H(le,500),Object(n.useEffect)((function(){!v&&ie()}),[ie,v,r]),Object(n.useEffect)((function(){t||T.open||I("")}),[t,T.open]),i.a.createElement(i.a.Fragment,null,i.a.createElement(z.a,Object.assign({clearOnEscape:!0,autoComplete:!0,classes:{root:C.autoCompleteRoot,inputFocused:C.input,clearIndicator:C.input,popupIndicator:C.input,input:C.inputView,endAdornment:C.inputView,popper:C.popperView,option:C.option,noOptions:C.option},size:"small",className:C.autoComplete,onInputChange:function(e,t){return I(t)},onClose:function(e,t){if("blur"===t)return x(!1)},renderInput:function(e){return e.inputProps.value=F,i.a.createElement(R.a,Object.assign({},e,{placeholder:Object(J.q)(a),fullWidth:!0,autoFocus:T.open}))},options:Object(u.a)(B),loading:L,getOptionLabel:function(e){return"string"===typeof e?e:T.getOptionLabel?T.getOptionLabel(e):e.name},onChange:ce,value:t,getOptionSelected:S},T)),i.a.createElement(fe,{searchText:F,list:B,model:r,total:ae,offset:K,open:G,onNext:re,onPrevious:oe,handleClose:de,setSearchText:se,onChange:b,title:Object(J.q)(a),getOptionLabel:T.getOptionLabel}))})),ve=a(23);function ge(e){return he.apply(this,arguments)}function he(){return(he=Object(d.a)(c.a.mark((function e(t){var a,n,i,r,o,l,s,d,m,p,b,v,g;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=t.searchFilter,n=t.limit,i=t.searchText,r=t.modelType,o=t.offset,l=a(i)||{},s=[],i&&s.push({fieldName:"name",operator:"like",value:i}),d=Object(f.a)(Object(f.a)(Object(f.a)({},l._domain&&{_domain:l._domain}),l._domainContext&&{_domainContext:l._domainContext}),{},{criteria:[].concat(s,Object(u.a)(l.criteria||[])),operator:"and"}),m=l.fields||[],p=r===T.i.CUSTOM?ve.o:ve.p,e.next=9,p.search({fields:m,data:d,limit:n,offset:o});case 9:return b=e.sent,v=[],b&&b.data&&Array.isArray(b.data)&&(g=b.data.map((function(e){var t=v.findIndex((function(t){return t.name===e.name&&t.packageName===e.packageName}));if(-1===t||r===T.i.BASE)return r===T.i.BASE&&-1!==t&&v.splice(t,1),Object(f.a)(Object(f.a)({},e),{},{entityType:T.d.META});v.splice(t,1,Object(f.a)(Object(f.a)({},v[t]),{},{actualType:T.d.META}))})).filter((function(e){return e})),v.push.apply(v,Object(u.a)(g))),e.abrupt("return",{models:v,total:b&&b.total});case 13:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var ye=a(37),Oe=["fields"],je=new U.a({model:"com.axelor.meta.db.MetaView"}),we=[{name:Object(J.q)("View"),value:T.i.BASE},{name:Object(J.q)("Custom"),value:T.i.CUSTOM}];var xe=i.a.memo((function(e){var t=e.model,a=e.update,n=e.modelType,r=e.modelField,o=e.startLoader,l=(e.entityType,e.metaFieldStore),m=e.clearHistory,p=e.reset,b=e.selectedView,v=e.runIfConfirmed,g=e.baseHasChanges,h=e.customFieldHasChanges,y="com.axelor.meta.db.".concat(n!==T.i.CUSTOM?"MetaModel":"MetaJsonModel"),O=i.a.useCallback((function(e,t){var n=[];if(e.length){n.push({fieldName:"id",operator:"in",value:e});var i={criteria:n};ve.n.search({data:i,sortBy:["sequence"]}).then((function(e){if(e.data){var n=e.data||[],i=Object(J.g)(n,t);a((function(e){e.widgets=Object(f.a)({},i.widgets),e.items=i.items,e.loader=!1}))}else a((function(e){e.loader=!1}))}))}else{var r=Object(J.g)([],t);a((function(e){e.widgets=Object(f.a)({},r.widgets),e.items=r.items,e.loader=!1,e.model=t,e.customModel=t,e.editWidget=-1,e.editWidgetType=null}))}}),[a]),j=i.a.useMemo((function(){return v(function(){var e=Object(d.a)(c.a.mark((function e(t){var i,r;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(i=new U.a({model:y}),t){e.next=7;break}if(n!==T.i.CUSTOM){e.next=5;break}return p((function(e){return m(e)})),e.abrupt("return");case 5:return a((function(e){m(e),e.model=null,e.customModel=null,e.items=[],e.exView=null,e.view=null,e.widgets=null,e.initialItems=null,e.initialWidgets=null,e.customFieldWidgets=null,e.customFieldItems=null,e.customFields=[],e.modelField=null,e.extensionXML=null,e.extensionView=null,e.originalXML=null,e.selectedView=null,e.metaFields=[],e.metaFieldStore=[],e.extensionMoves=[],e.errorList={},e.attrsList=[],e.translationList=[],e.initialTranslationList=[],e.removedTranslationList=[],e.baseHasChanges=!1,e.customFieldHasChanges=!1,e.highlightedOption=null})),e.abrupt("return");case 7:r={fields:["metaFields","packageName","name","fullName"],related:{metaFields:["typeName","label","mappedBy","relationship","name","packageName"]}},n===T.i.CUSTOM&&(a((function(e){e.loader=!0})),r={related:{studioMenu:["title","parentMenu"]}}),i.fetch(t.id,r).then((function(e){if(e.data){var i=e.data[0],r=i.fields,o=void 0===r?[]:r,l=Object(s.a)(i,Oe);a((function(e){m(e),e.model=t,e.entityType=t.entityType,e.widgets=null,e.initialWidgets=null,e.items=[],e.initialItems=null,e.view=null,e.exView=null,e.modelField=null,e.customFields=[],e.customFieldWidgets=null,e.originalXML=null,e.extensionXML=null,e.extensionView=null,e.extensionMoves=[],e.errorList={},e.attrsList=[],e.translationList=[],e.initialTranslationList=[],e.removedTranslationList=[],e.selectedView=null,e.editWidget=-1,e.editWidgetType=null,e.tabIndex=0,e.baseHasChanges=!1,e.customFieldHasChanges=!1,e.highlightedOption=null;var a=(i.metaFields||[]).map((function(e){return JSON.parse(JSON.stringify(Object(f.a)(Object(f.a)(Object(f.a)({},e),{},{type:T.o[e.relationship]||(e.typeName||"").toLowerCase()},e.relationship&&{targetModel:"".concat(e.packageName,".").concat(e.typeName)}),{},{packageName:void 0})))}));n===T.i.BASE?(e.metaFieldStore=Object(u.a)(a),e.metaFields=Object(u.a)(a)):(O(o.map((function(e){return e.id})),l),e.customModel=i)}))}}));case 10:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}())}),[a,y,n,O,m,p,v]),x=!!b,k=i.a.useMemo((function(){return v(function(){var e=Object(d.a)(c.a.mark((function e(n){var i,r,s,d,f,p,b,v,g,h;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(o(),n){e.next=4;break}return a((function(e){x&&m(e),e.items=[],e.exView=null,e.view=null,e.widgets=null,e.initialItems=null,e.initialWidgets=null,e.extensionXML=null,e.extensionView=null,e.originalXML=null,e.loader=!1,e.metaFields=e.metaFieldStore,e.selectedView=null,e.extensionMoves=[],e.errorList={},e.attrsList=[],e.translationList=[],e.initialTranslationList=[],e.removedTranslationList=[],e.baseHasChanges=!1})),e.abrupt("return");case 4:return e.next=6,Object(ve.i)(n);case 6:return i=e.sent,e.next=9,Object(ve.c)({model:t.name,view:n.name});case 9:return r=e.sent,s=J.f.generateXMLToViewSchema({view:i.view,fields:l,extensionXML:i.extensionXML,attrsList:r}),d=Object.values(s.widgets).filter((function(e){return e.title&&e.title.startsWith("studio:")})).map((function(e){return e.title})),e.next=14,Object(ve.m)(d);case 14:return f=e.sent,p={operator:"and",criteria:[{operator:"or",criteria:[{fieldName:"computed",operator:"=",value:!1},{fieldName:"computed",operator:"isNull"}]},{operator:"or",criteria:[{fieldName:"extension",operator:"=",value:!1},{fieldName:"extension",operator:"isNull"}]},{fieldName:"name",operator:"=",value:"".concat(n.name)}]},je.search({data:p}).then((function(e){var t=e.data,n=void 0===t?[]:t;n[0]&&a((function(e){e.originalXML=JSON.parse(A.a.xml2json(n[0].xml,{compact:!1,fullTagEmptyElement:!1}))}))})),b={_domain:"self.xmlId = 'studio-".concat(n.name,"' and self.extension = true")},e.next=20,je.search({data:b});case 20:v=e.sent,g=v.data,(h=(void 0===g?[]:g)[0])&&a((function(e){e.extensionView=h,e.extensionXML=JSON.parse(A.a.xml2json(h.xml,{compact:!1,fullTagEmptyElement:!1}))})),a((function(e){x&&m(e),e.attrsList=r,e.translationList=f,e.initialTranslationList=f,e.removedTranslationList=[],s&&(e.widgets=s.widgets,e.initialWidgets=s.widgets,e.items=s.items,e.initialItems=s.items,e.metaFields=Object(u.a)(e.metaFieldStore).filter((function(e){return-1===s.fieldList.findIndex((function(t){return t.name===e.name}))}))),e.selectedView=n,i.view&&(e.view={fields:e.metaFields,view:i.view},e.exView=i.view),e.loader=!1,e.extensionMoves=[],e.errorList={},e.baseHasChanges=!1,Object(ye.b)(e)}));case 25:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),!x||!g)}),[a,o,l,m,t,v,x,g]),S=i.a.useCallback((function(){var e="self.type='form'",a="".concat(t?t.fullName:"");return{_domain:e="".concat(e," and self.model='").concat(a,"' and (self.computed = true OR self.name NOT IN (select meta.name from MetaView meta where meta.computed = true))"),fields:["name","model","title","type","extension","xmlId","computed","xml"]}}),[t]),C=i.a.useCallback((function(){return{fields:["name","fullName","packageName"]}}),[]),E=i.a.useCallback((function(){return{_domain:"self.json = true and self.metaModel.id='".concat(t?t.id:-1,"'"),fields:["name"]}}),[t]),M=!!r,F=i.a.useMemo((function(){return v((function(e){e?Object(ve.d)(e,t).then((function(t){var n=t.data,i=void 0===n?[]:n,r=Object(J.g)(i,void 0,"","customForm");a((function(t){var a,n;M&&m(t);var o=_.a.uniqueId();t.customFieldWidgets=(null===(a=Object.keys(r.widgets))||void 0===a?void 0:a.length)>2?r.widgets:Object(f.a)(Object(f.a)({},r.widgets),{},Object(w.a)({},o,Object(f.a)(Object(f.a)({name:"panel".concat(o)},T.j),{},{model:t.model.fullName}))),t.customFieldItems=(null===(n=r.items)||void 0===n?void 0:n.length)>0?r.items:["".concat(o)],t.customFields=i,t.modelField=e,t.customFieldHasChanges=!1}))})):a((function(t){M&&m(t),t.customFieldWidgets=null,t.customFieldItems=null,t.customFields=[],t.modelField=e,t.customFieldHasChanges=!1}))}),!M||!h)}),[t,a,v,M,m,h]),I=i.a.useMemo((function(){return v((function(e){var t=e.value;[T.i.CUSTOM,T.i.BASE].includes(t)&&Object(ve.k)().then((function(e){a((function(t){t.enableStudioApp=e}))}));var n=function(t){t.modelType=e?e.value:null,t.entityType=null,t.initialWidgets=null,t.initialItems=null,t.modelField=null,t.customFields=[],t.customFieldWidgets=null,t.metaFieldStore=[],t.extensionMoves=[],t.removedTranslationList=[],t.baseHasChanges=!1,t.customFieldHasChanges=!1,m(t)};t!==T.i.CUSTOM?a((function(e){m(e),n(e),e.model=null,e.customModel=null,e.widgets=null,e.items=[],e.view=null,e.exView=null,e.metaFields=[],e.metaFields=[],e.selectedView=null,e.errorList={},e.attrsList=[],e.translationList=[],e.initialTranslationList=[],e.baseHasChanges=!1,e.customFieldHasChanges=!1})):p(n)}))}),[a,p,m,v]),N=i.a.useCallback((function(e){return e.filter((function(t){if(!t.computed&&-1!==e.findIndex((function(e){return e.name===t.name&&e.computed})))return!1;return!0!==t.extension}))}),[]);return i.a.createElement(i.a.Fragment,null,i.a.createElement(be,{options:we,value:we.find((function(e){return e.value===n}))||null,filterSelectedOptions:!0,label:"Type",onChange:I,disableClearable:!0}),i.a.createElement(be,{onChange:j,label:"Model",model:y,searchFilter:C,value:t||null,onSearch:ge,modelType:n}),n===T.i.BASE&&i.a.createElement(i.a.Fragment,null,i.a.createElement(be,{onChange:k,label:"View",model:"com.axelor.meta.db.MetaView",searchFilter:S,getOptionLabel:function(e){return!0===e.extension?"".concat(e.name," (Extension)"):!0===e.computed?"".concat(e.name," (Computed)"):e.name},value:b||null,filterData:N}),i.a.createElement(be,{label:"Custom fields",model:"com.axelor.meta.db.MetaField",searchFilter:E,onChange:F,value:r||null})))})),ke=function(e,t){var a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,i=Object(n.useRef)(t);Object(n.useLayoutEffect)((function(){i.current=t}));var r=Object(n.useCallback)((function(t){e.some((function(e){return t.key===e&&t.ctrlKey}))&&(t.preventDefault(),i.current(t))}),[e]);Object(n.useEffect)((function(){var e=null!==a&&void 0!==a?a:document;return e&&e.addEventListener("keydown",r),function(){return e&&e.removeEventListener("keydown",r)}}),[r,a])};var Se=["update","saveView","saveCustomFieldView","removeView","onNew","reset","showAlert","onSelect","isStudioLite","onWidgetChange"],Te=Object(b.a)({toolbarContainer:{display:"flex",flexWrap:"wrap",width:"100%",height:"inherit",backgroundColor:"rgb(41, 56, 70)",padding:"0.5rem 0.75rem",".modern-dark &":{backgroundColor:"#323232"}},toolItemView:{color:"#fff",padding:"5px 10px"},crudIcon:{height:"1em",width:"1em",fontSize:14,cursor:"pointer"},selectionContainer:{flex:1,display:"flex",alignItems:"center",flexWrap:"wrap"},toolbarActions:{display:"flex",alignItems:"center"},disableBtn:{color:"#555 !important"},searchContainer:{width:300}});function Ce(e){var t=Te();return i.a.createElement(D.a,Object.assign({className:t.toolItemView,classes:{disabled:t.disableBtn}},e))}var Ee=function(e){return null===e.title?"".concat(null===e||void 0===e?void 0:e.type," (").concat(null===e||void 0===e?void 0:e.name,")"):e.name?"".concat(null===e||void 0===e?void 0:e.title," (").concat(null===e||void 0===e?void 0:e.name,")"):"".concat(null===e||void 0===e?void 0:e.title," ")},Me=function(e,t){return e&&e.name?(null===e||void 0===e?void 0:e.name)===(null===t||void 0===t?void 0:t.name):(null===e||void 0===e?void 0:e.title)===(null===t||void 0===t?void 0:t.title)};var Fe=i.a.memo((function(e){var t,a=e.update,r=e.saveView,o=e.saveCustomFieldView,l=e.removeView,c=e.onNew,d=e.reset,f=e.showAlert,p=e.onSelect,b=e.isStudioLite,v=e.onWidgetChange,g=Object(s.a)(e,Se),h=Te(),y=Object(C.b)().state,O=y.extensionView,w=y.model,x=y.modelType,k=y.customModel,S=y.widgets,E=y.customFieldWidgets,M=y.highlightedOption,F=y.selectedView,I=y.errorList,N=y.past,A=y.future,L=y.modelField,W=y.entityType,q=y.metaFieldStore,V=y.tabPanelItems,B=void 0===V?[]:V,P=y.baseHasChanges,_=y.customFieldHasChanges,D=function(e){var t=Object(n.useState)(e),a=Object(m.a)(t,2),i=a[0],r=a[1],o=Object(C.b)().update,l=Object(n.useRef)(null),c=function(e){"Escape"===e.key&&(r(!1),o((function(e){e.highlightedOption=null})))},s=function(e){l.current&&!l.current.contains(e.target)&&r(!1)};return Object(n.useEffect)((function(){return document.addEventListener("keydown",c,!0),document.addEventListener("click",s,!0),function(){document.removeEventListener("keydown",c,!0),document.removeEventListener("click",s,!0)}})),{ref:l,isComponentVisible:i,setIsComponentVisible:r}}(!1),U=D.isComponentVisible,R=D.setIsComponentVisible,z=!(O||(t=F,t&&t.xmlId&&0===t.xmlId.indexOf("studio-"))||x===T.i.CUSTOM&&Boolean(k)),H=x===T.i.BASE&&!w,X=Object.keys(I).length>0,G=function(e){return Object.values(e||{})},Z=i.a.useCallback((function(){X?f((G((G(I)||[])[0])||[])[0]):(r(),x===T.i.BASE&&o(),p({id:-1}))}),[r,o,x,X,f,I,p]),Y=Object(n.useState)([]),Q=Object(m.a)(Y,2),K=Q[0],$=Q[1],ee=Object(n.useCallback)((function(e){var t=[];return Object.keys(e||{}).forEach((function(a){var n=e[a],i=n.name,r=n.title,o=n.type,l=n.autoTitle,c=void 0===l?"":l;if((i||r)&&!["form","panel-tabs"].includes(o)){var s={id:a||null,name:i,title:r||c||null,type:o,isTab:"panel"===o&&!0};t.push(s)}})),t}),[]),te=Object(n.useCallback)((function(e){if((x!==T.i.BASE||w)&&(x!==T.i.BASE||S||E)){R(!0),a((function(e){e.editWidget=-1}));var t=[],n=ee(S);if(t.push.apply(t,Object(u.a)(n)),E){var i=ee(E);t.push.apply(t,Object(u.a)(i))}$(t)}}),[w,x,R,a,ee,S,E]);ke(["s"],Z),ke(["f"],te);var ae=Object(n.useCallback)((function(e){R(e),a((function(e){e.highlightedOption=null,e.editWidget=-1}))}),[R,a]),ne=Object(n.useCallback)((function(e){a((function(t){t.highlightedOption=null,t.editWidget=null===e||void 0===e?void 0:e.id,R(!1)}))}),[R,a]),ie=Object(n.useCallback)((function(e){var t,n,i,r=Object.keys(S||{}).find((function(t){return(S[t].items||[]).indexOf(null===e||void 0===e?void 0:e.id)>-1})),o=null===(t=Object.keys(E||{}))||void 0===t?void 0:t.find((function(t){return(E[t].items||[]).indexOf(null===e||void 0===e?void 0:e.id)>-1})),l=null===(n=Object.keys(S||{}))||void 0===n?void 0:n.find((function(e){var t;return(null===(t=S[e])||void 0===t?void 0:t.type)===T.l.tabs})),c=null===(i=Object.keys(E||{}))||void 0===i?void 0:i.find((function(e){var t;return(null===(t=E[e])||void 0===t?void 0:t.type)===T.l.tabs}));e&&(a((function(t){t.highlightedOption=e})),x===T.i.CUSTOM?(a((function(e){e.editWidgetType=-1})),(null===e||void 0===e?void 0:e.isTab)&&l===r&&(l||r)?v({id:r,props:{current:e&&e.id,_type:null},skipGenerateHistory:!0}):v({id:l,props:{current:r,_type:null},skipGenerateHistory:!0})):x===T.i.BASE&&(E&&o?(a((function(e){e.editWidgetType="customField"})),v({id:(null===e||void 0===e?void 0:e.isTab)?o:c,props:{current:(null===e||void 0===e?void 0:e.isTab)?null===e||void 0===e?void 0:e.id:o,_type:"customField"},skipGenerateHistory:!0})):(null===e||void 0===e?void 0:e.isTab)||!r||!l||o&&c?!((null===e||void 0===e?void 0:e.isTab)&&r&&l)||o&&c||(a((function(e){e.editWidgetType=null})),v({id:l===r?r:l,props:{current:l===r?null===e||void 0===e?void 0:e.id:r,_type:null},skipGenerateHistory:!0})):(a((function(e){e.editWidgetType=null})),(null===B||void 0===B?void 0:B.includes(r))?v({id:l,props:{current:r,_type:null},skipGenerateHistory:!0}):Object.keys(S||{}).forEach((function(t){var a;if("panel"===S[t].type&&(null===(a=S[t].items)||void 0===a?void 0:a.includes(null===e||void 0===e?void 0:e.id))){var n,i=null===(n=S[t])||void 0===n?void 0:n.xPath.split("/panel")[1],r=null===i||void 0===i?void 0:i.substring(8,i.length-2);Object.keys(S||{}).forEach((function(e){S[e].name===r&&v({id:l,props:{current:e,_type:null},skipGenerateHistory:!0})}))}})))))}),[S,E,a,x,v,B]),re=Object(n.useCallback)((function(){a((function(e){var t,a;e.editWidget=(null===(t=e.highlightedOption)||void 0===t?void 0:t.id)?null===(a=e.highlightedOption)||void 0===a?void 0:a.id:-1,e.highlightedOption=null}))}),[a]),oe=i.a.useRef(ie),le=i.a.useRef(null);i.a.useEffect((function(){oe.current=ie}),[M,ie]);var ce=i.a.useCallback((function(e,t){clearTimeout(le.current),le.current=setTimeout((function(){t&&oe.current(t)}),e?100:200)}),[]);i.a.useEffect((function(){return function(){clearTimeout(le.current)}}),[]);var se=i.a.useCallback((function(e){var t={message:Object(J.q)("Current changes will be lost. Do you really want to proceed?"),title:Object(J.q)("Question"),onOK:e,type:"confirm"};a((function(e){e.loader=!1,e.dialog=t}))}),[a]),de=N.length>0||A.length>0||P||_,ue=i.a.useCallback((function(e,t){return function(){for(var a=arguments.length,n=new Array(a),i=0;i<a;i++)n[i]=arguments[i];de&&!t?se((function(){return e.apply(void 0,n)})):e.apply(void 0,n)}}),[se,de]),fe=i.a.useMemo((function(){return ue(c)}),[c,ue]),me=i.a.useMemo((function(){return ue(g.refresh)}),[g.refresh,ue]);return i.a.createElement("div",{className:h.toolbarContainer},i.a.createElement("div",{className:h.toolbarActions},x!==T.i.BASE&&i.a.createElement(Ce,{className:h.toolItemView,onClick:fe,disabled:H},i.a.createElement("i",{className:j()("fa fa-plus",h.crudIcon)})),i.a.createElement(Ce,{className:h.toolItemView,onClick:Z,disabled:X},i.a.createElement("i",{className:j()("fa fa-floppy-o",h.crudIcon)})),x===T.i.CUSTOM&&i.a.createElement(Ce,{className:h.toolItemView,onClick:l,disabled:z},i.a.createElement("i",{className:j()("fa fa-trash-o",h.crudIcon)}))),!b&&i.a.createElement("div",{className:h.selectionContainer},i.a.createElement(xe,Object.assign({model:w,update:a,modelType:x,reset:d,modelField:L,selectedView:F,entityType:W,metaFieldStore:q,runIfConfirmed:ue,baseHasChanges:P,customFieldHasChanges:_},g))),i.a.createElement("div",{className:h.toolbarActions},U?i.a.createElement(be,{options:K,className:h.searchContainer,autoHighlight:!0,open:!0,onChange:ne,onClose:re,onHighlightChange:ce,handleOutsideClick:ae,getOptionLabel:Ee,getOptionSelected:Me}):i.a.createElement(Ce,{className:h.toolItemView,onClick:te,disabled:x===T.i.BASE&&!w||x===T.i.BASE&&!S&&!E},i.a.createElement("i",{className:j()("fa fa-search",h.crudIcon)})),i.a.createElement(Ce,{className:h.toolItemView,onClick:me,disabled:!k&&!w},i.a.createElement("i",{className:j()("fa fa-refresh",h.crudIcon)})),i.a.createElement(Ce,{className:h.toolItemView,onClick:function(){return g.undo()},disabled:N.length<=0},i.a.createElement("i",{className:j()("fa fa-reply",h.crudIcon)})),i.a.createElement(Ce,{onClick:function(){return g.redo()},disabled:A.length<=0},i.a.createElement("i",{className:j()("fa fa-share",h.crudIcon)}))))})),Ie=a(88),Ne=a(316),Ae=Object(b.a)({paper:{minWidth:300},button:{textTransform:"none",backgroundColor:"#0275d8",borderColor:"#0275d8",color:"#fff","&:hover":{backgroundColor:"#0275d8",borderColor:"#0275d8",color:"#fff"}}});function Le(e){var t=e.onOk,a=e.onClose,n=e.open,r=e.message,o=e.title,l=void 0===o?"Delete Confirmation":o,c=Ae();return i.a.createElement(L.a,{open:n,onClose:a,"aria-labelledby":"alert-dialog-title","aria-describedby":"alert-dialog-description",classes:{paper:c.paper}},i.a.createElement(W.a,{id:"alert-dialog-title"},Object(J.q)(l)),i.a.createElement(q.a,null,i.a.createElement(Ne.a,{id:"alert-dialog-description"},Object(J.q)(r))),i.a.createElement(V.a,null,i.a.createElement(B.a,{onClick:t,color:"primary",className:c.button},Object(J.q)("Yes")),i.a.createElement(B.a,{onClick:a,color:"primary",autoFocus:!0,className:c.button},Object(J.q)("No"))))}var We=a(67);function qe(e){return e.split("[").length-1>1}var Ve=function(e,t){if(e){var a=e.attributes,n=J.f.exploreTarget(e.target),i=Object.values(t).find((function(e){var t=J.f.exploreTarget(e.xPath);return t.self||n.self?t.self===n.self:!(!t.parent&&!n.parent)&&t.parent===n.parent})),r=J.f.dashToCamelCase(a.name);if(i){var o=i[r],l=i[a.maskName];if(void 0===l&&(l=""),void 0===o&&(o=!1),a.maskName!==a.name){if("".concat(l)==="".concat(a.value))return!0}else{if("".concat(o)==="".concat(a.value))return!0;if(["",void 0,null].includes(i[r])&&["",void 0,null].includes(a.value))return!0;if(a.maskName!==a.name&&["",void 0,null].includes(i[a.maskName])&&["",void 0,null].includes(a.value))return!0}}}return!1};function Be(e,t){var a=[],n=[],i=e.attrsList,r=void 0===i?[]:i,o=e.extensionMoves.filter((function(e){return"attribute"===e.name})),l=e.selectedView,c=e.model,s=new Map,d=function(e){var t=e.widgets,a=e.items;return Object.keys(t).forEach((function(e){var n=Object(ye.a)(t,a,e);t[e].xPath=n})),t}(J.f.generateXMLToViewSchema({view:e.view.view,fields:e.metaFieldStore,attrsList:e.attrsList}));return o.forEach((function(e){var t=function(e){return T.m[e]}(e.attributes.name)||e.attributes.name,a=e.id,n=e.attributes.value,i=Object.assign({},Object(f.a)(Object(f.a)({},e),{},{attributes:Object(f.a)(Object(f.a)({},e.attributes),{},{name:t,value:n,maskName:e.attributes.name})}));s.set(t+a,i)})),s.forEach((function(e){var i=e,o=J.f.exploreTarget(i.target),s=i.attributes,u=function(e){var t=e.self,a=e.parent,n="",i=t||a;if(i){var r=i.indexOf("@name='")+"@name='".length,o=i.indexOf("']");n=i.substring(r,o)}return n}(o),m=r.findIndex((function(e){return u.includes(e.field)&&(e.name===s.name||T.m[e.name]===s.name)})),p=r[m],b=Ve(i,t),v=Ve(i,d),g=/(['"])(?:(?!\1|\\).|\\.)*\1/,h=a.findIndex((function(e){var t;return o.self&&(null===(t=o.self.match(g))||void 0===t?void 0:t[0].includes(e.field))&&e.name===s.name})),y=T.b[s.name];b||v?-1!==h?a.splice(h,1):p&&p.id&&n.push({id:p.id,version:p.version}):p?[null,void 0].includes(s.value)?y?y===s.value&&n.push({id:p.id,version:p.version}):n.push({id:p.id,version:p.version}):p.value!==s.value&&(y?y===s.value&&n.push({id:p.id,version:p.version}):-1===h?a.push(Object(f.a)(Object(f.a)({},p),{},{name:s.name,value:s.value,maskName:s.maskName})):(a[h].value=s.value,a[h].maskName=s.maskName)):u&&(-1===h?a.push({view:l.name,model:c.fullName,name:s.name,maskName:s.maskName,value:s.value,field:u}):(a[h].value=s.value,a[h].maskName=s.maskName))})),{changedAttrsList:a,removedAttrsList:n}}function Pe(e,t){var a=[],n=e.extensionMoves.filter((function(e){return"attribute"!==e.name})),i=Object(u.a)(n);return n.forEach((function(e,t){if(e.target){var n=J.f.exploreTarget(e.target),r=!0;n.self&&qe(n.self)&&(r=!1),n.parent&&qe(n.parent)&&(r=!1),"attribute"===e.name&&r&&function(e){if(-1===a.findIndex((function(t){return t.target===e.target&&t.name===e.attributes.name}))){var t=i.map((function(t,a){if(t.target===e.target&&t.attributes&&e.attributes.name===t.attributes.name)return a})).filter((function(e){return void 0!==e})),n=t[t.length-1];a.push({target:e.target,name:e.attributes.name}),i=i.filter((function(t,a){return t.target!==e.target||!e.attributes||!t.attributes||e.attributes.name!==t.attributes.name||n===a}))}}(e),"replace"===e.name&&r&&((null===n||void 0===n?void 0:n.self)&&n.self.includes("panel")||!(null===n||void 0===n?void 0:n.self)&&(null===n||void 0===n?void 0:n.parent.includes("panel"))||function(e){var t=!1,a=J.f.exploreTarget(e.target),n=i.findIndex((function(e){return"insert"===e.name&&(e.elements&&e.elements[0]&&a.self?a.self.includes("'".concat(e.elements[0].name,"'")):a.parent&&a.parent.includes(e.elements[0].name))})),r=i.filter((function(e){if(e.target){var t=J.f.exploreTarget(e.target);return["insert","move"].includes(e.name)&&t.self&&t.self.includes(a.self)}return!1}));if(-1===n||r.length||(t=!0,i.splice(n,1),Object(u.a)(i).forEach((function(t){if("move"===t.name&&t.source&&t.source===e.target){var a=i.findIndex((function(t){return"move"===t.name&&t.source&&t.source===e.target}));-1!==a&&i.splice(a,1)}}))),i=i.filter((function(t){return"attribute"!==t.name||t.target!==e.target})),t){var o=i.findIndex((function(t){return"replace"===t.name&&t.target===e.target}));-1!==o&&i.splice(o,1)}}(e))}})),i}var _e=["fields"],De=["fields"],Ue=new U.a({model:"com.axelor.meta.db.MetaView"}),Je=new U.a({model:"com.axelor.meta.db.MetaJsonField"}),Re=Object(b.a)((function(){return{paper:{minWidth:300},button:{textTransform:"none",backgroundColor:"#0275d8",borderColor:"#0275d8",color:"#fff","&:hover":{backgroundColor:"#0275d8",borderColor:"#0275d8",color:"#fff"}}}})),ze=function(e){var t=e.widgets,a=e.items;return Object.keys(t).forEach((function(e){var n=Object(ye.a)(t,a,e);t[e].xPath=n})),t},He=function(e,t,a){var n=[];return{changedTranslationList:e.filter((function(e){if(-1!==a.indexOf(e.key))return e.id&&n.push({id:e.id,version:e.version}),!1;if(e.id){var i=t.find((function(t){return t.language===e.language&&t.key===e.key}));return!(!i||i.message===e.message)}return!0})),deletedTranslationList:n}};var Xe=i.a.memo((function(e){var t=Object(C.b)(),a=t.state,n=t.update,r=t.startLoader,o=t.undo,l=t.redo,p=t.clearHistory,b=t.onSelect,v=t.onWidgetChange,g=i.a.useState(!1),h=Object(m.a)(g,2),y=h[0],O=h[1],j=a.customFieldWidgets,x=a.widgets,k=a.modelType,S=a.isStudioLite,E=a.queryModel,M=Re(),F=i.a.useCallback((function(){n((function(e){e.loader=!1}))}),[n]),I=i.a.useCallback((function(e,t){var a=Object(f.a)(Object(f.a)({message:Object(J.q)(e)||Object(J.q)("Some error occurred")},t?{title:Object(J.q)(t)}:{}),{},{type:"alert"});n((function(e){e.loader=!1,e.dialog=a}))}),[n]),N=i.a.useCallback((function(e,t){var a=function(t){e&&e(t),t.errorList={},t.customModel=null,t.exView=null,t.view=null,t.extensionXML=null,t.extensionView=null,t.loader=!1,t.metaFields=t.metaFieldStore||[],t.selectedView=null,t.translationList=[],t.initialTranslationList=[],t.attrsList=[],t.model=null;var a=_.a.uniqueId();t.widgets=Object(w.a)({"-1":Object(f.a)({type:"form",cols:12,extension:!1,name:S?null===E||void 0===E?void 0:E.name:null,title:S?null===E||void 0===E?void 0:E.title:null},J.f.getDefaultProperties(t.modelType)),0:{type:"dump_field",name:""}},a,Object(f.a)({name:"panel".concat(a)},T.j)),t.items=["".concat(a)],t.editWidget=-1,t.editWidgetType=null,t.tabIndex=0};t?a(t):n(a)}),[n,S,E]),P=i.a.useCallback((function(){r();var e,t=function(e){n((function(t){p(t),t.customModel=null,t.dialog=e,t.widgets=null,t.initialItems=null,t.initialWidgets=null,t.items=[],t.view=null,t.metaFields=[],t.selectedView=null,t.originalXML=null,t.extensionXML=null,t.selectedView=null,t.loader=!1,t.extensionView=null,t.errorList={},t.modelType===T.i.CUSTOM&&N(null,t)}))};a.modelType===T.i.CUSTOM?(a.model||a.customModel)&&Object(ve.q)(a.model||a.customModel).then((function(e){var a=e||{},n=a.data;if(-1!==a.status)t(null);else{var i=(n||{}).message;I(void 0===i?"":i)}})):(a.extensionView?e={id:a.extensionView.id,version:a.extensionView.version}:a.selectedView&&a.selectedView.xmlId&&0===a.selectedView.xmlId.indexOf("studio-")&&(e={id:a.selectedView.id,version:a.selectedView.version}),e&&Ue.removeAll([e]).then((function(e){t(null)})))}),[n,a,r,p,N,I]),D=i.a.useCallback(Object(d.a)(c.a.mark((function e(){var t,i,o,l,d,u,m,b,v,g,h,y,O,j;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(a.modelType!==T.i.CUSTOM){e.next=16;break}if(t=a.customModel){e.next=4;break}return e.abrupt("return");case 4:return e.next=6,Object(ve.e)(t.id,(function(e){I(null===e||void 0===e?void 0:e.message,null===e||void 0===e?void 0:e.title)}));case 6:if(e.t0=e.sent,e.t0){e.next=9;break}e.t0={};case 9:i=e.t0,o=i.fields,l=void 0===o?[]:o,(d=Object(s.a)(i,_e)).studioMenu&&(d.studioMenu=Object(f.a)(Object(f.a)({},t.studioMenu),d.studioMenu)),Object(ve.f)(l.map((function(e){return e.id})),n,d),n((function(e){e.customModel=Object(f.a)(Object(f.a)({},i||{}),{},{studioMenu:null===d||void 0===d?void 0:d.studioMenu}),e.model=i,e.loader=!1,e.removedCustomFields=[],e.errorList={},p(e)})),e.next=31;break;case 16:if(!a.widgets){e.next=30;break}return b=a.view,e.next=20,Ue.fetch(null===b||void 0===b||null===(m=b.view)||void 0===m?void 0:m.id);case 20:if(!(v=e.sent)||-1!==v.status){e.next=25;break}return g=v.data||{},h=g.message,y=g.title,I(h,y),e.abrupt("return");case 25:return O=v&&v.data&&v.data[0],e.next=28,Object(ve.c)({model:a.model.fullName,view:a.selectedView.name});case 28:j=e.sent,n((function(e){e.loader=!1;var t=e.view,a=J.f.generateXMLToViewSchema({view:O,fields:e.metaFieldStore,extensionXML:t.extensionXML,attrsList:j||[]});e.widgets=a.widgets,e.initialWidgets=a.widgets,e.items=a.items,e.initialItems=a.items,e.extensionMoves=[],e.attrsList=j||[],e.errorList={},e.baseHasChanges=!1,Object(ye.b)(e),p(e)}));case 30:(a.customFieldItems||a.removedCustomFields.length)&&(null===(u=a.modelField)||void 0===u?void 0:u.name)?(r(),Object(ve.d)(a.modelField,a.model).then((function(e){if(e&&-1===e.status){var t=e.data||{},a=t.message,i=t.title;I(a,i)}else{var r=e.data,o=void 0===r?[]:r,l=Object(J.g)(o,void 0,"","customForm");n((function(e){var t,a,n=_.a.uniqueId();e.customFieldWidgets=(null===(t=Object.keys(l.widgets))||void 0===t?void 0:t.length)>2?l.widgets:Object(f.a)(Object(f.a)({},l.widgets),{},Object(w.a)({},n,Object(f.a)(Object(f.a)({name:"panel".concat(n)},T.j),{},{model:e.model.fullName}))),e.customFieldItems=(null===(a=l.items)||void 0===a?void 0:a.length)>0?l.items:["".concat(n)],e.customFields=o,e.loader=!1,e.removedCustomFields=[],e.errorList={},e.customFieldHasChanges=!1,p(e)}))}}))):F();case 31:case"end":return e.stop()}}),e)}))),[n,a,F,r,I,p]),U=i.a.useCallback((function(){var e,t=(Object.values((k===T.i.BASE?j:x)||{})||[]).find((function(e){return e.type===T.l.tabs}));return!(t&&!(null===t||void 0===t||null===(e=t.items)||void 0===e?void 0:e.length))||(I("Tabs should have atleast one panel"),!1)}),[j,x,k,I]),R=i.a.useCallback((function(){var e=a.sideItems,t=a.mainItems;return!(!e.length||t.length)&&(I("Main panel is required to have side panels"),!0)}),[a,I]),z=i.a.useCallback(Object(d.a)(c.a.mark((function e(){var t,i,o,l,m,b,v,g,h,y,O,j,w,x,k,S,C,E,M,F,N,L,W,q,V,B,_,D,z,H,X,G,Z,Y,Q,K,$,ee,te,ae,ne,ie,re,oe,le,ce,se,de;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(a.widgets){e.next=2;break}return e.abrupt("return");case 2:if(U()&&!R()){e.next=4;break}return e.abrupt("return");case 4:if(r(),window.parent&&(window.parent.studioOutput=JSON.stringify({isSave:!0,form:null===(t=a.widgets[-1])||void 0===t?void 0:t.title})),a.modelType!==T.i.CUSTOM){e.next=43;break}if(i=J.f.getCustomModelFields(a.items,a.widgets,null,!0),o=i.fields,l=Object.values(a.widgets||{})||[],!((new Set(l.map((function(e){return e.name})))||[]).size<l.length)){e.next=13;break}return I("Field name should be unique"),e.abrupt("return");case 13:if((m=a.widgets[-1]).name&&m.title){e.next=17;break}return I("Please enter form name and title"),e.abrupt("return");case 17:if(!a.removedCustomFields.length){e.next=25;break}return e.next=20,Je.removeAll(a.removedCustomFields);case 20:if(!(b=e.sent)||-1!==b.status){e.next=25;break}return v=b.data||{},g=v.message,h=v.title,I(g,h),e.abrupt("return");case 25:if(y=Object(f.a)(Object(f.a)(Object(f.a)({},a.customModel),J.f.getFormProperties(m)),{},{fields:o},a.customModel&&{version:a.customModel.version}),!0===m.isGenerateMenu&&(y.studioMenu=Object(f.a)(Object(f.a)({},(a.customModel||{}).studioMenu),{},{title:m.menuBuilderTitle,parentMenu:m.menuBuilderParent,version:((a.customModel||{}).studioMenu||{}).$version})),O=a.customModel||{},j=O.isGenerateMenu,m.isGenerateMenu===j){e.next=40;break}return e.next=31,Object(ve.j)(y);case 31:if(w=e.sent,x=w.data,!(k=void 0===x?[]:x)[0]||!k[0].reload){e.next=40;break}return e.next=36,Object(ve.e)(y.id,(function(e){I(null===e||void 0===e?void 0:e.message,null===e||void 0===e?void 0:e.title)}));case 36:if(S=e.sent){e.next=39;break}return e.abrupt("return");case 39:y=Object(f.a)(Object(f.a)({},y),{},{studioMenu:null,version:S.version});case 40:Object(ve.s)(y).then((function(e){var t=e||{},a=t.data;if(-1===t.status){var i=a||{},r=i.message,o=void 0===r?"":r,l=i.title,c=o;return l&&l.includes(Object(J.q)("Unique constraint violation"))&&(c=Object(J.q)("Model name should be unique"),o.includes("com.axelor.meta.db.MetaJsonRecord")&&(c=Object(J.q)("Field name should be unique"))),void I(c)}var d=a&&a[0],u=d.fields,m=void 0===u?[]:u,b=Object(s.a)(d,De);b.studioMenu&&(b.studioMenu=Object(f.a)(Object(f.a)({},y.studioMenu),b.studioMenu)),Object(ve.f)(m.map((function(e){return e.id})),n,b),n((function(e){e.customModel=d,e.model=d,e.loader=!1,e.removedCustomFields=[],p(e)}))})),e.next=118;break;case 43:if(!a.widgets){e.next=118;break}if(C=["viewId","modelId","version","helpOverride","menubar","xml","computed","xmlId","type","cols","colSpan","serverType"],a.exView&&!J.f.isCreatedFromStudio(a.exView)){e.next=65;break}if((M=a.widgets[-1]).name&&M.title){e.next=50;break}return I("Please enter form name and title"),e.abrupt("return");case 50:return e.next=52,Ue.search({data:{_domain:"self.name = '".concat(M.name,"'")}});case 52:if(!((F=e.sent)&&F.total&&F.total>0)||(null===(E=a.exView)||void 0===E?void 0:E.id)){e.next=56;break}return I("View name already exists"),e.abrupt("return");case 56:N=Object(Ie.a)(a.widgets,a.items,a.modelType),L=a.model.fullName,W={elements:[{name:"form",type:"element",attributes:Object(f.a)(Object(f.a)({model:L},J.f.getFormProperties(M,[].concat(C,["extension","id"]))),{},{id:a.exView&&a.exView.xmlId?a.exView.xmlId:"studio-".concat(M.name)}),elements:Object(u.a)(N)}]},q=J.f.processXML(A.a.json2xml(W,{compact:!1,fullTagEmptyElement:!1})),V={xml:q,extension:M.extension,type:"form",name:M.name,title:M.title,model:L,xmlId:"studio-".concat(M.name)},a.exView&&a.exView.id&&(V.id=a.exView.id,V.version=a.exView.version,V.xmlId=a.exView.xmlId||V.xmlId),Ue.save(V).then(function(){var e=Object(d.a)(c.a.mark((function e(t){var a,i,r;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(-1!==t.status){e.next=5;break}a=t.data,I((null===a||void 0===a?void 0:a.string)||(null===a||void 0===a?void 0:a.message),null===a||void 0===a?void 0:a.title),e.next=10;break;case 5:if(!t.data||!t.data[0]){e.next=10;break}return e.next=8,Ue.fetch(t.data[0].id);case 8:(i=e.sent).data&&i.data[0]&&(r=i.data[0],n((function(e){var t=J.f.generateXMLToViewSchema({view:r,fields:e.metaFieldStore});e.widgets=t.widgets,e.initialWidgets=t.widgets,e.items=t.items,e.initialItems=t.items,e.metaView=r,e.exView=r,e.selectedView=Object(f.a)({},r),e.loader=!1,e.baseHasChanges=!1,p(e)})));case 10:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),e.next=118;break;case 65:if(B=a.view.view,_=a.model.fullName,D=J.f.generateViewFromJson({view:a.originalXML,fields:a.metaFieldStore}),z=ze(D),H=Pe(a),X=Be(a,z),G=X.changedAttrsList,Z=X.removedAttrsList,Y=Object(We.b)(H,a),Q=!1,K=[],!G.length){e.next=80;break}return Q=!0,$=Object.values(T.m),ee=G.map((function(e){return[].concat(Object(u.a)($),Object(u.a)(T.n)).includes(e.name)?e:Object(f.a)(Object(f.a)({},e),{},{value:'"'.concat(e.value,'"')})})),e.next=80,Object(ve.r)(ee,(function(e){I(null===e||void 0===e?void 0:e.message,null===e||void 0===e?void 0:e.title)}));case 80:if(!Z.length){e.next=84;break}return Q=!0,e.next=84,Object(ve.a)(Z,(function(e){I(null===e||void 0===e?void 0:e.message,null===e||void 0===e?void 0:e.title)}));case 84:if(!Q){e.next=88;break}return e.next=87,Object(ve.c)({model:a.model.fullName,view:a.selectedView.name});case 87:K=e.sent;case 88:if(te=He(a.translationList,a.initialTranslationList,a.removedTranslationList),ae=te.changedTranslationList,ne=te.deletedTranslationList,ie=[],re=!1,!ae.length){e.next=95;break}return re=!0,e.next=95,Object(ve.t)(ae,(function(e){I(null===e||void 0===e?void 0:e.message,null===e||void 0===e?void 0:e.title)}));case 95:if(!ne.length){e.next=99;break}return re=!0,e.next=99,Object(ve.b)(ne,(function(e){I(null===e||void 0===e?void 0:e.message,null===e||void 0===e?void 0:e.title)}));case 99:if(!re){e.next=105;break}return oe=Object.values(a.widgets).filter((function(e){return e.title&&e.title.startsWith("studio:")})).map((function(e){return e.title})),e.next=103,Object(ve.m)(oe);case 103:ie=e.sent,n((function(e){e.translationList=ie,e.initialTranslationList=ie,e.removedTranslationList=[]}));case 105:if(Y.length||a.extensionXML){e.next=108;break}return a.extensionView?P():n((function(e){e.loader=!1;var t=e.view;if(Q){var a=J.f.generateXMLToViewSchema({view:t.view,fields:e.metaFieldStore,extensionXML:t.extensionXML,attrsList:K});e.widgets=a.widgets,e.initialWidgets=a.widgets,e.items=a.items,e.initialItems=a.items,e.extensionMoves=[],e.attrsList=K,e.baseHasChanges=!1,Object(ye.b)(e),p(e)}})),e.abrupt("return");case 108:if(le=function(e){if(!e)return[];var t=e.elements;return t[0]&&t[0].elements?t[0].elements:void 0},ce={elements:[{type:"element",name:a.widgets[-1].type,attributes:{model:_,id:"studio-".concat(B.name),title:a.widgets[-1].title,name:B.name,extension:"true"},elements:[].concat(Object(u.a)(le(a.extensionXML)),Object(u.a)(Y))}]},se=J.f.processXML(A.a.json2xml(ce,{compact:!1,fullTagEmptyElement:!1})),de={xml:se,extension:!0,type:a.widgets[-1].type},de=a.extensionView?Object(f.a)(Object(f.a)({},de),{},{id:a.extensionView.id,version:a.extensionView.version}):Object(f.a)(Object(f.a)({},de),{},{model:_,name:B.name,title:B.title,xmlId:"studio-".concat(B.name)}),!a.extensionView){e.next=117;break}if(a.extensionView.xml!==de.xml){e.next=117;break}return n((function(e){e.loader=!1,Q&&n((function(e){e.loader=!1;var t=e.view,a=J.f.generateXMLToViewSchema({view:t.view,fields:e.metaFieldStore,extensionXML:t.extensionXML,attrsList:K});e.widgets=a.widgets,e.initialWidgets=a.widgets,e.items=a.items,e.initialItems=a.items,Q&&(e.attrsList=K),e.baseHasChanges=!1,Object(ye.b)(e),p(e)}))})),e.abrupt("return");case 117:Ue.save(de).then(function(){var e=Object(d.a)(c.a.mark((function e(t){var i,r,o,l;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(-1!==t.status){e.next=4;break}I(null===(i=t.data)||void 0===i?void 0:i.string),e.next=11;break;case 4:if(!t.data||!t.data[0]){e.next=11;break}return r=t.data[0],o=a.view.view,e.next=9,Object(ve.i)(o);case 9:l=e.sent,n((function(e){var a=J.f.generateXMLToViewSchema({view:l.view,fields:e.metaFieldStore,extensionXML:l.extensionXML,attrsList:K});e.widgets=a.widgets,e.initialWidgets=a.widgets,e.items=a.items,e.initialItems=a.items,e.exView=t.data[0],e.extensionMoves=[],e.loader=!1,Q&&(e.attrsList=K),e.extensionView=Object(f.a)(Object(f.a)(Object(f.a)({},e.extensionView),r),{},{version:l.extensionXML.id===r.id?l.extensionXML.version:r.version}),e.baseHasChanges=!1,Object(ye.b)(e),p(e)}));case 11:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}());case 118:case"end":return e.stop()}}),e)}))),[a,n,r,U,R,P,p,I]),H=i.a.useCallback((function(){n((function(e){e.dialog=null}))}),[n]),X=i.a.useCallback((function(){r(),N((function(e){p(e)}))}),[N,r,p]);i.a.useEffect((function(){N((function(e){e.modelType=T.i.CUSTOM}))}),[N]);var G=i.a.useCallback(Object(d.a)(c.a.mark((function e(){var t,i,o,l,s,d,u,b,v,g,h,y,O,j,x,k,S,C,E;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!a.customFieldItems&&!a.removedCustomFields.length||!(null===(t=a.modelField)||void 0===t?void 0:t.name)){e.next=39;break}if(U()){e.next=3;break}return e.abrupt("return");case 3:if(i=Object.fromEntries(Object.entries(a.customFieldWidgets).filter((function(e){var t,a=Object(m.a)(e,2)[1];return a.type===T.h.CONTAINER&&(null===(t=a.items)||void 0===t?void 0:t.length)>0||Object(J.n)(a)||a.type!==T.h.CONTAINER||"number"===typeof a.id}))),o=Object.values(i||{})||[],!((new Set(o.map((function(e){return e.name})))||[]).size<(o&&o.filter((function(e){return"customForm"!==e.type}))||[]).length)){e.next=9;break}return I("Field name should be unique"),e.abrupt("return");case 9:if(r(),l={modelField:a.modelField.name,model:a.model.fullName},s=J.f.getCustomModelFields(a.customFieldItems,i,l,!0),!(d=s.fields).length&&!a.removedCustomFields.length){e.next=35;break}if(!a.removedCustomFields.length){e.next=21;break}return e.next=16,Je.removeAll(a.removedCustomFields);case 16:if(!(u=e.sent)||-1!==u.status){e.next=21;break}return b=u.data||{},v=b.message,g=b.title,I(v,g),e.abrupt("return");case 21:return h=d.map((function(e){return Je.save(e)})),e.next=24,Promise.all(h);case 24:if(y=e.sent,!(O=y&&y.find((function(e){return-1===e.status})))||!O.data){e.next=32;break}return j=O.data||{},x=j.title,k=j.message,S=k,x&&x.includes(Object(J.q)("Unique constraint violation"))&&(S="Field name should be unique"),I(S),e.abrupt("return");case 32:Object(ve.d)(a.modelField,a.model).then((function(e){var t=e.data,a=void 0===t?[]:t,i=Object(J.g)(a,void 0,"","customForm");n((function(e){var t,n,r=_.a.uniqueId();e.customFieldWidgets=(null===(t=Object.keys(i.widgets))||void 0===t?void 0:t.length)>2?i.widgets:Object(f.a)(Object(f.a)({},i.widgets),{},Object(w.a)({},r,Object(f.a)(Object(f.a)({name:"panel".concat(r)},T.j),{},{model:e.model.fullName}))),e.customFieldItems=(null===(n=i.items)||void 0===n?void 0:n.length)>0?i.items:["".concat(r)],e.customFields=a,e.loader=!1,e.removedCustomFields=[],e.customFieldHasChanges=!1,p(e)}))})),e.next=39;break;case 35:F(),C=Object(J.g)([],void 0,"","customForm"),E=_.a.uniqueId(),n((function(e){e.customFieldWidgets=Object(f.a)(Object(f.a)({},C.widgets),{},Object(w.a)({},E,Object(f.a)(Object(f.a)({name:"panel".concat(E)},T.j),{},{model:e.model.fullName}))),e.customFieldItems=["".concat(E)],e.customFieldHasChanges=!1,p(e)}));case 39:case"end":return e.stop()}}),e)}))),[n,F,a,r,U,p,I]),Z=i.a.useCallback((function(){O(!1)}),[]),Y=i.a.useCallback((function(){O(!0)}),[]),Q=i.a.useCallback((function(){Z(),P()}),[P,Z]);return i.a.createElement(i.a.Fragment,null,function(){var e=a.dialog,t=null!==e&&void 0!==e?e:{},n=t.message,r=t.title,o=t.type,l=t.onOK;return e&&i.a.createElement(L.a,{open:!!n,classes:{paper:M.paper}},i.a.createElement(W.a,null,Object(J.q)(r||"Alert")),i.a.createElement(q.a,null,i.a.createElement("div",{dangerouslySetInnerHTML:{__html:Object(J.q)(n)}})),i.a.createElement(V.a,null,i.a.createElement(B.a,{onClick:function(){"confirm"===o&&l&&l(),H()},className:M.button,color:"primary",autoFocus:"confirm"!==o},"OK"),"confirm"===o&&i.a.createElement(B.a,{onClick:H,className:M.button,variant:"outlined",color:"primary",autoFocus:!0},Object(J.q)("Cancel"))))}(),i.a.createElement(Fe,{update:n,isStudioLite:S,saveView:z,saveCustomFieldView:G,removeView:Y,onNew:X,startLoader:r,undo:o,redo:l,refresh:D,clearHistory:p,reset:N,showAlert:I,onSelect:b,onWidgetChange:v}),i.a.createElement(Le,{open:y,onClose:Z,onOk:Q,message:"Are you sure? Do you want to delete it?"}))})),Ge=a(332),Ze=a(180),Ye=a(318),Qe=a(319),Ke=a(77),$e=a(315),et=Object($e.a)(),tt=Object(b.a)({autoComplete:{backgroundColor:"#293846",marginTop:15,".modern-dark &":{backgroundColor:"#323232"}},label:{color:"#e7eaec !important",fontSize:12},popperAutoComplete:{"& ul, .MuiAutocomplete-noOptions":{backgroundColor:"rgb(41, 56, 70) !important",".modern-dark &":{backgroundColor:"#1b1b1b !important"}},"& li, .MuiAutocomplete-noOptions":{color:"#e7eaec !important",backgroundColor:"rgb(41, 56, 70) !important",".modern-dark &":{backgroundColor:"#1b1b1b !important"}},"& li:hover, .MuiAutocomplete-noOptions":{color:"#e7eaec !important",backgroundColor:"#2f4050 !important",".modern-dark &":{backgroundColor:"#323232 !important"}}},input:{color:"#e7eaec",fontSize:13},root:{color:"#e7eaec"},error:{color:"red",marginBottom:5,fontSize:13},option:{fontSize:13},disabled:{color:"#a3a3a3 !important",fontSize:12},groupTitle:{position:"sticky",top:"-8px",padding:"4px 10px",color:"white",fontSize:14,fontWeight:"bold",backgroundColor:"#293846"}});function at(e){var t=e.field,a=t.name,r=t.ref,o=t.title,l=t.valueField,s=void 0===l?"id":l,p=t.type,b=t.multiple,v=void 0!==b&&b,g=t.commaSeparated,h=t.displayField,y=void 0===h?"name":h,O=t.limit,j=void 0===O?10:O,x=t.data,k=void 0===x?[]:x,S=t.isDisabled,E=t.needsTargetModel,M=t.canAddNew,F=void 0!==M&&M,I=t.getOptionLabel,N=t.shouldFetchInStart,A=void 0!==N&&N,L=t._domain,W=e.props,q=e.error,V=W.propertyList,B=W.setPropertyList,P=W.onChange,D=W.editWidgetType,X=W.modelType,G=Object(n.useMemo)((function(){var e=V[a]||"";if(g&&"select"===p){var t=e?e.split(","):[];e=t.map((function(e){return Object(w.a)({},s,e)}))}return e}),[V,a,g,p,s]),Z=Object(n.useState)(Object(u.a)(k)),Y=Object(m.a)(Z,2),K=Y[0],$=Y[1],ee=Object(n.useState)(null),te=Object(m.a)(ee,2),ae=te[0],ne=te[1],ie=i.a.useRef(!0),re=Object(n.useState)(!1),oe=Object(m.a)(re,2),ce=oe[0],se=oe[1],de=Object(n.useState)(0),ue=Object(m.a)(de,2),me=ue[0],pe=ue[1],be=Object(n.useState)(0),ve=Object(m.a)(be,2),ge=ve[0],he=ve[1],ye=Object(n.useState)(!1),Oe=Object(m.a)(ye,2),je=Oe[0],we=Oe[1],xe=V.targetModel,ke=tt(),Se=!!S&&S(V,D,X),Te="onClick"===a&&"select"===p,Ce=Object(n.useState)(!0),Ee=Object(m.a)(Ce,2),Me=Ee[0],Fe=Ee[1],Ie=Object(C.b)().state,Ne=Ie.model,Ae=Ie.modelType,Le=Object(n.useState)(Ie.model?0:1),We=Object(m.a)(Le,2),qe=We[0],Ve=We[1],Be=Object(n.useCallback)((function(e,t,a){"reset"!==a&&ne("objectSelection"===p&&"object"===typeof t?t[y]:t)}),[p,y]),Pe=Object(n.useCallback)((function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];return g?e?e.map((function(e){return e.name})).join(","):"":r?e[s]:e}),[s,g,r]),_e=Object(n.useCallback)((function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n="CUSTOM"===Ae?"com.axelor.meta.db.MetaJsonRecord":null===Ne||void 0===Ne?void 0:Ne.fullName,i=[{type:"Model actions",criteria:{fieldName:"model",operator:"=",value:n||""}},{type:"Global actions",criteria:{fieldName:"model",operator:"isNull"}},{type:"Other actions",criteria:{fieldName:"model",operator:"!=",value:n||""}}],o=[];if(e&&o.push({fieldName:"name",operator:"like",value:e}),"gridView"!==a&&"formView"!==a||!E.includes(W.type)||xe){"gridView"===a&&(E.includes(W.type)&&o.push({fieldName:"model",operator:"=",value:xe}),o.push({fieldName:"type",operator:"=",value:"grid"})),"formView"===a&&(E.includes(W.type)&&o.push({fieldName:"model",operator:"=",value:xe}),o.push({fieldName:"type",operator:"=",value:"form"})),Te&&ce&&(qe===T.a.GLOBAL?o.push(i[T.a.GLOBAL].criteria):qe===T.a.MODEL?o.push(i[T.a.MODEL].criteria):o.push(i[T.a.OTHER].criteria));var l=Object(f.a)(Object(f.a)({},L?{_domain:L,_domainContext:{model:null===Ne||void 0===Ne?void 0:Ne.fullName}}:{}),{},{criteria:o,operator:"and"}),u=["name","fullName",s,y,"parent"].filter((function(e){return e}));if(A&&je);else{if(!Te||ce)return new U.a({model:r}).search({fields:u,data:l,limit:j,offset:t}).then((function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.data,a=e.total;if(A&&we(!0),t&&t.length){if(ie.current){var n;!ce&&!A&&a>j&&t.push((n={},Object(w.a)(n,y,Object(J.q)("Show more...")),Object(w.a)(n,"id","studio_show_More_View"),n)),he(a);var i=_.a.uniqBy(t,y);$(i)}}else $([]);Fe(!1)}));var m=function(){var e=Object(d.a)(c.a.mark((function e(){var a,n;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Promise.all([new U.a({model:r}).search({fields:u,data:{criteria:[].concat(o,[i[T.a.MODEL].criteria]),operator:"and"},limit:5,offset:t}),new U.a({model:r}).search({fields:u,data:{criteria:[].concat(o,[i[T.a.GLOBAL].criteria]),operator:"and"},limit:5,offset:t}),new U.a({model:r}).search({fields:u,data:{criteria:[].concat(o,[i[T.a.OTHER].criteria]),operator:"and"},limit:5,offset:t})]);case 2:return a=e.sent,e.next=5,Promise.all(a.map((function(e,t){return e.data?e.data.map((function(e){return Object(f.a)(Object(f.a)({},e),{},{type:i[t].type})})):{type:i[t].type,name:Object(J.q)("No data found"),id:"no_data_found"}})));case 5:(n=e.sent).push({name:Object(J.q)("Show more..."),id:"studio_show_More_View"}),$(n.flat());case 8:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();m()}}}),[a,r,xe,s,y,j,E,W.type,ce,je,A,Te,qe,Ne,Ae,L]),De=i.a.useCallback((function(){r&&null!=ae&&_e(ae)}),[_e,ae,r]),Ue=Object(n.useCallback)((function(e){var t;return"string"===typeof e&&r?(t={},Object(w.a)(t,s,e),Object(w.a)(t,y,e),t):e}),[s,r,y]),Je=i.a.useCallback((function(e){return e&&"string"===typeof e&&r&&(e=Object(w.a)({},s,e)),e}),[r,s]),Re=i.a.useCallback((function(e){ne(e),pe(0)}),[]),ze=i.a.useCallback((function(){var e=me+j;e<=ge&&(pe(e),_e(ae,e))}),[j,ge,me,_e,ae]),He=i.a.useCallback((function(){var e=me-j;pe(e=e>0?e:0),_e(ae,e)}),[me,j,ae,_e]),Xe=i.a.useCallback((function(){se(!1),ne(null),pe(0)}),[]),Ge=i.a.useCallback(function(){var e=Object(d.a)(c.a.mark((function e(t,n){var i,o,l,d,m,b,g,h,y;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if("studio_show_More_View"!==(null===(i=n)||void 0===i?void 0:i.id)){e.next=3;break}return se(!0),e.abrupt("return");case 3:if(!v){e.next=22;break}if(!t.fromDialog){e.next=9;break}n=[].concat(Object(u.a)(G),[n]),Re(""),e.next=19;break;case 9:if(!(-1!==n.findIndex((function(e){return"studio_show_More_View"===(null===e||void 0===e?void 0:e.id)})))){e.next=15;break}return se(!0),e.abrupt("return");case 15:Re("");case 16:if(!(-1!==n.findIndex((function(e){return"no_data_found"===(null===e||void 0===e?void 0:e.id)})))){e.next=19;break}return e.abrupt("return");case 19:n=n.map((function(e){if("studio_show_More_View"!==(null===e||void 0===e?void 0:e.id))return Je(e)})).filter((function(e){return e})),e.next=23;break;case 22:n&&n.inputValue&&n.inputValue.length&&r&&(n[s]=n.inputValue);case 23:if(o=Object(f.a)(Object(f.a)({},V),{},Object(w.a)({},a,"objectSelection"===p?n:n&&Pe(n))),l={},"targetModel"===a&&(d=(o||{}).targetModel,l={gridView:n?Object(J.i)(d):null,formView:n?Object(J.i)(d,!0):null}),"contextField"!==a){e.next=35;break}if(!o[a]){e.next=34;break}return e.next=30,new U.a({model:r}).action({action:"com.axelor.meta.web.MetaController:contextFieldChange",data:{context:Object(f.a)(Object(f.a)({},o),o.model?{}:{model:null===Ne||void 0===Ne?void 0:Ne.fullName})},model:"com.axelor.meta.db.MetaJsonField"});case 30:(null===(g=e.sent)||void 0===g||null===(m=g.data)||void 0===m||null===(b=m[0])||void 0===b?void 0:b.values)&&(o=Object(f.a)(Object(f.a)({},o),g.data[0].values)),e.next=35;break;case 34:o=Object(f.a)(Object(f.a)({},o),{},{contextFieldTarget:null,contextFieldTargetName:null,contextFieldValue:null,contextFieldTitle:null});case 35:"contextFieldTitle"===a&&(o.contextFieldValue=(null===(h=n)||void 0===h||null===(y=h.id)||void 0===y?void 0:y.toString())||null),B(Object(f.a)(Object(f.a)({},o||{}),l)),P(Object(f.a)(Object(f.a)({},o||{}),l),"selection"!==a?a:void 0);case 38:case"end":return e.stop()}}),e)})));return function(t,a){return e.apply(this,arguments)}}(),[Pe,v,a,P,B,V,G,p,r,Je,s,Re,Ne]),Ze=Object(n.useCallback)((function(e,t){Ve(t)}),[]);H(De,500),Object(n.useEffect)((function(){return ie.current=!0,function(){ie.current=!1}}),[]);var Ye=Object(n.useMemo)((function(){return v?G||[]:Ue(G)}),[G,v,Ue]);return Object(n.useEffect)((function(){ce&&(Fe(!0),_e(ae),pe(0),$([]))}),[_e,ce,ae]),i.a.createElement("div",{style:{display:"flex",flexDirection:"column",width:"100%"}},i.a.createElement(z.a,{classes:{inputFocused:Se?ke.disabled:ke.input,clearIndicator:ke.input,popupIndicator:Se?ke.disabled:ke.input,popper:ke.popperAutoComplete,option:ke.option,noOptions:ke.option},className:ke.autoComplete,onOpen:function(){r&&!A&&!je&&$([]),r&&_e(ae)},disabled:Se,multiple:v,options:K,groupBy:function(e){return e.type},forcePopupIcon:!0,freeSolo:"objectSelection"!==p,clearOnBlur:ce,value:Ye,size:"small",onInputChange:Be,filterOptions:function(e,t){var a=et(e,t);ae&&F&&a.splice(0,0,{inputValue:ae,name:ae,title:'Add "'.concat(ae,'"'),type:"Add new"});var n=e.find((function(e){return"studio_show_More_View"===e.id}));n&&!["",null,void 0].includes(t.inputValue)&&(!(-1!==a.findIndex((function(e){return"studio_show_More_View"===e.id})))&&a.push(Object(f.a)({},n)));return a},onChange:Ge,renderInput:function(e){return i.a.createElement(R.a,Object.assign({},e,{autoComplete:"off",error:Boolean(q),variant:"outlined",label:Object(J.q)(Object(J.b)(o||a)),InputLabelProps:{className:Se?ke.disabled:ke.label}}))},renderGroup:function(e){return i.a.createElement(le.a,{key:e.key},i.a.createElement(Q.a,{className:ke.groupTitle,style:{borderBottom:"".concat(Te?"2px solid gray":"none")}},e.group),e.children)},getOptionLabel:function(e){return I?I(e,K):"Add new"===e.type?e.title:"string"===typeof e?e:e[y]||""}}),q&&i.a.createElement(Q.a,{className:ke.error},q),ce&&Te?i.a.createElement(fe,{searchText:ae,list:K,total:ge,offset:me,displayField:y,open:ce,onNext:ze,onPrevious:He,handleClose:Xe,setSearchText:Re,title:Object(J.q)(Object(J.b)(o||a)),onChange:function(e){return Ge({fromDialog:!0},e)},currentTab:qe,onTabChange:Ze,isTypeOnClick:Te,isDataLoading:Me}):i.a.createElement(fe,{searchText:ae,list:K,total:ge,offset:me,displayField:y,open:ce,onNext:ze,onPrevious:He,handleClose:Xe,setSearchText:Re,title:Object(J.q)(Object(J.b)(o||a)),onChange:function(e){return Ge({fromDialog:!0},e)},isDataLoading:Me}))}var nt=a(1),it=["keyValue"],rt=Object(b.a)({container:{marginBottom:15},row:{display:"flex"},languageText:{width:"15%",marginTop:8,textTransform:"capitalize",textAlign:"center"}});var ot=function(e){var t=rt(),a=Object(C.b)(),n=a.state,r=a.update,o=e.keyValue,l=Object(s.a)(e,it),c=n.translationList,d=i.a.useState([]),p=Object(m.a)(d,2),b=p[0],v=p[1],g=i.a.useCallback((function(e){var t=e.key,a=e.message,n=e.language;v((function(e){var i=Object(u.a)(e),r=i.findIndex((function(e){return e.key===t&&e.language===n}));return-1!==r?i[r]=Object(f.a)(Object(f.a)({},i[r]),{},{message:a}):i.push({key:t,message:a,language:n}),Object(u.a)(i)}))}),[]),h=i.a.useCallback((function(e){var t=e.key,a=e.message,n=e.language;r((function(e){var i=e.translationList.findIndex((function(e){return e.key===t&&e.language===n}));-1!==i?e.translationList[i].message=a:e.translationList.push({key:t,message:a,language:n})}))}),[r]);return i.a.useEffect((function(){v(Object(u.a)(c))}),[c]),i.a.createElement("div",{className:t.container},n.languageList.map((function(e,a){var n;return i.a.createElement("div",{key:a,className:t.row},i.a.createElement(Q.a,{classes:{root:t.languageText}},e.value),i.a.createElement(R.a,Object.assign({variant:"outlined"},l,{value:(null===(n=b.find((function(t){return t.key===o&&t.language===e.value})))||void 0===n?void 0:n.message)||"",onChange:function(t){return g({key:o,message:t.target.value,language:e.value})},onBlur:function(t){return t.target.value&&h({key:o,message:t.target.value,language:e.value})}})))})))},lt=a(176),ct=a.n(lt),st=a(175),dt=a.n(st),ut=a(177),ft=a.n(ut),mt=["name","required","data","helper","title","color","disableClearable","parentField","parentPanel","getOptionLabel"],pt=Object(b.a)({selection:{color:"#ffffff",backgroundColor:"#293846",".modern-dark &":{backgroundColor:"#323232"}},autoComplete:{width:"100%",marginTop:15,backgroundColor:"#293846","& > div > label":{color:"#ffffff !important",fontSize:13},".modern-dark &":{backgroundColor:"#323232"}},autoCompleteInput:{color:"#ffffff",fontSize:13},autoCompleteOption:{fontSize:13,"& ul, .MuiAutocomplete-noOptions":{backgroundColor:"rgb(41, 56, 70) !important",".modern-dark &":{backgroundColor:"#1b1b1b !important"}},"& li, .MuiAutocomplete-noOptions":{color:"#ffffff !important",backgroundColor:"rgb(41, 56, 70) !important",".modern-dark &":{backgroundColor:"#1b1b1b !important"}},"& li:hover, .MuiAutocomplete-noOptions":{color:"#ffffff !important",backgroundColor:"#2f4050 !important",".modern-dark &":{backgroundColor:"#323232 !important"}}},disabled:{color:"#a3a3a3 !important",fontSize:12}});function bt(e){var t=e.index,a=e.field,n=a.name,r=(a.required,a.data),o=(a.helper,a.title),l=a.color,c=a.disableClearable,d=void 0!==c&&c,u=a.parentField,m=(a.parentPanel,a.getOptionLabel),p=Object(s.a)(a,mt),b=e.props,v=b||{},g=v.propertyList,h=v.setPropertyList,y=v.type,O=v.onChange,j=v.modelType,w=v.metaFieldStore,x=v.editWidgetType,k=pt();"object"!==typeof r||Array.isArray(r)||(r=r[(T.p[y]||y).toLowerCase()]||[]),o=Object(J.q)(Object(J.b)(o||n));var S=function(e){var t=e.color;return i.a.createElement("div",{style:{width:15,height:15,backgroundColor:t}})},C=g[n]||"";j!==p.modelType&&"customField"!==b.editWidgetType||!u||(C=(g[u]?JSON.parse(g[u]):{})[n]||"");var E=!1;return p.isDisabled&&(E=p.isDisabled({properties:g,metaFieldStore:w,editWidgetType:x,modelType:j})),i.a.createElement(z.a,{options:r,classes:{root:k.selection,inputFocused:E?k.disabled:k.autoCompleteInput,clearIndicator:k.autoCompleteInput,popupIndicator:E?k.disabled:k.autoCompleteInput,option:k.autoCompleteOption,groupLabel:k.autoCompleteOption,popper:k.autoCompleteOption,noOptions:k.autoCompleteOption},disableClearable:d,size:"small",className:k.autoComplete,autoHighlight:!0,disabled:E,onChange:function(e,t){var a=Object(f.a)(Object(f.a)({},g),Object(J.k)(n,t,u,g[u],j===p.modelType||"customField"===b.editWidgetType));"colSpan"===n&&(a.colSpan=t),h(a),O(a,n)},getOptionLabel:function(e){return m?m(e):"object"===typeof e?e.text:e},renderOption:function(e){return"object"===typeof e?i.a.createElement("div",{key:t,value:e.value},i.a.createElement("i",{className:"fa ".concat(e),style:{marginRight:4}}),Object(J.q)(e.text)):i.a.createElement("div",{key:t,value:e},l&&i.a.createElement(S,{color:e}),i.a.createElement("i",{className:"fa ".concat(e),style:{marginRight:4}}),i.a.createElement("span",null,Object(J.q)(e)))},value:C,renderInput:function(e){return i.a.createElement(R.a,Object.assign({},e,{label:Object(J.q)(Object(J.b)(o||n)),variant:"outlined",classes:{root:k.selection},autoComplete:"off",inputProps:Object(f.a)(Object(f.a)({},e.inputProps),{},{autoComplete:"new-password"})}))}})}var vt=a(6),gt=a(317),ht=a(331),yt=a(327),Ot=a(328),jt=Object(b.a)((function(){return{select:{width:"100%",background:"white"},input:{fontSize:13}}}));function wt(e){var t=e.value,a=e.onChange,r=e.options,o=void 0===r?[]:r,l=e.selectClassName,c=e.className,s=e.optionLabel,d=e.optionValue,u=e.name,f=e.title,p=jt(),b=Object(n.useState)(t[d]||t||""),v=Object(m.a)(b,2),g=v[0],h=v[1];return Object(n.useEffect)((function(){h(d?t[d]:t)}),[d,t]),i.a.createElement(z.a,{className:j()(p.select,c),value:g||"",onChange:function(e,t){a(t,e),h(t)},renderValue:function(e){var t=o.find((function(t){return t[d]===e}));return t?i.a.createElement(ht.a,{label:t[s],size:"small",style:{background:t&&t.color,color:t&&t.border||"white"}}):i.a.createElement(i.a.Fragment,null,e)},classes:{select:l,input:p.input},options:o,getOptionLabel:function(e){return"object"===typeof e?e[d]:e},label:f,renderOption:function(e){return!d&&e?i.a.createElement("div",null,"icon"===u&&i.a.createElement("i",{className:"fa ".concat(e),style:{marginRight:4}}),e):i.a.createElement("div",null,i.a.createElement(ht.a,{key:e[d],label:e[s],size:"small",style:{background:e&&e.color,color:e&&e.border||"white"}}))},renderInput:function(e){return i.a.createElement(R.a,Object.assign({},e,{label:f,autoComplete:"off"}))}})}wt.defaultProps={value:{},onChange:function(){}};var xt=a(103),kt="card",St=[{name:"red",title:"Red",color:"#f44336",border:"#fff"},{name:"pink",title:"Pink",color:"#e91e63",border:"#fff"},{name:"purple",title:"Purple",color:"#9c27b0",border:"#fff"},{name:"deeppurple",title:"Deep Purple",color:"#673ab7",border:"#fff"},{name:"indigo",title:"Indigo",color:"#3f51b5",border:"#fff"},{name:"blue",title:"Blue",color:"#2196f3",border:"#fff"},{name:"lightblue",title:"Light Blue",color:"#03a9f4",border:"#fff"},{name:"cyan",title:"Cyan",color:"#00bcd4",border:"#fff"},{name:"teal",title:"Teal",color:"#009688",border:"#fff"},{name:"green",title:"Green",color:"#4caf50",border:"#fff"},{name:"lightgreen",title:"Light Green",color:"#8bc34a",border:"black"},{name:"lime",title:"Lime",color:"#cddc39",border:"black"},{name:"yellow",title:"Yellow",color:"#ffeb3b",border:"black"},{name:"amber",title:"Amber",color:"#ffc107",border:"black"},{name:"orange",title:"Orange",color:"#ff9800",border:"black"},{name:"deeporange",title:"Deep Orange",color:"#ff5722",border:"#fff"},{name:"brown",title:"Brown",color:"#795548",border:"#fff"},{name:"grey",title:"Grey",color:"#9e9e9e",border:"black"},{name:"bluegrey",title:"Blue Grey",color:"#607d8b",border:"#fff"},{name:"black",title:"Black",color:"black",border:"#fff"},{name:"white",title:"White",color:"whitesmoke",border:"black"}],Tt=Object(b.a)((function(){return{crudIcon:{height:"1.5em",width:"1.5em",fontSize:16,cursor:"pointer",color:"#000",display:"flex",alignItems:"center",justifyContent:"center"},textField:{fontSize:13}}})),Ct=i.a.forwardRef((function(e,t){var a,r,o,l=e.row,c=void 0===l?{}:l,s=e.index,d=e.connectDragSource,u=e.connectDropTarget,f=e.handleRow,m=e.deleteRow,p=e.handleChange,b=e.updateSelection,v=e.addRow,g=e.rowsCount,h=Object(n.useRef)(null);d(h),u(h),Object(n.useImperativeHandle)(t,(function(){return{getNode:function(){return h.current}}}));var y=Tt();return i.a.createElement("tr",{style:{display:"flex",alignItems:"center"},key:c.id||s,ref:h,onKeyDown:function(e){"Enter"===e.key&&g-1===s&&(f(g-1),v())}},i.a.createElement("td",{className:"one-to-many-col one-to-many-col-border",style:{maxWidth:"4%",display:"flex",justifyContent:"center"}},i.a.createElement(D.a,{onClick:function(){return f(c.id)},"aria-label":"add",size:"small",className:y.iconButton,disabled:!b},i.a.createElement("i",{className:Object(vt.a)("fa fa-pencil",y.crudIcon),style:{color:b?"black":"rgba(0, 0, 0, 0.26)"}}))),i.a.createElement("td",{className:"one-to-many-col one-to-many-col-border",style:{maxWidth:"22%",overflow:"hidden",whiteSpace:"nowrap",textOverflow:"ellipsis"}},c.editable?i.a.createElement(R.a,{value:(null===c||void 0===c?void 0:c.value)||"",name:"value",onChange:function(e){p(c.id,"value",e.target.value)},style:{width:"100%"},InputProps:{classes:{input:y.textField}},autoFocus:!0}):c.value),i.a.createElement("td",{className:"one-to-many-col one-to-many-col-border",style:{maxWidth:"22%",overflow:"hidden",whiteSpace:"nowrap",textOverflow:"ellipsis"}},c.editable?i.a.createElement(R.a,{value:(null===c||void 0===c?void 0:c.title)||"",name:"title",onChange:function(e){p(c.id,"title",e.target.value)},style:{width:"100%"},InputProps:{classes:{input:y.textField}}}):c.title),i.a.createElement("td",{className:"one-to-many-col one-to-many-col-border",style:{overflow:"hidden",maxWidth:"22%"}},c.editable?i.a.createElement(wt,{name:"color",onChange:function(e){p(c.id,"color",e)},value:(null===c||void 0===c?void 0:c.color)||"",options:St,optionLabel:"title",optionValue:"name"}):(null===c||void 0===c?void 0:c.color)&&i.a.createElement(ht.a,{label:null===(a=c.color)||void 0===a?void 0:a.title,size:"small",style:{background:null===(r=c.color)||void 0===r?void 0:r.color,color:(null===(o=c.color)||void 0===o?void 0:o.border)||"white",fontWeight:800}})),i.a.createElement("td",{className:"one-to-many-col one-to-many-col-border",style:{maxWidth:"22%",overflow:"hidden",whiteSpace:"nowrap",textOverflow:"ellipsis"}},c.editable?i.a.createElement(wt,{name:"icon",onChange:function(e){p(c.id,"icon",e)},value:(null===c||void 0===c?void 0:c.icon)||"",options:xt.a}):c.icon),i.a.createElement("td",{className:"one-to-many-col one-to-many-col-border",style:{maxWidth:"4%"}},i.a.createElement(D.a,{onClick:function(){return m(c.id)},"aria-label":"add",size:"small",className:y.iconButton,disabled:!b},i.a.createElement("i",{className:Object(vt.a)("fa fa-trash-o",y.crudIcon),style:{color:b?"black":"rgba(0, 0, 0, 0.26)"}}))),i.a.createElement("td",{className:"one-to-many-col one-to-many-col-border",style:{maxWidth:"4%"}},i.a.createElement(D.a,{onClick:function(){return f(c.id)},"aria-label":"add",size:"small",className:y.iconButton,disabled:!b},i.a.createElement("i",{className:Object(vt.a)("fa fa-bars",y.crudIcon),style:{color:b?"black":"rgba(0, 0, 0, 0.26)"}}))))})),Et=Object(yt.a)(kt,{hover:function(e,t,a){if(!a)return null;var n=a.getNode();if(!n)return null;var i=t.getItem().index,r=e.index;if(i!==r){var o=n.getBoundingClientRect(),l=(o.bottom-o.top)/2,c=t.getClientOffset().y-o.top;i<r&&c<l||i>r&&c>l||(e.moveCard(i,r),t.getItem().index=r)}}},(function(e){return{connectDropTarget:e.dropTarget()}}))(Object(Ot.a)(kt,{beginDrag:function(e){return{id:e.id,index:e.index}}},(function(e,t){return{connectDragSource:e.dragSource(),isDragging:t.isDragging()}}))(Ct)),Mt=a(329),Ft=["name","title","parentField","defaultValue","uncheckDialog","alertMessage"],It=Object(b.a)((function(){return{root:{color:"#0275d8 !important","&$checked":{color:"#0275d8 !important"}}}}));function Nt(e){var t=Object(n.useState)(!1),a=Object(m.a)(t,2),r=a[0],o=a[1],l=e.field,c=l.name,d=l.title,u=l.parentField,p=l.defaultValue,b=l.uncheckDialog,v=l.alertMessage,g=Object(s.a)(l,Ft),h=e.props,y=e.classNames,O=e.handleDialogOk,j=e.isHistoryGenerated,w=e.markHistoryGenerated,x=It(),k=h.propertyList,S=h.setPropertyList,T=h.onChange,C=h.modelType,E=h.editWidgetType,M=h.metaFieldStore,F=Object(J.l)(k,c,u,p,!(C!==g.modelType)||"customField"===E),I=Boolean(F?!("false"===F):F);g.getValue&&(I=g.getValue(k));var N=!1;g.isDisabled&&(N=g.isDisabled({properties:k,metaFieldStore:M,editWidgetType:E,modelType:C})),d=Object(J.q)(Object(J.b)(d||c));var A=function(){b&&o(!1),S(Object(f.a)(Object(f.a)(Object(f.a)({},k),g.change?g.change(!I,k):{}),Object(J.k)(c,!I,u,k[u],!(C!==g.modelType)||"customField"===E))),T(Object(f.a)(Object(f.a)(Object(f.a)({},k),g.change?g.change(!I,k):{}),Object(J.k)(c,!I,u,k[u],!(C!==g.modelType)||"customField"===E)),c,j),w(),O()};return i.a.createElement(i.a.Fragment,null,i.a.createElement(Mt.a,{className:y,checked:I,disabled:N,classes:{root:x.root},onChange:function(){b&&I&&k&&k.selectionText?o(!0):A()},value:k[c]}),r&&i.a.createElement(Le,{open:r,message:v,onClose:function(){return o(!1)},onOk:A,title:"Confirm"}))}var At=[{name:"red",title:"Red",color:"#f44336",border:"#fff"},{name:"pink",title:"Pink",color:"#e91e63",border:"#fff"},{name:"purple",title:"Purple",color:"#9c27b0",border:"#fff"},{name:"deeppurple",title:"Deep Purple",color:"#673ab7",border:"#fff"},{name:"indigo",title:"Indigo",color:"#3f51b5",border:"#fff"},{name:"blue",title:"Blue",color:"#2196f3",border:"#fff"},{name:"lightblue",title:"Light Blue",color:"#03a9f4",border:"#fff"},{name:"cyan",title:"Cyan",color:"#00bcd4",border:"#fff"},{name:"teal",title:"Teal",color:"#009688",border:"#fff"},{name:"green",title:"Green",color:"#4caf50",border:"#fff"},{name:"lightgreen",title:"Light Green",color:"#8bc34a",border:"black"},{name:"lime",title:"Lime",color:"#cddc39",border:"black"},{name:"yellow",title:"Yellow",color:"#ffeb3b",border:"black"},{name:"amber",title:"Amber",color:"#ffc107",border:"black"},{name:"orange",title:"Orange",color:"#ff9800",border:"black"},{name:"deeporange",title:"Deep Orange",color:"#ff5722",border:"#fff"},{name:"brown",title:"Brown",color:"#795548",border:"#fff"},{name:"grey",title:"Grey",color:"#9e9e9e",border:"black"},{name:"bluegrey",title:"Blue Grey",color:"#607d8b",border:"#fff"},{name:"black",title:"Black",color:"black",border:"#fff"},{name:"white",title:"White",color:"whitesmoke",border:"black"}],Lt=Object(b.a)((function(){return{paper:{minWidth:"50%",width:"50%",maxWidth:"100%",resize:"auto"},alertPaper:{minWidth:300},checkbox:{color:"#0275d8 !important","&$checked":{color:"#0275d8 !important"}},button:{textTransform:"none",backgroundColor:"#0275d8",borderColor:"#0275d8",color:"#fff","&:hover":{backgroundColor:"#0275d8",borderColor:"#0275d8",color:"#fff"}},crudIcon:{height:"1.5em",width:"1.5em",fontSize:16,cursor:"pointer",color:"#fff",display:"flex",alignItems:"center",justifyContent:"center"},content:{overflow:"auto",padding:"0px 8px 16px 8px"},dialogContent:{display:"flex",flexDirection:"column"},ok:{backgroundColor:"#0275d8",borderColor:"#0275d8",color:"#fff","&:hover":{backgroundColor:"#0275d8",borderColor:"#0275d8",color:"#fff"}},btn:{textTransform:"none"},dialogActions:{paddingBottom:16},root:{display:"flex",justifyContent:"space-between",alignItems:"flex-start"},iconButton:{marginTop:25,paddingLeft:10},icon:{color:"white"},label:{fontSize:13}}}));function Wt(e){var t=e.field,a=e.index,r=e.props,o=e.error,l=Object(n.useState)([]),s=Object(m.a)(l,2),p=s[0],b=s[1],v=Object(n.useState)(!1),g=Object(m.a)(v,2),h=g[0],y=g[1],O=Object(n.useState)(!1),j=Object(m.a)(O,2),x=j[0],k=j[1],S=Object(n.useState)(!1),E=Object(m.a)(S,2),M=E[0],F=E[1],I=Lt(),N=r.propertyList,A=r.setPropertyList,P=r.onChange,U=Object(C.b)(),R=U.state,z=U.update,H=R.editWidget,X=N.selection,G=N.selectionText,Z=N.updateSelection,Y=N.isSelectionField,Q=function(e,t,a){b((function(n){return n.map((function(n){return n.id===e?Object(f.a)(Object(f.a)({},n),{},Object(w.a)({},t,a)):n}))}))},K=function(){b((function(e){return[].concat(Object(u.a)(null===e||void 0===e?void 0:e.map((function(e){return Object(f.a)(Object(f.a)({},e),{},{editable:!1})}))),[{title:"",value:"",color:null,icon:null,id:_.a.uniqueId(),editable:!0}])}))},$=function(e){b((function(t){return t.filter((function(t){return(null===t||void 0===t?void 0:t.id)!==e}))}))},ee=i.a.useCallback((function(e,t){if(Z&&!(e<=-1||t<=-1)){var a=Object(u.a)(p||[]),n=a[e];a[e]=a[t],a[t]=n,b(a)}}),[p,Z]),te=function(e){b((function(t){return t.map((function(t){return t.id===e?Object(f.a)(Object(f.a)({},t),{},{editable:!t.editable||!1}):Object(f.a)(Object(f.a)({},t),{},{editable:!1})}))}))},ae=function(){b((function(e){return e.map((function(e){return e.editable?Object(f.a)(Object(f.a)({},e),{},{editable:!1}):e}))}))},ne=i.a.useCallback((function(e){for(var t=null===e||void 0===e?void 0:e.trim().split("\n"),a=[],n=function(e){var n=t[e].split(":"),i=n[0],r=null===i||void 0===i?void 0:i.toLowerCase(),o=n[1];if(r&&"color"!==r&&"icon"!==r)a.push({id:_.a.uniqueId(),title:i,value:o||i});else if("color"===r||"icon"===r){var l=a.pop();o="color"===i?At.find((function(e){return e.name===o})):o,l=Object(f.a)(Object(f.a)({},l),{},Object(w.a)({},i,o)),a.push(l)}},i=0;i<(null===t||void 0===t?void 0:t.length);i++)n(i);b(a)}),[]),ie=function(){var e=Object(d.a)(c.a.mark((function e(){var t;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(y(!0),Z||!X){e.next=8;break}return e.next=4,Object(ve.l)({name:X});case 4:t=e.sent,ne(t),e.next=9;break;case 8:G?ne(G):b([]);case 9:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),re=i.a.useCallback((function(){z(!G&&!X&&H&&Y?function(e){e.errorList[H]={selection:"Selection or selection options are required"}}:function(e){delete e.errorList[H]})}),[X,H,G,Y,z]);return Object(n.useEffect)((function(){re()}),[re]),Object(n.useEffect)((function(){G?ne(G):b([])}),[G,ne]),i.a.createElement("div",{className:I.root},i.a.createElement(at,{field:t,key:a,index:a,props:r,error:o}),i.a.createElement(D.a,{onClick:ie,"aria-label":"add",size:"small",className:I.iconButton},i.a.createElement("i",{className:Object(vt.a)(N[t.name]||G?"fa fa-pencil":"fa fa-plus",I.icon)})),h&&i.a.createElement(L.a,{open:h,onClose:function(e,t){"backdropClick"!==t&&y(!1)},classes:{paper:I.paper}},i.a.createElement(W.a,null,Object(J.q)("Selection")),i.a.createElement(q.a,{className:I.dialogContent},i.a.createElement(gt.a,{className:I.content},i.a.createElement("div",null,i.a.createElement(Ye.a,{classes:{label:I.label},control:i.a.createElement(Nt,{field:{name:"updateSelection",dependModelType:T.i.CUSTOM,title:"New selection",uncheckDialog:!0,alertMessage:"All options and selection will be lost. Are you sure ?"},handleDialogOk:function(){X||Z||b([])},isHistoryGenerated:M,markHistoryGenerated:function(){F(!0)},props:r}),label:Object(J.q)("New selection")}),i.a.createElement("div",{className:"one-to-many-header"},i.a.createElement("span",null,Object(J.q)("Selection items")),i.a.createElement(B.a,{onClick:K,"aria-label":"add",size:"small",className:I.btn,disabled:!Z,startIcon:i.a.createElement("i",{className:Object(vt.a)("fa fa-plus",I.crudIcon),style:{color:Z?"black":"rgba(0, 0, 0, 0.26)"}})},Object(J.q)("New"))),i.a.createElement("table",null,i.a.createElement("tbody",{className:"one-to-many-row",style:{textAlign:"left"}},i.a.createElement("tr",{style:{display:"flex",alignItems:"center"}},["\xa0","Title","Value","Color","Icon","\xa0","\xa0"].map((function(e,t){return i.a.createElement("td",{className:"one-to-many-col one-to-many-col-border",key:"td_".concat(t),style:{borderBottom:"1px solid #ddd",maxWidth:"\xa0"===e?"4%":"22%"}},e)}))),null===p||void 0===p?void 0:p.map((function(e,t){return i.a.createElement(Et,{key:e.id,index:t,id:e.id,handleRow:te,deleteRow:$,saveRow:ae,row:e,moveCard:ee,handleChange:Q,updateSelection:Z,addRow:K,rowsCount:null===p||void 0===p?void 0:p.length})}))))))),i.a.createElement(V.a,{className:I.dialogActions},i.a.createElement(B.a,{onClick:function(){b([]),y(!1),re(),F(!1)},className:I.btn,variant:"outlined"},Object(J.q)("Close")),i.a.createElement(B.a,{onClick:function(){!Z||p.length?p.findIndex((function(e){return!e.title}))>-1?k(!0):(F(!1),function(e){var t="";(null===e||void 0===e?void 0:e.length)<=0?t=null:e.forEach((function(e,a){var n;(e.title&&(t+="".concat(a>0?"\n":"").concat(e.title,":").concat(e.value)),e.color&&e.color.name)&&(t+="\ncolor:"+(null===(n=e.color)||void 0===n?void 0:n.name));e.icon&&(t+="\nicon:"+e.icon)})),A((function(e){return Object(f.a)(Object(f.a)({},e),{},{selectionText:t})})),P(Object(f.a)(Object(f.a)({},N),{},{selectionText:t}),"selectionText",M)}(p),y(!1),re()):k(!0)},autoFocus:!0,className:Object(vt.a)(I.btn,I.ok)},Object(J.q)("OK")))),x&&i.a.createElement(L.a,{open:x,onClose:function(){return k(!1)},"aria-labelledby":"alert-dialog-title","aria-describedby":"alert-dialog-description",classes:{paper:I.alertPaper}},i.a.createElement(W.a,{id:"alert-dialog-title"},Object(J.q)("Alert")),i.a.createElement(q.a,null,i.a.createElement(Ne.a,{id:"alert-dialog-description"},Object(J.q)("Value is required"))),i.a.createElement(V.a,null,i.a.createElement(B.a,{onClick:function(){return k(!1)},color:"primary",className:I.button},Object(J.q)("OK")))))}var qt=function(e){var t=e.field,a=e.error,n=e.props,r=n.propertyList,o=r.contextFieldTarget,l=r.contextFieldTargetName;return i.a.createElement(i.a.Fragment,null,i.a.createElement(at,{field:t,props:n,error:a}),o&&l&&i.a.createElement(at,{field:{name:"contextFieldTitle",ref:o,title:"Value",valueField:l,displayField:l},props:n,error:a}))},Vt=["title","name","type","required","readOnly","max","min","parentField","translationView"],Bt=["name","title","parentField","defaultValue","uncheckDialog"],Pt=["children"],_t=Object(b.a)({input:{backgroundColor:"#293846",marginTop:15,".modern-dark &":{backgroundColor:"#323232"},"& .MuiInputBase-inputMultiline":{height:"auto !important"}},translationInput:{paddingTop:10,paddingBottom:10},translationInputView:{backgroundColor:"#293846",marginBottom:5,".modern-dark &":{backgroundColor:"#323232"}},label:{color:"#f7f7f7",fontSize:12,"&#outlined-basic-label":{color:"#f7f7f7"},"&.MuiInputLabel-shrink":{top:"1px !important"}},outlinedRoot:{color:"#ffffff","&:hover $notchedOutline":{borderColor:"#ffffff"},"&$focused $notchedOutline":{borderColor:"white",borderWidth:1}},notchedOutline:{},focused:{color:"#ffffff"},switchBase:{"&$checked":{color:"#ffffff"},"&$checked + $track":{backgroundColor:"#ffffff"}},checked:{},track:{},selection:{color:"#ffffff",backgroundColor:"#293846",".modern-dark &":{backgroundColor:"#323232"}},iconOutlined:{color:"#ffffff"},panelTitle:{color:"white",fontWeight:"600"},panelMargin:{margin:"25px 0px 0px 0px"},disableInput:{color:"#a3a3a3 !important"},unique:{color:"#0275d8"},required:{color:"red"},translateButton:{color:"#ffffff",padding:"10px 12px","& > span > svg":{fontSize:"1.1rem"}},staticSelectMenuItem:{color:"#ffffff",backgroundColor:"rgb(41, 56, 70) !important","&:hover":{backgroundColor:"#293846 !important"}},autoComplete:{width:"100%",marginTop:15,backgroundColor:"#293846","& > div > label":{color:"#ffffff !important",fontSize:13},".modern-dark &":{backgroundColor:"#323232"}},autoCompleteInput:{color:"#ffffff",fontSize:13},autoCompleteOption:{fontSize:13,"& ul, .MuiAutocomplete-noOptions":{backgroundColor:"rgb(41, 56, 70) !important",".modern-dark &":{backgroundColor:"#1b1b1b !important"}},"& li, .MuiAutocomplete-noOptions":{color:"#ffffff !important",backgroundColor:"rgb(41, 56, 70) !important",".modern-dark &":{backgroundColor:"#1b1b1b !important"}},"& li:hover, .MuiAutocomplete-noOptions":{color:"#ffffff !important",backgroundColor:"#2f4050 !important",".modern-dark &":{backgroundColor:"#323232 !important"}}},textFieldInput:{fontSize:13},booleanInputLabel:{fontSize:12},disabled:{color:"#a3a3a3 !important",fontSize:12}}),Dt=i.a.createContext();var Ut=function(e){return e.includes("studio:")};function Jt(e){var t=e.index,a=e.multiline,n=void 0!==a&&a,r=e.error,o=e.parentPanel,l=e.onTranslationRemove,c=e.clearable,d=void 0!==c&&c,u=e.isStudioLite,p=_t(),b=i.a.useState(!1),v=Object(m.a)(b,2),g=v[0],h=v[1],y=e.field,O=y.title,j=y.name,w=y.type,x=y.required,k=y.readOnly,S=y.max,C=y.min,E=y.parentField,M=y.translationView,F=Object(s.a)(y,Vt),I=i.a.useContext(Dt),N=I.propertyList,A=I.setPropertyList,L=I.onChange,W=I.modelType,q=I.metaFieldStore,V=void 0===q?[]:q,B=I.editWidgetType,P=function(e,t){var a=_t();return i.a.createElement("span",null,i.a.createElement("span",null,e),t.unique&&i.a.createElement("span",{className:a.unique}," (unique) "),t.required&&i.a.createElement("span",{className:a.required}," * "))}(Object(J.q)(Object(J.b)(O||j)),e.field),_=Object(J.q)(Object(J.b)(O||j));"showIf"===j||"requiredIf"===j?_="id == 1":"hideIf"===j?_="id == null":"readOnlyIf"===j&&(_="id != null");var U=N[j]||"";if((W===F.modelType||"customField"===I.editWidgetType)&&E){var z=N[E]?JSON.parse(N[E]):{};U=z[j]||""}F.formatter&&(U=F.formatter(U,N));var H=Boolean(k);F.isDisabled&&(H=F.isDisabled({properties:N,metaFieldStore:V,editWidgetType:B,modelType:W,parentPanel:o,isStudioLite:u}));var X=i.a.useCallback((function(){if(!Ut(U)){var e=Object(J.h)({name:j,fieldName:N[j]||w});L(Object(f.a)(Object(f.a)({},N||{}),Object(J.k)(j,e,E,N[E],!(W===F.modelType)||"customField"===B)),j)}}),[N,j,w,U,L,F.modelType,W,E,B]),G=i.a.useCallback((function(){h(!1),L(Object(f.a)(Object(f.a)({},N||{}),Object(J.k)(j,"",E,N[E],!(W===F.modelType))),j),l(U)}),[l,U,j,E,W,L,N,F.modelType]),Z=i.a.useCallback((function(){h(!0)}),[]),Y=i.a.useCallback((function(){h(!1)}),[]),Q=i.a.useRef(U);return i.a.createElement(i.a.Fragment,null,i.a.createElement(R.a,{error:x&&!U||Boolean(r),helperText:r,InputLabelProps:{className:H?p.disabled:p.label},size:"small",InputProps:{classes:{root:p&&H?"":p.outlinedRoot,notchedOutline:p&&p.notchedOutline,focused:p&&p.focused,disabled:p&&p.disableInput,input:p&&p.textFieldInput},endAdornment:M?Ut(U)?i.a.createElement(D.a,{className:p.translateButton,onClick:Z},i.a.createElement(dt.a,null)):i.a.createElement(D.a,{className:p.translateButton,onClick:X},i.a.createElement(ct.a,null)):d?i.a.createElement(D.a,{className:p.translateButton,onClick:function(){var e="",t=!0;F.modelType===T.i.BASE&&"customField"!==I.editWidgetType&&(t=""!==e||void 0!==N[j]),F.modelType===T.i.CUSTOM&&"customField"===I.editWidgetType&&(e=e||null),t&&L(Object(f.a)(Object(f.a)({},N||{}),Object(J.k)(j,e,E,N[E],!(W===F.modelType)||"customField"===B)),j)}},i.a.createElement(ft.a,null)):null},inputProps:{min:C,max:S},key:t,className:p&&p.input,id:"outlined-basic",multiline:n,type:"integer"===w?"number":w,label:P,placeholder:_,variant:"outlined",disabled:H||M&&Ut(U),value:U,minRows:3,onFocus:function(){Q.current=U},autoComplete:"off",onChange:function(e){if("integer"!==w||!isNaN(Number(e.target.value))){if(C&&S){var t=Number(e.target.value);if(t<C||t>S)return}var a=e.target.value;A(Object(f.a)(Object(f.a)({},N||{}),Object(J.k)(j,a,E,N[E],!(W!==F.modelType)||"customField"===B)))}},onBlur:function(e){if(Q.current!==U&&("integer"!==w||!isNaN(Number(e.target.value)))){if(C&&S){var t=Number(e.target.value);if(t<C||t>S)return}var a,n=e.target.value,i=!0;if(F.modelType===T.i.BASE&&"customField"!==I.editWidgetType&&(i=""!==n||void 0!==N[j]),F.modelType===T.i.CUSTOM&&"customField"===I.editWidgetType&&(n=n||null),i)L(Object(f.a)(Object(f.a)({},N||{}),Object(J.k)(j,!n||"name"!==j&&""!==(null===(a=n)||void 0===a?void 0:a.trim())?n:n.trim(),E,N[E],!(W===F.modelType)||"customField"===B)),j)}}}),M&&Ut(U)&&i.a.createElement(ot,{InputProps:{classes:{root:p&&p.outlinedRoot,notchedOutline:p&&p.notchedOutline,focused:p&&p.focused,disabled:p&&p.disableInput,input:p&&p.translationInput}},InputLabelProps:{className:H?p.disabled:p.label},className:p&&p.translationInputView,keyValue:U}),g&&i.a.createElement(Le,{open:g,message:"Are you sure, do you want to delete translations?",onClose:Y,onOk:G}))}function Rt(e){var t=Object(n.useState)(!1),a=Object(m.a)(t,2),r=a[0],o=a[1],l=e.index,c=e.field,d=c.name,u=c.title,p=c.parentField,b=c.defaultValue,v=c.uncheckDialog,g=Object(s.a)(c,Bt),h=i.a.useContext(Dt),y=h.propertyList,O=h.setPropertyList,j=h.onChange,w=h.modelType,x=h.editWidgetType,k=h.metaFieldStore,S=h.id,T=h.mainItems,C=h.parentPanel,E=Object(J.l)(y,d,p,b,!(w!==g.modelType)||"customField"===x),M=Boolean(E?!("false"===E):E),F=_t();g.getValue&&(M=g.getValue(y));var I=!1,N=!1;g.isDisabled&&(I=g.isDisabled({properties:y,metaFieldStore:k,editWidgetType:x,modelType:w,id:S,mainItems:T})),g.isHidden&&(N=g.isHidden({parentPanel:C})),u=Object(J.q)(Object(J.b)(u||d));var A=function(){v&&o(!1),O(Object(f.a)(Object(f.a)(Object(f.a)({},y),g.change?g.change(!M,y):{}),Object(J.k)(d,!M,p,y[p],!(w!==g.modelType)||"customField"===x))),j(Object(f.a)(Object(f.a)(Object(f.a)({},y),g.change?g.change(!M,y):{}),Object(J.k)(d,!M,p,y[p],!(w!==g.modelType)||"customField"===x)),d)};return i.a.createElement(i.a.Fragment,null,!N&&i.a.createElement(Ye.a,{style:{marginTop:15,alignSelf:"flex-start"},key:l,classes:{label:F&&F.booleanInputLabel,disabled:F.disabled},control:i.a.createElement(Qe.a,{classes:{switchBase:F&&F.switchBase,track:F&&F.track,checked:F&&F.checked},checked:M,disabled:I,onChange:function(){v&&M&&y&&y.selectionText?o(!0):A()},value:y[d]}),label:Object(J.q)(Object(J.b)(u||d))}),r&&i.a.createElement(Le,{open:r,message:"Are you sure?",onClose:function(){return o(!1)},onOk:A,title:"Confirm"}))}function zt(){var e=i.a.useContext(Dt),t=e.elements,a=e.id,n=e.propertyList,r=e.enableStudioApp,o=e.modelType,l=e.editWidgetType,c=e.errors,s=e.entityType,d=e.actualType,u=e.parentPanel,f=e.onTranslationRemove,m=e.isStudioLite;return i.a.createElement(i.a.Fragment,null,t.map((function(t,p){if(!1===function(e,t){if(e.depends){var a=t[e.depends];return e.dependValue===a}}(t,n))return null;if(!function(e,t,a,n){return(!e.dependModelType||e.dependModelType===t||"customField"===a)&&((!1!==e.showInBaseView||"customField"===a)&&(("customField"!==a||!1!==e.showInCustomField)&&!(e.shouldRender&&!e.shouldRender(n))))}(t,o,l,n))return null;if("studioApp"===t.name&&!r)return null;if([d,s].includes(T.d.META)&&"packageName"===t.name)return null;var b="".concat(p,"_").concat(a);switch(t.type){case"string":return i.a.createElement(Jt,{field:t,key:b,index:b,multiline:!1,error:c[t.name],isStudioLite:m,onTranslationRemove:f});case"integer":return i.a.createElement(Jt,{field:t,key:b,index:b,multiline:!1,error:c[t.name],parentPanel:u,clearable:!0});case"boolean":return i.a.createElement(Rt,{field:t,key:b,index:b,error:c[t.name]});case"selection":return i.a.createElement(Wt,{field:t,key:b,index:b,props:e,error:c[t.name]});case"select":case"objectSelection":return i.a.createElement(at,{field:t,key:b,index:b,props:e,error:c[t.name]});case"staticSelect":return i.a.createElement(bt,{field:t,key:b,index:b,error:c[t.name],parentPanel:u,props:e});case"text":return i.a.createElement(Jt,{field:t,key:b,index:b,multiline:!0,error:c[t.name]});case"onlyIf":return i.a.createElement(qt,{field:t,key:b,props:e,error:c[t.name]});default:return i.a.createElement(Jt,{field:t,key:b,index:b,error:c[t.name]})}})))}function Ht(e){var t=e.children,a=Object(s.a)(e,Pt);return i.a.createElement(Dt.Provider,{value:a},t)}function Xt(e){var t,a,r,o,l=Object(C.b)(),s=l.state,u=l.onWidgetChange,b=l.onTranslationRemove,v=s.widgets,g=s.editWidget,h=s.editWidgetType,y=s.customFieldWidgets,O=s.modelType,w=s.enableStudioApp,x=s.metaFieldStore,k=void 0===x?[]:x,S=s.errorList,E=void 0===S?{}:S,M=s.entityType,F=s.actualType,I=s.isStudioLite,N=s.mainItems,A=null;g&&("customField"===h&&y?A=y[g]:"customField"!==h&&v&&(A=v[g]));var L=A||{},W=L.serverType,q=L.isSelectionField,V=(A||{}).type,B="field"===W?V||"string":W||V;if("datetime"===(B=B&&B.toLowerCase().replace(/_/g,"-"))){var P=null===k||void 0===k?void 0:k.find((function(e){return e.name===A.name}));P&&"true"==="".concat(P.tz)&&(B="zoneddatetime")}var _=Object(n.useState)({}),D=Object(m.a)(_,2),U=D[0],R=D[1],z=Ke.b.find((function(e){return e.type===B}));if("form"===B&&s.modelType===T.i.CUSTOM&&(z=Ke.b.find((function(e){return"modelForm"===e.type}))),q&&(B=["string","integer"].includes(A&&A.type)?A.type:B,z&&z.value)){var H=z.value.overview.findIndex((function(e){return"type"===e.name}));z.value.overview.splice(H,1,nt.V);var X=z&&z.value||{},G=X.fieldOptions,Z=X.widgetAttributes;z=Object(f.a)(Object(f.a)({},z||{}),{},{value:Object(f.a)(Object(f.a)({},z.value||{}),{},{fieldOptions:(G||[]).filter((function(e){return!["minSize","maxSize","regex"].includes(e.name)})),widgetAttributes:(Z||[]).filter((function(e){return!["multiline"].includes(e.name)}))})})}var Y=_t(),K=i.a.useRef(null),$=i.a.useState(0),ee=Object(m.a)($,2),te=ee[0],ae=ee[1];function ne(e,t){return ie.apply(this,arguments)}function ie(){return(ie=Object(d.a)(c.a.mark((function e(t,a){var n,i,r,o,l,s,d=arguments;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=d.length>2&&void 0!==d[2]&&d[2],i=Object(f.a)({},t),a===nt.D.name&&(i[nt.eb.name]=null,i[nt.fb.name]=null,i[nt.r.name]=null,i[nt.q.name]=null),a!==nt.D.name&&"type"!==a&&(i.type=A.type),"updateSelection"!==a||i.updateSelection||(i.selection=null,i.selectionText=null),i.updateSelection){e.next=9;break}i.selectionText=null,e.next=14;break;case 9:return r={name:i.selection},e.next=12,Object(ve.l)(r);case 12:o=e.sent,i.selectionText=i.selectionText||o;case 14:if(!i.selection||!i.updateSelection||a){e.next=20;break}return l={name:i.selection},e.next=18,Object(ve.l)(l);case 18:s=e.sent,i.selectionText=i.selectionText||s;case 20:i.selection||a||(i.selectionText=""),i.selection&&"object"===typeof i.selection&&(i.selection=i.selection.name),u({id:g,props:Object(f.a)({},i),skipGenerateHistory:n});case 23:case"end":return e.stop()}}),e)})))).apply(this,arguments)}i.a.useEffect((function(){R(Object(f.a)(Object(f.a)({},A||{}),{},{type:B})),ae(K&&K.current&&K.current.offsetWidth)}),[A,B]),V=B;var re={};g&&E&&(re=E[g]||{});var oe=Object.values(v||{}).find((function(e){return e.items&&-1!==e.items.indexOf(g)}));return"panel-tabs"===(null===(t=A)||void 0===t?void 0:t.type)&&"customField"===h||(null===(a=z)||void 0===a?void 0:a.dependModelType)&&"true"==="".concat(null===(r=A)||void 0===r?void 0:r.tab)&&(null===(o=z)||void 0===o?void 0:o.dependModelType)!==O?null:i.a.createElement(p.a,{style:{padding:20}},V&&z&&!(s.modelType===T.i.CUSTOM&&z.type===T.l.tabs)&&Object.keys(z.value).map((function(e,t){return i.a.createElement(p.a,{key:t},i.a.createElement(Q.a,{variant:"body1",className:j()(Y.panelTitle,0!==t&&Y.panelMargin)},function(e,t){return e.filter((function(e){return!e.dependModelType||e.dependModelType===t})).length>0}(z.value[e],O)&&Object(J.q)(Object(J.c)(e))),i.a.createElement(p.a,{style:{display:"flex",flexDirection:"column"}},i.a.createElement(Ht,{key:g,elements:z.value[e],propertyList:U,setPropertyList:R,labelWidth:te,inputLabel:K,type:V,onWidgetChange:u,id:g,onChange:ne,modelType:O,enableStudioApp:w,editWidgetType:h,metaFieldStore:k,errors:re,entityType:M,actualType:F,parentPanel:oe,onTranslationRemove:b,isStudioLite:I,mainItems:N},i.a.createElement(zt,null))))})))}var Gt=i.a.memo((function(){return i.a.createElement("div",{style:{color:"#fff"}},i.a.createElement(Xt,null))})),Zt={display:"flex",alignItems:"center",justifyContent:"center",borderLeft:"solid 1px #ddd",background:"#f0f0f0"},Yt=Object(b.a)({drawerPaper:{background:"#2f4050",width:"100%",height:"100%",position:"absolute",borderLeft:"1px solid #2f4050",overflow:"auto"},propertyToggle:{position:"absolute",left:"-30px",top:"calc(50% + 60px)",background:"#293846",color:"white",padding:"5px 20px 7px 20px",transform:"rotate(-90deg)",whiteSpace:"nowrap",fontSize:"13px",border:"solid 1px #293846",borderBottom:"none",borderRadius:"5px 5px 0 0",transformOrigin:"top left",zIndex:"10",cursor:"default",userSelect:"none",boxShadow:"1px 2px 8px 0px rgb(1 1 1 / 75%) !important"},container:{position:"sticky",top:"0px",height:"100vh"}}),Qt=i.a.memo((function(){var e=Yt(),t=Object(n.useState)(!0),a=Object(m.a)(t,2),r=a[0],o=a[1],l=Object(n.useState)(380),c=Object(m.a)(l,2),s=c[0],d=c[1],u=Object(n.useState)("100%"),f=Object(m.a)(u,2),p=f[0],b=f[1],v=function(e){o("0px"!==e)};return i.a.useEffect((function(){var e=function(){r&&d((function(e){return window.innerWidth-e<380?window.innerWidth-380:e<380?window.innerWidth-e:e}))};return window.addEventListener("resize",e),function(){window.removeEventListener("resize",e)}})),i.a.createElement("div",{className:e.container},i.a.createElement(Ze.a,{style:Zt,size:{width:s,height:p},onResizeStop:function(e,t,a,n){d((function(e){return e+n.width})),b(p+n.height),v("".concat(s+n.width,"px"))},maxWidth:window.innerWidth-380,minHeight:p,enable:{left:!0}},i.a.createElement(Ge.a,{variant:"persistent",anchor:"right",open:r,style:{width:380},classes:{paper:e.drawerPaper},transitionDuration:0},i.a.createElement(Gt,null)),i.a.createElement("div",{className:e.propertyToggle,onClick:function(){d((function(e){return 0===e?380:0})),v("".concat(0===s?380:0,"px"))}},Object(J.q)("Properties"))))})),Kt=a(320),$t=a(321),ea=a(87),ta=a(259),aa=Object(b.a)({fieldImage:{display:"flex",justifyContent:"center",alignItems:"center",padding:15},icon:{width:25,height:25,backgroundRepeat:"no-repeat",backgroundSize:"contain",backgroundPosition:"center",position:"absolute"}}),na=function(e){var t=e.serverType||e.type;return t&&-1!==t.indexOf("datetime")?"datetime.png":t&&-1!==t.indexOf("date")?"date.png":t&&-1!==t.indexOf("time")?"time.png":t&&-1!==t.indexOf("decimal")?"decimal.png":e.image?e.image:"".concat(t,".png")};var ia=function(e){var t=aa(),a=e.attrs,n=e.targetName;return i.a.createElement("div",null,i.a.createElement(ta.a,{arrow:!0,title:Object(J.q)(a.title||a[n]||a.name),placement:"right"},i.a.createElement(p.a,{className:t.fieldImage},i.a.createElement("div",{className:t.icon,style:{backgroundImage:"url(./images/".concat(na(a),")")}}))))},ra=Object(b.a)((function(e){return{field:Object(w.a)({},e.breakpoints.down("sm"),{width:"100%"})}}));function oa(e){var t=ra();return i.a.createElement("div",Object.assign({},e,{className:j()(t.field,e.className)}))}var la=Object(b.a)((function(e){return{container:{width:"min-content",height:"fit-content",backgroundColor:"#fafafa",border:"1px solid lightgray",padding:"0",margin:"1rem 0",borderRadius:5,marginTop:14,boxShadow:"1px 2px 8px 0px rgb(1 1 1 / 50%) !important"},attributeItem:{"&:hover":{backgroundColor:"rgb(41 56 70 / 35%)"}},divider:{margin:"4px",background:"gray"},widget:{border:"none !important",boxShadow:"none",padding:"5px 0"}}})),ca=i.a.memo((function(e){var t=e.toolbarOffset,a=la(),n=Object(C.b)().state,r=n.isStudioLite,o=Object(K.a)("(max-height: ".concat(720+t,"px)")),l=[].concat(Object(u.a)(ea.a),Object(u.a)(ea.b)).filter((function(e){return"Menu"!==e.name||n.modelType!==T.i.CUSTOM}));return i.a.createElement(Kt.a,{className:j()(a.container,"toolbar-pallete")},l.map((function(e,t){return(!r||r&&["Fields","Relational fields"].includes(e.name))&&i.a.createElement(i.a.Fragment,{key:t},i.a.createElement(p.a,{container:!0,style:{width:o?"80px":"40px"}},e.value&&e.value.map((function(e,t){return e.editorType&&!e.editorType.includes(n.modelType)?null:function(e){return[T.l.menubar,T.l.toolbar].includes(e.type)&&n.widgets?-1===Object.values(n.widgets).findIndex((function(t){return t.type===e.type})):!r||"oneToMany"!==e.name}(e)?i.a.createElement(p.a,{item:!0,xs:o?6:12,className:a.attributeItem,key:t},i.a.createElement(oa,{key:t},i.a.createElement(k.default,{id:e.id,attrs:e,design:!0,component:ia,isCoreField:!0,isPalleteField:!0,className:a.widget}))):null}))),t<l.length-1&&i.a.createElement($t.a,{className:a.divider}))})))})),sa=["fields"],da=Object(b.a)({toolbarWrapper:{paddingRight:"1rem"},panelContainer:{display:"flex",padding:"0 0 0 1rem"},propertiesPanel:{".modern-dark &":{backgroundColor:"#202124"}},mainPanel:{height:"100vh",overflow:"auto",".modern-dark &":{backgroundColor:"#202124"}},container:{display:"flex"}}),ua=Object(v.a)({typography:{fontFamily:'"Open Sans", "Helvetica Neue", Helvetica, Arial, sans-serif'}});function fa(){var e=da(),t=Object(C.b)(),a=t.update,n=t.state,r=n.past,o=void 0===r?[]:r,l=n.future,b=void 0===l?[]:l,v=n.baseHasChanges,g=n.customFieldHasChanges,h=i.a.useState(),y=Object(m.a)(h,2),O=y[0],j=y[1],w=i.a.useRef(),x=i.a.useRef(),k=".".concat(e.toolbarWrapper),S=function(e){e.preventDefault(),e.returnValue="Are you sure you want to close the tab?"},E=i.a.useCallback((function(e,t){var n=[];if(e.length){n.push({fieldName:"id",operator:"in",value:e});var i={criteria:n};ve.n.search({data:i,sortBy:["sequence"]}).then((function(e){if(e.data){var n=e.data||[],i=Object(J.g)(n,t);a((function(e){e.widgets=Object(f.a)({},i.widgets),e.items=i.items,e.loader=!1}))}else a((function(e){e.loader=!1}))}))}else{var r=Object(J.g)([],t);a((function(e){e.widgets=Object(f.a)({},r.widgets),e.items=r.items,e.loader=!1,e.model=t,e.customModel=t,e.editWidget=-1,e.editWidgetType=null}))}}),[a]);return i.a.useEffect((function(){Object(ve.g)().then((function(e){a((function(t){t.languageList=Object(u.a)(e)}))})),Object(ve.h)().then((function(e){((null===e||void 0===e?void 0:e.theme)||"").includes("dark")&&(document.body.className=null===e||void 0===e?void 0:e.theme)})),Object(ve.k)().then((function(e){a((function(t){t.enableStudioApp=e}))}))}),[a]),i.a.useEffect((function(){var e=w.current;e&&e.focus()}),[]),i.a.useEffect((function(){var e=document.querySelector(k);if(e){var t=new ResizeObserver((function(){j(e.offsetHeight)}));return t.observe(e),function(){return t.unobserve(e)}}}),[k]),i.a.useEffect((function(){return window.top&&window.top.addEventListener("beforeunload",S),function(){window.top&&window.top.removeEventListener("beforeunload",S)}})),i.a.useEffect((function(){var e,t=window.top&&window.top.angular&&window.top.angular.element(window.top.document.querySelector('[ng-repeat="tab in navTabs"][class="ng-scope active"] [ng-click="closeTab(tab)"]')).scope();(null===t||void 0===t||null===(e=t.tab)||void 0===e?void 0:e.$viewScope)&&(t.tab.$viewScope.confirmDirty=function(e,t){try{if(!((null===o||void 0===o?void 0:o.length)>0||(null===b||void 0===b?void 0:b.length)>0||v||g))return e&&e();window.top.axelor.dialogs.confirm(window.top._t("Current changes will be lost. Do you really want to proceed?"),(function(a){return a?e&&e():t&&t()}))}catch(a){console.error(a)}})}),[b.length,o.length,v,g]),i.a.useEffect((function(){var e=function(){var e=new URL(document.location).searchParams;return{isStudioLite:e.get("isStudioLite"),model:e.get("model"),modelTitle:e.get("modelTitle")}}(),t=e.isStudioLite,n=e.model,i=e.modelTitle;function r(){return(r=Object(d.a)(c.a.mark((function e(){var i,r,o,l,d,u,m;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t&&n){e.next=2;break}return e.abrupt("return");case 2:return i=new U.a({model:"com.axelor.meta.db.MetaJsonModel"}),r={related:{menuBuilder:["title","parentMenu"]},data:{_domain:"name = '".concat(n,"'")}},a((function(e){e.loader=!0})),e.next=7,i.search(r);case 7:(o=e.sent).data&&(l=o.data[0],d=l.fields,u=void 0===d?[]:d,m=Object(s.a)(l,sa),a((function(e){e.model=Object(f.a)(Object(f.a)({},l),{},{entityType:T.d.META}),e.entityType=T.d.META,e.widgets=null,e.initialWidgets=null,e.items=[],e.initialItems=null,e.view=null,e.exView=null,e.modelField=null,e.customFields=[],e.customFieldWidgets=null,e.originalXML=null,e.extensionXML=null,e.extensionView=null,e.extensionMoves=[],e.errorList={},e.attrsList=[],e.translationList=[],e.initialTranslationList=[],e.removedTranslationList=[],e.selectedView=null,e.editWidget=-1,e.editWidgetType=null,e.tabIndex=0,E(u.map((function(e){return e.id})),m),e.customModel=l})));case 9:case"end":return e.stop()}}),e)})))).apply(this,arguments)}!function(){r.apply(this,arguments)}(),a((function(e){e.isStudioLite=JSON.parse(t||"false"),e.queryModel={title:i||n,name:n}}))}),[a,E]),i.a.createElement(p.a,{className:e.container,ref:w},i.a.createElement(p.a,{container:!0},i.a.createElement(p.a,{item:!0,xs:12,className:e.toolbarWrapper},i.a.createElement(Xe,null)),i.a.createElement(p.a,{item:!0,xs:!0,className:e.panelContainer,ref:x},i.a.createElement(ca,{toolbarOffset:O}),i.a.createElement(I,{className:e.mainPanel,toolbarOffset:O}))),i.a.createElement(p.a,null,i.a.createElement(Qt,null)))}function ma(){return i.a.createElement(C.a,null,i.a.createElement(h.a,{backend:y.a},i.a.createElement(g.a,{theme:ua},i.a.createElement(fa,null))))}o.a.render(i.a.createElement(ma,null),document.getElementById("root"))},26:function(e,t,a){"use strict";a.d(t,"b",(function(){return g})),a.d(t,"c",(function(){return h}));var n=a(4),i=a(9),r=a(15),o=a(0),l=a.n(o),c=a(25),s=a(29),d=a.n(s),u=a(2),f=a(5),m=a(67),p=a(37),b=a(68),v=l.a.createContext();function g(){return l.a.useContext(v)}function h(){return l.a.useContext(v).state}t.a=function(e){var t=e.children,a=function(e){var t=l.a.useState(e),a=Object(r.a)(t,2),n=a[0],i=a[1];return[n,l.a.useCallback((function(e){return i(Object(c.a)(e))}),[i])]}({future:[],past:[],title:"",items:[],sideItems:[],mainItems:[],widgets:null,dragWidget:null,editWidget:null,hoverWidget:null,initialWidgets:null,initialItems:null,tabIndex:0,modelType:"BASE",customFields:[],customFieldItems:[],customFieldWidgets:null,modelField:null,hoverAttr:{},loader:!1,removedCustomFields:[],errorList:{},entityType:u.d.META,actualType:null,extensionMoves:[],attrsList:[],removedTranslationList:[],isStudioLite:!1,editWidgetType:null,customFieldHasChanges:!1,baseHasChanges:!1}),o=Object(r.a)(a,2),s=o[0],g=o[1],h=s.widgets;function y(e,t){var a="customField"===t?s.customFieldWidgets:s.widgets;return function e(t){var n=a[t].items;return(void 0===n?[]:n).reduce((function(t,a){return t.concat(e(a))}),[t])}(e)}function O(e,t){t.exView&&!f.f.isCreatedFromStudio(t.exView)&&Object(m.a)(e,t)}function j(e,t){var a=e.id,n=e.props,i=e.reset,r=void 0!==i&&i,o=e.skipGenerateHistory,l=void 0!==o&&o,c=function(e){!l&&T(e);var t="customField"===e.editWidgetType;e.modelType===u.i.BASE&&(l||(t?e.customFieldHasChanges=!0:e.baseHasChanges=!0));var i=[];Object(f.p)(n,e,a,t);var o="customField"===e.editWidgetType?e.customFieldWidgets:e.widgets;r&&(o[a]={});var c="customField"===e.editWidgetType&&e.customFieldWidgets?e.customFieldWidgets[a]:e.widgets&&e.widgets[a];c&&Object.keys(n).forEach((function(e){var t=n[e];/^[a-z]/i.test(c.name)&&(c.name=Object(f.d)(c.name,!(n.type===u.l.form)));if((void 0===c[e]?"":c[e])!==t){var r=-1===a?"/":o[a].xPath,l=[void 0,null].includes(t)?"":t;Object(f.m)(s)&&i.push({name:"attribute",target:r,attributes:{name:f.f.keyReplacer(e,u.i.BASE),value:f.f.valueConverter(l,e)},id:a})}if("colSpan"===e){var d=Object.keys(o).find((function(e){return(o[e].items||[]).indexOf(a)>-1}));if(t=Math.min(Number(o[d]&&o[d].cols||t),t),o&&d&&o[d].type===u.l.panel)t=JSON.parse((o[d]||{}).widgetAttrs||"{}").itemSpan||t}else if("cols"===e&&t)t=Math.min(12,Number(t));else if("widgetAttrs"===e){var m=JSON.parse(t||"{}"),p=o[a].items;p&&p.forEach((function(e){var t=o[e];JSON.parse(t.widgetAttrs||"{}").colSpan||(t.colSpan=m.itemSpan)}))}c[e]=t,"layout"===e&&t===u.k.stack&&(c.cols=12)})),"customField"!==e.editWidgetType&&e.modelType===u.i.BASE&&(O(i,e),Object(p.b)(e))};t?c(t):g(c)}function w(e,t){var a=e.id,n=void 0===a?null:a,i=e.type,r=void 0===i?null:i,o=function(e){e.editWidget=n,e.highlightedOption=null,e.tabIndex=0,e.editWidgetType=r;var t="customField"===r?e.customFieldWidgets:e.widgets;![-2].includes(n)&&(null===t||void 0===t?void 0:t[n])&&(e.modelType===u.i.CUSTOM||"customField"===r)&&Object(f.p)(t[n],e,n,"customField"===r)};t?o(t):g(o)}function x(e,t){var a=e.attrs,r=e.id,o=e.skipGenerateHistory,l=void 0!==o&&o,c=d.a.uniqueId(),f=function(e){!l&&T(e),e.modelType!==u.i.BASE||l||(e.customFieldHasChanges=!0);var t=e.modelType===u.i.BASE?"customFieldWidgets":"widgets";e[t][r]=Object(n.a)(Object(n.a)({},a),{},{items:[].concat(Object(i.a)(a.items||[]),[c])}),e[t][c]=Object(n.a)(Object(n.a)(Object(n.a)({},u.j),"customFieldWidgets"===t?{model:e.model.fullName}:{}),{},{name:"panel".concat(c),title:"Tab",widgetAttrs:JSON.stringify({tab:"true"})}),e.editWidgetType=e.modelType===u.i.BASE?"customField":null};t?f(t):g(f);var m=s.modelType===u.i.BASE?"customField":null;j({id:r,props:{current:c,_type:m},skipGenerateHistory:!0},t),w({id:c,type:m},t)}var k=l.a.useCallback((function(){g((function(e){e.loader=!0}))}),[g]);function S(e,t){Object.keys(e).forEach((function(a){t[a]=Object(c.b)(e[a])}))}function T(e){e.past.push({widgets:Object(c.b)(e.widgets),items:Object(c.b)(e.items),extensionMoves:Object(c.b)(e.extensionMoves),customFieldWidgets:Object(c.b)(e.customFieldWidgets),customFields:Object(c.b)(e.customFields),customFieldItems:Object(c.b)(e.customFieldItems),metaFields:Object(c.b)(e.metaFields),removedCustomFields:Object(c.b)(e.removedCustomFields),errorList:Object(c.b)(e.errorList),selectedView:Object(c.b)(e.selectedView),modelField:Object(c.b)(e.modelField)}),e.future.length&&(e.future=[])}var C={onWidgetChange:j,onMove:function(e,t,a){var n=e.source,i=e.destination,r=function(e){return{isMoved:e}};if(!n||!i||i.id===u.g.form&&s.items.length>1)return r(!1);if(Object.values(u.g.createWidgets).indexOf(n.id)>-1)return r(!0);var o="customField"===a?s.customFieldWidgets:h;return!n.attrs.isNew&&Object(f.e)(o,n,i)||[u.l.panel,u.l.tabs].includes(n.attrs.type)&&y(n.id,a).indexOf(i.id===u.g.dumpField?i.panelId:i.id)>-1?r(!1):r(!0)},onDrag:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},a=t.props,r=t.isDrop;g((function(t){var o=[],l=a.attrs,c=void 0===l?{}:l,d=Object(n.a)({type:c.type,title:c.label,name:c.name,relationship:c.relationship,mappedBy:c.mappedBy},c);c&&"string"===c.name&&(d.visibleInGrid=!0),c&&"selection"===c.name&&(d.updateSelection=!0);var m=t.dragWidget,v=t.hoverWidget,g=t.editWidget,h=t.dragWidgetProps,y=t.widgets,k=t.customFieldWidgets;t.dragWidget=null,t.hoverWidget=null;var S=Object(n.a)({},t.hoverAttr);if(d.widgetAttrs&&S.widgetAttrs){var C=JSON.parse(S.widgetAttrs||"{}"),E=JSON.parse(d.widgetAttrs||"{}");S.widgetAttrs=JSON.stringify(Object(n.a)(Object(n.a)({},E),C))}if(t.dragWidgetProps=Object.assign({},a,{attrs:Object(n.a)(Object(n.a)({},d),S)}),g&&g===m&&(t.editWidget=null),r){var M,F,I,N,A,L;if(!v||!h)return;T(t),t.modelType===u.i.BASE&&(t.customFieldHasChanges=!0);var W=t.metaFields.findIndex((function(e){return e.typeName===h.attrs.typeName&&e.name===h.attrs.name}));-1!==W&&t.metaFields.splice(W,1);var q=Object(n.a)({},t.hoverAttr);h.attrs.widgetAttrs&&q.widgetAttrs&&(q.widgetAttrs=JSON.stringify(Object(n.a)(Object(n.a)({},JSON.parse(h.attrs.widgetAttrs||"{}")),JSON.parse(q.widgetAttrs||"{}")))),h.attrs=Object(n.a)(Object(n.a)({},h.attrs),q);var V=Object(f.o)({hoverWidget:v,dragWidgetProps:h})(t),B=V.extendList,P=V.newId;o.push.apply(o,Object(i.a)(B)),"customField"!==v._type&&t.modelType===u.i.BASE&&(Object(b.c)(t,h.panelId),Object(b.c)(t,v.panelId),O(o,t),Object(p.b)(t)),t.hoverAttr={};var _,D=t.modelType===u.i.BASE?k:y,U=null===(M=Object.keys(D||{}))||void 0===M?void 0:M.find((function(e){var t;return(null===(t=D[e])||void 0===t?void 0:t.type)===u.l.tabs}));if((null===h||void 0===h||null===(F=h.attrs)||void 0===F?void 0:F.type)===u.l.tabs&&!(null===h||void 0===h||null===(I=h.attrs)||void 0===I||null===(N=I.items)||void 0===N?void 0:N.length))x({attrs:null===(_=s.dragWidgetProps)||void 0===_?void 0:_.attrs,id:U,skipGenerateHistory:!0},t);(null===(A=D[v.panelId])||void 0===A?void 0:A.type)===u.l.tabs&&(null===h||void 0===h||null===(L=h.attrs)||void 0===L?void 0:L.type)===u.l.panel&&j({id:U,props:{current:P||h.id,_type:h._type},skipGenerateHistory:!0},t),P&&w({id:P,type:null===v||void 0===v?void 0:v._type},t)}else t.dragWidget=e}))},onRemove:function(e,t,a,n){var r=arguments.length>4&&void 0!==arguments[4]&&arguments[4],o=[],l="customField"===n;if(r){var c={message:Object(f.q)("Main panel is required to have side panels"),type:"alert"};g((function(e){e.loader=!1,e.dialog=c}))}else g((function(r){T(r);var c="customField"===n?r.customFieldWidgets:r.widgets,d="customField"===n?"customFieldItems":"items";l&&(r.customFieldHasChanges=!0);var m=e&&u.g.form!==e;if((t=(m?c[e].items:r[d]).findIndex((function(e){return"".concat(e)==="".concat(a)})))>-1&&c[a]){var v=y(a,n);v.forEach((function(e){if(l||s.modelType===u.i.CUSTOM){var t=c[e];t.id&&"symbol"!==typeof t.id&&r.removedCustomFields.push({id:t.id,version:t.version})}}));var g=Object(i.a)(v);if(m)if(c[e].layout!==u.k.grid||[u.l.menubar,u.l.toolbar].includes(c[e].type))c[e].items.splice(t,1);else{var h=Object(f.a)(r,{panelId:e,index:t,id:a},n);v=v.concat(h.ids),Object(f.m)(s)&&o.push.apply(o,Object(i.a)(h.extendList))}else r[d].splice(t,1);c[a]&&Object(f.m)(s)&&o.push({name:"replace",target:c[a].xPath}),v.forEach((function(e){var t=c[e];t&&(g.includes(e)||Object(f.m)(s)&&o.push({name:"replace",target:t.xPath}),t.id&&"symbol"!==typeof t.id&&!r.removedCustomFields.find((function(e){return e.id===t.id}))&&r.removedCustomFields.push({id:t.id,version:t.version}),delete c[e])})),v.indexOf(r.editWidget)>-1&&(r.editWidget=null)}Object(b.b)(r,a),l||r.modelType!==u.i.BASE||(Object(b.c)(r,e),O(o,r),Object(p.b)(r))}))},onHover:function(e){g((function(t){t.hoverWidget=e}))},onSelect:w,state:s,update:g,setHoverAttr:function(e){g((function(t){t.hoverAttr=e}))},startLoader:k,undo:function(){g((function(e){e.past.length&&(e.future.unshift({widgets:Object(c.b)(e.widgets),items:Object(c.b)(e.items),extensionMoves:Object(c.b)(e.extensionMoves),customFieldWidgets:Object(c.b)(e.customFieldWidgets),customFields:Object(c.b)(e.customFields),customFieldItems:Object(c.b)(e.customFieldItems),metaFields:Object(c.b)(e.metaFields),removedCustomFields:Object(c.b)(e.removedCustomFields),errorList:Object(c.b)(e.errorList),selectedView:Object(c.b)(e.selectedView),modelField:Object(c.b)(e.modelField)}),S(e.past[e.past.length-1],e),e.past.splice(e.past.length-1,1))}))},redo:function(){g((function(e){e.future.length&&(e.past.push({widgets:Object(c.b)(e.widgets),items:Object(c.b)(e.items),extensionMoves:Object(c.b)(e.extensionMoves),customFieldWidgets:Object(c.b)(e.customFieldWidgets),customFieldItems:Object(c.b)(e.customFieldItems),metaFields:Object(c.b)(e.metaFields),customFields:Object(c.b)(e.customFields),removedCustomFields:Object(c.b)(e.removedCustomFields),errorList:Object(c.b)(e.errorList),selectedView:Object(c.b)(e.selectedView),modelField:Object(c.b)(e.modelField)}),S(e.future[0],e),e.future.splice(0,1))}))},clearHistory:function(e){e.future=[],e.past=[]},onTranslationRemove:function(e){g((function(t){t.removedTranslationList.push(e)}))},addTabPanel:x};return l.a.createElement(v.Provider,{value:C},t)}},28:function(e,t,a){"use strict";var n,i=a(101),r=a(102),o=a(4),l=a(161),c=a.n(l),s={"X-Requested-With":"XMLHttpRequest","Content-Type":"application/json",Accept:"application/json"},d={};function u(e){var t=document.cookie||"";return t!==n&&(n=t,d=t.split("; ").reduce((function(e,t){var a=t.split("=");return e[a[0]]=a[1],e}),{})),d[e]}var f=function(e,t){return"ws/rest/".concat(e,"/").concat(t)},m=new(function(){function e(t){Object(i.a)(this,e),this.baseURL="../../"}return Object(r.a)(e,[{key:"request",value:function(e,t,a){var n={};return"get"!==t&&(n.data=a),c()(Object(o.a)({method:t,baseURL:this.baseURL,headers:Object(o.a)(Object(o.a)({},s),{},{"X-CSRF-Token":u("CSRF-TOKEN")}),url:e},n))}},{key:"interceptor",value:function(e,t,a){var n=this;return this.request(e,t,a).then((function(i){if(200===i.status)return i.data||{status:i.status};if(401===i.status){var r=localStorage.getItem("credential");if(r){var o=JSON.parse(r),l=o.username,c=o.password;return n.login(l,c).then((function(i){if(200===i.status)return n.interceptor(e,t,a)}))}}return Promise.resolve("Error")})).catch((function(i){if(i.response&&401===i.response.status)return n.relogin(e,t,a)}))}},{key:"relogin",value:function(e,t,a){var n=this,i=localStorage.getItem("credential");if(i){var r=JSON.parse(i),o=r.username,l=r.password;return this.login(o,l).then((function(i){if(200===i.status)return n.interceptor(e,t,a)}))}}},{key:"get",value:function(e){return this.interceptor(e,"get")}},{key:"post",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return this.interceptor(e,"post",t)}},{key:"delete",value:function(e,t){return this.interceptor(e,"delete",t)}},{key:"login",value:function(e,t){var a={username:e,password:t};return this.interceptor("login.jsp","post",a).then((function(a){return 200===a.status&&localStorage.setItem("credential",JSON.stringify({username:e,password:t})),{status:a.status}}))}},{key:"logout",value:function(){return this.interceptor("logout").then((function(){localStorage.removeItem("credential")}))}}]),e}()),p=function(){function e(t){Object(i.a)(this,e),this.model=t.model}return Object(r.a)(e,[{key:"search",value:function(e){var t=e.fields,a=e.sortBy,n=e.data,i=e.limit,r=e.offset,o=f(this.model,"search");return m.post(o,{fields:t,sortBy:a,data:n,limit:i,offset:r})}},{key:"fetch",value:function(e,t){var a="".concat(e,"/fetch"),n=f(this.model,a);return m.post(n,t)}},{key:"view",value:function(e){return m.post("/ws/meta/view",e)}},{key:"save",value:function(e){var t=f(this.model,"");return m.post(t,{data:e})}},{key:"saveAll",value:function(e){var t=f(this.model,"");return m.post(t,{records:e})}},{key:"removeAll",value:function(e){var t=f(this.model,"removeAll");return m.post(t,{records:e})}},{key:"login",value:function(e,t){return m.login(e,t)}},{key:"logout",value:function(){return m.logout()}},{key:"action",value:function(e){return m.post("ws/action",e)}},{key:"info",value:function(){return m.get("ws/app/info")}}]),e}();t.a=p},37:function(e,t,a){"use strict";a.d(t,"a",(function(){return o})),a.d(t,"b",(function(){return l}));var n=a(5),i=a(2),r=function(e){return["viewer","editor","hilite"].includes(e)?"field":e};function o(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],a=arguments.length>2?arguments[2]:void 0,l=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"";if(-1===a)return"";var c=""===l,s=function(t,a){var n=e[a];return t.filter((function(t){return t!==a&&e[t]&&[e[t].name,e[t].originalName].includes(n.name)})).length>0},d=function(t,a){var n=e[a];return t.filter((function(t){return e[t]&&[e[t].name,e[t].originalName].includes(n.name)})).indexOf(a)+1},u=function(t,a,i){return t.filter((function(t){return e[t]&&r(n.f.getWidgetType(e[t],"field"))===a})).indexOf(i)+1},f=function(){var t=e[a];return!!t.name&&1===Object.values(e).filter((function(e){return e.name===t.name})).length},m=function(){return!c&&!!f()},p=!0,b=Object.values(e),v=Object.keys(e);if(b.forEach((function(i,c){if(i.items&&-1!==i.items.findIndex((function(e){return e===a}))){p=!1;var f=e[a],b=r(n.f.getWidgetType(f,"field"));if(f.name){var g="/".concat(b,"[@name='").concat(f.name,"']");if(s(i.items,a)){var h=d(i.items,a);h>0&&(g="".concat(g,"[").concat(h,"]"))}l="".concat(g).concat(l)}else{var y=u(i.items,b,a);l="/".concat(b,"[").concat(y,"]").concat(l)}l=m()?"/".concat(l):o(e,t,v[c],l)}})),p){var g=t.findIndex((function(e){return e===a}));if(-1!==g){var h=e[a];if(h.name){var y="//".concat(h.type,"[@name='").concat(h.name,"']");if([i.l.menubar,i.l.toolbar,i.l.divider].includes(h.type)&&(y="//".concat(h.type)),s(t,a)){var O=d(t,a);O>0&&(y="".concat(y,"[").concat(O,"]"))}l="".concat(y).concat(l)}else{var j=u(t,h.type,a);l="//".concat(h.type,"[").concat(j,"]").concat(l)}}}return l}function l(e){Object.keys(e.widgets||{}).forEach((function(t){var a=o(e.widgets,e.items,t);e.widgets[t].xPath=a}))}},5:function(e,t,a){"use strict";a.d(t,"b",(function(){return w})),a.d(t,"d",(function(){return x})),a.d(t,"c",(function(){return k})),a.d(t,"q",(function(){return S})),a.d(t,"a",(function(){return C})),a.d(t,"p",(function(){return E})),a.d(t,"m",(function(){return M})),a.d(t,"o",(function(){return F})),a.d(t,"e",(function(){return I})),a.d(t,"n",(function(){return N})),a.d(t,"j",(function(){return W})),a.d(t,"g",(function(){return q})),a.d(t,"k",(function(){return R})),a.d(t,"l",(function(){return z})),a.d(t,"h",(function(){return K})),a.d(t,"i",(function(){return $}));var n=a(16),i=a(9),r=a(4),o=a(17),l=a(29),c=a.n(l),s=a(2),d=a(87),u=a(56),f=a.n(u),m=a(68),p=a(162),b=a.n(p),v=a(37),g=a(67),h=a(163),y=a.n(h),O=["widget","id"],j=["type"];function w(e){return e&&e.replace(/([A-Z])/g," $1").replace(/^./,(function(e){return e.toUpperCase()}))}var x=function(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];if(e){var a;if(e=e.trim(),t)a=Object(l.camelCase)(e);else{var n=Object(l.camelCase)(e);a=n[0].toUpperCase()+n.slice(1)}return a}},k=function(e){var t=e.replace(/([A-Z])/g," $1");return t&&t.charAt(0).toUpperCase()+t.slice(1).toLowerCase()};function S(e){return window&&window.top&&window.top._t&&"string"===typeof e?window.top._t(e):e}var T=function(e){var t=e.widget,a=e.id,n=Object(o.a)(e,O);return Object(r.a)({colSpan:t.colSpan||1,serverType:s.e.spacer,type:s.l.field,name:"spacer".concat(a),title:"Spacer"},n)},C=function(e,t,a){var n=t.id,i=t.index,o=t.panelId,l=[],d="customField"===a?e.customFieldWidgets:e.widgets,u=d[o],f=d[n]||{colSpan:1},m=u.items[u.items.length-1]===n,p=[],b=function(e){if(!e||!e.length)return!1;var t=e[e.length-1],a=d[t];return"spacer"===a.type||"spacer"===a.serverType},v=u.items.splice(i,1);if(m)for(;b(u.items);)p.push(u.items.pop());if("spacer"!==d[v].type&&"spacer"!==d[v].serverType&&!m){var g=c.a.uniqueId(),h={};e.modelType===s.i.CUSTOM&&(h={model:f.model,modelField:f.modelField}),d[g]=T(Object(r.a)(Object(r.a)({widget:{},id:g,colSpan:f.colSpan},JSON.parse(f.widgetAttrs||"{}").colSpan?{widgetAttrs:JSON.stringify({colSpan:JSON.parse(f.widgetAttrs).colSpan})}:{}),h));var y=d[u.items[i]];M(e)&&l.push({name:"insert",position:"before",elements:[d[g]],target:y.xPath}),u.items.splice(i,0,g)}return{ids:[].concat(p,[n]),extendList:l}},E=function(e,t,a,n){var i=Object(m.a)(e,t.modelType,n);Object.keys(i).length?t.errorList[a]=i:t.errorList[a]&&delete t.errorList[a]};function M(e){return e.exView&&!U(e.exView)}var F=function(e){var t=e.hoverWidget,a=e.dragWidgetProps;return function(e){var n,o,l,d,u,f,m=[],p="customField"===t._type,b="customField"!==t._type||a.panelId?"items":"customFieldItems",h="customField"!==t._type||t.panelId?"items":"customFieldItems",y="customField"===t._type?e.customFieldWidgets:e.widgets,O=((t.panelId?y[t.panelId]:e)[h]||[]).slice(),j=t.meta,w=j.colSpan,x=j.grid,k=void 0===x?[]:x,C=j.row,F=j.relatedColSpan,I=null!==(n=null===(o=k.find((function(e){return e.id===a.id})))||void 0===o?void 0:o.cellIndice)&&void 0!==n?n:a.index;a.attrs&&void 0!==a.attrs.isNew&&delete a.attrs.isNew;var N=a.id&&y[a.id]?JSON.parse((null===(l=a.attrs)||void 0===l?void 0:l.widgetAttrs)||"{}").colSpan:void 0,A=y[t.panelId];if(a.attrs.type===s.l.panel){var L,W=JSON.parse((null===(L=a.attrs)||void 0===L?void 0:L.widgetAttrs)||"{}");if(A&&A.type===s.l.tabs)a.attrs.title=a.attrs.title||S("Tab"),a.attrs.widgetAttrs=JSON.stringify(Object(r.a)(Object(r.a)({},W),{},{tab:"true"}));else if("true"===W.tab){var q;a.attrs.widgetAttrs=JSON.stringify(Object(r.a)(Object(r.a)({},JSON.parse((null===(q=a.attrs)||void 0===q?void 0:q.widgetAttrs)||"{}")),{},{tab:"false"}))}}if("spacer"===(null===(d=t.attrs)||void 0===d?void 0:d.serverType)||"spacer"===(null===(u=t.attrs)||void 0===u?void 0:u.type)){var V,B,P,_,D,U=JSON.parse((null===(V=t.attrs)||void 0===V?void 0:V.widgetAttrs)||"{}").colSpan;a.attrs.widgetAttrs=JSON.stringify(Object(r.a)(Object(r.a)({},JSON.parse((null===(B=a.attrs)||void 0===B?void 0:B.widgetAttrs)||"{}")),{},{colSpan:U})),(null===(P=t.attrs)||void 0===P?void 0:P.id)&&"symbol"!==typeof(null===(_=t.attrs)||void 0===_?void 0:_.id)&&e.removedCustomFields.push({id:t.attrs.id,version:t.attrs.version}),JSON.parse((null===(D=y[t.panelId])||void 0===D?void 0:D.widgetAttrs)||"{}").itemSpan||U||(a.attrs.colSpan=6),delete y[t.id]}var J=null===A||void 0===A?void 0:A.serverType;if(a.attrs&&!a.attrs.colSpan)if(w&&a.attrs&&![s.l.menu,s.l.menuItem,s.l.divider].includes(a.attrs.type)&&![s.l.toolbar,s.l.menubar].includes(J)){var R=a.attrs.colSpan;if(J===s.l.panel&&Number(A.itemSpan)?a.attrs.colSpan=Number(A.itemSpan):a.attrs.colSpan=F||w,p){var z={colSpan:F||w};a.attrs.widgetAttrs=JSON.stringify(z)}if("".concat(a.attrs.colSpan)!=="".concat(R)){if(e.modelType===s.i.CUSTOM){var H=JSON.parse(a.attrs.widgetAttrs||"{}");H.colSpan=F||w,a.attrs.widgetAttrs=JSON.stringify(H)}M(e)&&m.push({name:"attribute",target:a.attrs.xPath,attributes:{name:"colSpan",value:a.attrs.colSpan}})}if(e.modelType===s.i.CUSTOM){var X=JSON.parse(a.attrs.widgetAttrs||"{}");X.colSpan=6,a.attrs.widgetAttrs=JSON.stringify(X)}}else if(a.attrs&&e.modelType===s.i.CUSTOM){var G=JSON.parse(a.attrs.widgetAttrs||"{}");G.colSpan=F||w,a.attrs.colSpan=F||w,a.attrs.widgetAttrs=JSON.stringify(G)}var Y=[],Q=function(e){var t=e.grid,a=e.items,n=e.widgetIndex,o=e.hoverCellRowIndex,l=[],c=[],s=!0,d=0;if(t.length){if(t.forEach((function(e,t){e.colSpan=Number(e.colSpan||1),e.id&&s&&t<n&&(d=a.indexOf(e.id)+1),!e.separator&&e.rowIndex<=o&&(t<n?e.id?(l=[],d=a.indexOf(e.id)+1):l.push(Object(r.a)(Object(r.a)({},e),{},{colSpan:e.colSpan||6,isSpacer:!0})):s&&t>n&&(e.id?(d=a.indexOf(e.id),s=!1):a.length&&c.push(Object(r.a)(Object(r.a)({},e),{},{isSpacer:!0}))))})),a.length){var u=a[a.length-1],f=t.findIndex((function(e){return"".concat(e.id)==="".concat(u)}));n>f&&-1!==f&&(c=[],d=a.length+1)}if(l.length){var m=Object(i.a)(l);m.forEach((function(e,t,a){a.findIndex((function(t){return e.rowIndex===t.rowIndex}))===t&&(a.reduce((function(t,a){return a.rowIndex===e.rowIndex?t+a.colSpan:t}),0)>=12&&(l=m.filter((function(t){return t.rowIndex!==e.rowIndex}))))}))}}return{afterWidgets:c,beforeWidgets:l,itemIndex:d}}({grid:k,items:O,widgetIndex:Number(t.index),hoverCellRowIndex:C}),K=Q.beforeWidgets,$=Q.afterWidgets,ee=Q.itemIndex,te=void 0===ee?0:ee,ae=!1;if(a.id&&y[a.id]){var ne=a.panelId?y[a.panelId]:e,ie=ne[b],re=ie.indexOf(a.id);if([s.k.grid].includes(ne.layout)){var oe=c.a.uniqueId(),le=ie[ie.length-1]===a.id,ce=!1;le&&a.panelId===t.panelId&&I<t.index&&(ce=!0);var se=a.panelId?y[a.panelId]:null,de=!1;if(se&&[s.l.tabs,s.l.panelStack].includes(se.type)&&(de=!0),le&&!ce||de||[s.l.menubar,s.l.toolbar].includes(J)){ie.splice(re,1);for(var ue=function(e){var a,n;if(!e||!e.length)return!1;var i=e[e.length-1];if(i===t.id)return!1;var r=null===t||void 0===t||null===(a=t.meta)||void 0===a||null===(n=a.grid)||void 0===n?void 0:n.find((function(e){return e.id===i}));if(r){if(r.rowIndex<t.meta.row)return!1;if(r.rowIndex===t.meta.row&&r.columnIndex<t.meta.colIndex)return!1}var o=y[i];return"spacer"===o.type||"spacer"===o.serverType};ue(ne.items);){var fe=ne.items.pop();y[fe].id&&"symbol"!==typeof y[fe].id&&e.removedCustomFields.push({id:y[fe].id,version:y[fe].version}),delete y[fe]}}else{var me={colSpan:y[a.id].colSpan||1,serverType:s.e.spacer,type:s.l.field,name:"spacer".concat(oe),title:"Spacer"};e.modelType===s.i.CUSTOM&&(me.model=a.attrs.model,me.modelField=a.attrs.modelField),N&&(me.widgetAttrs=JSON.stringify({colSpan:N})),y[oe]=Object.assign({},me),M(e)&&m.push({name:"insert",position:"before",target:a.attrs.xPath,elements:[me],id:oe}),ie.splice(re,1,oe)}}else a.panelId===t.panelId&&I<t.index&&(ae=!0,te--),ie.splice(re,1)}if("spacer"===t.attrs.type||"spacer"===t.attrs.serverType){var pe=!a.id||Object.values(s.g.createWidgets).indexOf(a.id)>-1,be=pe?c.a.uniqueId():a.id,ve=Object.assign({},a.attrs||{});return pe&&!1!==ve.isCoreField&&ve.name&&(ve.name="".concat(ve.name).concat(be)),E(ve,e,be,p),pe?(y[be]=Object.assign({},ve),M(e)&&m.push({name:"insert",position:"before",target:t.attrs.xPath,elements:[ve],id:be})):(M(e)&&m.push({name:"move",source:a.attrs.xPath,position:"before",target:t.attrs.xPath}),y[a.id]=Object.assign(Object(r.a)({},y[a.id]),ve)),(t.panelId?y[t.panelId]:e)[h].splice(O.indexOf(t.id)-(ae?1:0),1,be),M(e)&&m.push({name:"replace",target:t.attrs.xPath}),{extendList:m,newId:be}}if(t.meta&&t.meta.horizontal){var ge=Number(t.index);a.panelId===t.panelId&&I<t.index&&(ge-=2),te=Math.ceil(Number(ge/2))}((t.panelId?y[t.panelId]:e).layout||s.k.flow)===s.k.flow&&(K=[],$=[]);var he,ye=[],Oe=(t.panelId?y[t.panelId]:e)[h]||[],je=Oe[te],we=y[Oe[te]],xe="before";!we&&Oe.length<=te&&(je=Oe[Oe.length-1],we=y[Oe[Oe.length-1]],xe="after"),we&&"true"==="".concat(we.sidebar)&&(a.attrs.sidebar="true",M(e)&&m.push({name:"attribute",target:a.attrs.xPath,attributes:{name:"sidebar",value:"true"}})),we&&(he=we.xPath||Object(v.a)(y,e[h],je));var ke=function(t,a){var n=Z(a.xPath),i=e.extensionMoves.filter((function(e){if(e.target){var t=Z(e.target);if("replace"===e.name){if(n.self)return t.parent.indexOf(n.self)>=0;if(t.parent.indexOf(n.parent)>=0)return!0}}return!1}));return!(![s.l.menu,s.e.button,s.l.menuItem].includes(t.attrs.type)||![s.l.menubar,s.l.toolbar,s.l.menu].includes(a.type)||0!==a.items.length||i.length)},Se=[];return K.concat([a]).concat($).forEach((function(n){var i=Object.assign({},n.attrs||{}),o=n.id,l="symbol"===typeof o,d=!o||l,u=!0;if([s.l.menubar,s.l.toolbar].includes(J)&&n.isSpacer&&(u=!1),u){if(d&&(o=c.a.uniqueId(),!1!==i.isCoreField&&(i&&Object.keys(i).length&&E(i,e,o,p),i.name&&(i.name="".concat(i.name).concat(o))),l&&(e.editWidget=o)),n.isSpacer&&n.isSpacer){var f,m=a.attrs||{},b=JSON.parse((null===(f=y[t.panelId])||void 0===f?void 0:f.widgetAttrs)||"{}").itemSpan;i=T(Object(r.a)({widget:n,id:o,model:m.model,modelField:m.modelField},Number(b||6)!==Number(n.colSpan||6)?{widgetAttrs:JSON.stringify({colSpan:n.colSpan||6})}:{}))}if(d){if(M(e)&&!p)if(we)M(e)&&Se["after"===xe?"unshift":"push"]({name:"insert",position:xe,target:he,elements:[i],id:o});else{var v=y[t.panelId];ke(a,v)?Object(g.c)(e,i,o,t.panelId):Se["after"===xe?"unshift":"push"]({name:"insert",position:"inside",target:v.xPath,elements:[i],id:o})}ye.push(o),y[o]=Object.assign({},i)}else{if(M(e)&&!p)if(we)M(e)&&Se["after"===xe?"unshift":"push"]({name:"move",source:a.attrs.xPath,position:xe,target:he});else{var h=y[t.panelId];ke(a,h)?Object(g.c)(e,a.attrs,a.id,t.panelId):M(e)&&Se["after"===xe?"unshift":"push"]({name:"move",source:a.attrs.xPath,position:"inside",target:h.xPath})}y[a.id]=Object.assign(Object(r.a)({},y[a.id]),i)}Y.push(o)}})),m.push.apply(m,Se),(f=(t.panelId?y[t.panelId]:e)[h]||[]).splice.apply(f,[te,0].concat(Y)),{extendList:m,newId:Y&&Y[Y.length-1]}}},I=function(e,t,a){if(e[t.id]&&(e[t.panelId]&&e[t.panelId].exclusive&&a.panelId!==t.panelId))return!0;if(e[a.id]&&(e[a.panelId]&&e[a.panelId].exclusive&&t.panelId!==a.panelId))return!0;return!1},N=function(e){var t=e.type,a=e.widgetAttrs;if(t===s.l.panel&&a&&"true"===JSON.parse(a||"{}").tab)return!0;return!1},A=function(e){var t=JSON.parse(e.widgetAttrs||"{}"),a=e.type===s.l.panel?12:6;return t.colSpan||a},L=function(e){return[s.l.panel,s.l.tabs].includes(e.type)?{cols:12}:{}},W=function(e){return e?{menuBuilderTitle:e.title,menuBuilderParent:e.parentMenu}:{}},q=function(){var e,t,a=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],o=arguments.length>1?arguments[1]:void 0,l=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"",d=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"form",u=!1,f={},m=[],p=[];if(a&&a.length&&a.forEach((function(e){var a=c.a.uniqueId(),n=N(e);if([s.l.panel,s.l.tabs].includes(e.type))u=!0,t=a,e.items=[],e.layout="grid";else if(!u){var o=f[t];o?(o.items.push(a),f[t]=Object(r.a)(Object(r.a)({},f[t]),{},{items:Object(i.a)(o.items)})):u=!0}u&&(u=!1,n?p.push(a):m.push(a)),e.selectionText&&e.selectionText.length&&(e.updateSelection=!0),f[a]=Object(r.a)(Object(r.a)(Object(r.a)({},e),{},{colSpan:A(e)},L(e)),{},{type:"".concat(e.type).concat(l)})})),p.length){var b=c.a.uniqueId(),v={items:[].concat(p),type:s.l.tabs,title:"Tab Panel"};m.push(b),f[b]=Object(r.a)({},v)}var g="customForm"===d?s.g.customForm:s.g.form,h={widgets:Object(r.a)((e={},Object(n.a)(e,g,Object(r.a)(Object(r.a)({type:d,cols:12},o),W(o?o.studioMenu:void 0))),Object(n.a)(e,s.g.dumpField,{type:s.l.dumpField,name:""}),e),f),items:[].concat(m)};return h};var V=function(e,t){if(t===s.i.BASE){["formView","gridView","minSize","maxSize"].includes(e={targetModel:"target",minSize:"min",maxSize:"max"}[e]||e)&&(e=H(e)),["bind"].includes(e)&&(e="x-".concat(H(e)))}return e},B=function(e,t){var a={targetModel:"target",minSize:"min",maxSize:"max"};if(t===s.i.BASE){var n=Object.values(a).findIndex((function(t){return t===e}));-1!==n&&(e=Object.keys(a)[n])}return e};function P(e){var t=[];return d.b.forEach((function(e){var a=e.value,n=(void 0===a?[]:a).map((function(e){return e.serverType}));t.push.apply(t,Object(i.a)(n))})),"field"===e.serverType&&t.includes(e.type)}function _(e,t){return e&&["title","text"].includes(t)&&(e=e.replace(/</g,"&lt;")),e}var D=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],a={},n=["image","serverType","isModelField","isCoreField","current"].concat(Object(i.a)(t));return Object.keys(e).forEach((function(t){n.includes(t)||("type"===t&&["item","field"].includes(e[t])?a[t]=e.serverType:a[t]=""===e[t]?null:e[t])})),a},U=function(e){var t=e.xmlId,a=void 0===t?null:t,n=e.extension;if(a&&!n&&0===a.indexOf("studio-"))return!0;return!1},J=function(e,t){var a=s.b[e];return void 0!==a&&"".concat(a)==="".concat(t)},R=function(e,t,a,i){var o=!(arguments.length>4&&void 0!==arguments[4])||arguments[4],l=Object(n.a)({},e,t);if(o){var c="string"===typeof i?JSON.parse(i):i||{};if(a&&![void 0,"",null].includes(t)){if(J(e,t))return delete c[e],Object(n.a)({},a,JSON.stringify(Object(r.a)({},c)));var s=Object(n.a)({},e,"".concat(t));return Object(n.a)({},a,JSON.stringify(Object(r.a)(Object(r.a)({},c),s)))}if(a&&(!t||""===t))return delete c[e],Object(n.a)({},a,JSON.stringify(Object(r.a)({},c)))}return"showTitle"===e&&!0===t?{showTitle:void 0}:l},z=function(e,t,a,n){var i=!(arguments.length>4&&void 0!==arguments[4])||arguments[4];if(i&&a){if(e[a]){var r=JSON.parse(e[a]);return[void 0,null].includes(r[t])?n:r[t]}return n||null}return[void 0,null].includes(e[t])?n:e[t]},H=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"-";return e.replace(/[A-Z]/g,(function(e){return t+e.toLowerCase()}))},X=function(e){return e.replace(/-([a-z])/g,(function(e){return e[1].toUpperCase()}))},G=function(e,t){var a=s.b[e];return!(![!0,!1].includes(a)||"".concat(t)!=="".concat(a))},Z=function(e){var t=e.split("/"),a=t.length,n=a>3?t[a-2]:t[a-1],i=a>3?t[a-1]:void 0;return{parent:n,self:i}},Y=function(e){var t,a=e.view,l=e.fields,d=(e.original,e.extensionXML,e.attrsList),u=a.elements,f=function(e,t,a,n){var i,l,c,d={};if(e){var u,f,m=e.attributes||{},p=m.type,b=Object(o.a)(m,j);-1===e.name.indexOf("panel")&&(i=t.find((function(e){return e.name===b.name})));var v={};Object.keys(b).map((function(e){var t=e;0===e.indexOf("x-")&&(t=e.substring(2)),v[B(X(t),s.i.BASE)]=b[e]}));var g=(l=(null===(u=i)||void 0===u?void 0:u.target)||(null===(f=i)||void 0===f?void 0:f.targetModel),c=b.target,l||c);d=Object(r.a)(Object(r.a)(Object(r.a)(Object(r.a)({},v),{},{colSpan:Number(b.colSpan||6)},function(e,t,a,n){return{name:e.name}}(b,0,0,e.name)),function(e,t,a){var n,i;return t?(n=t.type.toLowerCase(),i=e):(n=e,i=a||("field"===e?void 0:e)),{serverType:s.p[n]||n,type:s.p[i]||i}}(e.name,i,p)),function(e,t){return e.title?{title:e.title}:(null===t||void 0===t?void 0:t.label)?{autoTitle:t.label}:e.name?{autoTitle:H(e.name," ")}:{}}(b,i)),g&&(d.targetModel=g),e.name&&(e.name.indexOf(s.l.panel)>=0||[s.l.menubar,s.l.toolbar].includes(e.name))&&(d.colSpan=Number(b.colSpan||12),d.cols=12,d.layout="grid",d.serverType="panel"===d.type&&!0===d.tab?s.l.tabs:d.serverType||d.type)}return{widget:d,field:i}},m=function(e){return e.name},p=function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],a=arguments.length>1?arguments[1]:void 0,n=["panel-mail"],o={},l=[],u=[];return t.forEach((function(t){if((!t.attributes||"true"!=="".concat(t.attributes.json))&&!n.includes(t.name)&&"cdata"!==t.type){var p=c.a.uniqueId(),b=f(t,a),v=b.widget,g=b.field;if(g&&u.push(g),l.push(p),t.name&&t.name.indexOf(s.l.panel)>=0&&(v.items=[]),t.elements&&"field"!==t.name){var h=e(t.elements,a,t.attributes);o=Object(r.a)(Object(r.a)({},o),h._widgets),v.items=Object(i.a)(h.itemList),u.push.apply(u,Object(i.a)(h.fieldList))}if(t.elements&&"field"===t.name){var y=m(t.elements[0]);y&&(v.type=y,v.elements=t.elements)}if(v.name)(d||[]).filter((function(e){return e.field===v.name})).forEach((function(e){["selection-in"].includes(e.name)?v[e.name]=e.value:v[B(X(e.name),s.i.BASE)]=e.value}));o[p]=Object(r.a)({},v)}})),{_widgets:o,itemList:l,fieldList:u}}(u,l),b=p.itemList,v=p._widgets,g=p.fieldList,h=v[b[0]],y=h.items||[];return delete v[b[0]],{widgets:Object(r.a)((t={},Object(n.a)(t,s.g.form,Object(r.a)(Object(r.a)({type:s.l.form,cols:12},h),{},{items:void 0})),Object(n.a)(t,s.g.dumpField,{type:s.l.dumpField,name:""}),t),v),items:y,fieldList:g}},Q=function(e){return JSON.parse(f.a.xml2json(e,{compact:!1,fullTagEmptyElement:!1})).elements[0].elements};var K=function(e){var t=e.name,a=e.fieldName,n=function(e){for(var t="0123456789abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ",a="",n=e;n>0;--n)a+=t[Math.floor(Math.random()*t.length)];return a}(6);return"studio:".concat(n,":").concat(a,":").concat(t)};function $(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],a=arguments.length>2&&void 0!==arguments[2]&&arguments[2];if(e){if(a)return"custom-model-".concat(e.name,"-").concat(t?"form":"grid");var n=e.split("."),i=n[n.length-1];if(i){var r=y()(i);return"".concat(r.toLowerCase(),"-").concat(t?"form":"grid")}}}t.f={camleCaseString:w,translate:S,processXML:function(e,t){return b()(e)},getWidgetAttrs:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],a=arguments.length>2?arguments[2]:void 0,n={},r=["version","type","typeName","label","items","serverType","layout","cols","isCoreField","isModelField","relationship","current","autoTitle","metaModel","targetSearch","editorType","studioApp"].concat(Object(i.a)(t));if("field"!==e.serverType&&r.push("targetModel","targetName","target"),Object.keys(e).forEach((function(t){if(!r.includes(t)&&""!==e[t]){var i=!0;a===s.i.BASE&&G(t,e[t])&&(i=!1),i&&("dummyType"===t?n.type=e[t]:n[V(t,a)]=_(e[t],t))}})),e.type===s.l.panelInclude&&"object"===typeof e.view&&(n.view=e.view.name),(e.isModelField||P(e))&&(n.type=e.type),e.type===s.l.panelRelated&&(n.name=e.field),n.name){var o=n.name.indexOf("[");-1!==o&&(n.name=n.name.substring(0,o))}return n},getCustomModelFields:function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],a=arguments.length>1?arguments[1]:void 0,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},o=arguments.length>3&&void 0!==arguments[3]&&arguments[3],l=arguments.length>4&&void 0!==arguments[4]?arguments[4]:0,c=[];return t.forEach((function(t){if(a[t]){var d=Object(r.a)({},a[t]),u=[];if(!["dump_field","form"].includes(d.type)&&(d.type!==s.l.tabs&&("symbol"===typeof d.id&&delete d.id,"false"!==d.showTitle&&delete d.showTitle,o&&(d.sequence=l,l++),"spacer"===d.serverType&&u.push("title"),c.push(Object(r.a)(Object(r.a)({},D(d,u)),n))),d.items&&d.items.length)){var f=e(d.items,a,n,o,l);c.push.apply(c,Object(i.a)(f.fields)),l=f.sequence}}})),{fields:c,sequence:l}},isCreatedFromStudio:U,getFormProperties:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],a=["type","cols","items"].concat(Object(i.a)(t)),n={};return Object.keys(e).forEach((function(t){a.includes(t)||(n[t]=""===e[t]?null:e[t])})),n},getDefaultProperties:function(e){switch(e){case s.i.CUSTOM:return{formWidth:"large"};case s.i.BASE:return{width:"large"};default:return{}}},getPatchList:function(e){if(e){var t=e.elements,a=void 0===t?[]:t;if(a[0])return a[0].elements||[]}return[]},keyReplacer:V,valueConverter:_,filterFormPatch:function(e){return e.filter((function(e){return"/"===e.attributes.target}))},getCurrentFormAttributes:function(e){var t=e.elements;return(void 0===t?[]:t)[0].attributes||{}},mergeFormAttributes:function(e,t){var a=e.findIndex((function(e){return"/"===e.attributes.target})),n=-1===a?0:a,i=-1===a?0:1;return Object.keys(t).length?e.splice(n,i,Object(r.a)({},t)):-1!==a&&e.splice(a,1),e},camelToDashCase:H,dashToCamelCase:X,isSamePositionInOriginal:function e(t,a,n,i){var r=n.attrs||n||{},o=!1;return(t||[]).forEach((function(t){if(t.elements){if(t.attributes&&a&&t.attributes.name===a.name){var l=t.elements[i];l&&l.attributes&&r&&l.attributes.name===r.name&&(o=!0)}if(!o&&t.elements&&t.elements.length)!0===e(t.elements,a,n,i)&&(o=!0)}})),o},getWidgetType:function(e,t){var a=e.isModelField||!1===e.isCoreField||"field"===e.serverType?"field":e.type?e.type.toLowerCase():t;return a=["spacer","label","button"].includes(e.serverType)?e.serverType:a},isDefaultValue:G,getReferenceProperty:function(e){return Object(n.a)({},s.l.panelInclude,"view")[e]||"name"},checkTarget:function(e,t,a){var n=e.split("/");return a?n[a]===t:e===t},exploreTarget:Z,getViews:function(e,t){var a=e.find((function(e){return!0===e.computed})),n=e.find((function(e){return!0!==e.computed&&!0!==e.extension}));return{view:a||n,originalXML:n,extensionXML:e.find((function(e){return!0===e.extension&&e.xmlId==="studio-".concat(t)}))}},generateXMLToViewSchema:function(e){var t=e.view,a=e.fields,n=e.original,i=void 0!==n&&n,r=e.extensionXML,o=e.attrsList,l=JSON.parse(f.a.xml2json(t.xml,{compact:!1,fullTagEmptyElement:!1})).elements;return Y({view:{elements:l},fields:a,original:i,extensionXML:r,attrsList:o})},generateViewFromJson:Y,getChangeList:function(e,t){var a=[],n=e.widgets,i=Q(t),r=Object.values(n),o=Object.keys(n);return i.forEach((function(e){var t=e.elements,n=(void 0===t?[]:t)[0];if(n&&n.attributes&&"move"===n.name){var i=Z(n.attributes.source);if(i.self){var l=i.self?r.findIndex((function(e){return"".concat(e.type,"[@name='").concat(e.name,"']")===i.self})):r.findIndex((function(e){return"".concat(e.type,"[@name='").concat(e.name,"']")===i.parent}));o[l]&&a.push(o[l])}}})),a},getDefaultGridFormName:$,isPanelTab:N}},54:function(e,t,a){"use strict";a.d(t,"a",(function(){return g})),a.d(t,"c",(function(){return h}));var n=a(15),i=a(17),r=a(4),o=a(0),l=a.n(o),c=a(24),s=a.n(c),d=a(2),u=a(26),f=["className","attrs","children"],m=1,p=12,b=6,v=function(e,t){var a=e.widgetAttrs?JSON.parse(e.widgetAttrs):{};return a.colSpan?Number(a.colSpan):Number(t)||e.colSpan||b},g=function(e){var t=e.className,a=e.attrs,n=e.children,r=Object(i.a)(e,f);return l.a.createElement("div",Object.assign({className:s()(t,a.cols?"grid-span grid-".concat(a.cols):"")},r),n)};function h(){var e=l.a.useState((function(){return null})),t=Object(n.a)(e,2),i=t[0],r=t[1];return l.a.useEffect((function(){Promise.resolve().then(a.bind(null,82)).then((function(e){return r((function(){return e.default}))}))}),[]),i}t.b=function(e){var t,a,n=h(),i=Object(u.b)().state,o=i.widgets,c=i.customFieldWidgets,s=i.dragWidgetProps,f=i.highlightedOption,y="symbol"===typeof(null===s||void 0===s?void 0:s.id)&&["one-to-many","many-to-many"].includes(null===s||void 0===s||null===(t=s.attrs)||void 0===t?void 0:t.serverType)?void 0:JSON.parse((null===s||void 0===s||null===(a=s.attrs)||void 0===a?void 0:a.widgetAttrs)||"{}").colSpan,O=e.className,j=e.items,w=e.attrs,x=void 0===w?{}:w,k=e.panelId,S=e.design,T="customField"===e._type?c:o,C=JSON.parse(x.widgetAttrs||"{}"),E=C.sidebar,M=C.itemSpan,F=Number(x.cols||1),I=2*F+1,N=x.layout===d.k.stack,A=S?1:0,L=(100-(1===I?0:I/2+1)*A)/((I-1)/2),W=E&&!M?12:M,q=l.a.useMemo((function(){var e=0;return function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:p,a=arguments.length>2?arguments[2]:void 0,n=arguments.length>3?arguments[3]:void 0,i=arguments.length>4?arguments[4]:void 0,o=[],l=1===t||a,c=l?p:t,s=n||b,u=[],f=0,g=function(e){return Number(e)};if(!e.length){for(var h=c,y=[],O={id:0,separator:!0};h>0;){y.push(O);var j=l?c:h<s?h:s;y.push({id:0,dummy:!0,dummyPanel:!0,colSpan:Number(j)}),(h-=j)<=0&&y.push(O)}return[y]}for(var w=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.item,a=e.overflow,n=void 0!==a&&a;if(n)for(var r=c-(f-g(t.colSpan));r>0;)r>(i||s)?u.push({id:0,dummy:!0,colSpan:i||s}):u.push({id:0,dummy:!0,colSpan:r}),r-=i||s;o.push(u),u=[],f=0},x=function(e){return u.push(e)},k=0;k<e.length;k++){var S=Object.assign(e[k],l?{colSpan:p}:{colSpan:g(v(e[k],n))}),T=S.colSpan,C=void 0===T?m:T,E=k===e.length-1;if((f+=g(C))>c?(w({item:S,overflow:!0}),f=C,x(S)):f===c?(u.push(S),w({item:S})):u.push(S),E&&u.length){for(var M=u.reduce((function(e,t){var a=t.colSpan;return e+(void 0===a?m:a)}),0),F=c-M;F>0;)F<=(i||s)?u.push({id:0,dummy:!0,colSpan:F}):u.push({id:0,dummy:!0,colSpan:Number(i||s)}),F-=i||s;o.push(u)}}for(var I=[],N=0;N<o.length;N++){var A,L=o[N],W=L[0],q=W.widgetAttrs,V=W.type,B="panel"===V&&JSON.parse(q||"{}"),P=B.sidebar,_=![d.l.menubar,d.l.toolbar].includes(null===(A=L[0])||void 0===A?void 0:A.type),D=[],U=[],J=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{separator:!0};return e.push(Object(r.a)({id:0,colSpan:1},t))};J(D),_&&J(U,{relatedColSpan:v(L[0],n),separator:!0});for(var R=0;R<L.length;R++){var z=L[R],H=v(z,n);J(U,z),_&&J(U,{relatedColSpan:H,separator:!0})}if(L.length)for(var X=c;X>0;)J(D,{dummy:!0,isSidePanelDummy:JSON.parse(P||"false"),colSpan:Number(X<=(i||s)?X:i||s)}),J(D,{relatedColSpan:Number(s),separator:!0}),X-=i||s;_?I.push(D):I.push([]),I.push(U),N===o.length-1&&I.push(D)}return I}(j.map((function(e){return Object.assign({},T[e]||{},{id:e})})),F,N,W,y).map((function(t,a){var n=0;return t.map((function(t){var i=n;return n+=t.separator?0:Number(t.colSpan||1),Object(r.a)(Object(r.a)({},t),{},{rowIndex:a,columnIndex:i,cellIndice:e++})}))}))}),[j,T,F,N,W,y]),V=q.reduce((function(e,t){return e.concat(t)}),[]),B=l.a.useCallback((function(e,t){return!!e||(!(!t||(null===f||void 0===f?void 0:f.title)!==t)||void 0)}),[f]);return l.a.createElement(g,{attrs:x,className:O},l.a.createElement("table",{cellPadding:"0",cellSpacing:"0"},S&&l.a.createElement("colgroup",null,N?l.a.createElement("col",{width:"100%"}):new Array(I).fill(0).map((function(e,t){return l.a.createElement("col",{key:t,width:"".concat(t%2===1?L:A,"%")})}))),l.a.createElement("tbody",null,q.map((function(t,a){return l.a.createElement("tr",{className:a%2===0?"empty-row":"fill-row",key:a},t.map((function(t,i){var r=t.id,o=t.colSpan,c=t.cellIndice,s=t.columnIndex,d=t.separator,u=t.relatedColSpan,m=t.isSidePanelDummy,p=t.name,b=t.title;return l.a.createElement("td",{className:d?"separator":"",key:r||""+r+c,colSpan:o>1?2*o-1:o},n&&l.a.createElement(n,{className:(null===f||void 0===f?void 0:f.name)===p&&B(p,b)?"search-overlay":"",design:S,meta:{isSeparator:Boolean(d),colSpan:o,row:a,col:i,colIndex:s,grid:V,total:I,relatedColSpan:u},isSidePanelDummy:m,panelId:k,key:r||""+r+c,id:r,index:c,panelColumns:x.cols,_type:e._type,errorList:e.errorList,canRemove:e.canRemove,highlightedOption:f,isBase:e.isBase}))})))})))))}},62:function(e,t,a){"use strict";var n=a(17),i=a(0),r=a.n(i),o=a(24),l=a.n(o),c=a(54),s=a(2),d=a(5),u=["id","attrs","design","isTab"];t.a=r.a.memo((function(e){var t=e.id,a=e.attrs,i=e.design,o=e.isTab,f=void 0!==o&&o,m=Object(n.a)(e,u),p=m.errorList[t]||{};return r.a.createElement(r.a.Fragment,null,(a.title||[s.l.toolbar,s.l.menubar].includes(a.serverType))&&r.a.createElement("div",{className:l()("panel-header",{inline:f})},Object(d.q)(a.title||a.autoTitle),a.serverType===s.l.toolbar&&r.a.createElement("i",{className:"fa fa-wrench",title:"toolbar"}),a.serverType===s.l.menubar&&r.a.createElement("i",{className:"fa fa-bars",title:"menubar"})),p.items&&!f&&r.a.createElement("div",{className:l()("panel-children-error")},p.items),!f&&r.a.createElement(c.b,{design:i,className:"panel-body",items:a.items||[],attrs:a,panelId:t,_type:m._type,errorList:m.errorList,canRemove:m.canRemove}))}))},67:function(e,t,a){"use strict";a.d(t,"a",(function(){return s})),a.d(t,"b",(function(){return d})),a.d(t,"c",(function(){return f}));var n=a(4),i=a(9),r=a(88),o=a(2),l=a(5);function c(e,t,a,n){for(var i=n.widgets,r=!1,o=0;o<e.length;o++){var l=e[o];if(l.name===(i[a]&&i[a].name)&&(l[t.attributes.name]=t.attributes.value,r=!0),r)break;if(l.items&&l.items.length){var s=c(l.items,t,a,n);if(s){r=s;break}}}return r}function s(e,t){var a;!function(){var a=["widgetAttrs","items","current","elements","tz","targetModel","_type"];Object(i.a)(e).forEach((function(i,r){if("insert"===i.name){var o=i.id,s=e.findIndex((function(e){return"replace"===e.name&&e.id===o&&!e.target})),d=e.findIndex((function(e){return e.id===o&&"insert"===e.name}));-1!==s&&(e.splice(s,1),e.splice(d,1))}"attribute"===i.name&&function(){var r=i.id;if(i.attributes&&l.f.isDefaultValue(i.attributes.name,i.attributes.value)){var o=e.findIndex((function(e){return e.id===r&&"attribute"===e.name&&e.attributes.name===i.attributes.name}));e.splice(o,1,Object(n.a)(Object(n.a)({},e[o]),{},{attributes:Object(n.a)(Object(n.a)({},e[o].attributes),{},{value:i.attributes.value})}))}if(i.attributes&&a.includes(i.attributes.name)){var s=e.findIndex((function(e){return e.id===r&&"attribute"===e.name&&a.includes(e.attributes.name)}));e.splice(s,1)}else for(var d=!1,u=0;u<t.extensionMoves.length;u++){var f=t.extensionMoves[u];if("insert"===f.name)for(var m=f.elements,p=0;p<m.length;p++){var b=m[p];if(b.name===(t.widgets[r]&&t.widgets[r].name)){t.extensionMoves[u].elements[p][i.attributes.name]=i.attributes.value,d=!0;break}if(b.items&&b.items.length)c(b.items,i,r,t)&&(d=!0)}if(d){var v=e.findIndex((function(e){return e.id===r&&"attribute"===e.name}));e.splice(v,1);break}}}()}))}(),(a=t.extensionMoves).push.apply(a,Object(i.a)(e))}function d(e,t){return e.map((function(e){var t;if("insert"===e.name&&(t=e.elements.map((function(e){if(e&&e.items&&e.items.length){var t=Object(n.a)({},e);return t.elements=function e(t){return t.map((function(t){var a=[];return t.items&&(a=e(t.items)),Object(r.c)(Object(n.a)(Object(n.a)({},t),{},{elements:a}),[],null,o.i.BASE)}))}(e.items),t}return e})).filter((function(e){return e}))),e.target)return Object(r.b)(Object(n.a)({target:e.target,position:e.position,source:e.source,type:e.name,widgetAttrs:t},e.attributes))})).filter((function(e){return e}))}function u(e,t,a,n){for(var i=n.widgets,r=!1,o=0;o<e.length;o++){var l=e[o];if(l.name===i[a].name&&(l.items?l.items.push(t):l.items=[t],r=!0),r)break;if(l.items&&l.items.length){var c=u(l.items,t,a,n);if(c){r=c;break}}}return r}function f(e,t,a,n){for(var i=[],r=!1,o=e.widgets,l=0;l<e.extensionMoves.length;l++){var c=e.extensionMoves[l];if("insert"===c.name)for(var s=c.elements,d=0;d<s.length;d++){var f=s[d];if(f.name===o[n].name&&f.items&&0===f.items.length){e.extensionMoves[l].elements[d].items.push(t),r=!0;break}if(f.items&&f.items.length)u(f.items,t,n,e)&&(r=!0)}if(r)break}return r&&t.xPath&&i.push({name:"replace",target:t.xPath}),i}},68:function(e,t,a){"use strict";a.d(t,"a",(function(){return l})),a.d(t,"c",(function(){return c})),a.d(t,"b",(function(){return s}));var n=a(9),i=a(77),r=a(2),o=a(5);function l(e,t){var a=arguments.length>2&&void 0!==arguments[2]&&arguments[2],l={},c="field"===e.serverType?e.type:e.serverType||e.type;c=c&&c.toLowerCase().replace(/_/g,"-");var s=i.a.find((function(e){return e.type===c}));if("form"===c&&t===r.i.CUSTOM&&(s=i.a.find((function(e){return"modelForm"===e.type}))),!a&&t===r.i.BASE&&[r.l.panel,r.l.panelStack,r.l.tabs,r.l.menu,r.l.menubar,r.l.toolbar].includes(c)&&e.items&&0===e.items.length){var d=c===r.l.menu?Object(o.q)("Atleast one menu item required"):Object(o.q)("Atleast one children required");l.items=d}if(!s)return l;var u=JSON.parse(e.widgetAttrs||"{}"),f=Object.keys(s.value).reduce((function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1?arguments[1]:void 0;return[].concat(Object(n.a)(e),Object(n.a)(s.value[t]))}),[]);return f.forEach((function(t){var a=function(){l[t.name]="".concat(Object(o.q)(t.title||t.name)," ").concat(Object(o.q)("required"))};(t.requiredFor&&t.requiredFor.includes(c)&&!e[t.name]||t.required&&!e[t.name])&&a();var n=!1;if((null===t||void 0===t?void 0:t.requiredWhen)&&t.requiredWhen.every((function(t){return!(n="widgetAttrs"===(null===t||void 0===t?void 0:t.parentField)?"boolean"===t.type?JSON.parse(u[t.name]||"false"):u[t.name]:e[t.name])})),t.requiredWhen&&n&&!e[t.name]){if(e.isSelectionField)return a();if(["menuBuilderTitle","title"].includes(t.name))return a();if(["selectionText"].includes(t.name)&&e.updateSelection)return a()}t.regex&&(new RegExp(t.regex).test(e[t.name])||l[t.name]||(l[t.name]=Object(o.q)(t.regexErrorMessage)))})),l}function c(e,t){var a=e.widgets[t],n=e.errorList[t]||{};a&&(a.items&&a.items.length>0?n.items&&delete n.items:n.items=Object(o.q)("Atleast one children required"),Object.keys(n).length?e.errorList[t]=n:delete e.errorList[t])}function s(e,t){e.errorList[t]&&delete e.errorList[t]}},77:function(e,t,a){"use strict";a.d(t,"b",(function(){return q}));var n=a(4),i=a(103),r=a(1),o=a(10),l=a(2),c={overview:[Object(r.J)({existsCheck:!0}),r.hb,r.gb,r.l,r.db,r.t,r.Y],fieldOptions:[r.W,r.X,r.ob,r.K,r.H,r.E,Object(o.f)({name:"regex",dependModelType:l.i.CUSTOM}),r.jb],uiOptions:[r.S,r.P,Object(o.a)({name:"nameField",title:"Name column",dependModelType:l.i.CUSTOM}),r.u,r.nb,r.j,r.k],conditions:[r.M,r.Z,r.v,r.T,r.Q,r.z,r.ib],valueExpr:[r.mb],roles:[r.U],widgetAttributes:[r.g,r.ab,Object(o.a)({name:"multiline",parentField:"widgetAttrs",modelType:l.i.CUSTOM,dependModelType:l.i.CUSTOM})]},s={overview:[Object(r.J)({existsCheck:!0}),r.hb,r.gb,r.l,r.db,r.t,r.Y],fieldOptions:[r.W,r.X,r.ob,r.K,r.H,r.E,r.jb],uiOptions:[r.S,r.P,r.u,r.nb,r.j,r.k],conditions:[r.M,r.Z,r.v,r.T,r.Q,r.z,r.ib],valueExpr:[r.mb],roles:[r.U],widgetAttributes:[r.g,r.ab]},d={overview:[Object(r.J)({existsCheck:!0}),r.hb,r.gb,r.l,r.db,r.t,r.Y],fieldOptions:[r.ob,r.K,r.H,r.E,Object(o.b)({name:"precision",default:6}),Object(o.b)({name:"scale",default:2}),r.jb],uiOptions:[r.S,r.P,r.u,r.nb,r.j,r.k],conditions:[r.M,r.Z,r.v,r.T,r.Q,r.z,r.ib],valueExpr:[r.mb],roles:[r.U],widgetAttributes:[r.g,r.ab]},u={overview:[Object(r.J)({existsCheck:!0}),r.hb,r.gb,r.l,r.db,r.t,r.Y],fieldOptions:[r.ob,r.K,r.jb],uiOptions:[r.S,r.P,r.u,r.nb,r.j,r.k],conditions:[r.M,r.Z,r.v,r.T,r.Q,r.z,r.ib],valueExpr:[r.mb],roles:[r.U],widgetAttributes:[r.g,r.ab]},f={overview:[Object(r.J)({existsCheck:!0}),r.hb,r.gb,r.l,r.db,r.t,r.Y],fieldOptions:[r.ob,r.K,r.jb],uiOptions:[r.S,r.P,r.u,r.nb,r.j,r.k],conditions:[r.M,r.Z,r.v,r.T,r.Q,r.z,r.ib],valueExpr:[r.mb],roles:[r.U],widgetAttributes:[r.g,r.ab]},m={overview:[Object(r.J)({existsCheck:!0}),r.hb,r.gb,r.db],uiOptions:[r.P,r.u,r.bb,r.d,r.h,r.j,r.k,r.b],conditions:[r.M,r.Z,r.v,r.Q],roles:[r.U],widgetAttributes:[r.g,r.C,r.ab]},p={overview:[Object(r.J)({existsCheck:!0}),r.hb,r.db],uiOptions:[r.P,r.u,r.bb,Object(o.a)({name:"canCollapse",parentField:"widgetAttrs",modelType:l.i.CUSTOM,dependModelType:l.i.CUSTOM}),Object(o.f)({name:"collapseIf",parentField:"widgetAttrs",modelType:l.i.CUSTOM,dependModelType:l.i.CUSTOM}),r.j,r.k],conditions:[r.Z,r.v,r.Q],roles:[r.U],widgetAttributes:[r.g]},b={overview:[Object(r.J)({existsCheck:!0}),r.hb,r.gb,r.db],uiOptions:[r.P,r.u,r.j,r.k],conditions:[r.Z,r.v,r.Q],roles:[r.U],widgetAttributes:[r.ab]},v={overview:[Object(r.J)({existsCheck:!0}),r.hb,r.gb,r.db,r.t,r.Y,r.O],fieldOptions:[r.ob,Object(o.d)({name:"onClick",title:"On click",required:!0,ref:"com.axelor.meta.db.MetaAction",requiredFor:["button"],dependModelType:l.i.CUSTOM,multiple:!0,commaSeparated:!0,canAddNew:!0})],uiOptions:[r.P,r.u,r.nb,r.j,r.k],conditions:[r.M,r.Z,r.v,r.T,r.Q,r.z,r.ib],roles:[r.U],widgetAttributes:[r.g,r.ab,Object(o.e)({name:"icon",title:"Icon",data:i.a,helper:"https://fontawesome.com/cheatsheet",parentField:"widgetAttrs",modelType:l.i.CUSTOM})]},g={overview:[Object(r.J)({existsCheck:!0}),r.hb,r.gb,r.l,r.db,r.t,r.Y],uiOptions:[r.u,r.j,r.k],conditions:[r.M,r.Z,r.v,r.T,r.Q,r.z,r.ib],roles:[r.U],widgetAttributes:[r.g]},h={overview:[Object(r.J)({existsCheck:!0}),r.hb,r.db],fieldOptions:[],uiOptions:[r.u,r.j,r.k],conditions:[r.M,r.Z,r.v,r.ib],roles:[r.U],widgetAttributes:[r.g]},y={overview:[Object(r.J)({existsCheck:!0}),r.hb,r.gb,r.db],fieldOptions:[r.ob],uiOptions:[r.S,r.u,r.j,r.k],conditions:[r.M,r.Z,r.v,r.T,r.Q,r.ib],valueExpr:[r.mb],roles:[r.U],widgetAttributes:[r.g,r.ab]},O={overview:[Object(r.J)({existsCheck:!0}),r.hb,r.gb,r.db],fieldOptions:[r.ob],uiOptions:[r.S,r.u,r.P,r.j,r.k],conditions:[r.Z,r.v,r.T,r.Q,r.ib],valueExpr:[r.mb],roles:[r.U],widgetAttributes:[r.g,r.ab]},j={overview:[Object(r.J)({existsCheck:!0}),r.hb,r.gb,r.l,r.db,r.t,r.Y],fieldOptions:[r.ob,r.K,r.D,r.m,r.fb,r.r,r.q,r.jb],uiOptions:[r.S,r.P,r.u,r.nb,r.j,r.k],conditions:[r.M,r.Z,r.v,r.T,r.Q,r.z,r.ib],valueExpr:[r.mb],roles:[r.U],widgetAttributes:[r.g,r.ab]},w={overview:[Object(r.J)({existsCheck:!0}),r.hb,r.gb,r.db,r.t,r.Y],fieldOptions:[r.ob,r.K,r.D,r.m,r.fb,r.r,r.q,r.kb,r.lb,r.jb],uiOptions:[r.S,r.P,r.u,r.nb,r.j,r.k],conditions:[r.M,r.Z,r.v,r.T,r.Q,r.z,r.ib],valueExpr:[r.mb],roles:[r.U],widgetAttributes:[r.g,r.ab]},x={overview:[Object(r.J)({existsCheck:!0}),r.hb,r.gb,r.db,r.t,r.Y],fieldOptions:[r.ob,r.K,r.D,r.m,r.eb,r.jb],uiOptions:[r.S,r.P,r.u,r.nb,r.j,r.k],conditions:[r.M,r.Z,r.v,r.T,r.Q,r.z,r.ib],valueExpr:[r.mb],roles:[r.U],widgetAttributes:[r.g,r.ab]},k={overview:[Object(r.J)({existsCheck:!0}),Object(n.a)(Object(n.a)({},r.gb),{},{required:!0}),r.db,Object(o.e)({name:"formWidth",title:"Form width",data:["large"]}),Object(o.f)({name:"orderBy",title:"Order by"}),r.B,r.F,r.G],actions:[Object(o.d)({title:"On new",name:"onNew",ref:"com.axelor.meta.db.MetaAction",dependModelType:l.i.CUSTOM,multiple:!0,commaSeparated:!0,canAddNew:!0}),Object(o.d)({title:"On save",name:"onSave",ref:"com.axelor.meta.db.MetaAction",dependModelType:l.i.CUSTOM,multiple:!0,commaSeparated:!0,canAddNew:!0})]},S={overview:[Object(r.J)(),r.hb,r.gb,r.db],uiOptions:[r.u,r.nb,r.j,r.k],conditions:[r.Z,r.v,r.Q,r.z,r.ib],widgetAttributes:[r.g,r.ab]},T={overview:[Object(r.J)(),r.n]},C={overview:[Object(r.J)({existsCheck:!0}),r.hb,Object(n.a)(Object(n.a)({},r.gb),{},{readOnly:!0,translationView:!1})]},E={overview:[Object(r.J)({existsCheck:!0}),r.hb,r.gb,r.I,r.o]},M={overview:[Object(r.J)({existsCheck:!0}),r.hb,r.a,r.gb,r.f,r.x],uiOptions:[r.P,r.u,r.s,r.k,r.R],conditions:[r.Z,r.v,r.Q],widgetAttributes:[r.g,r.ab]},F={overview:[Object(r.J)({existsCheck:!0}),r.hb,r.a],widgetAttributes:[r.ab]},I={overview:[Object(r.J)({existsCheck:!0}),r.hb],conditions:[r.w,r.Z,r.v,r.x]},N={overview:[Object(r.J)({existsCheck:!0}),r.hb],widgetAttributes:[r.ab],conditions:[r.w,r.x,r.z]},A={overview:[Object(r.J)({existsCheck:!0}),r.hb,r.gb,r.p,r.L,r.K],uiOptions:[r.q,r.r,r.s,r.o,r.P,r.u,r.k],conditions:[r.Z,r.v,r.Q,r.ib,r.e,r.N],widgetAttributes:[r.g,r.ab]},L={overview:[r.hb,r.A,r.y,r.x],widgetAttributes:[r.ab]},W={overview:[Object(r.J)({existsCheck:!0}),r.w,r.i,r.c,r.cb,r.k]},q=[{type:"form",value:C},{type:"grid",value:E},{type:"modelForm",value:k},{type:"string",value:c},{type:"byte[]",value:c},{type:"integer",value:s},{type:"number",value:s},{type:"decimal",value:d},{type:"bigdecimal",value:d},{type:"boolean",value:u},{type:"datetime",value:f},{type:"localdatetime",value:f},{type:"zoneddatetime",value:f},{type:"date",value:f},{type:"localdate",value:f},{type:"time",value:f},{type:"panel",value:m,dependModelType:l.i.BASE},{type:"panel-stack",value:p},{type:"panel-tab",value:b},{type:"button",value:v},{type:"separator",value:g},{type:"spacer",value:h},{type:"label",value:y},{type:"many-to-one",value:j},{type:"many-to-many",value:w},{type:"one-to-many",value:w},{type:"json-many-to-one",value:x},{type:"json-many-to-many",value:x},{type:"json-one-to-many",value:x},{type:"include",value:k},{type:"panel-tabs",value:b,showInCustomField:!1},{type:"panel-dashlet",value:M},{type:"panel-related",value:A},{type:"panel-include",value:L},{type:"text",value:S},{type:"long",value:d},{type:"panel-dashlet",value:S},{type:"dashlet",value:S},{type:"static",value:S},{type:"one-to-one",value:j},{type:"binary",value:S},{type:"field",value:S},{type:"dummy",value:T},{type:"viewer",value:O},{type:"editor",value:y},{type:"menu",value:N},{type:"item",value:F},{type:"divider",value:I},{type:"hilite",value:W}];t.a=q},82:function(e,t,a){"use strict";a.r(t);var n=a(15),i=a(17),r=a(9),o=a(4),l=a(0),c=a.n(l),s=a(24),d=a.n(s),u=a(181),f=a(327),m=a(328),p=a(26),b=a(2),v=a(85),g=a(62),h=a(99),y=a(84),O=a(54),j=a(5),w=["id","attrs","design","isTab"];var x=c.a.memo((function(e){var t=e.id,a=e.attrs,r=e.design,o=e.isTab,l=void 0===o||o,s=Object(i.a)(e,w),u=s.errorList[t]||{},f=c.a.useState(!1),m=Object(n.a)(f,2),b=m[0],v=m[1],g=Object(p.b)().state,h=c.a.useCallback((function(e){e.stopPropagation(),v((function(e){return!e}))}),[]);c.a.useEffect((function(){var e=g.highlightedOption;["menu","item"].includes(null===e||void 0===e?void 0:e.type)&&v(!0)}),[g]);var y=b?"down":"up";return c.a.createElement(c.a.Fragment,null,c.a.createElement("div",{className:d()("menu-header",{inline:l})},c.a.createElement("div",{className:"menu-toggle-button",onClick:h},c.a.createElement("i",{className:"fa fa-chevron-".concat(y)})),c.a.createElement("span",null,Object(j.q)(a.title||a.autoTitle)),c.a.createElement("div",{className:"menu-toggle-button",onClick:h},c.a.createElement("i",{className:"fa fa-chevron-".concat(y)}))),u.items&&!l&&c.a.createElement("div",{className:d()("panel-children-error")},u.items),b&&c.a.createElement(O.b,{design:r,className:"panel-body",items:a.items||[],attrs:a,panelId:t,_type:s._type,errorList:s.errorList,canRemove:s.canRemove}))})),k={field:{component:v.a,props:{className:"field-container"}},dump_field:{component:v.a,props:{className:"field-container dump"}},panel:{component:g.a,props:{className:"panel"}},menubar:{component:g.a,props:{className:"panel menubar"}},menu:{component:x,props:{className:"panel menu"}},toolbar:{component:g.a,props:{className:"panel toolbar"}},"panel-stack":{component:g.a,props:{className:"panel"}},"panel-include":{component:g.a,props:{className:"panel"}},form:{component:y.a,props:{className:"form-layout"}},customForm:{component:y.a,props:{className:"form-layout"}},"panel-tabs":{component:h.a,props:{className:"panel tabs-panel"}}},S=a(300),T=a(64),C=a(325),E=a(301),M=a(299),F=Object(M.a)((function(){return{text:{textAlign:"center",fontSize:14},dialogContainer:{display:"flex",alignItems:"center",justifyContent:"center",flexDirection:"column"},button:{width:"min-content",fontWeight:600,color:"#fff",borderRadius:25,backgroundColor:"#0275d8",padding:0,overflow:"hidden",textOverflow:"ellipsis",textTransform:"capitalize","&:hover":{backgroundColor:"#0275d8"}},paper:{borderRadius:5,padding:15,boxShadow:"rgb(0 0 0 / 16%) 0px 3px 6px, rgb(0 0 0 / 23%) 0px 3px 6px"}}}));function I(e){var t=e.anchorEl,a=e.handleClose,n=e.handleYes,i=F(),r=Boolean(t),o=r?"simple-popover":void 0;return c.a.createElement(S.a,{id:o,open:r,anchorEl:t,onClose:a,classes:{paper:i.paper},anchorOrigin:{vertical:"bottom",horizontal:"right"},transformOrigin:{vertical:"top",horizontal:"right"}},c.a.createElement(C.a,{className:i.dialogContainer},c.a.createElement(T.a,{className:i.text},Object(j.q)("Sure want to delete?")),c.a.createElement(C.a,null,c.a.createElement(E.a,{size:"small",className:i.button,style:{marginRight:4},onClick:n},Object(j.q)("Yes")),c.a.createElement(E.a,{size:"small",className:i.button,onClick:a},Object(j.q)("No")))))}a.d(t,"WidgetComponent",(function(){return _}));var N=["id","isDragging","connectDragSource","connectDropTarget","highlighted","hovered","tabId","className","component","attrs","state","update","onWidgetChange","errorList"],A=Symbol(),L={canDrag:function(e){var t=e.state,a="customField"===e._type;if(t.modelType!==b.i.BASE||a||e.isPalleteField)return!(e.id===b.g.dumpField||!1===e.attrs.draggable||"spacer"===e.attrs.type||"spacer"===e.attrs.serverType||e.attrs.type===b.l.form)},beginDrag:function(e){var t=Object(o.a)({},e),a="panel"===t.attrs.serverType,n=["one-to-many","many-to-many"].includes(t.attrs.serverType);return e.state.modelType===b.i.CUSTOM||"customField"===e._type?t.attrs=Object(o.a)(Object(o.a)({},t.attrs),{},{model:"com.axelor.meta.db.MetaJsonRecord",modelField:"attrs",widgetAttrs:JSON.stringify(Object(o.a)(Object(o.a)({},JSON.parse(t.attrs.widgetAttrs||"{}")),{},{colSpan:JSON.parse(t.attrs.widgetAttrs||"{}").colSpan||(n?6:void 0),showTitle:!a||"false",sidebar:JSON.parse(t.attrs.widgetAttrs||"{}").sidebar||!a&&void 0}))}):e.state.modelType===b.i.BASE&&(t.attrs.isModelField&&(t.attrs=Object(o.a)(Object(o.a)(Object(o.a)({},t.attrs),"field"!==t.attrs.serverType&&{type:t.attrs.serverType}),{},{serverType:"field"})),t.attrs=Object(o.a)(Object(o.a)({},t.attrs),{},{widgetAttrs:JSON.stringify(Object(o.a)(Object(o.a)({},JSON.parse(t.attrs.widgetAttrs||"{}")),{},{showTitle:!a||"false"}))})),e.onDrag(e.id,{props:t}),Object(o.a)({},e)},endDrag:function(e,t){e.onDrag(null,{isDrop:t.didDrop(),props:{},newProps:t.getItem()})},isDragging:function(e,t){return e.id===t.getItem().id}},W={hover:function(e,t){var a=t.getItem(),n=a.index,i=a.panelId,l=a.id,c=a.attrs,s=e.index,d=e.panelId,u=e.id,f=e.attrs,m=e.state,p=e.meta,v=e.setHoverAttr,g=e.isTab,h=e.panelId,y=[b.l.panel,b.l.panelDashlet,b.l.panelRelated,b.l.panelInclude],O="customField"===e._type,j="customField"===e._type?m.customFieldWidgets:m.widgets,w=e.panelId?j[e.panelId]:null;if("customForm"!==c.type&&p){if(c.type===b.l.tabs){if(0===p.row&&!c.isNew)return;if(p.grid){var x=Math.max.apply(Math,Object(r.a)(p.grid.map((function(e){return e.rowIndex}))));if(p.row<x)return}}if(c.type===b.l.panel){var k=p.grid,S=p.row,T=k&&k.find((function(e){return e.type===b.l.tabs}));if(T&&T.rowIndex<S)return}if(m.modelType!==b.i.BASE||O){if([b.l.menubar,b.l.toolbar].includes(c.type)){var C=Object.values(m.widgets||{}).find((function(e){return[b.l.menubar,b.l.toolbar].includes(e.type)}))?2:0;if(d)return;if(!p)return;if(p.row>C||1!==p.col)return}if((m.modelType!==b.i.CUSTOM&&!O||![b.l.menubar,b.l.toolbar].includes(c.serverType))&&([b.l.menuItem,b.l.menu,b.l.divider].includes(c.serverType)||!w||w.type!==b.l.menu)&&(![b.l.menuItem,b.l.divider].includes(c.serverType)||w&&w.type===b.l.menu)&&(![b.l.menu].includes(c.serverType)||w&&[b.l.menu,b.l.menubar].includes(w.type))&&(!w||w.type!==b.l.menubar||c.type===b.l.menu)&&(!w||w.type!==b.l.toolbar||c.type===b.e.button)&&(w||[].concat(y,[b.l.tabs,b.l.panelStack,b.l.menubar,b.l.toolbar]).includes(c.type))&&(w&&u&&0!==u&&![].concat(y,[b.l.tabs]).includes(c.type)&&g&&"active-tab"!==e.className&&e.update((function(t){t.editWidget=l,t.editWidgetType=m.modelType===b.i.BASE&&"customField",e.onWidgetChange({id:h,props:{current:u,_type:m.modelType===b.i.BASE&&"customField"},skipGenerateHistory:!0},t)})),(!w||w.type!==b.l.panelStack||y.includes(c.type))&&(!w||w.type!==b.l.tabs||y.includes(c.type)))){if(m.modelType===b.i.CUSTOM||"customField"===e._type){if([b.l.panelDashlet,b.l.panelInclude,b.l.panelRelated,b.l.panelStack].includes(c.type))return;var E="customField"===e._type?m.customFieldWidgets:m.widgets,M="customField"===e._type?m.customFieldItems:m.items;if(-1!==Object.keys(E).findIndex((function(e){return E[e].type===b.l.tabs}))&&c.type===b.l.tabs&&c.isNew)return;if([b.l.panel,b.l.tabs].includes(c.type)&&e.panelId&&!M.includes(e.panelId))return;if(w&&c.type===b.l.panel&&w.type!==b.l.tabs)return;if(w&&c.type===b.l.tabs&&w.type===b.l.panel)return}else if(e.panelId){var F=j[e.panelId];if(F&&[b.l.tabs,b.l.panelStack].includes(c.type))return;if([b.l.panelDashlet,b.l.panelRelated,b.l.panelInclude].includes(F.type))return}if((!1!==c.isCoreField||"customField"!==e._type)&&!(u===l&&i===d||(c.items||[]).indexOf(u)>-1||!t.isOver({shallow:!0})||c.type===b.l.field&&f.type===b.l.form||c.type===b.l.field&&void 0!==e.tabId||e.state.hoverWidget&&e.state.hoverWidget.id===u&&e.state.hoverWidget.index===s&&e.state.hoverWidget.panelId===d)){if(l===e.state.dragWidget)try{var I,N,A,L,W,q,V=(null===(I=e.meta.grid)||void 0===I||null===(N=I.find((function(e){return e.id===l})))||void 0===N?void 0:N.cellIndice)||n;if(l&&!c.isNew&&i===d&&(V+1===s||V-1===s))return void(e.state.hoverWidget&&e.onHover(null));if(p.isSeparator&&((null===(A=p.grid)||void 0===A||null===(L=A[s+1])||void 0===L?void 0:L.type)===b.l.tabs||s&&(null===(W=p.grid)||void 0===W||null===(q=W[s-1])||void 0===q?void 0:q.type)===b.l.tabs))return void(e.state.hoverWidget&&e.onHover(null));e.onMove({source:{panelId:i,index:V,id:l,attrs:c},destination:{panelId:d,index:s,id:u,attrs:f,_type:e._type}},!0,e._type).isMoved&&e.onHover?e.onHover({meta:e.meta||{},id:u,index:s,panelId:d,position:!e.panelColumns||"1"!=="".concat(e.panelColumns)&&"".concat(e.panelColumns)!=="".concat(c.colSpan)||void 0!==e.tabId||"spacer"===(null===f||void 0===f?void 0:f.type)||"spacer"===(null===f||void 0===f?void 0:f.serverType)?"default":"top",attrs:f,_type:e._type}):e.state.hoverWidget&&e.onHover(null)}catch(D){}if(w&&w.widgetAttrs){var B=JSON.parse(w.widgetAttrs||"{}"),P=JSON.parse(c.widgetAttrs||"{}");if(B.itemSpan&&!P.colSpan&&["one-to-many","many-to-many"].includes(c.serverType)){var _=JSON.parse(c.widgetAttrs||"{}");v({widgetAttrs:JSON.stringify(Object(o.a)(Object(o.a)({},_),{},{colSpan:B.itemSpan}))})}}}}}}},canDrop:function(e,t){var a;return"form"!==(null===e||void 0===e||null===(a=e.attrs)||void 0===a?void 0:a.type)}},q=function(e){return JSON.parse(e||"{}")};function V(e){var t=e.id,a=e.isDragging,r=e.connectDragSource,o=e.connectDropTarget,l=e.highlighted,s=e.hovered,u=e.tabId,f=e.className,m=e.component,p=e.attrs,v=void 0===p?{}:p,g=e.state,h=e.update,y=e.onWidgetChange,O=e.errorList,w=void 0===O?{}:O,x=Object(i.a)(e,N),S=g.dragWidget,T=g.dragWidgetProps,C=g.hoverWidget,E=g.mainItems,M=g.sideItems,F=(T||{}).attrs||{},A=F.widgetAttrs,L=("panel"===F.type&&JSON.parse(A||"{}")).sidebar,W=c.a.useRef(null),V=c.a.useState(null),B=Object(n.a)(V,2),P=B[0],_=B[1],D=M.length&&1===E.length&&E[0]===t,U="customField"===x._type?g.customFieldWidgets:g.widgets,J=function(){_(null)};c.a.useEffect((function(){t&&e.highlightedOption&&function(){var a=W.current;a&&e.highlightedOption.id===t&&a.scrollIntoView({behavior:"smooth",block:"center"})}()}),[e.highlightedOption,t]);c.a.useEffect((function(){h((function(e){e.hoverWidget&&(e.hoverWidget.visible=s)}))}),[h,s,t,S,v]);var R=k[v.type]||k.field;x.isTab&&!k[v.type]&&(R=k.panel);var z=R,H=z.component,X=z.props,G=void 0===X?{}:X;m&&(H=m);var Z=!0;Object.values(b.g.createWidgets).indexOf(t)>-1&&(Z=!1,o=function(e){return e});var Y=Z&&g.editWidget===t,Q=void 0!==u,K=!!Q&&!x.isTab,$=Z&&Number(t)>0&&!K&&x.design&&!1!==x.canRemove;if((K||t&&t!==b.g.form&&"symbol"!==typeof t&&"spacer"!==v.serverType&&"spacer"!==v.type&&!x.isTab)&&(o=function(e){return e}),!1===v.isExist||!x.design&&b.g.dumpField)return null;var ee=x.isTab||"true"==="".concat(JSON.parse(v.widgetAttrs||"{}").tab);return c.a.createElement(c.a.Fragment,null,r(o(c.a.createElement("div",Object.assign({ref:W},G,{className:d()(f,"widget",G.className,{"dummy-widget":v.isDummy,"spacer-widget":"spacer"===v.type||"spacer"===v.serverType,edit:Y,highlighted:l,hovered:s,active:Z&&a,"form-field":Z,"panel-field":"panel"===v.type,"non-title-panel":"panel"===v.type&&!ee&&!v.title,"title-panel":"panel"===v.type&&!ee&&v.title,"error-field":Boolean(w[t]),"pallete-field":x.isPalleteField}),_type:x._type,onClick:function(e){Z&&x.onSelect&&(e.stopPropagation(),"panel-tabs"!==(U&&U[t]).type&&t!==b.g.dumpField&&x.onSelect({id:t,type:x._type}));Q&&(e.stopPropagation(),t!==b.g.dumpField&&U[u]&&y({id:u,props:{current:t,_type:x._type},skipGenerateHistory:!0}))}}),!K&&!x.isBase&&g.hoverWidget&&"symbol"!==typeof t&&Number(t)>=0&&g.hoverWidget.index===x.index&&!1!==g.hoverWidget.visible&&g.hoverWidget.panelId===x.panelId&&JSON.parse(L||"false")===JSON.parse(x.isSidePanelDummy||"false")&&c.a.createElement("div",{className:d()("hover-liner",{"dummy-widget":v.isDummy||0===t},g.hoverWidget.position,{"no-fit":!function(){var e,t,a,n,i,r,o;if("spacer"===(null===C||void 0===C||null===(e=C.attrs)||void 0===e?void 0:e.serverType)||"spacer"===(null===C||void 0===C||null===(t=C.attrs)||void 0===t?void 0:t.type)||(null===C||void 0===C||null===(a=C.meta)||void 0===a?void 0:a.isSeparator))return!0;var l="symbol"===typeof(null===T||void 0===T?void 0:T.id)&&["one-to-many","many-to-many"].includes(null===T||void 0===T||null===(n=T.attrs)||void 0===n?void 0:n.serverType)?void 0:q(null===T||void 0===T||null===(i=T.attrs)||void 0===i?void 0:i.widgetAttrs).colSpan,c=q(null===(r=(U||{})[null===C||void 0===C?void 0:C.panelId])||void 0===r?void 0:r.widgetAttrs).itemSpan,s=l||c||6;return!((null===C||void 0===C||null===(o=C.meta)||void 0===o?void 0:o.colSpan)<s)}()})}),H&&c.a.createElement(H,Object.assign({id:t,isDragging:g.dragWidget===t,attrs:v,_type:x._type,errorList:w,canRemove:x.canRemove,draggable:v.type!==b.l.menubar},x)),$&&!g.dragWidget&&c.a.createElement("span",{onClick:function(e){_(e.currentTarget)},className:"widget-remove",title:Object(j.q)("Remove Widget")},c.a.createElement("i",{className:"fa fa-remove"})),P&&c.a.createElement(I,{anchorEl:P,handleClose:J,handleYes:function(){x.onRemove&&(x.onRemove(x.panelId,x.index,t,x._type,D),J())}})))))}var B=function(e){return c.a.createElement(V,Object.assign({},e,{connectDropTarget:function(e){return e},connectDragSource:function(e){return e}}))},P=Object(u.a)(Object(f.a)(A,W,(function(e,t){return{highlighted:!1,hovered:t.isOver(),connectDropTarget:e.dropTarget()}})),Object(m.a)(A,L,(function(e,t){return{connectDragSource:e.dragSource(),isDragging:t.isDragging()}})))(V),_=function(e){var t=Object(p.b)(),a=t.state,n="customField"===e._type?a.customFieldWidgets:a.widgets,i=n&&n[e.id]?n[e.id]:e.attrs||{},r=Object(o.a)(Object(o.a)({},t),{},{attrs:i}),l=i.type!==b.l.menubar;return e.design||l?c.a.createElement(P,Object.assign({},r,e)):c.a.createElement(B,Object.assign({},r,e))};t.default=c.a.memo(_)},84:function(e,t,a){"use strict";var n=a(17),i=a(0),r=a.n(i),o=a(54),l=a(2),c=a(26),s=["attrs","items","design","widgets"],d=["items","colSpan"];t.a=function(e){e.attrs;var t=e.items,a=void 0===t?[]:t,i=e.design,u=e.widgets,f=Object(n.a)(e,s),m=Object(c.b)().update,p=r.a.useMemo((function(){var e=[],t=[];return a.forEach((function(a){var n,i,r=(null===(n=u[a])||void 0===n?void 0:n.sidebar)||(null===(i=JSON.parse(u[a].widgetAttrs||"{}"))||void 0===i?void 0:i.sidebar),o=JSON.parse(r||!1);u[a]&&o?e.push(a):u[a]&&!o&&t.push(a)})),{sideItems:e,mainItems:t}}),[a,u]),b=r.a.useMemo((function(){var e=p.sideItems,t=p.mainItems;return e.length>0?{items:[{layout:l.k.grid,items:t,colSpan:9},{layout:l.k.grid,items:e,colSpan:3}]}:{items:[{layout:l.k.grid,items:t,colSpan:12}]}}),[p]);return r.a.useEffect((function(){var e=p.mainItems,t=p.sideItems;m((function(a){a.mainItems=e,a.sideItems=t}))}),[p,m]),r.a.createElement("div",{className:"flex-container",style:{gap:12}},b.items.map((function(e,t){var a=e.items,l=e.colSpan,c=Object(n.a)(e,d);return r.a.createElement("div",{className:"flex-item span-".concat(l),key:t},r.a.createElement(o.b,{key:t,design:i,className:"form-body",items:a,attrs:c,_type:f._type,widgets:u,errorList:f.errorList,canRemove:f.canRemove,isBase:f.isBase}))})))}},85:function(e,t,a){"use strict";var n=a(17),i=a(0),r=a.n(i),o=a(24),l=a.n(o),c=a(2),s=a(11),d=a.n(s),u=a(4),f=a(9),m=a(22),p=a(15),b=a(28),v=a(23),g=a(5),h=new b.a({model:"com.axelor.meta.db.MetaView"}),y=["panel","label","spacer","button"],O=function(e){return!y.includes(e.type)&&e.visibleInGrid&&!e.hidden};var j=function(e){var t=e.attrs,a=e.id,n=t||{},o=n.gridView,l=n.targetModel,c=n.title,s=n.autoTitle,b=n.action,y=n.targetJsonModel,j=Object(i.useState)([]),w=Object(p.a)(j,2),x=w[0],k=w[1],S=Object(i.useState)(null),T=Object(p.a)(S,2),C=T[0],E=T[1];return Object(i.useEffect)((function(){function e(){return(e=Object(m.a)(d.a.mark((function e(){var t,a,n,i,r,c;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=o,!b){e.next=8;break}return a={action:b,model:"com.axelor.meta.db.MetaAction",data:{context:{_id:null}}},e.next=6,h.action(a);case 6:(n=e.sent).data&&n.data[0]&&n.data[0].view&&n.data[0].view.views&&(i=n.data[0].view.views.find((function(e){return"grid"===e.type})))&&(t=i.name);case 8:if(!y){e.next=14;break}if(y.name||!y.id){e.next=13;break}return e.next=12,Object(v.e)(y.id);case 12:r=e.sent;case 13:t=Object(g.i)(r||y,!1,!0);case 14:c={model:l,data:{type:"grid",name:t}},t?h.view(c).then((function(e){if(e.data&&e.data.view){var t=e.data.view,a=t.items,n=void 0===a?[]:a,i=t.title;if(E(i),y){var r=[];return n.forEach((function(e){var t=e.jsonFields;(void 0===t?[]:t).forEach((function(e){O(e)&&r.push(e)}))})),void k((function(){return Object(f.a)(r||[])}))}var o=e.data,l=o.fields,c=void 0===l?[]:l,s=o.jsonAttrs,d=void 0===s?[]:s,m={};c.forEach((function(e){m[e.name]=e.title}));var p=n.map((function(e){return Object(u.a)(Object(u.a)({},e),{},{title:m[e.name]})}));d&&d.length>0&&d.forEach((function(e){O(e)&&p.push(e)})),k(p)}})):k([]);case 16:case"end":return e.stop()}}),e)})))).apply(this,arguments)}!function(){e.apply(this,arguments)}()}),[o,l,y,a,b]),r.a.createElement("div",null,r.a.createElement("div",{className:"one-to-many-header"},r.a.createElement("span",null,Object(g.q)(c||C||s))),r.a.createElement("table",null,r.a.createElement("tbody",{className:"one-to-many-row"},Object(f.a)(Array(3)).map((function(e,t){return r.a.createElement("tr",{style:{display:"flex"},key:"row_".concat(t)},x.map((function(e,a){return r.a.createElement("td",{className:"one-to-many-col one-to-many-col-border",key:"td_".concat(a),style:{borderBottom:0===t?"1px solid #ddd":""}},0===t&&e?Object(g.q)(e.title||e.autoTitle):"")})))})))))},w=["inputProps"],x=["title"],k=["title"],S=function(e){return r.a.createElement("input",Object.assign({type:"text",autoComplete:"off"},e,{className:"text-input"}))},T=function(e){return r.a.createElement("textarea",Object.assign({rows:6},e))},C=function(e){return r.a.createElement("div",{className:"spacer"})},E=function(e){return r.a.createElement("div",{className:"spacer"},r.a.createElement("hr",{className:"separator-field"}))},M=function(e){var t=e.inputProps,a=Object(n.a)(e,w);return r.a.createElement("div",{className:"boolean-wrapper"},r.a.createElement("input",Object.assign({},t,{type:"checkbox"})),r.a.createElement("span",{className:"boolean-text",title:Object(g.q)(a.title||a.name)},Object(g.q)(a.title||a.name)))},F=function(e){var t=e.title,a=Object(n.a)(e,x);return r.a.createElement("div",{className:"button-container"},r.a.createElement("button",Object.assign({},a,{className:"button-view",title:Object(g.q)(t)}),Object(g.q)(t)))},I=function(e){var t=e.title;Object(n.a)(e,k);return r.a.createElement("div",{className:"menu-item-container"},Object(g.q)(t))},N=function(e){var t=e.color,a=e.background,n=e.strong;return r.a.createElement("div",{className:l()("hilite hilite hilite-background-".concat(a," hilite-text-").concat(t),{"hilite-strong":n})},"hilite")};t.a=function(e){var t=e.id,a=e.attrs;if(t===c.g.dumpField)return r.a.createElement("div",{className:"dump-field"});var n,i=a.name,o=a.title,l=a.serverType,s=a.multiline,d=a.type,u=a.autoTitle,f=a.widget,m=(n=a,["name","title","defaultValue","placeholder","readOnly","checked","disabled","rows","required"].reduce((function(e,t){return void 0!==n[t]&&(e[t]=n[t]),"required"===t&&(e[t]="true"===n[t]),e}),{})),p=l&&"field"!==l?l.toLowerCase():d,b=function(){return r.a.createElement(r.a.Fragment,null,r.a.createElement("label",{className:"widget label",title:Object(g.q)(o||a.autoTitle||i)},Object(g.q)(o||a.autoTitle||i)),s?r.a.createElement(T,m):"Image"===a.widget?r.a.createElement("img",{alt:o||a.autoTitle||i,src:"./images/not_found.png",className:"image-widget"}):r.a.createElement(S,Object.assign({type:l===c.e.number?"number":"text"},m)))};switch(null===p||void 0===p?void 0:p.toLowerCase()){case c.e.boolean:return r.a.createElement(M,{title:o||u,name:i,inputProps:m});case c.e.spacer:return r.a.createElement(C,null);case c.e.hilite:return r.a.createElement(N,a);case c.e.separator:case c.l.divider:return r.a.createElement(E,null);case c.l.menuItem:return r.a.createElement(I,{title:o});case c.e.button:return r.a.createElement(F,Object.assign({},m,{title:o||i}));case"selection":case"label":return r.a.createElement("span",{dangerouslySetInnerHTML:{__html:o}});case"panel-dashlet":case"panel-related":case"one-to-many":case"json-one-to-many":return r.a.createElement(j,{attrs:a,id:t});case"many-to-many":case"json-many-to-many":return"TagSelect"!==f?r.a.createElement(j,{attrs:a,id:t}):r.a.createElement(b,null);default:return r.a.createElement(b,null)}}},87:function(e,t,a){"use strict";a.d(t,"a",(function(){return i})),a.d(t,"b",(function(){return r}));var n=a(2),i=[{name:"Common",value:[{name:"label",title:"Label",type:"label",image:"label.png",id:n.g.createWidgets.field,serverType:"label",colSpan:6},{name:"button",type:"button",title:"Button",image:"button.png",id:n.g.createWidgets.field,serverType:"button",colSpan:6},{name:"separator",type:"separator",title:"Separator",image:"seperator.png",id:n.g.createWidgets.field,serverType:"separator",colSpan:6},{name:"selection",title:"Selection",type:n.h.ITEM,image:"dropdown-arrow.png",id:n.g.createWidgets.field,serverType:"string",isSelectionField:!0,colSpan:6}]},{name:"Panels",value:[{name:"panel",type:n.h.CONTAINER,items:[],image:"panel.png",id:n.g.createWidgets.panel,serverType:n.l.panel,cols:12,layout:"grid",colSpan:12},{name:"Tabs",type:n.l.tabs,image:"panel_tabs.png",tab:!0,items:[],id:n.g.createWidgets.tabs,serverType:n.l.panel,isNew:!0,colSpan:12,title:"Tabs",current:null,layout:"grid"}]}],r=[{name:"Fields",value:[{name:"string",type:n.h.ITEM,title:"String",image:"string.png",id:n.g.createWidgets.field,isModelField:!0,serverType:"string",colSpan:6},{name:"integer",type:n.h.ITEM,title:"Integer",image:"integer.png",id:n.g.createWidgets.field,isModelField:!0,serverType:"integer",colSpan:6},{name:"decimal",type:n.h.ITEM,title:"Decimal",image:"decimal.png",id:n.g.createWidgets.field,isModelField:!0,serverType:"decimal",colSpan:6},{name:"boolean",type:n.h.ITEM,title:"Boolean",image:"boolean.png",id:n.g.createWidgets.field,isModelField:!0,serverType:"boolean",colSpan:6},{name:"datetime",type:n.h.ITEM,title:"Date time",image:"datetime.png",id:n.g.createWidgets.field,isModelField:!0,serverType:"datetime",colSpan:6},{name:"date",type:n.h.ITEM,title:"Date",image:"date.png",id:n.g.createWidgets.field,isModelField:!0,serverType:"date",colSpan:6},{name:"time",type:n.h.ITEM,title:"Time",image:"time.png",id:n.g.createWidgets.field,isModelField:!0,serverType:"time",colSpan:6}]},{name:"Relational fields",value:[{name:"manyToOne",type:n.h.ITEM,title:"Many to one",image:"many-to-one.png",id:n.g.createWidgets.field,isModelField:!0,serverType:"many-to-one",colSpan:6},{name:"oneToMany",type:n.h.ITEM,title:"One to many",image:"one-to-many.png",id:n.g.createWidgets.field,isModelField:!0,serverType:"one-to-many",colSpan:6},{name:"manyToMany",type:n.h.ITEM,title:"Many to many",image:"many-to-many.png",id:n.g.createWidgets.field,isModelField:!0,serverType:"many-to-many",colSpan:6}]}]},88:function(e,t,a){"use strict";a.d(t,"b",(function(){return f})),a.d(t,"c",(function(){return m})),a.d(t,"a",(function(){return p}));var n=a(9),i=a(17),r=a(4),o=a(5),l=a(2),c=["target","type","position","source","name","value","widgetAttrs","itemSource"],s=["id","image","elements"],d=["items","cols","serverType","version","type","widgetAttrs","current","selectionList","autoTitle","isModelField","elements","relationship","isDummy","metaModel","targetSearch","layout","massUpdate","xPath","tz"];function u(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:l.i.BASE;return m(e,[],null,t)}function f(e){var t=e.target,a=e.type,n=e.position,r=e.source,o=e.name,l=e.value,s=e.widgetAttrs,d=(e.itemSource,Object(i.a)(e,c),{target:t}),f=[];if(s&&!["replace","attribute","move"].includes(a)&&(Array.isArray(s)?f=s.map((function(e){return u(e)})).filter((function(e){return e})):f.push(u(s))),f.length||["replace","attribute","move"].includes(a)){var m={attributes:d,type:"element",name:"extend",elements:[{type:"element",name:a,attributes:{position:n,source:r,name:o,value:l},elements:f}]};return JSON.parse(JSON.stringify(m))}}function m(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],a=arguments.length>3?arguments[3]:void 0,c=(e.id,e.image,e.elements),u=void 0===c?[]:c,f=Object(i.a)(e,s),m=["panel","panel-related","panel-dashlet","panel-tabs","panel-stack","panel-include","button","label","spacer","separator","menu","item","toolbar","menubar","divider"],p=[].concat(d),b=m.includes(f.type)?f.type:"field";b=m.includes(f.serverType)?f.serverType:b,b=e.tab?"panel-tabs":b,f.type===l.l.panelInclude&&(p=[].concat(Object(n.a)(p),["title","colSpan"])),b===l.l.tabs&&(p=[].concat(Object(n.a)(p),["tab","title"])),"spacer"===b&&(p=[].concat(Object(n.a)(p),["title","isDummy"])),b===l.l.panelInclude&&(p=[].concat(Object(n.a)(p),["module","name"])),[l.l.menu,l.l.menuItem,l.l.toolbar,l.l.menubar].includes(b)&&(p=[].concat(Object(n.a)(p),["colSpan"])),[l.l.toolbar,l.l.menubar].includes(b)&&(p=[].concat(Object(n.a)(p),["colSpan","name","title"])),[l.l.divider].includes(b)&&(p=[].concat(Object(n.a)(p),["colSpan","title"]));return{attributes:Object(r.a)({},o.f.getWidgetAttrs(f,p,a)),type:"element",name:b,elements:[].concat(Object(n.a)(t),Object(n.a)(u))}}function p(e,t,a){var n={},i=[];return t.length&&t.forEach((function(t){var o=e[t],l=[];o&&(o.items&&o.items.length&&(l=p(e,o.items,a)),i.push(Object(r.a)({},m(o,l,n,a))))})),i}},99:function(e,t,a){"use strict";var n=a(9),i=a(17),r=a(0),o=a.n(r),l=a(24),c=a.n(l),s=a(259),d=a(169),u=a.n(d),f=a(54),m=a(5),p=a(26),b=a(2),v=["id","attrs","isDragging","isTab","addTabPanel"],g={cols:1};t.a=function(e){var t=Object(f.c)(),a=Object(p.c)().modelType,r=e.id,l=e.attrs,d=(e.isDragging,e.isTab),h=void 0!==d&&d,y=e.addTabPanel,O=Object(i.a)(e,v),j=l.title,w=l.items,x=void 0===w?[]:w,k=l.current,S=Object(n.a)(x.slice()).reduce((function(e,t){return e.concat([t,0])}),[0]),T=Object(p.b)(),C=T.state.highlightedOption,E=T.update,M=function(t,a){return{key:t||"".concat(t).concat(a),id:t,meta:{horizontal:!0},index:a,panelId:e.id,panelColumns:l.cols,tabId:e.id}},F=x.indexOf(k);return-1===F&&(F=0,k=x.length?x[0]:0),o.a.useEffect((function(){a===b.i.BASE&&"customField"!==e._type&&E((function(e){e.tabPanelItems=x}))}),[E,x,e._type,a]),o.a.createElement(o.a.Fragment,null,j&&o.a.createElement("div",{className:c()("panel-header panel-tab-header",{inline:h})},j),!h&&o.a.createElement(f.a,{className:"tabs-panel panel-body",attrs:g},o.a.createElement("div",{className:c()("tabs")},S.map((function(e,a){return t&&o.a.createElement(t,Object.assign({},O,M(e,a),{isTab:!0,className:k===e&&k===(null===C||void 0===C?void 0:C.id)?"search-overlay":k===e?"active-tab":""}))})),!(a===b.i.BASE&&"customField"!==e._type)&&o.a.createElement("div",{style:{display:"flex",alignItems:"center"}},o.a.createElement(s.a,{title:Object(m.q)("Add tab"),arrow:!0},o.a.createElement(u.a,{onClick:function(){return y({attrs:l,id:r})}})))),x.length>0&&t&&o.a.createElement(t,Object.assign({className:(null===C||void 0===C?void 0:C.id)===k&&"search-overlay"},O,M(k,F)))))}}},[[206,1,2]]]);
//# sourceMappingURL=main.73d2da1a.chunk.js.map