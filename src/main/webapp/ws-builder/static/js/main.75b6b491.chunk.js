/*! For license information please see main.75b6b491.chunk.js.LICENSE.txt */
(this["webpackJsonpweb-service-builder"]=this["webpackJsonpweb-service-builder"]||[]).push([[0],{472:function(e,t,n){},473:function(e,t,n){},474:function(e,t,n){},485:function(e,t,n){},486:function(e,t,n){"use strict";n.r(t);var r=n(2),a=n(0),i=n.n(a),o=n(29),c=n.n(o),s=n(30),l=n(5),u=n(13),p=n(16),d=n(9),h=n(26),f=n(148),m=n(466),b=n(209),v=n(370),y=n(470),g=n(371),x=n(471),j=n(372),w=n(483),O=n(487),E=n(387),N=n(258),k=n(484),S=n(391),_=n(12),L=n.n(_),C=n(126),P=n(1),T=n(8),M=n(4),A=n(596);function R(){}function B(e,t){this.model=e,this.properties=t}R.prototype.get=function(e){return this.$model.properties.get(this,e)},R.prototype.set=function(e,t){this.$model.properties.set(this,e,t)},B.prototype.createType=function(e){var t=this.model,n=this.properties,r=Object.create(R.prototype);Object(P.i)(e.properties,(function(e){e.isMany||void 0===e.default||(r[e.name]=e.default)})),n.defineModel(r,t),n.defineDescriptor(r,e);var a=e.ns.name;function i(e){n.define(this,"$type",{value:a,enumerable:!0}),n.define(this,"$attrs",{value:{}}),n.define(this,"$parent",{writable:!0}),Object(P.i)(e,Object(P.b)((function(e,t){this.set(t,e)}),this))}return i.prototype=r,i.hasType=r.$instanceOf=this.model.hasType,n.defineModel(i,t),n.defineDescriptor(i,e),i};var D={String:!0,Boolean:!0,Integer:!0,Real:!0,Element:!0},F={String:function(e){return e},Boolean:function(e){return"true"===e},Integer:function(e){return parseInt(e,10)},Real:function(e){return parseFloat(e,10)}};function I(e,t){var n=F[e];return n?n(t):t}function V(e){return!!D[e]}function G(e){return!!F[e]}function W(e,t){var n,r,a=e.split(/:/);if(1===a.length)n=e,r=t;else{if(2!==a.length)throw new Error("expected <prefix:localName> or <localName>, got "+e);n=a[1],r=a[0]}return{name:e=(r?r+":":"")+n,prefix:r,localName:n}}function $(e){this.ns=e,this.name=e.name,this.allTypes=[],this.allTypesByName={},this.properties=[],this.propertiesByName={}}function z(e,t){this.packageMap={},this.typeMap={},this.packages=[],this.properties=t,Object(P.i)(e,Object(P.b)(this.registerPackage,this))}function K(e,t,n){var r=t[n];if(r in e)throw new Error("package with "+n+" <"+r+"> already defined")}function q(e){this.model=e}function H(e,t,n){Object.defineProperty(e,t.name,{enumerable:!t.isReference,writable:!0,value:n,configurable:!0})}function U(e){this.properties=new q(this),this.factory=new B(this,this.properties),this.registry=new z(e,this.properties),this.typeCache={}}$.prototype.build=function(){return Object(P.x)(this,["ns","name","allTypes","allTypesByName","properties","propertiesByName","bodyProperty","idProperty"])},$.prototype.addProperty=function(e,t,n){"boolean"===typeof t&&(n=t,t=void 0),this.addNamedProperty(e,!1!==n);var r=this.properties;void 0!==t?r.splice(t,0,e):r.push(e)},$.prototype.replaceProperty=function(e,t,n){var r=e.ns,a=this.properties,i=this.propertiesByName,o=e.name!==t.name;if(e.isId){if(!t.isId)throw new Error("property <"+t.ns.name+"> must be id property to refine <"+e.ns.name+">");this.setIdProperty(t,!1)}if(e.isBody){if(!t.isBody)throw new Error("property <"+t.ns.name+"> must be body property to refine <"+e.ns.name+">");this.setBodyProperty(t,!1)}var c=a.indexOf(e);if(-1===c)throw new Error("property <"+r.name+"> not found in property list");a.splice(c,1),this.addProperty(t,n?void 0:c,o),i[r.name]=i[r.localName]=t},$.prototype.redefineProperty=function(e,t,n){var r=e.ns.prefix,a=t.split("#"),i=W(a[0],r),o=W(a[1],i.prefix).name,c=this.propertiesByName[o];if(!c)throw new Error("refined property <"+o+"> not found");this.replaceProperty(c,e,n),delete e.redefines},$.prototype.addNamedProperty=function(e,t){var n=e.ns,r=this.propertiesByName;t&&(this.assertNotDefined(e,n.name),this.assertNotDefined(e,n.localName)),r[n.name]=r[n.localName]=e},$.prototype.removeNamedProperty=function(e){var t=e.ns,n=this.propertiesByName;delete n[t.name],delete n[t.localName]},$.prototype.setBodyProperty=function(e,t){if(t&&this.bodyProperty)throw new Error("body property defined multiple times (<"+this.bodyProperty.ns.name+">, <"+e.ns.name+">)");this.bodyProperty=e},$.prototype.setIdProperty=function(e,t){if(t&&this.idProperty)throw new Error("id property defined multiple times (<"+this.idProperty.ns.name+">, <"+e.ns.name+">)");this.idProperty=e},$.prototype.assertNotDefined=function(e,t){var n=e.name,r=this.propertiesByName[n];if(r)throw new Error("property <"+n+"> already defined; override of <"+r.definedBy.ns.name+"#"+r.ns.name+"> by <"+e.definedBy.ns.name+"#"+e.ns.name+"> not allowed without redefines")},$.prototype.hasProperty=function(e){return this.propertiesByName[e]},$.prototype.addTrait=function(e,t){var n=this.allTypesByName,r=this.allTypes,a=e.name;a in n||(Object(P.i)(e.properties,Object(P.b)((function(n){n=Object(P.a)({},n,{name:n.ns.localName,inherited:t}),Object.defineProperty(n,"definedBy",{value:e});var r=n.replaces,a=n.redefines;r||a?this.redefineProperty(n,r||a,r):(n.isBody&&this.setBodyProperty(n),n.isId&&this.setIdProperty(n),this.addProperty(n))}),this)),r.push(e),n[a]=e)},z.prototype.getPackage=function(e){return this.packageMap[e]},z.prototype.getPackages=function(){return this.packages},z.prototype.registerPackage=function(e){e=Object(P.a)({},e);var t=this.packageMap;K(t,e,"prefix"),K(t,e,"uri"),Object(P.i)(e.types,Object(P.b)((function(t){this.registerType(t,e)}),this)),t[e.uri]=t[e.prefix]=e,this.packages.push(e)},z.prototype.registerType=function(e,t){var n=W((e=Object(P.a)({},e,{superClass:(e.superClass||[]).slice(),extends:(e.extends||[]).slice(),properties:(e.properties||[]).slice(),meta:Object(P.a)(e.meta||{})})).name,t.prefix),r=n.name,a={};Object(P.i)(e.properties,Object(P.b)((function(e){var t=W(e.name,n.prefix),r=t.name;V(e.type)||(e.type=W(e.type,t.prefix).name),Object(P.a)(e,{ns:t,name:r}),a[r]=e}),this)),Object(P.a)(e,{ns:n,name:r,propertiesByName:a}),Object(P.i)(e.extends,Object(P.b)((function(e){var t=this.typeMap[e];t.traits=t.traits||[],t.traits.push(r)}),this)),this.definePackage(e,t),this.typeMap[r]=e},z.prototype.mapTypes=function(e,t,n){var r=V(e.name)?{name:e.name}:this.typeMap[e.name],a=this;function i(e){return o(e,!0)}function o(n,r){var i=W(n,V(n)?"":e.prefix);a.mapTypes(i,t,r)}if(!r)throw new Error("unknown type <"+e.name+">");Object(P.i)(r.superClass,n?i:o),t(r,!n),Object(P.i)(r.traits,i)},z.prototype.getEffectiveDescriptor=function(e){var t=W(e),n=new $(t);this.mapTypes(t,(function(e,t){n.addTrait(e,t)}));var r=n.build();return this.definePackage(r,r.allTypes[r.allTypes.length-1].$pkg),r},z.prototype.definePackage=function(e,t){this.properties.define(e,"$pkg",{value:t})},q.prototype.set=function(e,t,n){var r=this.model.getPropertyDescriptor(e,t),a=r&&r.name;"undefined"===typeof n?r?delete e[a]:delete e.$attrs[t]:r?a in e?e[a]=n:H(e,r,n):e.$attrs[t]=n},q.prototype.get=function(e,t){var n=this.model.getPropertyDescriptor(e,t);if(!n)return e.$attrs[t];var r=n.name;return!e[r]&&n.isMany&&H(e,n,[]),e[r]},q.prototype.define=function(e,t,n){Object.defineProperty(e,t,n)},q.prototype.defineDescriptor=function(e,t){this.define(e,"$descriptor",{value:t})},q.prototype.defineModel=function(e,t){this.define(e,"$model",{value:t})},U.prototype.create=function(e,t){var n=this.getType(e);if(!n)throw new Error("unknown type <"+e+">");return new n(t)},U.prototype.getType=function(e){var t=this.typeCache,n=Object(P.r)(e)?e:e.ns.name,r=t[n];return r||(e=this.registry.getEffectiveDescriptor(n),r=t[n]=this.factory.createType(e)),r},U.prototype.createAny=function(e,t,n){var r=W(e),a={$type:e,$instanceOf:function(e){return e===this.$type}},i={name:e,isGeneric:!0,ns:{prefix:r.prefix,localName:r.localName,uri:t}};return this.properties.defineDescriptor(a,i),this.properties.defineModel(a,this),this.properties.define(a,"$parent",{enumerable:!1,writable:!0}),Object(P.i)(n,(function(e,t){Object(P.q)(e)&&void 0!==e.value?a[e.name]=e.value:a[t]=e})),a},U.prototype.getPackage=function(e){return this.registry.getPackage(e)},U.prototype.getPackages=function(){return this.registry.getPackages()},U.prototype.getElementDescriptor=function(e){return e.$descriptor},U.prototype.hasType=function(e,t){return void 0===t&&(t=e,e=this),t in e.$model.getElementDescriptor(e).allTypesByName},U.prototype.getPropertyDescriptor=function(e,t){return this.getElementDescriptor(e).propertiesByName[t]},U.prototype.getTypeDescriptor=function(e){return this.registry.typeMap[e]};var Y=n(344);function J(e){return e.xml&&"lowerCase"===e.xml.tagAlias}var X={xsi:"http://www.w3.org/2001/XMLSchema-instance"},Q="xsi:type";function Z(e){return e.xml&&e.xml.serialize}function ee(e){return Z(e)===Q}function te(e,t){return J(t)?e.prefix+":"+((n=e.localName).charAt(0).toUpperCase()+n.slice(1)):e.name;var n}function ne(e){return new Error(e)}function re(e){return e.$descriptor}function ae(e){Object(P.a)(this,e),this.elementsById={},this.references=[],this.warnings=[],this.addReference=function(e){this.references.push(e)},this.addElement=function(e){if(!e)throw ne("expected element");var t,n=this.elementsById,r=re(e).idProperty;if(r&&(t=e.get(r.name))){if(!/^([a-z][\w-.]*:)?[a-z_][\w-.]*$/i.test(t))throw new Error("illegal ID <"+t+">");if(n[t])throw ne("duplicate ID <"+t+">");n[t]=e}},this.addWarning=function(e){this.warnings.push(e)}}function ie(){}function oe(){}function ce(){}function se(e,t){this.property=e,this.context=t}function le(e,t){this.element=t,this.propertyDesc=e}function ue(){}function pe(e,t,n){this.model=e,this.type=e.getType(t),this.context=n}function de(e,t,n){pe.call(this,e,t,n)}function he(e,t,n){this.model=e,this.context=n}function fe(e){e instanceof U&&(e={model:e}),Object(P.a)(this,{lax:!1},e)}ie.prototype.handleEnd=function(){},ie.prototype.handleText=function(){},ie.prototype.handleNode=function(){},oe.prototype=Object.create(ie.prototype),oe.prototype.handleNode=function(){return this},ce.prototype=Object.create(ie.prototype),ce.prototype.handleText=function(e){this.body=(this.body||"")+e},se.prototype=Object.create(ce.prototype),se.prototype.handleNode=function(e){if(this.element)throw ne("expected no sub nodes");return this.element=this.createReference(e),this},se.prototype.handleEnd=function(){this.element.id=this.body},se.prototype.createReference=function(e){return{property:this.property.ns.name,id:""}},le.prototype=Object.create(ce.prototype),le.prototype.handleEnd=function(){var e=this.body||"",t=this.element,n=this.propertyDesc;e=I(n.type,e),n.isMany?t.get(n.name).push(e):t.set(n.name,e)},ue.prototype=Object.create(ce.prototype),ue.prototype.handleNode=function(e){var t=this,n=this.element;return n?t=this.handleChild(e):(n=this.element=this.createElement(e),this.context.addElement(n)),t},pe.prototype=Object.create(ue.prototype),pe.prototype.addReference=function(e){this.context.addReference(e)},pe.prototype.handleText=function(e){if(!re(this.element).bodyProperty)throw ne("unexpected body text <"+e+">");ce.prototype.handleText.call(this,e)},pe.prototype.handleEnd=function(){var e=this.body,t=this.element,n=re(t).bodyProperty;n&&void 0!==e&&(e=I(n.type,e),t.set(n.name,e))},pe.prototype.createElement=function(e){var t,n=e.attributes,r=this.type,a=re(r),i=this.context,o=new r({}),c=this.model;return Object(P.i)(n,(function(e,n){var r,s=a.propertiesByName[n];s&&s.isReference?s.isMany?(r=e.split(" "),Object(P.i)(r,(function(e){i.addReference({element:o,property:s.ns.name,id:e})}))):i.addReference({element:o,property:s.ns.name,id:e}):(s?e=I(s.type,e):"xmlns"!==n&&(t=W(n,a.ns.prefix),c.getPackage(t.prefix)&&i.addWarning({message:"unknown attribute <"+n+">",element:o,property:n,value:e})),o.set(n,e))})),o},pe.prototype.getPropertyForNode=function(e){var t,n,r=W(e.name),a=this.type,i=this.model,o=re(a),c=r.name,s=o.propertiesByName[c];if(s&&!s.isAttr)return ee(s)&&(t=e.attributes[Q])?(t=function(e,t){var n=W(e);return function(e,t){var n=e.name,r=e.localName,a=t.xml&&t.xml.typePrefix;return a&&0===r.indexOf(a)?e.prefix+":"+r.slice(a.length):n}(n,t.getPackage(n.prefix))}(t,i),n=i.getType(t),Object(P.a)({},s,{effectiveType:re(n).name})):s;var l=i.getPackage(r.prefix);if(l){if(t=te(r,l),n=i.getType(t),s=Object(P.f)(o.properties,(function(e){return!e.isVirtual&&!e.isReference&&!e.isAttribute&&n.hasType(e.type)})))return Object(P.a)({},s,{effectiveType:re(n).name})}else if(s=Object(P.f)(o.properties,(function(e){return!e.isReference&&!e.isAttribute&&"Element"===e.type})))return s;throw ne("unrecognized element <"+r.name+">")},pe.prototype.toString=function(){return"ElementDescriptor["+re(this.type).name+"]"},pe.prototype.valueHandler=function(e,t){return new le(e,t)},pe.prototype.referenceHandler=function(e){return new se(e,this.context)},pe.prototype.handler=function(e){return"Element"===e?new he(this.model,e,this.context):new pe(this.model,e,this.context)},pe.prototype.handleChild=function(e){var t,n,r,a;if(t=this.getPropertyForNode(e),r=this.element,G(n=t.effectiveType||t.type))return this.valueHandler(t,r);var i=(a=t.isReference?this.referenceHandler(t).handleNode(e):this.handler(n).handleNode(e)).element;return void 0!==i&&(t.isMany?r.get(t.name).push(i):r.set(t.name,i),t.isReference?(Object(P.a)(i,{element:r}),this.context.addReference(i)):i.$parent=r),a},de.prototype=Object.create(pe.prototype),de.prototype.createElement=function(e){var t=e.name,n=W(t),r=this.model,a=this.type,i=r.getPackage(n.prefix),o=i&&te(n,i)||t;if(!a.hasType(o))throw ne("unexpected element <"+e.originalName+">");return pe.prototype.createElement.call(this,e)},he.prototype=Object.create(ue.prototype),he.prototype.createElement=function(e){var t=e.name,n=W(t).prefix,r=e.ns[n+"$uri"],a=e.attributes;return this.model.createAny(t,r,a)},he.prototype.handleChild=function(e){var t=new he(this.model,"Element",this.context).handleNode(e),n=this.element,r=t.element;return void 0!==r&&((n.$children=n.$children||[]).push(r),r.$parent=n),t},he.prototype.handleEnd=function(){this.body&&(this.element.$body=this.body)},fe.prototype.fromXML=function(e,t,n){var r=t.rootHandler;t instanceof pe?(r=t,t={}):"string"===typeof t?(r=this.handler(t),t={}):"string"===typeof r&&(r=this.handler(r));var a=this.model,i=this.lax,o=new ae(Object(P.a)({},t,{rootHandler:r})),c=new Y.a({proxy:!0}),s=function(){var e=[];return Object.defineProperty(e,"peek",{value:function(){return this[this.length-1]}}),e}();function l(e,t,n){var r=t(),a=r.line,i=r.column,c=r.data;"<"===c.charAt(0)&&-1!==c.indexOf(" ")&&(c=c.slice(0,c.indexOf(" "))+">");var s="unparsable content "+(c?c+" ":"")+"detected\n\tline: "+a+"\n\tcolumn: "+i+"\n\tnested error: "+e.message;if(n)return o.addWarning({message:s,error:e}),!0;throw ne(s)}function u(e,t){return l(e,t,!0)}r.context=o,s.push(r);var p=/^<\?xml /i,d=/ encoding="([^"]+)"/i,h=/^utf-8$/i;function f(e,t){try{s.peek().handleText(e)}catch(n){u(n,t)}}var m=a.getPackages().reduce((function(e,t){return e[t.uri]=t.prefix,e}),{});c.ns(m).on("openTag",(function(e,t,n,r){var a=e.attrs||{},o=Object.keys(a).reduce((function(e,n){var r=t(a[n]);return e[n]=r,e}),{});!function(e,t){var n=s.peek();try{s.push(n.handleNode(e))}catch(r){l(r,t,i)&&s.push(new oe)}}({name:e.name,originalName:e.originalName,attributes:o,ns:e.ns},r)})).on("question",(function(e){if(p.test(e)){var t=d.exec(e),n=t&&t[1];n&&!h.test(n)&&o.addWarning({message:"unsupported document encoding <"+n+">, falling back to UTF-8"})}})).on("closeTag",(function(){s.pop().handleEnd()})).on("cdata",f).on("text",(function(e,t,n){!function(e,t){(e=e.trim())&&f(e,t)}(t(e),n)})).on("error",l).on("warn",u),setTimeout((function(){var t;try{c.parse(e),function(){var e,t,n=o.elementsById,r=o.references;for(e=0;t=r[e];e++){var a=t.element,i=n[t.id],c=re(a).propertiesByName[t.property];if(i||o.addWarning({message:"unresolved reference <"+t.id+">",element:t.element,property:t.property,value:t.id}),c.isMany){var s=a.get(c.name),l=s.indexOf(t);-1===l&&(l=s.length),i?s[l]=i:s.splice(l,1)}else a.set(c.name,i)}}()}catch(i){t=i}var a=r.element;t||a||(t=ne("failed to parse document as <"+r.type.$descriptor.name+">")),n(t,t?void 0:a,o)}),0)},fe.prototype.handler=function(e){return new de(this.model,e)};var me=/<|>|'|"|&|\n\r|\n/g,be=/<|>|&/g;function ve(e){var t={},n={},r={},a=[],i=[];this.byUri=function(t){return n[t]||e&&e.byUri(t)},this.add=function(e,t){n[e.uri]=e,t?a.push(e):i.push(e),this.mapPrefix(e.prefix,e.uri)},this.uriByPrefix=function(e){return t[e||"xmlns"]},this.mapPrefix=function(e,n){t[e||"xmlns"]=n},this.logUsed=function(e){var t=e.uri;r[t]=this.byUri(t)},this.getUsed=function(e){return[].concat(a,i).filter((function(e){return r[e.uri]}))}}function ye(e,t){return J(t)?(n=e).charAt(0).toLowerCase()+n.slice(1):e;var n}function ge(e,t){e.super_=t,e.prototype=Object.create(t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}})}function xe(e){return Object(P.r)(e)?e:(e.prefix?e.prefix+":":"")+e.localName}var je={"\n":"#10","\n\r":"#10",'"':"#34","'":"#39","<":"#60",">":"#62","&":"#38"},we={"<":"lt",">":"gt","&":"amp"};function Oe(e,t,n){return(e=Object(P.r)(e)?e:""+e).replace(t,(function(e){return"&"+n[e]+";"}))}function Ee(e){this.tagName=e}function Ne(){}function ke(e){this.tagName=e}function Se(e,t){this.body=[],this.attrs=[],this.parent=e,this.propertyDescriptor=t}function _e(e,t){Se.call(this,e,t)}function Le(){this.value="",this.write=function(e){this.value+=e}}function Ce(e,t){var n=[""];this.append=function(t){return e.write(t),this},this.appendNewLine=function(){return t&&e.write("\n"),this},this.appendIndent=function(){return t&&e.write(n.join("  ")),this},this.indent=function(){return n.push(""),this},this.unindent=function(){return n.pop(),this}}function Pe(e){return e=Object(P.a)({format:!1,preamble:!0},e||{}),{toXML:function(t,n){var r=n||new Le,a=new Ce(r,e.format);if(e.preamble&&a.append('<?xml version="1.0" encoding="UTF-8"?>\n'),(new Se).build(t).serializeTo(a),!n)return r.value}}}function Te(e,t){U.call(this,e,t)}Ee.prototype.build=function(e){return this.element=e,this},Ee.prototype.serializeTo=function(e){e.appendIndent().append("<"+this.tagName+">"+this.element.id+"</"+this.tagName+">").appendNewLine()},Ne.prototype.serializeValue=Ne.prototype.serializeTo=function(e){e.append(this.escape?Oe(this.value,be,we):this.value)},Ne.prototype.build=function(e,t){return this.value=t,"String"===e.type&&-1!==t.search(be)&&(this.escape=!0),this},ge(ke,Ne),ke.prototype.serializeTo=function(e){e.appendIndent().append("<"+this.tagName+">"),this.serializeValue(e),e.append("</"+this.tagName+">").appendNewLine()},Se.prototype.build=function(e){this.element=e;var t,n,r,a=e.$descriptor,i=this.propertyDescriptor,o=a.isGeneric;return t=o?this.parseGeneric(e):this.parseNsAttributes(e),this.ns=i?this.nsPropertyTagName(i):this.nsTagName(a),this.tagName=this.addTagName(this.ns),o||(n=function(e){var t=e.$descriptor;return Object(P.e)(t.properties,(function(t){var n=t.name;if(t.isVirtual)return!1;if(!e.hasOwnProperty(n))return!1;var r=e[n];return r!==t.default&&null!==r&&(!t.isMany||r.length)}))}(e),this.parseAttributes((r=n,Object(P.e)(r,(function(e){return e.isAttr})))),this.parseContainments(function(e){return Object(P.e)(e,(function(e){return!e.isAttr}))}(n))),this.parseGenericAttributes(e,t),this},Se.prototype.nsTagName=function(e){return function(e,t){return t.isGeneric?Object(P.a)({localName:t.ns.localName},e):Object(P.a)({localName:ye(t.ns.localName,t.$pkg)},e)}(this.logNamespaceUsed(e.ns),e)},Se.prototype.nsPropertyTagName=function(e){return function(e,t){return Object(P.a)({localName:t.ns.localName},e)}(this.logNamespaceUsed(e.ns),e)},Se.prototype.isLocalNs=function(e){return e.uri===this.ns.uri},Se.prototype.nsAttributeName=function(e){var t;if(t=Object(P.r)(e)?W(e):e.ns,e.inherited)return{localName:t.localName};var n=this.logNamespaceUsed(t);return this.getNamespaces().logUsed(n),this.isLocalNs(n)?{localName:t.localName}:Object(P.a)({localName:t.localName},n)},Se.prototype.parseGeneric=function(e){var t=this,n=this.body,r=[];return Object(P.i)(e,(function(a,i){"$body"===i?n.push((new Ne).build({type:"String"},a)):"$children"===i?Object(P.i)(a,(function(e){n.push(new Se(t).build(e))})):0!==i.indexOf("$")&&t.parseNsAttribute(e,i,a)&&r.push({name:i,value:a})})),r},Se.prototype.parseNsAttribute=function(e,t,n){var r,a=e.$model,i=W(t);if("xmlns"===i.prefix&&(r={prefix:i.localName,uri:n}),i.prefix||"xmlns"!==i.localName||(r={uri:n}),!r)return{name:t,value:n};if(a&&a.getPackage(n))this.logNamespace(r,!0,!0);else{var o=this.logNamespaceUsed(r,!0);this.getNamespaces().logUsed(o)}},Se.prototype.parseNsAttributes=function(e,t){var n=this,r=e.$attrs,a=[];return Object(P.i)(r,(function(t,r){var i=n.parseNsAttribute(e,r,t);i&&a.push(i)})),a},Se.prototype.parseGenericAttributes=function(e,t){var n=this;Object(P.i)(t,(function(t){if(t.name!==Q)try{n.addAttribute(n.nsAttributeName(t.name),t.value)}catch(r){console.warn("missing namespace information for ",t.name,"=",t.value,"on",e,r)}}))},Se.prototype.parseContainments=function(e){var t=this,n=this.body,r=this.element;Object(P.i)(e,(function(e){var a=r.get(e.name),i=e.isReference;if(e.isMany||(a=[a]),e.isBody)n.push((new Ne).build(e,a[0]));else if(G(e.type))Object(P.i)(a,(function(r){n.push(new ke(t.addTagName(t.nsPropertyTagName(e))).build(e,r))}));else if(i)Object(P.i)(a,(function(r){n.push(new Ee(t.addTagName(t.nsPropertyTagName(e))).build(r))}));else{var o=ee(e),c=function(e){return"property"===Z(e)}(e);Object(P.i)(a,(function(r){var a;a=o?new _e(t,e):c?new Se(t,e):new Se(t),n.push(a.build(r))}))}}))},Se.prototype.getNamespaces=function(e){var t,n=this.namespaces,r=this.parent;return n||(t=r&&r.getNamespaces(),e||!t?this.namespaces=n=new ve(t):n=t),n},Se.prototype.logNamespace=function(e,t,n){var r=this.getNamespaces(n),a=e.uri,i=e.prefix;return r.byUri(a)||r.add(e,t),r.mapPrefix(i,a),e},Se.prototype.logNamespaceUsed=function(e,t){var n,r,a,i=this.element.$model,o=this.getNamespaces(t),c=e.prefix,s=e.uri;if(!c&&!s)return{localName:e.localName};if(a=X[c]||i&&(i.getPackage(c)||{}).uri,!(s=s||a||o.uriByPrefix(c)))throw new Error("no namespace uri given for prefix <"+c+">");if(!(e=o.byUri(s))){for(n=c,r=1;o.uriByPrefix(n);)n=c+"_"+r++;e=this.logNamespace({prefix:n,uri:s},a===s)}return c&&o.mapPrefix(c,s),e},Se.prototype.parseAttributes=function(e){var t=this,n=this.element;Object(P.i)(e,(function(e){var r=n.get(e.name);if(e.isReference)if(e.isMany){var a=[];Object(P.i)(r,(function(e){a.push(e.id)})),r=a.join(" ")}else r=r.id;t.addAttribute(t.nsAttributeName(e),r)}))},Se.prototype.addTagName=function(e){var t=this.logNamespaceUsed(e);return this.getNamespaces().logUsed(t),xe(e)},Se.prototype.addAttribute=function(e,t){var n=this.attrs;Object(P.r)(t)&&(t=Oe(t,me,je)),n.push({name:e,value:t})},Se.prototype.serializeAttributes=function(e){var t=this.attrs,n=this.namespaces;n&&(t=function(e){return Object(P.u)(e.getUsed(),(function(e){return{name:"xmlns"+(e.prefix?":"+e.prefix:""),value:e.uri}}))}(n).concat(t)),Object(P.i)(t,(function(t){e.append(" ").append(xe(t.name)).append('="').append(t.value).append('"')}))},Se.prototype.serializeTo=function(e){var t=this.body[0],n=t&&t.constructor!==Ne;e.appendIndent().append("<"+this.tagName),this.serializeAttributes(e),e.append(t?">":" />"),t&&(n&&e.appendNewLine().indent(),Object(P.i)(this.body,(function(t){t.serializeTo(e)})),n&&e.unindent().appendIndent(),e.append("</"+this.tagName+">")),e.appendNewLine()},ge(_e,Se),_e.prototype.parseNsAttributes=function(e){var t=Se.prototype.parseNsAttributes.call(this,e),n=e.$descriptor;if(n.name===this.propertyDescriptor.type)return t;var r=this.typeNs=this.nsTagName(n);this.getNamespaces().logUsed(this.typeNs);var a=e.$model.getPackage(r.uri),i=a.xml&&a.xml.typePrefix||"";return this.addAttribute(this.nsAttributeName(Q),(r.prefix?r.prefix+":":"")+i+n.ns.localName),t},_e.prototype.isLocalNs=function(e){return e.uri===(this.typeNs||this.ns).uri},Te.prototype=Object.create(U.prototype),Te.prototype.fromXML=function(e,t,n,r){Object(P.r)(t)||(r=n,n=t,t="bpmn:Process-actions"),Object(P.n)(n)&&(r=n,n={});var a=new fe(Object(P.a)({model:this,lax:!0},n)),i=a.handler(t);a.fromXML(e,i,r)},Te.prototype.toXML=function(e,t,n){Object(P.n)(t)&&(n=t,t={});var r,a,i=new Pe(t);try{r=i.toXML(e)}catch(o){a=o}return n(a,r)};var Me={bpmn:{name:"BPMN20",uri:"http://www.omg.org/spec/BPMN/20100524/MODEL",associations:[],types:[{name:"Interface",superClass:["RootElement"],properties:[{name:"name",isAttr:!0,type:"String"},{name:"operations",type:"Operation",isMany:!0},{name:"implementationRef",type:"String",isAttr:!0}]},{name:"Operation",superClass:["BaseElement"],properties:[{name:"name",isAttr:!0,type:"String"},{name:"inMessageRef",type:"Message",isReference:!0},{name:"outMessageRef",type:"Message",isReference:!0},{name:"errorRef",type:"Error",isMany:!0,isReference:!0},{name:"implementationRef",type:"String",isAttr:!0}]},{name:"EndPoint",superClass:["RootElement"]},{name:"Auditing",superClass:["BaseElement"]},{name:"GlobalTask",superClass:["CallableElement"],properties:[{name:"resources",type:"ResourceRole",isMany:!0}]},{name:"Monitoring",superClass:["BaseElement"]},{name:"Performer",superClass:["ResourceRole"]},{name:"Process-action",superClass:["FlowElementsContainer","CallableElement"],properties:[{name:"targetModel",isAttr:!0,type:"String"},{name:"sourceModel",isAttr:!0,type:"String"},{name:"laneSets",isMany:!0,replaces:"FlowElementsContainer#laneSets",type:"LaneSet"}]},{name:"LaneSet",superClass:["BaseElement"],properties:[{name:"lanes",type:"Lane",isMany:!0},{name:"name",isAttr:!0,type:"String"}]},{name:"Lane",superClass:["BaseElement"],properties:[{name:"name",isAttr:!0,type:"String"},{name:"partitionElementRef",type:"BaseElement",isAttr:!0,isReference:!0},{name:"partitionElement",type:"BaseElement"},{name:"flowNodeRef",type:"FlowNode",isMany:!0,isReference:!0},{name:"childLaneSet",type:"LaneSet",xml:{serialize:"xsi:type"}}]},{name:"Gateway",isAbstract:!0,superClass:["FlowNode"],properties:[{name:"gatewayDirection",type:"GatewayDirection",default:"Unspecified",isAttr:!0}]},{name:"EventBasedGateway",superClass:["Gateway"],properties:[{name:"instantiate",default:!1,isAttr:!0,type:"Boolean"},{name:"eventGatewayType",type:"EventBasedGatewayType",isAttr:!0,default:"Exclusive"}]},{name:"Parameter",superClass:["Element"],meta:{allowedIn:["bpmn:Function","bpmn:Query"]},properties:[{name:"id",isAttr:!0,type:"String"},{name:"target",isAttr:!0,type:"String"},{name:"expression",isAttr:!0,type:"String"}]},{name:"RootElement",isAbstract:!0,superClass:["BaseElement"]},{name:"Relationship",superClass:["BaseElement"],properties:[{name:"type",isAttr:!0,type:"String"},{name:"direction",type:"RelationshipDirection",isAttr:!0},{name:"source",isMany:!0,isReference:!0,type:"Element"},{name:"target",isMany:!0,isReference:!0,type:"Element"}]},{name:"BaseElement",isAbstract:!0,properties:[{name:"id",isAttr:!0,type:"String",isId:!0},{name:"documentation",type:"Documentation",isMany:!0},{name:"extensionDefinitions",type:"ExtensionDefinition",isMany:!0,isReference:!0},{name:"assignElements",type:"AssignElements"},{name:"parameters",type:"Parameters"}]},{name:"Extension",properties:[{name:"mustUnderstand",default:!1,isAttr:!0,type:"Boolean"},{name:"definition",type:"ExtensionDefinition",isAttr:!0,isReference:!0}]},{name:"ExtensionDefinition",properties:[{name:"name",isAttr:!0,type:"String"},{name:"extensionAttributeDefinitions",type:"ExtensionAttributeDefinition",isMany:!0}]},{name:"ExtensionAttributeDefinition",properties:[{name:"name",isAttr:!0,type:"String"},{name:"type",isAttr:!0,type:"String"},{name:"isReference",default:!1,isAttr:!0,type:"Boolean"},{name:"extensionDefinition",type:"ExtensionDefinition",isAttr:!0,isReference:!0}]},{name:"AssignElements",properties:[{name:"valueRef",isAttr:!0,isReference:!0,type:"Element"},{name:"values",type:"Element",isMany:!0},{name:"extensionAttributeDefinition",type:"ExtensionAttributeDefinition",isAttr:!0,isReference:!0}]},{name:"Parameters",properties:[{name:"values",type:"Element",isMany:!0}]},{name:"FlowElement",isAbstract:!0,superClass:["BaseElement"],properties:[{name:"name",isAttr:!0,type:"String"},{name:"auditing",type:"Auditing"},{name:"monitoring",type:"Monitoring"},{name:"categoryValueRef",type:"CategoryValue",isMany:!0,isReference:!0}]},{name:"SequenceFlow",superClass:["FlowElement"],properties:[{name:"isImmediate",isAttr:!0,type:"Boolean"},{name:"conditionExpression",type:"Expression",xml:{serialize:"xsi:type"}},{name:"sourceRef",type:"FlowNode",isAttr:!0,isReference:!0},{name:"targetRef",type:"FlowNode",isAttr:!0,isReference:!0}]},{name:"FlowElementsContainer",isAbstract:!0,superClass:["BaseElement"],properties:[{name:"laneSets",type:"LaneSet",isMany:!0},{name:"flowElements",type:"FlowElement",isMany:!0}]},{name:"CallableElement",isAbstract:!0,superClass:["RootElement"],properties:[{name:"name",isAttr:!0,type:"String"},{name:"ioSpecification",type:"InputOutputSpecification",xml:{serialize:"property"}},{name:"supportedInterfaceRef",type:"Interface",isMany:!0,isReference:!0},{name:"ioBinding",type:"InputOutputBinding",isMany:!0,xml:{serialize:"property"}}]},{name:"FlowNode",isAbstract:!0,superClass:["FlowElement"],properties:[{name:"lanes",type:"Lane",isVirtual:!0,isMany:!0,isReference:!0}]},{name:"CorrelationPropertyRetrievalExpression",superClass:["BaseElement"],properties:[{name:"messagePath",type:"FormalExpression"},{name:"messageRef",type:"Message",isAttr:!0,isReference:!0}]},{name:"CorrelationPropertyBinding",superClass:["BaseElement"],properties:[{name:"dataPath",type:"FormalExpression"},{name:"correlationPropertyRef",type:"CorrelationProperty",isAttr:!0,isReference:!0}]},{name:"Resource",superClass:["RootElement"],properties:[{name:"name",isAttr:!0,type:"String"},{name:"resourceParameters",type:"ResourceParameter",isMany:!0}]},{name:"ResourceParameter",superClass:["BaseElement"],properties:[{name:"name",isAttr:!0,type:"String"},{name:"isRequired",isAttr:!0,type:"Boolean"},{name:"type",type:"ItemDefinition",isAttr:!0,isReference:!0}]},{name:"CorrelationSubscription",superClass:["BaseElement"],properties:[{name:"correlationKeyRef",type:"CorrelationKey",isAttr:!0,isReference:!0},{name:"correlationPropertyBinding",type:"CorrelationPropertyBinding",isMany:!0}]},{name:"MessageFlow",superClass:["BaseElement"],properties:[{name:"name",isAttr:!0,type:"String"},{name:"sourceRef",type:"InteractionNode",isAttr:!0,isReference:!0},{name:"targetRef",type:"InteractionNode",isAttr:!0,isReference:!0},{name:"messageRef",type:"Message",isAttr:!0,isReference:!0}]},{name:"MessageFlowAssociation",superClass:["BaseElement"],properties:[{name:"innerMessageFlowRef",type:"MessageFlow",isAttr:!0,isReference:!0},{name:"outerMessageFlowRef",type:"MessageFlow",isAttr:!0,isReference:!0}]},{name:"InteractionNode",isAbstract:!0,properties:[{name:"incomingConversationLinks",type:"ConversationLink",isVirtual:!0,isMany:!0,isReference:!0},{name:"outgoingConversationLinks",type:"ConversationLink",isVirtual:!0,isMany:!0,isReference:!0}]},{name:"Participant",superClass:["InteractionNode","BaseElement"],properties:[{name:"name",isAttr:!0,type:"String"},{name:"interfaceRef",type:"Interface",isMany:!0,isReference:!0},{name:"participantMultiplicity",type:"ParticipantMultiplicity"},{name:"endPointRefs",type:"EndPoint",isMany:!0,isReference:!0},{name:"processRef",type:"Process-action",isAttr:!0,isReference:!0}]},{name:"ParticipantAssociation",superClass:["BaseElement"],properties:[{name:"innerParticipantRef",type:"Participant",isAttr:!0,isReference:!0},{name:"outerParticipantRef",type:"Participant",isAttr:!0,isReference:!0}]},{name:"ParticipantMultiplicity",properties:[{name:"minimum",default:0,isAttr:!0,type:"Integer"},{name:"maximum",default:1,isAttr:!0,type:"Integer"}],superClass:["BaseElement"]},{name:"Collaboration",superClass:["RootElement"],properties:[{name:"name",isAttr:!0,type:"String"},{name:"isClosed",isAttr:!0,type:"Boolean"},{name:"participants",type:"Participant",isMany:!0},{name:"messageFlows",type:"MessageFlow",isMany:!0},{name:"artifacts",type:"Artifact",isMany:!0},{name:"conversations",type:"ConversationNode",isMany:!0},{name:"conversationAssociations",type:"ConversationAssociation"},{name:"participantAssociations",type:"ParticipantAssociation",isMany:!0},{name:"messageFlowAssociations",type:"MessageFlowAssociation",isMany:!0},{name:"correlationKeys",type:"CorrelationKey",isMany:!0},{name:"choreographyRef",type:"Choreography",isMany:!0,isReference:!0},{name:"conversationLinks",type:"ConversationLink",isMany:!0}]},{name:"ChoreographyActivity",isAbstract:!0,superClass:["FlowNode"],properties:[{name:"participantRef",type:"Participant",isMany:!0,isReference:!0},{name:"initiatingParticipantRef",type:"Participant",isAttr:!0,isReference:!0},{name:"correlationKeys",type:"CorrelationKey",isMany:!0},{name:"loopType",type:"ChoreographyLoopType",default:"None",isAttr:!0}]},{name:"CallChoreography",superClass:["ChoreographyActivity"],properties:[{name:"calledChoreographyRef",type:"Choreography",isAttr:!0,isReference:!0},{name:"participantAssociations",type:"ParticipantAssociation",isMany:!0}]},{name:"SubChoreography",superClass:["ChoreographyActivity","FlowElementsContainer"],properties:[{name:"artifacts",type:"Artifact",isMany:!0}]},{name:"ChoreographyTask",superClass:["ChoreographyActivity"],properties:[{name:"messageFlowRef",type:"MessageFlow",isMany:!0,isReference:!0}]},{name:"Choreography",superClass:["Collaboration","FlowElementsContainer"]},{name:"GlobalChoreographyTask",superClass:["Choreography"],properties:[{name:"initiatingParticipantRef",type:"Participant",isAttr:!0,isReference:!0}]},{name:"TextAnnotation",superClass:["Artifact"],properties:[{name:"text",type:"String"},{name:"textFormat",default:"text/plain",isAttr:!0,type:"String"}]},{name:"Activity",isAbstract:!0,superClass:["FlowNode"],properties:[{name:"isForCompensation",default:!1,isAttr:!0,type:"Boolean"},{name:"ioSpecification",type:"InputOutputSpecification",xml:{serialize:"property"}},{name:"boundaryEventRefs",type:"BoundaryEvent",isMany:!0,isReference:!0},{name:"properties",type:"Property",isMany:!0},{name:"dataInputAssociations",type:"DataInputAssociation",isMany:!0},{name:"dataOutputAssociations",type:"DataOutputAssociation",isMany:!0},{name:"startQuantity",default:1,isAttr:!0,type:"Integer"},{name:"resources",type:"ResourceRole",isMany:!0},{name:"completionQuantity",default:1,isAttr:!0,type:"Integer"}]},{name:"Conditional",superClass:["Activity","FlowElementsContainer","InteractionNode"],properties:[{name:"triggeredByEvent",default:!1,isAttr:!0,type:"Boolean"},{name:"artifacts",type:"Artifact",isMany:!0},{name:"expression",isAttr:!0,type:"String"},{name:"expressionValue",isAttr:!0,type:"String"}]},{name:"Loop",superClass:["Activity","FlowElementsContainer","InteractionNode"],properties:[{name:"triggeredByEvent",default:!1,isAttr:!0,type:"Boolean"},{name:"artifacts",type:"Artifact",isMany:!0},{name:"target",isAttr:!0,type:"String"},{name:"expression",isAttr:!0,type:"String"},{name:"expressionValue",isAttr:!0,type:"String"}]},{name:"Task",superClass:["Activity","InteractionNode"]},{name:"Mapper",superClass:["Task"],properties:[{name:"script",type:"Script"},{name:"scriptMeta",type:"ScriptMeta"},{name:"sourceField",isAttr:!0,type:"String"},{name:"targetField",isAttr:!0,type:"String"}]},{name:"Script",superClass:["BaseElement"],properties:[{name:"value",isBody:!0,type:"String"}]},{name:"ScriptMeta",superClass:["BaseElement"],properties:[{name:"value",isBody:!0,type:"String"}]},{name:"Function",superClass:["Task"],properties:[{name:"returnType",isAttr:!0,type:"String"},{name:"functionName",isAttr:!0,type:"String"},{name:"values",type:"Element",isMany:!0}]},{name:"GlobalScriptTask",superClass:["GlobalTask"],properties:[{name:"scriptLanguage",isAttr:!0,type:"String"},{name:"script",isAttr:!0,type:"String"}]},{name:"GlobalBusinessRuleTask",superClass:["GlobalTask"],properties:[{name:"implementation",isAttr:!0,type:"String"}]},{name:"ComplexBehaviorDefinition",superClass:["BaseElement"],properties:[{name:"condition",type:"FormalExpression"},{name:"event",type:"ImplicitThrowEvent"}]},{name:"ResourceRole",superClass:["BaseElement"],properties:[{name:"resourceRef",type:"Resource",isReference:!0},{name:"resourceParameterBindings",type:"ResourceParameterBinding",isMany:!0},{name:"resourceAssignmentExpression",type:"ResourceAssignmentExpression"},{name:"name",isAttr:!0,type:"String"}]},{name:"ResourceParameterBinding",properties:[{name:"expression",type:"Expression",xml:{serialize:"xsi:type"}},{name:"parameterRef",type:"ResourceParameter",isAttr:!0,isReference:!0}],superClass:["BaseElement"]},{name:"ResourceAssignmentExpression",properties:[{name:"expression",type:"Expression",xml:{serialize:"xsi:type"}}],superClass:["BaseElement"]},{name:"Import",properties:[{name:"importType",isAttr:!0,type:"String"},{name:"location",isAttr:!0,type:"String"},{name:"namespace",isAttr:!0,type:"String"}]},{name:"Process-actions",superClass:["BaseElement"],properties:[{name:"name",isAttr:!0,type:"String"},{name:"targetNamespace",isAttr:!0,type:"String"},{name:"expressionLanguage",default:"http://www.w3.org/1999/XPath",isAttr:!0,type:"String"},{name:"typeLanguage",default:"http://www.w3.org/2001/XMLSchema",isAttr:!0,type:"String"},{name:"imports",type:"Import",isMany:!0},{name:"extensions",type:"Extension",isMany:!0},{name:"rootElements",type:"RootElement",isMany:!0},{name:"diagrams",isMany:!0,type:"bpmndi:BPMNDiagram"},{name:"exporter",isAttr:!0,type:"String"},{name:"relationships",type:"Relationship",isMany:!0},{name:"exporterVersion",isAttr:!0,type:"String"}]}],enumerations:[{name:"ProcessType",literalValues:[{name:"None"},{name:"Public"},{name:"Private"}]},{name:"GatewayDirection",literalValues:[{name:"Unspecified"},{name:"Converging"},{name:"Diverging"},{name:"Mixed"}]},{name:"EventBasedGatewayType",literalValues:[{name:"Parallel"},{name:"Exclusive"}]},{name:"RelationshipDirection",literalValues:[{name:"None"},{name:"Forward"},{name:"Backward"},{name:"Both"}]},{name:"ItemKind",literalValues:[{name:"Physical"},{name:"Information"}]},{name:"ChoreographyLoopType",literalValues:[{name:"None"},{name:"Standard"},{name:"MultiInstanceSequential"},{name:"MultiInstanceParallel"}]},{name:"AssociationDirection",literalValues:[{name:"None"},{name:"One"},{name:"Both"}]},{name:"MultiInstanceBehavior",literalValues:[{name:"None"},{name:"One"},{name:"All"},{name:"Complex"}]},{name:"AdHocOrdering",literalValues:[{name:"Parallel"},{name:"Sequential"}]}],prefix:"bpmn",xml:{tagAlias:"lowerCase",typePrefix:"t"}},bpmndi:{name:"BPMNDI",uri:"http://www.omg.org/spec/BPMN/20100524/DI",types:[{name:"BPMNDiagram",properties:[{name:"plane",type:"BPMNPlane",redefines:"di:Diagram#rootElement"},{name:"labelStyle",type:"BPMNLabelStyle",isMany:!0}],superClass:["di:Diagram"]},{name:"BPMNPlane",properties:[{name:"bpmnElement",isAttr:!0,isReference:!0,type:"bpmn:BaseElement",redefines:"di:DiagramElement#modelElement"}],superClass:["di:Plane"]},{name:"BPMNShape",properties:[{name:"bpmnElement",isAttr:!0,isReference:!0,type:"bpmn:BaseElement",redefines:"di:DiagramElement#modelElement"},{name:"isHorizontal",isAttr:!0,type:"Boolean"},{name:"isExpanded",isAttr:!0,type:"Boolean"},{name:"isMarkerVisible",isAttr:!0,type:"Boolean"},{name:"label",type:"BPMNLabel"},{name:"isMessageVisible",isAttr:!0,type:"Boolean"},{name:"participantBandKind",type:"ParticipantBandKind",isAttr:!0},{name:"choreographyActivityShape",type:"BPMNShape",isAttr:!0,isReference:!0}],superClass:["di:LabeledShape"]},{name:"BPMNEdge",properties:[{name:"label",type:"BPMNLabel"},{name:"bpmnElement",isAttr:!0,isReference:!0,type:"bpmn:BaseElement",redefines:"di:DiagramElement#modelElement"},{name:"sourceElement",isAttr:!0,isReference:!0,type:"di:DiagramElement",redefines:"di:Edge#source"},{name:"targetElement",isAttr:!0,isReference:!0,type:"di:DiagramElement",redefines:"di:Edge#target"},{name:"messageVisibleKind",type:"MessageVisibleKind",isAttr:!0,default:"initiating"}],superClass:["di:LabeledEdge"]},{name:"BPMNLabel",properties:[{name:"labelStyle",type:"BPMNLabelStyle",isAttr:!0,isReference:!0,redefines:"di:DiagramElement#style"}],superClass:["di:Label"]},{name:"BPMNLabelStyle",properties:[{name:"font",type:"dc:Font"}],superClass:["di:Style"]}],enumerations:[{name:"ParticipantBandKind",literalValues:[{name:"top_initiating"},{name:"middle_initiating"},{name:"bottom_initiating"},{name:"top_non_initiating"},{name:"middle_non_initiating"},{name:"bottom_non_initiating"}]},{name:"MessageVisibleKind",literalValues:[{name:"initiating"},{name:"non_initiating"}]}],associations:[],prefix:"bpmndi"},dc:{name:"DC",uri:"http://www.omg.org/spec/DD/20100524/DC",types:[{name:"Boolean"},{name:"Integer"},{name:"Real"},{name:"String"},{name:"Font",properties:[{name:"name",type:"String",isAttr:!0},{name:"size",type:"Real",isAttr:!0},{name:"isBold",type:"Boolean",isAttr:!0},{name:"isItalic",type:"Boolean",isAttr:!0},{name:"isUnderline",type:"Boolean",isAttr:!0},{name:"isStrikeThrough",type:"Boolean",isAttr:!0}]},{name:"Point",properties:[{name:"x",type:"Real",default:"0",isAttr:!0},{name:"y",type:"Real",default:"0",isAttr:!0}]},{name:"Bounds",properties:[{name:"x",type:"Real",default:"0",isAttr:!0},{name:"y",type:"Real",default:"0",isAttr:!0},{name:"width",type:"Real",isAttr:!0},{name:"height",type:"Real",isAttr:!0}]}],prefix:"dc",associations:[]},di:{name:"DI",uri:"http://www.omg.org/spec/DD/20100524/DI",types:[{name:"DiagramElement",isAbstract:!0,properties:[{name:"id",type:"String",isAttr:!0,isId:!0},{name:"extension",type:"Extension"},{name:"owningDiagram",type:"Diagram",isReadOnly:!0,isVirtual:!0,isReference:!0},{name:"owningElement",type:"DiagramElement",isReadOnly:!0,isVirtual:!0,isReference:!0},{name:"modelElement",isReadOnly:!0,isVirtual:!0,isReference:!0,type:"Element"},{name:"style",type:"Style",isReadOnly:!0,isVirtual:!0,isReference:!0},{name:"ownedElement",type:"DiagramElement",isReadOnly:!0,isVirtual:!0,isMany:!0}]},{name:"Node",isAbstract:!0,superClass:["DiagramElement"]},{name:"Edge",isAbstract:!0,superClass:["DiagramElement"],properties:[{name:"source",type:"DiagramElement",isReadOnly:!0,isVirtual:!0,isReference:!0},{name:"target",type:"DiagramElement",isReadOnly:!0,isVirtual:!0,isReference:!0},{name:"waypoint",isUnique:!1,isMany:!0,type:"dc:Point",xml:{serialize:"xsi:type"}}]},{name:"Diagram",isAbstract:!0,properties:[{name:"id",type:"String",isAttr:!0,isId:!0},{name:"rootElement",type:"DiagramElement",isReadOnly:!0,isVirtual:!0},{name:"name",isAttr:!0,type:"String"},{name:"documentation",isAttr:!0,type:"String"},{name:"resolution",isAttr:!0,type:"Real"},{name:"ownedStyle",type:"Style",isReadOnly:!0,isVirtual:!0,isMany:!0}]},{name:"Shape",isAbstract:!0,superClass:["Node"],properties:[{name:"bounds",type:"dc:Bounds"}]},{name:"Plane",isAbstract:!0,superClass:["Node"],properties:[{name:"planeElement",type:"DiagramElement",subsettedProperty:"DiagramElement-ownedElement",isMany:!0}]},{name:"LabeledEdge",isAbstract:!0,superClass:["Edge"],properties:[{name:"ownedLabel",type:"Label",isReadOnly:!0,subsettedProperty:"DiagramElement-ownedElement",isVirtual:!0,isMany:!0}]},{name:"LabeledShape",isAbstract:!0,superClass:["Shape"],properties:[{name:"ownedLabel",type:"Label",isReadOnly:!0,subsettedProperty:"DiagramElement-ownedElement",isVirtual:!0,isMany:!0}]},{name:"Label",isAbstract:!0,superClass:["Node"],properties:[{name:"bounds",type:"dc:Bounds"}]},{name:"Style",isAbstract:!0,properties:[{name:"id",type:"String",isAttr:!0,isId:!0}]},{name:"Extension",properties:[{name:"values",type:"Element",isMany:!0}]}],associations:[],prefix:"di",xml:{tagAlias:"lowerCase"}},bioc:{name:"bpmn.io colors for BPMN",uri:"http://bpmn.io/schema/bpmn/biocolor/1.0",prefix:"bioc",types:[{name:"ColoredShape",extends:["bpmndi:BPMNShape"],properties:[{name:"stroke",isAttr:!0,type:"String"},{name:"fill",isAttr:!0,type:"String"}]},{name:"ColoredEdge",extends:["bpmndi:BPMNEdge"],properties:[{name:"stroke",isAttr:!0,type:"String"},{name:"fill",isAttr:!0,type:"String"}]}],enumerations:[],associations:[]}};var Ae=function(e,t){return new Te(Object(P.a)({},Me,e),t)},Re=n(105);function Be(e){return e?"<"+e.$type+(e.id?' id="'+e.id:"")+'" />':"<null>"}var De=new(n.n(Re).a)({name:"bpmnElement",enumerable:!0},{name:"di",configurable:!0});function Fe(e,t){return e.$instanceOf(t)}function Ie(e,t){var n={},r=[];function a(e,t){return function(n){e(n,t)}}function i(e){n[e.id]=e}function o(n,r){try{var a=n.di&&function(n,r){if(n.gfx)throw new Error(t("already rendered {element}",{element:Be(n)}));return e.element(n,r)}(n,r);return i(n),a}catch(o){c(o.message,{element:n,error:o}),console.error(t("failed to import {element}",{element:Be(n)})),console.error(o)}}function c(t,n){e.error(t,n)}function s(e){var n=e.bpmnElement;n?n.di?c(t("multiple DI elements defined for {element}",{element:Be(n)}),{element:n}):(De.bind(n,"di"),n.di=e):c(t("no bpmnElement referenced in {element}",{element:Be(e)}),{element:e})}function l(e){var t;s(t=e.plane),Object(P.i)(t.planeElement,u)}function u(e){s(e)}function p(){for(;r.length;)r.shift()()}function d(e,t){N(e,t),g(e.ioSpecification,t),y(e.artifacts,t),i(e)}function h(e,t){o(e,t)}function f(e,t){o(e,t)}function m(e,t){o(e,t)}function b(e,t){o(e,t)}function v(e,t){o(e,t)}function y(e,t){Object(P.i)(e,(function(e){Fe(e,"bpmn:Association")?r.push((function(){v(e,t)})):v(e,t)}))}function g(e,t){e&&(Object(P.i)(e.dataInputs,a(m,t)),Object(P.i)(e.dataOutputs,a(b,t)))}function x(e,t){N(e,t),y(e.artifacts,t)}function j(e,t){var n=o(e,t);Fe(e,"bpmn:Loop")&&x(e,n||t),Fe(e,"bpmn:Conditional")&&x(e,n||t),Fe(e,"bpmn:Activity")&&g(e.ioSpecification,t),r.push((function(){Object(P.i)(e.dataInputAssociations,a(f,t)),Object(P.i)(e.dataOutputAssociations,a(f,t))}))}function w(e,t){o(e,t)}function O(e,t){r.push((function(){var n=o(e,t);e.childLaneSet&&E(e.childLaneSet,n||t),function(e){Object(P.i)(e.flowNodeRef,(function(t){var n=t.get("lanes");n&&n.push(e)}))}(e)}))}function E(e,t){Object(P.i)(e.lanes,a(O,t))}function N(e,n){!function(e,n){Object(P.i)(e,(function(e){Fe(e,"bpmn:SequenceFlow")?r.push((function(){!function(e,t){o(e,t)}(e,n)})):Fe(e,"bpmn:BoundaryEvent")?r.unshift((function(){j(e,n)})):Fe(e,"bpmn:FlowNode")?j(e,n):Fe(e,"bpmn:DataObject")||(Fe(e,"bpmn:DataStoreReference")||Fe(e,"bpmn:DataObjectReference")?w(e,n):c(t("unrecognized flowElement {element} in context {context}",{element:Be(e),context:n?Be(n.businessObject):"null"}),{element:e,context:n}))}))}(e.flowElements,n),e.laneSets&&function(e,t){Object(P.i)(e,a(E,t))}(e.laneSets,n)}function k(e,t){var n=o(e,t),r=e.processRef;r&&d(r,n||t)}return{handleDeferred:p,handleDefinitions:function(i,o){var u=i.diagrams;if(o&&-1===u.indexOf(o))throw new Error(t("diagram not part of bpmn:Process-actions"));if(!o&&u&&u.length&&(o=u[0]),!o)throw new Error(t("no diagram to display"));l(o);var f=o.plane;if(!f)throw new Error(t("no plane for {element}",{element:Be(o)}));var m=f.bpmnElement;if(!m){if(!(m=function(e){return Object(P.f)(e.rootElements,(function(e){return Fe(e,"bpmn:Process-action")||Fe(e,"bpmn:Collaboration")}))}(i)))throw new Error(t("no process or collaboration to display"));c(t("correcting missing bpmnElement on {plane} to {rootElement}",{plane:Be(f),rootElement:Be(m)})),f.bpmnElement=m,s(f)}var b,v=function(t,n){return e.root(t,n)}(m,f);if(Fe(m,"bpmn:Process-action"))d(m,v);else{if(!Fe(m,"bpmn:Collaboration"))throw new Error(t("unsupported bpmnElement for {plane}: {rootElement}",{plane:Be(f),rootElement:Be(m)}));b=m,Object(P.i)(b.participants,a(k)),y(b.artifacts),r.push((function(){var e,t;e=b.messageFlows,Object(P.i)(e,a(h,t))})),function(e,t){Object(P.e)(e,(function(e){return!n[e.id]&&Fe(e,"bpmn:Process-action")&&e.laneSets})).forEach(a(d,t))}(i.rootElements,v)}p()},handleLoop:x,registerDi:s}}function Ve(e){e=Object(P.a)({},Ge,e),this._moddle=this._createModdle(e),this._container=this._createContainer(e),this._init(this._container,this._moddle,e)}L()(Ve,A.a),Ve.prototype.importXML=function(e,t,n){Object(P.n)(t)&&(n=t,t=null),n=n||function(){};var r=this;e=this._emit("import.parse.start",{xml:e})||e,this._moddle.fromXML(e,"bpmn:Process-actions",(function(e,a,i){a=r._emit("import.parse.complete",{error:e,definitions:a,context:i})||a;var o=i.warnings;if(e)return e=function(e){var t=/unparsable content <([^>]+)> detected([\s\S]*)$/.exec(e.message);t&&(e.message="unparsable content <"+t[1]+"> detected; this may indicate an invalid BPMN 2.0 diagram file"+t[2]);return e}(e),r._emit("import.done",{error:e,warnings:o}),n(e,o);r.importDefinitions(a,t,(function(e,t){var a=[].concat(o,t||[]);r._emit("import.done",{error:e,warnings:a}),n(e,a)}))}))},Ve.prototype.importDefinitions=function(e,t,n){return Object(P.n)(t)&&(n=t,t=null),n=n||function(){},this._setDefinitions(e),this.open(t,n)},Ve.prototype.open=function(e,t){Object(P.n)(e)&&(t=e,e=null);var n=this._definitions,r=e;if(t=t||function(){},!n)return t(new Error("no XML imported"));if("string"===typeof e&&!(r=function(e,t){if(!t)return null;return Object(P.f)(e.diagrams,(function(e){return e.id===t}))||null}(n,e)))return t(new Error("BPMNDiagram <"+e+"> not found"));try{this.clear()}catch(a){return t(a)}return function(e,t,n,r){var a,i,o;Object(P.n)(n)&&(r=n,n=null);var c,s=[];try{a=e.get("bpmnImporter"),i=e.get("eventBus"),o=e.get("translate"),i.fire("import.render.start",{definitions:t}),function(e,t){new Ie({root:function(e){return a.add(e)},element:function(e,t){return a.add(e,t)},error:function(e,t){s.push({message:e,context:t})}},o).handleDefinitions(e,t)}(t,n),i.fire("import.render.complete",{error:c,warnings:s})}catch(l){c=l}r(c,s)}(this,n,r,t)},Ve.prototype.saveXML=function(e,t){t||(t=e,e={});var n=this,r=this._definitions;if(!r)return t(new Error("no definitions loaded"));r=this._emit("saveXML.start",{definitions:r})||r,this._moddle.toXML(r,e,(function(e,r){try{r=n._emit("saveXML.serialized",{error:e,xml:r})||r,n._emit("saveXML.done",{error:e,xml:r})}catch(a){console.error("error in saveXML life-cycle listener",a)}t(e,r)}))},Ve.prototype.saveSVG=function(e,t){var n,r;t||(t=e,e={}),this._emit("saveSVG.start");try{var a=this.get("canvas"),i=a.getDefaultLayer(),o=Object(T.i)("defs",a._svg),c=Object(M.i)(i),s=o?"<defs>"+Object(M.i)(o)+"</defs>":"",l=i.getBBox();n='<?xml version="1.0" encoding="utf-8"?>\n\x3c!-- created with bpmn-js / http://bpmn.io --\x3e\n<!DOCTYPE svg PUBLIC "-//W3C//DTD SVG 1.1//EN" "http://www.w3.org/Graphics/SVG/1.1/DTD/svg11.dtd">\n<svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" width="'+l.width+'" height="'+l.height+'" viewBox="'+l.x+" "+l.y+" "+l.width+" "+l.height+'" version="1.1">'+s+c+"</svg>"}catch(u){r=u}this._emit("saveSVG.done",{error:r,svg:n}),t(r,n)},Ve.prototype._setDefinitions=function(e){this._definitions=e},Ve.prototype.getModules=function(){return this._modules},Ve.prototype.clear=function(){this.getDefinitions()&&(this.get("elementRegistry").forEach((function(e){var t=e.businessObject;t&&t.di&&delete t.di})),A.a.prototype.clear.call(this))},Ve.prototype.destroy=function(){A.a.prototype.destroy.call(this),Object(T.k)(this._container)},Ve.prototype.on=function(e,t,n,r){return this.get("eventBus").on(e,t,n,r)},Ve.prototype.off=function(e,t){this.get("eventBus").off(e,t)},Ve.prototype.attachTo=function(e){if(!e)throw new Error("parentNode required");this.detach(),e.get&&e.constructor.prototype.jquery&&(e=e.get(0)),"string"===typeof e&&(e=Object(T.i)(e)),e.appendChild(this._container),this._emit("attach",{}),this.get("canvas").resized()},Ve.prototype.getDefinitions=function(){return this._definitions},Ve.prototype.detach=function(){var e=this._container,t=e.parentNode;t&&(this._emit("detach",{}),t.removeChild(e))},Ve.prototype._init=function(e,t,n){var r=n.modules||this.getModules(),a=n.additionalModules||[],i=[].concat([{bpmnjs:["value",this],moddle:["value",t]}],r,a),o=Object(P.a)(Object(P.w)(n,["additionalModules"]),{canvas:Object(P.a)({},n.canvas,{container:e}),modules:i});A.a.call(this,o),n&&n.container&&this.attachTo(n.container)},Ve.prototype._emit=function(e,t){return this.get("eventBus").fire(e,t)},Ve.prototype._createContainer=function(e){var t=Object(T.f)('<div class="bjs-container"></div>');return Object(P.a)(t.style,{width:We(e.width),height:We(e.height),position:e.position}),t},Ve.prototype._createModdle=function(e){var t=Object(P.a)({},this._moddleExtensions,e.moddleExtensions);return new Ae(t)},Ve.prototype._modules=[];var Ge={width:"100%",height:"100%",position:"relative"};function We(e){return e+(Object(P.p)(e)?"px":"")}function $e(e){Ve.call(this,e),this.on("import.parse.complete",(function(e){e.error||this._collectIds(e.definitions,e.context)}),this),this.on("diagram.destroy",(function(){this.get("moddle").ids.clear()}),this)}L()($e,Ve),$e.prototype._createModdle=function(e){var t=Ve.prototype._createModdle.call(this,e);return t.ids=new C.a([32,36,1]),t},$e.prototype._collectIds=function(e,t){var n,r=e.$model.ids;for(n in r.clear(),t.elementsById)r.claim(n,t.elementsById[n])};var ze=n(141),Ke=n(60),qe=n(33);function He(e,t){var n=Ue(e);return n&&"function"===typeof n.$instanceOf&&n.$instanceOf(t)}function Ue(e){return e&&e.businessObject||e}function Ye(e){return!He(e,"bpmn:CallActivity")&&(He(e,"bpmn:Loop")||He(e,"bpmn:Conditional")?!!Ue(e).di.isExpanded:!He(e,"bpmn:Participant")||!!Ue(e).processRef)}function Je(e){return e&&!!Ue(e).triggeredByEvent}function Xe(e,t){var n=Ue(e),r=!1;return n.eventDefinitions&&Object(P.i)(n.eventDefinitions,(function(e){He(e,t)&&(r=!0)})),r}function Qe(e){return He(e,"bpmn:FlowElement")||He(e,"bpmn:Participant")||He(e,"bpmn:Lane")||He(e,"bpmn:SequenceFlow")||He(e,"bpmn:MessageFlow")||He(e,"bpmn:DataInput")||He(e,"bpmn:DataOutput")?"name":He(e,"bpmn:TextAnnotation")?"text":He(e,"bpmn:Group")?"categoryValueRef":void 0}function Ze(e){var t=e.businessObject,n=Qe(t);if(n)return"categoryValueRef"===n?function(e){var t=e.categoryValueRef;return t&&t.value||""}(t):t[n]||""}function et(e,t,n){return Object(P.A)(e.eventDefinitions,(function(r){return r.$type===t&&function(e,t){return Object(P.d)(t,(function(t,n){return e[n]===t}))}(e,n)}))}function tt(e){return e.businessObject.di}function nt(e){return e.businessObject}function rt(e,t){return tt(e).get("bioc:fill")||t||"white"}function at(e,t){return tt(e).get("bioc:stroke")||t||"black"}var it=new C.a,ot=.95;function ct(e,t,n,r,a,i,o){ze.a.call(this,t,o);var c=e&&e.defaultFillColor,s=e&&e.defaultStrokeColor,l=it.next(),u={},p=n.computeStyle;function d(e,t){var n=Object(P.a)({fill:"black",strokeWidth:1,strokeLinecap:"round",strokeDasharray:"none"},t.attrs),r=t.ref||{x:0,y:0},i=t.scale||1;"none"===n.strokeDasharray&&(n.strokeDasharray=[1e4,1]);var o=Object(M.f)("marker");Object(M.b)(t.element,n),Object(M.a)(o,t.element),Object(M.b)(o,{id:e,viewBox:"0 0 20 20",refX:r.x,refY:r.y,markerWidth:20*i,markerHeight:20*i,orient:"auto"});var c=Object(T.i)("defs",a._svg);c||(c=Object(M.f)("defs"),Object(M.a)(a._svg,c)),Object(M.a)(c,o),u[e]=o}function h(e){return e.replace(/[^0-9a-zA-z]+/g,"_")}function f(e,t,n){var r=e+"-"+h(t)+"-"+h(n)+"-"+l;return u[r]||function(e,t,n,r){if("sequenceflow-end"===t){var a=Object(M.f)("path");Object(M.b)(a,{d:"M 1 5 L 11 10 L 1 15 Z"}),d(e,{element:a,ref:{x:11,y:10},scale:.5,attrs:{fill:r,stroke:r}})}if("messageflow-start"===t){var i=Object(M.f)("circle");Object(M.b)(i,{cx:6,cy:6,r:3.5}),d(e,{element:i,attrs:{fill:n,stroke:r},ref:{x:6,y:6}})}if("messageflow-end"===t){var o=Object(M.f)("path");Object(M.b)(o,{d:"m 1 5 l 0 -3 l 7 3 l -7 3 z"}),d(e,{element:o,attrs:{fill:n,stroke:r,strokeLinecap:"butt"},ref:{x:8.5,y:5}})}if("association-start"===t){var c=Object(M.f)("path");Object(M.b)(c,{d:"M 11 5 L 1 10 L 11 15"}),d(e,{element:c,attrs:{fill:"none",stroke:r,strokeWidth:1.5},ref:{x:1,y:10},scale:.5})}if("association-end"===t){var s=Object(M.f)("path");Object(M.b)(s,{d:"M 1 5 L 11 10 L 1 15"}),d(e,{element:s,attrs:{fill:"none",stroke:r,strokeWidth:1.5},ref:{x:12,y:10},scale:.5})}if("conditional-flow-marker"===t){var l=Object(M.f)("path");Object(M.b)(l,{d:"M 0 10 L 8 6 L 16 10 L 8 14 Z"}),d(e,{element:l,attrs:{fill:n,stroke:r},ref:{x:-1,y:10},scale:.5})}if("conditional-default-flow-marker"===t){var u=Object(M.f)("path");Object(M.b)(u,{d:"M 6 4 L 10 16"}),d(e,{element:u,attrs:{stroke:r},ref:{x:0,y:10},scale:.5})}}(r,e,t,n),"url(#"+r+")"}function m(e,t,n,r,a){Object(P.q)(r)&&(a=r,r=0),r=r||0,"none"===(a=p(a,{stroke:"black",strokeWidth:2,fill:"white"})).fill&&delete a.fillOpacity;var i=t/2,o=n/2,c=Object(M.f)("circle");return Object(M.b)(c,{cx:i,cy:o,r:Math.round((t+n)/4-r)}),Object(M.b)(c,a),Object(M.a)(e,c),c}function b(e,t,n,r,a,i){Object(P.q)(a)&&(i=a,a=0),a=a||0,i=p(i,{stroke:"black",strokeWidth:2,fill:"white"});var o=Object(M.f)("rect");return Object(M.b)(o,{x:a,y:a,width:t-2*a,height:n-2*a,rx:r,ry:r}),Object(M.b)(o,i),Object(M.a)(e,o),o}function v(e,t,n){n=p(n,["no-fill"],{stroke:"black",strokeWidth:2,fill:"none"});var r=Object(Ke.b)(t,n);return Object(M.a)(e,r),r}function y(e,t,n){n=p(n,["no-fill"],{strokeWidth:2,stroke:"black"});var r=Object(M.f)("path");return Object(M.b)(r,{d:t}),Object(M.b)(r,n),Object(M.a)(e,r),r}function g(e,t,n,r){return y(t,n,Object(P.a)({"data-marker":e},r))}function x(e){return function(t,n){return S[e](t,n)}}function j(e){return S[e]}function w(e,t){var n=nt(e),r=function(e){return"bpmn:IntermediateThrowEvent"===e.$type||"bpmn:EndEvent"===e.$type}(n);return n.eventDefinitions&&n.eventDefinitions.length>1?n.parallelMultiple?j("bpmn:ParallelMultipleEventDefinition")(t,e,r):j("bpmn:MultipleEventDefinition")(t,e,r):et(n,"bpmn:MessageEventDefinition")?j("bpmn:MessageEventDefinition")(t,e,r):et(n,"bpmn:TimerEventDefinition")?j("bpmn:TimerEventDefinition")(t,e,r):et(n,"bpmn:ConditionalEventDefinition")?j("bpmn:ConditionalEventDefinition")(t,e):et(n,"bpmn:SignalEventDefinition")?j("bpmn:SignalEventDefinition")(t,e,r):et(n,"bpmn:EscalationEventDefinition")?j("bpmn:EscalationEventDefinition")(t,e,r):et(n,"bpmn:LinkEventDefinition")?j("bpmn:LinkEventDefinition")(t,e,r):et(n,"bpmn:ErrorEventDefinition")?j("bpmn:ErrorEventDefinition")(t,e,r):et(n,"bpmn:CancelEventDefinition")?j("bpmn:CancelEventDefinition")(t,e,r):et(n,"bpmn:CompensateEventDefinition")?j("bpmn:CompensateEventDefinition")(t,e,r):et(n,"bpmn:TerminateEventDefinition")?j("bpmn:TerminateEventDefinition")(t,e,r):null}function O(e,t,n){n=Object(P.a)({size:{width:100}},n);var r=i.createText(t||"",n);return Object(M.c)(r).add("djs-label"),Object(M.a)(e,r),r}function E(e,t,n){return O(e,nt(t).name,{box:t,align:n,padding:5,style:{fill:at(t,s)}})}function N(e,t,n){var r=O(e,t,{box:{height:30,width:n.height},align:"center-middle",style:{fill:at(n,s)}}),a=-1*n.height;Object(qe.b)(r,0,-a,270)}function k(e){for(var t=e.waypoints,n="m  "+t[0].x+","+t[0].y,r=1;r<t.length;r++)n+="L"+t[r].x+","+t[r].y+" ";return n}var S=this.handlers={"bpmn:Event":function(e,t,n){return"fillOpacity"in n||(n.fillOpacity=ot),m(e,t.width,t.height,n)},"bpmn:StartEvent":function(e,t){var n={fill:rt(t,c),stroke:at(t,s)};nt(t).isInterrupting||(n={strokeDasharray:"6",strokeLinecap:"round",fill:rt(t,c),stroke:at(t,s)});var r=j("bpmn:Event")(e,t,n);return w(t,e),r},"bpmn:MessageEventDefinition":function(e,t,n){return y(e,r.getScaledPath("EVENT_MESSAGE",{xScaleFactor:.9,yScaleFactor:.9,containerWidth:t.width,containerHeight:t.height,position:{mx:.235,my:.315}}),{strokeWidth:1,fill:n?at(t,s):rt(t,c),stroke:n?rt(t,c):at(t,s)})},"bpmn:TimerEventDefinition":function(e,t){var n=m(e,t.width,t.height,.2*t.height,{strokeWidth:2,fill:rt(t,c),stroke:at(t,s)});y(e,r.getScaledPath("EVENT_TIMER_WH",{xScaleFactor:.75,yScaleFactor:.75,containerWidth:t.width,containerHeight:t.height,position:{mx:.5,my:.5}}),{strokeWidth:2,strokeLinecap:"square",stroke:at(t,s)});for(var a=0;a<12;a++){var i=r.getScaledPath("EVENT_TIMER_LINE",{xScaleFactor:.75,yScaleFactor:.75,containerWidth:t.width,containerHeight:t.height,position:{mx:.5,my:.5}}),o=t.width/2;y(e,i,{strokeWidth:1,strokeLinecap:"square",transform:"rotate("+30*a+","+t.height/2+","+o+")",stroke:at(t,s)})}return n},"bpmn:EscalationEventDefinition":function(e,t,n){return y(e,r.getScaledPath("EVENT_ESCALATION",{xScaleFactor:1,yScaleFactor:1,containerWidth:t.width,containerHeight:t.height,position:{mx:.5,my:.2}}),{strokeWidth:1,fill:n?at(t,s):"none",stroke:at(t,s)})},"bpmn:ConditionalEventDefinition":function(e,t){return y(e,r.getScaledPath("EVENT_CONDITIONAL",{xScaleFactor:1,yScaleFactor:1,containerWidth:t.width,containerHeight:t.height,position:{mx:.5,my:.222}}),{strokeWidth:1,stroke:at(t,s)})},"bpmn:LinkEventDefinition":function(e,t,n){return y(e,r.getScaledPath("EVENT_LINK",{xScaleFactor:1,yScaleFactor:1,containerWidth:t.width,containerHeight:t.height,position:{mx:.57,my:.263}}),{strokeWidth:1,fill:n?at(t,s):"none",stroke:at(t,s)})},"bpmn:ErrorEventDefinition":function(e,t,n){return y(e,r.getScaledPath("EVENT_ERROR",{xScaleFactor:1.1,yScaleFactor:1.1,containerWidth:t.width,containerHeight:t.height,position:{mx:.2,my:.722}}),{strokeWidth:1,fill:n?at(t,s):"none",stroke:at(t,s)})},"bpmn:CancelEventDefinition":function(e,t,n){var a=y(e,r.getScaledPath("EVENT_CANCEL_45",{xScaleFactor:1,yScaleFactor:1,containerWidth:t.width,containerHeight:t.height,position:{mx:.638,my:-.055}}),{strokeWidth:1,fill:n?at(t,s):"none",stroke:at(t,s)});return Object(qe.a)(a,45),a},"bpmn:CompensateEventDefinition":function(e,t,n){return y(e,r.getScaledPath("EVENT_COMPENSATION",{xScaleFactor:1,yScaleFactor:1,containerWidth:t.width,containerHeight:t.height,position:{mx:.22,my:.5}}),{strokeWidth:1,fill:n?at(t,s):"none",stroke:at(t,s)})},"bpmn:SignalEventDefinition":function(e,t,n){return y(e,r.getScaledPath("EVENT_SIGNAL",{xScaleFactor:.9,yScaleFactor:.9,containerWidth:t.width,containerHeight:t.height,position:{mx:.5,my:.2}}),{strokeWidth:1,fill:n?at(t,s):"none",stroke:at(t,s)})},"bpmn:MultipleEventDefinition":function(e,t,n){return y(e,r.getScaledPath("EVENT_MULTIPLE",{xScaleFactor:1.1,yScaleFactor:1.1,containerWidth:t.width,containerHeight:t.height,position:{mx:.222,my:.36}}),{strokeWidth:1,fill:n?at(t,s):"none"})},"bpmn:ParallelMultipleEventDefinition":function(e,t){return y(e,r.getScaledPath("EVENT_PARALLEL_MULTIPLE",{xScaleFactor:1.2,yScaleFactor:1.2,containerWidth:t.width,containerHeight:t.height,position:{mx:.458,my:.194}}),{strokeWidth:1,fill:at(t,s),stroke:at(t,s)})},"bpmn:EndEvent":function(e,t){var n=j("bpmn:Event")(e,t,{strokeWidth:4,fill:rt(t,c),stroke:at(t,s)});return w(t,e),n},"bpmn:TerminateEventDefinition":function(e,t){return m(e,t.width,t.height,8,{strokeWidth:4,fill:at(t,s),stroke:at(t,s)})},"bpmn:IntermediateEvent":function(e,t){var n=j("bpmn:Event")(e,t,{strokeWidth:1,fill:rt(t,c),stroke:at(t,s)});return m(e,t.width,t.height,3,{strokeWidth:1,fill:rt(t,"none"),stroke:at(t,s)}),w(t,e),n},"bpmn:IntermediateCatchEvent":x("bpmn:IntermediateEvent"),"bpmn:IntermediateThrowEvent":x("bpmn:IntermediateEvent"),"bpmn:Activity":function(e,t,n){return"fillOpacity"in(n=n||{})||(n.fillOpacity=ot),b(e,t.width,t.height,10,n)},"bpmn:Task":function(e,t){var n={fill:rt(t,c),stroke:at(t,s)},r=j("bpmn:Activity")(e,t,n);return E(e,t,"center-middle"),_(e,t),r},"bpmn:Mapper":function(e,t){var n={fill:rt(t,c),stroke:at(t,s)},r=j("bpmn:Activity")(e,t,n);return E(e,t,"center-middle"),_(e,t),r},"bpmn:Function":function(e,t){var n={fill:rt(t,c),stroke:"#00b0ff"},r=j("bpmn:Activity")(e,t,n);return E(e,t,"center-middle"),_(e,t),r},"bpmn:ServiceTask":function(e,t){var n=j("bpmn:Task")(e,t);return y(e,r.getScaledPath("TASK_TYPE_SERVICE",{abspos:{x:12,y:18}}),{strokeWidth:1,fill:rt(t,c),stroke:at(t,s)}),y(e,r.getScaledPath("TASK_TYPE_SERVICE_FILL",{abspos:{x:17.2,y:18}}),{strokeWidth:0,fill:rt(t,c)}),y(e,r.getScaledPath("TASK_TYPE_SERVICE",{abspos:{x:17,y:22}}),{strokeWidth:1,fill:rt(t,c),stroke:at(t,s)}),n},"bpmn:UserTask":function(e,t){var n=j("bpmn:Task")(e,t);return y(e,r.getScaledPath("TASK_TYPE_USER_1",{abspos:{x:15,y:12}}),{strokeWidth:.5,fill:rt(t,c),stroke:at(t,s)}),y(e,r.getScaledPath("TASK_TYPE_USER_2",{abspos:{x:15,y:12}}),{strokeWidth:.5,fill:rt(t,c),stroke:at(t,s)}),y(e,r.getScaledPath("TASK_TYPE_USER_3",{abspos:{x:15,y:12}}),{strokeWidth:.5,fill:at(t,s),stroke:at(t,s)}),n},"bpmn:ManualTask":function(e,t){var n=j("bpmn:Task")(e,t);return y(e,r.getScaledPath("TASK_TYPE_MANUAL",{abspos:{x:17,y:15}}),{strokeWidth:.5,fill:rt(t,c),stroke:at(t,s)}),n},"bpmn:SendTask":function(e,t){var n=j("bpmn:Task")(e,t);return y(e,r.getScaledPath("TASK_TYPE_SEND",{xScaleFactor:1,yScaleFactor:1,containerWidth:21,containerHeight:14,position:{mx:.285,my:.357}}),{strokeWidth:1,fill:at(t,s),stroke:rt(t,c)}),n},"bpmn:ReceiveTask":function(e,t){var n,a=nt(t),i=j("bpmn:Task")(e,t);return a.instantiate?(m(e,28,28,4.4,{strokeWidth:1}),n=r.getScaledPath("TASK_TYPE_INSTANTIATING_SEND",{abspos:{x:7.77,y:9.52}})):n=r.getScaledPath("TASK_TYPE_SEND",{xScaleFactor:.9,yScaleFactor:.9,containerWidth:21,containerHeight:14,position:{mx:.3,my:.4}}),y(e,n,{strokeWidth:1,fill:rt(t,c),stroke:at(t,s)}),i},"bpmn:ScriptTask":function(e,t){var n=j("bpmn:Task")(e,t);return y(e,r.getScaledPath("TASK_TYPE_SCRIPT",{abspos:{x:15,y:20}}),{strokeWidth:1,stroke:at(t,s)}),n},"bpmn:BusinessRuleTask":function(e,t){var n=j("bpmn:Task")(e,t),a=y(e,r.getScaledPath("TASK_TYPE_BUSINESS_RULE_HEADER",{abspos:{x:8,y:8}}));Object(M.b)(a,{strokeWidth:1,fill:rt(t,"#aaaaaa"),stroke:at(t,s)});var i=y(e,r.getScaledPath("TASK_TYPE_BUSINESS_RULE_MAIN",{abspos:{x:8,y:8}}));return Object(M.b)(i,{strokeWidth:1,stroke:at(t,s)}),n},"bpmn:Loop":function(e,t,n){n=Object(P.a)({fill:rt(t,c),stroke:at(t,s)},n);var r=j("bpmn:Activity")(e,t,n);return Je(t)&&Object(M.b)(r,{strokeDasharray:"1,2"}),E(e,t,"center-top"),_(e,t,["LoopProcessMarker"]),r},"bpmn:Conditional":function(e,t,n){n=Object(P.a)({fill:rt(t,c),stroke:at(t,s)},n);var r=j("bpmn:Activity")(e,t,n);return Je(t)&&Object(M.b)(r,{strokeDasharray:"1,2"}),E(e,t,"center-top"),_(e,t,["ConditionalMarker"]),r},"bpmn:AdHocSubProcess":function(e,t){return j("bpmn:Loop")(e,t)},"bpmn:Transaction":function(e,t){var r=j("bpmn:Loop")(e,t),a=n.style(["no-fill","no-events"],{stroke:at(t,s)});return b(e,t.width,t.height,8,3,a),r},"bpmn:CallActivity":function(e,t){return j("bpmn:Loop")(e,t,{strokeWidth:5})},"bpmn:Participant":function(e,t){var n={fillOpacity:ot,fill:rt(t,c),stroke:at(t,s)},r=j("bpmn:Lane")(e,t,n);Ye(t)?(v(e,[{x:30,y:0},{x:30,y:t.height}],{stroke:at(t,s)}),N(e,nt(t).name,t)):O(e,nt(t).name,{box:t,align:"center-middle",style:{fill:at(t,s)}});return!!nt(t).participantMultiplicity&&j("ParticipantMultiplicityMarker")(e,t),r},"bpmn:Lane":function(e,t,n){var r=b(e,t.width,t.height,0,Object(P.a)({fill:rt(t,c),fillOpacity:.35,stroke:at(t,s)},n)),a=nt(t);"bpmn:Lane"===a.$type&&N(e,a.name,t);return r},"bpmn:InclusiveGateway":function(e,t){var n=j("bpmn:Gateway")(e,t);return m(e,t.width,t.height,.24*t.height,{strokeWidth:2.5,fill:rt(t,c),stroke:at(t,s)}),n},"bpmn:ExclusiveGateway":function(e,t){var n=j("bpmn:Gateway")(e,t),a=r.getScaledPath("GATEWAY_EXCLUSIVE",{xScaleFactor:.4,yScaleFactor:.4,containerWidth:t.width,containerHeight:t.height,position:{mx:.32,my:.3}});return tt(t).isMarkerVisible&&y(e,a,{strokeWidth:1,fill:at(t,s),stroke:at(t,s)}),n},"bpmn:Query":function(e,t){var n=j("bpmn:Gateway")(e,t),a=r.getScaledPath("GATEWAY_EXCLUSIVE",{xScaleFactor:.4,yScaleFactor:.4,containerWidth:t.width,containerHeight:t.height,position:{mx:.32,my:.3}});return tt(t).isMarkerVisible&&y(e,a,{strokeWidth:1,fill:at(t,s),stroke:at(t,s)}),n},"bpmn:ComplexGateway":function(e,t){var n=j("bpmn:Gateway")(e,t);return y(e,r.getScaledPath("GATEWAY_COMPLEX",{xScaleFactor:.5,yScaleFactor:.5,containerWidth:t.width,containerHeight:t.height,position:{mx:.46,my:.26}}),{strokeWidth:1,fill:at(t,s),stroke:at(t,s)}),n},"bpmn:ParallelGateway":function(e,t){var n=j("bpmn:Gateway")(e,t);return y(e,r.getScaledPath("GATEWAY_PARALLEL",{xScaleFactor:.6,yScaleFactor:.6,containerWidth:t.width,containerHeight:t.height,position:{mx:.46,my:.2}}),{strokeWidth:1,fill:at(t,s),stroke:at(t,s)}),n},"bpmn:EventBasedGateway":function(e,t){var n=nt(t),a=j("bpmn:Gateway")(e,t);m(e,t.width,t.height,.2*t.height,{strokeWidth:1,fill:"none",stroke:at(t,s)});var i=n.eventGatewayType,o=!!n.instantiate;if("Parallel"===i){var c=r.getScaledPath("GATEWAY_PARALLEL",{xScaleFactor:.4,yScaleFactor:.4,containerWidth:t.width,containerHeight:t.height,position:{mx:.474,my:.296}}),l=y(e,c);Object(M.b)(l,{strokeWidth:1,fill:"none"})}else if("Exclusive"===i){if(!o){var u=m(e,t.width,t.height,.26*t.height);Object(M.b)(u,{strokeWidth:1,fill:"none",stroke:at(t,s)})}!function(){var n=r.getScaledPath("GATEWAY_EVENT_BASED",{xScaleFactor:.18,yScaleFactor:.18,containerWidth:t.width,containerHeight:t.height,position:{mx:.36,my:.44}}),a={strokeWidth:2,fill:rt(t,"none"),stroke:at(t,s)};y(e,n,a)}()}return a},"bpmn:Gateway":function(e,t){var n={fill:rt(t,c),fillOpacity:ot,stroke:at(t,s)};return function(e,t,n,r){var a=t/2,i=n/2,o=[{x:a,y:0},{x:t,y:i},{x:a,y:n},{x:0,y:i}].map((function(e){return e.x+","+e.y})).join(" ");r=p(r,{stroke:"black",strokeWidth:2,fill:"white"});var c=Object(M.f)("polygon");return Object(M.b)(c,{points:o}),Object(M.b)(c,r),Object(M.a)(e,c),c}(e,t.width,t.height,n)},"bpmn:SequenceFlow":function(e,t){var n,r=k(t),a=rt(t,c),i=at(t,s),o=y(e,r,{strokeLinejoin:"round",markerEnd:f("sequenceflow-end",a,i),stroke:at(t,s)}),l=nt(t);return t.source&&(n=t.source.businessObject,l.conditionExpression&&n.$instanceOf("bpmn:Activity")&&Object(M.b)(o,{markerStart:f("conditional-flow-marker",a,i)}),n.default&&(n.$instanceOf("bpmn:Gateway")||n.$instanceOf("bpmn:Activity"))&&n.default===l&&Object(M.b)(o,{markerStart:f("conditional-default-flow-marker",a,i)})),o},"bpmn:Association":function(e,t,n){var r=nt(t),a=rt(t,c),i=at(t,s);return n=Object(P.a)({strokeDasharray:"0.5, 5",strokeLinecap:"round",strokeLinejoin:"round",stroke:at(t,s)},n||{}),"One"!==r.associationDirection&&"Both"!==r.associationDirection||(n.markerEnd=f("association-end",a,i)),"Both"===r.associationDirection&&(n.markerStart=f("association-start",a,i)),v(e,t.waypoints,n)},"bpmn:DataInputAssociation":function(e,t){var n=rt(t,c),r=at(t,s);return j("bpmn:Association")(e,t,{markerEnd:f("association-end",n,r)})},"bpmn:DataOutputAssociation":function(e,t){var n=rt(t,c),r=at(t,s);return j("bpmn:Association")(e,t,{markerEnd:f("association-end",n,r)})},"bpmn:MessageFlow":function(e,t){var n=nt(t),a=tt(t),i=rt(t,c),o=at(t,s),l=y(e,k(t),{markerEnd:f("messageflow-end",i,o),markerStart:f("messageflow-start",i,o),strokeDasharray:"10, 12",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"1.5px",stroke:at(t,s)});if(n.messageRef){var u=l.getPointAtLength(l.getTotalLength()/2),p=r.getScaledPath("MESSAGE_FLOW_MARKER",{abspos:{x:u.x,y:u.y}}),d={strokeWidth:1};"initiating"===a.messageVisibleKind?(d.fill="white",d.stroke="black"):(d.fill="#888",d.stroke="white"),y(e,p,d)}return l},"bpmn:DataObject":function(e,t){var n=y(e,r.getScaledPath("DATA_OBJECT_PATH",{xScaleFactor:1,yScaleFactor:1,containerWidth:t.width,containerHeight:t.height,position:{mx:.474,my:.296}}),{fill:rt(t,c),fillOpacity:ot,stroke:at(t,s)});return function(e){var t=e.dataObjectRef;return e.isCollection||t&&t.isCollection}(nt(t))&&function(e,t){var n=(t.height-16)/t.height,a=r.getScaledPath("DATA_OBJECT_COLLECTION_PATH",{xScaleFactor:1,yScaleFactor:1,containerWidth:t.width,containerHeight:t.height,position:{mx:.451,my:n}});y(e,a,{strokeWidth:2})}(e,t),n},"bpmn:DataObjectReference":x("bpmn:DataObject"),"bpmn:DataInput":function(e,t){var n=r.getRawPath("DATA_ARROW"),a=j("bpmn:DataObject")(e,t);return y(e,n,{strokeWidth:1}),a},"bpmn:DataOutput":function(e,t){var n=r.getRawPath("DATA_ARROW"),a=j("bpmn:DataObject")(e,t);return y(e,n,{strokeWidth:1,fill:"black"}),a},"bpmn:DataStoreReference":function(e,t){return y(e,r.getScaledPath("DATA_STORE",{xScaleFactor:1,yScaleFactor:1,containerWidth:t.width,containerHeight:t.height,position:{mx:0,my:.133}}),{strokeWidth:2,fill:rt(t,c),fillOpacity:ot,stroke:at(t,s)})},"bpmn:BoundaryEvent":function(e,t){var n=nt(t).cancelActivity,r={strokeWidth:1,fill:rt(t,c),stroke:at(t,s)};n||(r.strokeDasharray="6",r.strokeLinecap="round");var a=Object(P.a)({},r,{fillOpacity:1}),i=Object(P.a)({},r,{fill:"none"}),o=j("bpmn:Event")(e,t,a);return m(e,t.width,t.height,3,i),w(t,e),o},"bpmn:Group":function(e,t){return b(e,t.width,t.height,10,{stroke:at(t,s),strokeWidth:1,strokeDasharray:"8,3,1,3",fill:"none",pointerEvents:"none"})},label:function(e,t){return function(e,t){var n={width:90,height:30,x:t.width/2+t.x,y:t.height/2+t.y};return O(e,Ze(t),{box:n,fitBox:!0,style:Object(P.a)({},i.getExternalStyle(),{fill:at(t,s)})})}(e,t)},"bpmn:TextAnnotation":function(e,t){var n=b(e,t.width,t.height,0,0,{fill:"none",stroke:"none"});return y(e,r.getScaledPath("TEXT_ANNOTATION",{xScaleFactor:1,yScaleFactor:1,containerWidth:t.width,containerHeight:t.height,position:{mx:0,my:0}}),{stroke:at(t,s)}),O(e,nt(t).text||"",{box:t,align:"left-top",padding:5,style:{fill:at(t,s)}}),n},ParticipantMultiplicityMarker:function(e,t){g("participant-multiplicity",e,r.getScaledPath("MARKER_PARALLEL",{xScaleFactor:1,yScaleFactor:1,containerWidth:t.width,containerHeight:t.height,position:{mx:t.width/2/t.width,my:(t.height-15)/t.height}}),{strokeWidth:1,fill:rt(t,c),stroke:at(t,s)})},SubProcessMarker:function(e,t){var n=b(e,14,14,0,{strokeWidth:1,fill:rt(t,c),stroke:at(t,s)});Object(qe.c)(n,t.width/2-7.5,t.height-20),g("sub-process",e,r.getScaledPath("MARKER_SUB_PROCESS",{xScaleFactor:1.5,yScaleFactor:1.5,containerWidth:t.width,containerHeight:t.height,position:{mx:(t.width/2-7.5)/t.width,my:(t.height-20)/t.height}}),{fill:rt(t,c),stroke:at(t,s)})},ConditionalMarker:function(e,t){var n=b(e,20,20,0,{strokeWidth:1,fill:rt(t,c),stroke:at(t,s)});Object(qe.c)(n,t.width/2-7.5,t.height-25),g("sub-process",e,r.getScaledPath("MARKER_CONDITIONAL",{xScaleFactor:1,yScaleFactor:1,containerWidth:t.width,containerHeight:t.height,position:{mx:(t.width/2-4.5)/t.width,my:(t.height-22)/t.height}}),{fill:rt(t,c),stroke:at(t,s)})},LoopProcessMarker:function(e,t,n){var a=b(e,20,20,0,{strokeWidth:1,fill:rt(t,c),stroke:at(t,s)});Object(qe.c)(a,t.width/2-7.5,t.height-25),g("loop",e,r.getScaledPath("MARKER_LOOP",{xScaleFactor:1,yScaleFactor:1,containerWidth:t.width,containerHeight:t.height,position:{mx:(t.width/2+n.loop+2)/t.width,my:(t.height-9)/t.height}}),{strokeWidth:1.5,fill:rt(t,c),stroke:at(t,s),strokeLinecap:"round",strokeMiterlimit:.5})},ParallelMarker:function(e,t,n){g("parallel",e,r.getScaledPath("MARKER_PARALLEL",{xScaleFactor:1,yScaleFactor:1,containerWidth:t.width,containerHeight:t.height,position:{mx:(t.width/2+n.parallel)/t.width,my:(t.height-20)/t.height}}),{fill:rt(t,c),stroke:at(t,s)})},SequentialMarker:function(e,t,n){g("sequential",e,r.getScaledPath("MARKER_SEQUENTIAL",{xScaleFactor:1,yScaleFactor:1,containerWidth:t.width,containerHeight:t.height,position:{mx:(t.width/2+n.seq)/t.width,my:(t.height-19)/t.height}}),{fill:rt(t,c),stroke:at(t,s)})},CompensationMarker:function(e,t,n){g("compensation",e,r.getScaledPath("MARKER_COMPENSATION",{xScaleFactor:1,yScaleFactor:1,containerWidth:t.width,containerHeight:t.height,position:{mx:(t.width/2+n.compensation)/t.width,my:(t.height-13)/t.height}}),{strokeWidth:1,fill:rt(t,c),stroke:at(t,s)})},LoopMarker:function(e,t,n){g("loop",e,r.getScaledPath("MARKER_LOOP",{xScaleFactor:1,yScaleFactor:1,containerWidth:t.width,containerHeight:t.height,position:{mx:(t.width/2+n.loop)/t.width,my:(t.height-7)/t.height}}),{strokeWidth:1,fill:rt(t,c),stroke:at(t,s),strokeLinecap:"round",strokeMiterlimit:.5})},AdhocMarker:function(e,t,n){g("adhoc",e,r.getScaledPath("MARKER_ADHOC",{xScaleFactor:1,yScaleFactor:1,containerWidth:t.width,containerHeight:t.height,position:{mx:(t.width/2+n.adhoc)/t.width,my:(t.height-15)/t.height}}),{strokeWidth:1,fill:at(t,s),stroke:at(t,s)})}};function _(e,t,n){var r,a=nt(t),i=n&&-1!==n.indexOf("SubProcessMarker");r=i?{seq:-21,parallel:-22,compensation:-42,loop:-18,adhoc:10}:{seq:-3,parallel:-6,compensation:-27,loop:0,adhoc:10},Object(P.i)(n,(function(n){j(n)(e,t,r)})),a.isForCompensation&&j("CompensationMarker")(e,t,r),"bpmn:AdHocSubProcess"===a.$type&&j("AdhocMarker")(e,t,r);var o=a.loopCharacteristics,c=o&&o.isSequential;o&&(void 0===c&&j("LoopMarker")(e,t,r),!1===c&&j("ParallelMarker")(e,t,r),!0===c&&j("SequentialMarker")(e,t,r))}this._drawPath=y}L()(ct,ze.a),ct.$inject=["config.bpmnRenderer","eventBus","styles","pathMap","canvas","textRenderer"],ct.prototype.canRender=function(e){return He(e,"bpmn:BaseElement")},ct.prototype.drawShape=function(e,t){var n=t.type;return(0,this.handlers[n])(e,t)},ct.prototype.drawConnection=function(e,t){var n=t.type;return(0,this.handlers[n])(e,t)},ct.prototype.getShapePath=function(e){return He(e,"bpmn:Event")?function(e){var t=e.x+e.width/2,n=e.y+e.height/2,r=e.width/2,a=[["M",t,n],["m",0,-r],["a",r,r,0,1,1,0,2*r],["a",r,r,0,1,1,0,-2*r],["z"]];return Object(Ke.a)(a)}(e):He(e,"bpmn:Activity")?function(e,t){var n=e.x,r=e.y,a=e.width,i=e.height,o=[["M",n+t,r],["l",a-2*t,0],["a",t,t,0,0,1,t,t],["l",0,i-2*t],["a",t,t,0,0,1,-t,t],["l",2*t-a,0],["a",t,t,0,0,1,-t,-t],["l",0,2*t-i],["a",t,t,0,0,1,t,-t],["z"]];return Object(Ke.a)(o)}(e,10):He(e,"bpmn:Gateway")?function(e){var t=e.width/2,n=e.height/2,r=[["M",e.x+t,e.y],["l",t,n],["l",-t,n],["l",-t,-n],["z"]];return Object(Ke.a)(r)}(e):function(e){var t=e.x,n=e.y,r=e.width,a=[["M",t,n],["l",r,0],["l",0,e.height],["l",-r,0],["z"]];return Object(Ke.a)(a)}(e)};var st=n(345);function lt(e){var t=Object(P.a)({fontFamily:"Arial, sans-serif",fontSize:12,fontWeight:"normal",lineHeight:1.2},e&&e.defaultStyle||{}),n=parseInt(t.fontSize,10)-1,r=Object(P.a)({},t,{fontSize:n},e&&e.externalStyle||{}),a=new st.a({style:t});this.getExternalLabelBounds=function(e,t){var n=a.getDimensions(t,{box:{width:90,height:30,x:e.width/2+e.x,y:e.height/2+e.y},style:r});return{x:Math.round(e.x+e.width/2-n.width/2),y:Math.round(e.y),width:Math.ceil(n.width),height:Math.ceil(n.height)}},this.getTextAnnotationBounds=function(e,n){var r=a.getDimensions(n,{box:e,style:t,align:"left-top",padding:5});return{x:e.x,y:e.y,width:e.width,height:Math.max(30,Math.round(r.height))}},this.createText=function(e,t){return a.createText(e,t||{})},this.getDefaultStyle=function(){return t},this.getExternalStyle=function(){return r}}lt.$inject=["config.textRenderer"];var ut=/\{([^}]+)\}/g,pt=/(?:(?:^|\.)(.+?)(?=\[|\.|$|\()|\[('|")(.+?)\2\])(\(\))?/g;var dt={__init__:["bpmnRenderer"],bpmnRenderer:["type",ct],textRenderer:["type",lt],pathMap:["type",function(){this.pathMap={EVENT_MESSAGE:{d:"m {mx},{my} l 0,{e.y1} l {e.x1},0 l 0,-{e.y1} z l {e.x0},{e.y0} l {e.x0},-{e.y0}",height:36,width:36,heightElements:[6,14],widthElements:[10.5,21]},EVENT_SIGNAL:{d:"M {mx},{my} l {e.x0},{e.y0} l -{e.x1},0 Z",height:36,width:36,heightElements:[18],widthElements:[10,20]},EVENT_ESCALATION:{d:"M {mx},{my} l {e.x0},{e.y0} l -{e.x0},-{e.y1} l -{e.x0},{e.y1} Z",height:36,width:36,heightElements:[20,7],widthElements:[8]},EVENT_CONDITIONAL:{d:"M {e.x0},{e.y0} l {e.x1},0 l 0,{e.y2} l -{e.x1},0 Z M {e.x2},{e.y3} l {e.x0},0 M {e.x2},{e.y4} l {e.x0},0 M {e.x2},{e.y5} l {e.x0},0 M {e.x2},{e.y6} l {e.x0},0 M {e.x2},{e.y7} l {e.x0},0 M {e.x2},{e.y8} l {e.x0},0 ",height:36,width:36,heightElements:[8.5,14.5,18,11.5,14.5,17.5,20.5,23.5,26.5],widthElements:[10.5,14.5,12.5]},EVENT_LINK:{d:"m {mx},{my} 0,{e.y0} -{e.x1},0 0,{e.y1} {e.x1},0 0,{e.y0} {e.x0},-{e.y2} -{e.x0},-{e.y2} z",height:36,width:36,heightElements:[4.4375,6.75,7.8125],widthElements:[9.84375,13.5]},EVENT_ERROR:{d:"m {mx},{my} {e.x0},-{e.y0} {e.x1},-{e.y1} {e.x2},{e.y2} {e.x3},-{e.y3} -{e.x4},{e.y4} -{e.x5},-{e.y5} z",height:36,width:36,heightElements:[.023,8.737,8.151,16.564,10.591,8.714],widthElements:[.085,6.672,6.97,4.273,5.337,6.636]},EVENT_CANCEL_45:{d:"m {mx},{my} -{e.x1},0 0,{e.x0} {e.x1},0 0,{e.y1} {e.x0},0 0,-{e.y1} {e.x1},0 0,-{e.y0} -{e.x1},0 0,-{e.y1} -{e.x0},0 z",height:36,width:36,heightElements:[4.75,8.5],widthElements:[4.75,8.5]},EVENT_COMPENSATION:{d:"m {mx},{my} {e.x0},-{e.y0} 0,{e.y1} z m {e.x1},-{e.y2} {e.x2},-{e.y3} 0,{e.y1} -{e.x2},-{e.y3} z",height:36,width:36,heightElements:[6.5,13,.4,6.1],widthElements:[9,9.3,8.7]},EVENT_TIMER_WH:{d:"M {mx},{my} l {e.x0},-{e.y0} m -{e.x0},{e.y0} l {e.x1},{e.y1} ",height:36,width:36,heightElements:[10,2],widthElements:[3,7]},EVENT_TIMER_LINE:{d:"M {mx},{my}  m {e.x0},{e.y0} l -{e.x1},{e.y1} ",height:36,width:36,heightElements:[10,3],widthElements:[0,0]},EVENT_MULTIPLE:{d:"m {mx},{my} {e.x1},-{e.y0} {e.x1},{e.y0} -{e.x0},{e.y1} -{e.x2},0 z",height:36,width:36,heightElements:[6.28099,12.56199],widthElements:[3.1405,9.42149,12.56198]},EVENT_PARALLEL_MULTIPLE:{d:"m {mx},{my} {e.x0},0 0,{e.y1} {e.x1},0 0,{e.y0} -{e.x1},0 0,{e.y1} -{e.x0},0 0,-{e.y1} -{e.x1},0 0,-{e.y0} {e.x1},0 z",height:36,width:36,heightElements:[2.56228,7.68683],widthElements:[2.56228,7.68683]},GATEWAY_EXCLUSIVE:{d:"m {mx},{my} {e.x0},{e.y0} {e.x1},{e.y0} {e.x2},0 {e.x4},{e.y2} {e.x4},{e.y1} {e.x2},0 {e.x1},{e.y3} {e.x0},{e.y3} {e.x3},0 {e.x5},{e.y1} {e.x5},{e.y2} {e.x3},0 z",height:17.5,width:17.5,heightElements:[8.5,6.5312,-6.5312,-8.5],widthElements:[6.5,-6.5,3,-3,5,-5]},GATEWAY_PARALLEL:{d:"m {mx},{my} 0,{e.y1} -{e.x1},0 0,{e.y0} {e.x1},0 0,{e.y1} {e.x0},0 0,-{e.y1} {e.x1},0 0,-{e.y0} -{e.x1},0 0,-{e.y1} -{e.x0},0 z",height:30,width:30,heightElements:[5,12.5],widthElements:[5,12.5]},GATEWAY_EVENT_BASED:{d:"m {mx},{my} {e.x0},{e.y0} {e.x0},{e.y1} {e.x1},{e.y2} {e.x2},0 z",height:11,width:11,heightElements:[-6,6,12,-12],widthElements:[9,-3,-12]},GATEWAY_COMPLEX:{d:"m {mx},{my} 0,{e.y0} -{e.x0},-{e.y1} -{e.x1},{e.y2} {e.x0},{e.y1} -{e.x2},0 0,{e.y3} {e.x2},0  -{e.x0},{e.y1} l {e.x1},{e.y2} {e.x0},-{e.y1} 0,{e.y0} {e.x3},0 0,-{e.y0} {e.x0},{e.y1} {e.x1},-{e.y2} -{e.x0},-{e.y1} {e.x2},0 0,-{e.y3} -{e.x2},0 {e.x0},-{e.y1} -{e.x1},-{e.y2} -{e.x0},{e.y1} 0,-{e.y0} -{e.x3},0 z",height:17.125,width:17.125,heightElements:[4.875,3.4375,2.125,3],widthElements:[3.4375,2.125,4.875,3]},DATA_OBJECT_PATH:{d:"m 0,0 {e.x1},0 {e.x0},{e.y0} 0,{e.y1} -{e.x2},0 0,-{e.y2} {e.x1},0 0,{e.y0} {e.x0},0",height:61,width:51,heightElements:[10,50,60],widthElements:[10,40,50,60]},DATA_OBJECT_COLLECTION_PATH:{d:"m {mx}, {my} m  0 15  l 0 -15 m  4 15  l 0 -15 m  4 15  l 0 -15 ",height:61,width:51,heightElements:[12],widthElements:[1,6,12,15]},DATA_ARROW:{d:"m 5,9 9,0 0,-3 5,5 -5,5 0,-3 -9,0 z",height:61,width:51,heightElements:[],widthElements:[]},DATA_STORE:{d:"m  {mx},{my} l  0,{e.y2} c  {e.x0},{e.y1} {e.x1},{e.y1}  {e.x2},0 l  0,-{e.y2} c -{e.x0},-{e.y1} -{e.x1},-{e.y1} -{e.x2},0c  {e.x0},{e.y1} {e.x1},{e.y1}  {e.x2},0 m  -{e.x2},{e.y0}c  {e.x0},{e.y1} {e.x1},{e.y1} {e.x2},0m  -{e.x2},{e.y0}c  {e.x0},{e.y1} {e.x1},{e.y1}  {e.x2},0",height:61,width:61,heightElements:[7,10,45],widthElements:[2,58,60]},TEXT_ANNOTATION:{d:"m {mx}, {my} m 10,0 l -10,0 l 0,{e.y0} l 10,0",height:30,width:10,heightElements:[30],widthElements:[10]},MARKER_SUB_PROCESS:{d:"m{mx},{my} m 7,2 l 0,10 m -5,-5 l 10,0",height:10,width:10,heightElements:[],widthElements:[]},MARKER_CONDITIONAL:{d:"m{mx},{my} m 2,4 l 10,0 m -10,3 l 10,0 m -10,3 l 10,0",height:10,width:10,heightElements:[],widthElements:[]},MARKER_PARALLEL:{d:"m{mx},{my} m 3,2 l 0,10 m 3,-10 l 0,10 m 3,-10 l 0,10",height:10,width:10,heightElements:[],widthElements:[]},MARKER_SEQUENTIAL:{d:"m{mx},{my} m 0,3 l 10,0 m -10,3 l 10,0 m -10,3 l 10,0",height:10,width:10,heightElements:[],widthElements:[]},MARKER_COMPENSATION:{d:"m {mx},{my} 7,-5 0,10 z m 7.1,-0.3 6.9,-4.7 0,10 -6.9,-4.7 z",height:10,width:21,heightElements:[],widthElements:[]},MARKER_LOOP:{d:"m {mx},{my} c 3.526979,0 6.386161,-2.829858 6.386161,-6.320661 0,-3.490806 -2.859182,-6.320661 -6.386161,-6.320661 -3.526978,0 -6.38616,2.829855 -6.38616,6.320661 0,1.745402 0.714797,3.325567 1.870463,4.469381 0.577834,0.571908 1.265885,1.034728 2.029916,1.35457 l -0.718163,-3.909793 m 0.718163,3.909793 -3.885211,0.802902",height:13.9,width:13.7,heightElements:[],widthElements:[]},MARKER_ADHOC:{d:"m {mx},{my} m 0.84461,2.64411 c 1.05533,-1.23780996 2.64337,-2.07882 4.29653,-1.97997996 2.05163,0.0805 3.85579,1.15803 5.76082,1.79107 1.06385,0.34139996 2.24454,0.1438 3.18759,-0.43767 0.61743,-0.33642 1.2775,-0.64078 1.7542,-1.17511 0,0.56023 0,1.12046 0,1.6807 -0.98706,0.96237996 -2.29792,1.62393996 -3.6918,1.66181996 -1.24459,0.0927 -2.46671,-0.2491 -3.59505,-0.74812 -1.35789,-0.55965 -2.75133,-1.33436996 -4.27027,-1.18121996 -1.37741,0.14601 -2.41842,1.13685996 -3.44288,1.96782996 z",height:4,width:15,heightElements:[],widthElements:[]},TASK_TYPE_SEND:{d:"m {mx},{my} l 0,{e.y1} l {e.x1},0 l 0,-{e.y1} z l {e.x0},{e.y0} l {e.x0},-{e.y0}",height:14,width:21,heightElements:[6,14],widthElements:[10.5,21]},TASK_TYPE_SCRIPT:{d:"m {mx},{my} c 9.966553,-6.27276 -8.000926,-7.91932 2.968968,-14.938 l -8.802728,0 c -10.969894,7.01868 6.997585,8.66524 -2.968967,14.938 z m -7,-12 l 5,0 m -4.5,3 l 4.5,0 m -3,3 l 5,0m -4,3 l 5,0",height:15,width:12.6,heightElements:[6,14],widthElements:[10.5,21]},TASK_TYPE_USER_1:{d:"m {mx},{my} c 0.909,-0.845 1.594,-2.049 1.594,-3.385 0,-2.554 -1.805,-4.62199999 -4.357,-4.62199999 -2.55199998,0 -4.28799998,2.06799999 -4.28799998,4.62199999 0,1.348 0.974,2.562 1.89599998,3.405 -0.52899998,0.187 -5.669,2.097 -5.794,4.7560005 v 6.718 h 17 v -6.718 c 0,-2.2980005 -5.5279996,-4.5950005 -6.0509996,-4.7760005 zm -8,6 l 0,5.5 m 11,0 l 0,-5"},TASK_TYPE_USER_2:{d:"m {mx},{my} m 2.162,1.009 c 0,2.4470005 -2.158,4.4310005 -4.821,4.4310005 -2.66499998,0 -4.822,-1.981 -4.822,-4.4310005 "},TASK_TYPE_USER_3:{d:"m {mx},{my} m -6.9,-3.80 c 0,0 2.25099998,-2.358 4.27399998,-1.177 2.024,1.181 4.221,1.537 4.124,0.965 -0.098,-0.57 -0.117,-3.79099999 -4.191,-4.13599999 -3.57499998,0.001 -4.20799998,3.36699999 -4.20699998,4.34799999 z"},TASK_TYPE_MANUAL:{d:"m {mx},{my} c 0.234,-0.01 5.604,0.008 8.029,0.004 0.808,0 1.271,-0.172 1.417,-0.752 0.227,-0.898 -0.334,-1.314 -1.338,-1.316 -2.467,-0.01 -7.886,-0.004 -8.108,-0.004 -0.014,-0.079 0.016,-0.533 0,-0.61 0.195,-0.042 8.507,0.006 9.616,0.002 0.877,-0.007 1.35,-0.438 1.353,-1.208 0.003,-0.768 -0.479,-1.09 -1.35,-1.091 -2.968,-0.002 -9.619,-0.013 -9.619,-0.013 v -0.591 c 0,0 5.052,-0.016 7.225,-0.016 0.888,-0.002 1.354,-0.416 1.351,-1.193 -0.006,-0.761 -0.492,-1.196 -1.361,-1.196 -3.473,-0.005 -10.86,-0.003 -11.0829995,-0.003 -0.022,-0.047 -0.045,-0.094 -0.069,-0.139 0.3939995,-0.319 2.0409995,-1.626 2.4149995,-2.017 0.469,-0.4870005 0.519,-1.1650005 0.162,-1.6040005 -0.414,-0.511 -0.973,-0.5 -1.48,-0.236 -1.4609995,0.764 -6.5999995,3.6430005 -7.7329995,4.2710005 -0.9,0.499 -1.516,1.253 -1.882,2.19 -0.37000002,0.95 -0.17,2.01 -0.166,2.979 0.004,0.718 -0.27300002,1.345 -0.055,2.063 0.629,2.087 2.425,3.312 4.859,3.318 4.6179995,0.014 9.2379995,-0.139 13.8569995,-0.158 0.755,-0.004 1.171,-0.301 1.182,-1.033 0.012,-0.754 -0.423,-0.969 -1.183,-0.973 -1.778,-0.01 -5.824,-0.004 -6.04,-0.004 10e-4,-0.084 0.003,-0.586 10e-4,-0.67 z"},TASK_TYPE_INSTANTIATING_SEND:{d:"m {mx},{my} l 0,8.4 l 12.6,0 l 0,-8.4 z l 6.3,3.6 l 6.3,-3.6"},TASK_TYPE_SERVICE:{d:"m {mx},{my} v -1.71335 c 0.352326,-0.0705 0.703932,-0.17838 1.047628,-0.32133 0.344416,-0.14465 0.665822,-0.32133 0.966377,-0.52145 l 1.19431,1.18005 1.567487,-1.57688 -1.195028,-1.18014 c 0.403376,-0.61394 0.683079,-1.29908 0.825447,-2.01824 l 1.622133,-0.01 v -2.2196 l -1.636514,0.01 c -0.07333,-0.35153 -0.178319,-0.70024 -0.323564,-1.04372 -0.145244,-0.34406 -0.321407,-0.6644 -0.522735,-0.96217 l 1.131035,-1.13631 -1.583305,-1.56293 -1.129598,1.13589 c -0.614052,-0.40108 -1.302883,-0.68093 -2.022633,-0.82247 l 0.0093,-1.61852 h -2.241173 l 0.0042,1.63124 c -0.353763,0.0736 -0.705369,0.17977 -1.049785,0.32371 -0.344415,0.14437 -0.665102,0.32092 -0.9635006,0.52046 l -1.1698628,-1.15823 -1.5667691,1.5792 1.1684265,1.15669 c -0.4026573,0.61283 -0.68308,1.29797 -0.8247287,2.01713 l -1.6588041,0.003 v 2.22174 l 1.6724648,-0.006 c 0.073327,0.35077 0.1797598,0.70243 0.3242851,1.04472 0.1452428,0.34448 0.3214064,0.6644 0.5227339,0.96066 l -1.1993431,1.19723 1.5840256,1.56011 1.1964668,-1.19348 c 0.6140517,0.40346 1.3028827,0.68232 2.0233517,0.82331 l 7.19e-4,1.69892 h 2.226848 z m 0.221462,-3.9957 c -1.788948,0.7502 -3.8576,-0.0928 -4.6097055,-1.87438 -0.7521065,-1.78321 0.090598,-3.84627 1.8802645,-4.59604 1.78823,-0.74936 3.856881,0.0929 4.608987,1.87437 0.752106,1.78165 -0.0906,3.84612 -1.879546,4.59605 z"},TASK_TYPE_SERVICE_FILL:{d:"m {mx},{my} c -1.788948,0.7502 -3.8576,-0.0928 -4.6097055,-1.87438 -0.7521065,-1.78321 0.090598,-3.84627 1.8802645,-4.59604 1.78823,-0.74936 3.856881,0.0929 4.608987,1.87437 0.752106,1.78165 -0.0906,3.84612 -1.879546,4.59605 z"},TASK_TYPE_BUSINESS_RULE_HEADER:{d:"m {mx},{my} 0,4 20,0 0,-4 z"},TASK_TYPE_BUSINESS_RULE_MAIN:{d:"m {mx},{my} 0,12 20,0 0,-12 z m 0,8 l 20,0 m -13,-4 l 0,8"},MESSAGE_FLOW_MARKER:{d:"m {mx},{my} m -10.5 ,-7 l 0,14 l 21,0 l 0,-14 z l 10.5,6 l 10.5,-6"}},this.getRawPath=function(e){return this.pathMap[e].d},this.getScaledPath=function(e,t){var n,r,a=this.pathMap[e];t.abspos?(n=t.abspos.x,r=t.abspos.y):(n=t.containerWidth*t.position.mx,r=t.containerHeight*t.position.my);var i,o,c={};if(t.position){for(var s=t.containerHeight/a.height*t.yScaleFactor,l=t.containerWidth/a.width*t.xScaleFactor,u=0;u<a.heightElements.length;u++)c["y"+u]=a.heightElements[u]*s;for(var p=0;p<a.widthElements.length;p++)c["x"+p]=a.widthElements[p]*l}return i=a.d,o={mx:n,my:r,e:c},String(i).replace(ut,(function(e,t){return function(e,t,n){var r=n;return t.replace(pt,(function(e,t,n,a,i){t=t||a,r&&(t in r&&(r=r[t]),"function"==typeof r&&i&&(r=r()))})),r=(null==r||r===n?e:r)+""}(e,t,o)}))}}]},ht=n(101),ft={width:90,height:20};function mt(e){return He(e,"bpmn:Event")||He(e,"bpmn:Gateway")||He(e,"bpmn:DataStoreReference")||He(e,"bpmn:DataObjectReference")||He(e,"bpmn:DataInput")||He(e,"bpmn:DataOutput")||He(e,"bpmn:SequenceFlow")||He(e,"bpmn:MessageFlow")||He(e,"bpmn:Group")}function bt(e){return gt(e.label)}function vt(e){var t=e.length/2-1,n=e[Math.floor(t)],r=e[Math.ceil(t+.01)],a=function(e){var t=e.length/2-1,n=e[Math.floor(t)],r=e[Math.ceil(t+.01)];return{x:n.x+(r.x-n.x)/2,y:n.y+(r.y-n.y)/2}}(e),i=Math.atan((r.y-n.y)/(r.x-n.x)),o=a.x,c=a.y;return Math.abs(i)<Math.PI/2?c-=15:o+=15,{x:o,y:c}}function yt(e){return e.waypoints?vt(e.waypoints):He(e,"bpmn:Group")?{x:e.x+e.width/2,y:e.y+ft.height/2}:{x:e.x+e.width/2,y:e.y+e.height+ft.height/2}}function gt(e){return e&&!!e.labelTarget}var xt=n(10);function jt(e,t){return Object(P.a)({id:e.id,type:e.$type,businessObject:e},t)}function wt(e,t,n){var r=e.di.waypoint;return!r||r.length<2?[Object(xt.e)(t),Object(xt.e)(n)]:r.map((function(e){return{x:e.x,y:e.y}}))}function Ot(e,t,n,r){return new Error(e("element {element} referenced by {referenced}#{property} not yet drawn",{element:Be(n),referenced:Be(t),property:r}))}function Et(e,t,n,r,a,i){this._eventBus=e,this._canvas=t,this._elementFactory=n,this._elementRegistry=r,this._translate=a,this._textRenderer=i}Et.$inject=["eventBus","canvas","elementFactory","elementRegistry","translate","textRenderer"],Et.prototype.add=function(e,t){var n,r,a,i=e.di,o=this._translate;if(He(i,"bpmndi:BPMNPlane"))n=this._elementFactory.createRoot(jt(e)),this._canvas.setRootElement(n);else if(He(i,"bpmndi:BPMNShape")){var c=!Ye(e),s=function(e){return He(e,"bpmn:Group")}(e);r=t&&(t.hidden||t.collapsed);var l=e.di.bounds;n=this._elementFactory.createShape(jt(e,{collapsed:c,hidden:r,x:Math.round(l.x),y:Math.round(l.y),width:Math.round(l.width),height:Math.round(l.height),isFrame:s})),He(e,"bpmn:BoundaryEvent")&&this._attachBoundary(e,n),He(e,"bpmn:Lane")&&(a=0),He(e,"bpmn:DataStoreReference")&&(function(e,t){var n=t.x,r=t.y;return n>=e.x&&n<=e.x+e.width&&r>=e.y&&r<=e.y+e.height}(t,Object(xt.e)(l))||(t=this._canvas.getRootElement())),this._canvas.addShape(n,t,a)}else{if(!He(i,"bpmndi:BPMNEdge"))throw new Error(o("unknown di {di} for element {semantic}",{di:Be(i),semantic:Be(e)}));var u=this._getSource(e),p=this._getTarget(e);r=t&&(t.hidden||t.collapsed),n=this._elementFactory.createConnection(jt(e,{hidden:r,source:u,target:p,waypoints:wt(e,u,p)})),He(e,"bpmn:DataAssociation")&&(t=null),He(e,"bpmn:SequenceFlow")&&(a=0),this._canvas.addConnection(n,t,a)}return mt(e)&&Ze(n)&&this.addLabel(e,n),this._eventBus.fire("bpmnElement.added",{element:n}),n},Et.prototype._attachBoundary=function(e,t){var n=this._translate,r=e.attachedToRef;if(!r)throw new Error(n("missing {semantic}#attachedToRef",{semantic:Be(e)}));var a=this._elementRegistry.get(r.id),i=a&&a.attachers;if(!a)throw Ot(n,e,r,"attachedToRef");t.host=a,i||(a.attachers=i=[]),-1===i.indexOf(t)&&i.push(t)},Et.prototype.addLabel=function(e,t){var n,r,a;return n=function(e,t){var n,r,a,i=e.di.label;return i&&i.bounds?(a=i.bounds,r={width:Math.max(ft.width,a.width),height:a.height},n={x:a.x+a.width/2,y:a.y+a.height/2}):(n=yt(t),r=ft),Object(P.a)({x:n.x-r.width/2,y:n.y-r.height/2},r)}(e,t),(r=Ze(t))&&(n=this._textRenderer.getExternalLabelBounds(n,r)),a=this._elementFactory.createLabel(jt(e,{id:e.id+"_label",labelTarget:t,type:"label",hidden:t.hidden||!Ze(t),x:Math.round(n.x),y:Math.round(n.y),width:Math.round(n.width),height:Math.round(n.height)})),this._canvas.addShape(a,t.parent)},Et.prototype._getEnd=function(e,t){var n,r,a=e.$type,i=this._translate;if(r=e[t+"Ref"],"source"===t&&"bpmn:DataInputAssociation"===a&&(r=r&&r[0]),("source"===t&&"bpmn:DataOutputAssociation"===a||"target"===t&&"bpmn:DataInputAssociation"===a)&&(r=e.$parent),n=r&&this._getElement(r))return n;throw r?Ot(i,e,r,t+"Ref"):new Error(i("{semantic}#{side} Ref not specified",{semantic:Be(e),side:t}))},Et.prototype._getSource=function(e){return this._getEnd(e,"source")},Et.prototype._getTarget=function(e){return this._getEnd(e,"target")},Et.prototype._getElement=function(e){return this._elementRegistry.get(e.id)};var Nt={__depends__:[dt,{__depends__:[ht.a],bpmnImporter:["type",Et]}]},kt=n(43),St=n(139);function _t(e){Ve.call(this,e)}L()(_t,Ve),_t.prototype._modules=[Nt,ht.a,kt.a,St.a],_t.prototype._moddleExtensions={};var Lt=n(205),Ct=n(206),Pt=n(202);function Tt(e){_t.call(this,e)}L()(Tt,_t),Tt.prototype._navigationModules=[Lt.a,Ct.a,Pt.a],Tt.prototype._modules=[].concat(_t.prototype._modules,Tt.prototype._navigationModules);var Mt=n(388),At=n(392);function Rt(e,t){return Object(P.A)(t,(function(t){return He(e,t)}))}function Bt(e,t){for("string"===typeof t&&(t=[t]);e=e.parent;)if(Rt(e,t))return e;return null}function Dt(e,t){return He(t,"bpmn:TextAnnotation")?function(e,t){var n=Object(xt.b)(e),r={x:n.right+t.width/2,y:n.top-50-t.height/2};return It(e,t,r,{y:{margin:-30,rowSize:20}})}(e,t):Rt(t,["bpmn:DataObjectReference","bpmn:DataStoreReference"])?function(e,t){var n=Object(xt.b)(e),r={x:n.right-10+t.width/2,y:n.bottom+40+t.width/2};return It(e,t,r,{x:{margin:30,rowSize:30}})}(e,t):He(t,"bpmn:FlowNode")?function(e,t){var n=Object(xt.b)(e),r=Object(xt.e)(e),a=function(e,t){var n=Object(xt.b)(e);function r(e){return He(e,"bpmn:SequenceFlow")}function a(e){return function(t){return{shape:t,weight:e,distanceTo:function(e){return Object(xt.b)(e).left-n.right}}}}function i(e){return function(t){return{shape:t,weight:e,distanceTo:function(e){var t=Object(xt.b)(e);return n.left-t.right}}}}var o=Object(P.y)([].concat($t(e,r).map(a(5)),Wt(e,r).map(i(1))),(function(e,t){return e[t.shape.id+"__weight_"+t.weight]=t,e}),{}),c=Object(P.y)(o,(function(e,t){var n,r,a,i=t.shape,o=t.weight,c=t.distanceTo,s=e.fav;return(n=c(i))<0||n>250||(r=(a=e[String(n)]=e[String(n)]||{value:n,count:0}).count+=1*o,(!s||s.count<r)&&(e.fav=a)),e}),{});return c.fav?c.fav.value:50}(e),i="left",o=80,c=30;He(e,"bpmn:BoundaryEvent")&&-1!==(i=Object(xt.f)(e,e.host,-25)).indexOf("top")&&(c*=-1);function s(e){return-1!==e.indexOf("top")?-1*o:-1!==e.indexOf("bottom")?o:0}var l={x:n.right+a+t.width/2,y:r.y+s(i)};return It(e,t,l,{y:{margin:c,rowSize:o}})}(e,t):function(e,t){var n=Object(xt.b)(e),r=Object(xt.e)(e);return{x:n.right+50+t.width/2,y:r.y}}(e,t)}function Ft(e,t,n){var r={x:t.x-n.width/2,y:t.y-n.height/2,width:n.width,height:n.height},a=function(e,t){var n=Gt(e);return e.host&&(n=n.concat(Gt(e.host))),e.attachers&&(n=n.concat(e.attachers.reduce((function(e,t){return e.concat(Gt(t))}),[]))),n}(e);return Object(P.f)(a,(function(e){return e!==n&&"intersect"===Object(xt.f)(e,r,10)}))}function It(e,t,n,r){function a(e){var a={x:n.x,y:n.y};return["x","y"].forEach((function(o){var c=r[o];if(c){var s="x"===o?"width":"height",l=c.margin,u=c.rowSize;a[o]=l<0?Math.min(e[o]+l-t[s]/2,n[o]-u+l):Math.max(i[o]+i[s]+l+t[s]/2,n[o]+u+l)}})),a}for(var i;i=Ft(e,n,t);)n=a(i);return n}function Vt(){return!0}function Gt(e,t){return[].concat($t(e,t),Wt(e,t))}function Wt(e,t){return t||(t=Vt),e.incoming.filter(t).map((function(e){return e.source}))}function $t(e,t){return t||(t=Vt),e.outgoing.filter(t).map((function(e){return e.target}))}function zt(e,t){function n(t,n){return e.fire(t,n)}this.append=function(e,r){n("autoPlace.start",{source:e,shape:r});var a=n("autoPlace",{source:e,shape:r});a||(a=Dt(e,r));var i=t.appendShape(e,r,a,e.parent);return n("autoPlace.end",{source:e,shape:i}),i}}function Kt(e,t){e.on("autoPlace.end",500,(function(e){t.select(e.shape)}))}zt.$inject=["eventBus","modeling"],Kt.$inject=["eventBus","selection"];var qt={__init__:["autoPlaceSelectionBehavior"],autoPlace:["type",zt],autoPlaceSelectionBehavior:["type",Kt]},Ht=n(247);function Ut(e){e.invoke(Ht.a,this)}Ut.$inject=["injector"],L()(Ut,Ht.a),Ut.prototype.resize=function(e,t,n){He(e,"bpmn:Participant")?this._modeling.resizeLane(e,t,null,n):this._modeling.resizeShape(e,t,null,n)};var Yt=n(248);function Jt(e,t){Yt.a.call(this,e),this._modeling=t}L()(Jt,Yt.a),Jt.$inject=["eventBus","modeling"],Jt.prototype.canResize=function(e,t){if(!He(t,"bpmn:Participant")&&!He(t,"bpmn:Lane")&&!He(t,"bpmn:Loop")&&!He(t,"bpmn:Conditional"))return!1;var n=!0;return Object(P.i)(e,(function(e){(He(e,"bpmn:Lane")||e.labelTarget)&&(n=!1)})),n};var Xt={__init__:["bpmnAutoResize","bpmnAutoResizeProvider"],bpmnAutoResize:["type",Ut],bpmnAutoResizeProvider:["type",Jt]},Qt=n(393),Zt=n(384),en=n(138),tn=n(394),nn=n(203),rn=n(396),an=n(100),on=n(410),cn=n(385);function sn(e,t,n){Object(P.l)(n)||(n=[n]),Object(P.i)(n,(function(n){Object(P.s)(e[n])||(t[n]=e[n])}))}function ln(e,t,n){var r;t.on("copyPaste.copyElement",750,(function(e){var t=e.descriptor,n=e.element,r=t.oldBusinessObject=Ue(n);if(t.type=n.type,sn(r,t,"name"),t.di={},sn(r.di,t.di,["fill","stroke"]),sn(r.di,t,"isExpanded"),un(t))return t;r.default&&(t.default=r.default.id)})),t.on("moddleCopy.canCopyProperty",(function(t){var r,a=t.parent,i=t.property;if("processRef"===t.propertyName&&He(a,"bpmn:Participant")&&He(i,"bpmn:Process-action"))return r=e.create("bpmn:Process-action"),n.copyElement(i,r)})),t.on("copyPaste.pasteElements",(function(){r={}})),t.on("copyPaste.pasteElement",(function(t){var a,i,o,c=t.cache,s=t.descriptor,l=s.oldBusinessObject;un(s)?s.businessObject=Ue(c[s.labelTarget]):(a=e.create(l.$type),s.businessObject=n.copyElement(l,a),function(e,t){var n=Ue(e);e.default&&(r[e.default]={element:n,property:"default"}),e.host&&(Ue(e).attachedToRef=Ue(t[e.host])),r=Object(P.w)(r,Object(P.y)(r,(function(t,r,a){var i=r.element,o=r.property;return a===e.id&&(i[o]=n,t.push(e.id)),t}),[]))}(s,c),sn(s,a,["isExpanded","name"]),i=s,o="oldBusinessObject",Object(P.l)(o)||(o=[o]),Object(P.i)(o,(function(e){i[e]&&delete i[e]})))}))}function un(e){return!!e.labelTarget}ln.$inject=["bpmnFactory","eventBus","moddleCopy"];var pn=["artifacts","dataInputAssociations","dataOutputAssociations","default","flowElements","lanes","incoming","outgoing"];function dn(e,t,n){this._bpmnFactory=t,this._eventBus=e,this._moddle=n,e.on("moddleCopy.canCopyProperties",(function(e){var t=e.propertyNames;if(t&&t.length)return Object(P.B)(t,(function(e){return"assignElements"===e}))})),e.on("moddleCopy.canCopyProperty",(function(e){var t=e.parent,n=Object(P.q)(t)&&t.$descriptor,r=e.propertyName;return(!r||-1===pn.indexOf(r))&&(!(r&&n&&!Object(P.f)(n.properties,Object(P.v)({name:r})))&&void 0)})),e.on("moddleCopy.canSetCopiedProperty",(function(e){var t,n,r=e.property;if(n="bpmn:AssignElements",(t=r)&&"function"===typeof t.$instanceOf&&t.$instanceOf(n)&&(!r.values||!r.values.length))return!1}))}function hn(e,t){return Object(P.y)(e.properties,(function(e,n){return t&&n.default?e:e.concat(n.name)}),[])}dn.$inject=["eventBus","bpmnFactory","moddle"],dn.prototype.copyElement=function(e,t,n){var r=this;n&&!Object(P.l)(n)&&(n=[n]),n=n||hn(e.$descriptor);var a=this._eventBus.fire("moddleCopy.canCopyProperties",{propertyNames:n,sourceElement:e,targetElement:t});return!1===a||(Object(P.l)(a)&&(n=a),Object(P.i)(n,(function(n){var a;Object(P.k)(e,n)&&(a=e.get(n));var i=r.copyProperty(a,t,n);!1!==r._eventBus.fire("moddleCopy.canSetCopiedProperty",{parent:t,property:i,propertyName:n})&&Object(P.m)(i)&&t.set(n,i)}))),t},dn.prototype.copyProperty=function(e,t,n){var r=this,a=this._eventBus.fire("moddleCopy.canCopyProperty",{parent:t,property:e,propertyName:n});if(!1!==a){if(a)return Object(P.q)(a)&&a.$type&&!a.$parent&&(a.$parent=t),a;var i=this._moddle.getPropertyDescriptor(t,n);if(!i.isId&&!i.isReference){if(Object(P.l)(e))return Object(P.y)(e,(function(e,i){return(a=r.copyProperty(i,t,n))?(a.$parent=t,e.concat(a)):e}),[]);if(Object(P.q)(e)&&e.$type){if(this._moddle.getElementDescriptor(e).isGeneric)return;return(a=r._bpmnFactory.create(e.$type)).$parent=t,a=r.copyElement(e,a)}return e}}};var fn={__depends__:[cn.a],__init__:["bpmnCopyPaste","moddleCopy"],bpmnCopyPaste:["type",ln],moddleCopy:["type",dn]},mn=n(409);var bn=["cancelActivity","instantiate","eventGatewayType","triggeredByEvent","isInterrupting"];function vn(e,t,n,r,a,i){this.replaceElement=function(o,c,s){s=s||{};var l=c.type,u=o.businessObject;if(yn(u)&&"bpmn:Loop"===l&&function(e,t){var n=e&&Object(P.k)(e,"collapsed")?e.collapsed:!Ye(e);return n!==(t&&(Object(P.k)(t,"collapsed")||Object(P.k)(t,"isExpanded"))?Object(P.k)(t,"collapsed")?t.collapsed:!t.isExpanded:n)&&(e.collapsed=n,!0)}(o,c))return r.toggleCollapse(o),o;var p,d=e.create(l),h={type:l,businessObject:d},f=hn(u.$descriptor),m=hn(d.$descriptor,!0),b=(p=m,f.filter((function(e){return-1!==p.indexOf(e)})));Object(P.a)(d,Object(P.x)(c,bn));var v=Object(P.e)(b,(function(e){return"eventDefinitions"===e?gn(o,c.eventDefinitionType):"loopCharacteristics"===e?!Je(d):!d.hasOwnProperty(e)&&(("processRef"!==e||!1!==c.isExpanded)&&"triggeredByEvent"!==e)}));return d=n.copyElement(u,d,v),c.eventDefinitionType&&(gn(d,c.eventDefinitionType)||(h.eventDefinitionType=c.eventDefinitionType)),He(u,"bpmn:Activity")&&(yn(u)?h.isExpanded=Ye(u):c&&Object(P.k)(c,"isExpanded")&&(h.isExpanded=c.isExpanded),Ye(u)&&!He(u,"bpmn:Task")&&h.isExpanded&&(h.width=o.width,h.height=o.height)),yn(u)&&!yn(d)&&(s.moveChildren=!1),He(u,"bpmn:Participant")&&(!0===c.isExpanded?d.processRef=e.create("bpmn:Process-action"):s.moveChildren=!1,h.width=o.width,h.height=t._getDefaultSize(d).height),d.name=u.name,Rt(u,["bpmn:ExclusiveGateway","bpmn:InclusiveGateway","bpmn:Activity"])&&Rt(d,["bpmn:ExclusiveGateway","bpmn:InclusiveGateway","bpmn:Activity"])&&(d.default=u.default),c.host&&!He(u,"bpmn:BoundaryEvent")&&He(d,"bpmn:BoundaryEvent")&&(h.host=c.host),h.di={},function(e,t,n){Object(P.l)(n)||(n=[n]),Object(P.i)(n,(function(n){Object(P.s)(e[n])||(t[n]=e[n])}))}(u.di,h.di,["fill","stroke"]),h=a.replaceElement(o,h,s),!1!==s.select&&i.select(h),h}}function yn(e){return He(e,"bpmn:Loop")}function gn(e,t){var n=Ue(e);return t&&n.get("eventDefinitions").some((function(e){return He(e,t)}))}vn.$inject=["bpmnFactory","elementFactory","moddleCopy","modeling","replace","selection"];var xn={__depends__:[fn,mn.a,kt.a],bpmnReplace:["type",vn]};function jn(e){return function(t){var n=t.target,r=Ue(e),a=r.eventDefinitions&&r.eventDefinitions[0],i=r.$type===n.type,o=(a&&a.$type)===n.eventDefinitionType,c=r.triggeredByEvent===n.triggeredByEvent,s=void 0===n.isExpanded||n.isExpanded===Ye(r);return!i||!o||!c||!s}}var wn=[{label:"Start Event",actionName:"replace-with-none-start",className:"bpmn-icon-start-event-none",target:{type:"bpmn:StartEvent"}},{label:"Intermediate Throw Event",actionName:"replace-with-none-intermediate-throwing",className:"bpmn-icon-intermediate-event-none",target:{type:"bpmn:IntermediateThrowEvent"}},{label:"End Event",actionName:"replace-with-none-end",className:"bpmn-icon-end-event-none",target:{type:"bpmn:EndEvent"}},{label:"Message Start Event",actionName:"replace-with-message-start",className:"bpmn-icon-start-event-message",target:{type:"bpmn:StartEvent",eventDefinitionType:"bpmn:MessageEventDefinition"}},{label:"Timer Start Event",actionName:"replace-with-timer-start",className:"bpmn-icon-start-event-timer",target:{type:"bpmn:StartEvent",eventDefinitionType:"bpmn:TimerEventDefinition"}},{label:"Conditional Start Event",actionName:"replace-with-conditional-start",className:"bpmn-icon-start-event-condition",target:{type:"bpmn:StartEvent",eventDefinitionType:"bpmn:ConditionalEventDefinition"}},{label:"Signal Start Event",actionName:"replace-with-signal-start",className:"bpmn-icon-start-event-signal",target:{type:"bpmn:StartEvent",eventDefinitionType:"bpmn:SignalEventDefinition"}}],On=[{label:"Start Event",actionName:"replace-with-none-start",className:"bpmn-icon-start-event-none",target:{type:"bpmn:StartEvent"}},{label:"Intermediate Throw Event",actionName:"replace-with-none-intermediate-throw",className:"bpmn-icon-intermediate-event-none",target:{type:"bpmn:IntermediateThrowEvent"}},{label:"End Event",actionName:"replace-with-none-end",className:"bpmn-icon-end-event-none",target:{type:"bpmn:EndEvent"}},{label:"Message Intermediate Catch Event",actionName:"replace-with-message-intermediate-catch",className:"bpmn-icon-intermediate-event-catch-message",target:{type:"bpmn:IntermediateCatchEvent",eventDefinitionType:"bpmn:MessageEventDefinition"}},{label:"Message Intermediate Throw Event",actionName:"replace-with-message-intermediate-throw",className:"bpmn-icon-intermediate-event-throw-message",target:{type:"bpmn:IntermediateThrowEvent",eventDefinitionType:"bpmn:MessageEventDefinition"}},{label:"Timer Intermediate Catch Event",actionName:"replace-with-timer-intermediate-catch",className:"bpmn-icon-intermediate-event-catch-timer",target:{type:"bpmn:IntermediateCatchEvent",eventDefinitionType:"bpmn:TimerEventDefinition"}},{label:"Escalation Intermediate Throw Event",actionName:"replace-with-escalation-intermediate-throw",className:"bpmn-icon-intermediate-event-throw-escalation",target:{type:"bpmn:IntermediateThrowEvent",eventDefinitionType:"bpmn:EscalationEventDefinition"}},{label:"Conditional Intermediate Catch Event",actionName:"replace-with-conditional-intermediate-catch",className:"bpmn-icon-intermediate-event-catch-condition",target:{type:"bpmn:IntermediateCatchEvent",eventDefinitionType:"bpmn:ConditionalEventDefinition"}},{label:"Link Intermediate Catch Event",actionName:"replace-with-link-intermediate-catch",className:"bpmn-icon-intermediate-event-catch-link",target:{type:"bpmn:IntermediateCatchEvent",eventDefinitionType:"bpmn:LinkEventDefinition"}},{label:"Link Intermediate Throw Event",actionName:"replace-with-link-intermediate-throw",className:"bpmn-icon-intermediate-event-throw-link",target:{type:"bpmn:IntermediateThrowEvent",eventDefinitionType:"bpmn:LinkEventDefinition"}},{label:"Compensation Intermediate Throw Event",actionName:"replace-with-compensation-intermediate-throw",className:"bpmn-icon-intermediate-event-throw-compensation",target:{type:"bpmn:IntermediateThrowEvent",eventDefinitionType:"bpmn:CompensateEventDefinition"}},{label:"Signal Intermediate Catch Event",actionName:"replace-with-signal-intermediate-catch",className:"bpmn-icon-intermediate-event-catch-signal",target:{type:"bpmn:IntermediateCatchEvent",eventDefinitionType:"bpmn:SignalEventDefinition"}},{label:"Signal Intermediate Throw Event",actionName:"replace-with-signal-intermediate-throw",className:"bpmn-icon-intermediate-event-throw-signal",target:{type:"bpmn:IntermediateThrowEvent",eventDefinitionType:"bpmn:SignalEventDefinition"}}],En=[{label:"Start Event",actionName:"replace-with-none-start",className:"bpmn-icon-start-event-none",target:{type:"bpmn:StartEvent"}},{label:"Intermediate Throw Event",actionName:"replace-with-none-intermediate-throw",className:"bpmn-icon-intermediate-event-none",target:{type:"bpmn:IntermediateThrowEvent"}},{label:"End Event",actionName:"replace-with-none-end",className:"bpmn-icon-end-event-none",target:{type:"bpmn:EndEvent"}},{label:"Message End Event",actionName:"replace-with-message-end",className:"bpmn-icon-end-event-message",target:{type:"bpmn:EndEvent",eventDefinitionType:"bpmn:MessageEventDefinition"}},{label:"Escalation End Event",actionName:"replace-with-escalation-end",className:"bpmn-icon-end-event-escalation",target:{type:"bpmn:EndEvent",eventDefinitionType:"bpmn:EscalationEventDefinition"}},{label:"Error End Event",actionName:"replace-with-error-end",className:"bpmn-icon-end-event-error",target:{type:"bpmn:EndEvent",eventDefinitionType:"bpmn:ErrorEventDefinition"}},{label:"Cancel End Event",actionName:"replace-with-cancel-end",className:"bpmn-icon-end-event-cancel",target:{type:"bpmn:EndEvent",eventDefinitionType:"bpmn:CancelEventDefinition"}},{label:"Compensation End Event",actionName:"replace-with-compensation-end",className:"bpmn-icon-end-event-compensation",target:{type:"bpmn:EndEvent",eventDefinitionType:"bpmn:CompensateEventDefinition"}},{label:"Signal End Event",actionName:"replace-with-signal-end",className:"bpmn-icon-end-event-signal",target:{type:"bpmn:EndEvent",eventDefinitionType:"bpmn:SignalEventDefinition"}},{label:"Terminate End Event",actionName:"replace-with-terminate-end",className:"bpmn-icon-end-event-terminate",target:{type:"bpmn:EndEvent",eventDefinitionType:"bpmn:TerminateEventDefinition"}}],Nn=[{label:"Exclusive Gateway",actionName:"replace-with-exclusive-gateway",className:"bpmn-icon-gateway-xor",target:{type:"bpmn:ExclusiveGateway"}},{label:"Parallel Gateway",actionName:"replace-with-parallel-gateway",className:"bpmn-icon-gateway-parallel",target:{type:"bpmn:ParallelGateway"}},{label:"Inclusive Gateway",actionName:"replace-with-inclusive-gateway",className:"bpmn-icon-gateway-or",target:{type:"bpmn:InclusiveGateway"}},{label:"Complex Gateway",actionName:"replace-with-complex-gateway",className:"bpmn-icon-gateway-complex",target:{type:"bpmn:ComplexGateway"}},{label:"Event based Gateway",actionName:"replace-with-event-based-gateway",className:"bpmn-icon-gateway-eventbased",target:{type:"bpmn:EventBasedGateway",instantiate:!1,eventGatewayType:"Exclusive"}}],kn=[{label:"Transaction",actionName:"replace-with-transaction",className:"bpmn-icon-transaction",target:{type:"bpmn:Transaction",isExpanded:!0}},{label:"Event Sub Process",actionName:"replace-with-event-loop",className:"bpmn-icon-event-loop-expanded",target:{type:"bpmn:Loop",triggeredByEvent:!0,isExpanded:!0}},{label:"Sub Process (collapsed)",actionName:"replace-with-collapsed-loop",className:"bpmn-icon-loop-collapsed",target:{type:"bpmn:Loop",isExpanded:!1}}],Sn=[{label:"Sub Process",actionName:"replace-with-loop",className:"bpmn-icon-loop-expanded",target:{type:"bpmn:Loop",isExpanded:!0}},{label:"Event Sub Process",actionName:"replace-with-event-loop",className:"bpmn-icon-event-loop-expanded",target:{type:"bpmn:Loop",triggeredByEvent:!0,isExpanded:!0}}],_n=[{label:"Sub Process",actionName:"replace-with-loop",className:"bpmn-icon-loop-expanded",target:{type:"bpmn:Loop",isExpanded:!0}},{label:"Transaction",actionName:"replace-with-transaction",className:"bpmn-icon-transaction",target:{type:"bpmn:Transaction",isExpanded:!0}}],Ln=[{label:"Task",actionName:"replace-with-task",className:"bpmn-icon-task",target:{type:"bpmn:Task"}},{label:"Send Task",actionName:"replace-with-send-task",className:"bpmn-icon-send",target:{type:"bpmn:SendTask"}},{label:"Receive Task",actionName:"replace-with-receive-task",className:"bpmn-icon-receive",target:{type:"bpmn:ReceiveTask"}},{label:"User Task",actionName:"replace-with-user-task",className:"bpmn-icon-user",target:{type:"bpmn:UserTask"}},{label:"Manual Task",actionName:"replace-with-manual-task",className:"bpmn-icon-manual",target:{type:"bpmn:ManualTask"}},{label:"Business Rule Task",actionName:"replace-with-rule-task",className:"bpmn-icon-business-rule",target:{type:"bpmn:BusinessRuleTask"}},{label:"Service Task",actionName:"replace-with-service-task",className:"bpmn-icon-service",target:{type:"bpmn:ServiceTask"}},{label:"Script Task",actionName:"replace-with-script-task",className:"bpmn-icon-script",target:{type:"bpmn:ScriptTask"}},{label:"Call Activity",actionName:"replace-with-call-activity",className:"bpmn-icon-call-activity",target:{type:"bpmn:CallActivity"}},{label:"Sub Process (collapsed)",actionName:"replace-with-collapsed-loop",className:"bpmn-icon-loop-collapsed",target:{type:"bpmn:Loop",isExpanded:!1}},{label:"Sub Process (expanded)",actionName:"replace-with-expanded-loop",className:"bpmn-icon-loop-expanded",target:{type:"bpmn:Loop",isExpanded:!0}}],Cn=[{label:"Message Boundary Event",actionName:"replace-with-message-boundary",className:"bpmn-icon-intermediate-event-catch-message",target:{type:"bpmn:BoundaryEvent",eventDefinitionType:"bpmn:MessageEventDefinition"}},{label:"Timer Boundary Event",actionName:"replace-with-timer-boundary",className:"bpmn-icon-intermediate-event-catch-timer",target:{type:"bpmn:BoundaryEvent",eventDefinitionType:"bpmn:TimerEventDefinition"}},{label:"Escalation Boundary Event",actionName:"replace-with-escalation-boundary",className:"bpmn-icon-intermediate-event-catch-escalation",target:{type:"bpmn:BoundaryEvent",eventDefinitionType:"bpmn:EscalationEventDefinition"}},{label:"Conditional Boundary Event",actionName:"replace-with-conditional-boundary",className:"bpmn-icon-intermediate-event-catch-condition",target:{type:"bpmn:BoundaryEvent",eventDefinitionType:"bpmn:ConditionalEventDefinition"}},{label:"Error Boundary Event",actionName:"replace-with-error-boundary",className:"bpmn-icon-intermediate-event-catch-error",target:{type:"bpmn:BoundaryEvent",eventDefinitionType:"bpmn:ErrorEventDefinition"}},{label:"Cancel Boundary Event",actionName:"replace-with-cancel-boundary",className:"bpmn-icon-intermediate-event-catch-cancel",target:{type:"bpmn:BoundaryEvent",eventDefinitionType:"bpmn:CancelEventDefinition"}},{label:"Signal Boundary Event",actionName:"replace-with-signal-boundary",className:"bpmn-icon-intermediate-event-catch-signal",target:{type:"bpmn:BoundaryEvent",eventDefinitionType:"bpmn:SignalEventDefinition"}},{label:"Compensation Boundary Event",actionName:"replace-with-compensation-boundary",className:"bpmn-icon-intermediate-event-catch-compensation",target:{type:"bpmn:BoundaryEvent",eventDefinitionType:"bpmn:CompensateEventDefinition"}},{label:"Message Boundary Event (non-interrupting)",actionName:"replace-with-non-interrupting-message-boundary",className:"bpmn-icon-intermediate-event-catch-non-interrupting-message",target:{type:"bpmn:BoundaryEvent",eventDefinitionType:"bpmn:MessageEventDefinition",cancelActivity:!1}},{label:"Timer Boundary Event (non-interrupting)",actionName:"replace-with-non-interrupting-timer-boundary",className:"bpmn-icon-intermediate-event-catch-non-interrupting-timer",target:{type:"bpmn:BoundaryEvent",eventDefinitionType:"bpmn:TimerEventDefinition",cancelActivity:!1}},{label:"Escalation Boundary Event (non-interrupting)",actionName:"replace-with-non-interrupting-escalation-boundary",className:"bpmn-icon-intermediate-event-catch-non-interrupting-escalation",target:{type:"bpmn:BoundaryEvent",eventDefinitionType:"bpmn:EscalationEventDefinition",cancelActivity:!1}},{label:"Conditional Boundary Event (non-interrupting)",actionName:"replace-with-non-interrupting-conditional-boundary",className:"bpmn-icon-intermediate-event-catch-non-interrupting-condition",target:{type:"bpmn:BoundaryEvent",eventDefinitionType:"bpmn:ConditionalEventDefinition",cancelActivity:!1}},{label:"Signal Boundary Event (non-interrupting)",actionName:"replace-with-non-interrupting-signal-boundary",className:"bpmn-icon-intermediate-event-catch-non-interrupting-signal",target:{type:"bpmn:BoundaryEvent",eventDefinitionType:"bpmn:SignalEventDefinition",cancelActivity:!1}}],Pn=[{label:"Message Start Event",actionName:"replace-with-message-start",className:"bpmn-icon-start-event-message",target:{type:"bpmn:StartEvent",eventDefinitionType:"bpmn:MessageEventDefinition"}},{label:"Timer Start Event",actionName:"replace-with-timer-start",className:"bpmn-icon-start-event-timer",target:{type:"bpmn:StartEvent",eventDefinitionType:"bpmn:TimerEventDefinition"}},{label:"Conditional Start Event",actionName:"replace-with-conditional-start",className:"bpmn-icon-start-event-condition",target:{type:"bpmn:StartEvent",eventDefinitionType:"bpmn:ConditionalEventDefinition"}},{label:"Signal Start Event",actionName:"replace-with-signal-start",className:"bpmn-icon-start-event-signal",target:{type:"bpmn:StartEvent",eventDefinitionType:"bpmn:SignalEventDefinition"}},{label:"Error Start Event",actionName:"replace-with-error-start",className:"bpmn-icon-start-event-error",target:{type:"bpmn:StartEvent",eventDefinitionType:"bpmn:ErrorEventDefinition"}},{label:"Escalation Start Event",actionName:"replace-with-escalation-start",className:"bpmn-icon-start-event-escalation",target:{type:"bpmn:StartEvent",eventDefinitionType:"bpmn:EscalationEventDefinition"}},{label:"Compensation Start Event",actionName:"replace-with-compensation-start",className:"bpmn-icon-start-event-compensation",target:{type:"bpmn:StartEvent",eventDefinitionType:"bpmn:CompensateEventDefinition"}},{label:"Message Start Event (non-interrupting)",actionName:"replace-with-non-interrupting-message-start",className:"bpmn-icon-start-event-non-interrupting-message",target:{type:"bpmn:StartEvent",eventDefinitionType:"bpmn:MessageEventDefinition",isInterrupting:!1}},{label:"Timer Start Event (non-interrupting)",actionName:"replace-with-non-interrupting-timer-start",className:"bpmn-icon-start-event-non-interrupting-timer",target:{type:"bpmn:StartEvent",eventDefinitionType:"bpmn:TimerEventDefinition",isInterrupting:!1}},{label:"Conditional Start Event (non-interrupting)",actionName:"replace-with-non-interrupting-conditional-start",className:"bpmn-icon-start-event-non-interrupting-condition",target:{type:"bpmn:StartEvent",eventDefinitionType:"bpmn:ConditionalEventDefinition",isInterrupting:!1}},{label:"Signal Start Event (non-interrupting)",actionName:"replace-with-non-interrupting-signal-start",className:"bpmn-icon-start-event-non-interrupting-signal",target:{type:"bpmn:StartEvent",eventDefinitionType:"bpmn:SignalEventDefinition",isInterrupting:!1}},{label:"Escalation Start Event (non-interrupting)",actionName:"replace-with-non-interrupting-escalation-start",className:"bpmn-icon-start-event-non-interrupting-escalation",target:{type:"bpmn:StartEvent",eventDefinitionType:"bpmn:EscalationEventDefinition",isInterrupting:!1}}],Tn=[{label:"Sequence Flow",actionName:"replace-with-sequence-flow",className:"bpmn-icon-connection"},{label:"Default Flow",actionName:"replace-with-default-flow",className:"bpmn-icon-default-flow"},{label:"Conditional Flow",actionName:"replace-with-conditional-flow",className:"bpmn-icon-conditional-flow"}],Mn=[{label:"Expanded Pool",actionName:"replace-with-expanded-pool",className:"bpmn-icon-participant",target:{type:"bpmn:Participant",isExpanded:!0}},{label:"Collapsed Pool",actionName:"replace-with-collapsed-pool",className:"bpmn-icon-lane",target:{type:"bpmn:Participant",isExpanded:!1}}];function An(e,t,n,r,a,i){this._popupMenu=e,this._modeling=t,this._moddle=n,this._bpmnReplace=r,this._rules=a,this._translate=i,this.register()}An.$inject=["popupMenu","modeling","moddle","bpmnReplace","rules","translate"],An.prototype.register=function(){this._popupMenu.registerProvider("bpmn-replace",this)},An.prototype.getEntries=function(e){var t,n=e.businessObject;if(!this._rules.allowed("shape.replace",{element:e}))return[];var r=jn(e);return He(n,"bpmn:StartEvent")&&!Je(n.$parent)?(t=Object(P.e)(wn,r),this._createEntries(e,t)):He(n,"bpmn:Participant")?(t=Object(P.e)(Mn,(function(e){return Ye(n)!==e.target.isExpanded})),this._createEntries(e,t)):He(n,"bpmn:StartEvent")&&Je(n.$parent)?(t=Object(P.e)(Pn,(function(t){var n=!1!==t.target.isInterrupting,a=Ue(e).isInterrupting===n;return r(t)||!r(t)&&!a})),this._createEntries(e,t)):He(n,"bpmn:EndEvent")?(t=Object(P.e)(En,(function(e){return!("bpmn:CancelEventDefinition"===e.target.eventDefinitionType&&!He(n.$parent,"bpmn:Transaction"))&&r(e)})),this._createEntries(e,t)):He(n,"bpmn:BoundaryEvent")?(t=Object(P.e)(Cn,(function(e){var t=e.target;if("bpmn:CancelEventDefinition"===t.eventDefinition&&!He(n.attachedToRef,"bpmn:Transaction"))return!1;var a=!1!==t.cancelActivity,i=n.cancelActivity===a;return r(e)||!r(e)&&!i})),this._createEntries(e,t)):He(n,"bpmn:IntermediateCatchEvent")||He(n,"bpmn:IntermediateThrowEvent")?(t=Object(P.e)(On,r),this._createEntries(e,t)):He(n,"bpmn:Gateway")?(t=Object(P.e)(Nn,r),this._createEntries(e,t)):He(n,"bpmn:Transaction")?(t=Object(P.e)(Sn,r),this._createEntries(e,t)):Je(n)&&Ye(n)?(t=Object(P.e)(_n,r),this._createEntries(e,t)):He(n,"bpmn:Loop")&&Ye(n)?(t=Object(P.e)(kn,r),this._createEntries(e,t)):He(n,"bpmn:AdHocSubProcess")&&!Ye(n)?(t=Object(P.e)(Ln,(function(t){var n=t.target,r="bpmn:Loop"===n.type,a=!0===n.isExpanded;return jn(e)&&(!r||a)})),this._createEntries(e,t)):He(n,"bpmn:SequenceFlow")?this._createSequenceFlowEntries(e,Tn):He(n,"bpmn:FlowNode")?(t=Object(P.e)(Ln,r),He(n,"bpmn:Loop")&&!Ye(n)&&(t=Object(P.e)(t,(function(e){return"Sub Process (collapsed)"!==e.label}))),this._createEntries(e,t)):[]},An.prototype.getHeaderEntries=function(e){var t=[];return He(e,"bpmn:Activity")&&!Je(e)&&(t=t.concat(this._getLoopEntries(e))),!He(e,"bpmn:Loop")||He(e,"bpmn:Transaction")||Je(e)||t.push(this._getAdHocEntry(e)),t},An.prototype._createEntries=function(e,t){var n=[],r=this;return Object(P.i)(t,(function(t){var a=r._createMenuEntry(t,e);n.push(a)})),n},An.prototype._createSequenceFlowEntries=function(e,t){var n=Ue(e),r=[],a=this._modeling,i=this._moddle,o=this;return Object(P.i)(t,(function(t){switch(t.actionName){case"replace-with-default-flow":n.sourceRef.default!==n&&(He(n.sourceRef,"bpmn:ExclusiveGateway")||He(n.sourceRef,"bpmn:InclusiveGateway")||He(n.sourceRef,"bpmn:ComplexGateway")||He(n.sourceRef,"bpmn:Activity"))&&r.push(o._createMenuEntry(t,e,(function(){a.updateProperties(e.source,{default:n})})));break;case"replace-with-conditional-flow":!n.conditionExpression&&He(n.sourceRef,"bpmn:Activity")&&r.push(o._createMenuEntry(t,e,(function(){var t=i.create("bpmn:FormalExpression",{body:""});a.updateProperties(e,{conditionExpression:t})})));break;default:if(He(n.sourceRef,"bpmn:Activity")&&n.conditionExpression)return r.push(o._createMenuEntry(t,e,(function(){a.updateProperties(e,{conditionExpression:void 0})})));if((He(n.sourceRef,"bpmn:ExclusiveGateway")||He(n.sourceRef,"bpmn:InclusiveGateway")||He(n.sourceRef,"bpmn:ComplexGateway")||He(n.sourceRef,"bpmn:Activity"))&&n.sourceRef.default===n)return r.push(o._createMenuEntry(t,e,(function(){a.updateProperties(e.source,{default:void 0})})))}})),r},An.prototype._createMenuEntry=function(e,t,n){var r=this._translate,a=this._bpmnReplace.replaceElement;return n=n||function(){return a(t,e.target)},{label:r(e.label),className:e.className,id:e.actionName,action:n}},An.prototype._getLoopEntries=function(e){var t=this,n=this._translate;function r(n,r){var a;r.active?a=void 0:(a=t._moddle.create(r.options.loopCharacteristics),r.options.isSequential&&(a.isSequential=r.options.isSequential)),t._modeling.updateProperties(e,{loopCharacteristics:a})}var a,i,o,c=Ue(e).loopCharacteristics;return c&&(a=c.isSequential,i=void 0===c.isSequential,o=void 0!==c.isSequential&&!c.isSequential),[{id:"toggle-parallel-mi",className:"bpmn-icon-parallel-mi-marker",title:n("Parallel Multi Instance"),active:o,action:r,options:{loopCharacteristics:"bpmn:MultiInstanceLoopCharacteristics",isSequential:!1}},{id:"toggle-sequential-mi",className:"bpmn-icon-sequential-mi-marker",title:n("Sequential Multi Instance"),active:a,action:r,options:{loopCharacteristics:"bpmn:MultiInstanceLoopCharacteristics",isSequential:!0}},{id:"toggle-loop",className:"bpmn-icon-loop-marker",title:n("Loop"),active:i,action:r,options:{loopCharacteristics:"bpmn:StandardLoopCharacteristics"}}]},An.prototype._getAdHocEntry=function(e){var t=this._translate,n=He(Ue(e),"bpmn:AdHocSubProcess"),r=this._bpmnReplace.replaceElement;return{id:"toggle-adhoc",className:"bpmn-icon-ad-hoc-marker",title:t("Ad-hoc"),active:n,action:function(t,a){return r(e,n?{type:"bpmn:Loop"}:{type:"bpmn:AdHocSubProcess"},{autoResize:!1,layoutConnection:!1})}}};var Rn={__depends__:[on.a,xn],__init__:["replaceMenuProvider"],replaceMenuProvider:["type",An]},Bn=n(68),Dn=Math.abs;var Fn=["bpmn:Participant","bpmn:Process-action","bpmn:Loop"],In=30;function Vn(e,t){return t=t||[],e.children.filter((function(e){return He(e,"bpmn:Lane")?(Vn(e,t),t.push(e),e):e})),t}function Gn(e){return e.children.filter((function(e){return He(e,"bpmn:Lane")}))}function Wn(e){return Bt(e,Fn)||e}function $n(e,t){var n=Wn(e),r=Vn(n,He(n,"bpmn:Process")?[]:[n]),a=Object(xt.b)(e),i=Object(xt.b)(t),o=function(e,t){return Object(Bn.f)(Object(xt.b)(t),Object(xt.b)(e))}(e,t),c=[];return r.forEach((function(t){if(t!==e){var n=0,r=o.right,s=0,l=o.left,u=Object(xt.b)(t);o.top&&(Dn(u.bottom-a.top)<10&&(s=i.top-u.bottom),Dn(u.top-a.top)<5&&(n=i.top-u.top)),o.bottom&&(Dn(u.top-a.bottom)<10&&(n=i.bottom-u.top),Dn(u.bottom-a.bottom)<5&&(s=i.bottom-u.bottom)),(n||r||s||l)&&c.push({shape:t,newBounds:Object(Bn.e)(t,{top:n,right:r,bottom:s,left:l})})}})),c}var zn=n(53);function Kn(e,t,n,r,a,i,o,c,s,l,u,p){e=e||{},r.registerProvider(this),this._contextPad=r,this._modeling=a,this._elementFactory=i,this._connect=o,this._create=c,this._popupMenu=s,this._canvas=l,this._rules=u,this._translate=p,!1!==e.autoPlace&&(this._autoPlace=t.get("autoPlace",!1)),n.on("create.end",250,(function(e){var t=e.context.shape;if(Object(zn.a)(e)&&r.isOpen(t)){var n=r.getEntries(t);n.replace&&n.replace.action.click(e,t)}}))}function qn(e,t,n){var r=e.$instanceOf(t),a=!1,i=e.eventDefinitions||[];return Object(P.i)(i,(function(e){e.$type===n&&(a=!0)})),r&&a}Kn.$inject=["config.contextPad","injector","eventBus","contextPad","modeling","elementFactory","connect","create","popupMenu","canvas","rules","translate"],Kn.prototype.getContextPadEntries=function(e){var t=this._contextPad,n=this._modeling,r=this._elementFactory,a=this._connect,i=this._create,o=this._popupMenu,c=this._canvas,s=this._rules,l=this._autoPlace,u=this._translate,p={};if("label"===e.type)return p;var d=e.businessObject;function h(e,t){a.start(e,t)}function f(e,t,n,a){function o(t,n){var o=r.createShape(Object(P.a)({type:e},a));i.start(t,o,{source:n})}return"string"!==typeof n&&(a=n,n=u("Append {type}",{type:e.replace(/^bpmn:/,"")})),{group:"model",className:t,title:n,action:{dragstart:o,click:l?function(t,n){var i=r.createShape(Object(P.a)({type:e},a));l.append(n,i)}:o}}}function m(e){return function(r,a){n.splitLane(a,e),t.open(a,!0)}}if(Rt(d,["bpmn:Lane","bpmn:Participant"])&&Ye(d)){var b=Gn(e);Object(P.a)(p,{"lane-insert-above":{group:"lane-insert-above",className:"bpmn-icon-lane-insert-above",title:u("Add Lane above"),action:{click:function(e,t){n.addLane(t,"top")}}}}),b.length<2&&(e.height>=120&&Object(P.a)(p,{"lane-divide-two":{group:"lane-divide",className:"bpmn-icon-lane-divide-two",title:u("Divide into two Lanes"),action:{click:m(2)}}}),e.height>=180&&Object(P.a)(p,{"lane-divide-three":{group:"lane-divide",className:"bpmn-icon-lane-divide-three",title:u("Divide into three Lanes"),action:{click:m(3)}}})),Object(P.a)(p,{"lane-insert-below":{group:"lane-insert-below",className:"bpmn-icon-lane-insert-below",title:u("Add Lane below"),action:{click:function(e,t){n.addLane(t,"bottom")}}}})}He(d,"bpmn:FlowNode")&&(He(d,"bpmn:EventBasedGateway")?Object(P.a)(p,{"append.receive-task":f("bpmn:ReceiveTask","bpmn-icon-receive-task",u("Append ReceiveTask")),"append.message-intermediate-event":f("bpmn:IntermediateCatchEvent","bpmn-icon-intermediate-event-catch-message",u("Append MessageIntermediateCatchEvent"),{eventDefinitionType:"bpmn:MessageEventDefinition"}),"append.timer-intermediate-event":f("bpmn:IntermediateCatchEvent","bpmn-icon-intermediate-event-catch-timer",u("Append TimerIntermediateCatchEvent"),{eventDefinitionType:"bpmn:TimerEventDefinition"}),"append.condition-intermediate-event":f("bpmn:IntermediateCatchEvent","bpmn-icon-intermediate-event-catch-condition",u("Append ConditionIntermediateCatchEvent"),{eventDefinitionType:"bpmn:ConditionalEventDefinition"}),"append.signal-intermediate-event":f("bpmn:IntermediateCatchEvent","bpmn-icon-intermediate-event-catch-signal",u("Append SignalIntermediateCatchEvent"),{eventDefinitionType:"bpmn:SignalEventDefinition"})}):qn(d,"bpmn:BoundaryEvent","bpmn:CompensateEventDefinition")?Object(P.a)(p,{"append.compensation-activity":f("bpmn:Task","bpmn-icon-task",u("Append compensation activity"),{isForCompensation:!0})}):He(d,"bpmn:EndEvent")||d.isForCompensation||qn(d,"bpmn:IntermediateThrowEvent","bpmn:LinkEventDefinition")||Je(d)||Object(P.a)(p,{"append.end-event":f("bpmn:EndEvent","bpmn-icon-end-event-none",u("Append EndEvent")),"append.gateway":f("bpmn:ExclusiveGateway","bpmn-icon-gateway-none",u("Append Gateway")),"append.append-task":f("bpmn:Task","bpmn-icon-task",u("Append Task")),"append.intermediate-event":f("bpmn:IntermediateThrowEvent","bpmn-icon-intermediate-event-none",u("Append Intermediate/Boundary Event"))})),o.isEmpty(e,"bpmn-replace")||Object(P.a)(p,{replace:{group:"edit",className:"bpmn-icon-screw-wrench",title:u("Change type"),action:{click:function(e,n){var r=Object(P.a)(function(e){var n=c.getContainer(),r=t.getPad(e).html,a=n.getBoundingClientRect(),i=r.getBoundingClientRect(),o=i.top-a.top;return{x:i.left-a.left,y:o+i.height+5}}(n),{cursor:{x:e.x,y:e.y}});o.open(n,"bpmn-replace",r)}}}}),Rt(d,["bpmn:FlowNode","bpmn:InteractionNode","bpmn:DataObjectReference","bpmn:DataStoreReference"])&&Object(P.a)(p,{"append.text-annotation":f("bpmn:TextAnnotation","bpmn-icon-text-annotation"),connect:{group:"connect",className:"bpmn-icon-connection-multi",title:u("Connect using "+(d.isForCompensation?"":"Sequence/MessageFlow or ")+"Association"),action:{click:h,dragstart:h}}}),Rt(d,["bpmn:DataObjectReference","bpmn:DataStoreReference"])&&Object(P.a)(p,{connect:{group:"connect",className:"bpmn-icon-connection-multi",title:u("Connect using DataInputAssociation"),action:{click:h,dragstart:h}}});var v=s.allowed("elements.delete",{elements:[e]});return Object(P.l)(v)&&(v=v[0]===e),v&&Object(P.a)(p,{delete:{group:"edit",className:"bpmn-icon-trash",title:u("Remove"),action:{click:function(t){n.removeElements([e])}}}}),p};var Hn={__depends__:[nn.a,rn.a,kt.a,en.a,an.a,Rn],__init__:["contextPadProvider"],contextPadProvider:["type",Kn]},Un=n(397);function Yn(e){e.registerFilter((function(e){return Object(P.e)(e,(function(e){var t=Rt(e,["bpmn:Association","bpmn:BoundaryEvent","bpmn:DataInputAssociation","bpmn:DataOutputAssociation","bpmn:Lane","bpmn:MessageFlow","bpmn:Participant","bpmn:SequenceFlow","bpmn:TextAnnotation"]);return!(e.labelTarget||t)}))}))}Yn.$inject=["distributeElements"];var Jn={__depends__:[Un.a],__init__:["bpmnDistributeElements"],bpmnDistributeElements:["type",Yn]},Xn=n(346),Qn=n(144),Zn=n(20);function er(e){e.invoke(Qn.a,this)}L()(er,Qn.a),er.$inject=["injector"],er.prototype._registerDefaultActions=function(e){Qn.a.prototype._registerDefaultActions.call(this,e);var t=e.get("canvas",!1),n=e.get("elementRegistry",!1),r=e.get("selection",!1),a=e.get("spaceTool",!1),i=e.get("lassoTool",!1),o=e.get("handTool",!1),c=e.get("globalConnect",!1),s=e.get("distributeElements",!1),l=e.get("alignElements",!1),u=e.get("directEditing",!1),p=e.get("searchPad",!1),d=e.get("modeling",!1);t&&n&&r&&this._registerAction("selectElements",(function(){var e=t.getRootElement(),a=n.filter((function(t){return t!==e}));return r.select(a),a})),a&&this._registerAction("spaceTool",(function(){a.toggle()})),i&&this._registerAction("lassoTool",(function(){i.toggle()})),o&&this._registerAction("handTool",(function(){o.toggle()})),c&&this._registerAction("globalConnectTool",(function(){c.toggle()})),r&&s&&this._registerAction("distributeElements",(function(e){var t=r.get(),n=e.type;t.length&&s.trigger(t,n)})),r&&l&&this._registerAction("alignElements",(function(e){var t=r.get(),n=[],a=e.type;t.length&&(n=Object(P.e)(t,(function(e){return!He(e,"bpmn:Lane")})),l.trigger(n,a))})),r&&d&&this._registerAction("setColor",(function(e){var t=r.get();t.length&&d.setColor(t,e)})),r&&u&&this._registerAction("directEditing",(function(){var e=r.get();e.length&&u.activate(e[0])})),p&&this._registerAction("find",(function(){p.toggle()})),t&&d&&this._registerAction("moveToOrigin",(function(){var e,r,a=t.getRootElement();r=He(a,"bpmn:Collaboration")?n.filter((function(e){return He(e.parent,"bpmn:Collaboration")})):n.filter((function(e){return e!==a&&!He(e.parent,"bpmn:Loop")})),e=Object(Zn.b)(r),d.moveElements(r,{x:-e.x,y:-e.y},a)}))};var tr={__depends__:[Xn.a],editorActions:["type",er]};function nr(e){e.on(["create.init","shape.move.init"],(function(e){var t=e.context;Rt(e.shape,["bpmn:Participant","bpmn:Loop","bpmn:Conditional","bpmn:TextAnnotation"])&&(t.gridSnappingContext||(t.gridSnappingContext={}),t.gridSnappingContext.snapLocation="top-left")}))}nr.$inject=["eventBus"];var rr=n(386);function ar(e,t){e.on("autoPlace",(function(e){var n=e.source,r=Object(xt.e)(n),a=e.shape,i=Dt(n,a);return["x","y"].forEach((function(e){var n={};i[e]!==r[e]&&(i[e]>r[e]?n.min=i[e]:n.max=i[e],He(a,"bpmn:TextAnnotation")&&(!function(e){return"x"===e}(e)?n.offset=-a.height/2:n.offset=-a.width/2),i[e]=t.snapValue(i[e],n))})),i}))}ar.$inject=["eventBus","gridSnapping"];function ir(e,t,n){t.on(["create.start","shape.move.start"],1750,(function(t){var r=t.context,a=r.shape,i=e.getRootElement();He(a,"bpmn:Participant")&&He(i,"bpmn:Process-action")&&i.children.length&&(r.createConstraints&&(a.width=n.snapValue(a.width,{min:a.width}),a.height=n.snapValue(a.height,{min:a.height})))}))}ir.$inject=["canvas","eventBus","gridSnapping"];var or=n(15),cr=n(37);function sr(e,t,n){or.a.call(this,e),this._gridSnapping=t;var r=this;this.postExecuted(["connection.create","connection.layout"],3e3,(function(e){var t=e.context,a=t.connection,i=t.hints||{},o=a.waypoints;i.connectionStart||i.connectionEnd||!1===i.createElementsBehavior||function(e){return e.length>3}(o)&&n.updateWaypoints(a,r.snapMiddleSegments(o))}))}function lr(e,t,n){var r=Object(cr.d)(t,n),a={};return function(e){return"h"===e}(r)&&(a.y=e.snapValue(t.y)),function(e){return"v"===e}(r)&&(a.x=e.snapValue(t.x)),("x"in a||"y"in a)&&(t=Object(P.a)({},t,a),n=Object(P.a)({},n,a)),[t,n]}sr.$inject=["eventBus","gridSnapping","modeling"],L()(sr,or.a),sr.prototype.snapMiddleSegments=function(e){var t,n=this._gridSnapping;e=e.slice();for(var r=1;r<e.length-2;r++)t=lr(n,e[r],e[r+1]),e[r]=t[0],e[r+1]=t[1];return e};var ur={__init__:["gridSnappingAutoPlaceBehavior","gridSnappingCreateParticipantBehavior","gridSnappingLayoutConnectionBehavior"],gridSnappingAutoPlaceBehavior:["type",ar],gridSnappingCreateParticipantBehavior:["type",ir],gridSnappingLayoutConnectionBehavior:["type",sr]},pr={__depends__:[rr.a,ur],__init__:["bpmnGridSnapping"],bpmnGridSnapping:["type",nr]};function dr(e,t){this._interactionEvents=t;var n=this;e.on(["interactionEvents.createHit","interactionEvents.updateHit"],(function(e){var t=e.element,r=e.gfx;return He(t,"bpmn:Lane")?n.createParticipantHit(t,r):He(t,"bpmn:Participant")?Ye(t)?n.createParticipantHit(t,r):n.createDefaultHit(t,r):He(t,"bpmn:Loop")||He(t,"bpmn:Conditional")?Ye(t)?n.createLoopHit(t,r):n.createDefaultHit(t,r):void 0}))}dr.$inject=["eventBus","interactionEvents"],dr.prototype.createDefaultHit=function(e,t){return this._interactionEvents.removeHits(t),this._interactionEvents.createDefaultHit(e,t),!0},dr.prototype.createParticipantHit=function(e,t){return this._interactionEvents.removeHits(t),this._interactionEvents.createBoxHit(t,"click-stroke",{width:e.width,height:e.height}),this._interactionEvents.createBoxHit(t,"all",{width:30,height:e.height}),!0},dr.prototype.createLoopHit=function(e,t){return this._interactionEvents.removeHits(t),this._interactionEvents.createBoxHit(t,"click-stroke",{width:e.width,height:e.height}),this._interactionEvents.createBoxHit(t,"all",{width:e.width,height:30}),!0};var hr={__init__:["bpmnInteractionEvents"],bpmnInteractionEvents:["type",dr]},fr=n(140),mr=n(143);function br(e){e.invoke(mr.a,this)}L()(br,mr.a),br.$inject=["injector"],br.prototype.registerBindings=function(e,t){function n(n,r){t.isRegistered(n)&&e.addListener(r)}mr.a.prototype.registerBindings.call(this,e,t),n("selectElements",(function(n){var r=n.keyEvent;if(e.isKey(["a","A"],r)&&e.isCmd(r))return t.trigger("selectElements"),!0})),n("find",(function(n){var r=n.keyEvent;if(e.isKey(["f","F"],r)&&e.isCmd(r))return t.trigger("find"),!0})),n("spaceTool",(function(n){var r=n.keyEvent;if(!e.hasModifier(r))return e.isKey(["s","S"],r)?(t.trigger("spaceTool"),!0):void 0})),n("lassoTool",(function(n){var r=n.keyEvent;if(!e.hasModifier(r))return e.isKey(["l","L"],r)?(t.trigger("lassoTool"),!0):void 0})),n("handTool",(function(n){var r=n.keyEvent;if(!e.hasModifier(r))return e.isKey(["h","H"],r)?(t.trigger("handTool"),!0):void 0})),n("globalConnectTool",(function(n){var r=n.keyEvent;if(!e.hasModifier(r))return e.isKey(["c","C"],r)?(t.trigger("globalConnectTool"),!0):void 0})),n("directEditing",(function(n){var r=n.keyEvent;if(!e.hasModifier(r))return e.isKey(["e","E"],r)?(t.trigger("directEditing"),!0):void 0}))};var vr={__depends__:[fr.a],__init__:["keyboardBindings"],keyboardBindings:["type",br]},yr=n(395),gr=n(208),xr=n(201),jr=n(19);function wr(e,t){var n=t.create("bpmn:CategoryValue"),r=t.create("bpmn:Category",{categoryValue:[n]});return Object(jr.a)(e.get("rootElements"),r),Ue(r).$parent=e,Ue(n).$parent=r,n}function Or(e,t,n,r,a,i,o){function c(e,t){(t||Rt(e,["bpmn:Task","bpmn:TextAnnotation","bpmn:Group"])||Er(e))&&r.activate(e)}this._bpmnFactory=t,this._canvas=n,this._modeling=a,this._textRenderer=o,r.registerProvider(this),e.on("element.dblclick",(function(e){c(e.element,!0)})),e.on(["autoPlace.start","canvas.viewbox.changing","drag.init","element.mousedown","popupMenu.open"],(function(e){r.isActive()&&r.complete()})),e.on(["commandStack.changed"],(function(e){r.isActive()&&r.cancel()})),e.on("directEditing.activate",(function(e){i.removeResizers()})),e.on("create.end",500,(function(e){var t=e.context,n=t.shape,r=e.context.canExecute;e.isTouch||r&&(t.hints&&!1===t.hints.createElementsBehavior||c(n))})),e.on("autoPlace.end",500,(function(e){c(e.shape)}))}function Er(e){return He(e,"bpmn:Loop")&&!Ye(e)||He(e,"bpmn:Conditional")&&!Ye(e)}Or.$inject=["eventBus","bpmnFactory","canvas","directEditing","modeling","resizeHandles","textRenderer"],Or.prototype.activate=function(e){var t=Ze(e);if(void 0!==t){var n={text:t},r=this.getEditingBBox(e);Object(P.a)(n,r);var a={};return(Rt(e,["bpmn:Task","bpmn:Participant","bpmn:Lane","bpmn:CallActivity"])||Er(e))&&Object(P.a)(a,{centerVertically:!0}),mt(e)&&Object(P.a)(a,{autoResize:!0}),He(e,"bpmn:TextAnnotation")&&Object(P.a)(a,{resizable:!0,autoResize:!0}),Object(P.a)(n,{options:a}),n}},Or.prototype.getEditingBBox=function(e){var t=this._canvas,n=e.label||e,r=t.getAbsoluteBBox(n),a=r.x+r.width/2,i=r.y+r.height/2,o={x:r.x,y:r.y},c=t.zoom(),s=this._textRenderer.getDefaultStyle(),l=this._textRenderer.getExternalStyle(),u=l.fontSize*c,p=l.lineHeight,d=s.fontSize*c,h=s.lineHeight,f={fontFamily:this._textRenderer.getDefaultStyle().fontFamily,fontWeight:this._textRenderer.getDefaultStyle().fontWeight};(He(e,"bpmn:Lane")||function(e){return He(e,"bpmn:Participant")&&Ye(e)}(e))&&(Object(P.a)(o,{width:r.height,height:30*c,x:r.x-r.height/2+15*c,y:i-30*c/2}),Object(P.a)(f,{fontSize:d+"px",lineHeight:h,paddingTop:7*c+"px",paddingBottom:7*c+"px",paddingLeft:5*c+"px",paddingRight:5*c+"px",transform:"rotate(-90deg)"})),(Rt(e,["bpmn:Task","bpmn:CallActivity"])||function(e){return He(e,"bpmn:Participant")&&!Ye(e)}(e)||Er(e))&&(Object(P.a)(o,{width:r.width,height:r.height}),Object(P.a)(f,{fontSize:d+"px",lineHeight:h,paddingTop:7*c+"px",paddingBottom:7*c+"px",paddingLeft:5*c+"px",paddingRight:5*c+"px"})),function(e){return He(e,"bpmn:Loop")&&Ye(e)||He(e,"bpmn:Conditional")&&Ye(e)}(e)&&(Object(P.a)(o,{width:r.width,x:r.x}),Object(P.a)(f,{fontSize:d+"px",lineHeight:h,paddingTop:7*c+"px",paddingBottom:7*c+"px",paddingLeft:5*c+"px",paddingRight:5*c+"px"}));var m=90*c,b=7*c,v=4*c;if(n.labelTarget&&(Object(P.a)(o,{width:m,height:r.height+b+v,x:a-m/2,y:r.y-b}),Object(P.a)(f,{fontSize:u+"px",lineHeight:p,paddingTop:b+"px",paddingBottom:v+"px"})),mt(n)&&!bt(n)&&!gt(n)){var y=yt(e),g=t.getAbsoluteBBox({x:y.x,y:y.y,width:0,height:0}),x=u+b+v;Object(P.a)(o,{width:m,height:x,x:g.x-m/2,y:g.y-x/2}),Object(P.a)(f,{fontSize:u+"px",lineHeight:p,paddingTop:b+"px",paddingBottom:v+"px"})}return He(e,"bpmn:TextAnnotation")&&(Object(P.a)(o,{width:r.width,height:r.height,minWidth:30*c,minHeight:10*c}),Object(P.a)(f,{textAlign:"left",paddingTop:5*c+"px",paddingBottom:7*c+"px",paddingLeft:7*c+"px",paddingRight:5*c+"px",fontSize:d+"px",lineHeight:h})),{bounds:o,style:f}},Or.prototype.update=function(e,t,n,r){var a,i,o;if((He(e,"bpmn:TextAnnotation")&&(i=this._canvas.getAbsoluteBBox(e),a={x:e.x,y:e.y,width:e.width/i.width*r.width,height:e.height/i.height*r.height}),He(e,"bpmn:Group"))&&!Ue(e).categoryValueRef){var c=wr(Ue(this._canvas.getRootElement()).$parent,this._bpmnFactory);Ue(e).categoryValueRef=c}(o=t)&&o.trim()||(t=null),this._modeling.updateLabel(e,t,a)};var Nr="djs-element-hidden",kr="djs-label-hidden";function Sr(e,t,n,r){var a,i,o,c=this,s=t.getDefaultLayer();e.on("directEditing.activate",(function(e){var n=e.active;if(He(a=n.element.label||n.element,"bpmn:TextAnnotation")){i=t.getAbsoluteBBox(a),o=Object(M.f)("g");var l=r.getScaledPath("TEXT_ANNOTATION",{xScaleFactor:1,yScaleFactor:1,containerWidth:a.width,containerHeight:a.height,position:{mx:0,my:0}}),u=c.path=Object(M.f)("path");Object(M.b)(u,{d:l,strokeWidth:2,stroke:_r(a)}),Object(M.a)(o,u),Object(M.a)(s,o),Object(qe.c)(o,a.x,a.y)}He(a,"bpmn:TextAnnotation")||a.labelTarget?t.addMarker(a,Nr):(He(a,"bpmn:Task")||He(a,"bpmn:CallActivity")||He(a,"bpmn:Loop")||He(a,"bpmn:Conditional")||He(a,"bpmn:Participant"))&&t.addMarker(a,kr)})),e.on("directEditing.resize",(function(e){if(He(a,"bpmn:TextAnnotation")){var t=e.height,n=e.dy,o=Math.max(a.height/i.height*(t+n),0),s=r.getScaledPath("TEXT_ANNOTATION",{xScaleFactor:1,yScaleFactor:1,containerWidth:a.width,containerHeight:o,position:{mx:0,my:0}});Object(M.b)(c.path,{d:s})}})),e.on(["directEditing.complete","directEditing.cancel"],(function(e){var n=e.active;n&&(t.removeMarker(n.element.label||n.element,Nr),t.removeMarker(a,kr)),a=void 0,i=void 0,o&&(Object(M.j)(o),o=void 0)}))}function _r(e,t){return Ue(e).di.get("stroke")||t||"black"}Sr.$inject=["eventBus","canvas","elementRegistry","pathMap"];var Lr={__depends__:[gr.a,xr.a,nn.a],__init__:["labelEditingProvider","labelEditingPreview"],labelEditingProvider:["type",Or],labelEditingPreview:["type",Sr]},Cr=n(46),Pr=["top","bottom","left","right"],Tr=10;function Mr(e,t){function n(e){if(bt(e)){var n=function(e){var t=Object(xt.e)(e.label),n=Ar(Object(xt.e)(e),t);if(r=n,-1===Pr.indexOf(r))return;var r;var a=function(e){var t=Object(xt.e)(e);return[].concat(e.incoming.map((function(e){return e.waypoints[e.waypoints.length-2]})),e.outgoing.map((function(e){return e.waypoints[1]}))).map((function(e){return Ar(t,e)}))}(e);if(e.host){var i=function(e){var t,n=e.host,r=Object(xt.e)(e),a=Object(xt.f)(r,n);t=a.indexOf("-")>=0?a.split("-"):[a];return Pr.filter((function(e){return-1===t.indexOf(e)}))}(e);a=a.concat(i)}var o=Pr.filter((function(e){return-1===a.indexOf(e)}));if(-1!==o.indexOf(n))return;return o[0]}(e);n&&function(e,n){var r=Object(xt.e)(e),a=e.label,i=Object(xt.e)(a);if(!a.parent)return;var o,c=Object(xt.b)(e);switch(n){case"top":o={x:r.x,y:c.top-Tr-a.height/2};break;case"left":o={x:c.left-Tr-a.width/2,y:r.y};break;case"bottom":o={x:r.x,y:c.bottom+Tr+a.height/2};break;case"right":o={x:c.right+Tr+a.width/2,y:r.y}}var s=Object(Cr.b)(o,i);t.moveShape(a,s)}(e,n)}}or.a.call(this,e),this.postExecuted(["connection.create","connection.layout","connection.updateWaypoints"],(function(e){var t=e.context,r=t.connection,a=r.source,i=r.target;!1!==(t.hints||{}).createElementsBehavior&&(n(a),n(i))})),this.postExecuted(["label.create"],(function(e){var t=e.context,r=t.shape;!1!==(t.hints||{}).createElementsBehavior&&n(r.labelTarget)})),this.postExecuted(["elements.create"],(function(e){var t=e.context,r=t.elements;!1!==(t.hints||{}).createElementsBehavior&&r.forEach((function(e){n(e)}))}))}function Ar(e,t){return Object(xt.f)(t,e,5)}function Rr(e,t,n){or.a.call(this,e),this.preExecute("shape.append",(function(e){var t=e.source,n=e.shape;e.position||(He(n,"bpmn:TextAnnotation")?e.position={x:t.x+t.width/2+75,y:t.y-50-n.height/2}:e.position={x:t.x+t.width+80+n.width/2,y:t.y+t.height/2})}),!0)}function Br(e,t){e.invoke(or.a,this),this.postExecute("shape.move",(function(e){var n=e.newParent,r=e.shape,a=Object(P.e)(r.incoming.concat(r.outgoing),(function(e){return He(e,"bpmn:Association")}));Object(P.i)(a,(function(e){t.moveConnection(e,{x:0,y:0},n)}))}),!0)}L()(Mr,or.a),Mr.$inject=["eventBus","modeling"],L()(Rr,or.a),Rr.$inject=["eventBus","elementFactory","bpmnRules"],L()(Br,or.a),Br.$inject=["injector","modeling"];function Dr(e,t){t.invoke(or.a,this),this._bpmnReplace=e;var n=this;this.postExecuted("elements.create",500,(function(e){var t=e.elements;1===(t=t.filter((function(e){return Fr(e,e.host)}))).length&&t.map((function(e){return t.indexOf(e)})).forEach((function(r){var a=t[r];e.elements[r]=n.replaceShape(t[r],a)}))}),!0),this.preExecute("elements.move",500,(function(e){var t=e.shapes,r=e.newHost;if(1===t.length){var a=t[0];Fr(a,r)&&(e.shapes=[n.replaceShape(a,r)])}}),!0)}function Fr(e,t){return!gt(e)&&Rt(e,["bpmn:IntermediateThrowEvent","bpmn:IntermediateCatchEvent"])&&!!t}function Ir(e,t){function n(e){return Object(P.e)(e.attachers,(function(e){return He(e,"bpmn:BoundaryEvent")}))}or.a.call(this,e),this.postExecute("connection.create",(function(e){var r=e.context.source,a=e.context.target,i=n(a);He(r,"bpmn:EventBasedGateway")&&He(a,"bpmn:ReceiveTask")&&i.length>0&&t.removeElements(i)})),this.postExecute("connection.reconnect",(function(e){var r=e.context.oldSource,a=e.context.newSource;He(r,"bpmn:Gateway")&&He(a,"bpmn:EventBasedGateway")&&Object(P.i)(a.outgoing,(function(e){var r=e.target,a=n(r);He(r,"bpmn:ReceiveTask")&&a.length>0&&t.removeElements(a)}))}))}Dr.$inject=["bpmnReplace","injector"],L()(Dr,or.a),Dr.prototype.replaceShape=function(e,t){var n=function(e){var t=Ue(e).eventDefinitions;return t&&t[0]}(e),r={type:"bpmn:BoundaryEvent",host:t};return n&&(r.eventDefinitionType=n.$type),this._bpmnReplace.replaceElement(e,r,{layoutConnection:!1})},Ir.$inject=["eventBus","modeling"],L()(Ir,or.a);function Vr(e,t,n,r,a){function i(e){return Rt(e,["bpmn:ReceiveTask","bpmn:SendTask"])||function(e,t){Object(P.l)(t)||(t=[t]);return Object(P.A)(t,(function(t){return Xe(e,t)}))}(e,["bpmn:ErrorEventDefinition","bpmn:EscalationEventDefinition","bpmn:MessageEventDefinition","bpmn:SignalEventDefinition"])}function o(t){var n=e.getDefinitions().get("rootElements");return!!Object(P.f)(n,Object(P.v)({id:t.id}))}function c(e){return He(e,"bpmn:ErrorEventDefinition")?"errorRef":He(e,"bpmn:EscalationEventDefinition")?"escalationRef":He(e,"bpmn:MessageEventDefinition")?"messageRef":He(e,"bpmn:SignalEventDefinition")?"signalRef":void 0}function s(e){if(Rt(e,["bpmn:ReceiveTask","bpmn:SendTask"]))return e.get("messageRef");var t=e.get("eventDefinitions")[0];return t.get(c(t))}n.invoke(or.a,this),this.executed("shape.create",(function(t){var n=t.shape;if(i(n)){var r,a=s(Ue(n));a&&!o(a)&&(r=e.getDefinitions().get("rootElements"),Object(jr.a)(r,a),t.addedRootElement=a)}}),!0),this.reverted("shape.create",(function(t){var n=t.addedRootElement;if(n){var r=e.getDefinitions().get("rootElements");Object(jr.c)(r,n)}}),!0),t.on("copyPaste.copyElement",(function(e){var t=e.descriptor,n=e.element;if(i(n)){var r=s(Ue(n));r&&(t.referencedRootElement=r)}})),t.on("copyPaste.pasteElement",500,(function(e){var t=e.descriptor,n=t.businessObject;if(i(n)){var s=t.referencedRootElement;s&&(o(s)||(s=r.copyElement(s,a.create(s.$type))),function(e,t){if(Rt(e,["bpmn:ReceiveTask","bpmn:SendTask"]))return e.set("messageRef",t);var n=e.get("eventDefinitions")[0];n.set(c(n),t)}(n,s))}}))}function Gr(e){e.invoke(or.a,this),this.preExecute("shape.create",1500,(function(e){var t=e.context,n=t.parent,r=t.shape;He(n,"bpmn:Lane")&&!He(r,"bpmn:Lane")&&(t.parent=Bt(n,"bpmn:Participant"))}))}Vr.$inject=["bpmnjs","eventBus","injector","moddleCopy","bpmnFactory"],L()(Vr,or.a),Gr.$inject=["injector"],L()(Gr,or.a);var Wr=1500;function $r(e,t,n){t.on(["create.hover","create.move","create.end","shape.move.hover","shape.move.move","shape.move.end"],Wr,(function(t){var r=t.context.shape||t.shape,a=t.hover;He(a,"bpmn:Lane")&&!Rt(r,["bpmn:Lane","bpmn:Participant"])&&(t.hover=Wn(a),t.hoverGfx=e.getGraphics(t.hover));var i=n.getRootElement();a!==i&&(r.labelTarget||He(r,"bpmn:Group"))&&(t.hover=i,t.hoverGfx=e.getGraphics(t.hover))})),t.on(["connect.hover","connect.out","connect.end","connect.cleanup","global-connect.hover","global-connect.out","global-connect.end","global-connect.cleanup"],Wr,(function(t){var n=t.hover;He(n,"bpmn:Lane")&&(t.hover=Wn(n)||n,t.hoverGfx=e.getGraphics(t.hover))})),t.on(["bendpoint.move.hover"],Wr,(function(t){var n=t.context,r=t.hover,a=n.type;He(r,"bpmn:Lane")&&/reconnect/.test(a)&&(t.hover=Wn(r)||r,t.hoverGfx=e.getGraphics(t.hover))})),t.on(["connect.start"],Wr,(function(e){var t=e.context,n=t.start;He(n,"bpmn:Lane")&&(t.start=Wn(n)||n)})),t.on("shape.move.start",2e3,(function(e){var t=e.shape;He(t,"bpmn:Lane")&&(e.shape=Wn(t)||t)}))}function zr(e,t,n){or.a.call(this,e),this.preExecute("shape.create",(function(e){var n=e.context.shape;if(He(n,"bpmn:DataObjectReference")&&"label"!==n.type){var r=t.create("bpmn:DataObject");n.businessObject.dataObjectRef=r}}))}$r.$inject=["elementRegistry","eventBus","canvas"],zr.$inject=["eventBus","bpmnFactory","moddle"],L()(zr,or.a);var Kr=20,qr=20,Hr=2e3;function Ur(e,t,n){function r(t){var r,a=t.parent,i=e.getRootElement();He(i,"bpmn:Collaboration")?r=i:(r=n.makeCollaboration(),t.process=a),t.parent=r}or.a.call(this,t),t.on(["create.start","shape.move.start"],Hr,(function(t){var n=t.context,r=n.shape,a=e.getRootElement();if(He(r,"bpmn:Participant")&&He(a,"bpmn:Process-action")&&a.children.length){var i=a.children.filter((function(e){return!He(e,"bpmn:Group")&&!gt(e)&&!function(e){return!!e.waypoints}(e)}));if(i.length){var o=Object(Zn.b)(i),c=function(e,t){t={width:t.width+40+30,height:t.height+40};var n=Math.max(e.width,t.width),r=Math.max(e.height,t.height);return{x:-n/2,y:-r/2,width:n,height:r}}(r,o);Object(P.a)(r,c),n.createConstraints=function(e,t){return{bottom:(t=Object(xt.b)(t)).top+e.height/2-qr,left:t.right-e.width/2+Kr,top:t.bottom-e.height/2+qr,right:t.left+e.width/2-Kr-30}}(r,o)}}})),t.on("create.start",Hr,(function(n){var r=n.context.shape,a=e.getRootElement(),i=e.getGraphics(a);function o(e){e.element=a,e.gfx=i}He(r,"bpmn:Participant")&&He(a,"bpmn:Process-action")&&(t.on("element.hover",Hr,o),t.once("create.cleanup",(function(){t.off("element.hover",o)})))})),this.preExecute("shape.create",(function(e){var t=e.parent;He(e.shape,"bpmn:Participant")&&He(t,"bpmn:Process-action")&&r(e)}),!0),this.execute("shape.create",(function(e){var t=e.process,n=e.shape;t&&(e.oldProcessRef=n.businessObject.processRef,n.businessObject.processRef=t.businessObject)}),!0),this.revert("shape.create",(function(e){var t=e.process,n=e.shape;t&&(n.businessObject.processRef=e.oldProcessRef)}),!0),this.postExecute("shape.create",(function(e){var t=e.process,r=e.shape;if(t){var a=t.children.slice();n.moveElements(a,{x:0,y:0},r)}}),!0),this.preExecute("elements.create",Hr,(function(e){var t,n=e.elements,a=e.parent;Yr(n)&&He(a,"bpmn:Process-action")&&(r(e),t=Yr(n),e.oldProcessRef=t.businessObject.processRef,t.businessObject.processRef=a.businessObject)}),!0),this.revert("elements.create",(function(e){var t=e.elements;e.process&&(Yr(t).businessObject.processRef=e.oldProcessRef)}),!0),this.postExecute("elements.create",(function(e){var t,r=e.elements,a=e.process;if(a){t=Yr(r);var i=a.children.slice();n.moveElements(i,{x:0,y:0},t)}}),!0)}function Yr(e){return Object(P.f)(e,(function(e){return He(e,"bpmn:Participant")}))}Ur.$inject=["canvas","eventBus","modeling"],L()(Ur,or.a);var Jr="__targetRef_placeholder";function Xr(e,t){function n(e,n){var r=e.get("properties"),a=Object(P.f)(r,(function(e){return e.name===Jr}));return!a&&n&&(a=t.create("bpmn:Property",{name:Jr}),Object(jr.a)(r,a)),a}function r(e,t){var r=n(e);r&&(function(e,t,n){var r=e.get("dataInputAssociations");return Object(P.f)(r,(function(e){return e!==n&&e.targetRef===t}))}(e,r,t)||Object(jr.c)(e.get("properties"),r))}function a(e){var t,a=e.context,i=a.connection,o=i.businessObject,c=i.target,s=c&&c.businessObject,l=a.newTarget,u=l&&l.businessObject,p=a.oldTarget||a.target,d=p&&p.businessObject,h=i.businessObject;d&&d!==s&&r(d,o),u&&u!==s&&r(u,o),s?(t=n(s,!0),h.targetRef=t):h.targetRef=null}or.a.call(this,e),this.executed(["connection.create","connection.delete","connection.move","connection.reconnect"],Qr(a)),this.reverted(["connection.create","connection.delete","connection.move","connection.reconnect"],Qr(a))}function Qr(e){return function(t){if(He(t.context.connection,"bpmn:DataInputAssociation"))return e(t)}}function Zr(e){this._bpmnUpdater=e}function ea(e,t,n,r){function a(e){return e.children.filter((function(e){return He(e,"bpmn:DataStoreReference")&&!e.labelTarget}))}function i(e,r){var a=e.businessObject||e;if(r=r||n.filter((function(e){return He(e,"bpmn:Participant")}))[0]){var i=r.businessObject||r;t.execute("dataStore.updateContainment",{dataStoreBo:a,newSemanticParent:i.processRef||i,newDiParent:i.di})}}or.a.call(this,r),t.registerHandler("dataStore.updateContainment",Zr),this.preExecute("shape.create",(function(e){var t=e.context,n=t.shape;He(n,"bpmn:DataStoreReference")&&"label"!==n.type&&(t.hints||(t.hints={}),t.hints.autoResize=!1)})),this.preExecute("elements.move",(function(e){var t=e.context,n=t.shapes;n.filter((function(e){return He(e,"bpmn:DataStoreReference")})).length&&(t.hints||(t.hints={}),t.hints.autoResize=n.filter((function(e){return!He(e,"bpmn:DataStoreReference")})))})),this.postExecute("shape.create",(function(e){var t=e.context.shape,n=t.parent;He(t,"bpmn:DataStoreReference")&&"label"!==t.type&&He(n,"bpmn:Collaboration")&&i(t)})),this.postExecute("shape.move",(function(e){var t=e.context,n=t.shape,r=t.oldParent,a=n.parent;He(r,"bpmn:Collaboration")||He(n,"bpmn:DataStoreReference")&&"label"!==n.type&&He(a,"bpmn:Collaboration")&&i(n,He(r,"bpmn:Participant")?r:function(e,t){for(;e.parent;){if(He(e.parent,t))return e.parent;e=e.parent}}(r,"bpmn:Participant"))})),this.postExecute("shape.delete",(function(t){var n=t.context.shape,r=e.getRootElement();Rt(n,["bpmn:Participant","bpmn:Loop","bpmn:Conditional"])&&He(r,"bpmn:Collaboration")&&a(r).filter((function(e){return function(e,t){var n=e.businessObject||e,r=t.businessObject||t;for(;n.$parent;){if(n.$parent===r.processRef||r)return!0;n=n.$parent}return!1}(e,n)})).forEach((function(e){i(e)}))})),this.postExecute("canvas.updateRoot",(function(e){var t=e.context,n=t.oldRoot,r=t.newRoot;a(n).forEach((function(e){He(r,"bpmn:Process-action")&&i(e,r)}))}))}Xr.$inject=["eventBus","bpmnFactory"],L()(Xr,or.a),Zr.$inject=["bpmnUpdater"],Zr.prototype.execute=function(e){var t=e.dataStoreBo,n=e.newSemanticParent,r=e.newDiParent;e.oldSemanticParent=t.$parent,e.oldDiParent=t.di.$parent,this._bpmnUpdater.updateSemanticParent(t,n),this._bpmnUpdater.updateDiParent(t.di,r)},Zr.prototype.revert=function(e){var t=e.dataStoreBo,n=e.oldSemanticParent,r=e.oldDiParent;this._bpmnUpdater.updateSemanticParent(t,n),this._bpmnUpdater.updateDiParent(t.di,r)},ea.$inject=["canvas","commandStack","elementRegistry","eventBus"],L()(ea,or.a);function ta(e,t,n){or.a.call(this,e),this.postExecuted("shape.delete",500,(function(e){var t=e.context,r=t.hints,a=t.shape,i=t.oldParent;He(a,"bpmn:Lane")&&(r&&r.nested||function(e,t){var r,a,i,o=Gn(t),c=[],s=[];Object(Zn.a)(o,(function(t){return t.y>e.y?s.push(t):c.push(t),t.children})),o.length&&(r=s.length&&c.length?e.height/2:e.height,c.length&&(a=n.calculateAdjustments(c,"y",r,e.y-10),n.makeSpace(a.movingShapes,a.resizingShapes,{x:0,y:r},"s")),s.length&&(i=n.calculateAdjustments(s,"y",-r,e.y+e.height+10),n.makeSpace(i.movingShapes,i.resizingShapes,{x:0,y:-r},"n")))}(a,i))}))}ta.$inject=["eventBus","modeling","spaceTool"],L()(ta,or.a);function na(e,t){t.invoke(or.a,this),this._bpmnReplace=e;var n=this;this.postExecuted("elements.create",500,(function(e){var t=e.elements;t.filter((function(e){return ra(e,e.host)})).map((function(e){return t.indexOf(e)})).forEach((function(r){e.elements[r]=n.replaceShape(t[r])}))}),!0),this.preExecute("elements.move",500,(function(e){var t=e.shapes,r=e.newHost;t.forEach((function(e,a){var i,o=e.host;ra(e,(i=o,-1!==t.indexOf(i)?o:r))&&(t[a]=n.replaceShape(e))}))}),!0)}function ra(e,t){return!gt(e)&&He(e,"bpmn:BoundaryEvent")&&!t}na.$inject=["bpmnReplace","injector"],L()(na,or.a),na.prototype.replaceShape=function(e){var t,n=function(e){var t=Ue(e).eventDefinitions;return t&&t[0]}(e);return t=n?{type:"bpmn:IntermediateCatchEvent",eventDefinitionType:n.$type}:{type:"bpmn:IntermediateThrowEvent"},this._bpmnReplace.replaceElement(e,t,{layoutConnection:!1})};var aa=n(163);function ia(e,t,n){function r(e,t,r){var a,i,o,c,s=t.waypoints;e.outgoing.slice(),e.incoming.slice();c=Object(P.p)(r.width)?Object(xt.e)(r):r;var l=Object(aa.a)(s,c);if(l){if(a=s.slice(0,l.index),i=s.slice(l.index+(l.bendpoint?1:0)),!a.length||!i.length)return;o=l.bendpoint?s[l.index]:c,oa(e,a[a.length-1])||a.push(ca(o)),oa(e,i[0])||i.unshift(ca(o))}var u=[].concat([],[]);u.length&&n.removeElements(u)}or.a.call(this,e),this.preExecute("elements.move",(function(e){var n=e.newParent,r=e.shapes,a=e.delta,i=r[0];if(i&&n){n&&n.waypoints&&(e.newParent=n=n.parent);var o=Object(xt.e)(i),c={x:o.x+a.x,y:o.y+a.y},s=Object(P.f)(n.children,(function(e){return t.canInsert(r,e)&&Object(aa.a)(e.waypoints,c)}));s&&(e.targetFlow=s,e.position=c)}}),!0),this.postExecuted("elements.move",(function(e){var t=e.shapes,n=e.targetFlow,a=e.position;n&&r(t[0],n,a)}),!0),this.preExecute("shape.create",(function(e){var n=e.parent,r=e.shape;t.canInsert(r,n)&&(e.targetFlow=n,e.parent=n.parent)}),!0),this.postExecuted("shape.create",(function(e){var t=e.shape,n=e.targetFlow,a=e.position;n&&r(t,n,a)}),!0)}function oa(e,t){var n=t.x,r=t.y;return n>=e.x&&n<=e.x+e.width&&r>=e.y&&r<=e.y+e.height}function ca(e){return Object(P.a)({},e)}function sa(e,t){or.a.call(this,e),this.preExecuted("connection.create",(function(e){var n=e.context,r=n.source,a=n.target,i=a.incoming.slice();n.hints&&!1===n.hints.createElementsBehavior||He(r,"bpmn:EventBasedGateway")&&a.incoming.length&&i.filter(la).forEach((function(e){t.removeConnection(e)}))})),this.preExecuted("shape.replace",(function(e){var n=e.context.newShape;He(n,"bpmn:EventBasedGateway")&&n.outgoing.filter(la).map((function(e){return e.target})).reduce((function(e,t){var n=t.incoming.filter(la);return e.concat(n)}),[]).forEach((function(e){e.source!==n&&t.removeConnection(e)}))}))}function la(e){return He(e,"bpmn:SequenceFlow")}L()(ia,or.a),ia.$inject=["eventBus","bpmnRules","modeling"],sa.$inject=["eventBus","modeling"],L()(sa,or.a);function ua(e,t,n,r,a,i){function o(){return Ue(t.getRootElement()).$parent}function c(e){var t=Ue(e).categoryValueRef;if(t){var n=t.$parent;t&&(Object(jr.c)(n.categoryValue,t),n&&!n.categoryValue.length&&function(e){var t=o();Object(jr.c)(t.get("rootElements"),e)}(n))}}a.invoke(or.a,this),this.executed("shape.delete",(function(e){var t,r=e.context.shape;if(He(r,"bpmn:Group")){var a=Ue(r).categoryValueRef,i=n.filter((function(e){return He(e,"bpmn:Group")}));t=a,i.some((function(e){var n=Ue(e);return n.categoryValueRef&&n.categoryValueRef===t}))||c(r)}})),this.reverted("shape.delete",(function(e){var t=e.context.shape;if(He(t,"bpmn:Group")){var n=Ue(t).categoryValueRef,r=o(),a=n?n.$parent:null;Object(jr.a)(a.get("categoryValue"),n),Object(jr.a)(r.get("rootElements"),a)}})),this.execute("shape.create",(function(t){var n=Ue(t.context.shape);if(He(n,"bpmn:Group")&&!n.categoryValueRef){var r=wr(o(),e);n.categoryValueRef=r}})),this.revert("shape.create",(function(e){var t=e.context.shape;He(t,"bpmn:Group")&&(c(t),delete Ue(t).categoryValueRef)})),r.on("moddleCopy.canCopyProperty",2e3,(function(t){var n,r=t.property;if(He(r,"bpmn:CategoryValue"))return n=wr(o(),e),i.copyElement(r,n)}))}function pa(e,t,n,r){var a,i,o,c;return 0===(a=(r.y-n.y)*(t.x-e.x)-(r.x-n.x)*(t.y-e.y))?null:(i=e.y-n.y,o=e.x-n.x,c=((r.x-n.x)*i-(r.y-n.y)*o)/a,{x:Math.round(e.x+c*(t.x-e.x)),y:Math.round(e.y+c*(t.y-e.y))})}function da(e){function t(e,t,n){var r,a={x:n.x,y:n.y-50},i={x:n.x-50,y:n.y},o=pa(e,t,n,a),c=pa(e,t,n,i);r=o&&c?ha(o,n)>ha(c,n)?c:o:o||c,e.original=r}e.on("bpmnElement.added",(function(e){var n=e.element;n.waypoints&&function(e){var n=e.waypoints;t(n[0],n[1],Object(xt.e)(e.source)),t(n[n.length-1],n[n.length-2],Object(xt.e)(e.target))}(n)}))}function ha(e,t){return Math.sqrt(Math.pow(e.x-t.x,2)+Math.pow(e.y-t.y,2))}function fa(e){or.a.call(this,e);var t=["bpmn:Participant","bpmn:Lane"];this.executed(["shape.move","shape.create","shape.resize"],(function(e){var n=Ue(e.context.shape);Rt(n,t)&&!n.di.get("isHorizontal")&&n.di.set("isHorizontal",!0)}))}function ma(e){return Math.sqrt(Math.pow(e.x,2)+Math.pow(e.y,2))}function ba(e){return Math.atan((e[1].y-e[0].y)/(e[1].x-e[0].x))}function va(e,t){var n=t[0],r=t[1],a={x:r.x-n.x,y:r.y-n.y},i=function(e,t,n){var r=[{n:e[0]-n[0],lambda:t[0]},{n:e[1]-n[1],lambda:t[1]}];return-(r[0].n*t[0]+r[1].n*t[1])/(r[0].lambda*t[0]+r[1].lambda*t[1])}([n.x,n.y],[a.x,a.y],[e.x,e.y]);return{x:n.x+i*a.x,y:n.y+i*a.y}}function ya(e,t){var n=va(e,t);return ma({x:n.x-e.x,y:n.y-e.y})}function ga(e,t){return ma({x:e.x-t.x,y:e.y-t.y})}ua.$inject=["bpmnFactory","canvas","elementRegistry","eventBus","injector","moddleCopy"],L()(ua,or.a),da.$inject=["eventBus"],fa.$inject=["eventBus"],L()(fa,or.a);var xa=Math.sqrt,ja=Math.min,wa=Math.max,Oa=Math.abs;function Ea(e){return Math.pow(e,2)}function Na(e,t){return xa(Ea(e.x-t.x)+Ea(e.y-t.y))}function ka(e,t,n,r){var a=t.x-e.x,i=t.y-e.y,o=n.x-e.x,c=n.y-e.y,s=a*a+i*i,l=(a*o+i*c)/s,u=l*l-(o*o+c*c-r*r)/s;if(u<0&&u>-1e-6&&(u=0),u<0)return[];var p=xa(u),d=-l+p,h=-l-p,f={x:e.x-a*d,y:e.y-i*d};return 0===u?[f]:[f,{x:e.x-a*h,y:e.y-i*h}].filter((function(n){return function(e,t,n){return Sa(e.x,t.x,n.x)&&Sa(e.y,t.y,n.y)}(n,e,t)}))}function Sa(e,t,n){return e>=ja(t,n)-_a&&e<=wa(t,n)+_a}var _a=.1;function La(e,t){return Oa(e.x-t.x)<=_a&&Oa(e.y-t.y)<=_a}function Ca(e,t,n,r){var a=0,i=0,o=function(e){return{x:e.x+e.width/2,y:e.y+e.height/2}}(e),c=function(e,t){var n,r,a,i,o,c,s,l,u,p,d,h,f=0;for(f=0;f<t.length-1;f++){if(La(n=t[f],r=t[f+1])?c=[n]:(a=Na(e,n),i=Na(e,r),c=ka(n,r,e,ja(a,i))),c.length<1)throw new Error("expected between [1, 2] circle -> line intersections");1===c.length&&(s={type:"bendpoint",position:c[0],segmentIndex:f,bendpointIndex:La(n,c[0])?f:f+1}),2===c.length&&(d=c[0],h=c[1],s={type:"segment",position:o={x:(d.x+h.x)/2,y:(d.y+h.y)/2},segmentIndex:f,relativeLocation:Na(n,o)/Na(n,r)}),l=Na(s.position,e),(!p||u>l)&&(p=s,u=l)}return p}(o,n),s=c.segmentIndex,l=function(e,t,n,r){var a=n.segmentIndex,i=t.length-e.length;if(r.segmentMove){var o=r.segmentMove.segmentStartIndex,c=r.segmentMove.newSegmentStartIndex;return a===o?c:a>=c?a+i<c?c:a+i:a}if(r.bendpointMove){var s,l=r.bendpointMove.insert,u=r.bendpointMove.bendpointIndex;return 0===i?a:(a>=u&&(s=l?a+1:a-1),a<u&&(s=a,l&&"bendpoint"!==n.type&&u-1===a&&Pa(t,u)<n.relativeLocation&&s++),s)}return 0===i?a:r.connectionStart?0===a?0:null:r.connectionEnd&&a===e.length-2?t.length-2:null}(n,t,c,r);if(null===l)return{x:a,y:i};if(l<0||l>t.length-2)return{x:a,y:i};var u=Ta(n,s),p=Ta(t,l),d=c.position,h=function(e,t){var n=ga(e[0],e[1]),r=ga(e[0],t);return 0===n?0:r/n}(u,d),f=function(e,t){var n=ba(e);return ba(t)-n}(u,p);if("bendpoint"===c.type){var m=t.length-n.length,b=c.bendpointIndex,v=n[b];if(-1!==t.indexOf(v))return{x:a,y:i};if(0===m){var y=t[b];return{x:y.x-c.position.x,y:y.y-c.position.y}}m<0&&0!==b&&b<n.length-1&&(h=Pa(n,b))}var g,x,j=(p[1].x-p[0].x)*h+p[0].x,w=(p[1].y-p[0].y)*h+p[0].y,O=(g={x:o.x-d.x,y:o.y-d.y},(x=f)?{x:Math.cos(x)*g.x-Math.sin(x)*g.y,y:Math.sin(x)*g.x+Math.cos(x)*g.y}:g);return a=j+O.x-o.x,i=w+O.y-o.y,Object(xt.h)({x:a,y:i})}function Pa(e,t){var n=ga(e[t-1],e[t]);return n/(n+ga(e[t],e[t+1]))}function Ta(e,t){return[e[t],e[t+1]]}var Ma=n(81),Aa={width:90,height:20},Ra="name",Ba="text";function Da(e,t,n,r){or.a.call(this,e),this.postExecute("element.updateProperties",(function(e){var n=e.context,a=n.element,i=n.properties;if(Ra in i&&t.updateLabel(a,i.name),Ba in i&&He(a,"bpmn:TextAnnotation")){var o=r.getTextAnnotationBounds({x:a.x,y:a.y,width:a.width,height:a.height},i.text||"");t.updateLabel(a,i.text,o)}})),this.postExecute(["shape.create","connection.create"],(function(e){var n=e.context;if(!1!==(n.hints||{}).createElementsBehavior){var a=n.shape||n.connection,i=a.businessObject;if(!gt(a)&&mt(a)&&Ze(a)){var o=yt(a),c=r.getExternalLabelBounds(Aa,Ze(a));t.createLabel(a,o,{id:i.id+"_label",businessObject:i,width:c.width,height:c.height})}}})),this.postExecute("shape.delete",(function(e){var n=e.context,r=n.labelTarget,a=n.hints||{};r&&!1!==a.unsetLabel&&t.updateLabel(r,null,null,{removeShape:!1})})),this.postExecute(["label.create"],(function(e){var t,r=e.context.shape;r.labelTarget&&He(r.labelTarget||r,"bpmn:BaseElement")&&((t=r.businessObject.di).label||(t.label=n.create("bpmndi:BPMNLabel",{bounds:n.create("dc:Bounds")})),Object(P.a)(t.label.bounds,{x:r.x,y:r.y,width:r.width,height:r.height}))})),this.postExecute(["connection.layout","connection.updateWaypoints"],(function(e){var n=e.context;if(!1!==(n.hints||{}).labelBehavior){var r,a=n.connection.label;a&&a.parent&&(r=function(e){var t=e.context,n=t.connection,r=n.label,a=Object(P.a)({},t.hints),i=t.newWaypoints||n.waypoints,o=t.oldWaypoints;return"undefined"===typeof a.startChanged&&(a.startChanged=!!a.connectionStart),"undefined"===typeof a.endChanged&&(a.endChanged=!!a.connectionEnd),Ca(r,i,o,a)}(e),t.moveShape(a,r))}})),this.postExecute(["shape.replace"],(function(e){var t=e.context,n=t.newShape,r=t.oldShape,a=Ue(n);a&&mt(a)&&r.label&&n.label&&(n.label.x=r.label.x,n.label.y=r.label.y)})),this.postExecute("shape.resize",(function(e){var n,r=e.context,a=r.shape,i=r.newBounds,o=r.oldBounds;if(bt(a)){var c=a.label,s=function(e,t,n){var r=Object(Ma.a)(e,t,n);return Object(xt.h)(Object(Cr.b)(r,e))}(function(e,t){if(!t.length)return;var n=function(e,t){var n=t.map((function(t){return{line:t,distance:ya(e,t)}}));return Object(P.B)(n,"distance")[0].line}(e,t);return va(e,n)}(Object(xt.e)(c),[[{x:(n=o).x,y:n.y},{x:n.x+(n.width||0),y:n.y}],[{x:n.x+(n.width||0),y:n.y},{x:n.x+(n.width||0),y:n.y+(n.height||0)}],[{x:n.x,y:n.y+(n.height||0)},{x:n.x+(n.width||0),y:n.y+(n.height||0)}],[{x:n.x,y:n.y},{x:n.x,y:n.y+(n.height||0)}]]),o,i);t.moveShape(c,s)}}))}L()(Da,or.a),Da.$inject=["eventBus","modeling","bpmnFactory","textRenderer"];var Fa="flow elements must be children of pools/participants";function Ia(e,t,n){function r(e,n,r){t.add({position:{x:e.x+5,y:e.y+5},type:"error",timeout:r||2e3,html:"<div>"+n+"</div>"})}e.on(["shape.move.rejected","create.rejected"],(function(e){var t=e.context,a=t.shape;He(t.target,"bpmn:Collaboration")&&He(a,"bpmn:FlowNode")&&r(e,n(Fa))})),e.on(["elements.paste.rejected"],(function(e){var t=e.context,a=t.position,i=t.target;He(i,"bpmn:Collaboration")&&r(a,n(Fa)),He(i,"bpmn:Process-action")&&r(a,n("participants cannot be pasted onto a non-empty process diagram"),3e3)}))}function Va(e,t,n,r){or.a.call(this,e);var a=r.get("dragging",!1);function i(e){var r,a,i=e.source,o=e.target;e.parent&&(He(e,"bpmn:SequenceFlow")&&(n.canConnectSequenceFlow(i,o)||(a=!0),n.canConnectMessageFlow(i,o)&&(r="bpmn:MessageFlow")),He(e,"bpmn:MessageFlow")&&(n.canConnectMessageFlow(i,o)||(a=!0),n.canConnectSequenceFlow(i,o)&&(r="bpmn:SequenceFlow")),He(e,"bpmn:Association")&&!n.canConnectAssociation(i,o)&&(a=!0),a&&t.removeConnection(e),r&&t.connect(i,o,{type:r,waypoints:e.waypoints.slice()}))}this.postExecuted("elements.move",(function(e){var t=e.closure.allConnections;Object(P.i)(t,i)}),!0),this.preExecute("connection.reconnect",(function(e){var r,i,o=e.context,c=o.connection,s=o.newSource||c.source,l=o.newTarget||c.target;(r=n.canConnect(s,l))&&r.type!==c.type&&(i=t.connect(s,l,{type:r.type,waypoints:c.waypoints.slice()}),t.removeConnection(c),o.connection=i,a&&function(e,t){var n,r=a.context(),i=r&&r.payload.previousSelection;if(!i||!i.length)return;if(-1===(n=i.indexOf(e)))return;i.splice(n,1,t)}(c,i))})),this.postExecuted("element.updateProperties",(function(e){var n,r=e.context,a=r.properties,i=r.element,o=i.businessObject;a.default&&(n=Object(P.f)(i.outgoing,Object(P.v)({id:i.businessObject.default.id})))&&t.updateProperties(n,{conditionExpression:void 0}),a.conditionExpression&&o.sourceRef.default===o&&t.updateProperties(i.source,{default:void 0})}))}function Ga(e,t){or.a.call(this,e),this.preExecute("shape.delete",(function(e){var t=e.shape,n=t.parent;He(t,"bpmn:Participant")&&(e.collaborationRoot=n)}),!0),this.postExecute("shape.delete",(function(e){var n=e.collaborationRoot;n&&!n.businessObject.participants.length&&t.makeProcess()}),!0)}function Wa(e,t,n,r,a,i){r.invoke(or.a,this),this._bpmnReplace=e,this._elementRegistry=n,this._selection=i,this.postExecuted(["elements.move"],500,(function(e){var n=e.context,r=n.newParent,a=n.newHost,i=[];Object(P.i)(n.closure.topLevel,(function(e){i=Je(e)?i.concat(e.children):i.concat(e)})),1===i.length&&a&&(r=a);var o=t.canReplace(i,r);o&&this.replaceElements(i,o.replacements,a)}),this),this.postExecute(["shape.replace"],1500,(function(e){var n,r=e.context,a=r.oldShape,i=r.newShape,o=a.attachers;o&&o.length&&(n=t.canReplace(o,i),this.replaceElements(o,n.replacements))}),this),this.postExecuted(["shape.replace"],1500,(function(e){var t=e.context,n=t.oldShape,r=t.newShape;a.unclaimId(n.businessObject.id,n.businessObject),a.updateProperties(r,{id:n.id})}))}Ia.$inject=["eventBus","tooltips","translate"],L()(Va,or.a),Va.$inject=["eventBus","modeling","bpmnRules","injector"],Ga.$inject=["eventBus","modeling"],L()(Ga,or.a),L()(Wa,or.a),Wa.prototype.replaceElements=function(e,t){var n=this._elementRegistry,r=this._bpmnReplace,a=this._selection;Object(P.i)(t,(function(t){var a={type:t.newElementType},i=n.get(t.oldElementId),o=e.indexOf(i);e[o]=r.replaceElement(i,a,{select:!1})})),t&&a.select(e)},Wa.$inject=["bpmnReplace","bpmnRules","elementRegistry","injector","modeling","selection"];var $a=Math.abs,za=Math.min,Ka=Math.max;function qa(e,t,n,r){var a=e[t];e[t]=void 0===a?n:r(n,a)}function Ha(e,t,n){return qa(e,t,n,za)}function Ua(e,t,n){return qa(e,t,n,Ka)}var Ya={width:300,height:150},Ja={width:140,height:120},Xa={width:50,height:30};function Qa(e){e.on("resize.start",1500,(function(e){var t=e.context,n=t.shape,r=t.direction,a=t.balanced;(He(n,"bpmn:Lane")||He(n,"bpmn:Participant"))&&(t.resizeConstraints=function(e,t,n){var r=Wn(e),a=!0,i=!0,o=Vn(r,[r]),c=Object(xt.b)(e),s={},l={};return/e/.test(t)?l.right=c.left+300:/w/.test(t)&&(l.left=c.right-300),o.forEach((function(e){var r=Object(xt.b)(e);/n/.test(t)&&(r.top<c.top-10&&(a=!1),n&&$a(c.top-r.bottom)<10&&Ua(s,"top",r.top+60),$a(c.top-r.top)<5&&Ha(l,"top",r.bottom-60)),/s/.test(t)&&(r.bottom>c.bottom+10&&(i=!1),n&&$a(c.bottom-r.top)<10&&Ha(s,"bottom",r.bottom-60),$a(c.bottom-r.bottom)<5&&Ua(l,"bottom",r.top+60))})),r.children.filter((function(e){return!e.hidden&&!e.waypoints&&(He(e,"bpmn:FlowElement")||He(e,"bpmn:Artifact"))})).forEach((function(e){var n=Object(xt.b)(e);a&&/n/.test(t)&&Ha(l,"top",n.top-20),/e/.test(t)&&Ua(l,"right",n.right+20),i&&/s/.test(t)&&Ua(l,"bottom",n.bottom+20),/w/.test(t)&&Ha(l,"left",n.left-50)})),{min:l,max:s}}(n,r,a)),He(n,"bpmn:Participant")&&(t.minDimensions=Ya),He(n,"bpmn:Loop")&&Ye(n)&&(t.minDimensions=Ja),He(n,"bpmn:Conditional")&&Ye(n)&&(t.minDimensions=Ja),He(n,"bpmn:TextAnnotation")&&(t.minDimensions=Xa)}))}Qa.$inject=["eventBus"];function Za(e,t){e.on("resize.start",1501,(function(e){var t=e.context,n=t.shape;(He(n,"bpmn:Lane")||He(n,"bpmn:Participant"))&&(t.balanced=!Object(zn.a)(e))})),e.on("resize.end",1001,(function(e){var n=e.context,r=n.shape,a=n.canExecute,i=n.newBounds;if(He(r,"bpmn:Lane")||He(r,"bpmn:Participant"))return a&&(i=Object(xt.g)(i),t.resizeLane(r,i,n.balanced)),!1}))}function ei(e,t,n){or.a.call(this,e),this.preExecute("shape.delete",(function(e){var r=e.context.shape;if(1===r.incoming.length&&1===r.outgoing.length){var a=r.incoming[0],i=r.outgoing[0];if(He(a,"bpmn:SequenceFlow")&&He(i,"bpmn:SequenceFlow")&&t.canConnect(a.source,i.target,a)){var o=function(e,t){var n=pa(ti(e[e.length-2]),ti(e[e.length-1]),ti(t[1]),ti(t[0]));return n?[].concat(e.slice(0,e.length-1),[n],t.slice(1)):[ti(e[0]),ti(t[t.length-1])]}(a.waypoints,i.waypoints);n.reconnectEnd(a,i.target,o)}}}))}function ti(e){return e.original||e}function ni(e){e.on("spaceTool.getMinDimensions",(function(e){var t=e.shapes,n={};return Object(P.i)(t,(function(t){var r=t.id;He(t,"bpmn:Participant")&&(n[r]=Ya),He(t,"bpmn:Loop")&&Ye(t)&&(n[r]=Ja),He(t,"bpmn:Conditional")&&Ye(t)&&(e.minDimensions=Ja),He(t,"bpmn:TextAnnotation")&&(n[r]=Xa)})),n}))}function ri(e,t){e.invoke(or.a,this),this.postExecuted("shape.replace",(function(e){var n=e.context.oldShape,r=e.context.newShape;if(He(r,"bpmn:Loop")&&He(r,"bpmn:Conditional")&&He(n,"bpmn:Task")&&Ye(r)){var a,i={x:(a=r).x+a.width/6,y:a.y+a.height/2};t.createShape({type:"bpmn:StartEvent"},i,r)}}))}Za.$inject=["eventBus","modeling"],L()(ei,or.a),ei.$inject=["eventBus","bpmnRules","modeling"],ni.$inject=["eventBus"],ri.$inject=["injector","modeling"],L()(ri,or.a);function ai(e,t,n,r){or.a.call(this,e),this.executed(["shape.toggleCollapse"],500,(function(e){var t,n=e.context.shape;He(n,"bpmn:Loop")&&(n.collapsed?Ue(n).di.isExpanded=!1:((t=n.children).length&&t.forEach((function(e){"label"!==e.type||e.businessObject.name||(e.hidden=!0)})),Ue(n).di.isExpanded=!0))})),this.reverted(["shape.toggleCollapse"],500,(function(e){var t=e.context.shape;t.collapsed?Ue(t).di.isExpanded=!1:Ue(t).di.isExpanded=!0})),this.postExecuted(["shape.toggleCollapse"],500,(function(e){var r,a=e.context.shape,i=t._getDefaultSize(a);r=a.collapsed?function(e,t){return{x:e.x+(e.width-t.width)/2,y:e.y+(e.height-t.height)/2,width:t.width,height:t.height}}(a,i):function(e,t){var n,r,a,i=e.children,o=t;return n=(a=i,a.filter((function(e){return!e.hidden}))).concat([e]),(r=Object(Bn.a)(n))?(o.width=Math.max(r.width,o.width),o.height=Math.max(r.height,o.height),o.x=r.x+(r.width-o.width)/2,o.y=r.y+(r.height-o.height)/2):(o.x=e.x+(e.width-o.width)/2,o.y=e.y+(e.height-o.height)/2),o}(a,i),n.resizeShape(a,r,null,{autoResize:!a.collapsed&&"nwse"})}))}function ii(e,t,n,r){t.invoke(or.a,this),this.preExecute("shape.delete",(function(e){var t=e.context.shape,a=t.businessObject;gt(t)||(He(t,"bpmn:Participant")&&Ye(t)&&n.ids.unclaim(a.processRef.id),r.unclaimId(a.id,a))})),this.preExecute("connection.delete",(function(e){var t=e.context.connection.businessObject;r.unclaimId(t.id,t)})),this.preExecute("canvas.updateRoot",(function(){var t=e.getRootElement().businessObject;n.ids.unclaim(t.id)}))}L()(ai,or.a),ai.$inject=["eventBus","elementFactory","modeling"],L()(ii,or.a),ii.$inject=["canvas","injector","moddle","modeling"];function oi(e,t,n){var r;function a(){if(!r)throw new Error(n("out of bounds release"));return r}or.a.call(this,e);var i=["spaceTool","lane.add","lane.resize","lane.split","elements.create","elements.delete","elements.move","shape.create","shape.delete","shape.move","shape.resize"];this.preExecute(i,5e3,(function(e){(r=r||new ci).enter()})),this.postExecuted(i,500,(function(e){!function(){if(!r)throw new Error(n("out of bounds release"));var e=r.leave();e&&(t.updateLaneRefs(r.flowNodes,r.lanes),r=null)}()})),this.preExecute(["shape.create","shape.move","shape.delete","shape.resize"],(function(e){var t=e.context.shape,n=a();t.labelTarget||(He(t,"bpmn:Lane")&&n.addLane(t),He(t,"bpmn:FlowNode")&&n.addFlowNode(t))}))}function ci(){this.flowNodes=[],this.lanes=[],this.counter=0,this.addLane=function(e){this.lanes.push(e)},this.addFlowNode=function(e){this.flowNodes.push(e)},this.enter=function(){this.counter++},this.leave=function(){return this.counter--,!this.counter}}function si(e,t){or.a.call(this,e),this.preExecute("connection.delete",(function(e){var n=e.context.connection,r=n.source;(function(e,t){if(!He(e,"bpmn:SequenceFlow"))return!1;var n=Ue(t),r=Ue(e);return n.get("default")===r})(n,r)&&t.updateProperties(r,{default:null})}))}oi.$inject=["eventBus","modeling","translate"],L()(oi,or.a),L()(si,or.a),si.$inject=["eventBus","modeling"];var li={__init__:["adaptiveLabelPositioningBehavior","appendBehavior","associationBehavior","attachEventBehavior","boundaryEventBehavior","rootElementReferenceBehavior","createBehavior","fixHoverBehavior","createDataObjectBehavior","createParticipantBehavior","dataStoreBehavior","dataInputAssociationBehavior","deleteLaneBehavior","detachEventBehavior","dropOnFlowBehavior","eventBasedGatewayBehavior","groupBehavior","importDockingFix","isHorizontalFix","labelBehavior","modelingFeedback","removeElementBehavior","removeParticipantBehavior","replaceConnectionBehavior","replaceElementBehaviour","resizeBehavior","resizeLaneBehavior","toggleElementCollapseBehaviour","spaceToolBehavior","subProcessStartEventBehavior","unclaimIdBehavior","unsetDefaultFlowBehavior","updateFlowNodeRefsBehavior"],adaptiveLabelPositioningBehavior:["type",Mr],appendBehavior:["type",Rr],associationBehavior:["type",Br],attachEventBehavior:["type",Dr],boundaryEventBehavior:["type",Ir],rootElementReferenceBehavior:["type",Vr],createBehavior:["type",Gr],fixHoverBehavior:["type",$r],createDataObjectBehavior:["type",zr],createParticipantBehavior:["type",Ur],dataInputAssociationBehavior:["type",Xr],dataStoreBehavior:["type",ea],deleteLaneBehavior:["type",ta],detachEventBehavior:["type",na],dropOnFlowBehavior:["type",ia],eventBasedGatewayBehavior:["type",sa],groupBehavior:["type",ua],importDockingFix:["type",da],isHorizontalFix:["type",fa],labelBehavior:["type",Da],modelingFeedback:["type",Ia],replaceConnectionBehavior:["type",Va],removeParticipantBehavior:["type",Ga],replaceElementBehaviour:["type",Wa],resizeBehavior:["type",Qa],resizeLaneBehavior:["type",Za],removeElementBehavior:["type",ei],toggleElementCollapseBehaviour:["type",ai],spaceToolBehavior:["type",ni],subProcessStartEventBehavior:["type",ri],unclaimIdBehavior:["type",ii],updateFlowNodeRefsBehavior:["type",oi],unsetDefaultFlowBehavior:["type",si]},ui=n(44),pi=n(67);function di(e,t){var n=Object(xt.f)(e,t,-15);return"intersect"!==n?n:null}function hi(e){pi.a.call(this,e)}function fi(e){return!e||gt(e)}function mi(e){do{if(He(e,"bpmn:Process-action"))return Ue(e);if(He(e,"bpmn:Participant"))return Ue(e).processRef||Ue(e)}while(e=e.parent)}function bi(e){return He(e,"bpmn:TextAnnotation")}function vi(e){return He(e,"bpmn:Group")&&!e.labelTarget}function yi(e){return He(e,"bpmn:BoundaryEvent")&&ji(e,"bpmn:CompensateEventDefinition")}function gi(e){return Ue(e).isForCompensation}function xi(e){for(var t=e;t=t.parent;){if(He(t,"bpmn:FlowElementsContainer"))return Ue(t);if(He(t,"bpmn:Participant"))return Ue(t).processRef}return null}function ji(e,t){var n=Ue(e);return!!Object(P.f)(n.eventDefinitions||[],(function(e){return He(e,t)}))}function wi(e,t){return(Ue(e).eventDefinitions||[]).every((function(e){return He(e,t)}))}function Oi(e){return He(e,"bpmn:ReceiveTask")||He(e,"bpmn:IntermediateCatchEvent")&&(ji(e,"bpmn:MessageEventDefinition")||ji(e,"bpmn:TimerEventDefinition")||ji(e,"bpmn:ConditionalEventDefinition")||ji(e,"bpmn:SignalEventDefinition"))}function Ei(e){return e.waypoints}function Ni(e,t){return-1!==function(e){for(var t=[];e;)(e=e.parent)&&t.push(e);return t}(t).indexOf(e)}function ki(e,t,n){if(fi(e)||fi(t))return null;if(!He(n,"bpmn:DataAssociation")){if(Fi(e,t))return{type:"bpmn:MessageFlow"};if(Ii(e,t))return{type:"bpmn:SequenceFlow"}}var r=Vi(e,t);return r||(yi(e)&&gi(t)?{type:"bpmn:Association",associationDirection:"One"}:!!Di(e,t)&&{type:"bpmn:Association"})}function Si(e,t,n){return!(!gt(e)&&!vi(e))||!(He(t,"bpmn:Participant")&&!Ye(t))&&(He(e,"bpmn:Participant")?He(t,"bpmn:Process-action")||He(t,"bpmn:Collaboration"):Rt(e,["bpmn:DataInput","bpmn:DataOutput"])&&e.parent?t===e.parent:He(e,"bpmn:Lane")?He(t,"bpmn:Participant")||He(t,"bpmn:Lane"):!(He(e,"bpmn:BoundaryEvent")&&(r=e,!Ue(r).cancelActivity||!Ci(r)&&!Pi(r)))&&(He(e,"bpmn:FlowElement")&&!He(e,"bpmn:DataStoreReference")?He(t,"bpmn:FlowElementsContainer")?Ye(t):Rt(t,["bpmn:Participant","bpmn:Lane"]):Rt(e,["bpmn:Artifact","bpmn:DataAssociation","bpmn:DataStoreReference"])?Rt(t,["bpmn:Collaboration","bpmn:Lane","bpmn:Participant","bpmn:Process-action","bpmn:Loop","bpmn:Conditional"]):!!He(e,"bpmn:MessageFlow")&&(He(t,"bpmn:Collaboration")||e.source.parent===t||e.target.parent===t)));var r}function _i(e){return He(e,"bpmn:Lane")}function Li(e){return!!function(e){return!gt(e)&&He(e,"bpmn:BoundaryEvent")}(e)||(!(!He(e,"bpmn:IntermediateThrowEvent")||!Ci(e))||He(e,"bpmn:IntermediateCatchEvent")&&Pi(e))}function Ci(e){var t=Ue(e);return t&&!(t.eventDefinitions&&t.eventDefinitions.length)}function Pi(e){return function(e,t){return t.some((function(t){return ji(e,t)}))}(e,["bpmn:MessageEventDefinition","bpmn:TimerEventDefinition","bpmn:SignalEventDefinition","bpmn:ConditionalEventDefinition"])}function Ti(e,t,n,r){if(Array.isArray(e)||(e=[e]),1!==e.length)return!1;var a=e[0];return!gt(a)&&(!!Li(a)&&(!Je(t)&&(!(!He(t,"bpmn:Activity")||gi(t))&&(!(r&&!di(r,t))&&(!function(e){return He(e,"bpmn:ReceiveTask")&&Object(P.f)(e.incoming,(function(e){return He(e.source,"bpmn:EventBasedGateway")}))}(t)&&"attach")))))}function Mi(e,t,n){if(!t)return!1;var r={replacements:[]};return Object(P.i)(e,(function(e){Je(t)||He(e,"bpmn:StartEvent")&&"label"!==e.type&&Si(e,t)&&(function(e){return e&&!1!==Ue(e).isInterrupting}(e)||r.replacements.push({oldElementId:e.id,newElementType:"bpmn:StartEvent"}),(function(e){return Xe(e,"bpmn:ErrorEventDefinition")}(e)||function(e){return Xe(e,"bpmn:EscalationEventDefinition")}(e)||function(e){return Xe(e,"bpmn:CompensateEventDefinition")}(e))&&r.replacements.push({oldElementId:e.id,newElementType:"bpmn:StartEvent"})),He(t,"bpmn:Transaction")||ji(e,"bpmn:CancelEventDefinition")&&"label"!==e.type&&(He(e,"bpmn:EndEvent")&&Si(e,t)&&r.replacements.push({oldElementId:e.id,newElementType:"bpmn:EndEvent"}),He(e,"bpmn:BoundaryEvent")&&Ti(e,t,0,n)&&r.replacements.push({oldElementId:e.id,newElementType:"bpmn:BoundaryEvent"}))})),!!r.replacements.length&&r}function Ai(e,t){return!Object(P.A)(e,_i)&&(!t||e.every((function(e){return Si(e,t)})))}function Ri(e,t,n,r){return!!t&&(!(!gt(e)&&!vi(e))||n!==t&&((!n||!Ni(n,t))&&(Si(e,t)||Gi(e,t,r))))}function Bi(e,t){return He(e,"bpmn:Loop")||He(e,"bpmn:Conditional")?Ye(e)&&(!t||t.width>=100&&t.height>=80):He(e,"bpmn:Lane")?!t||t.width>=130&&t.height>=60:He(e,"bpmn:Participant")?!t||t.width>=250&&t.height>=50:!!bi(e)||!!vi(e)}function Di(e,t){return!Ei(e)&&!Ei(t)&&(!(!yi(e)||!gi(t))||!Ni(t,e)&&!Ni(e,t)&&(!!function(e,t){var n=bi(e),r=bi(t);return(n||r)&&n!==r}(e,t)||!!Vi(e,t)))}function Fi(e,t){return!(zi(e)&&!zi(t))&&(He(r=e,"bpmn:InteractionNode")&&(!He(r,"bpmn:Event")||He(r,"bpmn:ThrowEvent")&&wi(r,"bpmn:MessageEventDefinition"))&&function(e){return He(e,"bpmn:InteractionNode")&&!gi(e)&&(!He(e,"bpmn:Event")||He(e,"bpmn:CatchEvent")&&wi(e,"bpmn:MessageEventDefinition"))}(t)&&(n=t,!(mi(e)===mi(n))));var n,r}function Ii(e,t){return!(Oi(t)&&t.incoming.length>0&&(n=t.incoming,(n=n||[]).some($i))&&!He(e,"bpmn:EventBasedGateway"))&&(He(a=e,"bpmn:FlowNode")&&!He(a,"bpmn:EndEvent")&&!Je(a)&&!(He(a,"bpmn:IntermediateThrowEvent")&&ji(a,"bpmn:LinkEventDefinition"))&&!yi(a)&&!gi(a)&&function(e){return He(e,"bpmn:FlowNode")&&!He(e,"bpmn:StartEvent")&&!He(e,"bpmn:BoundaryEvent")&&!Je(e)&&!(He(e,"bpmn:IntermediateCatchEvent")&&ji(e,"bpmn:LinkEventDefinition"))&&!gi(e)}(t)&&(r=t,xi(e)===xi(r))&&!(He(e,"bpmn:EventBasedGateway")&&!Oi(t)));var n,r,a}function Vi(e,t){return Rt(e,["bpmn:DataObjectReference","bpmn:DataStoreReference"])&&Rt(t,["bpmn:Activity","bpmn:ThrowEvent"])?{type:"bpmn:DataInputAssociation"}:!(!Rt(t,["bpmn:DataObjectReference","bpmn:DataStoreReference"])||!Rt(e,["bpmn:Activity","bpmn:CatchEvent"]))&&{type:"bpmn:DataOutputAssociation"}}function Gi(e,t,n){if(!t)return!1;if(Array.isArray(e)){if(1!==e.length)return!1;e=e[0]}return t.source!==e&&t.target!==e&&(Rt(t,["bpmn:SequenceFlow","bpmn:MessageFlow"])&&!gt(t)&&He(e,"bpmn:FlowNode")&&!He(e,"bpmn:BoundaryEvent")&&Si(e,t.parent))}function Wi(e,t){return!!gt(t)||!(He(t,"bpmn:Lane")&&!function(e,t){return e&&t&&-1!==e.indexOf(t)}(e,t.parent))}function $i(e){if(e&&e.source)return He(e.source,"bpmn:EventBasedGateway")}function zi(e){return Bt(e,"bpmn:Process-action")||Bt(e,"bpmn:Collaboration")}L()(hi,pi.a),hi.$inject=["eventBus"],hi.prototype.init=function(){this.addRule("connection.start",(function(e){return function(e){if(fi(e))return null;return Rt(e,["bpmn:FlowNode","bpmn:InteractionNode","bpmn:DataObjectReference","bpmn:DataStoreReference"])}(e.source)})),this.addRule("connection.create",(function(e){var t=e.source,n=e.target,r=e.hints||{},a=r.targetParent;if(r.targetAttach)return!1;a&&(n.parent=a);try{return ki(t,n)}finally{a&&(n.parent=null)}})),this.addRule("connection.reconnect",(function(e){var t=e.connection;return ki(e.source,e.target,t)})),this.addRule("connection.updateWaypoints",(function(e){return{type:e.connection.type}})),this.addRule("shape.resize",(function(e){return Bi(e.shape,e.newBounds)})),this.addRule("elements.create",(function(e){var t=e.elements,n=e.position,r=e.target;return Object(P.d)(t,(function(e){return Ei(e)?ki(e.source,e.target,e):e.host?Ti(e,e.host,null,n):Ri(e,r,null,n)}))})),this.addRule("elements.move",(function(e){var t=e.target,n=e.shapes,r=e.position;return Ti(n,t,null,r)||Mi(n,t,r)||Ai(n,t)||Gi(n,t,r)})),this.addRule("shape.create",(function(e){return Ri(e.shape,e.target,e.source,e.position)})),this.addRule("shape.attach",(function(e){return Ti(e.shape,e.target,null,e.position)})),this.addRule("element.copy",(function(e){var t=e.element;return Wi(e.elements,t)}))},hi.prototype.canConnectMessageFlow=Fi,hi.prototype.canConnectSequenceFlow=Ii,hi.prototype.canConnectDataAssociation=Vi,hi.prototype.canConnectAssociation=Di,hi.prototype.canMove=Ai,hi.prototype.canAttach=Ti,hi.prototype.canReplace=Mi,hi.prototype.canDrop=Si,hi.prototype.canInsert=Gi,hi.prototype.canCreate=Ri,hi.prototype.canConnect=ki,hi.prototype.canResize=Bi,hi.prototype.canCopy=Wi;var Ki={__depends__:[ui.a],__init__:["bpmnRules"],bpmnRules:["type",hi]};function qi(e,t){e.on("saveXML.start",2e3,(function(){var e,n,r=t.getRootElement(),a=Ue(r).di;e=Object(Zn.h)([r],!1),e=Object(P.e)(e,(function(e){return e!==r&&!e.labelTarget})),n=Object(P.u)(e,tt),a.set("planeElement",n)}))}qi.$inject=["eventBus","canvas"];var Hi={__init__:["bpmnDiOrdering"],bpmnDiOrdering:["type",qi]},Ui=n(249);function Yi(e,t,n){Ui.a.call(this,e);var r=[{type:"bpmn:Loop",order:{level:6}},{type:"bpmn:SequenceFlow",order:{level:3,containers:["bpmn:Participant","bpmn:FlowElementsContainer"]}},{type:"bpmn:DataAssociation",order:{level:9,containers:["bpmn:Collaboration","bpmn:Process-action"]}},{type:"bpmn:MessageFlow",order:{level:9,containers:["bpmn:Collaboration"]}},{type:"bpmn:Association",order:{level:6,containers:["bpmn:Participant","bpmn:FlowElementsContainer","bpmn:Collaboration"]}},{type:"bpmn:BoundaryEvent",order:{level:8}},{type:"bpmn:Group",order:{level:10,containers:["bpmn:Collaboration","bpmn:Process-action"]}},{type:"bpmn:FlowElement",order:{level:5}},{type:"bpmn:Participant",order:{level:-2}},{type:"bpmn:Lane",order:{level:-1}}];function a(e){var t=e.order;return t||(e.order=t=function(e){if(e.labelTarget)return{level:10};var t=Object(P.f)(r,(function(t){return Rt(e,[t.type])}));return t&&t.order||{level:1}}(e)),t}this.getOrdering=function(e,r){if(e.labelTarget)return{parent:t.getRootElement(),index:-1};var i=a(e);i.containers&&(r=function(e,t,r){for(var a=t;a&&!Rt(a,r);)a=a.parent;if(!a)throw new Error(n("no parent for {element} in {parent}",{element:e.id,parent:t.id}));return a}(e,r,i.containers));var o=r.children.indexOf(e),c=Object(P.g)(r.children,(function(t){return!(!e.labelTarget&&t.labelTarget)&&i.level<a(t).level}));return-1!==c&&-1!==o&&o<c&&(c-=1),{index:c,parent:r}}}Yi.$inject=["eventBus","canvas","translate"],L()(Yi,Ui.a);var Ji={__depends__:[ht.a],__init__:["bpmnOrderingProvider"],bpmnOrderingProvider:["type",Yi]},Xi=n(398),Qi=n(399),Zi=n(400),eo=n(401),to=n(204);function no(e){this._model=e}no.$inject=["moddle"],no.prototype._needsId=function(e){return Rt(e,["bpmn:RootElement","bpmn:FlowElement","bpmn:MessageFlow","bpmn:DataAssociation","bpmn:Artifact","bpmn:Participant","bpmn:Lane","bpmn:LaneSet","bpmn:Process-action","bpmn:Collaboration","bpmndi:BPMNShape","bpmndi:BPMNEdge","bpmndi:BPMNDiagram","bpmndi:BPMNPlane","bpmn:Property","bpmn:CategoryValue"])},no.prototype._ensureId=function(e){var t;t=He(e,"bpmn:Mapper")?"Mapper":He(e,"bpmn:Query")?"Query":He(e,"bpmn:Function")?"Function":He(e,"bpmn:Loop")?"Loop":He(e,"bpmn:Conditional")?"Condition":He(e,"bpmn:Activity")?"Activity":He(e,"bpmn:Event")?"Event":He(e,"bpmn:Gateway")?"Gateway":Rt(e,["bpmn:SequenceFlow","bpmn:MessageFlow"])?"Flow":(e.$type||"").replace(/^[^:]*:/g,""),t+="_",!e.id&&this._needsId(e)&&(e.id=this._model.ids.nextPrefixed(t,e))},no.prototype.create=function(e,t){var n=this._model.create(e,t||{});return this._ensureId(n),n},no.prototype.createDiLabel=function(){return this.create("bpmndi:BPMNLabel",{bounds:this.createDiBounds()})},no.prototype.createDiShape=function(e,t,n){return this.create("bpmndi:BPMNShape",Object(P.a)({bpmnElement:e,bounds:this.createDiBounds(t)},n))},no.prototype.createDiBounds=function(e){return this.create("dc:Bounds",e)},no.prototype.createDiWaypoints=function(e){var t=this;return Object(P.u)(e,(function(e){return t.createDiWaypoint(e)}))},no.prototype.createDiWaypoint=function(e){return this.create("dc:Point",Object(P.x)(e,["x","y"]))},no.prototype.createDiEdge=function(e,t,n){return this.create("bpmndi:BPMNEdge",Object(P.a)({bpmnElement:e},n))},no.prototype.createDiPlane=function(e){return this.create("bpmndi:BPMNPlane",{bpmnElement:e})};var ro=n(117);function ao(e,t,n,r){or.a.call(this,e),this._bpmnFactory=t,this._translate=r;var a=this;function i(e){var t=e.context.oldRoot.children;Object(P.i)(t,(function(e){He(e,"bpmn:BaseElement")&&a.updateParent(e)}))}function o(e){var t=e.context.shape;He(t,"bpmn:BaseElement")&&a.updateBounds(t)}function c(e){a.updateConnection(e.context)}function s(e){a.updateConnectionWaypoints(e.context.connection)}function l(e){a.updateAttachment(e.context)}this.executed(["connection.layout","connection.create"],(function(e){var t,r=e.context,a=r.hints||{};r.cropped||!1===a.createElementsBehavior||((t=r.connection).waypoints=n.getCroppedWaypoints(t),r.cropped=!0)})),this.reverted(["connection.layout"],(function(e){delete e.context.cropped})),this.executed(["shape.move","shape.create","shape.delete","connection.create","connection.move","connection.delete"],io((function(e){var t=e.context;a.updateParent(t.shape||t.connection,t.oldParent)}))),this.reverted(["shape.move","shape.create","shape.delete","connection.create","connection.move","connection.delete"],io((function(e){var t=e.context,n=t.shape||t.connection,r=t.parent||t.newParent;a.updateParent(n,r)}))),this.executed(["canvas.updateRoot"],i),this.reverted(["canvas.updateRoot"],i),this.executed(["shape.move","shape.create","shape.resize"],io((function(e){"label"!==e.context.shape.type&&o(e)}))),this.reverted(["shape.move","shape.create","shape.resize"],io((function(e){"label"!==e.context.shape.type&&o(e)}))),e.on("shape.changed",(function(e){"label"===e.element.type&&o({context:{shape:e.element}})})),this.executed(["connection.create","connection.move","connection.delete","connection.reconnect"],io(c)),this.reverted(["connection.create","connection.move","connection.delete","connection.reconnect"],io(c)),this.executed(["connection.layout","connection.move","connection.updateWaypoints"],io(s)),this.reverted(["connection.layout","connection.move","connection.updateWaypoints"],io(s)),this.executed("connection.reconnect",io((function(e){var t=e.context,n=t.connection,r=t.oldSource,a=t.newSource,i=Ue(n),o=Ue(r),c=Ue(a);i.conditionExpression&&!Rt(c,["bpmn:Activity","bpmn:ExclusiveGateway","bpmn:InclusiveGateway"])&&(t.oldConditionExpression=i.conditionExpression,delete i.conditionExpression),r!==a&&o.default===i&&(t.oldDefault=o.default,delete o.default)}))),this.reverted("connection.reconnect",io((function(e){var t=e.context,n=t.connection,r=t.oldSource,a=t.newSource,i=Ue(n),o=Ue(r),c=Ue(a);t.oldConditionExpression&&(i.conditionExpression=t.oldConditionExpression),t.oldDefault&&(o.default=t.oldDefault,delete c.default)}))),this.executed(["element.updateAttachment"],io(l)),this.reverted(["element.updateAttachment"],io(l))}function io(e){return function(t){var n=t.context;He(n.shape||n.connection,"bpmn:BaseElement")&&e(t)}}L()(ao,or.a),ao.$inject=["eventBus","bpmnFactory","connectionDocking","translate"],ao.prototype.updateAttachment=function(e){var t=e.shape,n=t.businessObject,r=t.host;n.attachedToRef=r&&r.businessObject},ao.prototype.updateParent=function(e,t){if(!(e instanceof ro.b)&&!(He(e,"bpmn:DataStoreReference")&&e.parent&&He(e.parent,"bpmn:Collaboration"))){var n=e.parent,r=e.businessObject,a=n&&n.businessObject,i=a&&a.di;He(e,"bpmn:FlowNode")&&this.updateFlowNodeRefs(r,a,t&&t.businessObject),He(e,"bpmn:DataOutputAssociation")&&(a=e.source?e.source.businessObject:null),He(e,"bpmn:DataInputAssociation")&&(a=e.target?e.target.businessObject:null),this.updateSemanticParent(r,a),He(e,"bpmn:DataObjectReference")&&r.dataObjectRef&&this.updateSemanticParent(r.dataObjectRef,a),this.updateDiParent(r.di,i)}},ao.prototype.updateBounds=function(e){var t=e.businessObject.di,n=e instanceof ro.b?this._getLabel(t):t,r=n.bounds;r||(r=this._bpmnFactory.createDiBounds(),n.set("bounds",r)),Object(P.a)(r,{x:e.x,y:e.y,width:e.width,height:e.height})},ao.prototype.updateFlowNodeRefs=function(e,t,n){var r,a;n!==t&&(He(n,"bpmn:Lane")&&(r=n.get("flowNodeRef"),Object(jr.c)(r,e)),He(t,"bpmn:Lane")&&(a=t.get("flowNodeRef"),Object(jr.a)(a,e)))},ao.prototype.updateDiConnection=function(e,t,n){e.sourceElement&&e.sourceElement.bpmnElement!==t&&(e.sourceElement=t&&t.di),e.targetElement&&e.targetElement.bpmnElement!==n&&(e.targetElement=n&&n.di)},ao.prototype.updateDiParent=function(e,t){if(t&&!He(t,"bpmndi:BPMNPlane")&&(t=t.$parent),e.$parent!==t){var n=(t||e.$parent).get("planeElement");t?(n.push(e),e.$parent=t):(Object(jr.c)(n,e),e.$parent=null)}},ao.prototype.getLaneSet=function(e){var t,n;return He(e,"bpmn:Lane")?((t=e.childLaneSet)||(t=this._bpmnFactory.create("bpmn:LaneSet"),e.childLaneSet=t,t.$parent=e),t):(He(e,"bpmn:Participant")&&(e=e.processRef),(t=(n=e.get("laneSets"))[0])||((t=this._bpmnFactory.create("bpmn:LaneSet")).$parent=e,n.push(t)),t)},ao.prototype.updateSemanticParent=function(e,t,n){var r,a=this._translate;if(e.$parent!==t&&(!He(e,"bpmn:DataInput")&&!He(e,"bpmn:DataOutput")||(He(t,"bpmn:Participant")&&"processRef"in t&&(t=t.processRef),!("ioSpecification"in t)||t.ioSpecification!==e.$parent))){if(He(e,"bpmn:Lane"))t&&(t=this.getLaneSet(t)),r="lanes";else if(He(e,"bpmn:FlowElement")){if(t)if(He(t,"bpmn:Participant"))t=t.processRef;else if(He(t,"bpmn:Lane"))do{t=t.$parent.$parent}while(He(t,"bpmn:Lane"));r="flowElements"}else if(He(e,"bpmn:Artifact")){for(;t&&!He(t,"bpmn:Process-action")&&!He(t,"bpmn:Loop")&&!He(t,"bpmn:Conditional")&&!He(t,"bpmn:Collaboration");){if(He(t,"bpmn:Participant")){t=t.processRef;break}t=t.$parent}r="artifacts"}else if(He(e,"bpmn:MessageFlow"))r="messageFlows";else if(He(e,"bpmn:Participant")){r="participants";var i,o=e.processRef;o&&(i=function(e){for(;e&&!He(e,"bpmn:Process-actions");)e=e.$parent;return e}(e.$parent||t),e.$parent&&(Object(jr.c)(i.get("rootElements"),o),o.$parent=null),t&&(Object(jr.a)(i.get("rootElements"),o),o.$parent=i))}else He(e,"bpmn:DataOutputAssociation")?r="dataOutputAssociations":He(e,"bpmn:DataInputAssociation")&&(r="dataInputAssociations");if(!r)throw new Error(a("no parent for {element} in {parent}",{element:e.id,parent:t.id}));var c;if(e.$parent&&(c=e.$parent.get(r),Object(jr.c)(c,e)),t?((c=t.get(r)).push(e),e.$parent=t):e.$parent=null,n){var s=n.get(r);Object(jr.c)(c,e),t&&(s||(s=[],t.set(r,s)),s.push(e))}}},ao.prototype.updateConnectionWaypoints=function(e){e.businessObject.di.set("waypoint",this._bpmnFactory.createDiWaypoints(e.waypoints))},ao.prototype.updateConnection=function(e){var t,n=e.connection,r=Ue(n),a=Ue(n.source),i=Ue(n.target);if(He(r,"bpmn:DataAssociation"))He(r,"bpmn:DataInputAssociation")?(r.get("sourceRef")[0]=a,t=e.parent||e.newParent||i,this.updateSemanticParent(r,i,t)):He(r,"bpmn:DataOutputAssociation")&&(t=e.parent||e.newParent||a,this.updateSemanticParent(r,a,t),r.targetRef=i);else{var o=He(r,"bpmn:SequenceFlow");r.sourceRef!==a&&(o&&(Object(jr.c)(r.sourceRef&&r.sourceRef.get("outgoing"),r),a&&a.get("outgoing")&&a.get("outgoing").push(r)),r.sourceRef=a),r.targetRef!==i&&(o&&(Object(jr.c)(r.targetRef&&r.targetRef.get("incoming"),r),i&&i.get("incoming")&&i.get("incoming").push(r)),r.targetRef=i)}this.updateConnectionWaypoints(n),this.updateDiConnection(r.di,a,i)},ao.prototype._getLabel=function(e){return e.label||(e.label=this._bpmnFactory.createDiLabel()),e.label};var oo=n(142);function co(e,t,n){oo.a.call(this),this._bpmnFactory=e,this._moddle=t,this._translate=n}function so(e,t,n){e[n]=t[n],delete t[n]}L()(co,oo.a),co.$inject=["bpmnFactory","moddle","translate"],co.prototype.baseCreate=oo.a.prototype.create,co.prototype.create=function(e,t){return"label"===e?this.baseCreate(e,Object(P.a)({type:"label"},ft,t)):this.createBpmnElement(e,t)},co.prototype.createBpmnElement=function(e,t){var n,r,a,i=this._translate,o=(t=t||{}).businessObject;if(!o){if(!t.type)throw new Error(i("no shape type specified"));o=this._bpmnFactory.create(t.type)}return o.di||(o.di="root"===e?this._bpmnFactory.createDiPlane(o,[],{id:o.id+"_di"}):"connection"===e?this._bpmnFactory.createDiEdge(o,[],{id:o.id+"_di"}):this._bpmnFactory.createDiShape(o,{},{id:o.id+"_di"})),He(o,"bpmn:Group")&&(t=Object(P.a)({isFrame:!0},t)),t.di&&(Object(P.a)(o.di,t.di),delete t.di),function(e,t,n){Object(P.i)(n,(function(n){void 0!==t[n]&&so(e,t,n)}))}(o,t,["processRef","isInterrupting","associationDirection","isForCompensation"]),t.isExpanded&&so(o.di,t,"isExpanded"),He(o,"bpmn:ExclusiveGateway")&&(o.di.isMarkerVisible=!0),He(o,"bpmn:Query")&&(o.di.isMarkerVisible=!0),t.eventDefinitionType&&(r=o.get("eventDefinitions")||[],a=this._bpmnFactory.create(t.eventDefinitionType),"bpmn:ConditionalEventDefinition"===t.eventDefinitionType&&(a.condition=this._bpmnFactory.create("bpmn:FormalExpression")),r.push(a),a.$parent=o,o.eventDefinitions=r,delete t.eventDefinitionType),n=this._getDefaultSize(o),t=Object(P.a)({businessObject:o,id:o.id},n,t),this.baseCreate(e,t)},co.prototype._getDefaultSize=function(e){return He(e,"bpmn:Loop")||He(e,"bpmn:Conditional")?Ye(e)?{width:350,height:200}:{width:100,height:80}:He(e,"bpmn:Task")?{width:100,height:80}:He(e,"bpmn:Gateway")?{width:50,height:50}:He(e,"bpmn:Event")?{width:36,height:36}:He(e,"bpmn:Participant")?Ye(e)?{width:600,height:250}:{width:400,height:60}:He(e,"bpmn:Lane")?{width:400,height:100}:He(e,"bpmn:DataObjectReference")?{width:36,height:50}:He(e,"bpmn:DataStoreReference")?{width:50,height:50}:He(e,"bpmn:TextAnnotation")?{width:100,height:30}:He(e,"bpmn:Group")?{width:300,height:300}:{width:100,height:80}},co.prototype.createParticipantShape=function(e){return Object(P.q)(e)||(e={isExpanded:e}),!1!==(e=Object(P.a)({type:"bpmn:Participant"},e||{})).isExpanded&&(e.processRef=this._bpmnFactory.create("bpmn:Process-action")),this.createShape(e)};var lo=n(211),uo="default",po="id",ho="di",fo={width:0,height:0};function mo(e,t,n,r,a){this._elementRegistry=e,this._moddle=t,this._translate=n,this._modeling=r,this._textRenderer=a}function bo(e,t){return po in e&&e.id!==t.id}function vo(e,t){Object(P.i)(t,(function(t,n){n!==ho?e.set(n,t):e.di&&function(e,t){Object(P.i)(t,(function(t,n){e.set(n,t)}))}(e.di,t)}))}mo.$inject=["elementRegistry","moddle","translate","modeling","textRenderer"],mo.prototype.execute=function(e){var t=e.element,n=[t],r=this._translate;if(!t)throw new Error(r("element required"));var a=this._elementRegistry,i=this._moddle.ids,o=t.businessObject,c=function(e){var t=Object(P.a)({},e);return yo.forEach((function(n){n in e&&(t[n]=Ue(t[n]))})),t}(e.properties),s=e.oldProperties||function(e,t){var n=Object(P.t)(t);return Object(P.y)(n,(function(n,r){return n[r]=r!==ho?e.get(r):function(e,t){return Object(P.y)(t,(function(t,n){return t[n]=e.get(n),t}),{})}(e.di,Object(P.t)(t.di)),n}),{})}(o,c);return bo(c,o)&&(i.unclaim(o.id),a.updateId(t,c.id),i.claim(c.id,o)),uo in c&&(c.default&&n.push(a.get(c.default.id)),o.default&&n.push(a.get(o.default.id))),vo(o,c),e.oldProperties=s,e.changed=n,n},mo.prototype.postExecute=function(e){var t=e.element.label,n=t&&Ue(t).name;if(n){var r=this._textRenderer.getExternalLabelBounds(t,n);this._modeling.resizeShape(t,r,fo)}},mo.prototype.revert=function(e){var t=e.element,n=e.properties,r=e.oldProperties,a=t.businessObject,i=this._elementRegistry,o=this._moddle.ids;return vo(a,r),bo(n,a)&&(o.unclaim(n.id),i.updateId(t,r.id),o.claim(r.id,a)),e.changed};var yo=["default"];function go(e,t){this._canvas=e,this._modeling=t}function xo(e,t){this._modeling=e,this._spaceTool=t}function jo(e,t){this._modeling=e,this._translate=t}function wo(e,t){this._modeling=e,this._spaceTool=t}go.$inject=["canvas","modeling"],go.prototype.execute=function(e){var t=this._canvas,n=e.newRoot,r=n.businessObject,a=t.getRootElement(),i=a.businessObject,o=i.$parent,c=i.di;t.setRootElement(n,!0),Object(jr.a)(o.rootElements,r),r.$parent=o,Object(jr.c)(o.rootElements,i),i.$parent=null,i.di=null,c.bpmnElement=r,r.di=c,e.oldRoot=a},go.prototype.revert=function(e){var t=this._canvas,n=e.newRoot.businessObject,r=e.oldRoot,a=r.businessObject,i=n.$parent,o=n.di;t.setRootElement(r,!0),Object(jr.c)(i.rootElements,n),n.$parent=null,Object(jr.a)(i.rootElements,a),a.$parent=i,n.di=null,o.bpmnElement=a,a.di=o},xo.$inject=["modeling","spaceTool"],xo.prototype.preExecute=function(e){var t=this._spaceTool,n=this._modeling,r=e.shape,a=e.location,i=Wn(r),o=i===r,c=o?r:r.parent;Gn(c).length||n.createShape({type:"bpmn:Lane"},{x:r.x+In,y:r.y,width:r.width-In,height:r.height},c);var s=[];Object(Zn.a)(i,(function(e){return s.push(e),e.label&&s.push(e.label),e===r?[]:Object(P.e)(e.children,(function(e){return e!==r}))}));var l="top"===a?-120:120,u="top"===a?r.y:r.y+r.height,p=u+("top"===a?10:-10),d="top"===a?"n":"s",h=t.calculateAdjustments(s,"y",l,p);t.makeSpace(h.movingShapes,h.resizingShapes,{x:0,y:l},d,p),e.newLane=n.createShape({type:"bpmn:Lane"},{x:r.x+(o?In:0),y:u-("top"===a?120:0),width:r.width-(o?In:0),height:120},c)},jo.$inject=["modeling","translate"],jo.prototype.preExecute=function(e){var t=this._modeling,n=this._translate,r=e.shape,a=e.count,i=Gn(r),o=i.length;if(o>a)throw new Error(n("more than {count} child lanes",{count:a}));var c,s,l,u,p,d=Math.round(r.height/a);for(p=0;p<a;p++)c=r.y+p*d,s=p===a-1?r.height-d*p:d,l={x:r.x+In,y:c,width:r.width-In,height:s},p<o?t.resizeShape(i[p],l):(u={type:"bpmn:Lane"},t.createShape(u,l,r))},wo.$inject=["modeling","spaceTool"],wo.prototype.preExecute=function(e){var t=e.shape,n=e.newBounds;!1!==e.balanced?this.resizeBalanced(t,n):this.resizeSpace(t,n)},wo.prototype.resizeBalanced=function(e,t){var n=this._modeling,r=$n(e,t);n.resizeShape(e,t),r.forEach((function(e){n.resizeShape(e.shape,e.newBounds)}))},wo.prototype.resizeSpace=function(e,t){var n,r,a,i,o,c=this._spaceTool,s=Object(xt.b)(e),l=Object(xt.b)(t),u=Object(Bn.f)(l,s),p=Wn(e),d=[],h=[];Object(Zn.a)(p,(function(e){return d.push(e),(He(e,"bpmn:Lane")||He(e,"bpmn:Participant"))&&h.push(e),e.children})),(u.bottom||u.top)&&(n=u.bottom||u.top,r=e.y+(u.bottom?e.height:0)+(u.bottom?-10:10),a=u.bottom?"s":"n",i=u.top>0||u.bottom<0?-n:n,o=c.calculateAdjustments(d,"y",i,r),c.makeSpace(o.movingShapes,o.resizingShapes,{x:0,y:n},a)),(u.left||u.right)&&(n=u.right||u.left,r=e.x+(u.right?e.width:0)+(u.right?-10:100),a=u.right?"e":"w",i=u.left>0||u.right<0?-n:n,o=c.calculateAdjustments(h,"x",i,r),c.makeSpace(o.movingShapes,o.resizingShapes,{x:n,y:0},a))};var Oo="flowNodeRef",Eo="lanes";function No(e){this._elementRegistry=e}function ko(e){this._moddle=e}No.$inject=["elementRegistry"],No.prototype.computeUpdates=function(e,t){var n=[],r=[],a={},i=[];function o(e){-1===n.indexOf(e)&&(i.push(e),n.push(e))}function c(e){return e.parent?function(e){var t=Wn(e);return a[t.id]||(a[t.id]=Vn(t)),a[t.id]}(e).filter((function(t){return function(e,t){var n=Object(xt.b)(t),r=e.x+e.width/2,a=e.y+e.height/2;return r>n.left&&r<n.right&&a>n.top&&a<n.bottom}(e,t)})).map((function(e){return e.businessObject})):[]}return t.forEach((function(e){var t=Wn(e);t&&-1===n.indexOf(t)&&(t.children.filter((function(e){return He(e,"bpmn:FlowNode")})).forEach(o),n.push(t))})),e.forEach(o),i.forEach((function(e){var t=e.businessObject,n=t.get(Eo).slice(),a=c(e);r.push({flowNode:t,remove:n,add:a})})),r},No.prototype.execute=function(e){var t=e.updates;t||(t=e.updates=this.computeUpdates(e.flowNodeShapes,e.laneShapes)),t.forEach((function(e){var t=e.flowNode,n=t.get(Eo);e.remove.forEach((function(e){Object(jr.c)(n,e),Object(jr.c)(e.get(Oo),t)})),e.add.forEach((function(e){Object(jr.a)(n,e),Object(jr.a)(e.get(Oo),t)}))}))},No.prototype.revert=function(e){e.updates.forEach((function(e){var t=e.flowNode,n=t.get(Eo);e.add.forEach((function(e){Object(jr.c)(n,e),Object(jr.c)(e.get(Oo),t)})),e.remove.forEach((function(e){Object(jr.a)(n,e),Object(jr.a)(e.get(Oo),t)}))}))},ko.$inject=["moddle"],ko.prototype.execute=function(e){var t=this._moddle.ids,n=e.id,r=e.element;e.claiming?t.claim(n,r):t.unclaim(n)},ko.prototype.revert=function(e){var t=this._moddle.ids,n=e.id,r=e.element;e.claiming?t.unclaim(n):t.claim(n,r)};var So={fill:void 0,stroke:void 0};function _o(e){this._commandStack=e}_o.$inject=["commandStack"],_o.prototype.postExecute=function(e){var t=e.elements,n=e.colors||So,r=this,a={};"fill"in n&&Object(P.a)(a,{fill:n.fill}),"stroke"in n&&Object(P.a)(a,{stroke:n.stroke}),Object(P.i)(t,(function(e){r._commandStack.execute("element.updateProperties",{element:e,properties:{di:a}})}))};var Lo={width:0,height:0};function Co(e,t){function n(e,t){var n=e.label||e,r=e.labelTarget||e;return function(e,t,n){var r=e.businessObject,a=Qe(r);a&&("categoryValueRef"===a?r.categoryValueRef.value=t:r[a]=t)}(n,t),[n,r]}this.preExecute=function(t){var n=t.element,r=n.businessObject,a=t.newLabel;if(!gt(n)&&mt(n)&&!bt(n)&&!Po(a)){var i=yt(n);i={x:i.x,y:i.y+7},e.createLabel(n,i,{id:r.id+"_label",businessObject:r})}},this.execute=function(e){return e.oldLabel=Ze(e.element),n(e.element,e.newLabel)},this.revert=function(e){return n(e.element,e.oldLabel)},this.postExecute=function(n){var r=n.element,a=r.label||r,i=n.newLabel,o=n.newBounds,c=n.hints||{};if(gt(a)&&Po(i))!1!==c.removeShape&&e.removeShape(a,{unsetLabel:!1});else if(mt(r)||He(r,"bpmn:TextAnnotation")){var s=Ze(a);"undefined"===typeof o&&(o=t.getExternalLabelBounds(a,s)),o&&e.resizeShape(a,o,Lo)}}}function Po(e){return!e||!e.trim()}function To(e,t,n,r){lo.a.call(this,e,t,n),this._bpmnRules=r}Co.$inject=["modeling","textRenderer"],L()(To,lo.a),To.$inject=["eventBus","elementFactory","commandStack","bpmnRules"],To.prototype.getHandlers=function(){var e=lo.a.prototype.getHandlers.call(this);return e["element.updateProperties"]=mo,e["canvas.updateRoot"]=go,e["lane.add"]=xo,e["lane.resize"]=wo,e["lane.split"]=jo,e["lane.updateRefs"]=No,e["id.updateClaim"]=ko,e["element.setColor"]=_o,e["element.updateLabel"]=Co,e},To.prototype.updateLabel=function(e,t,n,r){this._commandStack.execute("element.updateLabel",{element:e,newLabel:t,newBounds:n,hints:r||{}})},To.prototype.connect=function(e,t,n,r){var a=this._bpmnRules;if(n||(n=a.canConnect(e,t)),n)return this.createConnection(e,t,n,e.parent,r)},To.prototype.updateProperties=function(e,t){this._commandStack.execute("element.updateProperties",{element:e,properties:t})},To.prototype.resizeLane=function(e,t,n){this._commandStack.execute("lane.resize",{shape:e,newBounds:t,balanced:n})},To.prototype.addLane=function(e,t){var n={shape:e,location:t};return this._commandStack.execute("lane.add",n),n.newLane},To.prototype.splitLane=function(e,t){this._commandStack.execute("lane.split",{shape:e,count:t})},To.prototype.makeCollaboration=function(){var e=this._create("root",{type:"bpmn:Collaboration"}),t={newRoot:e};return this._commandStack.execute("canvas.updateRoot",t),e},To.prototype.updateLaneRefs=function(e,t){this._commandStack.execute("lane.updateRefs",{flowNodeShapes:e,laneShapes:t})},To.prototype.makeProcess=function(){var e={newRoot:this._create("root",{type:"bpmn:Process-action"})};this._commandStack.execute("canvas.updateRoot",e)},To.prototype.claimId=function(e,t){this._commandStack.execute("id.updateClaim",{id:e,element:t,claiming:!0})},To.prototype.unclaimId=function(e,t){this._commandStack.execute("id.updateClaim",{id:e,element:t})},To.prototype.setColor=function(e,t){e.length||(e=[e]),this._commandStack.execute("element.setColor",{elements:e,colors:t})};var Mo=n(347),Ao=n(250),Ro={top:"bottom","top-right":"bottom-left","top-left":"bottom-right",right:"left",bottom:"top","bottom-right":"top-left","bottom-left":"top-right",left:"right"},Bo={top:"t",right:"r",bottom:"b",left:"l"};function Do(){}function Fo(e,t){return He(t,"bpmn:Participant")?"source":He(e,"bpmn:Participant")?"target":Go(t)?"source":Go(e)||He(t,"bpmn:Event")?"target":He(e,"bpmn:Event")?"source":null}function Io(e,t){return e?e.original||e:Object(xt.e)(t)}function Vo(e,t){return He(t,"bpmn:Activity")&&He(e,"bpmn:BoundaryEvent")&&t.businessObject.isForCompensation}function Go(e){return He(e,"bpmn:Loop")&&Ye(e)}function Wo(e,t){return e===t}function $o(e){var t=/right|left/.exec(e);return t&&t[0]}function zo(e){var t=/top|bottom/.exec(e);return t&&t[0]}function Ko(e){return"right"===e||"left"===e}function qo(e,t){var n=t.waypoints,r=n&&n.length&&Object(xt.f)(n[0],e);return"top"===r?["t:r"]:"right"===r?["r:b"]:"left"===r?["l:t"]:["b:l"]}function Ho(e,t,n){var r=Object(xt.e)(e),a=Object(xt.e)(t),i=function(e){var t=e.host;return Object(xt.f)(Object(xt.e)(e),t,-10)}(e),o=Wo(e.host,t),c=-1!==["top","right","bottom","left"].indexOf(i),s=Object(xt.f)(a,r,{x:e.width/2+t.width/2,y:e.height/2+t.height/2});return o?function(e,t,n,r,a){var i,o=t?e:zo(e),c=Bo[o];i=t?Ko(e)?Uo("y",n,r,a)?"h":"b":Uo("x",n,r,a)?"v":"l":"v";return[c+":"+i]}(i,c,e,t,n):[function(e,t,n){if(n)return Bo[e];if(Wo(zo(e),zo(t))||(r=$o(e),a=$o(t),Ro[r]===a))return Bo[zo(e)];var r,a;return Bo[$o(e)]}(i,s,c)+":"+function(e,t,n){if(n)return Ko(e)?function(e,t){var n=$o(e),r=Ro[n];return-1!==t.indexOf(r)}(e,t)||Wo(e,t)?"h":"v":function(e,t){var n=zo(e),r=Ro[n];return-1!==t.indexOf(r)}(e,t)||Wo(e,t)?"v":"h";return Ko(t)||Wo(zo(e),zo(t))&&$o(t)?"h":"v"}(i,s,c)]}function Uo(e,t,n,r){return!(Yo(e,r,n,40)||Yo(e,r,{x:n.x+n.width,y:n.y+n.height},40)||Yo(e,r,Object(xt.e)(t),40))}function Yo(e,t,n,r){return Math.abs(t[e]-n[e])<r}L()(Do,Mo.a),Do.prototype.layoutConnection=function(e,t){t||(t={});var n,r,a=t.source||e.source,i=t.target||e.target,o=t.waypoints||e.waypoints,c=t.connectionStart,s=t.connectionEnd;return c||(c=Io(o&&o[0],a)),s||(s=Io(o&&o[o.length-1],i)),(He(e,"bpmn:Association")||He(e,"bpmn:DataAssociation"))&&o&&!Vo(a,i)?[].concat([c],o.slice(1,-1),[s]):(He(e,"bpmn:MessageFlow")?n=function(e,t){return{preferredLayouts:["straight","v:v"],preserveDocking:Fo(e,t)}}(a,i):(He(e,"bpmn:SequenceFlow")||Vo(a,i))&&(n=a===i?{preferredLayouts:qo(a,e)}:He(a,"bpmn:BoundaryEvent")?{preferredLayouts:Ho(a,i,s)}:He(a,"bpmn:Gateway")?{preferredLayouts:["v:h"]}:He(i,"bpmn:Gateway")?{preferredLayouts:["h:v"]}:{preferredLayouts:["h:h"]}),n&&(n=Object(P.a)(n,t),r=Object(Ao.b)(Object(Ao.a)(a,i,c,s,o,n))),r||[c,s])};var Jo=n(348),Xo={__init__:["modeling","bpmnUpdater"],__depends__:[li,Ki,Hi,Ji,xn,Xi.a,Qi.a,Zi.a,eo.a,kt.a,gr.a,to.a],bpmnFactory:["type",no],bpmnUpdater:["type",ao],elementFactory:["type",co],modeling:["type",To],layouter:["type",Do],connectionDocking:["type",Jo.a]},Qo=n(389),Zo=n(402),ec=n(403),tc=n(404),nc=n(405);function rc(e,t,n,r,a,i,o,c){this._palette=e,this._create=t,this._elementFactory=n,this._spaceTool=r,this._lassoTool=a,this._handTool=i,this._globalConnect=o,this._translate=c,e.registerProvider(this)}rc.$inject=["palette","create","elementFactory","spaceTool","lassoTool","handTool","globalConnect","translate"],rc.prototype.getPaletteEntries=function(e){var t={},n=this._create,r=this._elementFactory,a=this._spaceTool,i=this._lassoTool,o=this._handTool,c=this._globalConnect,s=this._translate;function l(e,t,a,i,o){function c(t){var a=r.createShape(Object(P.a)({type:e},o));o&&(a.businessObject.di.isExpanded=o.isExpanded),n.start(t,a)}var l=e.replace(/^bpmn:/,"");return{group:t,className:a,title:i||s("Create {type}",{type:l}),action:{dragstart:c,click:c}}}function u(e){var t=r.createShape({type:"bpmn:Loop",x:0,y:0,isExpanded:!0}),a=r.createShape({type:"bpmn:StartEvent",x:40,y:82,parent:t});n.start(e,[t,a],{hints:{autoSelect:[a]}})}function p(e){n.start(e,r.createParticipantShape())}return Object(P.a)(t,{"hand-tool":{group:"tools",className:"bpmn-icon-hand-tool",title:s("Activate the hand tool"),action:{click:function(e){o.activateHand(e)}}},"lasso-tool":{group:"tools",className:"bpmn-icon-lasso-tool",title:s("Activate the lasso tool"),action:{click:function(e){i.activateSelection(e)}}},"space-tool":{group:"tools",className:"bpmn-icon-space-tool",title:s("Activate the create/remove space tool"),action:{click:function(e){a.activateSelection(e)}}},"global-connect-tool":{group:"tools",className:"bpmn-icon-connection-multi",title:s("Activate the global connect tool"),action:{click:function(e){c.toggle(e)}}},"tool-separator":{group:"tools",separator:!0},"create.start-event":l("bpmn:StartEvent","event","bpmn-icon-start-event-none",s("Create StartEvent")),"create.intermediate-event":l("bpmn:IntermediateThrowEvent","event","bpmn-icon-intermediate-event-none",s("Create Intermediate/Boundary Event")),"create.end-event":l("bpmn:EndEvent","event","bpmn-icon-end-event-none",s("Create EndEvent")),"create.exclusive-gateway":l("bpmn:ExclusiveGateway","gateway","bpmn-icon-gateway-none",s("Create Gateway")),"create.task":l("bpmn:Task","activity","bpmn-icon-task",s("Create Task")),"create.data-object":l("bpmn:DataObjectReference","data-object","bpmn-icon-data-object",s("Create DataObjectReference")),"create.data-store":l("bpmn:DataStoreReference","data-store","bpmn-icon-data-store",s("Create DataStoreReference")),"create.loop":{group:"activity",className:"bpmn-icon-loop-expanded",title:s("Create Loop"),action:{dragstart:u,click:u}},"create.participant-expanded":{group:"collaboration",className:"bpmn-icon-participant",title:s("Create Pool/Participant"),action:{dragstart:p,click:p}},"create.group":l("bpmn:Group","artifact","bpmn-icon-group",s("Create Group"))}),t};var ac={__depends__:[Zo.a,an.a,to.a,ec.a,tc.a,nc.a,ht.a],__init__:["paletteProvider"],paletteProvider:["type",rc]},ic=n(78),oc=n(161),cc=n.n(oc);function sc(e,t,n,r,a){or.a.call(this,e),e.on("shape.move.move",250,(function(e){var i=e.context,o=i.canExecute;i.visualReplacements||(i.visualReplacements={}),o&&o.replacements?function(e){var i=e.canExecute.replacements;Object(P.i)(i,(function(i){var o=i.oldElementId,c={type:i.newElementType};if(!e.visualReplacements[o]){var s=t.get(o);Object(P.a)(c,{x:s.x,y:s.y});var l=n.createShape(c);r.addShape(l,s.parent);var u=Object(T.i)('[data-element-id="'+cc()(s.id)+'"]',e.dragGroup);u&&Object(M.b)(u,{display:"none"});var p=a.addDragger(l,e.dragGroup);e.visualReplacements[o]=p,r.removeShape(l)}}))}(i):function(e){var t=e.visualReplacements;Object(P.i)(t,(function(n,r){var a=Object(T.i)('[data-element-id="'+cc()(r)+'"]',e.dragGroup);a&&Object(M.b)(a,{display:"inline"}),n.remove(),t[r]&&delete t[r]}))}(i)}))}sc.$inject=["eventBus","elementRegistry","elementFactory","canvas","previewSupport"],L()(sc,or.a);var lc={__depends__:[ic.a],__init__:["bpmnReplacePreview"],bpmnReplacePreview:["type",sc]},uc=n(22),pc=n(31),dc=40,hc=["x","y"],fc=Math.abs;function mc(e){e.on(["connect.hover","connect.move","connect.end"],1250,(function(e){var t,n,r=e.context,a=r.canExecute,i=r.start,o=r.hover,c=r.source,s=r.target;e.originalEvent&&Object(pc.b)(e.originalEvent)||(r.initialConnectionStart||(r.initialConnectionStart=r.connectionStart),a&&o&&function(e,t,n){hc.forEach((function(r){var a=yc(r,t);e[r]<t[r]+n?Object(uc.e)(e,r,t[r]+n):e[r]>t[r]+a-n&&Object(uc.e)(e,r,t[r]+a-n)}))}(e,o,function(e){return He(e,"bpmn:Task")?10:20}(o)),o&&(t=a,n=["bpmn:Association","bpmn:DataInputAssociation","bpmn:DataOutputAssociation","bpmn:SequenceFlow"],Object(P.A)(n,(function(e){return vc(t,e)})))?(r.connectionStart=Object(uc.d)(i),Rt(o,["bpmn:Event","bpmn:Gateway"])&&bc(e,Object(uc.d)(o)),Rt(o,["bpmn:Task","bpmn:Loop","bpmn:Conditional"])&&function(e,t){var n=Object(uc.d)(t);hc.forEach((function(r){(function(e,t,n){return e[n]>t[n]+20&&e[n]<t[n]+yc(n,t)-20})(e,t,r)&&Object(uc.e)(e,r,n[r])}))}(e,o),He(c,"bpmn:BoundaryEvent")&&s===c.host&&function(e){var t=e.context,n=t.source,r=t.target;if(function(e){var t=e.hover,n=e.source;return t&&n&&t===n}(t))return;var a=Object(uc.d)(n),i=Object(xt.f)(a,r,-10),o=[];/top|bottom/.test(i)&&o.push("x");/left|right/.test(i)&&o.push("y");o.forEach((function(t){var n,r=e[t];fc(r-a[t])<dc&&(n=r>a[t]?a[t]+dc:a[t]-dc,Object(uc.e)(e,t,n))}))}(e)):vc(a,"bpmn:MessageFlow")?(He(i,"bpmn:Event")&&(r.connectionStart=Object(uc.d)(i)),He(o,"bpmn:Event")&&bc(e,Object(uc.d)(o))):r.connectionStart=r.initialConnectionStart)}))}function bc(e,t){Object(uc.e)(e,"x",t.x),Object(uc.e)(e,"y",t.y)}function vc(e,t){return e&&e.type===t}function yc(e,t){return"x"===e?t.width:t.height}mc.$inject=["eventBus"];var gc=n(106);function xc(e,t){t.invoke(gc.a,this),e.on(["create.move","create.end"],1500,jc),e.on(["create.move","create.end","shape.move.move","shape.move.end"],1500,(function(e){var t=e.context,n=t.canExecute,r=t.target;n&&("attach"===n||n.attach)&&!Object(uc.c)(e)&&function(e,t){var n,r=Object(xt.b)(t),a=di(e,t),i=e.context.shape;n=i.parent?{x:0,y:0}:Object(xt.e)(i);/top/.test(a)?Object(uc.e)(e,"y",r.top-n.y):/bottom/.test(a)&&Object(uc.e)(e,"y",r.bottom-n.y);/left/.test(a)?Object(uc.e)(e,"x",r.left-n.x):/right/.test(a)&&Object(uc.e)(e,"x",r.right-n.x)}(e,r)}))}function jc(e){var t=e.context.createConstraints;if(t){var n=t.top,r=t.right,a=t.bottom,i=t.left;(i&&i>=e.x||r&&r<=e.x)&&Object(uc.e)(e,"x",e.x),(n&&n>=e.y||a&&a<=e.y)&&Object(uc.e)(e,"y",e.y)}}function wc(e,t){return-1!==e.indexOf(t)}function Oc(e,t,n){return t?{x:e.x-n.x,y:e.y-n.y}:{x:e.x,y:e.y}}L()(xc,gc.a),xc.$inject=["eventBus","injector"],xc.prototype.initSnap=function(e){var t=gc.a.prototype.initSnap.call(this,e),n=e.shape,r=!!this._elementRegistry.get(n.id);return Object(P.i)(n.outgoing,(function(n){var a=n.waypoints[0];a=a.original||a,t.setSnapOrigin(n.id+"-docking",Oc(a,r,e))})),Object(P.i)(n.incoming,(function(n){var a=n.waypoints[n.waypoints.length-1];a=a.original||a,t.setSnapOrigin(n.id+"-docking",Oc(a,r,e))})),He(n,"bpmn:Participant")&&t.setSnapLocations(["top-left","bottom-right","mid"]),t},xc.prototype.addSnapTargetPoints=function(e,t,n){gc.a.prototype.addSnapTargetPoints.call(this,e,t,n);var r=this.getSnapTargets(t,n);Object(P.i)(r,(function(n){var r;(function(e){if(He(e,"bpmn:Loop")&&Ye(e))return!0;return He(e,"bpmn:Participant")}(n)||(r="bpmn:TextAnnotation",[t,n].every((function(e){return He(e,r)}))))&&(e.add("top-left",Object(uc.g)(n)),e.add("bottom-right",Object(uc.a)(n)))}));var a=this._elementRegistry;return Object(P.i)(t.incoming,(function(n){if(a.get(t.id)){wc(r,n.source)||e.add("mid",Object(xt.e)(n.source));var i=n.waypoints[0];e.add(n.id+"-docking",i.original||i)}})),Object(P.i)(t.outgoing,(function(n){if(a.get(t.id)){wc(r,n.target)||e.add("mid",Object(xt.e)(n.target));var i=n.waypoints[n.waypoints.length-1];e.add(n.id+"-docking",i.original||i)}})),He(n,"bpmn:SequenceFlow")&&(e=this.addSnapTargetPoints(e,t,n.parent)),e},xc.prototype.getSnapTargets=function(e,t){return gc.a.prototype.getSnapTargets.call(this,e,t).filter((function(e){return!He(e,"bpmn:Lane")}))};var Ec={__depends__:[n(390).a],__init__:["connectSnapping","createMoveSnapping"],connectSnapping:["type",mc],createMoveSnapping:["type",xc]},Nc=n(406);function kc(e,t,n){this._elementRegistry=e,this._canvas=n,t.registerProvider(this)}function Sc(e){return Object(P.e)(e,(function(e){return!!e.matched})).length>0}function _c(e,t){var n=[],r=e;if(!e)return n;e=e.toLowerCase(),t=t.toLowerCase();var a=e.indexOf(t);return a>-1?(0!==a&&n.push({normal:r.substr(0,a)}),n.push({matched:r.substr(a,t.length)}),t.length+a<e.length&&n.push({normal:r.substr(t.length+a,e.length)})):n.push({normal:r}),n}kc.$inject=["elementRegistry","searchPad","canvas"],kc.prototype.find=function(e){var t=this._canvas.getRootElement(),n=this._elementRegistry.filter((function(e){return!e.labelTarget}));return n=Object(P.e)(n,(function(e){return e!==t})),n=Object(P.u)(n,(function(t){return{primaryTokens:_c(Ze(t),e),secondaryTokens:_c(t.id,e),element:t}})),n=Object(P.e)(n,(function(e){return Sc(e.primaryTokens)||Sc(e.secondaryTokens)})),n=Object(P.B)(n,(function(e){return Ze(e.element)+e.element.id}))};var Lc={__depends__:[Nc.a],__init__:["bpmnSearch"],bpmnSearch:["type",kc]};function Cc(e){$e.call(this,e)}L()(Cc,$e),Cc.Viewer=_t,Cc.NavigatedViewer=Tt,Cc.prototype.createDiagram=function(e){return this.importXML('<?xml version="1.0" encoding="UTF-8"?>\n  <process-Actions \n  xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"\n  xmlns="http://www.omg.org/spec/BPMN/20100524/MODEL"\n  xmlns:bpmndi="http://www.omg.org/spec/BPMN/20100524/DI"\n  xmlns:dc="http://www.omg.org/spec/DD/20100524/DC"\n  targetNamespace="http://bpmn.io/schema/bpmn"\n  id="Definitions_1">\n  <process-Action id="ProcessAction_1">\n  </process-Action>\n  <bpmndi:BPMNDiagram id="BPMNDiagram_1">\n  <bpmndi:BPMNPlane id="BPMNPlane_1" bpmnElement="Process_1">\n  <bpmndi:BPMNShape id="_BPMNShape_StartEvent_2" bpmnElement="StartEvent_1">\n  <dc:Bounds height="36.0" width="36.0" x="173.0" y="102.0"/>\n  </bpmndi:BPMNShape>\n  </bpmndi:BPMNPlane>\n  </bpmndi:BPMNDiagram>\n  </process-Actions>',e)},Cc.prototype._interactionModules=[Lt.a,Ct.a,Mt.a,Pt.a],Cc.prototype._modelingModules=[At.a,qt,Qt.a,Zt.a,en.a,Xt,tn.a,Hn,fn,an.a,Jn,tr,pr,hr,vr,yr.a,Lr,Xo,Qo.a,ac,lc,xr.a,Ec,Lc],Cc.prototype._modules=[].concat(_t.prototype._modules,Cc.prototype._interactionModules,Cc.prototype._modelingModules);var Pc,Tc=n(61),Mc=n(583),Ac=n(584),Rc=n(349),Bc=n(34),Dc=n(350),Fc=n(351),Ic={};var Vc=new(function(){function e(){Object(Dc.a)(this,e);var t=new Headers;t.append("Accept","application/json"),t.append("Content-Type","application/json"),t.append("X-Requested-With","XMLHttpRequest"),t.append("X-CSRF-Token",function(e){var t=document.cookie||"";return t!==Pc&&(Pc=t,Ic=t.split("; ").reduce((function(e,t){var n=t.split("=");return e[n[0]]=n[1],e}),{})),Ic[e]}("CSRF-TOKEN")),this.baseURL="..",this.headers=t}return Object(Fc.a)(e,[{key:"fetch",value:function(e){function t(t,n,r){return e.apply(this,arguments)}return t.toString=function(){return e.toString()},t}((function(e,t,n){return fetch(e,n).then((function(e){return-1===["head","delete"].indexOf(t.toLowerCase())&&e.ok&&e.headers.get("content-type").includes("application/json")?e.json():e})).catch((function(e){throw e}))}))},{key:"request",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=Object.assign({method:"POST",credentials:"include",headers:this.headers,mode:"cors",body:JSON.stringify(n)},t);return"GET"===t.method&&delete r.body,this.fetch("".concat(this.baseURL).concat(0===e.indexOf("/")?e:"/".concat(e)),t.method,r)}},{key:"get",value:function(e){return this.request("".concat(e),{method:"GET"})}},{key:"post",value:function(e,t){return this.request(e,{method:"POST"},t)}},{key:"delete",value:function(e,t){var n="ws/rest/".concat(e,"/").concat(t);return this.request(n,{method:"DELETE"})}},{key:"add",value:function(e,t){var n={data:t},r="ws/rest/".concat(e);return this.post(r,n)}},{key:"update",value:function(e,t,n){var r={data:t},a="ws/rest/".concat(e,"/").concat(n);return this.post(a,r)}},{key:"fetchId",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r="ws/rest/".concat(e,"/").concat(t,"/fetch");return this.post(r,n)}},{key:"search",value:function(e,t){var n=Object(l.a)({offset:0},t),r="ws/rest/".concat(e,"/search");return this.post(r,n)}},{key:"action",value:function(e){return this.post("ws/action",e)}},{key:"fields",value:function(e){return this.post("/ws/meta/view/fields",e)}},{key:"view",value:function(e){return this.post("/ws/meta/view",e)}},{key:"fetchFields",value:function(e){var t="/ws/meta/fields/".concat(e);return this.get(t)}},{key:"fetchRecord",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r="ws/rest/".concat(e,"/").concat(t,"/fetch");return this.post(r,n)}}]),e}()),Gc=n(352);function Wc(){Wc=function(){return e};var e={},t=Object.prototype,n=t.hasOwnProperty,r=Object.defineProperty||function(e,t,n){e[t]=n.value},a="function"==typeof Symbol?Symbol:{},i=a.iterator||"@@iterator",o=a.asyncIterator||"@@asyncIterator",c=a.toStringTag||"@@toStringTag";function s(e,t,n){return Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{s({},"")}catch(_){s=function(e,t,n){return e[t]=n}}function l(e,t,n,a){var i=t&&t.prototype instanceof d?t:d,o=Object.create(i.prototype),c=new N(a||[]);return r(o,"_invoke",{value:j(e,n,c)}),o}function u(e,t,n){try{return{type:"normal",arg:e.call(t,n)}}catch(_){return{type:"throw",arg:_}}}e.wrap=l;var p={};function d(){}function h(){}function f(){}var m={};s(m,i,(function(){return this}));var b=Object.getPrototypeOf,v=b&&b(b(k([])));v&&v!==t&&n.call(v,i)&&(m=v);var y=f.prototype=d.prototype=Object.create(m);function g(e){["next","throw","return"].forEach((function(t){s(e,t,(function(e){return this._invoke(t,e)}))}))}function x(e,t){function a(r,i,o,c){var s=u(e[r],e,i);if("throw"!==s.type){var l=s.arg,p=l.value;return p&&"object"==typeof p&&n.call(p,"__await")?t.resolve(p.__await).then((function(e){a("next",e,o,c)}),(function(e){a("throw",e,o,c)})):t.resolve(p).then((function(e){l.value=e,o(l)}),(function(e){return a("throw",e,o,c)}))}c(s.arg)}var i;r(this,"_invoke",{value:function(e,n){function r(){return new t((function(t,r){a(e,n,t,r)}))}return i=i?i.then(r,r):r()}})}function j(e,t,n){var r="suspendedStart";return function(a,i){if("executing"===r)throw new Error("Generator is already running");if("completed"===r){if("throw"===a)throw i;return S()}for(n.method=a,n.arg=i;;){var o=n.delegate;if(o){var c=w(o,n);if(c){if(c===p)continue;return c}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if("suspendedStart"===r)throw r="completed",n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);r="executing";var s=u(e,t,n);if("normal"===s.type){if(r=n.done?"completed":"suspendedYield",s.arg===p)continue;return{value:s.arg,done:n.done}}"throw"===s.type&&(r="completed",n.method="throw",n.arg=s.arg)}}}function w(e,t){var n=e.iterator[t.method];if(void 0===n){if(t.delegate=null,"throw"===t.method){if(e.iterator.return&&(t.method="return",t.arg=void 0,w(e,t),"throw"===t.method))return p;t.method="throw",t.arg=new TypeError("The iterator does not provide a 'throw' method")}return p}var r=u(n,e.iterator,t.arg);if("throw"===r.type)return t.method="throw",t.arg=r.arg,t.delegate=null,p;var a=r.arg;return a?a.done?(t[e.resultName]=a.value,t.next=e.nextLoc,"return"!==t.method&&(t.method="next",t.arg=void 0),t.delegate=null,p):a:(t.method="throw",t.arg=new TypeError("iterator result is not an object"),t.delegate=null,p)}function O(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function E(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function N(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(O,this),this.reset(!0)}function k(e){if(e){var t=e[i];if(t)return t.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var r=-1,a=function t(){for(;++r<e.length;)if(n.call(e,r))return t.value=e[r],t.done=!1,t;return t.value=void 0,t.done=!0,t};return a.next=a}}return{next:S}}function S(){return{value:void 0,done:!0}}return h.prototype=f,r(y,"constructor",{value:f,configurable:!0}),r(f,"constructor",{value:h,configurable:!0}),h.displayName=s(f,c,"GeneratorFunction"),e.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===h||"GeneratorFunction"===(t.displayName||t.name))},e.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,f):(e.__proto__=f,s(e,c,"GeneratorFunction")),e.prototype=Object.create(y),e},e.awrap=function(e){return{__await:e}},g(x.prototype),s(x.prototype,o,(function(){return this})),e.AsyncIterator=x,e.async=function(t,n,r,a,i){void 0===i&&(i=Promise);var o=new x(l(t,n,r,a),i);return e.isGeneratorFunction(n)?o:o.next().then((function(e){return e.done?e.value:o.next()}))},g(y),s(y,c,"Generator"),s(y,i,(function(){return this})),s(y,"toString",(function(){return"[object Generator]"})),e.keys=function(e){var t=Object(e),n=[];for(var r in t)n.push(r);return n.reverse(),function e(){for(;n.length;){var r=n.pop();if(r in t)return e.value=r,e.done=!1,e}return e.done=!0,e}},e.values=k,N.prototype={constructor:N,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(E),!e)for(var t in this)"t"===t.charAt(0)&&n.call(this,t)&&!isNaN(+t.slice(1))&&(this[t]=void 0)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var t=this;function r(n,r){return o.type="throw",o.arg=e,t.next=n,r&&(t.method="next",t.arg=void 0),!!r}for(var a=this.tryEntries.length-1;a>=0;--a){var i=this.tryEntries[a],o=i.completion;if("root"===i.tryLoc)return r("end");if(i.tryLoc<=this.prev){var c=n.call(i,"catchLoc"),s=n.call(i,"finallyLoc");if(c&&s){if(this.prev<i.catchLoc)return r(i.catchLoc,!0);if(this.prev<i.finallyLoc)return r(i.finallyLoc)}else if(c){if(this.prev<i.catchLoc)return r(i.catchLoc,!0)}else{if(!s)throw new Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return r(i.finallyLoc)}}}},abrupt:function(e,t){for(var r=this.tryEntries.length-1;r>=0;--r){var a=this.tryEntries[r];if(a.tryLoc<=this.prev&&n.call(a,"finallyLoc")&&this.prev<a.finallyLoc){var i=a;break}}i&&("break"===e||"continue"===e)&&i.tryLoc<=t&&t<=i.finallyLoc&&(i=null);var o=i?i.completion:{};return o.type=e,o.arg=t,i?(this.method="next",this.next=i.finallyLoc,p):this.complete(o)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),p},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.finallyLoc===e)return this.complete(n.completion,n.afterLoc),E(n),p}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.tryLoc===e){var r=n.completion;if("throw"===r.type){var a=r.arg;E(n)}return a}}throw new Error("illegal catch attempt")},delegateYield:function(e,t,n){return this.delegate={iterator:k(e),resultName:t,nextLoc:n},"next"===this.method&&(this.arg=void 0),p}},e}function $c(e){return zc.apply(this,arguments)}function zc(){return(zc=Object(u.a)(Wc().mark((function e(t){var n;return Wc().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Vc.delete("com.axelor.studio.db.WsRequest",t);case 2:return n=e.sent,e.next=5,null===n||void 0===n?void 0:n.json();case 5:return e.abrupt("return",e.sent);case 6:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Kc(e){return qc.apply(this,arguments)}function qc(){return(qc=Object(u.a)(Wc().mark((function e(t){var n;return Wc().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Vc.delete("com.axelor.studio.db.WsConnector",t);case 2:return n=e.sent,e.abrupt("return",null===n||void 0===n?void 0:n.json());case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Hc(e){return Uc.apply(this,arguments)}function Uc(){return(Uc=Object(u.a)(Wc().mark((function e(t){var n;return Wc().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Vc.delete("com.axelor.studio.db.WsAuthenticator",t);case 2:return n=e.sent,e.abrupt("return",null===n||void 0===n?void 0:n.json());case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Yc(){return Jc.apply(this,arguments)}function Jc(){return(Jc=Object(u.a)(Wc().mark((function e(){var t,n,r=arguments;return Wc().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=r.length>0&&void 0!==r[0]?r[0]:{},e.next=3,Vc.add("com.axelor.studio.db.WsAuthenticator",t);case 3:return n=e.sent,e.abrupt("return",n);case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Xc(){return Qc.apply(this,arguments)}function Qc(){return(Qc=Object(u.a)(Wc().mark((function e(){var t,n,r=arguments;return Wc().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=r.length>0&&void 0!==r[0]?r[0]:{},e.next=3,Vc.add("com.axelor.studio.db.WsConnector",t);case 3:return n=e.sent,e.abrupt("return",n);case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Zc(e){return es.apply(this,arguments)}function es(){return(es=Object(u.a)(Wc().mark((function e(t){var n;return Wc().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Vc.action(t);case 2:return n=e.sent,e.abrupt("return",n);case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function ts(e){return ns.apply(this,arguments)}function ns(){return(ns=Object(u.a)(Wc().mark((function e(t){var n;return Wc().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Vc.action(t);case 2:return n=e.sent,e.abrupt("return",n);case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function rs(e){return as.apply(this,arguments)}function as(){return(as=Object(u.a)(Wc().mark((function e(t){var n;return Wc().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Vc.fetchRecord("com.axelor.studio.db.WsAuthenticator",t);case 2:return n=e.sent,e.abrupt("return",n&&n.data&&n.data[0]);case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function is(e,t){return os.apply(this,arguments)}function os(){return(os=Object(u.a)(Wc().mark((function e(t,n){var r;return Wc().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Vc.fetchRecord("com.axelor.studio.db.WsRequest",t,n);case 2:return r=e.sent,e.abrupt("return",r&&r.data&&r.data[0]);case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function cs(e){return ss.apply(this,arguments)}function ss(){return(ss=Object(u.a)(Wc().mark((function e(t){var n,r,a,i;return Wc().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t){e.next=2;break}return e.abrupt("return",[]);case 2:if("metaModel"!==t.type){e.next=12;break}if(t.fullName){e.next=5;break}return e.abrupt("return",[]);case 5:return e.next=7,Vc.get("ws/meta/fields/".concat(t.fullName));case 7:return n=e.sent,r=ds(n),e.abrupt("return",r);case 12:if(t.name){e.next=14;break}return e.abrupt("return",[]);case 14:return e.next=16,Vc.get("ws/meta/fields/com.axelor.meta.db.MetaJsonRecord?jsonModel=".concat(t.name));case 16:return a=e.sent,i=ds(a),e.abrupt("return",i||[]);case 19:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function ls(){return(ls=Object(u.a)(Wc().mark((function e(t){var n;return Wc().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Vc.search(t,{});case 2:return n=e.sent,e.abrupt("return",n?n.data:[]);case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function us(){return ps.apply(this,arguments)}function ps(){return(ps=Object(u.a)(Wc().mark((function e(){var t,n,r,a,i,o,c,s,u,p=arguments;return Wc().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=p.length>0&&void 0!==p[0]?p[0]:{},n=p.length>1?p[1]:void 0,r=p.length>2?p[2]:void 0,e.t1=!n||"metaModel"===n,!e.t1){e.next=8;break}return e.next=7,gs(t,!0);case 7:e.t1=e.sent;case 8:if(e.t0=e.t1,e.t0){e.next=11;break}e.t0=[];case 11:if(a=e.t0,e.t3=!n||"metaJsonModel"===n,!e.t3){e.next=17;break}return e.next=16,js(t);case 16:e.t3=e.sent;case 17:if(e.t2=e.t3,e.t2){e.next=20;break}e.t2=[];case 20:for(i=e.t2,o=[],c=0;c<a.length;c++)o.push(Object(l.a)(Object(l.a)({},a[c]),{},{type:"metaModel"}));for(s=0;s<i.length;s++)o.push(Object(l.a)(Object(l.a)({},i[s]),{},{type:"metaJsonModel"}));if(r)for(u=0;u<r.length;u++)o.push(Object(l.a)(Object(l.a)({},r[u]),{},{type:"dmnModel"}));return e.abrupt("return",o||[]);case 26:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var ds=function(e){var t=e&&e.data,n=t&&t.fields,r=Object.values(t&&t.jsonFields||[{}]),a=[];return a=n||[],r&&r.forEach((function(e){var t=Object.values(e||{})||[];a=[].concat(Object(p.a)(a),Object(p.a)(t))})),a};function hs(e){return fs.apply(this,arguments)}function fs(){return(fs=Object(u.a)(Wc().mark((function e(t){var n,r,a,i,o,c,s=arguments;return Wc().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=s.length>1&&void 0!==s[1]?s[1]:[],r=s.length>2&&void 0!==s[2]?s[2]:"form",t&&t.name){e.next=4;break}return e.abrupt("return",[]);case 4:if(a=[{fieldName:"type",operator:"=",value:r}],"metaJsonModel"!==t.type){e.next=9;break}a.push({fieldName:"name",operator:"=",value:"custom-model-".concat(t.name,"-").concat(r)}),e.next=12;break;case 9:if(t.fullName){e.next=11;break}return e.abrupt("return");case 11:a.push({fieldName:"model",operator:"=",value:t.fullName});case 12:return e.next=14,Vc.search("com.axelor.meta.db.MetaView",{fields:["name","title"],data:{criteria:[].concat(a,Object(p.a)(n)),operator:"and"}});case 14:return i=e.sent,o=(i||{}).data,c=(void 0===o?[]:o).filter((function(e){return null!==e.name})),c=Gc.uniqBy(c||[],"name")||[],e.abrupt("return",c);case 19:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function ms(){return bs.apply(this,arguments)}function bs(){return(bs=Object(u.a)(Wc().mark((function e(){var t,n,r,a,i,o,c,s,l,u,d,h,f,m,b,v,y,g,x,j,w,O=arguments;return Wc().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=O.length>0&&void 0!==O[0]?O[0]:[],n=[],r=[],a=[],!(t.length>0)){e.next=51;break}i=0;case 6:if(!(i<t.length)){e.next=27;break}if(o=t[i],c=o.type,s=o.model,l=o.modelFullName,"fetchAPI"!==(u=Xs(s))){e.next=14;break}return e.next=12,hs({name:s,type:c,fullName:l});case 12:(d=e.sent)&&d[0]&&(u=d[0].name);case 14:if(!u){e.next=23;break}return"metaModel"===c&&r.push(l),e.next=18,Vc.view({data:{name:"metaModel"===c?u:"custom-model-".concat(s,"-form"),type:"form"},model:s});case 18:h=e.sent,(f=h&&h.data&&h.data.view)&&(m=Js(f,"button"),n=[].concat(Object(p.a)(n),Object(p.a)(m||[]))),e.next=24;break;case 23:"metaJsonModel"===c&&a.push(s);case 24:i++,e.next=6;break;case 27:if(!(r&&r.length>0)){e.next=38;break}b=0;case 29:if(!(b<r.length)){e.next=38;break}return e.next=32,Vc.search("com.axelor.meta.db.MetaJsonField",{data:{criteria:[{fieldName:"model",operator:"like",value:r[b]},{fieldName:"type",operator:"=",value:"button"}],operator:"and"}});case 32:v=e.sent,(y=v&&v.data)&&y.length>0&&(n=[].concat(Object(p.a)(n),Object(p.a)(y||[])));case 35:b++,e.next=29;break;case 38:if(!(a&&a.length>0)){e.next=50;break}g=0;case 40:if(!(g<a.length)){e.next=50;break}return e.next=43,Vc.get("ws/meta/fields/com.axelor.meta.db.MetaJsonRecord?jsonModel=".concat(a[g]));case 43:x=e.sent,j=ds(x),w=j.filter((function(e){return"button"===e.type})),n=[].concat(Object(p.a)(n),Object(p.a)(w||[]));case 47:g++,e.next=40;break;case 50:return e.abrupt("return",n);case 51:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function vs(e){return ys.apply(this,arguments)}function ys(){return(ys=Object(u.a)(Wc().mark((function e(t){var n,r,a;return Wc().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Vc.search("com.axelor.meta.db.MetaView",{data:{_domain:"self.type = :type and self.extension IS NULL and self.name in :names",_domainContext:{type:"form",names:t&&t.length>0?t:[""]}},fields:["name","title","model"]});case 2:return n=e.sent,r=(n||{}).data,a=void 0===r?[]:r,e.abrupt("return",a);case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function gs(){return xs.apply(this,arguments)}function xs(){return(xs=Object(u.a)(Wc().mark((function e(){var t,n,r,a,i,o,c,s,p,d=arguments;return Wc().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=d.length>0&&void 0!==d[0]?d[0]:{},n=d.length>1&&void 0!==d[1]&&d[1],e.next=4,Vc.search("com.axelor.meta.db.MetaModel",{data:t});case 4:if(!(r=e.sent)||-1!==r.status){e.next=7;break}return e.abrupt("return",[]);case 7:if(a=(r||{}).data,i=void 0===a?[]:a,n){e.next=10;break}return e.abrupt("return",i);case 10:return o=i.reduce(function(){var e=Object(u.a)(Wc().mark((function e(t,n){var r,a,i;return Wc().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.then();case 2:if(r=e.sent,"fetchAPI"!==(a=Xs(n.name))){e.next=11;break}return e.next=7,hs(Object(l.a)(Object(l.a)({},n),{},{type:"metaModel"}));case 7:(i=e.sent)&&i[0]&&r.push(i[0].name),e.next=12;break;case 11:a&&r.push(a);case 12:return e.abrupt("return",Promise.resolve(r));case 13:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),Promise.resolve([])),e.next=13,o;case 13:return c=e.sent,e.next=16,vs(c);case 16:return s=e.sent,p=i.reduce(function(){var e=Object(u.a)(Wc().mark((function e(t,n){var r,a,i,o;return Wc().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.then();case 2:if(r=e.sent,"fetchAPI"!==(a=Xs(n.name))){e.next=11;break}return e.next=7,hs(Object(l.a)(Object(l.a)({},n),{},{type:"metaModel"}));case 7:(i=e.sent)&&i[0]&&r.push(Object(l.a)(Object(l.a)({},n),{},{title:i[0].title})),e.next=12;break;case 11:a&&(o=s.find((function(e){return e.name===a})),r.push(Object(l.a)(Object(l.a)({},n),{},{title:o&&o.title})));case 12:return e.abrupt("return",Promise.resolve(r));case 13:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),Promise.resolve([])),e.abrupt("return",p);case 19:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function js(){return ws.apply(this,arguments)}function ws(){return(ws=Object(u.a)(Wc().mark((function e(){var t,n,r,a,i=arguments;return Wc().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=i.length>0&&void 0!==i[0]?i[0]:{},e.next=3,Vc.search("com.axelor.meta.db.MetaJsonModel",{data:t});case 3:if(!(n=e.sent)||-1!==n.status){e.next=6;break}return e.abrupt("return",[]);case 6:return r=(n||{}).data,a=void 0===r?[]:r,e.abrupt("return",a);case 8:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Os(){return Es.apply(this,arguments)}function Es(){return(Es=Object(u.a)(Wc().mark((function e(){var t,n,r,a,i=arguments;return Wc().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=i.length>0&&void 0!==i[0]?i[0]:{},e.next=3,gs(t);case 3:if(e.t0=e.sent,e.t0){e.next=6;break}e.t0=[];case 6:return n=e.t0,e.next=9,js(t);case 9:if(e.t1=e.sent,e.t1){e.next=12;break}e.t1=[];case 12:return r=e.t1,a=[].concat(Object(p.a)(n),Object(p.a)(r)),e.abrupt("return",a);case 15:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Ns(){return ks.apply(this,arguments)}function ks(){return(ks=Object(u.a)(Wc().mark((function e(){var t,n;return Wc().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t={fields:["name","id"]},e.next=3,Vc.search("com.axelor.studio.db.WsRequest",t);case 3:return n=e.sent,e.abrupt("return",n.data);case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Ss(){return _s.apply(this,arguments)}function _s(){return(_s=Object(u.a)(Wc().mark((function e(){var t,n;return Wc().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t={fields:["name","id"]},e.next=3,Vc.search("com.axelor.studio.db.WsConnector",t);case 3:return n=e.sent,e.abrupt("return",n.data);case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Ls(e,t){return Cs.apply(this,arguments)}function Cs(){return(Cs=Object(u.a)(Wc().mark((function e(t,n){var r;return Wc().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Vc.fetchRecord("com.axelor.studio.db.WsConnector",t,n);case 2:return r=e.sent,e.abrupt("return",r&&r.data&&r.data[0]);case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Ps(){return Ts.apply(this,arguments)}function Ts(){return(Ts=Object(u.a)(Wc().mark((function e(){var t,n,r=arguments;return Wc().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r.length>0&&void 0!==r[0]?r[0]:{},t={fields:["name","id"]},e.next=4,Vc.search("com.axelor.studio.db.WsAuthenticator",t);case 4:return n=e.sent,e.abrupt("return",n.data);case 6:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Ms(e){return As.apply(this,arguments)}function As(){return(As=Object(u.a)(Wc().mark((function e(t){var n,r,a;return Wc().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=[],null===t||void 0===t||t.forEach((function(e){n.push(e.id)})),r={fields:["wsKey","wsValue","isList","version","id","subWsKeyValueList"],sortBy:null,data:{_domain:"self.id in (:_field_ids)",_domainContext:{_field_ids:n},_archived:!0},limit:-1,translate:!0},e.next=5,Vc.search("com.axelor.studio.db.WsKeyValue",r);case 5:return a=e.sent,e.abrupt("return",a.data);case 7:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Rs(e){return Bs.apply(this,arguments)}function Bs(){return(Bs=Object(u.a)(Wc().mark((function e(t){var n;return Wc().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Vc.get("ws/rest/com.axelor.apps.transformation.db.Library");case 2:return n=e.sent,e.abrupt("return",n&&n.data);case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Ds(){return(Ds=Object(u.a)(Wc().mark((function e(t){var n,r;return Wc().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n={data:{criteria:[{operator:"and",criteria:[{fieldName:"library.id",operator:"=",value:t}]}]},fields:["name","description","multiArg","multiArgType","groovyTemplate","parameters"]},e.next=3,Vc.search("com.axelor.apps.transformation.db.Transformation",n);case 3:return r=e.sent,e.abrupt("return",r&&r.data&&r.data);case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Fs(e){return Is.apply(this,arguments)}function Is(){return(Is=Object(u.a)(Wc().mark((function e(t){var n,r;return Wc().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n={data:{criteria:[{operator:"and",criteria:[{fieldName:"transformation.id",operator:"=",value:t}]}]},fields:["name","type","description","isOptional"]},e.next=3,Vc.search("com.axelor.apps.transformation.db.Parameter",n);case 3:return r=e.sent,e.abrupt("return",r&&r.data&&r.data);case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Vs(e){return Gs.apply(this,arguments)}function Gs(){return(Gs=Object(u.a)(Wc().mark((function e(t){var n;return Wc().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t){e.next=2;break}return e.abrupt("return",[]);case 2:return e.next=4,Vc.action("com.axelor.apps.tool.web.QueryBuilderController:getCommonFields",{model:"com.axelor.meta.db.MetaModel",data:{context:{package:t},model:"com.axelor.meta.db.MetaModel"}});case 4:return n=e.sent,e.abrupt("return",n&&n.data);case 6:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Ws(){Ws=function(){return e};var e={},t=Object.prototype,n=t.hasOwnProperty,r=Object.defineProperty||function(e,t,n){e[t]=n.value},a="function"==typeof Symbol?Symbol:{},i=a.iterator||"@@iterator",o=a.asyncIterator||"@@asyncIterator",c=a.toStringTag||"@@toStringTag";function s(e,t,n){return Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{s({},"")}catch(_){s=function(e,t,n){return e[t]=n}}function l(e,t,n,a){var i=t&&t.prototype instanceof d?t:d,o=Object.create(i.prototype),c=new N(a||[]);return r(o,"_invoke",{value:j(e,n,c)}),o}function u(e,t,n){try{return{type:"normal",arg:e.call(t,n)}}catch(_){return{type:"throw",arg:_}}}e.wrap=l;var p={};function d(){}function h(){}function f(){}var m={};s(m,i,(function(){return this}));var b=Object.getPrototypeOf,v=b&&b(b(k([])));v&&v!==t&&n.call(v,i)&&(m=v);var y=f.prototype=d.prototype=Object.create(m);function g(e){["next","throw","return"].forEach((function(t){s(e,t,(function(e){return this._invoke(t,e)}))}))}function x(e,t){function a(r,i,o,c){var s=u(e[r],e,i);if("throw"!==s.type){var l=s.arg,p=l.value;return p&&"object"==typeof p&&n.call(p,"__await")?t.resolve(p.__await).then((function(e){a("next",e,o,c)}),(function(e){a("throw",e,o,c)})):t.resolve(p).then((function(e){l.value=e,o(l)}),(function(e){return a("throw",e,o,c)}))}c(s.arg)}var i;r(this,"_invoke",{value:function(e,n){function r(){return new t((function(t,r){a(e,n,t,r)}))}return i=i?i.then(r,r):r()}})}function j(e,t,n){var r="suspendedStart";return function(a,i){if("executing"===r)throw new Error("Generator is already running");if("completed"===r){if("throw"===a)throw i;return S()}for(n.method=a,n.arg=i;;){var o=n.delegate;if(o){var c=w(o,n);if(c){if(c===p)continue;return c}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if("suspendedStart"===r)throw r="completed",n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);r="executing";var s=u(e,t,n);if("normal"===s.type){if(r=n.done?"completed":"suspendedYield",s.arg===p)continue;return{value:s.arg,done:n.done}}"throw"===s.type&&(r="completed",n.method="throw",n.arg=s.arg)}}}function w(e,t){var n=e.iterator[t.method];if(void 0===n){if(t.delegate=null,"throw"===t.method){if(e.iterator.return&&(t.method="return",t.arg=void 0,w(e,t),"throw"===t.method))return p;t.method="throw",t.arg=new TypeError("The iterator does not provide a 'throw' method")}return p}var r=u(n,e.iterator,t.arg);if("throw"===r.type)return t.method="throw",t.arg=r.arg,t.delegate=null,p;var a=r.arg;return a?a.done?(t[e.resultName]=a.value,t.next=e.nextLoc,"return"!==t.method&&(t.method="next",t.arg=void 0),t.delegate=null,p):a:(t.method="throw",t.arg=new TypeError("iterator result is not an object"),t.delegate=null,p)}function O(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function E(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function N(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(O,this),this.reset(!0)}function k(e){if(e){var t=e[i];if(t)return t.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var r=-1,a=function t(){for(;++r<e.length;)if(n.call(e,r))return t.value=e[r],t.done=!1,t;return t.value=void 0,t.done=!0,t};return a.next=a}}return{next:S}}function S(){return{value:void 0,done:!0}}return h.prototype=f,r(y,"constructor",{value:f,configurable:!0}),r(f,"constructor",{value:h,configurable:!0}),h.displayName=s(f,c,"GeneratorFunction"),e.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===h||"GeneratorFunction"===(t.displayName||t.name))},e.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,f):(e.__proto__=f,s(e,c,"GeneratorFunction")),e.prototype=Object.create(y),e},e.awrap=function(e){return{__await:e}},g(x.prototype),s(x.prototype,o,(function(){return this})),e.AsyncIterator=x,e.async=function(t,n,r,a,i){void 0===i&&(i=Promise);var o=new x(l(t,n,r,a),i);return e.isGeneratorFunction(n)?o:o.next().then((function(e){return e.done?e.value:o.next()}))},g(y),s(y,c,"Generator"),s(y,i,(function(){return this})),s(y,"toString",(function(){return"[object Generator]"})),e.keys=function(e){var t=Object(e),n=[];for(var r in t)n.push(r);return n.reverse(),function e(){for(;n.length;){var r=n.pop();if(r in t)return e.value=r,e.done=!1,e}return e.done=!0,e}},e.values=k,N.prototype={constructor:N,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(E),!e)for(var t in this)"t"===t.charAt(0)&&n.call(this,t)&&!isNaN(+t.slice(1))&&(this[t]=void 0)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var t=this;function r(n,r){return o.type="throw",o.arg=e,t.next=n,r&&(t.method="next",t.arg=void 0),!!r}for(var a=this.tryEntries.length-1;a>=0;--a){var i=this.tryEntries[a],o=i.completion;if("root"===i.tryLoc)return r("end");if(i.tryLoc<=this.prev){var c=n.call(i,"catchLoc"),s=n.call(i,"finallyLoc");if(c&&s){if(this.prev<i.catchLoc)return r(i.catchLoc,!0);if(this.prev<i.finallyLoc)return r(i.finallyLoc)}else if(c){if(this.prev<i.catchLoc)return r(i.catchLoc,!0)}else{if(!s)throw new Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return r(i.finallyLoc)}}}},abrupt:function(e,t){for(var r=this.tryEntries.length-1;r>=0;--r){var a=this.tryEntries[r];if(a.tryLoc<=this.prev&&n.call(a,"finallyLoc")&&this.prev<a.finallyLoc){var i=a;break}}i&&("break"===e||"continue"===e)&&i.tryLoc<=t&&t<=i.finallyLoc&&(i=null);var o=i?i.completion:{};return o.type=e,o.arg=t,i?(this.method="next",this.next=i.finallyLoc,p):this.complete(o)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),p},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.finallyLoc===e)return this.complete(n.completion,n.afterLoc),E(n),p}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.tryLoc===e){var r=n.completion;if("throw"===r.type){var a=r.arg;E(n)}return a}}throw new Error("illegal catch attempt")},delegateYield:function(e,t,n){return this.delegate={iterator:k(e),resultName:t,nextLoc:n},"next"===this.method&&(this.arg=void 0),p}},e}function $s(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1?arguments[1]:void 0;return e.sort((function(e,n){var r=e[t],a=n[t];return r<a?-1:r>a?1:0}))}function zs(e,t,n){var r,a,i,o,c=e&&(null===(r=e[0])||void 0===r||null===(a=r.operation)||void 0===a?void 0:a.parameters),s=e&&(null===(i=e[0])||void 0===i||null===(o=i.operation)||void 0===o?void 0:o.groovyTemplate);if(s){var l,u=s;return u=null===(l=u)||void 0===l?void 0:l.replace("#{target}",(null===t||void 0===t?void 0:t.name)&&n.name?"".concat(null===t||void 0===t?void 0:t.name.toLowerCase(),".").concat(n.name):'"'.concat(n,'"')),null===c||void 0===c||c.forEach((function(t){var n,r,a,i,o,c;(null===(n=e[0])||void 0===n||null===(r=n.operation)||void 0===r?void 0:r.multiArg)&&!t.name?u="String"===t.type?null===(i=u)||void 0===i?void 0:i.replace("#{_multiArg_}",'"'.concat(null===t||void 0===t?void 0:t.value,'"')):null===(a=u)||void 0===a?void 0:a.replace("#{_multiArg_",null===t||void 0===t?void 0:t.value):u="String"===t.type?null===(c=u)||void 0===c?void 0:c.replaceAll("#{".concat(null===t||void 0===t?void 0:t.name,"}"),'"'.concat(null===t||void 0===t?void 0:t.value,'"')):null===(o=u)||void 0===o?void 0:o.replaceAll("#{".concat(null===t||void 0===t?void 0:t.name,"}"),null===t||void 0===t?void 0:t.value)})),null===e||void 0===e||e.forEach((function(e,t){if(0!==t){var n,r,a=e.operation.groovyTemplate;null===e||void 0===e||null===(n=e.operation)||void 0===n||null===(r=n.parameters)||void 0===r||r.forEach((function(e){var t,n;"String"===e.type?a=null===(n=a)||void 0===n?void 0:n.replaceAll("#{".concat(null===e||void 0===e?void 0:e.name,"}"),'"'.concat(null===e||void 0===e?void 0:e.value,'"')):a=null===(t=a)||void 0===t?void 0:t.replaceAll("#{".concat(null===e||void 0===e?void 0:e.name,"}"),null===e||void 0===e?void 0:e.value)})),u=a.replace("#{target}",u)}})),"${".concat(u,"}")}return(null===t||void 0===t?void 0:t.name)&&n.name?"${".concat(null===t||void 0===t?void 0:t.name.toLowerCase(),".").concat(n.name,"}"):n}function Ks(e){return qs.apply(this,arguments)}function qs(){return(qs=Object(u.a)(Ws().mark((function e(t){var n,r,a,i,o,c,s,u;return Ws().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n=[],r=Object(Rc.a)(t),e.prev=2,r.s();case 4:if((a=r.n()).done){e.next=35;break}if(!0!==(null===(i=a.value)||void 0===i?void 0:i.isList)){e.next=21;break}return e.next=9,Ms(i.subWsKeyValueList);case 9:if(!(o=e.sent)){e.next=16;break}return e.next=13,Ks(o);case 13:e.t0=e.sent,e.next=17;break;case 16:e.t0=[];case 17:c=e.t0,n.push(Object(l.a)(Object(l.a)({},i),{},{wsValue:[{id:1,model:"",payloads:c}]})),e.next=33;break;case 21:if(i.isList||0===i.subWsKeyValueList.length){e.next=32;break}return e.next=24,Ms(i.subWsKeyValueList);case 24:return s=e.sent,e.next=27,Ks(s);case 27:u=e.sent,i.payloads=u,n=[].concat(Object(p.a)(n),[i]),e.next=33;break;case 32:n.push(i);case 33:e.next=4;break;case 35:e.next=40;break;case 37:e.prev=37,e.t1=e.catch(2),r.e(e.t1);case 40:return e.prev=40,r.f(),e.finish(40);case 43:return e.abrupt("return",n);case 44:case"end":return e.stop()}}),e,null,[[2,37,40,43]])})))).apply(this,arguments)}function Hs(e){return"bpmQuery"===e}function Us(e,t){var n;if(null===e||void 0===e||null===(n=e.wsValue)||void 0===n?void 0:n.name)return zs(e.transformations,t,null===e||void 0===e?void 0:e.wsValue);if(e.wsValue&&!e.isList)return zs(e.transformations,t,null===e||void 0===e?void 0:e.wsValue);if(e.isList)return function(e){var t=[];return e.forEach((function(e){e.payloads.forEach((function(n){(null===n||void 0===n?void 0:n.wsKey)||(null===n||void 0===n?void 0:n.payloads)?(null===n||void 0===n?void 0:n.wsKey)?t.push(Object(Bc.a)({},n.wsKey,Us(n,e))):t.push(Us(n,e)):t=[].concat(Object(p.a)(t),[n.wsValue])}))})),t}(e.wsValue);var r,a={};return null===(r=e.payloads)||void 0===r||r.forEach((function(t){a[t.wsKey]=Us(t,e.model)})),a}function Ys(e,t){var n=i.a.useRef(null),r=function(){return n.current&&clearTimeout(n.current)},a=function(e){return n.current=setTimeout(e,t)};return i.a.useEffect((function(){return function(){return r()}}),[]),function(){for(var t=arguments.length,n=new Array(t),i=0;i<t;i++)n[i]=arguments[i];r(),a((function(){return e.apply(void 0,n)}))}}function Js(e,t){return function e(n){var r=n.items,a=void 0===r?[]:r,i=n.jsonFields,o=void 0===i?[]:i;return[].concat(Object(p.a)(a),Object(p.a)(o)).reduce((function(t,n){return[].concat(Object(p.a)(t),Object(p.a)(e(n)))}),n.type===t?[n]:[])}(e)}function Xs(e){if(e){var t=e.match(/[A-Z][a-z]+/g);if(t){if(t.join("").trim().length!==e.length)return"fetchAPI";var n=t&&t.join("-");return"".concat(n.toLowerCase(),"-form")}}}function Qs(e){return window._t&&"string"===typeof e?window._t(e):e}var Zs=n(21),el=n.n(Zs),tl=n(354),nl=n(492),rl=Object(nl.a)({desciption:{marginTop:5,height:"200px"},error:{color:"#CC3333"},input:{border:"1px solid black",outline:0,width:"100%",height:"100%"}});function al(e){var t=e.type,n=e.element,i=rl(),o=Object(a.useState)(""),c=Object(d.a)(o,2),s=c[0],l=c[1];return Object(a.useEffect)((function(){l(n.businessObject.description)}),[n.businessObject.description]),Object(r.jsx)("div",{className:el()(i.desciption,t&&i.error),children:Object(r.jsx)("textarea",{value:s,className:i.input,onChange:function(e){return l(e.target.value)},onBlur:function(e){return t=e.target.value,void(n.businessObject.description=t);var t}})})}var il=Object(nl.a)({root:{display:"flex",flexDirection:"column",marginTop:5},label:{fontWeight:"bolder",display:"inline-block",verticalAlign:"middle",color:"#666",marginBottom:3},textarea:{fontFamily:"Helvetica Neue, Helvetica, Arial, sans-serif",resize:"vertical",borderColor:"#ccc","&:focus":{boxShadow:"rgba(82, 180, 21, 0.2) 0px 0px 1px 2px",outline:"none",borderColor:"rgb(82, 180, 21)"}},error:{borderColor:"#cc3333 !important",background:"#f0c2c2","&:focus":{boxShadow:"rgba(204,58,51, 0.2) 0px 0px 1px 2px !important",outline:"none",borderColor:"#cc3333 !important"}},readOnly:{borderColor:"#ccc !important",background:"#E3E3E3",color:"#7E7E7E","&:focus":{boxShadow:"none !important",outline:"none",borderColor:"#ccc !important"}}});function ol(e){var t=e.entry,n=e.element,o=e.rows,c=void 0===o?1:o,s=e.bpmnModeler,l=e.className,u=e.readOnly,p=il(),h=t||{},f=h.label,m=h.description,b=h.name,v=h.validate,y=h.get,g=h.set,x=Object(a.useState)(null),j=Object(d.a)(x,2),w=j[0],O=j[1],E=Object(a.useState)(null),N=Object(d.a)(E,2),k=N[0],S=N[1],_=Object(a.useState)(!1),L=Object(d.a)(_,2),C=L[0],P=L[1],T=i.a.useCallback((function(){var e;return y?y(n)[b]:null===(e=n.businessObject[b])||void 0===e?void 0:e.expression}),[n,y,b]),M=function(e){!function(e){g?(g(n,Object(Bc.a)({},b,e)),O(e)):(s.get("modeling").updateProperties(n,Object(Bc.a)({},b,e)),n.businessObject[b].expression=e,n.businessObject[b].value=null)}(e),O(e);var t=A();P(t)},A=i.a.useCallback((function(){if(!v||(null===w||void 0===w)&&"id"===b)return S(null),!1;var e=v(n,Object(Bc.a)({},b,""===w?void 0:w));return e&&e[b]?(S(e[b]),!0):(S(null),!1)}),[v,n,w,b]);return Object(a.useEffect)((function(){var e=A();P(e)}),[A]),Object(a.useEffect)((function(){if(n){var e=T(n);O(e)}}),[n,T,t]),Object(r.jsxs)("div",{className:el()(p.root,l),children:[Object(r.jsx)("label",{className:p.label,children:f}),Object(r.jsx)(tl.a,{id:"camunda_".concat(b,"_").concat(Date()),value:w||"",className:el()(p.textarea,C&&p.error,u&&p.readOnly),rowsMin:c,onBlur:function(e){u||M(e.target.value)},onChange:function(e){O(e.target.value)},readOnly:"function"===typeof u?u():u}),k&&Object(r.jsx)(al,{desciption:k,type:"error"}),m&&Object(r.jsx)(al,{desciption:m})]})}var cl=n(570),sl=Object(nl.a)({root:{display:"flex",flexDirection:"column",marginTop:5,width:"100%"},error:{borderColor:"#cc3333 !important",background:"#f0c2c2","&:focus":{boxShadow:"rgba(204,58,51, 0.2) 0px 0px 1px 2px !important",outline:"none",borderColor:"#cc3333 !important"}},label:{fontWeight:"bolder",display:"inline-block",verticalAlign:"middle",color:"#666",marginBottom:3},fieldWrapper:{position:"relative"},input:{width:"calc(100% - 35px)",padding:"3px 28px 3px 6px ",border:"1px solid #ccc","&:focus":{boxShadow:"rgba(82, 180, 21, 0.2) 0px 0px 1px 2px",outline:"none",borderColor:"rgb(82, 180, 21)"}},clearButton:{background:"transparent",border:"none",top:0,right:0,position:"absolute",height:23,width:24,overflow:"hidden",cursor:"pointer",display:"flex",alignItems:"center"},clear:{fontSize:"1rem"},readOnly:{borderColor:"#ccc !important",background:"#E3E3E3","&:focus":{boxShadow:"none !important",outline:"none",borderColor:"#ccc !important"}}});function ll(e){var t=e.entry,n=e.element,o=e.canRemove,c=void 0!==o&&o,s=e.rootClass,l=e.labelClass,u=e.type,p=void 0===u?"text":u,h=e.isLabel,f=void 0===h||h,m=e.readOnly,b=void 0!==m&&m,v=e.bpmnModeler,y=sl(),g=t||{},x=g.label,j=g.description,w=g.name,O=g.modelProperty,E=g.set,N=g.get,k=Object(a.useState)(null),S=Object(d.a)(k,2),_=S[0],L=S[1],C=i.a.useCallback((function(){return n.businessObject[w]}),[n,w]),P=function(e){E?E(n,Object(Bc.a)({},O,e)):function(e){v&&(v.get("modeling").updateProperties(n,Object(Bc.a)({},w,e)),n.businessObject[w]=e)}(e)};return Object(a.useEffect)((function(){if(n){var e;if(N){var t=N();e=t&&t[O]}else e=C();L(e)}}),[n,N,C,O]),Object(r.jsxs)("div",{className:el()(y.root,s),children:[f&&Object(r.jsx)("label",{className:el()(y.label,l),children:x}),Object(r.jsxs)("div",{className:y.fieldWrapper,children:[Object(r.jsx)("input",{id:"camunda-".concat(w,"_").concat(Date()),type:p,readOnly:b,name:w,value:_||"",onChange:function(e){L(e.target.value)},className:el()(y.input,b&&y.readOnly),onBlur:function(e){return P(e.target.value)}}),c&&_&&Object(r.jsx)("button",{onClick:function(){L(""),P(void 0)},className:y.clearButton,children:Object(r.jsx)(cl.a,{className:y.clear})})]}),j&&Object(r.jsx)(al,{desciption:j})]})}var ul=Object(nl.a)({root:{display:"flex",flexDirection:"column",marginTop:5},label:{display:"inline-block",verticalAlign:"middle",fontWeight:"bolder",color:"#666",marginBottom:3},select:{pointerEvents:"none"}});function pl(e){var t=e.entry,n=e.element,o=e.onChange,c=ul(),s=t||{},l=s.id,u=s.name,p=s.emptyParameter,h=s.selectOptions,f=s.canBeDisabled,m=s.canBeHidden,b=s.label,v=s.modelProperty,y=s.description,g=s.set,x=s.get,j=Object(a.useState)([]),w=Object(d.a)(j,2),O=w[0],E=w[1],N=Object(a.useState)(null),k=Object(d.a)(N,2),S=k[0],_=k[1],L=function(e){n.businessObject[u]=e},C=i.a.useCallback((function(){return n.businessObject[u]}),[n,u]);return Object(a.useEffect)((function(){if(n){var e=x&&x(n),t=C?C(n):e&&e[v];_(t)}}),[n,v,x,C]),Object(a.useEffect)((function(){if("object"===typeof h)E(h);else{var e=h(n);e&&E(e)}}),[h,n]),Object(r.jsxs)("div",{className:c.root,children:[Object(r.jsx)("label",{htmlFor:"camunda-".concat(l),className:c.label,children:b}),Object(r.jsxs)("select",{id:"camunda-".concat(l,"-select"),name:v,"data-disable":f?"isDisabled":"","data-show":m?"isHidden":"",value:S||"",onChange:function(e){_(e.target.value),(g||L)&&(g?g(n,Object(Bc.a)({},v,e.target.value)):(L(e.target.value),o()))},className:f?c.select:"",children:[O&&O.map((function(e,t){return Object(r.jsxs)("option",{value:e.value,children:[e.name?e.name:""," "]},t)})),p&&Object(r.jsx)("option",{value:""})]}),y&&Object(r.jsx)(al,{desciption:y})]})}var dl=Object(nl.a)({root:{display:"flex",alignItems:"center",marginTop:5},label:{fontWeight:"bolder",color:"#666"},checkbox:{margin:"3px 3px 3px 0px"}});function hl(e){var t=e.entry,n=e.element,o=e.className,c=e.onChange,s=dl(),l=t||{},u=l.id,p=l.name,h=l.label,f=l.modelProperty,m=l.get,b=l.set,v=l.defaultValue,y=void 0!==v&&v,g=Object(a.useState)(y),x=Object(d.a)(g,2),j=x[0],w=x[1],O=i.a.useCallback((function(e){var t;e&&"true"!==(null===n||void 0===n||null===(t=n.businessObject)||void 0===t?void 0:t.auth)&&(n.businessObject[p]=e.toString(),c())}),[n.businessObject,p,c]),E=i.a.useCallback((function(){return!!(e=n.businessObject[p]||n.businessObject.$attrs[p])&&!!JSON.parse(String(e).toLowerCase());var e}),[n,p]);return Object(a.useEffect)((function(){if(n){var e;if(m){var t=m(n);e=t&&t[f]}else e=E(),O(e);w(e)}}),[n,f,m,E,O]),Object(r.jsxs)("div",{className:el()(s.root,o),children:[Object(r.jsx)("input",{id:"camunda-".concat(u),type:"checkbox",name:f,checked:j,onChange:function(e){w((function(e){return!e})),b?b(n,Object(Bc.a)({},f,e.target.checked)):O(e.target.checked)},className:s.checkbox}),h&&Object(r.jsx)("label",{htmlFor:"camunda-".concat(u),className:s.label,children:h})]})}var fl=n(598),ml=n(251),bl=n(432);var vl=Object(Tc.a)((function(e){return{autoComplete:{"& > div > label":{fontSize:14},"& > div > div":{paddingRight:"15px !important"},background:"white",border:"1px solid #ccc",padding:"0px 5px"},input:{fontSize:14,color:e.palette.common.black,padding:"3px 0 3px !important"},label:{fontSize:14},endAdornment:{top:0},circularProgress:{color:"#0A73FA"},error:{borderColor:"#cc3333 !important",background:"#f0c2c2","&:focus":{boxShadow:"rgba(204,58,51, 0.2) 0px 0px 1px 2px !important",outline:"none",borderColor:"#cc3333 !important"}},errorDescription:{marginTop:5,color:"#CC3333"},labelTitle:{fontWeight:"bolder",display:"inline-block",verticalAlign:"middle",color:"#676767",marginBottom:3},container:{marginTop:10,width:"92%"}}}));function yl(e){var t=e.optionLabel,n=void 0===t?"name":t,o=e.multiple,c=void 0!==o&&o,s=e.index,u=e.value,h=e.update,f=e.criteriaIds,m=e.type,b=e.options,v=e.entry,y=e.isLabel,g=void 0!==y&&y,x=e.error,j=void 0!==x&&x,w=e.className,O=e.placeholder,E=e.validate,N=e.bpmnModeler,k=e.element,S=e.onChange,_=Object(a.useState)(!1),L=Object(d.a)(_,2),C=L[0],P=L[1],T=Object(a.useState)([]),M=Object(d.a)(T,2),A=M[0],R=M[1],B=Object(a.useState)(null),D=Object(d.a)(B,2),F=D[0],I=D[1],V=Object(a.useState)(!1),G=Object(d.a)(V,2),W=G[0],$=G[1],z=Object(a.useState)(null),K=Object(d.a)(z,2),q=K[0],H=K[1],U=Object(a.useState)(!1),Y=Object(d.a)(U,2),J=Y[0],X=Y[1],Q=vl(),Z=v.name,ee=v.label,te=v.fetchMethod,ne=function(e,t){N&&(N.get("modeling").updateProperties(k,Object(Bc.a)({},Z,e)),k.businessObject[Z]=t,S&&S(t))},re=i.a.useCallback((function(){return k.businessObject[Z]}),[k,Z]),ae=Object(a.useCallback)((function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";$(!0);var t=[];if(e&&t.push({fieldName:n,operator:"like",value:e}),te&&C)return te(t).then((function(e){e&&(R(e||[]),$(!1))}));$(!1)}),[n,te,C]);!function(e,t){var n=Object(a.useRef)(!1);Object(a.useEffect)((function(){if(n.current){var r=setTimeout((function(){return e()}),t);return function(){return clearTimeout(r)}}n.current=!0}),[e,t])}(i.a.useCallback((function(){F&&ae(F,f)}),[ae,F,f]),500);var ie=i.a.useCallback((function(){if(!E||(null===u||void 0===u)&&"id"===Z)return H(null),!1;var e=E(Object(Bc.a)({},Z,""===u?void 0:u));return e&&e[Z]?(H(e[Z]),!0):(H(null),!1)}),[E,u,Z]);return Object(a.useEffect)((function(){var e=ie();X(e)}),[ie]),Object(a.useEffect)((function(){(!C||b&&b.length<1)&&R([])}),[C,b]),Object(a.useEffect)((function(){C&&(b&&b.length>0?R(Object(p.a)(b)):ae(null,f))}),[ae,C,f,b]),Object(a.useEffect)((function(){b&&($(!0),R(b),$(!1))}),[b]),Object(r.jsxs)("div",{className:Q.container,children:[Object(r.jsx)("label",{className:Q.labelTitle,children:ee}),Object(r.jsx)(fl.a,{classes:{inputFocused:Q.input,clearIndicator:Q.input,popupIndicator:Q.input,endAdornment:Q.endAdornment},size:"small",open:C,onOpen:function(e){e&&e.stopPropagation(),P(!0)},onClose:function(e){e&&e.stopPropagation(),P(!1)},onClick:function(e){e&&e.stopPropagation(),P(!0)},loading:W,defaultValue:function(){return re()},clearOnEscape:!0,autoComplete:!0,className:el()(Q.autoComplete,w,J&&Q.error),options:A,multiple:c,value:k.businessObject[Z],getOptionSelected:function(e,t){if(t){var r;return e[r=e[n]?n:e.title?"title":"name"]===(t.id?t[r]:t)}},onChange:function(e,t){var r=t;"multiple"===m&&(r=t&&t.filter((function(e,t,r){return t===r.findIndex((function(t){return t[n]===e[n]}))}))),h?h(r,t&&t[n]):ne(t&&t[n],t)},name:Z,onInputChange:function(e,t){return I(t)},renderInput:function(e){return Object(r.jsx)(ml.a,Object(l.a)(Object(l.a)({error:j,helperText:j?"Required":"",className:J?Q.error:"",fullWidth:!0},e),{},{InputProps:Object(l.a)(Object(l.a)({},e.InputProps||{}),{},{endAdornment:Object(r.jsxs)(i.a.Fragment,{children:[W?Object(r.jsx)(bl.a,{className:Q.circularProgress,size:15}):null,e.InputProps.endAdornment]}),onClick:function(e){return e&&e.stopPropagation()},disableUnderline:!0}),inputProps:Object(l.a)(Object(l.a)({},e.inputProps||{}),{},{onClick:function(t){t&&t.stopPropagation(),e.inputProps&&e.inputProps.onClick&&e.inputProps.onClick(t)}}),placeholder:O||ee||"",InputLabelProps:{className:Q&&Q.label},label:g?ee:void 0}))},getOptionLabel:function(e){return e[n]?e[n]:e.title?e.title:"object"===typeof e?"":e}},s),q&&Object(r.jsx)("div",{className:Q.errorDescription,children:q})]})}var gl=n(42),xl=n(136),jl=n.n(xl),wl=["name","value","onChange","options","optionLabelKey","optionValueKey","isMulti","title","fetchAPI","inline","InputProps","error","filterSelectedOptions","disableCloseOnSelect","readOnly","concatValue","isProcessContext","inputRootClass"];function Ol(){Ol=function(){return e};var e={},t=Object.prototype,n=t.hasOwnProperty,r=Object.defineProperty||function(e,t,n){e[t]=n.value},a="function"==typeof Symbol?Symbol:{},i=a.iterator||"@@iterator",o=a.asyncIterator||"@@asyncIterator",c=a.toStringTag||"@@toStringTag";function s(e,t,n){return Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{s({},"")}catch(_){s=function(e,t,n){return e[t]=n}}function l(e,t,n,a){var i=t&&t.prototype instanceof d?t:d,o=Object.create(i.prototype),c=new N(a||[]);return r(o,"_invoke",{value:j(e,n,c)}),o}function u(e,t,n){try{return{type:"normal",arg:e.call(t,n)}}catch(_){return{type:"throw",arg:_}}}e.wrap=l;var p={};function d(){}function h(){}function f(){}var m={};s(m,i,(function(){return this}));var b=Object.getPrototypeOf,v=b&&b(b(k([])));v&&v!==t&&n.call(v,i)&&(m=v);var y=f.prototype=d.prototype=Object.create(m);function g(e){["next","throw","return"].forEach((function(t){s(e,t,(function(e){return this._invoke(t,e)}))}))}function x(e,t){function a(r,i,o,c){var s=u(e[r],e,i);if("throw"!==s.type){var l=s.arg,p=l.value;return p&&"object"==typeof p&&n.call(p,"__await")?t.resolve(p.__await).then((function(e){a("next",e,o,c)}),(function(e){a("throw",e,o,c)})):t.resolve(p).then((function(e){l.value=e,o(l)}),(function(e){return a("throw",e,o,c)}))}c(s.arg)}var i;r(this,"_invoke",{value:function(e,n){function r(){return new t((function(t,r){a(e,n,t,r)}))}return i=i?i.then(r,r):r()}})}function j(e,t,n){var r="suspendedStart";return function(a,i){if("executing"===r)throw new Error("Generator is already running");if("completed"===r){if("throw"===a)throw i;return S()}for(n.method=a,n.arg=i;;){var o=n.delegate;if(o){var c=w(o,n);if(c){if(c===p)continue;return c}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if("suspendedStart"===r)throw r="completed",n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);r="executing";var s=u(e,t,n);if("normal"===s.type){if(r=n.done?"completed":"suspendedYield",s.arg===p)continue;return{value:s.arg,done:n.done}}"throw"===s.type&&(r="completed",n.method="throw",n.arg=s.arg)}}}function w(e,t){var n=e.iterator[t.method];if(void 0===n){if(t.delegate=null,"throw"===t.method){if(e.iterator.return&&(t.method="return",t.arg=void 0,w(e,t),"throw"===t.method))return p;t.method="throw",t.arg=new TypeError("The iterator does not provide a 'throw' method")}return p}var r=u(n,e.iterator,t.arg);if("throw"===r.type)return t.method="throw",t.arg=r.arg,t.delegate=null,p;var a=r.arg;return a?a.done?(t[e.resultName]=a.value,t.next=e.nextLoc,"return"!==t.method&&(t.method="next",t.arg=void 0),t.delegate=null,p):a:(t.method="throw",t.arg=new TypeError("iterator result is not an object"),t.delegate=null,p)}function O(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function E(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function N(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(O,this),this.reset(!0)}function k(e){if(e){var t=e[i];if(t)return t.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var r=-1,a=function t(){for(;++r<e.length;)if(n.call(e,r))return t.value=e[r],t.done=!1,t;return t.value=void 0,t.done=!0,t};return a.next=a}}return{next:S}}function S(){return{value:void 0,done:!0}}return h.prototype=f,r(y,"constructor",{value:f,configurable:!0}),r(f,"constructor",{value:h,configurable:!0}),h.displayName=s(f,c,"GeneratorFunction"),e.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===h||"GeneratorFunction"===(t.displayName||t.name))},e.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,f):(e.__proto__=f,s(e,c,"GeneratorFunction")),e.prototype=Object.create(y),e},e.awrap=function(e){return{__await:e}},g(x.prototype),s(x.prototype,o,(function(){return this})),e.AsyncIterator=x,e.async=function(t,n,r,a,i){void 0===i&&(i=Promise);var o=new x(l(t,n,r,a),i);return e.isGeneratorFunction(n)?o:o.next().then((function(e){return e.done?e.value:o.next()}))},g(y),s(y,c,"Generator"),s(y,i,(function(){return this})),s(y,"toString",(function(){return"[object Generator]"})),e.keys=function(e){var t=Object(e),n=[];for(var r in t)n.push(r);return n.reverse(),function e(){for(;n.length;){var r=n.pop();if(r in t)return e.value=r,e.done=!1,e}return e.done=!0,e}},e.values=k,N.prototype={constructor:N,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(E),!e)for(var t in this)"t"===t.charAt(0)&&n.call(this,t)&&!isNaN(+t.slice(1))&&(this[t]=void 0)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var t=this;function r(n,r){return o.type="throw",o.arg=e,t.next=n,r&&(t.method="next",t.arg=void 0),!!r}for(var a=this.tryEntries.length-1;a>=0;--a){var i=this.tryEntries[a],o=i.completion;if("root"===i.tryLoc)return r("end");if(i.tryLoc<=this.prev){var c=n.call(i,"catchLoc"),s=n.call(i,"finallyLoc");if(c&&s){if(this.prev<i.catchLoc)return r(i.catchLoc,!0);if(this.prev<i.finallyLoc)return r(i.finallyLoc)}else if(c){if(this.prev<i.catchLoc)return r(i.catchLoc,!0)}else{if(!s)throw new Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return r(i.finallyLoc)}}}},abrupt:function(e,t){for(var r=this.tryEntries.length-1;r>=0;--r){var a=this.tryEntries[r];if(a.tryLoc<=this.prev&&n.call(a,"finallyLoc")&&this.prev<a.finallyLoc){var i=a;break}}i&&("break"===e||"continue"===e)&&i.tryLoc<=t&&t<=i.finallyLoc&&(i=null);var o=i?i.completion:{};return o.type=e,o.arg=t,i?(this.method="next",this.next=i.finallyLoc,p):this.complete(o)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),p},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.finallyLoc===e)return this.complete(n.completion,n.afterLoc),E(n),p}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.tryLoc===e){var r=n.completion;if("throw"===r.type){var a=r.arg;E(n)}return a}}throw new Error("illegal catch attempt")},delegateYield:function(e,t,n){return this.delegate={iterator:k(e),resultName:t,nextLoc:n},"next"===this.method&&(this.arg=void 0),p}},e}var El=function(e){return"_selectId"===e?"id":e},Nl=Object(nl.a)((function(e){return{listbox:{maxHeight:"300px !important"},input:{width:"100% !important"},inputSelected:{width:"100% !important",color:"rgba(0, 0, 0, 0.87)",border:"1px solid #e0e0e0",padding:"0px 12px",borderRadius:25,background:"#e0e0e0",overflow:"hidden",whiteSpace:"nowrap",textOverflow:"ellipsis",textAlign:"center",fontSize:"0.8125rem"}}}));function kl(e){var t=Object(a.useState)(!1),n=Object(d.a)(t,2),o=n[0],c=n[1],s=Object(a.useState)([]),p=Object(d.a)(s,2),h=p[0],f=p[1],m=Object(a.useState)(e.isMulti?[]:null),b=Object(d.a)(m,2),v=b[0],y=b[1],g=Object(a.useState)(""),x=Object(d.a)(g,2),j=x[0],w=x[1],O=e.name,E=e.value,N=e.onChange,k=e.options,S=e.optionLabelKey,_=void 0===S?"title":S,L=e.optionValueKey,C=void 0===L?"id":L,P=e.isMulti,T=void 0!==P&&P,M=e.title,A=e.fetchAPI,R=e.inline,B=e.InputProps,D=e.error,F=e.filterSelectedOptions,I=void 0!==F&&F,V=e.disableCloseOnSelect,G=void 0===V||V,W=e.readOnly,$=void 0!==W&&W,z=e.concatValue,K=e.isProcessContext,q=void 0!==K&&K,H=e.inputRootClass,U=void 0===H?{}:H,Y=Object(gl.a)(e,wl),J=Nl(),X=Object(a.useState)(!1),Q=Object(d.a)(X,2),Z=Q[0],ee=Q[1],te=i.a.useCallback((function(e){return k&&k.find((function(t){return t&&t[El(C)]===e.trim()}))}),[k,C]);function ne(){return(ne=Object(u.a)(Ol().mark((function e(){var t,n=arguments;return Ol().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t=n.length>0&&void 0!==n[0]?n[0]:"",w(t);case 2:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var re=Ys((function(){return ne.apply(this,arguments)}),400);function ae(e){"Backspace"===e.key&&v&&v[El(_)]===j&&N(null,"backspace")}function ie(e,t){N("string"===typeof E?T?e.map((function(e){return e&&e[El(C)]})).join(",")||[]:e&&e[El(C)]:e,t)}Object(a.useEffect)((function(){var e=!0;return o&&(f([]),ee(!0),A?Object(u.a)(Ol().mark((function t(){var n;return Ol().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,A({search:j});case 2:n=t.sent,e&&(f(n),ee(!1));case 4:case"end":return t.stop()}}),t)})))():(f(k),ee(!1))),function(){e=!1,ee(!1)}}),[A,k,j,o]),Object(a.useEffect)((function(){if("string"===typeof E){var e=E.split(",");y(T?e.map((function(e){return te(e)})):te(e[0]))}else y(E||(T?[]:null))}),[E,T,te]);var oe=function(e){return"metaJsonModel"===(e&&e.type)?"".concat(e&&e[El(_)]?e[El(_)]:""," (Custom model)")||!1:"fieldName"===O?"".concat(Qs(e&&e.title?e.title:"")," (").concat(e&&e[El(_)],")"):e?e[El(_)]&&z&&e[El(C)]?"".concat(e[El(_)]," (").concat(e[El(C)],")"):e[El(_)]?e[El(_)]:e.name?e.name:e.id?e.id.toString():"":""};return Object(r.jsx)(fl.a,Object(l.a)(Object(l.a)({getOptionSelected:function(e,t){return T?e[El(C)]===t[El(C)]:oe(e)===oe(t)},getOptionLabel:function(e){return oe(e)},loading:Z,id:jl()("select-widget"),open:o,onOpen:function(){return c(!0)},onClose:function(){return c(!1)},disabled:$,value:v?T?Array.isArray(v)?v:[]:v:T?[]:null,onChange:function(e,t,n){return ie(t,n)},options:h||[],multiple:T,filterSelectedOptions:I,onInputChange:function(e,t){return re(t)},classes:{option:"menu-item",input:q?v?J.inputSelected:J.input:"",inputRoot:U},renderInput:function(e){return Object(r.jsx)(ml.a,Object(l.a)(Object(l.a)({},e),{},{error:D,label:R?"":M,fullWidth:!0,onClick:function(){$||c(!0)},InputProps:Object(l.a)(Object(l.a)(Object(l.a)({},B),e.InputProps),{},{endAdornment:Object(r.jsxs)(i.a.Fragment,{children:[Z?Object(r.jsx)(bl.a,{className:J.circularProgress,size:15}):null,e.InputProps.endAdornment]})})},T?{}:{onKeyDown:ae}))}},T?{disableCloseOnSelect:G}:{}),Y))}var Sl=["name","value","onChange","options","optionLabelKey","isMulti","title","fetchAPI","inline","InputProps","error","disableCloseOnSelect","readOnly","concatValue","inputRootClass"];function _l(){_l=function(){return e};var e={},t=Object.prototype,n=t.hasOwnProperty,r=Object.defineProperty||function(e,t,n){e[t]=n.value},a="function"==typeof Symbol?Symbol:{},i=a.iterator||"@@iterator",o=a.asyncIterator||"@@asyncIterator",c=a.toStringTag||"@@toStringTag";function s(e,t,n){return Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{s({},"")}catch(_){s=function(e,t,n){return e[t]=n}}function l(e,t,n,a){var i=t&&t.prototype instanceof d?t:d,o=Object.create(i.prototype),c=new N(a||[]);return r(o,"_invoke",{value:j(e,n,c)}),o}function u(e,t,n){try{return{type:"normal",arg:e.call(t,n)}}catch(_){return{type:"throw",arg:_}}}e.wrap=l;var p={};function d(){}function h(){}function f(){}var m={};s(m,i,(function(){return this}));var b=Object.getPrototypeOf,v=b&&b(b(k([])));v&&v!==t&&n.call(v,i)&&(m=v);var y=f.prototype=d.prototype=Object.create(m);function g(e){["next","throw","return"].forEach((function(t){s(e,t,(function(e){return this._invoke(t,e)}))}))}function x(e,t){function a(r,i,o,c){var s=u(e[r],e,i);if("throw"!==s.type){var l=s.arg,p=l.value;return p&&"object"==typeof p&&n.call(p,"__await")?t.resolve(p.__await).then((function(e){a("next",e,o,c)}),(function(e){a("throw",e,o,c)})):t.resolve(p).then((function(e){l.value=e,o(l)}),(function(e){return a("throw",e,o,c)}))}c(s.arg)}var i;r(this,"_invoke",{value:function(e,n){function r(){return new t((function(t,r){a(e,n,t,r)}))}return i=i?i.then(r,r):r()}})}function j(e,t,n){var r="suspendedStart";return function(a,i){if("executing"===r)throw new Error("Generator is already running");if("completed"===r){if("throw"===a)throw i;return S()}for(n.method=a,n.arg=i;;){var o=n.delegate;if(o){var c=w(o,n);if(c){if(c===p)continue;return c}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if("suspendedStart"===r)throw r="completed",n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);r="executing";var s=u(e,t,n);if("normal"===s.type){if(r=n.done?"completed":"suspendedYield",s.arg===p)continue;return{value:s.arg,done:n.done}}"throw"===s.type&&(r="completed",n.method="throw",n.arg=s.arg)}}}function w(e,t){var n=e.iterator[t.method];if(void 0===n){if(t.delegate=null,"throw"===t.method){if(e.iterator.return&&(t.method="return",t.arg=void 0,w(e,t),"throw"===t.method))return p;t.method="throw",t.arg=new TypeError("The iterator does not provide a 'throw' method")}return p}var r=u(n,e.iterator,t.arg);if("throw"===r.type)return t.method="throw",t.arg=r.arg,t.delegate=null,p;var a=r.arg;return a?a.done?(t[e.resultName]=a.value,t.next=e.nextLoc,"return"!==t.method&&(t.method="next",t.arg=void 0),t.delegate=null,p):a:(t.method="throw",t.arg=new TypeError("iterator result is not an object"),t.delegate=null,p)}function O(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function E(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function N(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(O,this),this.reset(!0)}function k(e){if(e){var t=e[i];if(t)return t.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var r=-1,a=function t(){for(;++r<e.length;)if(n.call(e,r))return t.value=e[r],t.done=!1,t;return t.value=void 0,t.done=!0,t};return a.next=a}}return{next:S}}function S(){return{value:void 0,done:!0}}return h.prototype=f,r(y,"constructor",{value:f,configurable:!0}),r(f,"constructor",{value:h,configurable:!0}),h.displayName=s(f,c,"GeneratorFunction"),e.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===h||"GeneratorFunction"===(t.displayName||t.name))},e.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,f):(e.__proto__=f,s(e,c,"GeneratorFunction")),e.prototype=Object.create(y),e},e.awrap=function(e){return{__await:e}},g(x.prototype),s(x.prototype,o,(function(){return this})),e.AsyncIterator=x,e.async=function(t,n,r,a,i){void 0===i&&(i=Promise);var o=new x(l(t,n,r,a),i);return e.isGeneratorFunction(n)?o:o.next().then((function(e){return e.done?e.value:o.next()}))},g(y),s(y,c,"Generator"),s(y,i,(function(){return this})),s(y,"toString",(function(){return"[object Generator]"})),e.keys=function(e){var t=Object(e),n=[];for(var r in t)n.push(r);return n.reverse(),function e(){for(;n.length;){var r=n.pop();if(r in t)return e.value=r,e.done=!1,e}return e.done=!0,e}},e.values=k,N.prototype={constructor:N,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(E),!e)for(var t in this)"t"===t.charAt(0)&&n.call(this,t)&&!isNaN(+t.slice(1))&&(this[t]=void 0)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var t=this;function r(n,r){return o.type="throw",o.arg=e,t.next=n,r&&(t.method="next",t.arg=void 0),!!r}for(var a=this.tryEntries.length-1;a>=0;--a){var i=this.tryEntries[a],o=i.completion;if("root"===i.tryLoc)return r("end");if(i.tryLoc<=this.prev){var c=n.call(i,"catchLoc"),s=n.call(i,"finallyLoc");if(c&&s){if(this.prev<i.catchLoc)return r(i.catchLoc,!0);if(this.prev<i.finallyLoc)return r(i.finallyLoc)}else if(c){if(this.prev<i.catchLoc)return r(i.catchLoc,!0)}else{if(!s)throw new Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return r(i.finallyLoc)}}}},abrupt:function(e,t){for(var r=this.tryEntries.length-1;r>=0;--r){var a=this.tryEntries[r];if(a.tryLoc<=this.prev&&n.call(a,"finallyLoc")&&this.prev<a.finallyLoc){var i=a;break}}i&&("break"===e||"continue"===e)&&i.tryLoc<=t&&t<=i.finallyLoc&&(i=null);var o=i?i.completion:{};return o.type=e,o.arg=t,i?(this.method="next",this.next=i.finallyLoc,p):this.complete(o)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),p},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.finallyLoc===e)return this.complete(n.completion,n.afterLoc),E(n),p}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.tryLoc===e){var r=n.completion;if("throw"===r.type){var a=r.arg;E(n)}return a}}throw new Error("illegal catch attempt")},delegateYield:function(e,t,n){return this.delegate={iterator:k(e),resultName:t,nextLoc:n},"next"===this.method&&(this.arg=void 0),p}},e}var Ll=Object(nl.a)((function(e){return{listbox:{maxHeight:"300px !important"},input:{width:"100% !important"},inputSelected:{width:"100% !important",color:"rgba(0, 0, 0, 0.87)",border:"1px solid #e0e0e0",padding:"0px 12px",borderRadius:25,background:"#e0e0e0",overflow:"hidden",whiteSpace:"nowrap",textOverflow:"ellipsis",textAlign:"center",fontSize:"0.8125rem"}}}));function Cl(e){var t=Object(a.useState)(!1),n=Object(d.a)(t,2),o=n[0],c=n[1],s=Object(a.useState)([]),p=Object(d.a)(s,2),h=p[0],f=p[1],m=Object(a.useState)(""),b=Object(d.a)(m,2),v=b[0],y=b[1],g=(e.name,e.value),x=e.onChange,j=e.options,w=e.optionLabelKey,O=void 0===w?"title":w,E=e.isMulti,N=void 0!==E&&E,k=e.title,S=e.fetchAPI,_=e.inline,L=e.InputProps,C=e.error,P=e.disableCloseOnSelect,T=void 0===P||P,M=e.readOnly,A=void 0!==M&&M,R=(e.concatValue,e.inputRootClass),B=void 0===R?{}:R,D=Object(gl.a)(e,Sl),F=Ll(),I=Object(a.useState)(!1),V=Object(d.a)(I,2),G=V[0],W=V[1];return Object(a.useEffect)((function(){var e=!0;if(o)if(f([]),W(!0),S)Object(u.a)(_l().mark((function t(){var n;return _l().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,S({search:v});case 2:n=t.sent,e&&(f(n),W(!1));case 4:case"end":return t.stop()}}),t)})))();else{var t;if(v)t="object"===typeof v?j.filter((function(e){var t,n;return null===e||void 0===e||null===(t=e.name)||void 0===t?void 0:t.toLowerCase().includes(null===v||void 0===v||null===(n=v.name)||void 0===n?void 0:n.toLowerCase())})):j.filter((function(e){var t;return null===e||void 0===e||null===(t=e.name)||void 0===t?void 0:t.toLowerCase().includes(null===v||void 0===v?void 0:v.toLowerCase())})),f(t);else f(j);W(!1)}return function(){e=!1,W(!1)}}),[S,j,v,o]),Object(r.jsx)(fl.a,Object(l.a)(Object(l.a)({loading:G,id:jl()("select-widget"),open:o,onOpen:function(){return c(!0)},onClose:function(){return c(!1)},freeSolo:!0,getOptionLabel:function(e){return e[O]?e[O]:e},disabled:A,onChange:function(e,t,n){y(t),x(t,n)},onInputChange:function(e){var t;return y(null===e||void 0===e||null===(t=e.target)||void 0===t?void 0:t.value)},options:h||[],value:g,classes:{option:"menu-item",inputRoot:B},renderInput:function(e){return Object(r.jsx)(ml.a,Object(l.a)(Object(l.a)({},e),{},{error:C,label:_?"":k,fullWidth:!0,onClick:function(){A||c(!0)},onChange:function(e){return x(e.target.value)},InputProps:Object(l.a)(Object(l.a)(Object(l.a)({},L),e.InputProps),{},{endAdornment:Object(r.jsxs)(i.a.Fragment,{children:[G?Object(r.jsx)(bl.a,{className:F.circularProgress,size:15}):null,e.InputProps.endAdornment]})})}))}},N?{disableCloseOnSelect:T}:{}),D))}var Pl=Object(nl.a)({root:{display:"flex",flexDirection:"column",marginTop:10},assignElements:{width:"100%"},label:{fontWeight:"bolder",display:"inline-block",verticalAlign:"middle",color:"#666",marginBottom:3},add:{top:"-23px !important",position:"absolute",height:23,width:24,overflow:"hidden",cursor:"pointer",backgroundColor:"#f8f8f8",border:"1px solid #ccc",borderBottom:"none",right:0},clear:{top:"-23px !important",position:"absolute",height:23,width:24,overflow:"hidden",cursor:"pointer",backgroundColor:"#f8f8f8",border:"1px solid #ccc",borderBottom:"none",right:23},container:{position:"relative"}});function Tl(e){var t=e.entry,n=e.options,i=Pl(),o=t||{},c=o.label,s=o.defaultSize,l=void 0===s?5:s,u=o.id,h=o.setOptionLabelValue,f=o.createExtensionElement,m=o.onSelectionChange,b=o.removeExtensionElement,v=Object(a.useState)([]),y=Object(d.a)(v,2),g=y[0],x=y[1],j=Object(a.useState)(null),w=Object(d.a)(j,2),O=w[0],E=w[1],N=function(e){E(e.target.value),m(e.target.value)};return Object(a.useEffect)((function(){n&&x(n)}),[n]),Object(r.jsx)("div",{className:i.root,children:Object(r.jsxs)("div",{children:[Object(r.jsx)("label",{htmlFor:"cam-assignElements-".concat(u),className:i.label,children:c}),Object(r.jsxs)("div",{className:i.container,children:[Object(r.jsx)("select",{id:"cam-assignElements-".concat(u),className:i.assignElements,name:"selectedExtensionElement",size:l,"data-list-entry-container":!0,value:O||"",onChange:function(){},children:g&&g.length>0&&g.map((function(e){return Object(r.jsx)("option",{value:e.id,onClick:N,children:e.text},e.id)}))}),Object(r.jsx)("button",{className:i.add,id:"cam-assignElements-create-".concat(u),onClick:function(){f();var e=h(g.length);x((function(t){return[].concat(Object(p.a)(t||[]),[{id:t.length,text:e}])})),E(g.length),m(g.length)},children:Object(r.jsx)("span",{children:"+"})}),Object(r.jsx)("button",{className:i.clear,id:"cam-assignElements-remove-".concat(u),onClick:function(){b(O)},children:Object(r.jsx)("span",{style:{fontSize:10},children:"X"})})]})]})})}var Ml=n(147),Al=n(168),Rl=n.n(Al),Bl=n(167),Dl=n.n(Bl),Fl=n(38),Il=n(89),Vl=n.n(Il),Gl=n(255),Wl=n.n(Gl),$l=n(367),zl=n.n($l),Kl=n(468),ql=n(469),Hl=n(488),Ul=n(582),Yl=n(575),Jl=n(576),Xl=n(577),Ql=n(578),Zl=n(579),eu=n(580),tu=n(581),nu=n(463),ru=n(361),au=n(362),iu=n(408),ou=["name","value","onChange","options","title","className","disableUnderline"],cu=Object(Tc.a)((function(e){return{root:{display:"flex",flexWrap:"wrap"},select:{width:"150px"}}}));function su(e){var t=e.name,n=e.value,a=void 0===n?"":n,i=e.onChange,o=e.options,c=e.title,s=e.className,u=e.disableUnderline,p=void 0!==u&&u,d=Object(gl.a)(e,ou),h=cu();return Object(r.jsxs)(ru.a,{className:el()(h.formControl,s),children:[Object(r.jsx)(au.a,{children:c}),Object(r.jsx)(iu.a,Object(l.a)(Object(l.a)({disableUnderline:p,value:a,onChange:function(e){return i(e.target.value)},name:t,style:{marginRight:8},classes:{select:el()(h.select,s)}},d),{},{children:o&&Array.isArray(o)&&o.map((function(e,t){var n=e.name,a=e.title;return Object(r.jsx)(nu.a,{value:n,children:a},t)}))}))]})}var lu=n(252),uu=["name","title","autoTitle","value","onChange","onBlur","readOnly","inline","InputProps","style","disableUnderline","className"];function pu(e){var t=e.name,n=e.title,a=e.autoTitle,i=e.value,o=void 0===i?"":i,c=e.onChange,s=e.onBlur,u=e.readOnly,p=e.inline,d=e.InputProps,h=e.style,f=e.disableUnderline,m=void 0!==f&&f,b=e.className,v=Object(gl.a)(e,uu);return p?Object(r.jsx)(lu.a,Object(l.a)({style:Object(l.a)({width:"100%"},h),className:b,placeholder:n,inputProps:{"aria-label":n,disableUnderline:m},name:t,onChange:function(e){return c(e.target.value)},onBlur:s,autoComplete:"off",readOnly:u,disabled:u,value:o||""},v)):Object(r.jsx)(ml.a,Object(l.a)({id:"filled-".concat(t),label:n||a,name:t,style:Object(l.a)({width:"100%"},h),onChange:function(e){return c(e.target.value)},onBlur:s,autoComplete:"off",InputProps:Object(l.a)(Object(l.a)({readOnly:u},d),{},{disableUnderline:m}),value:o||"",className:el()(v.className,b)},v))}pu.defaultProps={rows:3,readOnly:!1};var du=pu,hu=Object(Tc.a)((function(e){return{button:{color:"#0275d8",textTransform:"none"},buttonLabel:{maxHeight:30}}}));var fu=function(e){var t=e.title,n=e.Icon,a=e.onClick,i=e.className,o=hu();return t?n?Object(r.jsx)(f.a,{className:el()(o.button,o.buttonLabel,i),endIcon:Object(r.jsx)(n,{}),onClick:a,children:t}):Object(r.jsx)(f.a,{className:el()(o.button,o.buttonLabel,i),onClick:a,children:t}):Object(r.jsx)(b.a,{size:"medium",onClick:a,className:el()(o.button,i),style:{padding:"0px 12px"},children:Object(r.jsx)(n,{fontSize:"small"})})},mu=["type","title","onChange","value","readOnly","scale","customeFormat","onBlur","className","disableUnderline"];function bu(e){var t=e.type,n=void 0===t?"integer":t,o=e.title,c=e.onChange,s=e.value,u=void 0===s?0:s,p=(e.readOnly,e.scale),h=void 0===p?2:p,f=(e.customeFormat,e.onBlur),m=e.className,b=e.disableUnderline,v=Object(gl.a)(e,mu),y=Object(a.useState)(u),g=Object(d.a)(y,2),x=g[0],j=g[1],w=Object(a.useCallback)((function(e){return Number(Number(e).toFixed("integer"===n?0:h))}),[n,h]);return i.a.useEffect((function(){j(w(u))}),[u,j,w]),Object(r.jsx)(du,Object(l.a)({className:m,onChange:j,title:o,type:"number",value:"".concat(x),onBlur:function(e){c(w(x)),j(w(x)),f&&f(e)},disableUnderline:b},v))}bu.defaultProps={readOnly:!1};var vu=bu,yu=n(369),gu=n(572),xu=n(573),ju=n(574),wu=n(40),Ou=[{name:"and",title:"AND"},{name:"or",title:"OR"}],Eu={JS:".",GROOVY:"?.",BPM:"."},Nu={date:"DD/MM/YYYY",time:"HH:mm:ss",datetime:"DD/MM/YYYY HH:mm"},ku=["long","decimal","date","time","datetime","enum","text","integer","boolean","many_to_many","many-to-many","json_many_to_many","json-many-to-many","many_to_one","many-to-one","json_many_to_one","json-many-to-one","one_to_one","one-to-one","json_one_to_one","json-one-to-one","string"],Su={enum:["=","!=","isNull","isNotNull"],text:["like","notLike","isNull","isNotNull"],integer:["=","!=",">=","<=",">","<","between","notBetween","isNull","isNotNull"],boolean:["isTrue","isFalse"],button:["="]},_u=[{name:"=",title:"equals"},{name:"!=",title:"not equal"},{name:">",title:"greater than"},{name:">=",title:"greater or equal"},{name:"<",title:"less than"},{name:"<=",title:"less or equal"},{name:"in",title:"in"},{name:"between",title:"between"},{name:"notBetween",title:"not Between"},{name:"notIn",title:"not in"},{name:"isNull",title:"is null"},{name:"isNotNull",title:"is not null"},{name:"like",title:"contains"},{name:"notLike",title:"doesn't contain"},{name:"isTrue",title:"is true"},{name:"isFalse",title:"is false"},{name:"contains",title:"contains"},{name:"notContains",title:"not contains"}],Lu=["inline","type","disableUnderline","className"],Cu=["name","title","format","error","onChange"],Pu={date:gu.a,time:xu.a,datetime:ju.a};var Tu=function(e){var t=e.inline,n=e.type,o=void 0===n?"date":n,c=e.disableUnderline,s=void 0!==c&&c,u=e.className,p=Object(gl.a)(e,Lu),h=Object(a.useState)(!1),f=Object(d.a)(h,2),m=f[0],b=f[1],v=i.a.useRef(),y=(p.name,p.title),g=p.format,x=(p.error,p.onChange),j=Object(gl.a)(p,Cu),w=Pu[o];return Object(r.jsx)(wu.a,{utils:yu.a,children:Object(r.jsx)(w,Object(l.a)(Object(l.a)(Object(l.a)(Object(l.a)({autoOk:!0,open:m,ampm:!1,views:"date"===o?["date"]:"datetime"===o?["date","hours","minutes"]:"time"===o?["hours","minutes","seconds"]:["date"],InputProps:{disableUnderline:s},onChange:function(e){v.current=e,x(e)},PopoverProps:{anchorOrigin:{vertical:"bottom",horizontal:"left"},transformOrigin:{vertical:"top",horizontal:"left"}},disableToolbar:!0,variant:"inline"},t?{invalidDateMessage:""}:{}),{},{className:u,style:Object(l.a)({width:"100%"},t?{margin:0}:{}),label:t?"":y,format:g||Nu[o]},"time"!==o?{animateYearScrolling:!1}:{}),j),{},{onKeyDown:function(e){40===e.keyCode&&b(!0)},onClose:function(){x(v.current),b(!1)},onOpen:function(){return b(!0)}}))})},Mu=n(357),Au=n(491),Ru=["name","value","onChange","options","optionLabelKey","optionValueKey","isMulti","title","fetchAPI","inline","InputProps","error","filterSelectedOptions","disableCloseOnSelect","readOnly","className","classes"];function Bu(){Bu=function(){return e};var e={},t=Object.prototype,n=t.hasOwnProperty,r=Object.defineProperty||function(e,t,n){e[t]=n.value},a="function"==typeof Symbol?Symbol:{},i=a.iterator||"@@iterator",o=a.asyncIterator||"@@asyncIterator",c=a.toStringTag||"@@toStringTag";function s(e,t,n){return Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{s({},"")}catch(_){s=function(e,t,n){return e[t]=n}}function l(e,t,n,a){var i=t&&t.prototype instanceof d?t:d,o=Object.create(i.prototype),c=new N(a||[]);return r(o,"_invoke",{value:j(e,n,c)}),o}function u(e,t,n){try{return{type:"normal",arg:e.call(t,n)}}catch(_){return{type:"throw",arg:_}}}e.wrap=l;var p={};function d(){}function h(){}function f(){}var m={};s(m,i,(function(){return this}));var b=Object.getPrototypeOf,v=b&&b(b(k([])));v&&v!==t&&n.call(v,i)&&(m=v);var y=f.prototype=d.prototype=Object.create(m);function g(e){["next","throw","return"].forEach((function(t){s(e,t,(function(e){return this._invoke(t,e)}))}))}function x(e,t){function a(r,i,o,c){var s=u(e[r],e,i);if("throw"!==s.type){var l=s.arg,p=l.value;return p&&"object"==typeof p&&n.call(p,"__await")?t.resolve(p.__await).then((function(e){a("next",e,o,c)}),(function(e){a("throw",e,o,c)})):t.resolve(p).then((function(e){l.value=e,o(l)}),(function(e){return a("throw",e,o,c)}))}c(s.arg)}var i;r(this,"_invoke",{value:function(e,n){function r(){return new t((function(t,r){a(e,n,t,r)}))}return i=i?i.then(r,r):r()}})}function j(e,t,n){var r="suspendedStart";return function(a,i){if("executing"===r)throw new Error("Generator is already running");if("completed"===r){if("throw"===a)throw i;return S()}for(n.method=a,n.arg=i;;){var o=n.delegate;if(o){var c=w(o,n);if(c){if(c===p)continue;return c}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if("suspendedStart"===r)throw r="completed",n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);r="executing";var s=u(e,t,n);if("normal"===s.type){if(r=n.done?"completed":"suspendedYield",s.arg===p)continue;return{value:s.arg,done:n.done}}"throw"===s.type&&(r="completed",n.method="throw",n.arg=s.arg)}}}function w(e,t){var n=e.iterator[t.method];if(void 0===n){if(t.delegate=null,"throw"===t.method){if(e.iterator.return&&(t.method="return",t.arg=void 0,w(e,t),"throw"===t.method))return p;t.method="throw",t.arg=new TypeError("The iterator does not provide a 'throw' method")}return p}var r=u(n,e.iterator,t.arg);if("throw"===r.type)return t.method="throw",t.arg=r.arg,t.delegate=null,p;var a=r.arg;return a?a.done?(t[e.resultName]=a.value,t.next=e.nextLoc,"return"!==t.method&&(t.method="next",t.arg=void 0),t.delegate=null,p):a:(t.method="throw",t.arg=new TypeError("iterator result is not an object"),t.delegate=null,p)}function O(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function E(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function N(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(O,this),this.reset(!0)}function k(e){if(e){var t=e[i];if(t)return t.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var r=-1,a=function t(){for(;++r<e.length;)if(n.call(e,r))return t.value=e[r],t.done=!1,t;return t.value=void 0,t.done=!0,t};return a.next=a}}return{next:S}}function S(){return{value:void 0,done:!0}}return h.prototype=f,r(y,"constructor",{value:f,configurable:!0}),r(f,"constructor",{value:h,configurable:!0}),h.displayName=s(f,c,"GeneratorFunction"),e.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===h||"GeneratorFunction"===(t.displayName||t.name))},e.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,f):(e.__proto__=f,s(e,c,"GeneratorFunction")),e.prototype=Object.create(y),e},e.awrap=function(e){return{__await:e}},g(x.prototype),s(x.prototype,o,(function(){return this})),e.AsyncIterator=x,e.async=function(t,n,r,a,i){void 0===i&&(i=Promise);var o=new x(l(t,n,r,a),i);return e.isGeneratorFunction(n)?o:o.next().then((function(e){return e.done?e.value:o.next()}))},g(y),s(y,c,"Generator"),s(y,i,(function(){return this})),s(y,"toString",(function(){return"[object Generator]"})),e.keys=function(e){var t=Object(e),n=[];for(var r in t)n.push(r);return n.reverse(),function e(){for(;n.length;){var r=n.pop();if(r in t)return e.value=r,e.done=!1,e}return e.done=!0,e}},e.values=k,N.prototype={constructor:N,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(E),!e)for(var t in this)"t"===t.charAt(0)&&n.call(this,t)&&!isNaN(+t.slice(1))&&(this[t]=void 0)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var t=this;function r(n,r){return o.type="throw",o.arg=e,t.next=n,r&&(t.method="next",t.arg=void 0),!!r}for(var a=this.tryEntries.length-1;a>=0;--a){var i=this.tryEntries[a],o=i.completion;if("root"===i.tryLoc)return r("end");if(i.tryLoc<=this.prev){var c=n.call(i,"catchLoc"),s=n.call(i,"finallyLoc");if(c&&s){if(this.prev<i.catchLoc)return r(i.catchLoc,!0);if(this.prev<i.finallyLoc)return r(i.finallyLoc)}else if(c){if(this.prev<i.catchLoc)return r(i.catchLoc,!0)}else{if(!s)throw new Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return r(i.finallyLoc)}}}},abrupt:function(e,t){for(var r=this.tryEntries.length-1;r>=0;--r){var a=this.tryEntries[r];if(a.tryLoc<=this.prev&&n.call(a,"finallyLoc")&&this.prev<a.finallyLoc){var i=a;break}}i&&("break"===e||"continue"===e)&&i.tryLoc<=t&&t<=i.finallyLoc&&(i=null);var o=i?i.completion:{};return o.type=e,o.arg=t,i?(this.method="next",this.next=i.finallyLoc,p):this.complete(o)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),p},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.finallyLoc===e)return this.complete(n.completion,n.afterLoc),E(n),p}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.tryLoc===e){var r=n.completion;if("throw"===r.type){var a=r.arg;E(n)}return a}}throw new Error("illegal catch attempt")},delegateYield:function(e,t,n){return this.delegate={iterator:k(e),resultName:t,nextLoc:n},"next"===this.method&&(this.arg=void 0),p}},e}var Du=Object(nl.a)((function(e){return{listbox:{maxHeight:"300px !important"},chip:{"&.MuiChip-outlined .MuiChip-deleteIconSmall":{color:"#0275d8"},border:"1px solid #0275d8",color:"#0275d8"},popper:{width:"auto !important"}}}));function Fu(e){var t=Object(a.useState)(!1),n=Object(d.a)(t,2),o=n[0],c=n[1],s=Object(a.useState)([]),p=Object(d.a)(s,2),h=p[0],f=p[1],m=Object(a.useState)(e.isMulti?[]:null),b=Object(d.a)(m,2),v=b[0],y=b[1],g=Object(a.useState)(""),x=Object(d.a)(g,2),j=x[0],w=x[1],O=e.name,E=e.value,N=e.onChange,k=e.options,S=e.optionLabelKey,_=void 0===S?"title":S,L=e.optionValueKey,C=void 0===L?"id":L,P=e.isMulti,T=void 0!==P&&P,M=e.title,A=e.fetchAPI,R=e.inline,B=e.InputProps,D=e.error,F=e.filterSelectedOptions,I=void 0!==F&&F,V=e.disableCloseOnSelect,G=void 0===V||V,W=e.readOnly,$=void 0!==W&&W,z=e.className,K=e.classes,q=Object(gl.a)(e,Ru),H=Du(),U=Object(a.useState)(!1),Y=Object(d.a)(U,2),J=Y[0],X=Y[1],Q=i.a.useCallback((function(e){return k&&k.find((function(t){return t&&t[C]===e.trim()}))}),[k,C]);function Z(){return(Z=Object(u.a)(Bu().mark((function e(){var t,n=arguments;return Bu().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t=n.length>0&&void 0!==n[0]?n[0]:"",w(t);case 2:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var ee=Ys((function(){return Z.apply(this,arguments)}),400);function te(e){"Backspace"===e.key&&v&&v[_]===j&&N(null)}function ne(e){N("string"===typeof E?T?e.map((function(e){return e&&e[C]})).join(",")||[]:e&&e[C]:e)}Object(a.useEffect)((function(){var e=!0;return o&&(X(!0),A?Object(u.a)(Bu().mark((function t(){var n;return Bu().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,A({search:j});case 2:n=t.sent,e&&(f(n),X(!1));case 4:case"end":return t.stop()}}),t)})))():(f(k),X(!1))),function(){e=!1,X(!1)}}),[A,k,j,o]),Object(a.useEffect)((function(){if("string"===typeof E){var e=E.split(",");y(T?e.map((function(e){return Q(e)})):Q(e[0]))}else y(E||(T?[]:null))}),[E,T,Q]);var re=function(e){return"metaJsonModel"===(e&&e.type)?"".concat(e&&e.title," (").concat(e&&e[_]?e[_]:"",") (Custom model)")||!1:"fieldName"===O?"".concat(Qs(e&&e.title?e.title:"")," (").concat(e&&e[_],")"):"metaModel"===(e&&e.type)?"".concat(e&&e.title?e.title:""," (").concat(e&&e[_]?e[_]:"",")")||!1:e?e[_]?e[_]:e.id?e.id.toString():"":""};return Object(r.jsx)(fl.a,Object(l.a)(Object(l.a)({getOptionSelected:function(e,t){return T?e[C]===t[C]:re(e)===re(t)},getOptionLabel:function(e){return re(e)},className:z,loading:J,id:jl()("select-widget"),open:o,onOpen:function(){return c(!0)},onClose:function(){return c(!1)},disabled:$,value:v?T?Array.isArray(v)?v:[]:v:T?[]:null,renderTags:function(e,t){return e.map((function(e,n){return Object(r.jsx)(Au.a,Object(l.a)({variant:"outlined",label:e[_],size:"small",classes:{root:H.chip}},t({index:n})))}))},onChange:function(e,t){return ne(t)},options:h||[],multiple:T,filterSelectedOptions:I,onInputChange:function(e,t){return ee(t)},classes:Object(l.a)(Object(l.a)({},K),{},{option:"menu-item",listbox:H.listbox,popper:h&&h.length>0&&H.popper}),PopperComponent:Iu,renderInput:function(e){return Object(r.jsx)(ml.a,Object(l.a)(Object(l.a)({},e),{},{error:D,label:R?"":M,fullWidth:!0,onClick:function(){$||c(!0)},InputProps:Object(l.a)(Object(l.a)(Object(l.a)({},B),e.InputProps),{},{endAdornment:Object(r.jsxs)(i.a.Fragment,{children:[J?Object(r.jsx)(bl.a,{className:H.circularProgress,size:15}):null,e.InputProps.endAdornment]})})},T?{}:{onKeyDown:te}))}},T?{disableCloseOnSelect:G}:{}),q))}function Iu(e){return Object(r.jsx)(Mu.a,Object(l.a)(Object(l.a)({},e),{},{placement:"bottom-start"}))}var Vu=Object(Tc.a)((function(e){return{timeline:{height:"100%",width:"100%",padding:0,margin:0},timelineOppositeContent:{display:"flex",alignItems:"center",justifyContent:"flex-end",padding:0,maxWidth:80},timelineItem:{minHeight:"100%"},timelineDot:{borderColor:"#0275d8"},timelineConnector:{backgroundColor:"#0275d8"}}}));function Gu(e){var t=e.title,n=e.children,a=e.isBPMN,i=Vu();return Object(r.jsx)(Yl.a,{align:"alternate",className:i.timeline,style:a&&{height:"calc(100% - 40px)"},children:Object(r.jsxs)(Jl.a,{className:i.timelineItem,children:[Object(r.jsx)(Xl.a,{className:i.timelineOppositeContent,children:t}),Object(r.jsxs)(Ql.a,{children:[Object(r.jsx)(Zl.a,{variant:"outlined",className:i.timelineDot}),Object(r.jsx)(eu.a,{className:i.timelineConnector})]}),Object(r.jsx)(tu.a,{children:n})]})})}var Wu=n(375),$u=[{name:"and",title:"AND"},{name:"or",title:"OR"}],zu={and:"&&",or:"||"},Ku={and:"and",or:"or"},qu={JS:".",GROOVY:"?.",BPM:"."},Hu="DD/MM/YYYY",Uu="HH:mm:ss",Yu="DD/MM/YYYY HH:mm",Ju=["=",">=","<=",">","<","like","isNull","between","contains","in","isTrue"],Xu=["many_to_many","many-to-many","json_many_to_many","json-many-to-many","one_to_one","one-to-one","json_one_to_one","json-one-to-one","enum"],Qu=["long","decimal","date","time","datetime","enum","text","integer","boolean","many_to_one","many-to-one","json_many_to_one","json-many-to-one","one_to_one","one-to-one","json_one_to_one","json-one-to-one","string"],Zu={enum:["=","!=","isNull","isNotNull"],text:["like","notLike","isNull","isNotNull"],integer:["=","!=",">=","<=",">","<","between","notBetween","isNull","isNotNull"],boolean:["isTrue","isFalse","isNull","isNotNull"],button:["="],menu_item:["="]},ep=function(e,t){return e.map((function(e){return Zu[e]=t}))};ep(["long","decimal","date","time","datetime"],Zu.integer),ep(["one_to_many","json_one_to_many"],Zu.text),ep(["many_to_many","json_many_to_many"],["in","notIn","isNull","contains","notContains"]),ep(["many_to_one","one_to_one","json_many_to_one","json_one_to_one"],["=","!=","in","notIn","isNull","isNotNull"]),ep(["string"],["=","!=","isNull","isNotNull","like","notLike"]);var tp={JS:{"=":"===","!=":"!==",">":">",">=":">=","<":"<","<=":"<=",in:"in",notIn:"in",like:"LIKE",notLike:"NOT LIKE",isNotNull:"!== null",isNull:"=== null",isTrue:"===",isFalse:"==="},GROOVY:{"=":"==","!=":"!=",">":">",">=":">=","<":"<","<=":"<=",isNotNull:"!= null",isNull:"== null",isTrue:"==",isFalse:"==",in:"contains",notIn:"contains",like:"contains",notLike:"contains",contains:"contains",notContains:"contains"},BPM:{"=":"=","!=":"!=",">":">",">=":">=","<":"<","<=":"<=",isNotNull:"is NOT NULL",isNull:"is NULL",isTrue:"is",isFalse:"is",in:"IN",notIn:"NOT IN",like:"LIKE",notLike:"NOT LIKE",contains:"MEMBER OF",notContains:"NOT MEMBER OF"}},np=["many-to-one","json-many-to-one","many_to_one","json_many_to_one"],rp=["many-to-one","one-to-many","one-to-one","many-to-many","json-many-to-one","json-one-to-many","json-one-to-one","json-many-to-many"];function ap(){ap=function(){return e};var e={},t=Object.prototype,n=t.hasOwnProperty,r=Object.defineProperty||function(e,t,n){e[t]=n.value},a="function"==typeof Symbol?Symbol:{},i=a.iterator||"@@iterator",o=a.asyncIterator||"@@asyncIterator",c=a.toStringTag||"@@toStringTag";function s(e,t,n){return Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{s({},"")}catch(_){s=function(e,t,n){return e[t]=n}}function l(e,t,n,a){var i=t&&t.prototype instanceof d?t:d,o=Object.create(i.prototype),c=new N(a||[]);return r(o,"_invoke",{value:j(e,n,c)}),o}function u(e,t,n){try{return{type:"normal",arg:e.call(t,n)}}catch(_){return{type:"throw",arg:_}}}e.wrap=l;var p={};function d(){}function h(){}function f(){}var m={};s(m,i,(function(){return this}));var b=Object.getPrototypeOf,v=b&&b(b(k([])));v&&v!==t&&n.call(v,i)&&(m=v);var y=f.prototype=d.prototype=Object.create(m);function g(e){["next","throw","return"].forEach((function(t){s(e,t,(function(e){return this._invoke(t,e)}))}))}function x(e,t){function a(r,i,o,c){var s=u(e[r],e,i);if("throw"!==s.type){var l=s.arg,p=l.value;return p&&"object"==typeof p&&n.call(p,"__await")?t.resolve(p.__await).then((function(e){a("next",e,o,c)}),(function(e){a("throw",e,o,c)})):t.resolve(p).then((function(e){l.value=e,o(l)}),(function(e){return a("throw",e,o,c)}))}c(s.arg)}var i;r(this,"_invoke",{value:function(e,n){function r(){return new t((function(t,r){a(e,n,t,r)}))}return i=i?i.then(r,r):r()}})}function j(e,t,n){var r="suspendedStart";return function(a,i){if("executing"===r)throw new Error("Generator is already running");if("completed"===r){if("throw"===a)throw i;return S()}for(n.method=a,n.arg=i;;){var o=n.delegate;if(o){var c=w(o,n);if(c){if(c===p)continue;return c}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if("suspendedStart"===r)throw r="completed",n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);r="executing";var s=u(e,t,n);if("normal"===s.type){if(r=n.done?"completed":"suspendedYield",s.arg===p)continue;return{value:s.arg,done:n.done}}"throw"===s.type&&(r="completed",n.method="throw",n.arg=s.arg)}}}function w(e,t){var n=e.iterator[t.method];if(void 0===n){if(t.delegate=null,"throw"===t.method){if(e.iterator.return&&(t.method="return",t.arg=void 0,w(e,t),"throw"===t.method))return p;t.method="throw",t.arg=new TypeError("The iterator does not provide a 'throw' method")}return p}var r=u(n,e.iterator,t.arg);if("throw"===r.type)return t.method="throw",t.arg=r.arg,t.delegate=null,p;var a=r.arg;return a?a.done?(t[e.resultName]=a.value,t.next=e.nextLoc,"return"!==t.method&&(t.method="next",t.arg=void 0),t.delegate=null,p):a:(t.method="throw",t.arg=new TypeError("iterator result is not an object"),t.delegate=null,p)}function O(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function E(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function N(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(O,this),this.reset(!0)}function k(e){if(e){var t=e[i];if(t)return t.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var r=-1,a=function t(){for(;++r<e.length;)if(n.call(e,r))return t.value=e[r],t.done=!1,t;return t.value=void 0,t.done=!0,t};return a.next=a}}return{next:S}}function S(){return{value:void 0,done:!0}}return h.prototype=f,r(y,"constructor",{value:f,configurable:!0}),r(f,"constructor",{value:h,configurable:!0}),h.displayName=s(f,c,"GeneratorFunction"),e.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===h||"GeneratorFunction"===(t.displayName||t.name))},e.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,f):(e.__proto__=f,s(e,c,"GeneratorFunction")),e.prototype=Object.create(y),e},e.awrap=function(e){return{__await:e}},g(x.prototype),s(x.prototype,o,(function(){return this})),e.AsyncIterator=x,e.async=function(t,n,r,a,i){void 0===i&&(i=Promise);var o=new x(l(t,n,r,a),i);return e.isGeneratorFunction(n)?o:o.next().then((function(e){return e.done?e.value:o.next()}))},g(y),s(y,c,"Generator"),s(y,i,(function(){return this})),s(y,"toString",(function(){return"[object Generator]"})),e.keys=function(e){var t=Object(e),n=[];for(var r in t)n.push(r);return n.reverse(),function e(){for(;n.length;){var r=n.pop();if(r in t)return e.value=r,e.done=!1,e}return e.done=!0,e}},e.values=k,N.prototype={constructor:N,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(E),!e)for(var t in this)"t"===t.charAt(0)&&n.call(this,t)&&!isNaN(+t.slice(1))&&(this[t]=void 0)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var t=this;function r(n,r){return o.type="throw",o.arg=e,t.next=n,r&&(t.method="next",t.arg=void 0),!!r}for(var a=this.tryEntries.length-1;a>=0;--a){var i=this.tryEntries[a],o=i.completion;if("root"===i.tryLoc)return r("end");if(i.tryLoc<=this.prev){var c=n.call(i,"catchLoc"),s=n.call(i,"finallyLoc");if(c&&s){if(this.prev<i.catchLoc)return r(i.catchLoc,!0);if(this.prev<i.finallyLoc)return r(i.finallyLoc)}else if(c){if(this.prev<i.catchLoc)return r(i.catchLoc,!0)}else{if(!s)throw new Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return r(i.finallyLoc)}}}},abrupt:function(e,t){for(var r=this.tryEntries.length-1;r>=0;--r){var a=this.tryEntries[r];if(a.tryLoc<=this.prev&&n.call(a,"finallyLoc")&&this.prev<a.finallyLoc){var i=a;break}}i&&("break"===e||"continue"===e)&&i.tryLoc<=t&&t<=i.finallyLoc&&(i=null);var o=i?i.completion:{};return o.type=e,o.arg=t,i?(this.method="next",this.next=i.finallyLoc,p):this.complete(o)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),p},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.finallyLoc===e)return this.complete(n.completion,n.afterLoc),E(n),p}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.tryLoc===e){var r=n.completion;if("throw"===r.type){var a=r.arg;E(n)}return a}}throw new Error("illegal catch attempt")},delegateYield:function(e,t,n){return this.delegate={iterator:k(e),resultName:t,nextLoc:n},"next"===this.method&&(this.arg=void 0),p}},e}var ip=function(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]&&arguments[3],a=e&&e.data,i=a&&a.fields,o=Object.values(a&&a.jsonFields||[{}]),c=[];return c=i&&i.filter((function(e){return!e.json&&Qu.includes((e.type||"").toLowerCase())}))||[],o&&o.forEach((function(e){var a=(Object.values(e||{})||[]).filter((function(e){return Qu.includes((e.type||"").toLowerCase())&&("many-to-many"!==e.type||e.targetName)}))||[];t&&!r&&(a=a.filter((function(e){return![].concat(Object(p.a)(Xu),Object(p.a)(n?["many_to_one","json_many_to_one","many-to-one","json-many-to-one"]:[])).includes((e.type||"").toLowerCase())}))||[]),c=[].concat(Object(p.a)(c),Object(p.a)(a))})),c};function op(e,t){return cp.apply(this,arguments)}function cp(){return(cp=Object(u.a)(ap().mark((function e(t,n){var r,a,i,o;return ap().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t){e.next=2;break}return e.abrupt("return",[]);case 2:if("metaModel"!==t.type){e.next=12;break}if(t.fullName){e.next=5;break}return e.abrupt("return",[]);case 5:return e.next=7,Vc.get("ws/rest/com.axelor.apps.base.db.Product");case 7:return r=e.sent,a=ip(r),e.abrupt("return",a);case 12:if(t.name){e.next=14;break}return e.abrupt("return",[]);case 14:return e.next=16,Vc.get("ws/meta/fields/com.axelor.meta.db.MetaJsonRecord?jsonModel=".concat(t.name));case 16:return i=e.sent,o=ip(i),e.abrupt("return",o||[]);case 19:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function sp(e){return lp.apply(this,arguments)}function lp(){return(lp=Object(u.a)(ap().mark((function e(t){var n;return ap().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Vc.get("com.axelor.meta.db.MetaModel",Object(l.a)({limit:20},t));case 2:return n=e.sent,e.abrupt("return",n&&n.data&&n.data[0]);case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function up(){return pp.apply(this,arguments)}function pp(){return(pp=Object(u.a)(ap().mark((function e(){var t,n,r,a,i,o,c,s,l,u,d,h,f,m,b,v,y,g,x,j,w,O,E,N=arguments;return ap().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=N.length>0&&void 0!==N[0]?N[0]:[],n=[],r=[],a=[],!(t.length>0)){e.next=51;break}i=0;case 6:if(!(i<t.length)){e.next=27;break}if(o=t[i],c=o.type,s=o.model,l=o.modelFullName,u=o.defaultForm,"fetchAPI"!==(d=u||Xs(s))){e.next=14;break}return e.next=12,jp({name:s,type:c,fullName:l});case 12:(h=e.sent)&&h[0]&&(d=h[0].name);case 14:if(!d){e.next=23;break}return"metaModel"===c&&r.push(l),e.next=18,Vc.view({data:{name:"metaModel"===c?d:"custom-model-".concat(s,"-form"),type:"form"},model:s});case 18:f=e.sent,(m=f&&f.data&&f.data.view)&&(b=Js(m,"button"),v=Js(m,"menu-item"),n=[].concat(Object(p.a)(n),Object(p.a)(b||[]),Object(p.a)(v||[]))),e.next=24;break;case 23:"metaJsonModel"===c&&a.push(s);case 24:i++,e.next=6;break;case 27:if(!(r&&r.length>0)){e.next=38;break}y=0;case 29:if(!(y<r.length)){e.next=38;break}return e.next=32,Vc.search("com.axelor.meta.db.MetaJsonField",{data:{criteria:[{fieldName:"model",operator:"like",value:r[y]},{fieldName:"type",operator:"=",value:"button"}],operator:"and"}});case 32:g=e.sent,(x=g&&g.data)&&x.length>0&&(n=[].concat(Object(p.a)(n),Object(p.a)(x||[])));case 35:y++,e.next=29;break;case 38:if(!(a&&a.length>0)){e.next=50;break}j=0;case 40:if(!(j<a.length)){e.next=50;break}return e.next=43,Vc.get("ws/meta/fields/com.axelor.meta.db.MetaJsonRecord?jsonModel=".concat(a[j]));case 43:w=e.sent,O=ip(w),E=O.filter((function(e){return"button"===e.type})),n=[].concat(Object(p.a)(n),Object(p.a)(E||[]));case 47:j++,e.next=40;break;case 50:return e.abrupt("return",n);case 51:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function dp(){return(dp=Object(u.a)(ap().mark((function e(t){var n,r,a,i,o,c,s,l,u,d,h,f,m,b,v,y=arguments;return ap().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=!(y.length>1&&void 0!==y[1])||y[1],r=y.length>2&&void 0!==y[2]&&y[2],a=y.length>3?y[3]:void 0,i=y.length>4&&void 0!==y[4]&&y[4],o=y.length>5?y[5]:void 0,c=y.length>6&&void 0!==y[6]&&y[6],"com.axelor.meta.db.MetaJsonRecord"!==t||!a){e.next=22;break}return e.next=9,Vc.get("ws/meta/fields/com.axelor.meta.db.MetaJsonRecord?jsonModel=".concat(a));case 9:if(s=e.sent,l=(l=ip(s,r,i,o)||[]).filter((function(e){return Qu.includes((e.type||"").toLowerCase())&&(!r||!e.json)&&("many-to-many"!==(e.type||"").toLowerCase()||e.targetName)})),!c){e.next=17;break}return e.next=15,up([{model:a,type:"metaJsonModel",modelFullName:t}]);case 15:u=e.sent,l=[].concat(Object(p.a)(l||[]),Object(p.a)(u||[]));case 17:if(!(!n&&l&&l.length>0)){e.next=19;break}return e.abrupt("return",l.filter((function(e){return!["many_to_many","json_many_to_many"].includes((e&&(e.type||"")).toLowerCase().replaceAll("-","_"))})));case 19:return e.abrupt("return",$s(l,"sequence")||[]);case 22:return d={criteria:[{fieldName:"fullName",operator:"=",value:t}]},e.next=25,sp({data:d});case 25:if(h=e.sent){e.next=28;break}return e.abrupt("return",[]);case 28:return f=h&&h.metaFields.map((function(e){return e.name})),e.next=31,Vc.fields({fields:f,model:h.fullName});case 31:if(m=e.sent,b=(b=m&&m.data&&m.data.fields).filter((function(e){return Qu.includes((e.type||"").toLowerCase())&&(!r||!e.json)&&("many-to-many"!==e.type||e.targetName)})),!c){e.next=39;break}return e.next=37,up([{model:h&&h.name,type:"metaModel",modelFullName:h&&h.fullName}]);case 37:v=e.sent,b=[].concat(Object(p.a)(b||[]),Object(p.a)(v||[]));case 39:if(!(!n&&b&&b.length>0)){e.next=41;break}return e.abrupt("return",b.filter((function(e){return!["many_to_many","json_many_to_many"].includes((e&&(e.type||"")).toLowerCase().replaceAll("-","_"))})));case 41:return e.abrupt("return",b);case 42:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function hp(e){return fp.apply(this,arguments)}function fp(){return(fp=Object(u.a)(ap().mark((function e(t){var n;return ap().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Vc.search(t);case 2:if(!(n=e.sent)||-1!==n.status){e.next=5;break}return e.abrupt("return",[]);case 5:return e.abrupt("return",n&&n.data);case 6:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function mp(e){return bp.apply(this,arguments)}function bp(){return(bp=Object(u.a)(ap().mark((function e(t){var n;return ap().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Vc.search("com.axelor.meta.db.MetaJsonRecord",{data:{criteria:[{fieldName:"jsonModel",operator:"=",value:t}],operator:"and"}});case 2:if(!(n=e.sent)||-1!==n.status){e.next=5;break}return e.abrupt("return",[]);case 5:return e.abrupt("return",n&&n.data);case 6:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function vp(e){return yp.apply(this,arguments)}function yp(){return(yp=Object(u.a)(ap().mark((function e(t){var n;return ap().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Vc.search("com.axelor.meta.db.MetaJsonField",{data:{criteria:[{fieldName:"jsonModel",operator:"=",value:t},{fieldName:"nameField",operator:"=",value:!0}],operator:"and"},fields:["name"]});case 2:if(!((n=e.sent)&&n.status>-1)){e.next=5;break}return e.abrupt("return",n.data&&n.data[0]);case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function gp(){return xp.apply(this,arguments)}function xp(){return(xp=Object(u.a)(ap().mark((function e(){var t,n,r,a,i,o,c,s=arguments;return ap().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=s.length>0&&void 0!==s[0]?s[0]:{},n=s.length>1?s[1]:void 0,e.t1=!n||"metaModel"===n,!e.t1){e.next=7;break}return e.next=6,Np(t);case 6:e.t1=e.sent;case 7:if(e.t0=e.t1,e.t0){e.next=10;break}e.t0=[];case 10:if(r=e.t0,e.t3=!n||"metaJsonModel"===n,!e.t3){e.next=16;break}return e.next=15,Sp(t);case 15:e.t3=e.sent;case 16:if(e.t2=e.t3,e.t2){e.next=19;break}e.t2=[];case 19:for(a=e.t2,i=[],o=0;o<r.length;o++)i.push(Object(l.a)(Object(l.a)({},r[o]),{},{type:"metaModel"}));for(c=0;c<a.length;c++)i.push(Object(l.a)(Object(l.a)({},a[c]),{},{type:"metaJsonModel"}));return e.abrupt("return",i||[]);case 24:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function jp(e){return wp.apply(this,arguments)}function wp(){return(wp=Object(u.a)(ap().mark((function e(t){var n,r,a,i,o,c,s,l,u=arguments;return ap().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=u.length>1&&void 0!==u[1]?u[1]:[],r=u.length>2&&void 0!==u[2]?u[2]:"form",a=!(u.length>3&&void 0!==u[3])||u[3],t&&t.name||!a){e.next=5;break}return e.abrupt("return",[]);case 5:return i=[{fieldName:"type",operator:"=",value:r}],"metaJsonModel"===(null===t||void 0===t?void 0:t.type)&&i.push({fieldName:"name",operator:"=",value:"custom-model-".concat(t.name,"-").concat(r)}),(null===t||void 0===t?void 0:t.fullName)&&i.push({fieldName:"model",value:t.fullName,operator:"="}),e.next=10,Vc.search("com.axelor.meta.db.MetaView",{fields:["name","title","model"],data:{criteria:[].concat(i,Object(p.a)(n)),operator:"and"}});case 10:return o=e.sent,c=(o||{}).data,s=void 0===c?[]:c,l=Array.isArray(s)&&s.filter((function(e){return null!==e.name})),l=Object(Wu.uniqBy)(l||[],"name")||[],e.abrupt("return",l);case 15:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Op(e){return Ep.apply(this,arguments)}function Ep(){return(Ep=Object(u.a)(ap().mark((function e(t){var n,r,a;return ap().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Vc.search("com.axelor.meta.db.MetaView",{data:{_domain:"self.type = :type and self.extension IS NULL and self.name in :names",_domainContext:{type:"form",names:t&&t.length>0?t:[""]}},fields:["name","title","model"]});case 2:return n=e.sent,r=(n||{}).data,a=void 0===r?[]:r,e.abrupt("return",a);case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Np(){return kp.apply(this,arguments)}function kp(){return(kp=Object(u.a)(ap().mark((function e(){var t,n,r,a,i,o,c,s,u,p=arguments;return ap().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=p.length>0&&void 0!==p[0]?p[0]:{},e.next=3,Vc.search("com.axelor.meta.db.MetaModel",{data:t,limit:20,fields:["name","fullName","packageName"]});case 3:if(!(n=e.sent)||-1!==n.status){e.next=6;break}return e.abrupt("return",[]);case 6:if(r=(n||{}).data,i=[],o=[],(a=void 0===r?[]:r).forEach((function(e){"fetchAPI"===Xs(e.name)?i.push("".concat(e.packageName,".").concat(e.name)):o.push(Xs(e.name))})),e.t0=i.length>0,!e.t0){e.next=15;break}return e.next=14,jp(void 0,[{fieldName:"type",operator:"=",value:"form"},{fieldName:"model",value:i,operator:"IN"}],void 0,!1);case 14:e.t0=e.sent;case 15:if(c=e.t0,e.t1=o.length>0,!e.t1){e.next=21;break}return e.next=20,Op(o);case 20:e.t1=e.sent;case 21:return s=e.t1,u=[],a.forEach((function(e){"fetchAPI"===Xs(e.name)?c.forEach((function(t){t.model===e.fullName&&u.push(Object(l.a)(Object(l.a)({},e),{},{title:t.title}))})):s.forEach((function(t){t.model===e.fullName&&u.push(Object(l.a)(Object(l.a)({},e),{},{title:t.title}))}))})),e.abrupt("return",u||[]);case 25:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Sp(){return _p.apply(this,arguments)}function _p(){return(_p=Object(u.a)(ap().mark((function e(){var t,n,r,a,i=arguments;return ap().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=i.length>0&&void 0!==i[0]?i[0]:{},e.next=3,Vc.search("com.axelor.meta.db.MetaJsonModel",{data:t});case 3:if(!(n=e.sent)||-1!==n.status){e.next=6;break}return e.abrupt("return",[]);case 6:return r=(n||{}).data,a=void 0===r?[]:r,e.abrupt("return",a);case 8:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Lp(e,t,n){return Cp.apply(this,arguments)}function Cp(){return(Cp=Object(u.a)(ap().mark((function e(t,n,r){var a;return ap().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Vc.fetchRecord(t,n,r);case 2:if(!(a=e.sent)||-1!==a.status){e.next=5;break}return e.abrupt("return",[]);case 5:return e.abrupt("return",a&&a.data&&a.data[0]);case 6:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Pp(e,t){return Tp.apply(this,arguments)}function Tp(){return(Tp=Object(u.a)(ap().mark((function e(t,n){var r;return ap().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Vc.add(t,n);case 2:if(!(r=e.sent)||-1!==r.status){e.next=5;break}return e.abrupt("return",[]);case 5:return e.abrupt("return",r&&r.data&&r.data[0]);case 6:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Mp(e){return"bpmQuery"===e}function Ap(e){if(e)return e.charAt(0).toLowerCase()+e.slice(1)}var Rp=n(377),Bp=n.n(Rp),Dp=n(376),Fp=n.n(Dp);function Ip(){Ip=function(){return e};var e={},t=Object.prototype,n=t.hasOwnProperty,r=Object.defineProperty||function(e,t,n){e[t]=n.value},a="function"==typeof Symbol?Symbol:{},i=a.iterator||"@@iterator",o=a.asyncIterator||"@@asyncIterator",c=a.toStringTag||"@@toStringTag";function s(e,t,n){return Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{s({},"")}catch(_){s=function(e,t,n){return e[t]=n}}function l(e,t,n,a){var i=t&&t.prototype instanceof d?t:d,o=Object.create(i.prototype),c=new N(a||[]);return r(o,"_invoke",{value:j(e,n,c)}),o}function u(e,t,n){try{return{type:"normal",arg:e.call(t,n)}}catch(_){return{type:"throw",arg:_}}}e.wrap=l;var p={};function d(){}function h(){}function f(){}var m={};s(m,i,(function(){return this}));var b=Object.getPrototypeOf,v=b&&b(b(k([])));v&&v!==t&&n.call(v,i)&&(m=v);var y=f.prototype=d.prototype=Object.create(m);function g(e){["next","throw","return"].forEach((function(t){s(e,t,(function(e){return this._invoke(t,e)}))}))}function x(e,t){function a(r,i,o,c){var s=u(e[r],e,i);if("throw"!==s.type){var l=s.arg,p=l.value;return p&&"object"==typeof p&&n.call(p,"__await")?t.resolve(p.__await).then((function(e){a("next",e,o,c)}),(function(e){a("throw",e,o,c)})):t.resolve(p).then((function(e){l.value=e,o(l)}),(function(e){return a("throw",e,o,c)}))}c(s.arg)}var i;r(this,"_invoke",{value:function(e,n){function r(){return new t((function(t,r){a(e,n,t,r)}))}return i=i?i.then(r,r):r()}})}function j(e,t,n){var r="suspendedStart";return function(a,i){if("executing"===r)throw new Error("Generator is already running");if("completed"===r){if("throw"===a)throw i;return S()}for(n.method=a,n.arg=i;;){var o=n.delegate;if(o){var c=w(o,n);if(c){if(c===p)continue;return c}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if("suspendedStart"===r)throw r="completed",n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);r="executing";var s=u(e,t,n);if("normal"===s.type){if(r=n.done?"completed":"suspendedYield",s.arg===p)continue;return{value:s.arg,done:n.done}}"throw"===s.type&&(r="completed",n.method="throw",n.arg=s.arg)}}}function w(e,t){var n=e.iterator[t.method];if(void 0===n){if(t.delegate=null,"throw"===t.method){if(e.iterator.return&&(t.method="return",t.arg=void 0,w(e,t),"throw"===t.method))return p;t.method="throw",t.arg=new TypeError("The iterator does not provide a 'throw' method")}return p}var r=u(n,e.iterator,t.arg);if("throw"===r.type)return t.method="throw",t.arg=r.arg,t.delegate=null,p;var a=r.arg;return a?a.done?(t[e.resultName]=a.value,t.next=e.nextLoc,"return"!==t.method&&(t.method="next",t.arg=void 0),t.delegate=null,p):a:(t.method="throw",t.arg=new TypeError("iterator result is not an object"),t.delegate=null,p)}function O(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function E(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function N(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(O,this),this.reset(!0)}function k(e){if(e){var t=e[i];if(t)return t.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var r=-1,a=function t(){for(;++r<e.length;)if(n.call(e,r))return t.value=e[r],t.done=!1,t;return t.value=void 0,t.done=!0,t};return a.next=a}}return{next:S}}function S(){return{value:void 0,done:!0}}return h.prototype=f,r(y,"constructor",{value:f,configurable:!0}),r(f,"constructor",{value:h,configurable:!0}),h.displayName=s(f,c,"GeneratorFunction"),e.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===h||"GeneratorFunction"===(t.displayName||t.name))},e.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,f):(e.__proto__=f,s(e,c,"GeneratorFunction")),e.prototype=Object.create(y),e},e.awrap=function(e){return{__await:e}},g(x.prototype),s(x.prototype,o,(function(){return this})),e.AsyncIterator=x,e.async=function(t,n,r,a,i){void 0===i&&(i=Promise);var o=new x(l(t,n,r,a),i);return e.isGeneratorFunction(n)?o:o.next().then((function(e){return e.done?e.value:o.next()}))},g(y),s(y,c,"Generator"),s(y,i,(function(){return this})),s(y,"toString",(function(){return"[object Generator]"})),e.keys=function(e){var t=Object(e),n=[];for(var r in t)n.push(r);return n.reverse(),function e(){for(;n.length;){var r=n.pop();if(r in t)return e.value=r,e.done=!1,e}return e.done=!0,e}},e.values=k,N.prototype={constructor:N,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(E),!e)for(var t in this)"t"===t.charAt(0)&&n.call(this,t)&&!isNaN(+t.slice(1))&&(this[t]=void 0)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var t=this;function r(n,r){return o.type="throw",o.arg=e,t.next=n,r&&(t.method="next",t.arg=void 0),!!r}for(var a=this.tryEntries.length-1;a>=0;--a){var i=this.tryEntries[a],o=i.completion;if("root"===i.tryLoc)return r("end");if(i.tryLoc<=this.prev){var c=n.call(i,"catchLoc"),s=n.call(i,"finallyLoc");if(c&&s){if(this.prev<i.catchLoc)return r(i.catchLoc,!0);if(this.prev<i.finallyLoc)return r(i.finallyLoc)}else if(c){if(this.prev<i.catchLoc)return r(i.catchLoc,!0)}else{if(!s)throw new Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return r(i.finallyLoc)}}}},abrupt:function(e,t){for(var r=this.tryEntries.length-1;r>=0;--r){var a=this.tryEntries[r];if(a.tryLoc<=this.prev&&n.call(a,"finallyLoc")&&this.prev<a.finallyLoc){var i=a;break}}i&&("break"===e||"continue"===e)&&i.tryLoc<=t&&t<=i.finallyLoc&&(i=null);var o=i?i.completion:{};return o.type=e,o.arg=t,i?(this.method="next",this.next=i.finallyLoc,p):this.complete(o)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),p},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.finallyLoc===e)return this.complete(n.completion,n.afterLoc),E(n),p}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.tryLoc===e){var r=n.completion;if("throw"===r.type){var a=r.arg;E(n)}return a}}throw new Error("illegal catch attempt")},delegateYield:function(e,t,n){return this.delegate={iterator:k(e),resultName:t,nextLoc:n},"next"===this.method&&(this.arg=void 0),p}},e}var Vp=Object(Tc.a)((function(){return{MuiAutocompleteRoot:{width:"250px",marginRight:"10px"},iconButton:{marginRight:10},icon:{color:"#0275d8"}}}));function Gp(e){var t=e.initValue,n=void 0===t?"":t,o=e.getMetaFields,c=e.editor,s=e.onChange,h=e.value,f=e.classNames,v=e.expression,y=void 0===v?"GROOVY":v,g=e.type,x=e.isParent,j=void 0!==x&&x,w=e.isBPM,O=e.isField,E=e.setInitialField,N=void 0===E?function(){}:E,k=e.isAllowButtons,S=void 0!==k&&k,_=h||{},L=_.fieldName,C=void 0===L?"":L,P=_.allField,T=void 0===P?[]:P,M=Object(a.useState)([]),A=Object(d.a)(M,2),R=A[0],B=A[1],D=Vp(),F="context"===O&&Mp(g)&&w,I=Mp(g)?"BPM":y,V=Object(a.useState)(null),G=Object(d.a)(V,2),W=G[0],$=G[1],z=i.a.useMemo((function(){return C&&qu[I]&&C.split(F?"?.":qu[I])}),[F,C,I]),K=z||[],q=Object(d.a)(K,1)[0],H=C&&j&&R&&R.some((function(e){return e.name===q})),U=H&&(R.find((function(e){return e.name===q}))||{}).target,Y=H&&(R.find((function(e){return e.name===q}))||{}).jsonTarget,J=(R&&R.find((function(e){return e.name===q}))||{}).type,X=T&&T.length>0&&T.find((function(e){return["many_to_many","json_many_to_many"].includes((e&&(e.type||"")).toLowerCase().replaceAll("-","_"))})),Q=T&&T.length>0&&T.find((function(e){return["many_to_one","json_many_to_one"].includes((e&&(e.type||"")).toLowerCase().replaceAll("-","_"))})),Z=["one_to_one","json_one_to_one"].includes((J||"").toLowerCase().replaceAll("-","_"));function ee(e){var t=e&&R.some((function(t){return t.name===e.name&&t.target}));if(w){var r,a=j?e&&e.name?"".concat(n).concat(e.name):"".concat(function(){var e=n&&n.split(qu[I]);return e&&e.length>0&&(e.filter(Boolean)||[]).join(qu[I])}()):e&&e.name?"".concat(t?F?"?.":qu[I]:"").concat(n).concat(e.name):"";if(e&&T.findIndex((function(t){return t.name===e.name}))<=-1){var i=(a||"").split(F?"?.":qu[I])||[],o=T&&T.filter((function(e){return i.includes(e.name)}))||[];r=[].concat(Object(p.a)(o),[e])}else{var l=Object(p.a)(T||[]),u=(C||"").split(F?"?.":qu[I]);u&&u.length>0&&u.forEach((function(e){var t=l.findIndex((function(t){return t.name===e}));t>-1&&l.splice(t,1)})),r=l}s({name:"fieldName",value:e,fieldNameValue:a||void 0,allField:r,isShow:W},c)}else{var d=j?"".concat(n).concat(e?e.name:""):e?e.name:"";if(d=Mp(g)?e&&e.name?d:d.slice(0,-1):d,s({name:"fieldName",value:d},c),s({name:"fieldType",value:e&&e.type||""},c),s({name:"field",value:e},c),s({name:"isShow",value:W},c),e&&T.findIndex((function(t){return t.name===e.name}))<=-1){var h=(d||"").split(qu[I])||[],f=T&&T.filter((function(e){return h.includes(e.name)}))||[];s({name:"allField",value:[].concat(Object(p.a)(f),[e])},c)}else{var m=Object(p.a)(T||[]),b=(C||"").split(qu[I]),v="".concat(n).concat(qu[I]).concat(q).split(qu[I]);if(b&&b.length>0&&b.forEach((function(e){var t=m.findIndex((function(t){return t.name===e}));t>-1&&!(v||[]).includes(e)&&m.splice(t,1)})),b&&1===b.length&&(m=m&&m.filter((function(e){return e.name!==b[0]}))),s({name:"allField",value:m},c),s({name:"fieldValue",value:null},c),m&&1===m.length){var y=m[0];s({name:"fieldType",value:y&&y.type||""},c),s({name:"field",value:y},c),N()}else{var x=m[m.length-1];s({name:"fieldType",value:x&&x.type||""},c),s({name:"field",value:x},c),N()}}}}var te=R&&R.find((function(e){return e.name===q}))||T&&T.find((function(e){return e.name===q})),ne=!!Mp(g)||X&&z&&z.length>0&&z.includes(X.name)&&z[0]!==X.name,re=i.a.useCallback((function(){return function(e){return dp.apply(this,arguments)}(U,ne,Mp(g),Y,Q,w,S)}),[U,ne,g,Y,Q,w,S]);return Object(a.useEffect)((function(){var e=z&&z.slice(1)&&z.slice(1).join(F?"?.":qu[I]);$(!(!e||["toLocalDateTime()","getTarget()"].includes(e)))}),[z,F,I]),Object(a.useEffect)((function(){Object(u.a)(Ip().mark((function e(){var t;return Ip().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,o();case 2:t=e.sent,B(t);case 4:case"end":return e.stop()}}),e)})))()}),[o]),Object(r.jsxs)(i.a.Fragment,{children:[Object(r.jsx)(Fu,{name:"fieldName",title:"Field Name",placeholder:"field name",options:R,optionLabelKey:"name",onChange:ee,value:te,classes:{root:el()(D.MuiAutocompleteRoot,f&&f.root)}}),H&&U&&Object(r.jsxs)(i.a.Fragment,{children:[W&&!Z&&Object(r.jsx)(b.a,{size:"small",onClick:function(){if($((function(e){return!e})),T&&T.length>0&&q){var e=T.find((function(e){return e.name===q}));ee(Object(l.a)({},e||{}))}},className:D.iconButton,children:Object(r.jsx)(m.a,{title:Qs("Remove sub field"),children:Object(r.jsx)(Fp.a,{className:D.icon,fontSize:"small"})})}),(W||Z)&&Object(r.jsx)(Gp,{getMetaFields:re,editor:c,initValue:"".concat(n).concat(q).concat(F?"?.":qu[I]),value:{fieldName:z.slice(1).join(F?"?.":qu[I]),allField:T},onChange:s,classNames:f,expression:I,type:g,isParent:!!U,isBPM:w,setInitialField:N,isField:O,isAllowButtons:S}),!W&&!Z&&Object(r.jsx)(b.a,{size:"small",onClick:function(){return $((function(e){return!e}))},className:D.iconButton,children:Object(r.jsx)(m.a,{title:Qs("Add sub field"),children:Object(r.jsx)(Bp.a,{className:D.icon,fontSize:"small"})})})]})]})}var Wp=["onChange","value"],$p=["onChange","value","value2","classes","style","targetName"],zp=["type","operator","onChange","value","classes","parentType","editor"];function Kp(){Kp=function(){return e};var e={},t=Object.prototype,n=t.hasOwnProperty,r=Object.defineProperty||function(e,t,n){e[t]=n.value},a="function"==typeof Symbol?Symbol:{},i=a.iterator||"@@iterator",o=a.asyncIterator||"@@asyncIterator",c=a.toStringTag||"@@toStringTag";function s(e,t,n){return Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{s({},"")}catch(_){s=function(e,t,n){return e[t]=n}}function l(e,t,n,a){var i=t&&t.prototype instanceof d?t:d,o=Object.create(i.prototype),c=new N(a||[]);return r(o,"_invoke",{value:j(e,n,c)}),o}function u(e,t,n){try{return{type:"normal",arg:e.call(t,n)}}catch(_){return{type:"throw",arg:_}}}e.wrap=l;var p={};function d(){}function h(){}function f(){}var m={};s(m,i,(function(){return this}));var b=Object.getPrototypeOf,v=b&&b(b(k([])));v&&v!==t&&n.call(v,i)&&(m=v);var y=f.prototype=d.prototype=Object.create(m);function g(e){["next","throw","return"].forEach((function(t){s(e,t,(function(e){return this._invoke(t,e)}))}))}function x(e,t){function a(r,i,o,c){var s=u(e[r],e,i);if("throw"!==s.type){var l=s.arg,p=l.value;return p&&"object"==typeof p&&n.call(p,"__await")?t.resolve(p.__await).then((function(e){a("next",e,o,c)}),(function(e){a("throw",e,o,c)})):t.resolve(p).then((function(e){l.value=e,o(l)}),(function(e){return a("throw",e,o,c)}))}c(s.arg)}var i;r(this,"_invoke",{value:function(e,n){function r(){return new t((function(t,r){a(e,n,t,r)}))}return i=i?i.then(r,r):r()}})}function j(e,t,n){var r="suspendedStart";return function(a,i){if("executing"===r)throw new Error("Generator is already running");if("completed"===r){if("throw"===a)throw i;return S()}for(n.method=a,n.arg=i;;){var o=n.delegate;if(o){var c=w(o,n);if(c){if(c===p)continue;return c}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if("suspendedStart"===r)throw r="completed",n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);r="executing";var s=u(e,t,n);if("normal"===s.type){if(r=n.done?"completed":"suspendedYield",s.arg===p)continue;return{value:s.arg,done:n.done}}"throw"===s.type&&(r="completed",n.method="throw",n.arg=s.arg)}}}function w(e,t){var n=e.iterator[t.method];if(void 0===n){if(t.delegate=null,"throw"===t.method){if(e.iterator.return&&(t.method="return",t.arg=void 0,w(e,t),"throw"===t.method))return p;t.method="throw",t.arg=new TypeError("The iterator does not provide a 'throw' method")}return p}var r=u(n,e.iterator,t.arg);if("throw"===r.type)return t.method="throw",t.arg=r.arg,t.delegate=null,p;var a=r.arg;return a?a.done?(t[e.resultName]=a.value,t.next=e.nextLoc,"return"!==t.method&&(t.method="next",t.arg=void 0),t.delegate=null,p):a:(t.method="throw",t.arg=new TypeError("iterator result is not an object"),t.delegate=null,p)}function O(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function E(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function N(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(O,this),this.reset(!0)}function k(e){if(e){var t=e[i];if(t)return t.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var r=-1,a=function t(){for(;++r<e.length;)if(n.call(e,r))return t.value=e[r],t.done=!1,t;return t.value=void 0,t.done=!0,t};return a.next=a}}return{next:S}}function S(){return{value:void 0,done:!0}}return h.prototype=f,r(y,"constructor",{value:f,configurable:!0}),r(f,"constructor",{value:h,configurable:!0}),h.displayName=s(f,c,"GeneratorFunction"),e.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===h||"GeneratorFunction"===(t.displayName||t.name))},e.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,f):(e.__proto__=f,s(e,c,"GeneratorFunction")),e.prototype=Object.create(y),e},e.awrap=function(e){return{__await:e}},g(x.prototype),s(x.prototype,o,(function(){return this})),e.AsyncIterator=x,e.async=function(t,n,r,a,i){void 0===i&&(i=Promise);var o=new x(l(t,n,r,a),i);return e.isGeneratorFunction(n)?o:o.next().then((function(e){return e.done?e.value:o.next()}))},g(y),s(y,c,"Generator"),s(y,i,(function(){return this})),s(y,"toString",(function(){return"[object Generator]"})),e.keys=function(e){var t=Object(e),n=[];for(var r in t)n.push(r);return n.reverse(),function e(){for(;n.length;){var r=n.pop();if(r in t)return e.value=r,e.done=!1,e}return e.done=!0,e}},e.values=k,N.prototype={constructor:N,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(E),!e)for(var t in this)"t"===t.charAt(0)&&n.call(this,t)&&!isNaN(+t.slice(1))&&(this[t]=void 0)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var t=this;function r(n,r){return o.type="throw",o.arg=e,t.next=n,r&&(t.method="next",t.arg=void 0),!!r}for(var a=this.tryEntries.length-1;a>=0;--a){var i=this.tryEntries[a],o=i.completion;if("root"===i.tryLoc)return r("end");if(i.tryLoc<=this.prev){var c=n.call(i,"catchLoc"),s=n.call(i,"finallyLoc");if(c&&s){if(this.prev<i.catchLoc)return r(i.catchLoc,!0);if(this.prev<i.finallyLoc)return r(i.finallyLoc)}else if(c){if(this.prev<i.catchLoc)return r(i.catchLoc,!0)}else{if(!s)throw new Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return r(i.finallyLoc)}}}},abrupt:function(e,t){for(var r=this.tryEntries.length-1;r>=0;--r){var a=this.tryEntries[r];if(a.tryLoc<=this.prev&&n.call(a,"finallyLoc")&&this.prev<a.finallyLoc){var i=a;break}}i&&("break"===e||"continue"===e)&&i.tryLoc<=t&&t<=i.finallyLoc&&(i=null);var o=i?i.completion:{};return o.type=e,o.arg=t,i?(this.method="next",this.next=i.finallyLoc,p):this.complete(o)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),p},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.finallyLoc===e)return this.complete(n.completion,n.afterLoc),E(n),p}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.tryLoc===e){var r=n.completion;if("throw"===r.type){var a=r.arg;E(n)}return a}}throw new Error("illegal catch attempt")},delegateYield:function(e,t,n){return this.delegate={iterator:k(e),resultName:t,nextLoc:n},"next"===this.method&&(this.arg=void 0),p}},e}var qp=Object(Tc.a)((function(e){return{Container:{display:"flex"},rulesGroupHeader:{display:"flex"},paper:{margin:e.spacing(1,0),padding:e.spacing(3,2),overflow:"auto"},rules:{display:"flex",alignItems:"flex-end",justifyContent:"flex-start",marginBottom:15},MuiAutocompleteRoot:{width:"250px",marginRight:"10px"},disabled:{pointerEvents:"none",opacity:.5},valueFrom:{fontSize:12,color:"rgba(0, 0, 0, 0.54)",fontFamily:'"Roboto", "Helvetica", "Arial", sans-serif'},radio:{padding:"1px 9px",color:"#0275d8","&.MuiRadio-colorSecondary.Mui-checked":{color:"#0275d8"}},operators:{minWidth:75},iconButton:{marginRight:10},timelineConnector:{backgroundColor:"#0275d8"},combinator:{width:"fit-content"},icon:{color:"#0275d8"},timeline:{height:"100%",padding:0,margin:0},timelineOppositeContent:{display:"flex",alignItems:"center",justifyContent:"flex-end",maxWidth:60,padding:0}}}));function Hp(e,t){return Up.apply(this,arguments)}function Up(){return(Up=Object(u.a)(Kp().mark((function e(t,n){var r,a;return Kp().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=Mp(n),e.next=3,op(t,r);case 3:if(e.t0=e.sent,e.t0){e.next=6;break}e.t0=[];case 6:return a=e.t0,e.abrupt("return",a.filter((function(e){return ku.includes((e.type||"").toLowerCase())&&(!r||!e.json)})));case 8:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Yp(e){var t=e.operator,n=e.editor,i=e.internalProps,o=e.parentType,c=i.onChange,s=i.value,p=Object(gl.a)(i,Wp),h=qp(),f=p.field,m=void 0===f?{}:f,b=m.targetName,v=m.target,y=m.targetModel,g=m.model,x=m.jsonTarget,j=Object(a.useState)(null),w=Object(d.a)(j,2),O=w[0],E=w[1],N=function(){var e=Object(u.a)(Kp().mark((function e(){var t,n;return Kp().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if("com.axelor.meta.db.MetaJsonRecord"!==g||!x){e.next=10;break}return e.next=3,mp(x);case 3:return t=e.sent,e.next=6,vp(x);case 6:n=e.sent,E(n&&n.name),e.next=13;break;case 10:return e.next=12,hp(v||y);case 12:t=e.sent;case 13:return e.abrupt("return",t);case 14:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return["like","notLike"].includes(t)?Object(r.jsx)(du,Object(l.a)({name:"fieldValue",onChange:function(e){var t;"string"===typeof e||Mp(o)||(t=e&&e.length>0?e&&e.find((function(e){return e&&b&&e[b]})):e&&e[b],c({name:"nameField",value:t?O:"id"},n)),c({name:"fieldValue",value:e},n)},margin:"none",style:{marginTop:"15px",width:"250px !important"},value:s},p)):["contains","notContains","in","notIn","=","!="].includes(t)?Object(r.jsx)(Fu,{name:"fieldValue",title:"Value",placeholder:"Value",fetchAPI:N,isMulti:!(Mp(o)&&["contains","notContains"].includes(t)||["=","!="].includes(t)),optionLabelKey:b,onChange:function(e){var t;"string"===typeof e||Mp(o)||(t=e&&e.length>0?e&&e.find((function(e){return e&&b&&e[b]})):e&&e[b],c({name:"nameField",value:t?O:"id"},n)),c({name:"fieldValue",value:e},n)},value:s||[],classes:{root:h.MuiAutocompleteRoot}}):null}function Jp(e){var t=e.Component,n=e.operator,a=e.editor,o=e.internalProps,c=o.onChange,s=o.value,u=o.value2,p=o.classes,d=o.style,h=o.targetName,f=Object(gl.a)(o,$p);return["=","!=",">",">=","<","<=","like","notLike"].includes(n)?Object(r.jsx)(t,Object(l.a)({name:"fieldValue",onChange:function(e){return c({name:"fieldValue",value:e},a)},value:s,style:d},f)):["between","notBetween"].includes(n)?Object(r.jsxs)(i.a.Fragment,{children:[Object(r.jsx)(t,Object(l.a)({name:"fieldValue",style:Object(l.a)({marginRight:8},d),onChange:function(e){return c({name:"fieldValue",value:e},a)},value:s},f)),Object(r.jsx)(t,Object(l.a)({name:"fieldValue2",onChange:function(e){return c({name:"fieldValue2",value:e},a)},value:u,style:d},f))]}):["in","notIn"].includes(n)?Object(r.jsx)(Fu,Object(l.a)({name:"fieldValue",title:"Value",placeholder:"Value",isMulti:!0,optionLabelKey:h,onChange:function(e){c({name:"fieldValue",value:e},a)},value:s||[],classes:{root:p.MuiAutocompleteRoot},optionValueKey:"name"},f)):null}function Xp(e){var t=e.type,n=e.operator,a=e.onChange,i=e.value,o=e.classes,c=e.parentType,s=e.editor,u=Object(gl.a)(e,zp),p=Object(l.a)({value:i.fieldValue,value2:i.fieldValue2,onChange:a},u),d=[],h={};switch(t){case"one_to_one":case"many_to_one":case"many_to_many":case"one_to_many":case"json_one_to_one":case"json_many_to_one":case"json_many_to_many":case"json_one_to_many":return Object(r.jsx)(Yp,{operator:n,editor:s,internalProps:Object(l.a)({},p),parentType:c});case"date":case"time":case"datetime":var f=function(e){return e?Vl()(e,Nu[t]):null};return Object(r.jsx)(Jp,{Component:Tu,operator:n,editor:s,internalProps:Object(l.a)(Object(l.a)({type:t,value:f(i.fieldValue),value2:f(i.fieldValue2),onChange:function(e,n){var r=e.name,i=e.value;return a({name:r,value:i&&i.format(Nu[t])},n)}},u),{},{margin:"none",classes:o,style:{marginTop:"15px",width:"250px !important"}})});case"integer":case"long":case"decimal":case"double":return h={Component:(d=u.field.selectionList&&u.field.selectionList.map((function(e){var t=e.title,n=e.value,r=e.data;return{name:r&&r.value||n,title:t}})))?su:vu,operator:n,editor:s,internalProps:Object(l.a)({},d?Object(l.a)({options:d,classes:o},p):Object(l.a)(Object(l.a)({type:t},p),{},{margin:"none",classes:o,style:{marginTop:"15px",width:"250px !important"}}))},Object(r.jsx)(Jp,Object(l.a)({},h));case"enum":return d=u.field.selectionList.map((function(e){var t=e.title,n=e.value,r=e.data;return{name:r&&r.value||n,title:t}})),Object(r.jsx)(Jp,{Component:su,operator:n,editor:s,internalProps:Object(l.a)({options:d,classes:o},p)});default:return h={Component:(d=u.field&&u.field.selectionList&&u.field.selectionList.map((function(e){var t=e.title,n=e.value,r=e.data;return{name:r&&r.value||n,title:t}})))?su:du,operator:n,editor:s,internalProps:Object(l.a)({},d?Object(l.a)({options:d,classes:o},p):Object(l.a)(Object(l.a)({classes:o},p),{},{margin:"none",style:{marginTop:"15px",width:"250px !important"}}))},Object(r.jsx)(Jp,Object(l.a)({},h))}}function Qp(e){var t=e.getMetaFields,n=e.onChange,o=e.onRemoveRule,c=e.editor,s=e.value,l=e.expression,u=e.parentType,p=e.parentMetaModal,h=e.isAllowButtons,f=void 0!==h&&h,v=s.fieldType,y=void 0===v?"":v,g=s.field,x=s.operator,j=s.fieldValue,w=s.fieldValue2,O=void 0===w?"":w,E=s.isRelationalValue,N=s.relatedValueModal,k=s.relatedValueFieldName,S=s.relatedElseValueModal,_=s.relatedElseValueFieldName,L=s.isShowMetaModelField,C=s.isShowElseMetaModelField,P=qp(),T=y&&y.toLowerCase().replaceAll("-","_"),M=Object(a.useState)(E||"none"),A=Object(d.a)(M,2),R=A[0],B=A[1],D=Object(a.useState)(N||null),F=Object(d.a)(D,2),I=F[0],V=F[1],G=Object(a.useState)(L||!1),W=Object(d.a)(G,2),$=W[0],z=W[1],K=Object(a.useState)(S||null),q=Object(d.a)(K,2),H=q[0],U=q[1],Y=Object(a.useState)(C||!1),J=Object(d.a)(Y,2),X=J[0],Q=J[1],Z=function(e){if(e&&"string"===typeof e){var t=e.toString().split(".");return t&&t.length>1?t.slice(1).join("."):e}},ee=Object(a.useState)(null),te=Object(d.a)(ee,2),ne=te[0],re=te[1],ae=Object(a.useState)(null),ie=Object(d.a)(ae,2),oe=ie[0],ce=ie[1],se=function(e,t){e.map((function(e){return Su[e]=t}))};se(["long","decimal","double","date","time","datetime"],Su.integer),se(["one_to_many","json_one_to_many"],Su.text),se(["many_to_many","json_many_to_many"],["in","notIn","isNull","contains","notContains"]),se(["many_to_one","one_to_one","json_many_to_one","json_one_to_one"],["=","!=","in","notIn","isNull","isNotNull"]),se(["string"],["=","!=","isNull","isNotNull","like","notLike"]);var le=_u.filter((function(e){var t=T;if(""===t&&s.fieldName&&s.allField.length>0){var n=s.allField.find((function(e){return e.name===s.fieldName}));t=(n&&n.type||"").toLowerCase()}return(Su[t]||[]).includes(e.name)})),ue=function(e,t){n({name:e,value:t},c)};return Object(a.useEffect)((function(){B(E||"none"),V(N||null),z(L||!1),U(S||null),Q(C||!1)}),[E,N,L,S,C]),Object(a.useEffect)((function(){var e=s.fieldValue,t=s.allField,n=void 0===t?[]:t,r=s.fieldValue2,a=void 0===r?"":r,i=s.isRelationalValue,o=s.relatedValueModal,c=s.relatedValueFieldName,l=s.relatedElseValueModal,u=s.relatedElseValueFieldName,p=s.isShowMetaModelField,d=s.isShowElseMetaModelField;re({allField:n,field:u,fieldName:Z(a)||u&&u.name,fieldType:u&&u.type,fieldValue:null,fieldValue2:null,operator:null,isRelationalValue:i||"none",relatedValueFieldName:c,relatedValueModal:o,relatedElseValueFieldName:u,relatedElseValueModal:l,isShow:d}),ce({allField:n,field:c,fieldName:Z(e)||c&&c.fieldName,fieldType:c&&c.type,fieldValue:null,fieldValue2:null,operator:null,isRelationalValue:i||"none",relatedValueFieldName:c,relatedValueModal:o,isShow:p})}),[s]),Object(r.jsxs)("div",{className:P.rules,children:[Object(r.jsx)(Gp,{getMetaFields:t,isField:R,editor:c,onChange:n,value:s,expression:l,type:u,isParent:!0,isAllowButtons:f,setInitialField:function(){B("none")}}),Object(r.jsxs)(i.a.Fragment,{children:[Object(r.jsx)(su,{name:"operator",title:"Operator",options:g&&g.selectionList?_u.filter((function(e){return(R&&"none"!==R?["=","!=","isNull","isNotNull"]:["=","!=","isNull","isNotNull","in","notIn"]).includes(e.name)})):R&&"none"!==R?le.filter((function(e){return"in"!==e.name&&"notIn"!==e.name})):le,onChange:function(e){n({name:"operator",value:e},c),B(null)},value:x,className:P.operators}),x&&"button"!==g.type&&!["isNull","isNotNull","isTrue","isFalse"].includes(x)&&Object(r.jsxs)(Kl.a,{"aria-label":"radioType",name:"radioType",value:R||"none",onChange:function(e){B(e.target.value),ce({fieldValue:null}),ue("fieldValue",null),re({fieldValue2:null}),ue("fieldValue2",null),!e.target.value||"in"!==x&&"notIn"!==x||(n({name:"operator",value:void 0},c),B(null)),e.target.value?(ue("isRelationalValue","none"===e.target.value?null:e.target.value),ue("fieldValue",null),ue("fieldValue2",null),"self"===e.target.value?(V(p),U(p),ue("relatedValueModal",p),ue("relatedElseValueModal",p)):(V(null),U(null),Q(!1),z(!1),ue("relatedValueModal",null),ue("relatedElseValueModal",null))):(ue("relatedValueFieldName",null),ue("relatedValueModal",null),ue("relatedElseValueFieldName",null),ue("relatedElseValueModal",null))},children:[Object(r.jsx)("label",{className:P.valueFrom,children:"Value from"}),Object(r.jsx)(ql.a,{value:"self",control:Object(r.jsx)(Hl.a,{className:P.radio,size:"small"}),label:"Self"}),Object(r.jsx)(ql.a,{value:"context",control:Object(r.jsx)(Hl.a,{className:P.radio,size:"small"}),label:"Context"}),Object(r.jsx)(ql.a,{value:"none",control:Object(r.jsx)(Hl.a,{className:P.radio,size:"small"}),label:"None"})]})]}),R&&"none"!==R&&x&&!["isNull","isNotNull","isTrue","isFalse"].includes(x)?Object(r.jsxs)(i.a.Fragment,{children:["context"===R&&Object(r.jsxs)(i.a.Fragment,{children:[Object(r.jsx)(Fu,{name:"metaModal",title:"Model",placeholder:"Model",fetchAPI:function(){return us()},optionLabelKey:"name",onChange:function(e){V(e),e?(ce({fieldValue:Ap(e.name)}),ue("relatedValueModal",e),ue("fieldValue",Ap(e.name))):(ce({fieldValue:null}),ue("fieldValue",null))},value:I,classes:{root:P.MuiAutocompleteRoot}}),$&&"context"===R&&Object(r.jsx)(b.a,{size:"small",onClick:function(){if(z(!1),ue("isShowMetaModelField",!1),I){var e=I.name;ce({fieldValue:Ap(e)}),ue("relatedValueModal",I),ue("fieldValue",Ap(e))}},className:P.iconButton,children:Object(r.jsx)(m.a,{title:Qs("Remove sub field"),children:Object(r.jsx)(cl.a,{color:"primary",fontSize:"small"})})})]}),($||"self"===R)&&Object(r.jsx)(Gp,{getMetaFields:function(){return"context"===R?Hp(I,u):t()},editor:c,isField:R,onChange:function(e,t){var n=e.value,r=e.fieldNameValue,a=e.allField,i=e.isShow;ce({allField:a,field:n,fieldName:r,fieldType:n&&n.type,fieldValue:null,fieldValue2:null,operator:null,isRelationalValue:"none"===R?null:R,relatedValueFieldName:null,relatedValueModal:null,isShow:i,isShowMetaModelField:$}),ue("isRelationalValue","none"===R?null:R),ue("relatedValueFieldName",n),ue("relatedValueModal",I);var o=Mp(u),c="context"===R&&o;ue("fieldValue",r?(p&&p.id)===(I&&I.id)?o?"self.".concat(r):"".concat(Ap(I&&I.name||p&&p.name||"self")).concat(c?"?.":Eu[o?"BPM":l]).concat(r).concat(n&&n.typeName&&!o?"".concat(c?"?.":Eu[l],"toLocalDateTime()"):""):"".concat(Ap(I&&I.name||p&&p.name||o?"self":"")).concat(c?"?.":Eu[o?"BPM":l]).concat(r).concat(n&&["json-many-to-one","MANY_TO_ONE","many-to-one"].includes(n.type)&&o&&"context"===R?"".concat(c?"?.":Eu[l],"getTarget()"):"").concat(n&&n.typeName&&!o?"".concat(c?"?.":Eu[l],"toLocalDateTime()"):""):void 0)},value:oe,expression:l,type:u,isParent:!0,isBPM:!0}),!$&&I&&"context"===R&&Object(r.jsx)(b.a,{size:"small",onClick:function(){z(!0),ue("isShowMetaModelField",!0)},className:P.iconButton,children:Object(r.jsx)(m.a,{title:Qs("Add sub field"),children:Object(r.jsx)(Ul.a,{className:P.icon,fontSize:"small"})})}),["between","notBetween"].includes(x)&&Object(r.jsxs)(i.a.Fragment,{children:["context"===R&&Object(r.jsxs)(i.a.Fragment,{children:[Object(r.jsx)(Fu,{name:"metaModal",title:"Meta Modal Else",placeholder:"meta modal",fetchAPI:function(){return us()},optionLabelKey:"name",onChange:function(e){U(e),e?(re({fieldValue2:Ap(e.name)}),ue("relatedElseValueModal",e),ue("fieldValue2",Ap(e.name))):(re({fieldValue2:null}),ue("fieldValue2",null))},value:H,classes:{root:P.MuiAutocompleteRoot}}),X&&"context"===R&&Object(r.jsx)(b.a,{size:"small",onClick:function(){if(Q(!1),ue("isShowElseMetaModelField",!1),H){var e=H.name;ce({fieldValue:Ap(e)}),ue("relatedElseValueModal",H),ue("fieldValue2",Ap(e))}},className:P.iconButton,children:Object(r.jsx)(m.a,{title:Qs("Remove sub field"),children:Object(r.jsx)(cl.a,{color:"primary",fontSize:"small"})})})]}),(X||"self"===R)&&Object(r.jsx)(Gp,{getMetaFields:function(){return Hp(H,T)},editor:c,isField:R,onChange:function(e,t){var n=e.value,r=e.fieldNameValue,a=e.allField,i=e.isShow;re({allField:a,field:n,fieldName:r,fieldType:n&&n.type,fieldValue:null,fieldValue2:null,operator:null,isRelationalValue:"none"===R?null:R,relatedValueFieldName:k,relatedValueModal:S,relatedElseValueFieldName:_,relatedElseValueModal:S,isShow:i,isShowMetaModelField:$,isShowElseMetaModelField:X}),ue("relatedElseValueFieldName",n),ue("relatedElseValueModal",H);var o=Mp(u),c="context"===R&&o;ue("fieldValue2",r?(p&&p.id)===(H&&H.id)?o?"self.".concat(r):"".concat(Ap(I&&I.name&&p&&p.name)).concat(c?"?.":Eu[o?"BPM":l]).concat(r).concat(n&&n.typeName&&!o?"".concat(c?"?.":Eu[l],"toLocalDateTime()"):""):"".concat(Ap(H&&H.name)).concat(c?"?.":Eu[o?"BPM":l]).concat(r).concat(n&&["json-many-to-one","MANY_TO_ONE","many-to-one"].includes(n.type)&&o&&"context"===R?"".concat(c?"?.":Eu[l],"getTarget()"):"").concat(n&&n.typeName&&!o?"".concat(c?"?.":Eu[l],"toLocalDateTime()"):""):void 0)},value:ne,expression:l,type:u,isParent:!0,isBPM:!0}),!X&&H&&"context"===R&&Object(r.jsx)(b.a,{size:"small",onClick:function(){Q(!0),ue("isShowElseMetaModelField",!0)},className:P.iconButton,children:Object(r.jsx)(m.a,{title:Qs("Add sub field"),children:Object(r.jsx)(Ul.a,{className:P.icon,fontSize:"small"})})})]})]}):x&&("button"===g.type?Object(r.jsx)(su,{name:"fieldValue",onChange:function(e){return n({name:"fieldValue",value:e},c)},value:j,options:[{name:!0,title:"true"},{name:!1,title:"false"}],className:P.operators}):Object(r.jsx)(Xp,{type:T,parentType:u,operator:x,onChange:function(e,t){n(e,t),ue("isRelationalValue",null),ue("relatedValueFieldName",null),ue("relatedValueModal",null)},value:{fieldValue:j,fieldValue2:O},classes:P,editor:c,field:g})),Object(r.jsx)(fu,{Icon:Dl.a,onClick:o})]})}function Zp(e){var t=e.onAddGroup,n=e.isRemoveGroup,o=e.onRemoveGroup,c=e.onAddRule,s=e.onRemoveRule,l=e.editor,u=void 0===l?{}:l,p=e.getChildEditors,h=e.onChange,f=e.getMetaFields,m=e.isDisable,b=e.expression,v=e.type,y=e.parentMetaModal,g=e.element,x=e.isAllowButtons,j=void 0!==x&&x,w=qp(),O=Object(a.useState)(!1),E=Object(d.a)(O,2),N=E[0],k=E[1],S=u.id,_=u.rules,L=void 0===_?[]:_,C=p(u.id);return Object(a.useEffect)((function(){var e=Mp(v);k(e)}),[v]),Object(r.jsx)(Ml.a,{variant:"outlined",className:el()(w.paper,m&&w.disabled),children:Object(r.jsx)("div",{className:el()(w.rulesGroupHeader),children:Object(r.jsx)(Yl.a,{align:"alternate",className:w.timeline,children:Object(r.jsxs)(Jl.a,{children:[Object(r.jsx)(Xl.a,{className:w.timelineOppositeContent,children:Object(r.jsx)(su,{name:"combinator",className:w.combinator,disableUnderline:!0,options:Ou,value:u.combinator||"and",onChange:function(e){return h({name:"combinator",value:e},u)}})}),Object(r.jsxs)(Ql.a,{children:[Object(r.jsx)(Zl.a,{variant:"outlined",style:{borderColor:"#0275d8"}}),Object(r.jsx)(eu.a,{className:w.timelineConnector})]}),Object(r.jsxs)(tu.a,{children:[Object(r.jsx)(fu,{title:"Add Group",Icon:Rl.a,onClick:function(){return t(S)}}),n&&Object(r.jsx)(fu,{title:"Remove Group",Icon:Dl.a,onClick:function(){return o(S)}}),L.map((function(e,t){return Object(r.jsx)(i.a.Fragment,{children:Object(r.jsx)(Qp,{getMetaFields:f,onRemoveRule:function(){return s(u.id,t)},onChange:function(e,n){return h(e,n,t)},editor:u,value:e,expression:b,parentType:v,isBPM:N,parentMetaModal:y,element:g,isAllowButtons:j})},t)})),Object(r.jsx)(fu,{title:"Add Rule",Icon:Rl.a,onClick:function(){return c(S)}}),C.map((function(e,n){return Object(r.jsx)(i.a.Fragment,{children:Object(r.jsx)(Zp,{isRemoveGroup:!0,onAddGroup:t,onRemoveGroup:o,onAddRule:c,onRemoveRule:s,getChildEditors:p,getMetaFields:f,onChange:function(e,t,n){return h(e,t,n)},editor:e,type:v,element:g,expression:b,isAllowButtons:j})},e.id)}))]})]})})})})}function ed(e){return"bpmQuery"===e}function td(e){if(e)return e.charAt(0).toLowerCase()+e.slice(1)}function nd(e){return window._t&&"string"===typeof e?window._t(e):e}function rd(e,t){return(""+e).replace(/["'\\\n\r\u2028\u2029]/g,(function(n){switch(n){case'"':case"\\":return"\\"+n;case"'":return t?"\\"+n:'"';case"\n":return"\\n";case"\r":return"\\r";case"\u2028":return"\\u2028";case"\u2029":return"\\u2029";default:return e}}))}function ad(e,t){return i.a.useCallback((function(n){return gp(function(e){var t=(arguments.length>1&&void 0!==arguments[1]?arguments[1]:{}).search;return e||t?Object(l.a)(Object(l.a)({},e?{_domain:e}:{}),t?{criteria:[{fieldName:"name",operator:"like",value:t}]}:{}):null}(e,n),t)}),[e,t])}function id(){id=function(){return e};var e={},t=Object.prototype,n=t.hasOwnProperty,r=Object.defineProperty||function(e,t,n){e[t]=n.value},a="function"==typeof Symbol?Symbol:{},i=a.iterator||"@@iterator",o=a.asyncIterator||"@@asyncIterator",c=a.toStringTag||"@@toStringTag";function s(e,t,n){return Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{s({},"")}catch(_){s=function(e,t,n){return e[t]=n}}function l(e,t,n,a){var i=t&&t.prototype instanceof d?t:d,o=Object.create(i.prototype),c=new N(a||[]);return r(o,"_invoke",{value:j(e,n,c)}),o}function u(e,t,n){try{return{type:"normal",arg:e.call(t,n)}}catch(_){return{type:"throw",arg:_}}}e.wrap=l;var p={};function d(){}function h(){}function f(){}var m={};s(m,i,(function(){return this}));var b=Object.getPrototypeOf,v=b&&b(b(k([])));v&&v!==t&&n.call(v,i)&&(m=v);var y=f.prototype=d.prototype=Object.create(m);function g(e){["next","throw","return"].forEach((function(t){s(e,t,(function(e){return this._invoke(t,e)}))}))}function x(e,t){function a(r,i,o,c){var s=u(e[r],e,i);if("throw"!==s.type){var l=s.arg,p=l.value;return p&&"object"==typeof p&&n.call(p,"__await")?t.resolve(p.__await).then((function(e){a("next",e,o,c)}),(function(e){a("throw",e,o,c)})):t.resolve(p).then((function(e){l.value=e,o(l)}),(function(e){return a("throw",e,o,c)}))}c(s.arg)}var i;r(this,"_invoke",{value:function(e,n){function r(){return new t((function(t,r){a(e,n,t,r)}))}return i=i?i.then(r,r):r()}})}function j(e,t,n){var r="suspendedStart";return function(a,i){if("executing"===r)throw new Error("Generator is already running");if("completed"===r){if("throw"===a)throw i;return S()}for(n.method=a,n.arg=i;;){var o=n.delegate;if(o){var c=w(o,n);if(c){if(c===p)continue;return c}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if("suspendedStart"===r)throw r="completed",n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);r="executing";var s=u(e,t,n);if("normal"===s.type){if(r=n.done?"completed":"suspendedYield",s.arg===p)continue;return{value:s.arg,done:n.done}}"throw"===s.type&&(r="completed",n.method="throw",n.arg=s.arg)}}}function w(e,t){var n=e.iterator[t.method];if(void 0===n){if(t.delegate=null,"throw"===t.method){if(e.iterator.return&&(t.method="return",t.arg=void 0,w(e,t),"throw"===t.method))return p;t.method="throw",t.arg=new TypeError("The iterator does not provide a 'throw' method")}return p}var r=u(n,e.iterator,t.arg);if("throw"===r.type)return t.method="throw",t.arg=r.arg,t.delegate=null,p;var a=r.arg;return a?a.done?(t[e.resultName]=a.value,t.next=e.nextLoc,"return"!==t.method&&(t.method="next",t.arg=void 0),t.delegate=null,p):a:(t.method="throw",t.arg=new TypeError("iterator result is not an object"),t.delegate=null,p)}function O(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function E(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function N(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(O,this),this.reset(!0)}function k(e){if(e){var t=e[i];if(t)return t.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var r=-1,a=function t(){for(;++r<e.length;)if(n.call(e,r))return t.value=e[r],t.done=!1,t;return t.value=void 0,t.done=!0,t};return a.next=a}}return{next:S}}function S(){return{value:void 0,done:!0}}return h.prototype=f,r(y,"constructor",{value:f,configurable:!0}),r(f,"constructor",{value:h,configurable:!0}),h.displayName=s(f,c,"GeneratorFunction"),e.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===h||"GeneratorFunction"===(t.displayName||t.name))},e.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,f):(e.__proto__=f,s(e,c,"GeneratorFunction")),e.prototype=Object.create(y),e},e.awrap=function(e){return{__await:e}},g(x.prototype),s(x.prototype,o,(function(){return this})),e.AsyncIterator=x,e.async=function(t,n,r,a,i){void 0===i&&(i=Promise);var o=new x(l(t,n,r,a),i);return e.isGeneratorFunction(n)?o:o.next().then((function(e){return e.done?e.value:o.next()}))},g(y),s(y,c,"Generator"),s(y,i,(function(){return this})),s(y,"toString",(function(){return"[object Generator]"})),e.keys=function(e){var t=Object(e),n=[];for(var r in t)n.push(r);return n.reverse(),function e(){for(;n.length;){var r=n.pop();if(r in t)return e.value=r,e.done=!1,e}return e.done=!0,e}},e.values=k,N.prototype={constructor:N,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(E),!e)for(var t in this)"t"===t.charAt(0)&&n.call(this,t)&&!isNaN(+t.slice(1))&&(this[t]=void 0)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var t=this;function r(n,r){return o.type="throw",o.arg=e,t.next=n,r&&(t.method="next",t.arg=void 0),!!r}for(var a=this.tryEntries.length-1;a>=0;--a){var i=this.tryEntries[a],o=i.completion;if("root"===i.tryLoc)return r("end");if(i.tryLoc<=this.prev){var c=n.call(i,"catchLoc"),s=n.call(i,"finallyLoc");if(c&&s){if(this.prev<i.catchLoc)return r(i.catchLoc,!0);if(this.prev<i.finallyLoc)return r(i.finallyLoc)}else if(c){if(this.prev<i.catchLoc)return r(i.catchLoc,!0)}else{if(!s)throw new Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return r(i.finallyLoc)}}}},abrupt:function(e,t){for(var r=this.tryEntries.length-1;r>=0;--r){var a=this.tryEntries[r];if(a.tryLoc<=this.prev&&n.call(a,"finallyLoc")&&this.prev<a.finallyLoc){var i=a;break}}i&&("break"===e||"continue"===e)&&i.tryLoc<=t&&t<=i.finallyLoc&&(i=null);var o=i?i.completion:{};return o.type=e,o.arg=t,i?(this.method="next",this.next=i.finallyLoc,p):this.complete(o)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),p},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.finallyLoc===e)return this.complete(n.completion,n.afterLoc),E(n),p}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.tryLoc===e){var r=n.completion;if("throw"===r.type){var a=r.arg;E(n)}return a}}throw new Error("illegal catch attempt")},delegateYield:function(e,t,n){return this.delegate={iterator:k(e),resultName:t,nextLoc:n},"next"===this.method&&(this.arg=void 0),p}},e}var od=Object(Tc.a)((function(e){return{container:{width:"100%"},flex:{display:"flex"},paper:{margin:e.spacing(1),padding:e.spacing(3,2)},content:{display:"flex",flexDirection:"column",width:"100%"},hide:{display:"none"},MuiAutocompleteRoot:{width:"50%",marginRight:"10px"}}})),cd=1,sd={id:cd,parentId:-1,combinator:"and",rules:[{}]},ld={rules:[sd]};function ud(e){var t=e.index,n=e.value,a=e.onChange,o=e.element,c=e.type,s=e.queryModel,d=e.isCondition,h=e.isPackage,f=void 0!==h&&h,m=e.isParameterShow,b=e.defaultModel,v=e.fetchModels,y=e.isAllowButtons,g=void 0!==y&&y,x=e.isBPMN,j=e.isMapper,w=n||ld,O=w.metaModals,E=w.rules,N=od(),k=i.a.useCallback((function(e){a(e,t)}),[a,t]),S=i.a.useCallback((function(e){return k((function(t){return e(t.rules)}))}),[k]),_=i.a.useCallback((function(e){S((function(t){t.push({id:cd=(t?t.length:cd)+1,parentId:e,combinator:"and",rules:[Object(l.a)(Object(l.a)({},sd||{}),{},{id:cd,parentId:e})]})}))}),[S]),L=i.a.useCallback((function(e){S((function(t){var n=t.findIndex((function(t){return t.id===e}));t.splice(n,1)}))}),[S]),C=i.a.useCallback((function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};S((function(n){var r=n.findIndex((function(t){return t.id===e}));n[r].rules.push(t)}))}),[S]),P=i.a.useCallback((function(e,t){S((function(n){var r=n.findIndex((function(t){return t.id===e}));n[r].rules.splice(t,1)}))}),[S]),T=i.a.useCallback((function(e,t,n){var r=e.name,a=e.value,i=e.values;S((function(e){var o=e.findIndex((function(e){return e.id===t.id}));if(e[o]&&e[o].rules[n]){!function(t){Object.keys(t).forEach((function(r){e[o].rules[n][r]=t[r]}))}(Object(l.a)(Object(l.a)(Object(l.a)({},i||{}),r?Object(Bc.a)({},r,a):{}),["fieldName","operator"].includes(r)?Object(l.a)(Object(l.a)({},"fieldName"===r?{operator:""}:{}),{},{fieldValue:null,fieldValue2:null,isRelationalValue:null,relatedValueFieldName:null,relatedValueModal:null}):{}))}else e[o][r]=a}))}),[S]),M=ad(o,Hs(c)||j?null:"metaModel"),A=i.a.useCallback(Object(u.a)(id().mark((function e(){var t,n,r,a,i;return id().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=Hs(c),!(f&&t&&s)){e.next=10;break}return e.next=4,Vs(s);case 4:if(e.t0=e.sent,e.t0){e.next=7;break}e.t0={};case 7:return n=e.t0,r=n.fields,e.abrupt("return",r&&r.filter((function(e){return Qu.includes((e.type||"").toLowerCase())&&(!t||!e.json)})));case 10:return e.next=12,cs(O,t);case 12:if(e.t1=e.sent,e.t1){e.next=15;break}e.t1=[];case 15:if(a=e.t1,!O||!g){e.next=21;break}return e.next=19,ms([{model:O.name,type:O.type,modelFullName:"".concat(O.packageName,".").concat(O.name)}]);case 19:i=e.sent,a=[].concat(Object(p.a)(a||[]),Object(p.a)(i||[]));case 21:return e.abrupt("return",a.filter((function(e){return(g?[].concat(Object(p.a)(Qu),["button","menu-item"]):Qu).includes((e.type||"").toLowerCase())&&(!t||!e.json)&&e.name})));case 22:case"end":return e.stop()}}),e)}))),[c,f,s,O,g]);i.a.useEffect((function(){k((function(e){0===(e.rules||[]).length&&(e.rules=[sd])}))}),[k]),i.a.useEffect((function(){b&&k((function(e){e.metaModals=b}))}),[b,k]),i.a.useEffect((function(){console.log(E,"--------------------------")}),[]);var R=function(e){return E&&E.filter((function(t){return t.parentId===e}))};return Object(r.jsx)("div",{className:N.container,children:Object(r.jsxs)(Ml.a,{variant:"outlined",className:N.paper,children:[Object(r.jsx)("div",{className:N.content,children:Object(r.jsx)("div",{className:N.flex,children:(!Hs(c)||0===t)&&Object(r.jsx)(kl,{name:"metaModal",title:"Meta Model",placeholder:"meta model",fetchAPI:v&&!Hs(c)?v:M,className:el()(Object(Bc.a)({},N.hide,d&&Hs(c)||f)),optionLabelKey:"name",onChange:function(e){k((function(t){t.metaModals=e,t.rules=[sd]}))},value:O,classes:{root:N.MuiAutocompleteRoot},readOnly:!!(s&&Hs(c)||x&&b)})})}),(E&&E.filter((function(e){return-1===e.parentId}))||[]).map((function(e){return Object(r.jsx)(Zp,{type:c,element:o,expression:"GROOVY",editor:e,isBPMN:x,isMapper:j,onChange:T,getChildEditors:R,getMetaFields:A,isDisable:!Boolean(O)&&!f,isCondition:d,parentMetaModal:O,onAddGroup:_,onRemoveGroup:L,onAddRule:C,onRemoveRule:P,isParameterShow:m,fetchModels:v,isAllowButtons:g},e.id)}))]})})}var pd=i.a.memo(ud),dd=n(489),hd=["checked"];function fd(){fd=function(){return e};var e={},t=Object.prototype,n=t.hasOwnProperty,r=Object.defineProperty||function(e,t,n){e[t]=n.value},a="function"==typeof Symbol?Symbol:{},i=a.iterator||"@@iterator",o=a.asyncIterator||"@@asyncIterator",c=a.toStringTag||"@@toStringTag";function s(e,t,n){return Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{s({},"")}catch(_){s=function(e,t,n){return e[t]=n}}function l(e,t,n,a){var i=t&&t.prototype instanceof d?t:d,o=Object.create(i.prototype),c=new N(a||[]);return r(o,"_invoke",{value:j(e,n,c)}),o}function u(e,t,n){try{return{type:"normal",arg:e.call(t,n)}}catch(_){return{type:"throw",arg:_}}}e.wrap=l;var p={};function d(){}function h(){}function f(){}var m={};s(m,i,(function(){return this}));var b=Object.getPrototypeOf,v=b&&b(b(k([])));v&&v!==t&&n.call(v,i)&&(m=v);var y=f.prototype=d.prototype=Object.create(m);function g(e){["next","throw","return"].forEach((function(t){s(e,t,(function(e){return this._invoke(t,e)}))}))}function x(e,t){function a(r,i,o,c){var s=u(e[r],e,i);if("throw"!==s.type){var l=s.arg,p=l.value;return p&&"object"==typeof p&&n.call(p,"__await")?t.resolve(p.__await).then((function(e){a("next",e,o,c)}),(function(e){a("throw",e,o,c)})):t.resolve(p).then((function(e){l.value=e,o(l)}),(function(e){return a("throw",e,o,c)}))}c(s.arg)}var i;r(this,"_invoke",{value:function(e,n){function r(){return new t((function(t,r){a(e,n,t,r)}))}return i=i?i.then(r,r):r()}})}function j(e,t,n){var r="suspendedStart";return function(a,i){if("executing"===r)throw new Error("Generator is already running");if("completed"===r){if("throw"===a)throw i;return S()}for(n.method=a,n.arg=i;;){var o=n.delegate;if(o){var c=w(o,n);if(c){if(c===p)continue;return c}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if("suspendedStart"===r)throw r="completed",n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);r="executing";var s=u(e,t,n);if("normal"===s.type){if(r=n.done?"completed":"suspendedYield",s.arg===p)continue;return{value:s.arg,done:n.done}}"throw"===s.type&&(r="completed",n.method="throw",n.arg=s.arg)}}}function w(e,t){var n=e.iterator[t.method];if(void 0===n){if(t.delegate=null,"throw"===t.method){if(e.iterator.return&&(t.method="return",t.arg=void 0,w(e,t),"throw"===t.method))return p;t.method="throw",t.arg=new TypeError("The iterator does not provide a 'throw' method")}return p}var r=u(n,e.iterator,t.arg);if("throw"===r.type)return t.method="throw",t.arg=r.arg,t.delegate=null,p;var a=r.arg;return a?a.done?(t[e.resultName]=a.value,t.next=e.nextLoc,"return"!==t.method&&(t.method="next",t.arg=void 0),t.delegate=null,p):a:(t.method="throw",t.arg=new TypeError("iterator result is not an object"),t.delegate=null,p)}function O(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function E(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function N(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(O,this),this.reset(!0)}function k(e){if(e){var t=e[i];if(t)return t.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var r=-1,a=function t(){for(;++r<e.length;)if(n.call(e,r))return t.value=e[r],t.done=!1,t;return t.value=void 0,t.done=!0,t};return a.next=a}}return{next:S}}function S(){return{value:void 0,done:!0}}return h.prototype=f,r(y,"constructor",{value:f,configurable:!0}),r(f,"constructor",{value:h,configurable:!0}),h.displayName=s(f,c,"GeneratorFunction"),e.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===h||"GeneratorFunction"===(t.displayName||t.name))},e.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,f):(e.__proto__=f,s(e,c,"GeneratorFunction")),e.prototype=Object.create(y),e},e.awrap=function(e){return{__await:e}},g(x.prototype),s(x.prototype,o,(function(){return this})),e.AsyncIterator=x,e.async=function(t,n,r,a,i){void 0===i&&(i=Promise);var o=new x(l(t,n,r,a),i);return e.isGeneratorFunction(n)?o:o.next().then((function(e){return e.done?e.value:o.next()}))},g(y),s(y,c,"Generator"),s(y,i,(function(){return this})),s(y,"toString",(function(){return"[object Generator]"})),e.keys=function(e){var t=Object(e),n=[];for(var r in t)n.push(r);return n.reverse(),function e(){for(;n.length;){var r=n.pop();if(r in t)return e.value=r,e.done=!1,e}return e.done=!0,e}},e.values=k,N.prototype={constructor:N,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(E),!e)for(var t in this)"t"===t.charAt(0)&&n.call(this,t)&&!isNaN(+t.slice(1))&&(this[t]=void 0)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var t=this;function r(n,r){return o.type="throw",o.arg=e,t.next=n,r&&(t.method="next",t.arg=void 0),!!r}for(var a=this.tryEntries.length-1;a>=0;--a){var i=this.tryEntries[a],o=i.completion;if("root"===i.tryLoc)return r("end");if(i.tryLoc<=this.prev){var c=n.call(i,"catchLoc"),s=n.call(i,"finallyLoc");if(c&&s){if(this.prev<i.catchLoc)return r(i.catchLoc,!0);if(this.prev<i.finallyLoc)return r(i.finallyLoc)}else if(c){if(this.prev<i.catchLoc)return r(i.catchLoc,!0)}else{if(!s)throw new Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return r(i.finallyLoc)}}}},abrupt:function(e,t){for(var r=this.tryEntries.length-1;r>=0;--r){var a=this.tryEntries[r];if(a.tryLoc<=this.prev&&n.call(a,"finallyLoc")&&this.prev<a.finallyLoc){var i=a;break}}i&&("break"===e||"continue"===e)&&i.tryLoc<=t&&t<=i.finallyLoc&&(i=null);var o=i?i.completion:{};return o.type=e,o.arg=t,i?(this.method="next",this.next=i.finallyLoc,p):this.complete(o)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),p},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.finallyLoc===e)return this.complete(n.completion,n.afterLoc),E(n),p}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.tryLoc===e){var r=n.completion;if("throw"===r.type){var a=r.arg;E(n)}return a}}throw new Error("illegal catch attempt")},delegateYield:function(e,t,n){return this.delegate={iterator:k(e),resultName:t,nextLoc:n},"next"===this.method&&(this.arg=void 0),p}},e}var md=Object(Tc.a)((function(e){return{paper:{padding:e.spacing(3,2),minWidth:"calc(100% - 55px)",margin:"10px",display:"flex","& > *":{height:"100%",width:"100%"}},expressionContainer:{display:"flex",alignItems:"center"},root:{display:"flex",flexDirection:"column",alignItems:"flex-start",height:"calc(100% - 50px)",overflow:"auto"},expression:{display:"flex",alignItems:"flex-start"},dialog:{minWidth:300},container:{height:"100%",overflow:"hidden"},actions:{width:"100%",display:"flex",alignItems:"center",justifyContent:"flex-end"},combinator:{width:"fit-content"},save:{margin:e.spacing(1),backgroundColor:"#0275d8",borderColor:"#0267bf",color:"white","&:hover":{backgroundColor:"#025aa5",borderColor:"#014682",color:"white"}},dialogPaper:{maxWidth:"100%",maxHeight:"100%",resize:"both",width:"70%",height:650},checkbox:{color:"#0275d8","&.MuiCheckbox-colorSecondary.Mui-checked":{color:"#0275d8"}}}})),bd=0,vd=0;var yd=function(e){var t=e.parameters,n=e.onSave,o=e.exprVal,c=e.title,s=e.dialogActionButton,h=e.isBPMN,f=e.setProperty,m=e.getExpression,w=e.close,O=e.defaultModel,E=e.fetchModels,N=e.isAllowButtons,k=void 0!==N&&N,S=e.isMapper,_=t||{},L=_.type,C=void 0===L?"GROOVY":L,P=_.id,T=_.model,M=_.resultField,A=_.resultMetaField,R=_.modelFilter,B=_.queryModel,D=_.withParam,F=_.isCondition,I=_.isPackage,V=_.isParameterShow,G=void 0===V||V,W=ed(C)?"BPM":"GROOVY",$=Object(a.useState)("and"),z=Object(d.a)($,2),K=z[0],q=z[1],H=Object(a.useState)(null),U=Object(d.a)(H,2),Y=U[0],J=U[1],X=Object(a.useState)(!1),Q=Object(d.a)(X,2),Z=Q[0],ee=Q[1],te=Object(a.useState)(null),ne=Object(d.a)(te,2),re=ne[0],ae=ne[1],ie=Object(a.useState)([{}]),oe=Object(d.a)(ie,2),ce=oe[0],se=oe[1],le=Object(a.useState)(!1),ue=Object(d.a)(le,2),pe=ue[0],de=ue[1],he=Object(a.useState)(!1),fe=Object(d.a)(he,2),me=fe[0],be=fe[1],ve=md();function ye(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],r=arguments.length>3?arguments[3]:void 0,a=tp[ed(C)?"BPM":W],i=e.fieldName,o=e.operator,c=e.allField,s=e.fieldValue,l=e.fieldValue2,u=e.isRelationalValue,p=e.relatedValueFieldName,d=e.relatedValueModal,h=e.relatedElseValueFieldName,f=e.relatedElseValueModal,m=e.parent,b=e.nameField,v=i,y=v&&v.split(qu[ed(C)?"BPM":W]).filter((function(e){return""!==e})),g=y[0],x=c.find((function(e){return e.name===g})),j=x||{},w=j.targetName,O=j.selectionList,E=j.nameField,N=x&&x.type&&x.type.toLowerCase().replaceAll("-","_"),k=x&&x.typeName,S=y&&y.splice(1)||[];if(["many_to_many","one_to_many","json_many_to_many","json_one_to_many"].includes(N)){var _=t.match(/\$\$/g);if(_&&_.length>0){var L=S.length>=1?"".concat(g,".find{it->it.$$$$}").concat(Ju.includes(o)?" != null":" == null"):"".concat(g,".").concat(S.length>0?"find":"collect","{it->it$$$$}").concat(S.length>0?Ju.includes(o)?" != null":" == null":"");t=t.replace(/\$\$/g,L)}else{var P=S.length>=1?"".concat(g,".find{it->it.$$}").concat(Ju.includes(o)?" != null":" == null"):"".concat(g,".").concat(S.length>0?"find":"collect","{it->it$$}").concat(S.length>0?Ju.includes(o)?" != null":" == null":"");t+=P}var T=S.join(qu[W]);return ye({fieldName:T,operator:o,allField:c,fieldValue:s,fieldValue2:l,isRelationalValue:u,relatedValueFieldName:p,relatedValueModal:d,relatedElseValueFieldName:h,relatedElseValueModal:f,parent:y&&y[0],nameField:E||b},t,S.length>1,r)}if(["json_many_to_one","json_one_to_one","many_to_one","one_to_one"].includes(N)){var M=S.join(qu[W]),A=t.match(/\$\$/g),R=S.length>=1?"".concat(g).concat(qu[W]):g;return A&&A.length>0?t=t.replace(/\$\$/g,"".concat(R,"$$$$")):t+="".concat(R,"$$"),ye({fieldName:M,operator:o,allField:c,fieldValue:s,fieldValue2:l,isRelationalValue:u,relatedValueFieldName:p,relatedValueModal:d,relatedElseValueFieldName:h,relatedElseValueModal:f,nameField:E||b,parent:y&&y[0]},t,S.length>1,r)}var B=["integer","decimal","boolean","long","double"].includes(N),F=["date","time","datetime"].includes(N);if(B&&(s||!1===s||O||u||(s=0),["between","notBetween"].includes(o)&&!l&&(l=0)),u||B||"object"===typeof s||(s="'".concat(rd(s,D),"'"),l="'".concat(rd(l,D),"'")),F&&(u||(s=ge(N,s),l=ge(N,l)),v=k?"".concat(v,"?.toLocalDateTime()"):v),["in","notIn"].includes(o)){var I=t&&t.includes("{it->it$$}"),V=c.find((function(e){return e.name===m}))||{},G="string"===typeof(e&&e.fieldValue)?e.fieldValue:e.fieldValue.map((function(e){return B?"".concat(e.nameField||e.targetName||e.fullName||e.name||e.id):e.nameField||e.targetName||e.fullName||e.name?"'".concat(e.nameField||e.targetName||e.fullName||e.name,"'"):e.id})).join(","),$=n||S.length>=1?"":"".concat(v).concat(O?"":"".concat(qu[W]).concat(b||V&&V.targetName||w||"fullName")),z="".concat("notIn"===o?"!":"","(".concat(G,")")).concat(qu[W]).concat(a[o]).concat(I?"All":"","(").concat(r).concat(qu[W]).concat(t.replace(/\$\$/g,$),")");return z}if(["contains","notContains"].includes(o)){var K=t&&t.includes("{it->it$$}"),q=c.find((function(e){return e.name===m}))||{},H="string"===typeof(e&&e.fieldValue)?e.fieldValue:e.fieldValue&&e.fieldValue.map((function(e){return B?"".concat(e.nameField||e.targetName||e.fullName||e.name||e.id):e.nameField||e.targetName||e.fullName||e.name?"'".concat(e.nameField||e.targetName||e.fullName||e.name,"'"):e.id})).join(","),U=n||S.length>=1?"":"".concat(v).concat(O?"":"".concat(qu[W]).concat(b||q&&q.targetName||w||"fullName")),Y="".concat("notContains"===o?"!":"","(").concat(r).concat(qu[W]).concat(t.replace(/\$\$/g,U),")").concat(qu[W]).concat(a[o]).concat(K?"All":"","(").concat(H,")");return Y}if(["between","notBetween"].includes(o)){var J=t.match(/it.\$\$/g);if(J&&J.length){var X="(it.".concat(r).concat(qu[W]).concat(v," >= ").concat(s," && it.").concat(r).concat(qu[W]).concat(v," <= ").concat(l,")");return"notBetween"===o?"".concat(t.replace(/it.\$\$/g,"!".concat(X))):t.replace(/it.\$\$/g,X)}var Q=function(e){var t=e&&e.replace(/\$\$/g,v)||v;return"notBetween"===o?"!(".concat(r).concat(qu[W]).concat(t," >= ").concat(s," && ").concat(r).concat(qu[W]).concat(t," <= ").concat(l,")"):"(".concat(r).concat(qu[W]).concat(t," >= ").concat(s," && ").concat(r).concat(qu[W]).concat(t," <= ").concat(l,")")};return Q(t)}if(["isNotNull","isNull"].includes(o)){var Z="".concat(v," ").concat(a[o]),ee=c.find((function(e){return e.name===m}))||{},te=t&&t.includes("{it->it$$}");if(te){var ne=n||S.length>=1?"":"".concat(v).concat(O?"":"".concat(qu[W]).concat(ee&&ee.targetName||w||"fullName"));return"".concat(r).concat(qu[W]).concat(t.replace(/\$\$/g,"".concat(ne," ").concat(Z)))}return"".concat(r).concat(qu[W]).concat(t.replace(/\$\$/g,Z))}if(["isTrue","isFalse"].includes(o)){var re="isTrue"===o,ae="".concat(v," ").concat(a[o]," ").concat(re);return"".concat(r).concat(qu[W]).concat(t.replace(/\$\$/g,ae))}if(["like","notLike"].includes(o)){var ie="".concat(v).concat(qu[W]).concat(a[o],"(").concat(s,")");return"".concat("notLike"===o?"!":"").concat(r).concat(qu[W]).concat(t.replace(/\$\$/g,ie))}var oe=x||c.find((function(e){return e.name===m}))||{},ce="object"===typeof s&&s?"'".concat(rd(s[b]||s[w]||s.fullName||s.name||s.id||"",D),"'"):s,se="".concat("object"===typeof s&&s?"".concat(v).concat(qu[W]).concat(b||oe.targetName||"fullName"):v," ").concat(a[o]," ").concat(ce);return["button","menu-item"].includes(N)?"".concat(t.replace(/\$\$/g,se)):"".concat(r).concat(qu[W]).concat(t.replace(/\$\$/g,se))}function ge(e,t){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],r=ed(C);if("date"===e){var a="'".concat(Vl()(t,Hu).format("YYYY-MM-DD"),"'");return n||r?a:"LocalDate.parse(".concat(a,")")}if("datetime"===e)return n||r?"'".concat(Vl()(t,Yu).toISOString(),"'"):"LocalDateTime.of(".concat(Vl()(t,Yu).format("YYYY-M-D-H-m-s").split("-"),")");var i="'".concat(Vl()(t,Uu).format("HH:mm:ss"),"'");return n||r?i:"LocalTime.parse(".concat(i,")")}function xe(e,t){for(var n=ed(C),r=n?"self":h&&me?"$ctx.find('".concat(function(e){if(e)return e.charAt(0).toUpperCase()+e.slice(1)}(t),"', ").concat(t,"Id)"):t,a=tp[n?"BPM":W],i=[],o=function(t){var o=e[t],c=o.fieldName,s=o.field,l=void 0===s?{}:s,u=o.operator,p=o.allField,d=l||{},h=d.targetName,f=d.selectionList,m=l&&l.type&&l.type.toLowerCase(),b=l&&l.typeName,v=["long","integer","decimal","boolean","button","menu-item","double"].includes(m),y=["date","time","datetime"].includes(m),g=o.fieldValue,x=o.fieldValue2,j=o.isRelationalValue,w=c;if(v&&!f&&!j&&(g||!1===g||(g=0),["between","notBetween"].includes(u)&&!x&&(x=0),!w||""===w))return ee(!0),i.push(null),{v:void 0};var O=w&&w.split(qu[W])[0],E=p&&p.find((function(e){return e.name===O}));if(["many_to_many","one_to_many","many_to_one","one_to_one","json_many_to_many","json_one_to_many","json_many_to_one","json_one_to_one"].includes(E&&E.type&&E.type.toLowerCase()&&E.type.toLowerCase().replaceAll("-","_")))i.push(ye(o,void 0,!1,r));else{j||v||"object"===typeof g||(g="'".concat(rd(g,D),"'"),x="'".concat(rd(x,D),"'")),y&&(j||(g=ge(m,g),x=ge(m,x)),w=b?"".concat(w,"?.toLocalDateTime()"):w);var N=n?Ku:zu;if(["in","notIn"].includes(u)){var k=o&&o.fieldValue&&o.fieldValue.map((function(e){return v?"".concat(e.targetName||e.fullName||e.name):"'".concat(e.targetName||e.fullName||e.name,"'")})).filter((function(e){return""!==e})).join(",");i.push("".concat("notIn"===u?"!":"","(".concat(k,")")).concat(qu[W]).concat(a[u],"(").concat(r).concat(qu[W]).concat(w).concat(f?" ":"".concat(qu[W]," ").concat(h||"fullName"),")"))}else if(["between","notBetween"].includes(u))"notBetween"===u&&i.push("!(".concat(r).concat(qu[W]).concat(w," >= ").concat(g," ").concat(N.and," ").concat(r).concat(qu[W]).concat(w," <= ").concat(x,")")),i.push("(".concat(r).concat(qu[W]).concat(w," >= ").concat(g," ").concat(N.and," ").concat(r).concat(qu[W]).concat(w," <= ").concat(x,")"));else if(["isNotNull","isNull"].includes(u))i.push("".concat(r).concat(qu[W]).concat(w," ").concat(a[u]));else if(["isTrue","isFalse"].includes(u)){var S="isTrue"===u;i.push("".concat(r).concat(qu[W]).concat(w," ").concat(a[u]," ").concat(S))}else if(["like","notLike"].includes(u))i.push("".concat("notLike"===u?"!":"").concat(r).concat(qu[W]).concat(w).concat(qu[W]).concat(a[u],"(").concat(g,")"));else{var _="object"===typeof g&&g?"'".concat(rd(g[h]||g.fullName||g.name||"",D),"'"):g;i.push(["button","menu-item"].includes(m)?"".concat(w," ").concat(a[u]," ").concat(_):"".concat(r).concat(qu[W]).concat("many_to_one"===m||"json_many_to_one"===m?"".concat(w).concat(qu[W]).concat(l.targetName||"fullName"):w," ").concat(a[u]," ").concat(_))}}},c=0;c<(e&&e.length);c++){var s=o(c);if("object"===typeof s)return s.v}return i}var je=function(e,t){if(ed(C)&&t&&e&&e.allField&&e.allField.find((function(e){return e.name===t&&rp.includes(e.type)&&(e.modelField||"com.axelor.meta.db.MetaJsonRecord"===e.model||"com.axelor.meta.db.MetaJsonRecord"===e.target)})))return!0};function we(e){var t,n=e.jsonFieldName,r=e.parentCustomField,a=e.field,i=e.value,o=e.values,c=e.targetName,s=e.operator,l=e.map_operators,u=e.rule,p=i;if(n&&np.includes(r?r.type:a.type)){var d=(u||{}).relatedValueFieldName,h=(t=r?r.target:a.target)&&t.split(".").pop(),f="".concat(["in","notIn"].includes(s)?"(".concat(i||"",")"):["like","notLike"].includes(s)?"CONCAT('%',".concat(i,",'%')"):i||"").concat("MetaJsonRecord"===h?" and jsonModel = '".concat(r?r.jsonTarget:a.jsonTarget,"'"):""),m="select id from ".concat(h),b=["isNull","isNotNull"].includes(s),v=["in","notIn"].includes(s);if(["between","notBetween"].includes(s))return"(".concat(m);p="".concat(v?"":"(").concat(m," where ").concat(o&&o.length>1?"".concat(o.slice(1).join(qu[W])):"").concat(c?"".concat(o&&o.length>1&&!b?".":"").concat(b?"":c):""," ").concat(l[s]," ").concat(f).concat(c&&d&&d.targetName?".".concat(d.targetName):"").concat(v?"":")")}return p}function Oe(e,t,n){var r=e&&e[0]||{},a=r.rules,i=r.combinator,o=void 0===i?"and":i,c=r.children,s=function(e,t){for(var n=ed(C),r=n?"self":t,a=tp[n?"BPM":W],i=[],o=function(o){var c=e[o],s=c.fieldName,u=c.field,p=void 0===u?{}:u,d=c.operator,h=c.allField,f=c.isField,m="param"===f,b=p||{},v=b.targetName,y=b.selectionList,g=b.model,x=b.target,j=b.jsonField,w=p&&p.type&&p.type.toLowerCase(),O=s&&s.split(qu[W])[0],E=h&&h.find((function(e){return e.name===O})),N=["many_to_many","one_to_many","many_to_one","one_to_one","json_many_to_many","json_one_to_many","json_many_to_one","json_one_to_one"].includes(E&&E.type&&E.type.toLowerCase()&&E.type.toLowerCase().replaceAll("-","_")),k=["long","integer","decimal","boolean","double"].includes(w),S=["date","time","datetime"].includes(w),_="com.axelor.meta.db.MetaJsonRecord"===g||"com.axelor.meta.db.MetaJsonRecord"===x||j,L=void 0,C=s&&s.split(qu[W]);if(C&&C.length>1){var P=h&&h.find((function(e){return C&&C.find((function(t){return e.name===t&&("com.axelor.meta.db.MetaJsonRecord"===e.model||"com.axelor.meta.db.MetaJsonRecord"===e.target||e.jsonField)}))}));P&&(_=!0,L=P)}var T=_?"".concat(function(e,t,n){var r=e.type,a=e.jsonField;switch(r){case"text":case"string":case"date":case"datetime":case"time":return"json_extract_text(".concat(t,".").concat(a,",'").concat(n,"')");case"many-to-one":case"json-many-to-one":case"many_to_one":case"json_many_to_one":return"json_extract_integer(".concat(t,".").concat(a,",'").concat(e.name,"','id')");case"integer":return"json_extract_integer(".concat(t,".").concat(a,",'").concat(n,"')");case"decimal":return"json_extract_decimal(".concat(t,".").concat(a,",'").concat(n,"')");case"boolean":return"json_extract_boolean(".concat(t,".").concat(a,",'").concat(n,"')")}}(L?Object(l.a)(Object(l.a)({},L),{},{targetName:p&&p.targetName}):p,r,s)):void 0,M=c||{},A=M.fieldValue,R=M.fieldValue2,B=M.isRelationalValue,I=M.relatedValueModal,V=void 0===I?{}:I,G=M.relatedElseValueModal,$=void 0===G?{}:G;if(k&&!y&&!B&&(A||(A=0),["between","notBetween"].includes(d)&&!R&&(R=0),!s||""===s))return ee(!0),i.push(null),{v:void 0};var z=td(V&&V.name),K=td($&&$.name),q=z===t&&"self"===f||!D,H=K===t&&"self"===f||!D;["isNotNull","isNull"].includes(d)||q||++vd,m&&++bd,B||k||"object"===typeof A||(A="'".concat(rd(A,D),"'"),R="'".concat(rd(R,D),"'")),S&&(B||(A=ge(w,A,_),R=ge(w,R,_)));var U=n?Ku:zu;if(["in","notIn"].includes(d)){var Y=c&&c.fieldValue&&c.fieldValue.map((function(e){return k?"".concat(e.targetName||e.fullName||e.name):"'".concat(e.targetName||e.fullName||e.name,"'")})).filter((function(e){return""!==e}));Y=we({jsonFieldName:T,parentCustomField:L,field:p,value:m?F?"?":":param".concat(bd):Y,values:C,targetName:v,operator:d,map_operators:a,rule:c}),i.push({condition:"".concat(T||"".concat(r,".").concat(s).concat(y?"":".".concat(v||"fullName"))," ").concat(T?"IN":a[d]," ").concat(q?D?T?Y:A:"(".concat(Y,")"):"?".concat(vd)),values:q?void 0:[[m?F?"?":":param".concat(bd):Y]]})}else if(["between","notBetween"].includes(d)){var J=q&&H?void 0:q?[m?F?"?":":param".concat(bd):R]:H?[m?F?"?":":param".concat(bd):A]:[m?F?"?":":param".concat(bd):A,m?F?"?":":param".concat(++bd):R],X=we({jsonFieldName:T,parentCustomField:L,field:p,value:null,values:s&&s.split(qu[W]),targetName:v,operator:d,map_operators:a,rule:c});if(S&&n)i.push({condition:"".concat(T?"".concat(T).concat(X?" IN ":""):"".concat(r,".").concat(s)).concat(X?"".concat(X," "):"").concat(v?".".concat(v," "):"").concat("notBetween"===d?"NOT BETWEEN":"BETWEEN"," ").concat(q?m?F?"?":":param".concat(bd):A:"?".concat(vd)," ").concat(U.and," ").concat(H?m?F?"?":":param".concat(++bd):R:"?".concat(++vd)).concat(X?")":""),values:J});else{if(X){var Q=s&&s.split(qu[W]);i.push({condition:"(".concat(T).concat(X?" IN ":"").concat(X||"").concat("notBetween"===d?" NOT(":""," self").concat(Q&&Q.length>1?".".concat(Q.slice(1).join(qu[W])):"").concat(v?".".concat(v):""," >= ").concat(q?m?F?"?":":param".concat(bd):A:"?".concat(vd)," ").concat(U.and," self").concat(Q&&Q.length>1?".".concat(Q.slice(1).join(qu[W])):"").concat(v?".".concat(v):""," <= ").concat(H?m?F?"?":":param".concat(++bd):R:"?".concat(++vd),")").concat(X?")":"").concat("notBetween"===d?")":""),values:J})}i.push({condition:"".concat("notBetween"===d?"NOT ":"","(").concat(T||"".concat(r,".").concat(s)," >= ").concat(q?m?F?"?":":param".concat(bd):A:"?".concat(vd)," ").concat(U.and," ").concat(T||"".concat(r,".").concat(s)," <= ").concat(H?m?F?"?":":param".concat(++bd):R:"?".concat(++vd),")"),values:J})}}else if(["isNotNull","isNull"].includes(d)){var Z,te=T&&np.includes(L?L.type:p.type),ne=s&&s.split("."),re=ne&&ne.length>1;te&&re&&(Z=c&&c.fieldValue&&c.fieldValue.map((function(e){return k?"".concat(e.targetName||e.fullName||e.name):"'".concat(e.targetName||e.fullName||e.name,"'")})).filter((function(e){return""!==e})),Z=we({jsonFieldName:T,parentCustomField:L,field:p,value:m?F?"?":":param".concat(bd):Z,values:C,targetName:v,operator:d,map_operators:a,rule:c})),i.push({condition:"".concat(T||"".concat(r,".").concat(s)," ").concat(te&&re?"IN ".concat(Z):a[d])})}else if(["isTrue","isFalse"].includes(d)){var ae="isTrue"===d;ae=we({jsonFieldName:T,parentCustomField:L,field:p,value:m?F?"?":":param".concat(bd):"".concat(ae),values:C,targetName:v,operator:d,map_operators:a,rule:c});var ie=je(c,C&&C[0]);i.push({condition:"".concat(T||"".concat(r,".").concat(s)," ").concat(T&&N||m?ie?"IN":"=":a[d]," ").concat(q?D?m?F?"?":":param".concat(bd):A:ae:"?".concat(vd)),values:q?void 0:[m?F?"?":":param".concat(bd):ae]})}else if(["contains","notContains"].includes(d)){var oe="object"===typeof A&&A?"'".concat(rd(A[p.targetName]||"",D),"'"):A;i.push({condition:"".concat(q?D?m?F?"?":":param".concat(bd):A:oe:"?".concat(vd)," ").concat(a[d]," ").concat(T||"".concat(r,".").concat(s)),values:q?void 0:[m?F?"?":":param".concat(bd):oe]})}else{var ce="object"===typeof A&&A?"'".concat(rd(A[p.targetName]||"",D),"'"):A;ce=we({jsonFieldName:T,parentCustomField:L,field:p,value:m?F?"?":":param".concat(bd):"".concat(ce),values:C,targetName:v,operator:d,map_operators:a,rule:c});var se=je(c,C&&C[0]);i.push({condition:"".concat(T||"".concat(r,".").concat(["many_to_one","json_many_to_one","one_to_one","json_one_to_one"].includes(w)&&!B?"".concat(s,".").concat(p.targetName||"fullName"):s)," ").concat(T&&N?se?"IN":"=":a[d]," ").concat(q?["like","notLike"].includes(d)&&(!T||T&&!se)?"CONCAT('%',".concat(m?F?"?":":param".concat(bd):A,",'%')"):D?T?ce:m?F?"?":":param".concat(bd):A:ce:["like","notLike"].includes(d)&&(!T||T&&!np.includes(d))?"CONCAT('%',?".concat(vd,",'%')"):"?".concat(vd)),values:q?void 0:[m?F?"?":":param".concat(bd):ce]})}},c=0;c<(e&&e.length);c++){var s=o(c);if("object"===typeof s)return s.v}return i}(a,t),u=s&&s.filter((function(e){return e}))||[],d=[];c&&c.length>0&&c.forEach((function(e){var n=Oe([e],t,!0)||{},r=n.condition,a=n.values,i=[].concat.apply([],a);d.push({condition:r,values:i&&i.length>0?i:void 0})}));var h=ed(C)?Ku:zu,f=u&&u.map((function(e){return e&&e.condition})),m=d&&(d.map((function(e){return e&&e.condition}))||[]).filter((function(e){return e})),b=d&&d.filter((function(e){return null!==e}));if(c.length>0){var v=m&&m.length>0;return{condition:"".concat(v?"(":"").concat(f?f.join(" "+h[o]+" "):""," ").concat(v?"".concat(h[o]," ").concat(m.join(" "+h[o]+" ")):"").concat(v?")":""),values:[].concat(Object(p.a)(u&&u.map((function(e){return e&&e.values})).filter((function(e){return e}))||[]),Object(p.a)(b&&b.map((function(e){return e&&e.values})).filter((function(e){return e}))||[]))}}return n&&u&&f&&0!==f.length?{condition:"(".concat(f.join(" "+h[o]+" "),")"),values:u&&u.map((function(e){return e&&e.values})).filter((function(e){return e}))}:{condition:f.join(" "+h[o]+" "),values:u&&u.map((function(e){return e&&e.values})).filter((function(e){return e}))}}function Ee(e,t,n){var r=e[0],a=r.rules,i=r.combinator,o=void 0===i?"and":i,c=r.children,s=(xe(a,t)||[]).filter((function(e){return""!==e})),l=[];c&&c.length>0&&c.forEach((function(e){var n=Ee([e],t,!0);n&&l.push(n)}));var u=ed(C)?Ku:zu;if(c.length>0&&s&&s.length>0){var p=l&&0!==l.length;return"".concat(p?"(":"").concat(s?s.join(" "+u[o]+" "):""," ").concat(p?" ".concat(u[o]," ").concat(l.join(" "+u[o]+" ")):"").concat(p?")":"")}return n&&s&&s.length>0?"("+s.join(" "+u[o]+" ")+")":s&&s.length>0?s.join(" "+u[o]+" "):void 0}function Ne(e){for(var t,n={},r=[],a=e&&e.map((function(e,t){return n[e.id]=t,Object(l.a)(Object(l.a)({},e),{},{children:[]})})),i=0;i<a.length;i+=1)(t=a[i]).parentId>=0?a[n[t.parentId]]&&a[n[t.parentId]].children.push(t):r.push(t);return r}var ke=i.a.useCallback((function(e,t){se(Object(Fl.b)((function(n){"function"===typeof e?(!n[t].value&&(n[t].value={}),e(n[t].value)):n[t].value=e})))}),[]),Se=function(){var e=Object(u.a)(fd().mark((function e(t,r){var a,i,o;return fd().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n&&n(t,r),T){e.next=3;break}return e.abrupt("return");case 3:return e.next=5,Pp(T,Object(l.a)(Object(l.a)({},Y||{}),{},(a={},Object(Bc.a)(a,M,t&&t.trim()),Object(Bc.a)(a,A,r?JSON.stringify(r):r),a)));case 5:i=window.top&&window.top.document&&window.top.document.getElementsByClassName("button-close"),(o=i&&i[i.length-1])&&o.click&&o.click();case 8:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}();function _e(e,t){var n,r=[],a=[],i=[];if(function(){for(var e=!0,t=[],n=0;n<(ce&&ce.length);n++){var r=ce[n].value||{},a=r.rules;if(!r.metaModals&&!I)return e;t.push(a)}for(var i=Wl()(t||[]),o=i&&i.map((function(e){return e.rules})),c=Wl()(o||[]),s=0;s<(c&&c.length);s++){var l=c&&c[s],u=l||{},p=u.fieldName,d=u.field,h=void 0===d?{}:d,f=u.operator,m=(h||{}).selectionList,b=h&&h.type&&h.type.toLowerCase(),v=["long","integer","decimal","boolean","button","menu-item","double"].includes(b),y=l,g=y.fieldValue,x=y.fieldValue2,j=y.isRelationalValue,w=y.isField,O=p;!v||m||j||(g||!1===g||(g=0),["between","notBetween"].includes(f)&&!x&&(x=0));var E=isNaN(g)?g:"".concat(g);if(!O){e=!1;break}if(zl()(E)&&!["isNull","isNotNull","isTrue","isFalse"].includes(f)){e=!1;break}if(""===f||m&&!g&&!["isNull","isNotNull","isTrue","isFalse"].includes(f)||v&&j&&!g||(!v&&!g||g&&Array.isArray(g)&&g.length<=0||(!v&&!x||x&&Array.isArray(x)&&x.length<=0)&&["between","notBetween"].includes(f))&&!["isNull","isNotNull","isTrue","isFalse"].includes(f)){if(F||"param"!==w){e=!1;break}e=!0}}return e}()){for(var o=0;o<ce.length;o++){var c=ce[o].value||{},s=c.rules,l=c.metaModals,u=l&&"dmnModel"===l.type?l.resultVariable:l&&l.name,d=l||{},m=d.fullName,b=d.type;n=h?u:ed(t)?"metaJsonModel"===b?u:m:u;var v="",y=Ne(s),g=ed(t)?Oe(y,td(u),void 0):Ee(y,td(u),void 0);if(a.push.apply(a,Object(p.a)(g&&((g.values||[]).filter((function(e){return Array.isArray(e)}))||[])||[])),!l&&!I)break;v+=ed(t)?g&&g.condition:g;var x={metaModalName:u,metaModalType:l&&l.type,rules:s};r.push(x),i.push("".concat(v))}var j=ed(C)?Ku:zu,O=(i.filter((function(e){return""!==e}))||[]).map((function(e){return i.length>1?"(".concat(e,")"):e})).join(" "+j[e]+" "),E=O;if(ed(t)){var N="";a&&a.forEach((function(e){e&&Array.isArray(e[0])&&e[0]?N+=", (".concat(e[0],")"):(e&&Array.isArray(e)&&e.length>0&&(e=e.join(", ")),N=N+", "+e)}));var k=!B||D,S=O?"".concat(k?"(":"").concat(B?"":"".concat(D?'"'.concat(n,'"'):"".concat(n),", ")).concat(D?'"'.concat(O,'"'):"".concat(O)).concat(a&&a.length>0?"".concat(N):"").concat(k?")":""):null,_=O?"return $ctx.createVariable($ctx.".concat(pe?"filterOne":"filter",'("').concat(n,'","').concat(O,'"').concat(a&&a.length>0?"".concat(N):"","))"):void 0;E=h?_:S}bd=0,vd=0,Se(E,E?{values:r,combinator:e}:null);var L=E&&"undefined"!==E&&0!==(null===r||void 0===r?void 0:r.length)?ed(t)?pe:me:null;f&&f({expression:E,value:r&&r.length>0?JSON.stringify(r):void 0,checked:L,combinator:e}),w&&w()}else ee(!0)}var Le=i.a.useCallback(Object(u.a)(fd().mark((function e(){var t,n,r,a,i,o;return fd().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(B&&ed(C)){e.next=2;break}return e.abrupt("return");case 2:return t=[],n=B.split(".")||[],r=n.length,a={criteria:[{fieldName:"name",operator:"=",value:r>1?n[r-1]:B}],operator:"and"},e.next=8,gp(a,r>1?"metaModel":"metaJsonModel");case 8:if(i=e.sent){e.next=11;break}return e.abrupt("return");case 11:o={metaModals:i&&i[0],rules:[{id:0,parentId:-1,combinator:"and",rules:[{}]}]},t.push({Component:pd,value:o}),ae(o),se(t);case 15:case"end":return e.stop()}}),e)}))),[B,C]),Ce=i.a.useCallback(function(){var e=Object(u.a)(fd().mark((function e(t){var n,r,a,i,o,c,s,l,u,p,d;return fd().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=(n=t||{}).values,a=n.combinator,i=[],r&&0!==r.length){e.next=6;break}return e.next=5,Le();case 5:return e.abrupt("return");case 6:o=0;case 7:if(!(o<r.length)){e.next=23;break}if(c=r[o],s=c.metaModalName,l=c.metaModalType,s||I){e.next=12;break}return e.abrupt("return");case 12:return u={criteria:[{fieldName:"name",operator:"=",value:s}],operator:"and"},e.next=15,gp(u,l);case 15:if((p=e.sent)||I){e.next=18;break}return e.abrupt("return");case 18:d={metaModals:p&&p[0],rules:c.rules},i.push({Component:pd,value:d});case 20:o++,e.next=7;break;case 23:se(i),q(a||"and");case 25:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),[I,Le,se,q]);return Object(a.useEffect)((function(){if(o&&Ce(o),m){var e=m(),t=e.checked,n=Object(gl.a)(e,hd);Ce(n),ed(C)?de(t):be(t)}}),[o,Ce,m,C]),Object(a.useEffect)((function(){function e(){return(e=Object(u.a)(fd().mark((function e(){var t,n;return fd().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(T&&P){e.next=4;break}return e.next=3,Le();case 3:return e.abrupt("return");case 4:return e.next=6,Lp(T,P);case 6:if(t=e.sent,J(t),t){e.next=12;break}return e.next=11,Le();case 11:return e.abrupt("return");case 12:n=t&&t[A],Ce(JSON.parse(n||"{}"));case 14:case"end":return e.stop()}}),e)})))).apply(this,arguments)}!function(){e.apply(this,arguments)}()}),[A,P,T,Le,Ce]),Object(r.jsxs)(v.a,{onClose:function(e,t){"backdropClick"!==t&&w()},"aria-labelledby":"simple-dialog-title",open:!0,classes:{paper:ve.dialogPaper},children:[Object(r.jsx)(y.a,{id:"simple-dialog-title",children:c}),Object(r.jsx)("div",{className:ve.root,children:Object(r.jsx)(Ml.a,{variant:"outlined",className:ve.paper,children:Object(r.jsxs)("div",{style:{width:"100%",height:"100%"},children:[h&&!ed(C)&&Object(r.jsx)(ql.a,{control:Object(r.jsx)(dd.a,{checked:me,onChange:function(e){return be(e.target.checked)},name:"generateWithId",className:ve.checkbox}),style:{color:"#0275d8"},label:nd("Generate with saved record")}),h&&ed(C)&&Object(r.jsx)(ql.a,{control:Object(r.jsx)(dd.a,{checked:pe,onChange:function(e){return de(e.target.checked)},name:"singleResult",className:ve.checkbox}),style:{color:"#0275d8"},label:nd("Single result")}),Object(r.jsxs)(Gu,{isBPMN:h,title:Object(r.jsx)(su,{className:ve.combinator,name:"expression",value:K,options:$u,onChange:q,disableUnderline:!0}),children:[Object(r.jsx)(fu,{title:ed(C)?"Add group":"Add Expression",Icon:Rl.a,onClick:function(){se(Object(Fl.b)((function(e){e.push({value:ed(C)?B&&re?re:{metaModals:ce&&ce[0]&&ce[0].value&&ce[0].value.metaModals,rules:[{id:0,parentId:-1,combinator:"and",rules:[{}]}]}:void 0})})))},disabled:!!ed(C)&&(!ce||!(ce[0]&&ce[0].value&&ce[0].value.metaModals||0===ce.length))}),Object(r.jsx)("div",{children:ce&&ce.map((function(e,t){var n=e.value;return Object(r.jsxs)("div",{className:ve.expressionContainer,children:[Object(r.jsx)(pd,{value:n,index:t,onChange:ke,element:Y&&R&&Y[R],type:C,queryModel:B,isCondition:F,isPackage:I,isParameterShow:G,defaultModel:O,fetchModels:E,isAllowButtons:k,isBPMN:h,isMapper:S}),Object(r.jsx)(b.a,{size:"small",onClick:function(){return function(e){se(Object(Fl.b)((function(t){t.splice(e,1)})))}(t)},children:Object(r.jsx)(Dl.a,{})})]},t)}))})]})]})})}),Object(r.jsxs)("div",{className:ve.actions,children:[Object(r.jsx)(fu,{title:"Save",className:ve.save,onClick:function(){return _e(K,C)}}),Object(r.jsx)(fu,{title:"Cancel",className:ve.save,onClick:w}),s&&Object(r.jsx)(i.a.Fragment,{children:s})]}),Object(r.jsxs)(v.a,{open:Z,onClose:function(){return ee(!1)},"aria-labelledby":"alert-dialog-title","aria-describedby":"alert-dialog-description",classes:{paper:ve.dialog},children:[Object(r.jsx)(y.a,{id:"alert-dialog-title",children:"Error"}),Object(r.jsx)(g.a,{children:Object(r.jsx)(x.a,{id:"alert-dialog-description",children:"Add all values"})}),Object(r.jsx)(j.a,{children:Object(r.jsx)(fu,{title:"Ok",onClick:function(){return ee(!1)}})})]})]})},gd=Object(Tc.a)((function(e){return{expressionBuilder:{display:"flex",alignItems:"center",justifyContent:"space-between"},newIcon:{color:"#58B423",marginLeft:5},new:{cursor:"pointer",marginTop:18.6,display:"flex"},textbox:{width:"100%",color:"white"},dialog:{minWidth:300},title:{fontSize:18,fontWeight:"bold"},save:{margin:e.spacing(1),backgroundColor:"#0275d8",borderColor:"#0267bf",textTransform:"none",color:"white","&:hover":{backgroundColor:"#025aa5",borderColor:"#014682",color:"white"}}}}));function xd(e){var t,n=e.element,o=e.bpmnModeler,c=e.entry,s=Object(a.useState)(!1),u=Object(d.a)(s,2),p=u[0],h=u[1],b=Object(a.useState)(!1),w=Object(d.a)(b,2),O=w[0],E=w[1],N=Object(a.useState)(null),k=Object(d.a)(N,2),S=k[0],_=k[1],L=Object(a.useState)(null),C=Object(d.a)(L,2),P=C[0],T=C[1],M=c.name,A=c.label,R=Object(a.useState)(!!(null===n||void 0===n||null===(t=n.businessObject[M])||void 0===t?void 0:t.value)),B=Object(d.a)(R,2),D=B[0],F=B[1],I=gd();return Object(a.useEffect)((function(){var e;(null===(e=n.businessObject[M])||void 0===e?void 0:e.value)?F(!0):F(!1)}),[n.businessObject,M,O]),Object(r.jsx)(i.a.Fragment,{children:Object(r.jsxs)("div",{className:I.expressionBuilder,children:[Object(r.jsx)(ol,{element:n,className:I.textbox,rows:1,readOnly:D,bpmnModeler:o,entry:{id:"script",label:Qs(A),modelProperty:"script",name:M}}),Object(r.jsxs)("div",{className:I.new,children:[Object(r.jsx)(m.a,{title:"Enable","aria-label":"enable",children:Object(r.jsx)(Mc.a,{className:I.newIcon,onClick:function(){n.businessObject[M].value&&(T("Script can't be managed using builder once changed manually."),_("Warning"),h(!0))}})}),Object(r.jsx)(Ac.a,{className:I.newIcon,onClick:function(){E(!0)}}),p&&Object(r.jsxs)(v.a,{open:p,onClose:function(e,t){"backdropClick"!==t&&h(!1)},"aria-labelledby":"alert-dialog-title","aria-describedby":"alert-dialog-description",classes:{paper:I.dialog},children:[Object(r.jsx)(y.a,{id:"alert-dialog-title",children:Object(r.jsx)("label",{className:I.title,children:Qs(S)})}),Object(r.jsx)(g.a,{children:Object(r.jsx)(x.a,{id:"alert-dialog-description",children:Qs(P)})}),Object(r.jsxs)(j.a,{children:[Object(r.jsx)(f.a,{onClick:function(){h(!1),T(null),_(null),F(!1),n.businessObject&&(n.businessObject.scriptValue=void 0)},color:"primary",className:I.save,autoFocus:!0,children:"Ok"}),Object(r.jsx)(f.a,{onClick:function(){h(!1)},color:"primary",className:I.save,children:"Cancel"})]})]})]}),O&&Object(r.jsx)(yd,{setProperty:function(e){null!=e.value&&(n.businessObject[M]=Object(l.a)({},e))},getExpression:function(){var e,t,r;if(void 0!==(null===(e=n.businessObject[M])||void 0===e?void 0:e.value))try{r=JSON.parse(n.businessObject[M].value)}catch(a){}return{values:r,combinator:null===(t=n.businessObject[M])||void 0===t?void 0:t.combinator}},open:O,close:function(){return E(!1)},fetchModels:Os})]})})}function jd(e,t){t.invoke(Kn,this),this.getContextPadEntries=function(e){return{}}}L()(jd,Kn),jd.$inject=["config.contextPad","injector","eventBus","contextPad","modeling","elementFactory","connect","create","popupMenu","canvas","rules","translate"];var wd=1500;function Od(e){return e&&/^custom:/.test(e.type)}function Ed(e){pi.a.call(this,e)}L()(Ed,pi.a),Ed.$inject=["eventBus"],Ed.prototype.init=function(){function e(e,t){if(Od(e))return He(t,"bpmn:Process-action")||He(t,"bpmn:Participant")||He(t,"bpmn:Collaboration")}function t(e,t){if(Od(e)||Od(t))return Od(e)?!!He(t,"bpmn:Task")&&{type:"custom:connection"}:Od(t)?!!He(e,"bpmn:Task")&&{type:"custom:connection"}:void 0}this.addRule("elements.move",wd,(function(t){var n,r=t.target,a=t.shapes;return Object(P.y)(a,(function(t,a){return void 0===n&&(n=Od(a)),n===Od(a)&&!1!==t&&e(a,r)}),void 0)})),this.addRule("shape.create",wd,(function(t){var n=t.target;return e(t.shape,n)})),this.addRule("shape.resize",wd,(function(e){if(Od(e.shape))return!1})),this.addRule("connection.create",wd,(function(e){return t(e.source,e.target)})),this.addRule("connection.reconnectStart",wd,(function(e){var n=e.connection;return t(e.hover||e.source,n.target)})),this.addRule("connection.reconnectEnd",wd,(function(e){var n=e.connection;return t(n.source,e.hover||e.target)}))};var Nd={__init__:["contextPadProvider","customRules","paletteProvider"],contextPadProvider:["type",jd],customRules:["type",Ed]};function kd(e,t,n,r,a){t.invoke(Kn,this),this.getContextPadEntries=function(e){var t=this._modeling,n=this._elementFactory,r=this._autoPlace,a=this._create,i=e.businessObject;function o(n){t.removeElements([e])}var c={};if("label"===e.type)return c;return He(i,"bpmn:FlowNode")&&(He(i,"bpmn:EndEvent")||(Object(P.a)(c,{"append.append-mapper":function(e,t,i,o){function c(t,r){var i=n.createShape(Object(P.a)({type:e},o));a.start(t,i,{source:r})}return"string"!==typeof i&&(o=i,i="Append "+e.replace(/^bpmn:/,"")),{group:"model",className:t,title:i,action:{dragstart:c,click:r?function(t,a){var i=n.createShape(Object(P.a)({type:e},o));r.append(a,i)}:c}}}("bpmn:Mapper","bpmn-icon-task","Append Mapper")}),Object(P.a)(c,{delete:{group:"edit",className:"bpmn-icon-trash",title:"Remove",action:{click:o,dragstart:o}}}))),c}}L()(kd,Kn),kd.$inject=["config.contextPad","injector","eventBus","contextPad","modeling","elementFactory","connect","create","popupMenu","canvas","rules","translate"];var Sd=1500;function _d(e){return e&&/^custom:/.test(e.type)}function Ld(e){pi.a.call(this,e)}L()(Ld,pi.a),Ld.$inject=["eventBus"],Ld.prototype.init=function(){function e(e,t){if(_d(e))return He(t,"bpmn:Process-action")||He(t,"bpmn:Participant")||He(t,"bpmn:Collaboration")}function t(e,t){if(_d(e)||_d(t))return _d(e)?!!He(t,"bpmn:Task")&&{type:"custom:connection"}:_d(t)?!!He(e,"bpmn:Task")&&{type:"custom:connection"}:void 0}this.addRule("elements.move",Sd,(function(t){var n,r=t.target,a=t.shapes;return Object(P.y)(a,(function(t,a){return void 0===n&&(n=_d(a)),n===_d(a)&&!1!==t&&e(a,r)}),void 0)})),this.addRule("shape.create",Sd,(function(t){var n=t.target;return e(t.shape,n)})),this.addRule("shape.resize",Sd,(function(e){if(_d(e.shape))return!1})),this.addRule("connection.create",Sd,(function(e){return t(e.source,e.target)})),this.addRule("connection.reconnectStart",Sd,(function(e){var n=e.connection;return t(e.hover||e.source,n.target)})),this.addRule("connection.reconnectEnd",Sd,(function(e){var n=e.connection;return t(n.source,e.hover||e.target)}))};var Cd={__init__:["contextPadProvider","customRules","paletteProvider"],contextPadProvider:["type",kd],customRules:["type",Ld]};function Pd(e){return e&&e.businessObject||e}function Td(e,t){var n=Pd(e);return n&&"function"===typeof n.$instanceOf&&n.$instanceOf(t)}var Md=Object(Tc.a)({groupLabel:{fontWeight:"bolder",display:"inline-block",verticalAlign:"middle",color:"#666",fontSize:"120%",margin:"10px 0px",transition:"margin 0.218s linear",fontStyle:"italic"},divider:{marginTop:15,borderTop:"1px dotted #ccc"}}),Ad="bpmn:Parameter";function Rd(e,t){return e&&function(e,t){var n=function(e){return e.get("values")}(e);if("undefined"!==typeof n){var r=n.filter((function(e){return Td(e,t)}));if(r.length)return r}}(e,t)||[]}function Bd(e){var t,n=e.element,o=e.index,c=e.label,s=e.bpmnFactory,l=Object(a.useState)(null),u=Object(d.a)(l,2),p=u[0],h=u[1],f=Object(a.useState)(null),m=Object(d.a)(f,2),b=m[0],v=m[1],y=Md(),g=i.a.useCallback((function(){var e=Pd(n);return Td(n,"bpmn:Participant")&&(e=e.get("processRef")),e}),[n]),x=i.a.useCallback((function(){var e=Rd(g(),"bpmn:Parameter");return e[p]||e&&e[0]}),[g,p]),j=function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=Pd(e),r=Rd(n,Ad),a=r&&r.map((function(e,t){return{id:t,text:e.id}}));v(a),t&&a.length>0&&h(a[0])};return Object(a.useEffect)((function(){j(n,!0)}),[n]),Object(r.jsxs)("div",{children:[Object(r.jsx)(i.a.Fragment,{children:o>0&&Object(r.jsx)("div",{className:y.divider})}),Object(r.jsx)("div",{className:y.groupLabel,children:c}),!!(Td(n,"bpmn:FlowElement")||Td(n,"bpmn:Process")||Td(n,"bpmn:Participant"))&&!!g()&&Object(r.jsx)(Tl,{element:n,options:b,entry:{id:"parameter",label:Qs("Parameter"),modelProperty:"name",idGeneration:"false",reference:"processRef",createExtensionElement:function(e,t){return function(n,r,a){var i=(new C.a).next(),o="parameter_".concat(i),c=function(e,t,n,r){var a=r.create(e,t);return a.$parent=n,a}(t,{id:o},r,s);return Pd(e).values?e.businessObject.values.push(c):e.businessObject.values=[c],c}}(n,Ad),removeExtensionElement:(t=Ad,function(e){var r,a=Pd(n),i=a&&a.values;i&&i.forEach((function(n,i){n.$type===t&&(r>-1?r++:r=0),r!==Number(e)||a.values.splice(i,1)})),j(n),i&&!i.find((function(e){return e.$type===t}))?t===Ad&&h(null):h(null)}),onSelectionChange:function(e){h(e)},setOptionLabelValue:function(e){var t=g();return function(n){var r=Rd(t,e)[n];return r?r.id:""}}(Ad)}}),(p||0===p)&&Object(r.jsxs)(i.a.Fragment,{children:[Object(r.jsx)(ll,{element:n,canRemove:!0,entry:{id:"target",label:Qs("Target"),modelProperty:"target",get:function(){var e=x();if(e)return{target:e.target}},set:function(e,t){var n=x();n&&(n.target=t.target)}}}),Object(r.jsx)(ll,{element:n,canRemove:!0,entry:{id:"expression",label:Qs("Expression"),modelProperty:"expression",get:function(){var e=x();if(e)return{expression:e.expression}},set:function(e,t){var n=x();n&&(n.expression=t.expression)}}})]})]})}var Dd=[{type:"bpmn:Lane",properties:[{name:"name",label:"Name",widget:"textField"},{name:"expression",label:"Expression",widget:"expression"}]},{type:"bpmn:Participant",properties:[{name:"name",label:"Name",widget:"textField"},{name:"url",label:"URL",widget:"textField"},{name:"payLoadTypeSelect",label:"Type payload",widget:"selectBox",emptyParameter:!0,selectOptions:[{name:"Form",value:"form"},{name:"Json",value:"json"},{name:"Xml",value:"xml"},{name:"Text",value:"text"},{name:"File Path",value:"file"},{name:"File Link",value:"file-link"},{name:"File Text",value:"file-text"},{name:"Stream",value:"stream"}]},{name:"type",label:"Type",widget:"selectBox",emptyParameter:!0,selectOptions:[{name:"GET",default:"GET",value:"GET"},{name:"POST",value:"POST"},{name:"PUT",value:"PUT"},{name:"DELETE",value:"DELETE"},{name:"PATCH",value:"PATCH"}]},{name:"callIf",label:"Call if",widget:"scriptBox"},{name:"repeatIf",label:"Repeat if",widget:"scriptBox"}]}],Fd=n(591),Id=n(592),Vd=n(593),Gd=n(594),Wd=n(587),$d=(n(472),n(473),n(474),n(11)),zd=n(479),Kd=n(481),qd=n(476),Hd=n(478),Ud=n(480),Yd=n(477),Jd=n(379),Xd=(n(475),Object(Tc.a)({table:{height:"199px !important",borderRadius:"0px !important","& .MuiTableCell-root":{padding:"10px",paddingLeft:"40px"}},save:{backgroundColor:"#0275d8",borderColor:"#0267bf",margin:12,color:"white","&:hover":{backgroundColor:"#025aa5",borderColor:"#014682",color:"white"}},console:{margin:0,padding:10,fontSize:"1.1em"},box:{"& > div > div > div":{borderBottom:"1px solid black"}},paper:{margin:10,width:"calc(100% - 16px)",height:"calc(100% - 50px)",overflow:"scroll",backgroundColor:"black"},dialogTitle:{color:"#0274d7",paddingLeft:0,paddingRight:3,display:"flex",flexDirection:"row",fontSize:15,alignItems:"center",width:"20%","& #simple-dialog-title":{cursor:"pointer",width:"auto"},"& .MuiTypography-h6":{fontSize:"1em"}},dialogPaper:{maxWidth:"50%",height:"60%",resize:"both",width:"50%"},root:{display:"flex",flexDirection:"column",alignItems:"flex-start",height:"100%",overflow:"hidden"},tableBody:{minWidth:"100%"}}));function Qd(e){var t=e.showJson,n=e.models,a=e.type,i=e.setShowJson,o=Xd();return Object(r.jsx)(r.Fragment,{children:Object(r.jsxs)(v.a,{onClose:function(e,t){},onEntered:function(){var e={};n.forEach((function(t){var n;null===(n=t[a])||void 0===n||n.forEach((function(n){e[n.wsKey]=Us(n,t.model)}))})),null!=document.getElementById("result")&&(document.getElementById("result").innerHTML=""),document.getElementById("result").innerHTML=Jd.a.toHtml(e,{linkUrls:!0,quoteKeys:!0})},"aria-labelledby":"simple-dialog-title",open:t,classes:{paper:o.dialogPaper},children:[Object(r.jsx)(y.a,{id:"simple-dialog-title",children:"Payloads json"}),Object(r.jsxs)("div",{className:o.root,children:[Object(r.jsx)(Ml.a,{variant:"outlined",className:o.paper,children:Object(r.jsx)("pre",{id:"result",className:el()(["json-container",o.console])})}),Object(r.jsx)("div",{children:Object(r.jsx)(f.a,{className:o.save,onClick:function(){i(!1)},children:"OK"})})]})]})})}var Zd=n(133),eh=n(132),th=n(134),nh=n(338),rh=n(339),ah=n(131),ih=n(130),oh=n(340),ch=n(341),sh="#FFE0B2",lh=[{id:1,title:"key"},{id:2,title:"value"}],uh=[{name:"Accept"},{name:"Accept-Charset"},{name:"Accept-Encoding"},{name:"Accept-Language"},{name:"Authorization"},{name:"Content-MD5"},{name:"Content-Length"},{name:"Content-Type"},{name:"Cookie"},{name:"Keep-Alive"},{name:"Connection"},{name:"  Origin"}],ph=[{name:"application/atom+xml"},{name:"application/ecmascript"},{name:"application/json"},{name:"application/javascript"},{name:"application/pdf"},{name:"application/xhtml+xml"},{name:"application/xml"},{name:"application/zip"},{name:"application/x-www-form-urlencoded"},{name:"audio/basic"},{name:"image/jpeg"},{name:"image/png"},{name:"image/svg+xml"},{name:"text/html"},{name:"text/plain"},{name:"multipart/encrypted"},{name:"text/xml"},{name:"image/gif"}],dh={"bpmn:Task":"#FF9800","bpmn:UserTask":"#3FBDD6","bpmn:SendTask":"#F79000","bpmn:ReceiveTask":"#F8B200","bpmn:ManualTask":"#3F97F6","bpmn:BusinessRuleTask":"#E76092","bpmn:ServiceTask":"#3EBFA5","bpmn:ScriptTask":"#FF9E0F","bpmn:CallActivity":"#FBA729","bpmn:SubProcess":"#6097fc","bpmn:AdHocSubProcess":"#6097fc","bpmn:Transaction":"#6097fc","bpmn:SequenceFlow":"#8095B3","bpmn:StartEvent":"#55c041","bpmn:EndEvent":"#ff7043","bpmn:Gateway":"#f9c000","bpmn:IntermediateThrowEvent":"#ff9800","bpmn:IntermediateCatchEvent":"#ff9800","bpmn:Participant":"#c8c8c8","bpmn:Lane":"#c8c8c8","bpmn:Group":"#c8c8c8","bpmn:Association":"#8095B3","bpmn:TextAnnotation":"#A9B1BD","bpmn:BoundaryEvent":"#ff9800","bpmn:DataObjectReference":"#a80ca8","bpmn:DataStoreReference":"#e53935","bpmn:DataOutputAssociation":"#8095B3"},hh=(Zd.a[600],eh.a[600],th.a[600],nh.a[600],rh.a[600],ah.a[600],ih.a[600],oh.a[600],ch.a[600],Zd.a[700],eh.a[700],th.a[700],nh.a[700],rh.a[700],ah.a[700],ih.a[700],oh.a[700],ch.a[700],Zd.a[800],eh.a[800],th.a[800],nh.a[800],ah.a[800],rh.a[800],ih.a[800],oh.a[800],ch.a[800],Zd.a[900],eh.a[900],th.a[900],nh.a[900],rh.a[900],ah.a[900],ih.a[900],oh.a[900],ch.a[900],Zd.a[500],eh.a[500],th.a[500],nh.a[500],rh.a[500],ah.a[500],ih.a[500],oh.a[500],ch.a[500],Object($d.a)((function(e){return{head:{backgroundColor:"#A3A3A3",color:e.palette.common.white,fontSize:12,fontWeight:"bold"},body:{fontSize:10}}}))(qd.a)),fh=Object($d.a)((function(e){return{root:{"&:nth-of-type(odd)":{backgroundColor:e.palette.action.hover}}}}))(Yd.a),mh=Object(Tc.a)({table:{height:"199px !important",borderRadius:"0px !important","& .MuiTableCell-root":{padding:"10px",paddingLeft:"40px"}},save:{backgroundColor:"#0275d8",borderColor:"#0267bf",color:"white","&:hover":{backgroundColor:"#025aa5",borderColor:"#014682",color:"white"}},paper:{margin:10,width:"calc(100% - 16px)",display:"flex",height:"calc(100% - 50px)",overflow:"hidden"},dialogTitle:{color:"#0274d7",paddingLeft:0,paddingRight:3,display:"flex",flexDirection:"row",fontSize:15,alignItems:"center",width:"20%","& #simple-dialog-title":{cursor:"pointer",width:"auto"},"& .MuiTypography-h6":{fontSize:"1em"}},dialogPaper:{maxWidth:"50%",maxHeight:"40%",resize:"both",width:"50%",height:"40%"},root:{display:"flex",flexDirection:"column",alignItems:"flex-start",height:"100%",overflow:"hidden"},tableBody:{minWidth:"100%"}});function bh(e){var t=e.type,n=Object(s.c)((function(e){return e.requestReducer.modelParameters})),i=Object(s.c)((function(e){return e.payloadReducer.modelPayloads})),o=Object(s.c)((function(e){return e.headerReducer.headers})),c=Object(a.useState)([]),l=Object(d.a)(c,2),u=l[0],p=l[1],h=Object(a.useState)(!1),m=Object(d.a)(h,2),b=m[0],v=m[1],y=mh();return Object(a.useEffect)((function(){"parameters"===t?p(n):"payloads"===t?p(i):"headers"===t&&p(o)}),[o,n,i,t]),Object(r.jsxs)(r.Fragment,{children:[0!==(null===u||void 0===u?void 0:u.length)&&Object(r.jsx)(Hd.a,{className:y.table,component:Ml.a,children:Object(r.jsxs)(zd.a,{"aria-label":"customized table",children:[Object(r.jsx)(Ud.a,{children:Object(r.jsx)(Yd.a,{children:null===lh||void 0===lh?void 0:lh.map((function(e,n){return Object(r.jsx)(hh,{width:"50%",children:Object(r.jsxs)("div",{style:{display:"flex",alignItems:"center"},children:[Object(r.jsx)("span",{children:e.title}),1===n&&"headers"!==t&&Object(r.jsx)(f.a,{className:y.save,onClick:function(){return v(!0)},style:{marginLeft:"auto"},children:"Json"})]})},n)}))})}),Object(r.jsx)(Kd.a,{className:y.tableBody,children:"headers"!==t?"payloads"===t?null===u||void 0===u?void 0:u.map((function(e){var n;return null===(n=e[t])||void 0===n?void 0:n.map((function(t){return Object(r.jsxs)(fh,{children:[Object(r.jsx)(hh,{component:"th",scope:"row",children:t.wsKey}),Object(r.jsx)(hh,{children:JSON.stringify(Us(t,e.model))})]},t.id)}))})):null===u||void 0===u?void 0:u.map((function(e){var n;return null===(n=e[t])||void 0===n?void 0:n.map((function(t){var n,a;return Object(r.jsxs)(fh,{children:[Object(r.jsx)(hh,{component:"th",scope:"row",children:null===t||void 0===t?void 0:t.wsKey}),Object(r.jsx)(hh,{children:zs(t.transformations,e.model,(null===(n=t.wsValue)||void 0===n?void 0:n.name)?null===(a=t.wsValue)||void 0===a?void 0:a.name:t.wsValue)})]},null===t||void 0===t?void 0:t.id)}))})):null===o||void 0===o?void 0:o.map((function(e){return Object(r.jsxs)(fh,{children:[Object(r.jsx)(hh,{component:"th",scope:"row",children:e.wsKey}),Object(r.jsx)(hh,{children:e.wsValue})]},e.id)}))})]})}),b&&Object(r.jsx)(Qd,{type:t,models:u,showJson:b,setShowJson:v})]})}var vh=Object(nl.a)({root:{display:"flex",alignItems:"center",flexDirection:"column",marginTop:5},cercle:{width:12,height:12,borderRadius:50,border:"1px solid #0274d7"},line:{marginTop:3,width:3,height:"95%",backgroundColor:"#0274d7"}});function yh(e){var t=e.className,n=vh();return Object(r.jsxs)("div",{className:el()(n.root,t),children:[Object(r.jsx)("div",{className:n.cercle}),Object(r.jsx)("div",{className:n.line})]})}var gh=n(586),xh=n(585),jh=Object(nl.a)({filter:{display:"flex",flexDirection:"row",flexWrap:"wrap",alignItems:"center"},fieldSelect:{width:"25%"},param:{width:"70%",marginRight:"2%",justifyContent:"center","& .MuiInputBase-input":{padding:0}},delete:{color:"#0274d7",fontSize:25,marginTop:"auto"},icon:{color:"#0274d7",marginRight:"2%",marginLeft:"2%",marginTop:"auto",fontSize:"1.5em"},dialogTitle:{color:"#0274d7",paddingLeft:0,paddingRight:3,paddingTop:0,paddingBottom:0,display:"flex",marginTop:"auto",flexDirection:"row",alignItems:"center","& #simple-dialog-title":{cursor:"pointer",padding:0}},dialogPaper:{maxWidth:"25%",maxHeight:"35%",resize:"both",width:"50%",height:"40%"},root:{display:"flex",flexDirection:"column",alignItems:"flex-start",height:"100%",overflow:"hidden"},paper:{margin:10,width:"calc(100% - 16px)",display:"flex",height:"calc(100% - 50px)",overflow:"hidden"},baseModelParams:{display:"flex",flexDirection:"row",justifyContent:"space-between",width:"100%"},addBaseModelParams:{display:"flex",flexDirection:"column",height:"100%",width:"100%",margin:10},save:{margin:10,backgroundColor:"#0275d8",borderColor:"#0267bf",color:"white","&:hover":{backgroundColor:"#025aa5",borderColor:"#014682",color:"white"}},scrollDiv:{display:"flex",flexDirection:"column"}});function wh(e){var t=e.id,n=e.multiArg,i=e.parametersTrans,o=e.open,c=e.onClose,s=e.handleChange,u=jh(),h=Object(a.useState)(),m=Object(d.a)(h,2),b=m[0],g=m[1];Object(a.useEffect)((function(){g(i)}),[i]);var x=function(e,t){switch(null===e||void 0===e?void 0:e.type){case"Decimal":return Object(r.jsx)(ml.a,{placeholder:null===e||void 0===e?void 0:e.name,value:b[t].value,type:null===e||void 0===e?void 0:e.type,className:u.param,onChange:function(e){Object.assign([],Object(p.a)(b))[t].value=e.target.value}});default:return Object(r.jsx)(ml.a,{placeholder:null===e||void 0===e?void 0:e.name,value:b[t].value,type:null===e||void 0===e?void 0:e.type,className:u.param,onChange:function(e){var n=null,r=Object.assign([],Object(p.a)(b));(n=Object(l.a)({},r[t])).value=e.target.value,r[t]=n,g(r)}})}};return Object(r.jsxs)(v.a,{onClose:function(e,t){"backdropClick"!==t&&c()},"aria-labelledby":"simple-dialog-title",open:o,classes:{paper:u.dialogPaper},children:[Object(r.jsxs)("div",{style:{display:"flex",flexDirection:"row"},children:[Object(r.jsx)(y.a,{id:"simple-dialog-title",children:"Parameters"}),n&&Object(r.jsx)(y.a,{id:"simple-dialog-title",style:{marginLeft:"auto",color:"#0274d7",cursor:"pointer"},onClick:function(){return g([].concat(Object(p.a)(b),[{value:null,name:null}]))},children:"Add parameter"})]}),Object(r.jsxs)("div",{className:u.root,children:[Object(r.jsx)(Ml.a,{variant:"outlined",className:u.paper,children:Object(r.jsx)("div",{className:u.baseModelParams,children:Object(r.jsx)("div",{className:u.addBaseModelParams,children:Object(r.jsx)("div",{className:u.scrollDiv,children:null===b||void 0===b?void 0:b.map((function(e,t){return Object(r.jsxs)("div",{className:u.baseModelParams,children:[Object(r.jsxs)("p",{style:{fontSize:14,width:"30%"},children:["Parameter ",t+1," : ",e.isOptional?"(optional)":""]}),x(e,t)]},t)}))})})})}),Object(r.jsxs)("div",{children:[Object(r.jsx)(f.a,{className:u.save,onClick:function(){s(b,t),c()},children:"OK"}),Object(r.jsx)(f.a,{className:u.save,style:{textTransform:"none"},onClick:c,children:"Cancel"})]})]})]})}function Oh(){Oh=function(){return e};var e={},t=Object.prototype,n=t.hasOwnProperty,r=Object.defineProperty||function(e,t,n){e[t]=n.value},a="function"==typeof Symbol?Symbol:{},i=a.iterator||"@@iterator",o=a.asyncIterator||"@@asyncIterator",c=a.toStringTag||"@@toStringTag";function s(e,t,n){return Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{s({},"")}catch(_){s=function(e,t,n){return e[t]=n}}function l(e,t,n,a){var i=t&&t.prototype instanceof d?t:d,o=Object.create(i.prototype),c=new N(a||[]);return r(o,"_invoke",{value:j(e,n,c)}),o}function u(e,t,n){try{return{type:"normal",arg:e.call(t,n)}}catch(_){return{type:"throw",arg:_}}}e.wrap=l;var p={};function d(){}function h(){}function f(){}var m={};s(m,i,(function(){return this}));var b=Object.getPrototypeOf,v=b&&b(b(k([])));v&&v!==t&&n.call(v,i)&&(m=v);var y=f.prototype=d.prototype=Object.create(m);function g(e){["next","throw","return"].forEach((function(t){s(e,t,(function(e){return this._invoke(t,e)}))}))}function x(e,t){function a(r,i,o,c){var s=u(e[r],e,i);if("throw"!==s.type){var l=s.arg,p=l.value;return p&&"object"==typeof p&&n.call(p,"__await")?t.resolve(p.__await).then((function(e){a("next",e,o,c)}),(function(e){a("throw",e,o,c)})):t.resolve(p).then((function(e){l.value=e,o(l)}),(function(e){return a("throw",e,o,c)}))}c(s.arg)}var i;r(this,"_invoke",{value:function(e,n){function r(){return new t((function(t,r){a(e,n,t,r)}))}return i=i?i.then(r,r):r()}})}function j(e,t,n){var r="suspendedStart";return function(a,i){if("executing"===r)throw new Error("Generator is already running");if("completed"===r){if("throw"===a)throw i;return S()}for(n.method=a,n.arg=i;;){var o=n.delegate;if(o){var c=w(o,n);if(c){if(c===p)continue;return c}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if("suspendedStart"===r)throw r="completed",n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);r="executing";var s=u(e,t,n);if("normal"===s.type){if(r=n.done?"completed":"suspendedYield",s.arg===p)continue;return{value:s.arg,done:n.done}}"throw"===s.type&&(r="completed",n.method="throw",n.arg=s.arg)}}}function w(e,t){var n=e.iterator[t.method];if(void 0===n){if(t.delegate=null,"throw"===t.method){if(e.iterator.return&&(t.method="return",t.arg=void 0,w(e,t),"throw"===t.method))return p;t.method="throw",t.arg=new TypeError("The iterator does not provide a 'throw' method")}return p}var r=u(n,e.iterator,t.arg);if("throw"===r.type)return t.method="throw",t.arg=r.arg,t.delegate=null,p;var a=r.arg;return a?a.done?(t[e.resultName]=a.value,t.next=e.nextLoc,"return"!==t.method&&(t.method="next",t.arg=void 0),t.delegate=null,p):a:(t.method="throw",t.arg=new TypeError("iterator result is not an object"),t.delegate=null,p)}function O(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function E(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function N(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(O,this),this.reset(!0)}function k(e){if(e){var t=e[i];if(t)return t.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var r=-1,a=function t(){for(;++r<e.length;)if(n.call(e,r))return t.value=e[r],t.done=!1,t;return t.value=void 0,t.done=!0,t};return a.next=a}}return{next:S}}function S(){return{value:void 0,done:!0}}return h.prototype=f,r(y,"constructor",{value:f,configurable:!0}),r(f,"constructor",{value:h,configurable:!0}),h.displayName=s(f,c,"GeneratorFunction"),e.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===h||"GeneratorFunction"===(t.displayName||t.name))},e.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,f):(e.__proto__=f,s(e,c,"GeneratorFunction")),e.prototype=Object.create(y),e},e.awrap=function(e){return{__await:e}},g(x.prototype),s(x.prototype,o,(function(){return this})),e.AsyncIterator=x,e.async=function(t,n,r,a,i){void 0===i&&(i=Promise);var o=new x(l(t,n,r,a),i);return e.isGeneratorFunction(n)?o:o.next().then((function(e){return e.done?e.value:o.next()}))},g(y),s(y,c,"Generator"),s(y,i,(function(){return this})),s(y,"toString",(function(){return"[object Generator]"})),e.keys=function(e){var t=Object(e),n=[];for(var r in t)n.push(r);return n.reverse(),function e(){for(;n.length;){var r=n.pop();if(r in t)return e.value=r,e.done=!1,e}return e.done=!0,e}},e.values=k,N.prototype={constructor:N,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(E),!e)for(var t in this)"t"===t.charAt(0)&&n.call(this,t)&&!isNaN(+t.slice(1))&&(this[t]=void 0)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var t=this;function r(n,r){return o.type="throw",o.arg=e,t.next=n,r&&(t.method="next",t.arg=void 0),!!r}for(var a=this.tryEntries.length-1;a>=0;--a){var i=this.tryEntries[a],o=i.completion;if("root"===i.tryLoc)return r("end");if(i.tryLoc<=this.prev){var c=n.call(i,"catchLoc"),s=n.call(i,"finallyLoc");if(c&&s){if(this.prev<i.catchLoc)return r(i.catchLoc,!0);if(this.prev<i.finallyLoc)return r(i.finallyLoc)}else if(c){if(this.prev<i.catchLoc)return r(i.catchLoc,!0)}else{if(!s)throw new Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return r(i.finallyLoc)}}}},abrupt:function(e,t){for(var r=this.tryEntries.length-1;r>=0;--r){var a=this.tryEntries[r];if(a.tryLoc<=this.prev&&n.call(a,"finallyLoc")&&this.prev<a.finallyLoc){var i=a;break}}i&&("break"===e||"continue"===e)&&i.tryLoc<=t&&t<=i.finallyLoc&&(i=null);var o=i?i.completion:{};return o.type=e,o.arg=t,i?(this.method="next",this.next=i.finallyLoc,p):this.complete(o)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),p},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.finallyLoc===e)return this.complete(n.completion,n.afterLoc),E(n),p}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.tryLoc===e){var r=n.completion;if("throw"===r.type){var a=r.arg;E(n)}return a}}throw new Error("illegal catch attempt")},delegateYield:function(e,t,n){return this.delegate={iterator:k(e),resultName:t,nextLoc:n},"next"===this.method&&(this.arg=void 0),p}},e}var Eh=Object(nl.a)({filter:{display:"flex",flexDirection:"row",flexWrap:"wrap",alignItems:"center"},fieldSelect:{width:"25%"},param:{width:"70%",marginRight:"2%",justifyContent:"center","& .MuiInputBase-input":{padding:0}},delete:{color:"#0274d7",fontSize:25,marginTop:"auto"},icon:{color:"#0274d7",marginRight:"2%",marginLeft:"2%",marginTop:"auto",fontSize:"1.5em"},dialogTitle:{color:"#0274d7",paddingLeft:0,paddingRight:3,paddingTop:0,paddingBottom:0,display:"flex",marginTop:"auto",flexDirection:"row",alignItems:"center","& #simple-dialog-title":{cursor:"pointer",padding:0}},dialogPaper:{maxWidth:"25%",maxHeight:"35%",resize:"both",width:"50%",height:"40%"},root:{display:"flex",flexDirection:"column",alignItems:"flex-start",height:"100%",overflow:"hidden"},paper:{margin:10,width:"calc(100% - 16px)",display:"flex",height:"calc(100% - 50px)",overflow:"hidden"},baseModelParams:{display:"flex",flexDirection:"row",justifyContent:"space-between",width:"100%"},addBaseModelParams:{display:"flex",flexDirection:"column",height:"100%",width:"100%",margin:10},save:{margin:10,backgroundColor:"#0275d8",borderColor:"#0267bf",color:"white","&:hover":{backgroundColor:"#025aa5",borderColor:"#014682",color:"white"}},scrollDiv:{display:"flex",flexDirection:"column"}});function Nh(e){var t,n,i,o,c,s=e.id,p=e.trans,h=e.handleChange,f=e.className,m=e.deleteTransformation,b=Eh(),v=Object(a.useState)(p),g=Object(d.a)(v,2),x=g[0],j=g[1],w=Object(a.useState)(!1),O=Object(d.a)(w,2),E=O[0],N=O[1],k=function(){var e=Object(u.a)(Oh().mark((function e(t){var n;return Oh().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Fs(null===t||void 0===t?void 0:t.id);case 2:return n=e.sent,e.abrupt("return",n);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return Object(r.jsxs)("div",{className:el()(b.filter,f),children:[Object(r.jsx)(kl,{name:"library",title:"Library",placeholder:"Libary",optionLabelKey:"name",className:b.fieldSelect,fetchAPI:Rs,onChange:function(e){j(Object(l.a)(Object(l.a)({},x),{},{library:e})),h(Object(l.a)(Object(l.a)({},p),{},{library:e}),s)},value:null===x||void 0===x?void 0:x.library}),Object(r.jsx)(xh.a,{className:b.icon,style:{fontSize:24}}),Object(r.jsx)(kl,{name:"operation",title:"Operation",placeholder:"Operation",optionLabelKey:"name",className:b.fieldSelect,value:null===x||void 0===x?void 0:x.operation,fetchAPI:function(){var e;return function(e){return Ds.apply(this,arguments)}(null===x||void 0===x||null===(e=x.library)||void 0===e?void 0:e.id)},onChange:function(){var e=Object(u.a)(Oh().mark((function e(t){var n,r;return Oh().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return j(Object(l.a)(Object(l.a)({},x),{},{operation:t})),e.next=3,k(t);case 3:r=e.sent,j(Object(l.a)(Object(l.a)({},p),{},{operation:Object(l.a)(Object(l.a)({},t),{},{parameters:r})})),h(Object(l.a)(Object(l.a)({},p),{},{operation:Object(l.a)(Object(l.a)({},t),{},{parameters:r})}),s),0!==(null===t||void 0===t||null===(n=t.parameters)||void 0===n?void 0:n.length)&&N(!0);case 7:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()}),(null===x||void 0===x||null===(t=x.operation)||void 0===t?void 0:t.parameters)&&0!==(null===x||void 0===x||null===(n=x.operation)||void 0===n||null===(i=n.parameters)||void 0===i?void 0:i.length)&&Object(r.jsxs)(r.Fragment,{children:[Object(r.jsx)(y.a,{id:"simple-dialog-title",className:b.dialogTitle,style:{cursor:"pointer",marginLeft:"2%",height:"1.5em"},onClick:function(){N(!0)},children:"Parameters"}),Object(r.jsx)(Ac.a,{className:b.icon,style:{marginLeft:0}})]}),Object(r.jsx)(gh.a,{className:b.icon,style:{marginLeft:"auto",marginRight:"15%",fontSize:25},onClick:function(){return m(s)}}),E&&Object(r.jsx)(wh,{id:s,open:E,parametersTrans:null===x||void 0===x||null===(o=x.operation)||void 0===o?void 0:o.parameters,handleChange:function(e,t){j(Object(l.a)(Object(l.a)({},p),{},{operation:Object(l.a)(Object(l.a)({},x.operation),{},{parameters:e})}),t),h(Object(l.a)(Object(l.a)({},p),{},{operation:Object(l.a)(Object(l.a)({},x.operation),{},{parameters:e})}),t)},multiArg:null===x||void 0===x||null===(c=x.operation)||void 0===c?void 0:c.multiArg,onClose:function(){N(!1)}})]})}var kh=Object(Tc.a)({modelParams:{display:"flex",flexDirection:"row",width:"100%"},dialogTitle:{color:"#0274d7",paddingLeft:0,paddingRight:3,display:"flex",flexDirection:"row",alignItems:"center","& #simple-dialog-title":{cursor:"pointer"}},icon:{color:"#0274d7",margin:20,fontSize:30},delete:{color:"#0274d7",margin:"auto",fontSize:25},paper:{margin:10,width:"calc(100% - 16px)",display:"flex",height:"calc(100% - 50px)",overflow:"hidden"},save:{margin:10,backgroundColor:"#0275d8",borderColor:"#0267bf",color:"white","&:hover":{backgroundColor:"#025aa5",borderColor:"#014682",color:"white"}},dialogPaper:{maxWidth:"50%",maxHeight:"40%",resize:"both",width:"50%",height:"40%"},root:{display:"flex",flexDirection:"column",alignItems:"flex-start",height:"100%",overflow:"hidden"},baseModelParams:{display:"flex",flexDirection:"row",width:"100%"},addBaseModelParams:{display:"flex",flexDirection:"column",height:"100%",width:"100%"},line:{width:"10%"}}),Sh=function(e){var t=e.initialData,n=e.open,i=e.handleClose,o=e.onSave,c=kh(),s=Object(a.useState)([]),l=Object(d.a)(s,2),u=l[0],h=l[1];Object(a.useEffect)((function(){null==t||0===(null===t||void 0===t?void 0:t.length)?h([{library:{},operation:{name:"",value:"",parameters:null}}]):h(t)}),[t]);return Object(r.jsxs)(v.a,{onClose:function(e,t){"backdropClick"!==t&&i()},"aria-labelledby":"simple-dialog-title",open:n,classes:{paper:c.dialogPaper},children:[Object(r.jsx)(y.a,{id:"simple-dialog-title",children:"Data transformation"}),Object(r.jsxs)("div",{className:c.root,children:[Object(r.jsx)(Ml.a,{variant:"outlined",className:c.paper,children:Object(r.jsxs)("div",{className:c.baseModelParams,children:[Object(r.jsx)(yh,{className:c.line}),Object(r.jsxs)("div",{className:c.addBaseModelParams,children:[Object(r.jsxs)("div",{className:c.dialogTitle,children:[Object(r.jsx)(y.a,{id:"simple-dialog-title",className:c.dialogTitle,onClick:function(){h([].concat(Object(p.a)(u),[{library:{},operation:{name:"",value:"",parameters:null}}]))},children:"Add filter"}),Object(r.jsx)(Wd.a,{})]}),Object(r.jsx)("div",{className:c.scrollDiv,children:null===u||void 0===u?void 0:u.map((function(e,t){return Object(r.jsx)(Nh,{trans:e,handleChange:function(e,t){return function(e,t){var n=Object(p.a)(u);n[t]=e,h(n)}(e,t)},id:t,deleteTransformation:function(e){return function(e){var t=u.filter((function(t,n){return n!==e}));h(Object(p.a)(t))}(e)}},t)}))})]})]})}),Object(r.jsxs)("div",{children:[Object(r.jsx)(f.a,{className:c.save,onClick:function(){o(u),i()},children:"OK"}),Object(r.jsx)(f.a,{className:c.save,style:{textTransform:"none"},onClick:function(){i()},children:"Cancel"})]})]})]})},_h=Object(nl.a)({modelParams:{display:"flex",flexDirection:"row",width:"100%"},textField:{justifyContent:"center",width:"33%",marginBottom:10},dialogTitle:{color:"#0274d7",paddingLeft:0,paddingRight:3,display:"flex",flexDirection:"row",alignItems:"center","& #simple-dialog-title":{cursor:"pointer"}},icon:{color:"#0274d7",margin:20,fontSize:30},delete:{color:"#0274d7",margin:"auto",fontSize:25},fieldSelect:{width:"30%"},paper:{margin:10,width:"calc(100% - 16px)",display:"flex",height:"calc(100% - 50px)",overflow:"hidden"},save:{margin:10,backgroundColor:"#0275d8",borderColor:"#0267bf",color:"white","&:hover":{backgroundColor:"#025aa5",borderColor:"#014682",color:"white"}},dialogPaper:{maxWidth:"50%",maxHeight:"40%",resize:"both",width:"50%",height:"40%"},root:{display:"flex",flexDirection:"column",alignItems:"flex-start",height:"100%",overflow:"hidden"},baseModelParams:{display:"flex",flexDirection:"row",width:"100%"},addBaseModelParams:{display:"flex",flexDirection:"column",height:"100%",width:"100%"},line:{width:"10%"}});function Lh(e){var t,n,i=e.deleteParam,o=e.correspondingFields,c=e.handleChange,s=e.parameter,u=e.id,p=_h(),h=Object(a.useState)(!1),f=Object(d.a)(h,2),m=f[0],b=f[1],v=Object(a.useState)(s),g=Object(d.a)(v,2),x=g[0],j=g[1];return Object(a.useEffect)((function(){j(s)}),[s]),Object(r.jsxs)(r.Fragment,{children:[Object(r.jsxs)("div",{className:p.modelParams,children:[Object(r.jsx)(ml.a,{value:x.wsKey,InputLabelProps:"Parameter name",onChange:function(e){j(Object(l.a)(Object(l.a)({},x),{},{wsKey:e.target.value}))},onBlur:function(e){return c(Object(l.a)(Object(l.a)({},x),{},{wsKey:e.target.value}),u)},className:p.textField,style:{width:"20%"},placeholder:"Parameter name"}),Object(r.jsx)(xh.a,{className:p.icon}),o&&Object(r.jsx)(kl,{name:"name",title:"Corresponding field",placeholder:"Model",value:x.wsValue,optionLabelKey:"name",options:o,onChange:function(e){c(Object(l.a)(Object(l.a)({},x),{},{wsValue:e}),u),j(Object(l.a)(Object(l.a)({},x),{},{wsValue:e}))},className:p.fieldSelect}),!o&&Object(r.jsx)(ml.a,{value:x.wsValue,InputLabelProps:"Payload",onChange:function(e){j(Object(l.a)(Object(l.a)({},x),{},{wsValue:e.target.value}))},onBlur:function(e){return c(Object(l.a)(Object(l.a)({},x),{},{wsValue:e.target.value}),u)},className:p.textField,placeholder:"Corresponding"}),Object(r.jsx)(xh.a,{className:p.icon}),Object(r.jsxs)("div",{className:p.dialogTitle,children:[(null==x.transformations||0===(null===x||void 0===x||null===(t=x.transformations)||void 0===t?void 0:t.length))&&Object(r.jsxs)(r.Fragment,{children:[Object(r.jsx)(y.a,{id:"simple-dialog-title",onClick:function(){return b(!0)},className:p.dialogTitle,children:"Add data transformation"}),Object(r.jsx)(Wd.a,{})]}),(null===x||void 0===x?void 0:x.transformations)&&0!==(null===x||void 0===x||null===(n=x.transformations)||void 0===n?void 0:n.length)&&Object(r.jsxs)(r.Fragment,{children:[Object(r.jsx)(y.a,{id:"simple-dialog-title",className:p.dialogTitle,onClick:function(){return b(!0)},children:"Transformations"}),Object(r.jsx)(Ac.a,{})]})]}),Object(r.jsx)(gh.a,{onClick:function(){return i(u)},className:p.delete})]}),m&&Object(r.jsx)(Sh,{open:m,onSave:function(e){c(Object(l.a)(Object(l.a)({},x),{},{transformations:e}),u),j(Object(l.a)(Object(l.a)({},x),{},{transformations:e}),u)},handleClose:function(){return b(!1)},action:!0,initialData:null===x||void 0===x?void 0:x.transformations})]})}function Ch(){Ch=function(){return e};var e={},t=Object.prototype,n=t.hasOwnProperty,r=Object.defineProperty||function(e,t,n){e[t]=n.value},a="function"==typeof Symbol?Symbol:{},i=a.iterator||"@@iterator",o=a.asyncIterator||"@@asyncIterator",c=a.toStringTag||"@@toStringTag";function s(e,t,n){return Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{s({},"")}catch(_){s=function(e,t,n){return e[t]=n}}function l(e,t,n,a){var i=t&&t.prototype instanceof d?t:d,o=Object.create(i.prototype),c=new N(a||[]);return r(o,"_invoke",{value:j(e,n,c)}),o}function u(e,t,n){try{return{type:"normal",arg:e.call(t,n)}}catch(_){return{type:"throw",arg:_}}}e.wrap=l;var p={};function d(){}function h(){}function f(){}var m={};s(m,i,(function(){return this}));var b=Object.getPrototypeOf,v=b&&b(b(k([])));v&&v!==t&&n.call(v,i)&&(m=v);var y=f.prototype=d.prototype=Object.create(m);function g(e){["next","throw","return"].forEach((function(t){s(e,t,(function(e){return this._invoke(t,e)}))}))}function x(e,t){function a(r,i,o,c){var s=u(e[r],e,i);if("throw"!==s.type){var l=s.arg,p=l.value;return p&&"object"==typeof p&&n.call(p,"__await")?t.resolve(p.__await).then((function(e){a("next",e,o,c)}),(function(e){a("throw",e,o,c)})):t.resolve(p).then((function(e){l.value=e,o(l)}),(function(e){return a("throw",e,o,c)}))}c(s.arg)}var i;r(this,"_invoke",{value:function(e,n){function r(){return new t((function(t,r){a(e,n,t,r)}))}return i=i?i.then(r,r):r()}})}function j(e,t,n){var r="suspendedStart";return function(a,i){if("executing"===r)throw new Error("Generator is already running");if("completed"===r){if("throw"===a)throw i;return S()}for(n.method=a,n.arg=i;;){var o=n.delegate;if(o){var c=w(o,n);if(c){if(c===p)continue;return c}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if("suspendedStart"===r)throw r="completed",n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);r="executing";var s=u(e,t,n);if("normal"===s.type){if(r=n.done?"completed":"suspendedYield",s.arg===p)continue;return{value:s.arg,done:n.done}}"throw"===s.type&&(r="completed",n.method="throw",n.arg=s.arg)}}}function w(e,t){var n=e.iterator[t.method];if(void 0===n){if(t.delegate=null,"throw"===t.method){if(e.iterator.return&&(t.method="return",t.arg=void 0,w(e,t),"throw"===t.method))return p;t.method="throw",t.arg=new TypeError("The iterator does not provide a 'throw' method")}return p}var r=u(n,e.iterator,t.arg);if("throw"===r.type)return t.method="throw",t.arg=r.arg,t.delegate=null,p;var a=r.arg;return a?a.done?(t[e.resultName]=a.value,t.next=e.nextLoc,"return"!==t.method&&(t.method="next",t.arg=void 0),t.delegate=null,p):a:(t.method="throw",t.arg=new TypeError("iterator result is not an object"),t.delegate=null,p)}function O(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function E(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function N(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(O,this),this.reset(!0)}function k(e){if(e){var t=e[i];if(t)return t.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var r=-1,a=function t(){for(;++r<e.length;)if(n.call(e,r))return t.value=e[r],t.done=!1,t;return t.value=void 0,t.done=!0,t};return a.next=a}}return{next:S}}function S(){return{value:void 0,done:!0}}return h.prototype=f,r(y,"constructor",{value:f,configurable:!0}),r(f,"constructor",{value:h,configurable:!0}),h.displayName=s(f,c,"GeneratorFunction"),e.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===h||"GeneratorFunction"===(t.displayName||t.name))},e.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,f):(e.__proto__=f,s(e,c,"GeneratorFunction")),e.prototype=Object.create(y),e},e.awrap=function(e){return{__await:e}},g(x.prototype),s(x.prototype,o,(function(){return this})),e.AsyncIterator=x,e.async=function(t,n,r,a,i){void 0===i&&(i=Promise);var o=new x(l(t,n,r,a),i);return e.isGeneratorFunction(n)?o:o.next().then((function(e){return e.done?e.value:o.next()}))},g(y),s(y,c,"Generator"),s(y,i,(function(){return this})),s(y,"toString",(function(){return"[object Generator]"})),e.keys=function(e){var t=Object(e),n=[];for(var r in t)n.push(r);return n.reverse(),function e(){for(;n.length;){var r=n.pop();if(r in t)return e.value=r,e.done=!1,e}return e.done=!0,e}},e.values=k,N.prototype={constructor:N,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(E),!e)for(var t in this)"t"===t.charAt(0)&&n.call(this,t)&&!isNaN(+t.slice(1))&&(this[t]=void 0)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var t=this;function r(n,r){return o.type="throw",o.arg=e,t.next=n,r&&(t.method="next",t.arg=void 0),!!r}for(var a=this.tryEntries.length-1;a>=0;--a){var i=this.tryEntries[a],o=i.completion;if("root"===i.tryLoc)return r("end");if(i.tryLoc<=this.prev){var c=n.call(i,"catchLoc"),s=n.call(i,"finallyLoc");if(c&&s){if(this.prev<i.catchLoc)return r(i.catchLoc,!0);if(this.prev<i.finallyLoc)return r(i.finallyLoc)}else if(c){if(this.prev<i.catchLoc)return r(i.catchLoc,!0)}else{if(!s)throw new Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return r(i.finallyLoc)}}}},abrupt:function(e,t){for(var r=this.tryEntries.length-1;r>=0;--r){var a=this.tryEntries[r];if(a.tryLoc<=this.prev&&n.call(a,"finallyLoc")&&this.prev<a.finallyLoc){var i=a;break}}i&&("break"===e||"continue"===e)&&i.tryLoc<=t&&t<=i.finallyLoc&&(i=null);var o=i?i.completion:{};return o.type=e,o.arg=t,i?(this.method="next",this.next=i.finallyLoc,p):this.complete(o)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),p},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.finallyLoc===e)return this.complete(n.completion,n.afterLoc),E(n),p}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.tryLoc===e){var r=n.completion;if("throw"===r.type){var a=r.arg;E(n)}return a}}throw new Error("illegal catch attempt")},delegateYield:function(e,t,n){return this.delegate={iterator:k(e),resultName:t,nextLoc:n},"next"===this.method&&(this.arg=void 0),p}},e}var Ph=Object(nl.a)({modelParameter:{display:"flex",flexDirection:"row",alignItems:"center",width:"100%"},paperParams:{marginTop:10,resize:"both",width:"100%",marginRight:10},inputSelect:{marginLeft:"2%",marginRight:"2%",width:"96%",marginBottom:10},modelParams:{display:"flex",flexDirection:"row",width:"100%"},line:{width:"10%"},block:{width:"100%"},dialogTitle:{color:"#0274d7",paddingLeft:0,paddingRight:3,display:"flex",flexDirection:"row",alignItems:"center","& #simple-dialog-title":{cursor:"pointer"}},icon:{color:"#0274d7",margin:20,fontSize:30}});function Th(e){var t,n=e.handleChangeParam,i=e.deleteModelParam,o=e.modelParameter,c=e.addParameter,s=e.id,h=Ph(),f=Object(a.useState)(null===o||void 0===o?void 0:o.model),m=Object(d.a)(f,2),b=m[0],v=m[1],g=function(e,t){var r=Object.assign({},Object(l.a)(Object(l.a)({},o),{},{model:b})),a=Object.assign([],r.parameters);a[t]=e,n({model:b,parameters:a},s)},x=function(e){var t=Object(p.a)(o.parameters);t=t.filter((function(t,n){return n!==e})),n(Object(l.a)(Object(l.a)({},o),{},{parameters:t}),s)};function j(){return(j=Object(u.a)(Ch().mark((function e(){return Ch().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",us());case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}return Object(r.jsxs)("div",{className:h.modelParameter,children:[Object(r.jsxs)(Ml.a,{variant:"outlined",className:h.paperParams,children:[Object(r.jsx)(kl,{name:"metaModal",title:"Model",placeholder:"meta modal",fetchAPI:function(){return j.apply(this,arguments)},optionLabelKey:"name",onChange:function(e){v(e)},value:b,classes:{root:h.inputSelect}}),Object(r.jsxs)("div",{className:h.modelParams,children:[Object(r.jsx)(yh,{className:h.line}),Object(r.jsxs)("div",{className:h.block,children:[Object(r.jsx)("div",{children:null===o||void 0===o||null===(t=o.parameters)||void 0===t?void 0:t.map((function(e,t){return Object(r.jsx)(Lh,{handleChange:g,model:o.model,correspondingFields:"metaModel"===(null===b||void 0===b?void 0:b.type)?null===b||void 0===b?void 0:b.metaFields:(null===b||void 0===b||b.type,null===b||void 0===b?void 0:b.fields),deleteParam:x,parameter:e,id:t},t)}))}),Object(r.jsxs)("div",{className:h.dialogTitle,children:[Object(r.jsx)(y.a,{id:"simple-dialog-title",onClick:function(){c(s,{wsKey:"",wsValue:null,transformations:[]})},className:h.dialogTitle,children:"Add parameter"}),Object(r.jsx)(Wd.a,{})]})]})]})]}),Object(r.jsx)(gh.a,{onClick:function(){return i(s)},className:h.icon})]})}var Mh=n(74);function Ah(){Ah=function(){return e};var e={},t=Object.prototype,n=t.hasOwnProperty,r=Object.defineProperty||function(e,t,n){e[t]=n.value},a="function"==typeof Symbol?Symbol:{},i=a.iterator||"@@iterator",o=a.asyncIterator||"@@asyncIterator",c=a.toStringTag||"@@toStringTag";function s(e,t,n){return Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{s({},"")}catch(_){s=function(e,t,n){return e[t]=n}}function l(e,t,n,a){var i=t&&t.prototype instanceof d?t:d,o=Object.create(i.prototype),c=new N(a||[]);return r(o,"_invoke",{value:j(e,n,c)}),o}function u(e,t,n){try{return{type:"normal",arg:e.call(t,n)}}catch(_){return{type:"throw",arg:_}}}e.wrap=l;var p={};function d(){}function h(){}function f(){}var m={};s(m,i,(function(){return this}));var b=Object.getPrototypeOf,v=b&&b(b(k([])));v&&v!==t&&n.call(v,i)&&(m=v);var y=f.prototype=d.prototype=Object.create(m);function g(e){["next","throw","return"].forEach((function(t){s(e,t,(function(e){return this._invoke(t,e)}))}))}function x(e,t){function a(r,i,o,c){var s=u(e[r],e,i);if("throw"!==s.type){var l=s.arg,p=l.value;return p&&"object"==typeof p&&n.call(p,"__await")?t.resolve(p.__await).then((function(e){a("next",e,o,c)}),(function(e){a("throw",e,o,c)})):t.resolve(p).then((function(e){l.value=e,o(l)}),(function(e){return a("throw",e,o,c)}))}c(s.arg)}var i;r(this,"_invoke",{value:function(e,n){function r(){return new t((function(t,r){a(e,n,t,r)}))}return i=i?i.then(r,r):r()}})}function j(e,t,n){var r="suspendedStart";return function(a,i){if("executing"===r)throw new Error("Generator is already running");if("completed"===r){if("throw"===a)throw i;return S()}for(n.method=a,n.arg=i;;){var o=n.delegate;if(o){var c=w(o,n);if(c){if(c===p)continue;return c}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if("suspendedStart"===r)throw r="completed",n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);r="executing";var s=u(e,t,n);if("normal"===s.type){if(r=n.done?"completed":"suspendedYield",s.arg===p)continue;return{value:s.arg,done:n.done}}"throw"===s.type&&(r="completed",n.method="throw",n.arg=s.arg)}}}function w(e,t){var n=e.iterator[t.method];if(void 0===n){if(t.delegate=null,"throw"===t.method){if(e.iterator.return&&(t.method="return",t.arg=void 0,w(e,t),"throw"===t.method))return p;t.method="throw",t.arg=new TypeError("The iterator does not provide a 'throw' method")}return p}var r=u(n,e.iterator,t.arg);if("throw"===r.type)return t.method="throw",t.arg=r.arg,t.delegate=null,p;var a=r.arg;return a?a.done?(t[e.resultName]=a.value,t.next=e.nextLoc,"return"!==t.method&&(t.method="next",t.arg=void 0),t.delegate=null,p):a:(t.method="throw",t.arg=new TypeError("iterator result is not an object"),t.delegate=null,p)}function O(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function E(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function N(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(O,this),this.reset(!0)}function k(e){if(e){var t=e[i];if(t)return t.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var r=-1,a=function t(){for(;++r<e.length;)if(n.call(e,r))return t.value=e[r],t.done=!1,t;return t.value=void 0,t.done=!0,t};return a.next=a}}return{next:S}}function S(){return{value:void 0,done:!0}}return h.prototype=f,r(y,"constructor",{value:f,configurable:!0}),r(f,"constructor",{value:h,configurable:!0}),h.displayName=s(f,c,"GeneratorFunction"),e.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===h||"GeneratorFunction"===(t.displayName||t.name))},e.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,f):(e.__proto__=f,s(e,c,"GeneratorFunction")),e.prototype=Object.create(y),e},e.awrap=function(e){return{__await:e}},g(x.prototype),s(x.prototype,o,(function(){return this})),e.AsyncIterator=x,e.async=function(t,n,r,a,i){void 0===i&&(i=Promise);var o=new x(l(t,n,r,a),i);return e.isGeneratorFunction(n)?o:o.next().then((function(e){return e.done?e.value:o.next()}))},g(y),s(y,c,"Generator"),s(y,i,(function(){return this})),s(y,"toString",(function(){return"[object Generator]"})),e.keys=function(e){var t=Object(e),n=[];for(var r in t)n.push(r);return n.reverse(),function e(){for(;n.length;){var r=n.pop();if(r in t)return e.value=r,e.done=!1,e}return e.done=!0,e}},e.values=k,N.prototype={constructor:N,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(E),!e)for(var t in this)"t"===t.charAt(0)&&n.call(this,t)&&!isNaN(+t.slice(1))&&(this[t]=void 0)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var t=this;function r(n,r){return o.type="throw",o.arg=e,t.next=n,r&&(t.method="next",t.arg=void 0),!!r}for(var a=this.tryEntries.length-1;a>=0;--a){var i=this.tryEntries[a],o=i.completion;if("root"===i.tryLoc)return r("end");if(i.tryLoc<=this.prev){var c=n.call(i,"catchLoc"),s=n.call(i,"finallyLoc");if(c&&s){if(this.prev<i.catchLoc)return r(i.catchLoc,!0);if(this.prev<i.finallyLoc)return r(i.finallyLoc)}else if(c){if(this.prev<i.catchLoc)return r(i.catchLoc,!0)}else{if(!s)throw new Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return r(i.finallyLoc)}}}},abrupt:function(e,t){for(var r=this.tryEntries.length-1;r>=0;--r){var a=this.tryEntries[r];if(a.tryLoc<=this.prev&&n.call(a,"finallyLoc")&&this.prev<a.finallyLoc){var i=a;break}}i&&("break"===e||"continue"===e)&&i.tryLoc<=t&&t<=i.finallyLoc&&(i=null);var o=i?i.completion:{};return o.type=e,o.arg=t,i?(this.method="next",this.next=i.finallyLoc,p):this.complete(o)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),p},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.finallyLoc===e)return this.complete(n.completion,n.afterLoc),E(n),p}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.tryLoc===e){var r=n.completion;if("throw"===r.type){var a=r.arg;E(n)}return a}}throw new Error("illegal catch attempt")},delegateYield:function(e,t,n){return this.delegate={iterator:k(e),resultName:t,nextLoc:n},"next"===this.method&&(this.arg=void 0),p}},e}var Rh=Object(Mh.b)("company/fetchCompany",function(){var e=Object(u.a)(Ah().mark((function e(t){return Ah().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Rh(t).catch((function(e){console.log(e)})).then((function(e){return e.data.data})));case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),Bh=Object(Mh.c)({name:"counter",initialState:{modelParameters:[]},reducers:{updateModelParam:function(e,t){e.modelParameters=t.payload},addModelParam:function(e,t){e.modelParameters.push(Object(l.a)(Object(l.a)({},t.payload),{},{parameters:[{id:1,wsKey:"",wsValue:""}]}))},deleteModelParam:function(e,t){e.modelParameters=e.modelParameters.filter((function(e){return e.id!==t.payload}))}}}),Dh=Bh.actions,Fh=Dh.updateModelParam,Ih=(Dh.addModelParam,Dh.deleteModelParam,Bh.reducer),Vh=Object(Tc.a)((function(e){return{saveButtonText:{marginLeft:10},saveMessageAlert:{width:"100%",marginBottom:10,display:"flex",justifyContent:"space-between"},paper:{margin:e.spacing(1),width:"calc(100% - 16px)",display:"flex",height:"calc(100% - 50px)",overflow:"hidden"},dialog:{width:"20%"},dialogPaper:{maxWidth:"70%",maxHeight:"80%",resize:"both",width:"70%",height:"90%"},root:{display:"flex",flexDirection:"column",alignItems:"flex-start",height:"100%",overflow:"hidden"},save:{margin:e.spacing(1),backgroundColor:"#0275d8",borderColor:"#0267bf",color:"white","&:hover":{backgroundColor:"#025aa5",borderColor:"#014682",color:"white"}},baseModelParams:{display:"flex",flexDirection:"row",width:"100%"},modelParams:{display:"flex",flexDirection:"row",width:"90%"},addBaseModelParams:{display:"flex",flexDirection:"column",height:"100%",width:"100%"},line:{width:"10%"},dialogTitle:{color:"#0274d7",paddingLeft:0,paddingRight:3,display:"flex",flexDirection:"row",alignItems:"center","& #simple-dialog-title":{cursor:"pointer"}},scrollDiv:{overflow:"scroll",height:550}}}));var Gh=function(e){var t=e.handleClose,n=e.open,o=e.action,c=Vh(),u=Object(s.b)(),h=Object(s.c)((function(e){return e.requestReducer.modelParameters})),m=Object(a.useState)([]),b=Object(d.a)(m,2),w=b[0],O=b[1],E=i.a.useState({openAlert:!1,alertMessage:"Add all values",alertTitle:"Error"}),N=Object(d.a)(E,2),k=N[0],S=N[1];Object(a.useEffect)((function(){0===h.length?O([{model:{},parameters:[{wsKey:"",wsValue:null,transformations:[]}]}]):O("ADD"===o?[{model:{},parameters:[{wsKey:"",wsValue:null,transformations:[]}]}]:h)}),[o,h]),Object(a.useEffect)((function(){}),[w]);var _=function(){var e=!0;return w.forEach((function(t){t.parameters.forEach((function(t){0!==t.wsKey.length&&null!==t.wsValue||(e=!1)}))})),e},L=function(e){var t=w.filter((function(t,n){return n!==e}));O(t)},C=function(e,t){var n=Object.assign([],w),r=Object.assign([],n[e].parameters);r.push(t),n[e]=Object(l.a)(Object(l.a)({},n[e]),{},{parameters:r}),O(n)},P=Object(a.useCallback)((function(e,t){var n=Object(p.a)(w);n[t]=e,O(n)}),[w]);return Object(r.jsxs)(v.a,{onClose:function(e,n){"backdropClick"!==n&&t()},"aria-labelledby":"simple-dialog-title",open:n,classes:{paper:c.dialogPaper},children:[Object(r.jsx)(y.a,{id:"simple-dialog-title",children:"Build Parametres"}),Object(r.jsxs)("div",{className:c.root,children:[Object(r.jsx)(Ml.a,{variant:"outlined",className:c.paper,children:Object(r.jsxs)("div",{className:c.baseModelParams,children:[Object(r.jsx)(yh,{className:c.line}),Object(r.jsxs)("div",{className:c.addBaseModelParams,children:[Object(r.jsxs)("div",{className:c.dialogTitle,children:[Object(r.jsx)(y.a,{id:"simple-dialog-title",className:c.dialogTitle,onClick:function(){O([].concat(Object(p.a)(w),[{model:{},parameters:[{wsKey:"",wsValue:null,transformations:[]}]}]))},children:"Add base model parameters"}),Object(r.jsx)(Wd.a,{})]}),Object(r.jsx)("div",{className:c.scrollDiv,children:null===w||void 0===w?void 0:w.map((function(e,t){return Object(r.jsx)(Th,{handleChangeParam:P,addParameter:C,modelParameter:e,deleteModelParam:L,id:t},t)}))})]})]})}),Object(r.jsxs)("div",{children:[Object(r.jsx)(f.a,{className:c.save,onClick:function(){_()?(u(Fh("EDIT"===o?w:[].concat(Object(p.a)(h),Object(p.a)(w)))),t()):S(Object(l.a)(Object(l.a)({},k),{},{openAlert:!0}))},children:"OK"}),Object(r.jsx)(f.a,{className:c.save,onClick:function(){t()},style:{textTransform:"none"},children:"Cancel"})]})]}),k.openAlert&&Object(r.jsxs)(v.a,{open:k.openAlert,onClose:function(e,t){"backdropClick"!==t&&S(Object(l.a)(Object(l.a)({},k),{},{openAlert:!1}))},"aria-labelledby":"alert-dialog-title","aria-describedby":"alert-dialog-description",classes:{paper:c.dialog},children:[Object(r.jsx)(y.a,{id:"alert-dialog-title",children:k.alertTitle}),Object(r.jsx)(g.a,{children:Object(r.jsx)(x.a,{id:"alert-dialog-description",children:k.alertMessage})}),Object(r.jsx)(j.a,{children:Object(r.jsx)(f.a,{onClick:function(){S(Object(l.a)(Object(l.a)({},k),{},{openAlert:!1})),k.openAlert&&S(Object(l.a)(Object(l.a)({},k),{},{openAlert:!1}))},color:"primary",autoFocus:!0,className:c.save,children:"Ok"})})]})]})},Wh=Object(nl.a)({headers:{display:"flex",flexDirection:"row",alignItems:"center",justifyContent:"space-between",maxWidth:"70%",marginBottom:"2%"},delete:{color:"#0274d7",fontSize:25,marginTop:"auto"},root:{display:"flex",flexDirection:"column",alignItems:"flex-start",height:"100%",overflow:"hidden"},inputSelect:{marginLeft:"2%",marginRight:"2%",width:"96%",marginBottom:10}});function $h(e){var t=e.handleChange,n=e.handleDelete,a=e.header,i=e.id,o=Wh();return Object(r.jsxs)("div",{className:o.headers,children:[Object(r.jsx)(Cl,{name:"name",title:"Header name",placeholder:"Header name",optionLabelKey:"name",value:{name:a.wsKey},onChange:function(e){t(Object(l.a)(Object(l.a)({},a),{},{wsKey:(null===e||void 0===e?void 0:e.name)?e.name:e}),i)},classes:{root:o.inputSelect},options:uh}),Object(r.jsx)(xh.a,{className:o.icon}),Object(r.jsx)(Cl,{name:"name",title:"Value",placeholder:"Value",optionLabelKey:"name",value:{name:a.wsValue},onChange:function(e){return t(Object(l.a)(Object(l.a)({},a),{},{wsValue:(null===e||void 0===e?void 0:e.name)?e.name:e}),i)},classes:{root:o.inputSelect},options:ph}),Object(r.jsx)(gh.a,{onClick:function(){return n(i)},className:o.delete})]})}var zh=Object(Mh.c)({name:"counter",initialState:{headers:[]},reducers:{updateHeader:function(e,t){e.headers=t.payload},addHeader:function(e,t){e.modelHeaders.push(Object(l.a)(Object(l.a)({},t.payload),{},{headers:[{wsKey:"",wsValue:""}]}))},deleteHeader:function(e,t){e.headers=e.headers.filter((function(e){return e.id!==t.payload}))}}}),Kh=zh.actions,qh=Kh.updateHeader,Hh=(Kh.addHeader,Kh.deleteHeader,zh.reducer),Uh=Object(Tc.a)((function(e){return{dialogTitle:{color:"#0274d7",paddingLeft:0,paddingRight:3,display:"flex",flexDirection:"row",alignItems:"center","& #simple-dialog-title":{cursor:"pointer"}},dialog:{width:"20%"},paper:{margin:"1%",padding:15,width:"calc(95%)",display:"flex",flexDirection:"column",height:"calc(70% - 50px)",overflow:"hidden"},save:{margin:10,backgroundColor:"#0275d8",borderColor:"#0267bf",color:"white","&:hover":{backgroundColor:"#025aa5",borderColor:"#014682",color:"white"}},dialogPaper:{maxWidth:"70%",maxHeight:"40%",resize:"both",width:"70%",height:"90%"},root:{display:"flex",flexDirection:"column",alignItems:"flex-start",height:"100%",overflow:"hidden"},line:{width:"10%"},addHeader:{display:"flex",flexDirection:"column",width:"100%"},buttons:{marginTop:"auto"},scrollDiv:{overflow:"scroll",height:130}}}));var Yh=function(e){var t=e.handleClose,n=e.open,o=e.action,c=Uh(),u=i.a.useState({openAlert:!1,alertMessage:"Add all values",alertTitle:"Error"}),h=Object(d.a)(u,2),m=h[0],b=h[1],w=Object(s.c)((function(e){return e.headerReducer.headers})),O=i.a.useState([]),E=Object(d.a)(O,2),N=E[0],k=E[1],S=Object(s.b)(),_=function(){var e=!0;return N.forEach((function(t){0!==t.wsKey.length&&0!==t.wsValue.length||(e=!1)})),e},L=function(e){var t=Object(p.a)(N);t.splice(e,e),k(t)},C=function(e,t){var n=Object(p.a)(N);n[t]=e,k(n)};return Object(a.useEffect)((function(){0===w.length?k([{wsKey:"",wsValue:""}]):k("ADD"===o?[{wsKey:"",wsValue:""}]:w)}),[o,w]),Object(r.jsxs)(v.a,{onClose:function(e,n){"backdropClick"!==n&&t()},"aria-labelledby":"simple-dialog-title",open:n,classes:{paper:c.dialogPaper},children:[Object(r.jsx)(y.a,{id:"simple-dialog-title",children:"Build Headers"}),Object(r.jsxs)("div",{className:c.root,children:[Object(r.jsxs)(Ml.a,{variant:"outlined",className:c.paper,children:[Object(r.jsx)("div",{className:c.addHeader,children:Object(r.jsx)("div",{className:c.scrollDiv,children:N.map((function(e,t){return Object(r.jsx)($h,{handleChange:C,id:t,handleDelete:L,header:Object(l.a)({},e)},t)}))})}),Object(r.jsxs)("div",{className:c.dialogTitle,children:[Object(r.jsx)(y.a,{id:"simple-dialog-title",className:c.dialogTitle,onClick:function(){k([].concat(Object(p.a)(N),[{wsKey:"",wsValue:""}]))},children:"Add Header"}),Object(r.jsx)(Wd.a,{})]})]}),Object(r.jsxs)("div",{className:c.buttons,children:[Object(r.jsx)(f.a,{className:c.save,onClick:function(){_()?(S(qh("EDIT"===o?N:[].concat(Object(p.a)(w),Object(p.a)(N)))),t()):b(Object(l.a)(Object(l.a)({},m),{},{openAlert:!0}))},children:"OK"}),Object(r.jsx)(f.a,{className:c.save,onClick:function(){t()},style:{textTransform:"none"},children:"Cancel"})]})]}),m.openAlert&&Object(r.jsxs)(v.a,{open:m.openAlert,onClose:function(e,t){"backdropClick"!==t&&b(Object(l.a)(Object(l.a)({},m),{},{openAlert:!1}))},"aria-labelledby":"alert-dialog-title","aria-describedby":"alert-dialog-description",classes:{paper:c.dialog},children:[Object(r.jsx)(y.a,{id:"alert-dialog-title",children:m.alertTitle}),Object(r.jsx)(g.a,{children:Object(r.jsx)(x.a,{id:"alert-dialog-description",children:m.alertMessage})}),Object(r.jsx)(j.a,{children:Object(r.jsx)(f.a,{onClick:function(){b(Object(l.a)(Object(l.a)({},m),{},{openAlert:!1})),n||t()},color:"primary",autoFocus:!0,className:c.save,children:"Ok"})})]})]})},Jh=Object(nl.a)({modelParams:{display:"flex",flexDirection:"row",width:"100%"},textField:{justifyContent:"center",marginBottom:11,width:"20%"},Checkbox:{width:"10%",color:"#0274d7",marginLeft:"auto"},dialogTitle:{color:"#0274d7",paddingLeft:0,paddingRight:3,display:"flex",flexDirection:"row",fontSize:15,alignItems:"center",width:"20%","& #simple-dialog-title":{cursor:"pointer",width:"auto"},"& .MuiTypography-h6":{fontSize:"0.8em"}},icon:{color:"#0274d7",marginTop:20,marginBottom:20,fontSize:30},delete:{color:"#0274d7",margin:"auto",fontSize:25},fieldSelect:{width:"22%"},paper:{margin:10,width:"calc(100% - 16px)",display:"flex",height:"calc(100% - 50px)",overflow:"hidden"},save:{margin:10,backgroundColor:"#0275d8",borderColor:"#0267bf",color:"white","&:hover":{backgroundColor:"#025aa5",borderColor:"#014682",color:"white"}},dialogPaper:{maxWidth:"50%",maxHeight:"40%",resize:"both",width:"50%",height:"40%"},root:{display:"flex",flexDirection:"column",alignItems:"flex-start",height:"100%",overflow:"hidden"},baseModelParams:{display:"flex",flexDirection:"row",width:"100%"},addBaseModelParams:{display:"flex",flexDirection:"column",height:"100%",width:"100%"},line:{width:"10%"}});function Xh(e){var t,n,i,o=e.deletePayload,c=e.correspondingFields,s=e.handleChange,u=e.payload,p=e.id,h=Jh(),f=Object(a.useState)(!1),m=Object(d.a)(f,2),b=m[0],v=m[1],g=Object(a.useState)(u),x=Object(d.a)(g,2),j=x[0],w=x[1],O=Object(a.useState)(!1),E=Object(d.a)(O,2),N=E[0],k=E[1];Object(a.useEffect)((function(){w(u)}),[u]);return Object(r.jsxs)(r.Fragment,{children:[Object(r.jsxs)("div",{className:h.modelParams,children:[N&&Object(r.jsx)(sf,{handleClose:function(){k(!1)},open:N,onSave:function(e){return function(e){w(Object(l.a)(Object(l.a)({},j),{},{wsValue:e})),s(Object(l.a)(Object(l.a)({},j),{},{wsValue:e}),p)}(e)},initialData:Array.isArray(u.wsValue)&&(null===j||void 0===j?void 0:j.wsValue)?null===j||void 0===j?void 0:j.wsValue:[],action:"EDIT"}),Object(r.jsx)(ml.a,{value:null===j||void 0===j?void 0:j.wsKey,InputLabelProps:"Payload",onChange:function(e){w(Object(l.a)(Object(l.a)({},j),{},{wsKey:e.target.value}))},onBlur:function(e){return s(Object(l.a)(Object(l.a)({},j),{},{wsKey:e.target.value}),p)},className:h.textField,placeholder:"Payalod key"}),Object(r.jsx)(xh.a,{className:h.icon,style:{width:"7%"}}),c&&!(null===j||void 0===j?void 0:j.isList)&&Object(r.jsx)(Cl,{name:"name",title:"Corresponding field",placeholder:"Model",value:null===j||void 0===j?void 0:j.wsValue,optionLabelKey:"name",options:c,onChange:function(e){s(Object(l.a)(Object(l.a)({},j),{},{wsValue:e}),p),w(Object(l.a)(Object(l.a)({},j),{},{wsValue:e}))},className:h.fieldSelect}),(null===j||void 0===j?void 0:j.isList)&&Object(r.jsx)("div",{className:h.dialogTitle,children:Object(r.jsxs)(r.Fragment,{children:[Object(r.jsx)(y.a,{id:"simple-dialog-title",onClick:function(){return k(!0)},className:h.dialogTitle,children:"Add embedded payloads"}),null!=(null===j||void 0===j?void 0:j.wsValue)&&0!==(null===j||void 0===j||null===(t=j.wsValue)||void 0===t?void 0:t.length)&&Array.isArray(null===j||void 0===j?void 0:j.wsValue)?Object(r.jsx)(Ac.a,{}):Object(r.jsx)(Wd.a,{})]})}),!c&&!j.isList&&Object(r.jsx)(ml.a,{value:null===j||void 0===j?void 0:j.wsValue,InputLabelProps:"Payload",onChange:function(e){w(Object(l.a)(Object(l.a)({},j),{},{wsValue:e.target.value}))},onBlur:function(e){return s(Object(l.a)(Object(l.a)({},j),{},{wsValue:e.target.value}),p)},className:h.textField,placeholder:"Payalod value"}),!(null===j||void 0===j?void 0:j.isList)&&Object(r.jsx)(xh.a,{className:h.icon,style:{width:"7%"}}),Object(r.jsxs)("div",{className:h.dialogTitle,children:[(null==(null===j||void 0===j?void 0:j.transformations)||0===(null===j||void 0===j||null===(n=j.transformations)||void 0===n?void 0:n.length))&&!(null===j||void 0===j?void 0:j.isList)&&Object(r.jsxs)(r.Fragment,{children:[Object(r.jsx)(y.a,{id:"simple-dialog-title",onClick:function(){return v(!0)},className:h.dialogTitle,children:"Add data transformation"}),Object(r.jsx)(Wd.a,{style:{width:"10%"}})]}),(null===j||void 0===j?void 0:j.transformations)&&0!==(null===j||void 0===j||null===(i=j.transformations)||void 0===i?void 0:i.length)&&Object(r.jsxs)(r.Fragment,{children:[Object(r.jsx)(y.a,{id:"simple-dialog-title",className:h.dialogTitle,onClick:function(){return v(!0)},children:"Transformations"}),Object(r.jsx)(Ac.a,{})]})]}),Object(r.jsx)(ql.a,{className:h.Checkbox,control:Object(r.jsx)(dd.a,{onClick:function(){s(Object(l.a)(Object(l.a)({},j),{},{isList:!(null===j||void 0===j?void 0:j.isList)}),p),w(Object(l.a)(Object(l.a)({},j),{},{isList:!(null===j||void 0===j?void 0:j.isList)}))},checked:null===j||void 0===j?void 0:j.isList}),label:"List"}),Object(r.jsx)(gh.a,{onClick:function(){return o(p)},className:h.delete})]}),b&&Object(r.jsx)(Sh,{open:b,handleClose:function(){return v(!1)},action:!0,onSave:function(e){s(Object(l.a)(Object(l.a)({},j),{},{transformations:e}),p),w(Object(l.a)(Object(l.a)({},j),{},{transformations:e}),p)},initialData:null===u||void 0===u?void 0:u.transformations})]})}function Qh(){Qh=function(){return e};var e={},t=Object.prototype,n=t.hasOwnProperty,r=Object.defineProperty||function(e,t,n){e[t]=n.value},a="function"==typeof Symbol?Symbol:{},i=a.iterator||"@@iterator",o=a.asyncIterator||"@@asyncIterator",c=a.toStringTag||"@@toStringTag";function s(e,t,n){return Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{s({},"")}catch(_){s=function(e,t,n){return e[t]=n}}function l(e,t,n,a){var i=t&&t.prototype instanceof d?t:d,o=Object.create(i.prototype),c=new N(a||[]);return r(o,"_invoke",{value:j(e,n,c)}),o}function u(e,t,n){try{return{type:"normal",arg:e.call(t,n)}}catch(_){return{type:"throw",arg:_}}}e.wrap=l;var p={};function d(){}function h(){}function f(){}var m={};s(m,i,(function(){return this}));var b=Object.getPrototypeOf,v=b&&b(b(k([])));v&&v!==t&&n.call(v,i)&&(m=v);var y=f.prototype=d.prototype=Object.create(m);function g(e){["next","throw","return"].forEach((function(t){s(e,t,(function(e){return this._invoke(t,e)}))}))}function x(e,t){function a(r,i,o,c){var s=u(e[r],e,i);if("throw"!==s.type){var l=s.arg,p=l.value;return p&&"object"==typeof p&&n.call(p,"__await")?t.resolve(p.__await).then((function(e){a("next",e,o,c)}),(function(e){a("throw",e,o,c)})):t.resolve(p).then((function(e){l.value=e,o(l)}),(function(e){return a("throw",e,o,c)}))}c(s.arg)}var i;r(this,"_invoke",{value:function(e,n){function r(){return new t((function(t,r){a(e,n,t,r)}))}return i=i?i.then(r,r):r()}})}function j(e,t,n){var r="suspendedStart";return function(a,i){if("executing"===r)throw new Error("Generator is already running");if("completed"===r){if("throw"===a)throw i;return S()}for(n.method=a,n.arg=i;;){var o=n.delegate;if(o){var c=w(o,n);if(c){if(c===p)continue;return c}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if("suspendedStart"===r)throw r="completed",n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);r="executing";var s=u(e,t,n);if("normal"===s.type){if(r=n.done?"completed":"suspendedYield",s.arg===p)continue;return{value:s.arg,done:n.done}}"throw"===s.type&&(r="completed",n.method="throw",n.arg=s.arg)}}}function w(e,t){var n=e.iterator[t.method];if(void 0===n){if(t.delegate=null,"throw"===t.method){if(e.iterator.return&&(t.method="return",t.arg=void 0,w(e,t),"throw"===t.method))return p;t.method="throw",t.arg=new TypeError("The iterator does not provide a 'throw' method")}return p}var r=u(n,e.iterator,t.arg);if("throw"===r.type)return t.method="throw",t.arg=r.arg,t.delegate=null,p;var a=r.arg;return a?a.done?(t[e.resultName]=a.value,t.next=e.nextLoc,"return"!==t.method&&(t.method="next",t.arg=void 0),t.delegate=null,p):a:(t.method="throw",t.arg=new TypeError("iterator result is not an object"),t.delegate=null,p)}function O(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function E(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function N(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(O,this),this.reset(!0)}function k(e){if(e){var t=e[i];if(t)return t.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var r=-1,a=function t(){for(;++r<e.length;)if(n.call(e,r))return t.value=e[r],t.done=!1,t;return t.value=void 0,t.done=!0,t};return a.next=a}}return{next:S}}function S(){return{value:void 0,done:!0}}return h.prototype=f,r(y,"constructor",{value:f,configurable:!0}),r(f,"constructor",{value:h,configurable:!0}),h.displayName=s(f,c,"GeneratorFunction"),e.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===h||"GeneratorFunction"===(t.displayName||t.name))},e.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,f):(e.__proto__=f,s(e,c,"GeneratorFunction")),e.prototype=Object.create(y),e},e.awrap=function(e){return{__await:e}},g(x.prototype),s(x.prototype,o,(function(){return this})),e.AsyncIterator=x,e.async=function(t,n,r,a,i){void 0===i&&(i=Promise);var o=new x(l(t,n,r,a),i);return e.isGeneratorFunction(n)?o:o.next().then((function(e){return e.done?e.value:o.next()}))},g(y),s(y,c,"Generator"),s(y,i,(function(){return this})),s(y,"toString",(function(){return"[object Generator]"})),e.keys=function(e){var t=Object(e),n=[];for(var r in t)n.push(r);return n.reverse(),function e(){for(;n.length;){var r=n.pop();if(r in t)return e.value=r,e.done=!1,e}return e.done=!0,e}},e.values=k,N.prototype={constructor:N,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(E),!e)for(var t in this)"t"===t.charAt(0)&&n.call(this,t)&&!isNaN(+t.slice(1))&&(this[t]=void 0)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var t=this;function r(n,r){return o.type="throw",o.arg=e,t.next=n,r&&(t.method="next",t.arg=void 0),!!r}for(var a=this.tryEntries.length-1;a>=0;--a){var i=this.tryEntries[a],o=i.completion;if("root"===i.tryLoc)return r("end");if(i.tryLoc<=this.prev){var c=n.call(i,"catchLoc"),s=n.call(i,"finallyLoc");if(c&&s){if(this.prev<i.catchLoc)return r(i.catchLoc,!0);if(this.prev<i.finallyLoc)return r(i.finallyLoc)}else if(c){if(this.prev<i.catchLoc)return r(i.catchLoc,!0)}else{if(!s)throw new Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return r(i.finallyLoc)}}}},abrupt:function(e,t){for(var r=this.tryEntries.length-1;r>=0;--r){var a=this.tryEntries[r];if(a.tryLoc<=this.prev&&n.call(a,"finallyLoc")&&this.prev<a.finallyLoc){var i=a;break}}i&&("break"===e||"continue"===e)&&i.tryLoc<=t&&t<=i.finallyLoc&&(i=null);var o=i?i.completion:{};return o.type=e,o.arg=t,i?(this.method="next",this.next=i.finallyLoc,p):this.complete(o)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),p},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.finallyLoc===e)return this.complete(n.completion,n.afterLoc),E(n),p}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.tryLoc===e){var r=n.completion;if("throw"===r.type){var a=r.arg;E(n)}return a}}throw new Error("illegal catch attempt")},delegateYield:function(e,t,n){return this.delegate={iterator:k(e),resultName:t,nextLoc:n},"next"===this.method&&(this.arg=void 0),p}},e}var Zh=Object(nl.a)({modelPayload:{display:"flex",flexDirection:"row",alignItems:"center",width:"100%"},paperParams:{marginTop:10,resize:"both",width:"100%",marginRight:10},textField:{justifyContent:"center",marginBottom:11,width:"47%"},inputSelect:{marginLeft:"2%",marginRight:"2%",width:"95%",marginBottom:10},modelParams:{display:"flex",flexDirection:"row",width:"100%"},line:{width:"10%"},block:{width:"100%"},dialogTitle:{color:"#0274d7",paddingLeft:0,paddingRight:3,display:"flex",flexDirection:"row",alignItems:"center","& #simple-dialog-title":{cursor:"pointer"},"& .MuiTypography-h6":{fontSize:"0.9em"}},icon:{color:"#0274d7",margin:20,fontSize:30}});function ef(e){var t,n=e.handleChangePayload,i=e.deleteModelPayload,o=e.modelPayload,c=e.addPayload,s=e.id,h=Zh(),f=Object(a.useState)(null===o||void 0===o?void 0:o.model),m=Object(d.a)(f,2),b=m[0],v=m[1],g=function(e,t){var r=Object.assign({},Object(l.a)(Object(l.a)({},o),{},{model:b})),a=Object.assign([],r.payloads);a[t]=e,n(Object(l.a)(Object(l.a)({},o),{},{model:b,payloads:a}),s)},x=function(e,t){var r=Object.assign({},Object(l.a)(Object(l.a)({},o),{},{model:b})),a=Object.assign([],r.payloads);a[t]=e,n(Object(l.a)(Object(l.a)({},o),{},{model:b,payloads:a}),s)},j=function(e){var t=Object(p.a)(o.payloads);t=t.filter((function(t,n){return n!==e})),n(Object(l.a)(Object(l.a)({},o),{},{payloads:t}),s)};function w(){return(w=Object(u.a)(Qh().mark((function e(){return Qh().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",us());case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}return Object(r.jsxs)("div",{className:h.modelPayload,children:[Object(r.jsxs)(Ml.a,{variant:"outlined",className:h.paperParams,children:[Object(r.jsx)("div",{style:{display:"flex",flexDirection:"row",alignItems:"center"},children:Object(r.jsx)(kl,{name:"metaModal",title:"Model",placeholder:"meta modal",fetchAPI:function(){return w.apply(this,arguments)},optionLabelKey:"name",onChange:function(e){v(e),function(e){var t=Object.assign({},Object(l.a)(Object(l.a)({},o),{},{model:b})),r=Object.assign([],t.payloads);r.forEach((function(e){var t;(null===e||void 0===e||null===(t=e.wsValue)||void 0===t?void 0:t.name)&&(e.wsValue=null)})),n(Object(l.a)(Object(l.a)({},o),{},{model:e,payloads:r}),s)}(e)},value:b,classes:{root:h.inputSelect}})}),Object(r.jsxs)("div",{className:h.modelParams,children:[Object(r.jsx)(yh,{className:h.line}),Object(r.jsxs)("div",{className:h.block,children:[Object(r.jsx)("div",{children:null===o||void 0===o||null===(t=o.payloads)||void 0===t?void 0:t.map((function(e,t){return e.payloads?Object(r.jsxs)(r.Fragment,{children:[Object(r.jsx)(ml.a,{InputLabelProps:"Payload",className:h.textField,placeholder:"Key",value:e.wsKey,onChange:function(n){return x(Object(l.a)(Object(l.a)({},e),{},{wsKey:n.target.value}),t)}}),Object(r.jsx)(ef,{addPayload:c,modelPayload:e,id:t,handleChangePayload:x,deleteModelPayload:j},t)]}):Object(r.jsx)(Xh,{handleChange:g,correspondingFields:"metaModel"===(null===b||void 0===b?void 0:b.type)?null===b||void 0===b?void 0:b.metaFields:(null===b||void 0===b||b.type,null===b||void 0===b?void 0:b.fields),deletePayload:j,payload:e,id:t},t)}))}),Object(r.jsxs)("div",{className:h.dialogTitle,style:{marginTop:20},children:[Object(r.jsxs)("div",{style:{display:"flex",flexDirection:"row",alignItems:"center",marginRight:20},children:[Object(r.jsx)(y.a,{id:"simple-dialog-title",onClick:function(){return function(){var e=Object.assign({},Object(l.a)(Object(l.a)({},o),{},{model:b})),t=Object.assign([],e.payloads);t.push({wsKey:null,wsValue:null,isList:!1,type:"Basic"}),n(Object(l.a)(Object(l.a)({},o),{},{model:b,payloads:t}),s)}()},className:h.dialogTitle,children:"Add payload"}),Object(r.jsx)(Wd.a,{})]}),Object(r.jsxs)("div",{style:{display:"flex",flexDirection:"row",alignItems:"center",marginRight:20},children:[Object(r.jsx)(y.a,{id:"simple-dialog-title",onClick:function(){return function(){var e=Object.assign({},Object(l.a)(Object(l.a)({},o),{},{model:b})),t=Object.assign([],e.payloads);t.push({wsKey:null,model:{},type:"Embedded",payloads:[{wsKey:null,wsValue:null,isList:!1,type:"Basic"}]}),n(Object(l.a)(Object(l.a)({},o),{},{model:b,payloads:t}),s)}()},className:h.dialogTitle,children:"Add embedded payload"}),Object(r.jsx)(Wd.a,{})]})]})]})]})]}),Object(r.jsx)(gh.a,{onClick:function(){return i(s)},className:h.icon})]})}var tf=Object(Mh.c)({name:"counter",initialState:{modelPayloads:[],queryCriteria:{}},reducers:{updateModelPayload:function(e,t){e.modelPayloads=t.payload},addModelPayload:function(e,t){e.modelPayloads.push(Object(l.a)(Object(l.a)({},t.payload),{},{payloads:[{id:1,wsKey:"",wsValue:"",isList:!1,subKeyValues:[],type:"Basic"}]}))},deleteModelPayload:function(e,t){e.modelPayloads=e.modelPayloads.filter((function(e){return e.id!==t.payload}))},updateCriteria:function(e,t){e.queryCriteria=t.payload}}}),nf=tf.actions,rf=nf.updateModelPayload,af=(nf.addModelPayload,nf.deleteModelPayload,nf.updateCriteria),of=tf.reducer,cf=Object(Tc.a)((function(e){return{paper:{margin:e.spacing(1),width:"calc(100% - 16px)",display:"flex",height:"calc(100% - 50px)",overflow:"hidden"},dialog:{width:"20%"},dialogPaper:{maxWidth:"70%",maxHeight:"80%",resize:"both",width:"70%",height:"90%"},root:{display:"flex",flexDirection:"column",alignItems:"flex-start",height:"100%",overflow:"hidden"},save:{margin:e.spacing(1),backgroundColor:"#0275d8",borderColor:"#0267bf",color:"white","&:hover":{backgroundColor:"#025aa5",borderColor:"#014682",color:"white"}},baseModelParams:{display:"flex",flexDirection:"row",width:"100%"},modelParams:{display:"flex",flexDirection:"row",width:"90%"},addBaseModelParams:{display:"flex",flexDirection:"column",height:"100%",width:"100%"},line:{width:"10%"},dialogTitle:{color:"#0274d7",paddingLeft:0,paddingRight:3,display:"flex",flexDirection:"row",alignItems:"center","& #simple-dialog-title":{cursor:"pointer"}},scrollDiv:{overflow:"scroll",height:550}}}));var sf=function(e){var t=e.onSave,n=e.initialData,o=e.handleClose,c=e.open,u=e.action,h=cf(),m=Object(a.useState)([]),b=Object(d.a)(m,2),w=b[0],O=b[1],E=i.a.useState({openAlert:!1,alertMessage:"Add all values",alertTitle:"Error"}),N=Object(d.a)(E,2),k=N[0],S=N[1],_=Object(a.useState)(!1),L=Object(d.a)(_,2),C=L[0],P=L[1],T=Object(s.b)(),M=Object(s.c)((function(e){return e.payloadReducer.queryCriteria})),A=function(){var e=!0;return w.forEach((function(t){t.payloads.forEach((function(t){var n;0!==(null===t||void 0===t||null===(n=t.wsKey)||void 0===n?void 0:n.length)&&null!==(null===t||void 0===t?void 0:t.wsKey)||null!==((null===t||void 0===t?void 0:t.wsValue)||(null===t||void 0===t?void 0:t.wsValue))||(e=!1)}))})),e},R=function(e){var t=w.filter((function(t,n){return n!==e}));O(t)},B=function(e,t){var n=Object.assign([],w),r=Object.assign([],n[e].payloads);r.push(t),n[e]=Object(l.a)(Object(l.a)({},n[e]),{},{payloads:r}),O(n)},D=function(e,t){var n=Object.assign([],w),r=Object.assign([],n[e].payloads);r.push(t),n[e]=Object(l.a)(Object(l.a)({},n[e]),{},{payloads:r}),O(n)},F=function(e,t){var n=Object(p.a)(w);n[t]=e,O(n)};return Object(a.useEffect)((function(){"EDIT"===u?0===(null===n||void 0===n?void 0:n.length)?O([{model:{},payloads:[{wsKey:null,wsValue:null,isList:!1,type:"Basic"}]}]):O(n):O([{model:{},payloads:[{wsKey:null,wsValue:null,isList:!1,type:"Basic"}]}])}),[u,n]),Object(r.jsxs)(v.a,{onClose:function(e,t){"backdropClick"!==t&&o()},"aria-labelledby":"simple-dialog-title",open:c,classes:{paper:h.dialogPaper},children:[Object(r.jsx)(y.a,{id:"simple-dialog-title",children:"Build payloads"}),Object(r.jsxs)("div",{className:h.root,children:[Object(r.jsx)(Ml.a,{variant:"outlined",className:h.paper,children:Object(r.jsxs)("div",{className:h.baseModelParams,children:[Object(r.jsx)(yh,{className:h.line}),Object(r.jsxs)("div",{className:h.addBaseModelParams,children:[Object(r.jsxs)("div",{className:h.dialogTitle,children:[Object(r.jsx)(y.a,{id:"simple-dialog-title",className:h.dialogTitle,onClick:function(){O([].concat(Object(p.a)(w),[{model:{},payloads:[{wsKey:null,wsValue:null,isList:!1,subKeyValues:[],type:"Basic"}]}]))},children:"Add base model Payloads"}),Object(r.jsx)(Wd.a,{}),Object(r.jsxs)("div",{style:{marginLeft:"auto"},className:h.dialogTitle,children:[Object(r.jsx)(y.a,{id:"simple-dialog-title",onClick:function(){return P(!0)},className:h.dialogTitle,style:{padding:0,cursor:"pointer"},children:"Define query"}),Object(r.jsx)(Ac.a,{style:{color:"#0274d7"}})]})]}),Object(r.jsx)("div",{className:h.scrollDiv,children:null===w||void 0===w?void 0:w.map((function(e,t){return Object(r.jsx)(ef,{handleChangePayload:F,addEmbeededPayload:D,addPayload:B,modelPayload:e,deleteModelPayload:R,id:t},t)}))})]})]})}),Object(r.jsxs)("div",{children:[Object(r.jsx)(f.a,{className:h.save,onClick:function(){A()?(t(w),o()):S(Object(l.a)(Object(l.a)({},k),{},{openAlert:!0}))},children:"OK"}),Object(r.jsx)(f.a,{className:h.save,onClick:function(){o()},style:{textTransform:"none"},children:"Cancel"})]})]}),k.openAlert&&Object(r.jsxs)(v.a,{open:k.openAlert,onClose:function(e,t){"backdropClick"!==t&&S(Object(l.a)(Object(l.a)({},k),{},{openAlert:!1}))},"aria-labelledby":"alert-dialog-title","aria-describedby":"alert-dialog-description",classes:{paper:h.dialog},children:[Object(r.jsx)(y.a,{id:"alert-dialog-title",children:k.alertTitle}),Object(r.jsx)(g.a,{children:Object(r.jsx)(x.a,{id:"alert-dialog-description",children:k.alertMessage})}),Object(r.jsx)(j.a,{children:Object(r.jsx)(f.a,{onClick:function(){S(Object(l.a)(Object(l.a)({},k),{},{openAlert:!1}))},color:"primary",autoFocus:!0,className:h.save,children:"Ok"})})]}),C&&Object(r.jsx)(yd,{setProperty:function(e){T(af(Object(l.a)({},e)))},title:"Criteria Query",parameters:{type:"bpmQuery"},getExpression:function(){var e;if(void 0!==(null===M||void 0===M?void 0:M.value))try{e=JSON.parse(null===M||void 0===M?void 0:M.value)}catch(t){}return{values:e,combinator:null===M||void 0===M?void 0:M.combinator}},open:C,close:function(){return P(!1)}})]})},lf=Object(nl.a)({root:{marginTop:5,width:"100%"},error:{color:"#CC3333"},label:{fontWeight:"bolder",display:"inline-block",verticalAlign:"middle",color:"white",marginBottom:3},containerTable:{display:"flex",flexDirection:"row"},newIcon:{color:"#58B423",marginLeft:5},empty:{backgroundColor:"white",border:"1px solid #CCCCCC",height:"200px",width:"100%"}});function uf(e){var t=e.element,n=(e.entry||{}).label,i=lf(),o=Object(s.c)((function(e){return e.requestReducer.modelParameters})),c=Object(s.c)((function(e){return e.payloadReducer.modelPayloads})),l=Object(s.c)((function(e){return e.headerReducer.headers})),u=Object(a.useState)([]),h=Object(d.a)(u,2),f=h[0],m=h[1],b=Object(a.useState)(""),v=Object(d.a)(b,2),y=v[0],g=v[1],x=Object(a.useState)(!1),j=Object(d.a)(x,2),w=j[0],O=j[1],E=Object(a.useState)(),N=Object(d.a)(E,2),k=N[0],S=N[1],_=Object(s.b)(),L=function(){O(!1)},C=function(e){_(rf("EDIT"===k?e:[].concat(Object(p.a)(c),Object(p.a)(e))))};Object(a.useEffect)((function(){var e,n,r;(null===t||void 0===t||null===(e=t.parent)||void 0===e?void 0:e.children[0].id)===(null===t||void 0===t?void 0:t.id)?(g("REQUEST"),m(o)):(null===t||void 0===t||null===(n=t.parent)||void 0===n?void 0:n.children[1].id)===(null===t||void 0===t?void 0:t.id)?(g("HEADER"),m(l)):(null===t||void 0===t||null===(r=t.parent)||void 0===r?void 0:r.children[2].id)===(null===t||void 0===t?void 0:t.id)&&(g("PAYLOAD"),m(c))}),[t,y,o,c,l]);return Object(r.jsxs)("div",{className:el()(i.root,!1),children:[n&&Object(r.jsx)("label",{className:el()(i.label),children:n}),Object(r.jsxs)("div",{className:el()(i.containerTable),children:[0===f.length?Object(r.jsx)("div",{className:i.empty}):Object(r.jsx)(bh,{type:"REQUEST"===y?"parameters":"PAYLOAD"===y?"payloads":"headers"}),Object(r.jsx)(Ac.a,{className:i.newIcon,onClick:function(){O(!0),S("EDIT")}}),Object(r.jsx)(Wd.a,{className:i.newIcon,onClick:function(){O(!0),S("ADD")}}),w&&("REQUEST"===y?Object(r.jsx)(Gh,{open:w,handleClose:L,action:k}):"HEADER"===y?Object(r.jsx)(Yh,{open:w,handleClose:L,action:k}):"PAYLOAD"===y?Object(r.jsx)(sf,{open:w,handleClose:L,action:k,onSave:C,initialData:c}):"")]})]})}var pf=n(261),df=n(595),hf=n(597),ff=Object(nl.a)({root:{display:"flex",flexDirection:"column",marginTop:5},label:{fontWeight:"bolder",color:"#666"},checkbox:{margin:"3px 3px 3px 0px"}});function mf(e){var t=e.entry,n=e.element,i=e.className,o=e.onChange,c=ff(),s=t||{},l=s.boxs,u=s.label;return Object(a.useEffect)((function(){}),[n.businessObject]),Object(r.jsxs)("div",{className:el()(c.root,i),children:[Object(r.jsx)("label",{className:el()(c.label),children:u}),l&&l.map((function(e,t){return Object(r.jsx)(hl,{entry:e,element:n,onChange:o},t)}))]})}var bf=Object(Mh.c)({name:"terget",initialState:{targets:[]},reducers:{updateTarget:function(e,t){e.targets=t.payload},addTarget:function(e){e.targets.push({model:null,target:null})},deleteTarget:function(e,t){e.targets=e.targets.filter((function(e){return e.id!==t.payload}))}}}),vf=bf.actions,yf=vf.updateTarget,gf=(vf.addTarget,vf.deleteTarget,bf.reducer),xf=Object(Mh.a)({reducer:{requestReducer:Ih,payloadReducer:of,headerReducer:Hh,contextReducer:gf}}),jf=[{type:"bpmn:Task",properties:[{name:"name",label:"Name",widget:"textField"},{name:"authRequest",isAttr:!0,label:"Auth request",widget:"many-to-one",fetchMethod:function(){return Ns()}}]},{type:"bpmn:Process-action",properties:[{name:"name",label:"Name",widget:"textField"},{name:"type",label:"Auth Type",widget:"selectBox",emptyParameter:!1,selectOptions:[{name:"Basic",default:"basic",value:"basic"},{name:"Qauth 2",default:"ouath2",value:"oauth2"}]},{name:"isAuthenticated",label:"",widget:"authentificationAction"}]},{type:"label",properties:[{name:"name",label:"Name",widget:"textBox"}]},{type:"bpmn:SequenceFlow",properties:[{name:"name",label:"Name",widget:"textBox"}]}],wf=[{type:"bpmn:Process-action",properties:[{name:"name",label:"Name",widget:"textField"},{name:"baseUrl",label:"Base Url",widget:"textField"},{name:"defaultWsAuthenticator",isAttr:!0,label:"Authentification to use",widget:"many-to-one",fetchMethod:function(){return Ps()}}]},{type:"bpmn:Query",properties:[{name:"name",label:"Name",widget:"textBox"},{name:"target",label:"Var",widget:"textField"},{name:"extendedQueryProperties",label:"",widget:"extendedQueryProperties"},{name:"returnType",label:"Return type",widget:"selectBox",emptyParameter:!0,selectOptions:[{name:"Map",value:"MAP"},{name:"Single",value:"SINGLE"},{name:"Multiple",value:"MULTIPLE"}]}]},{type:"bpmn:Mapper",properties:[{name:"authRequest",isAttr:!0,label:"Request",widget:"many-to-one",fetchMethod:function(){return Ns()}},{name:"name",label:"Name",widget:"textField",readOnly:!0},{name:"requestTypeSelect",label:"Type",widget:"selectBox",canBeDisabled:!0,emptyParameter:!0,selectOptions:[{name:"Post",default:"Post",value:"POST"},{name:"Get",value:"GET"},{name:"Put",value:"PUT"}]},{name:"test",label:"",widget:"testConnector"}]},{type:"label",properties:[{name:"name",label:"Name",widget:"textBox"}]},{type:"bpmn:SequenceFlow",properties:[{name:"name",label:"Name",widget:"textBox"}]}],Of=Object(nl.a)({root:{marginTop:5,width:"100%"},error:{color:"#CC3333"},label:{fontWeight:"bolder",display:"inline-block",verticalAlign:"middle",color:"white",marginBottom:3},containerTable:{display:"flex",flexDirection:"row"},newIcon:{color:"#58B423",marginLeft:5}});function Ef(e){e.element;var t=(e.entry||{}).label,n=Of();return Object(r.jsxs)("div",{className:el()(n.root,!1),children:[t&&Object(r.jsx)("label",{className:el()(n.label),children:t}),Object(r.jsxs)("div",{className:el()(n.containerTable),children:[Object(r.jsx)(ll,{}),Object(r.jsx)(Ac.a,{className:n.newIcon}),Object(r.jsx)(Wd.a,{className:n.newIcon})]})]})}var Nf=n(588),kf=n(589);function Sf(){Sf=function(){return e};var e={},t=Object.prototype,n=t.hasOwnProperty,r=Object.defineProperty||function(e,t,n){e[t]=n.value},a="function"==typeof Symbol?Symbol:{},i=a.iterator||"@@iterator",o=a.asyncIterator||"@@asyncIterator",c=a.toStringTag||"@@toStringTag";function s(e,t,n){return Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{s({},"")}catch(_){s=function(e,t,n){return e[t]=n}}function l(e,t,n,a){var i=t&&t.prototype instanceof d?t:d,o=Object.create(i.prototype),c=new N(a||[]);return r(o,"_invoke",{value:j(e,n,c)}),o}function u(e,t,n){try{return{type:"normal",arg:e.call(t,n)}}catch(_){return{type:"throw",arg:_}}}e.wrap=l;var p={};function d(){}function h(){}function f(){}var m={};s(m,i,(function(){return this}));var b=Object.getPrototypeOf,v=b&&b(b(k([])));v&&v!==t&&n.call(v,i)&&(m=v);var y=f.prototype=d.prototype=Object.create(m);function g(e){["next","throw","return"].forEach((function(t){s(e,t,(function(e){return this._invoke(t,e)}))}))}function x(e,t){function a(r,i,o,c){var s=u(e[r],e,i);if("throw"!==s.type){var l=s.arg,p=l.value;return p&&"object"==typeof p&&n.call(p,"__await")?t.resolve(p.__await).then((function(e){a("next",e,o,c)}),(function(e){a("throw",e,o,c)})):t.resolve(p).then((function(e){l.value=e,o(l)}),(function(e){return a("throw",e,o,c)}))}c(s.arg)}var i;r(this,"_invoke",{value:function(e,n){function r(){return new t((function(t,r){a(e,n,t,r)}))}return i=i?i.then(r,r):r()}})}function j(e,t,n){var r="suspendedStart";return function(a,i){if("executing"===r)throw new Error("Generator is already running");if("completed"===r){if("throw"===a)throw i;return S()}for(n.method=a,n.arg=i;;){var o=n.delegate;if(o){var c=w(o,n);if(c){if(c===p)continue;return c}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if("suspendedStart"===r)throw r="completed",n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);r="executing";var s=u(e,t,n);if("normal"===s.type){if(r=n.done?"completed":"suspendedYield",s.arg===p)continue;return{value:s.arg,done:n.done}}"throw"===s.type&&(r="completed",n.method="throw",n.arg=s.arg)}}}function w(e,t){var n=e.iterator[t.method];if(void 0===n){if(t.delegate=null,"throw"===t.method){if(e.iterator.return&&(t.method="return",t.arg=void 0,w(e,t),"throw"===t.method))return p;t.method="throw",t.arg=new TypeError("The iterator does not provide a 'throw' method")}return p}var r=u(n,e.iterator,t.arg);if("throw"===r.type)return t.method="throw",t.arg=r.arg,t.delegate=null,p;var a=r.arg;return a?a.done?(t[e.resultName]=a.value,t.next=e.nextLoc,"return"!==t.method&&(t.method="next",t.arg=void 0),t.delegate=null,p):a:(t.method="throw",t.arg=new TypeError("iterator result is not an object"),t.delegate=null,p)}function O(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function E(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function N(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(O,this),this.reset(!0)}function k(e){if(e){var t=e[i];if(t)return t.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var r=-1,a=function t(){for(;++r<e.length;)if(n.call(e,r))return t.value=e[r],t.done=!1,t;return t.value=void 0,t.done=!0,t};return a.next=a}}return{next:S}}function S(){return{value:void 0,done:!0}}return h.prototype=f,r(y,"constructor",{value:f,configurable:!0}),r(f,"constructor",{value:h,configurable:!0}),h.displayName=s(f,c,"GeneratorFunction"),e.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===h||"GeneratorFunction"===(t.displayName||t.name))},e.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,f):(e.__proto__=f,s(e,c,"GeneratorFunction")),e.prototype=Object.create(y),e},e.awrap=function(e){return{__await:e}},g(x.prototype),s(x.prototype,o,(function(){return this})),e.AsyncIterator=x,e.async=function(t,n,r,a,i){void 0===i&&(i=Promise);var o=new x(l(t,n,r,a),i);return e.isGeneratorFunction(n)?o:o.next().then((function(e){return e.done?e.value:o.next()}))},g(y),s(y,c,"Generator"),s(y,i,(function(){return this})),s(y,"toString",(function(){return"[object Generator]"})),e.keys=function(e){var t=Object(e),n=[];for(var r in t)n.push(r);return n.reverse(),function e(){for(;n.length;){var r=n.pop();if(r in t)return e.value=r,e.done=!1,e}return e.done=!0,e}},e.values=k,N.prototype={constructor:N,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(E),!e)for(var t in this)"t"===t.charAt(0)&&n.call(this,t)&&!isNaN(+t.slice(1))&&(this[t]=void 0)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var t=this;function r(n,r){return o.type="throw",o.arg=e,t.next=n,r&&(t.method="next",t.arg=void 0),!!r}for(var a=this.tryEntries.length-1;a>=0;--a){var i=this.tryEntries[a],o=i.completion;if("root"===i.tryLoc)return r("end");if(i.tryLoc<=this.prev){var c=n.call(i,"catchLoc"),s=n.call(i,"finallyLoc");if(c&&s){if(this.prev<i.catchLoc)return r(i.catchLoc,!0);if(this.prev<i.finallyLoc)return r(i.finallyLoc)}else if(c){if(this.prev<i.catchLoc)return r(i.catchLoc,!0)}else{if(!s)throw new Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return r(i.finallyLoc)}}}},abrupt:function(e,t){for(var r=this.tryEntries.length-1;r>=0;--r){var a=this.tryEntries[r];if(a.tryLoc<=this.prev&&n.call(a,"finallyLoc")&&this.prev<a.finallyLoc){var i=a;break}}i&&("break"===e||"continue"===e)&&i.tryLoc<=t&&t<=i.finallyLoc&&(i=null);var o=i?i.completion:{};return o.type=e,o.arg=t,i?(this.method="next",this.next=i.finallyLoc,p):this.complete(o)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),p},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.finallyLoc===e)return this.complete(n.completion,n.afterLoc),E(n),p}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.tryLoc===e){var r=n.completion;if("throw"===r.type){var a=r.arg;E(n)}return a}}throw new Error("illegal catch attempt")},delegateYield:function(e,t,n){return this.delegate={iterator:k(e),resultName:t,nextLoc:n},"next"===this.method&&(this.arg=void 0),p}},e}var _f=Object(nl.a)({desciption:{marginTop:5,minHeight:"400px",backgroundColor:"#656565",borderRadius:"15px"},title:{backgroundColor:"#424242",color:"white",padding:"7px",borderTopRightRadius:"10px",borderTopLeftRadius:"10px"},testArea:{},success:{backgroundColor:"white",color:"green",padding:5,margin:15},error:{backgroundColor:"white",color:"red",padding:5,margin:15},console:{color:"white",borderRadius:20,margin:15,minHeight:"40%",fontWeight:"bold !important","& .json-formatter-key":{color:"#EBC456 !important",marginRight:5},"& .json-formatter-string":{color:"white !important",width:"100%",display:"block"},"& .json-formatter-boolean":{color:"white !important"},"& .json-formatter-number":{color:"white !important"},"& .json-formatter-function":{color:"white !important"},"& .json-formatter-row":{marginBottom:8}},buttons:{display:"flex",flexDirection:"row",justifyContent:"space-between"},btn:{display:"flex",flexDirection:"column",margin:10,backgroundColor:"#0275d8",borderColor:"#0267bf",color:"white",alignItems:"center",lineHeight:0,justifyContent:"center",textTransform:"none",textDecoration:"none","&:hover":{backgroundColor:"#025aa5",borderColor:"#014682",color:"white"}},result:{padding:10,color:"white"}}),Lf=function(){var e=_f();return Object(r.jsx)("div",{className:e.success,children:"Success, Your query run Successfully"})},Cf=function(){var e=_f();return Object(r.jsx)("div",{className:e.error,children:"Error, Your query is incorrect"})};function Pf(e){var t=e.type,n=e.connector,i=e.element,o=_f(),c=Object(a.useState)({status:null,data:"no data"}),l=Object(d.a)(c,2),p=l[0],h=l[1],m=Object(s.c)((function(e){return e.contextReducer.targets})),b=function(){var e=Object(u.a)(Sf().mark((function e(){var t,r,a,o,c,s,l;return Sf().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return c={model:"com.axelor.studio.db.WsConnector",action:"action-ws-connector-method-call-connector",data:{context:{connector:n,authenticator:i.parent.businessObject.defaultWsAuthenticator,_recordId:null===(t=m[0])||void 0===t||null===(r=t.target)||void 0===r?void 0:r.id,_recordModel:null===(a=m[0])||void 0===a||null===(o=a.model)||void 0===o?void 0:o.fullName}}},e.next=3,ts(c);case 3:s=e.sent,console.log(s),0===(null===s||void 0===s?void 0:s.status)&&(null===s||void 0===s?void 0:s.data)?h({status:!0,data:(null===s||void 0===s||null===(l=s.data[0])||void 0===l?void 0:l.values)?null===s||void 0===s?void 0:s.data[0].values:null===s||void 0===s?void 0:s.data[0]}):h({status:!1,data:(null===s||void 0===s?void 0:s.data)instanceof Array?null===s||void 0===s?void 0:s.data[0]:null===s||void 0===s?void 0:s.data});case 6:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return Object(a.useEffect)((function(){null!=document.getElementById("result")&&(document.getElementById("result").innerHTML=""),document.getElementById("result").innerHTML=JSON.stringify((null===p||void 0===p?void 0:p.data)?null===p||void 0===p?void 0:p.data:"Error while parsing result ! make sure you made the right request's specifications",void 0,2).replace(/\\n/g,"<br/>")}),[null===p||void 0===p?void 0:p.data]),Object(r.jsxs)(r.Fragment,{children:[Object(r.jsxs)("div",{className:el()(o.desciption,t&&o.error),children:[Object(r.jsx)("div",{className:o.title,children:"Query Trace"}),Object(r.jsxs)("div",{className:o.testArea,children:[(null===p||void 0===p?void 0:p.status)&&null!==(null===p||void 0===p?void 0:p.status)&&Object(r.jsx)(r.Fragment,{children:Object(r.jsx)(Lf,{})}),!(null===p||void 0===p?void 0:p.status)&&null!==(null===p||void 0===p?void 0:p.status)&&Object(r.jsx)(Cf,{}),Object(r.jsx)("div",{className:o.console,id:"result"})]})]}),Object(r.jsx)("div",{children:Object(r.jsxs)("div",{className:o.buttons,children:[null!=(null===p||void 0===p?void 0:p.status)&&Object(r.jsxs)(f.a,{onClick:function(){h({status:null,data:"no data"})},className:o.btn,children:[Object(r.jsx)(Nf.a,{}),Object(r.jsx)("div",{children:"Reset"})]}),Object(r.jsxs)(f.a,{onClick:function(){0===(null===m||void 0===m?void 0:m.length)?h({status:!1,data:"please provide a context to be executed !"}):b()},className:o.btn,children:[Object(r.jsx)(kf.a,{}),Object(r.jsx)("div",{children:"Run query test"})]})]})})]})}function Tf(){Tf=function(){return e};var e={},t=Object.prototype,n=t.hasOwnProperty,r=Object.defineProperty||function(e,t,n){e[t]=n.value},a="function"==typeof Symbol?Symbol:{},i=a.iterator||"@@iterator",o=a.asyncIterator||"@@asyncIterator",c=a.toStringTag||"@@toStringTag";function s(e,t,n){return Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{s({},"")}catch(_){s=function(e,t,n){return e[t]=n}}function l(e,t,n,a){var i=t&&t.prototype instanceof d?t:d,o=Object.create(i.prototype),c=new N(a||[]);return r(o,"_invoke",{value:j(e,n,c)}),o}function u(e,t,n){try{return{type:"normal",arg:e.call(t,n)}}catch(_){return{type:"throw",arg:_}}}e.wrap=l;var p={};function d(){}function h(){}function f(){}var m={};s(m,i,(function(){return this}));var b=Object.getPrototypeOf,v=b&&b(b(k([])));v&&v!==t&&n.call(v,i)&&(m=v);var y=f.prototype=d.prototype=Object.create(m);function g(e){["next","throw","return"].forEach((function(t){s(e,t,(function(e){return this._invoke(t,e)}))}))}function x(e,t){function a(r,i,o,c){var s=u(e[r],e,i);if("throw"!==s.type){var l=s.arg,p=l.value;return p&&"object"==typeof p&&n.call(p,"__await")?t.resolve(p.__await).then((function(e){a("next",e,o,c)}),(function(e){a("throw",e,o,c)})):t.resolve(p).then((function(e){l.value=e,o(l)}),(function(e){return a("throw",e,o,c)}))}c(s.arg)}var i;r(this,"_invoke",{value:function(e,n){function r(){return new t((function(t,r){a(e,n,t,r)}))}return i=i?i.then(r,r):r()}})}function j(e,t,n){var r="suspendedStart";return function(a,i){if("executing"===r)throw new Error("Generator is already running");if("completed"===r){if("throw"===a)throw i;return S()}for(n.method=a,n.arg=i;;){var o=n.delegate;if(o){var c=w(o,n);if(c){if(c===p)continue;return c}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if("suspendedStart"===r)throw r="completed",n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);r="executing";var s=u(e,t,n);if("normal"===s.type){if(r=n.done?"completed":"suspendedYield",s.arg===p)continue;return{value:s.arg,done:n.done}}"throw"===s.type&&(r="completed",n.method="throw",n.arg=s.arg)}}}function w(e,t){var n=e.iterator[t.method];if(void 0===n){if(t.delegate=null,"throw"===t.method){if(e.iterator.return&&(t.method="return",t.arg=void 0,w(e,t),"throw"===t.method))return p;t.method="throw",t.arg=new TypeError("The iterator does not provide a 'throw' method")}return p}var r=u(n,e.iterator,t.arg);if("throw"===r.type)return t.method="throw",t.arg=r.arg,t.delegate=null,p;var a=r.arg;return a?a.done?(t[e.resultName]=a.value,t.next=e.nextLoc,"return"!==t.method&&(t.method="next",t.arg=void 0),t.delegate=null,p):a:(t.method="throw",t.arg=new TypeError("iterator result is not an object"),t.delegate=null,p)}function O(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function E(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function N(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(O,this),this.reset(!0)}function k(e){if(e){var t=e[i];if(t)return t.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var r=-1,a=function t(){for(;++r<e.length;)if(n.call(e,r))return t.value=e[r],t.done=!1,t;return t.value=void 0,t.done=!0,t};return a.next=a}}return{next:S}}function S(){return{value:void 0,done:!0}}return h.prototype=f,r(y,"constructor",{value:f,configurable:!0}),r(f,"constructor",{value:h,configurable:!0}),h.displayName=s(f,c,"GeneratorFunction"),e.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===h||"GeneratorFunction"===(t.displayName||t.name))},e.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,f):(e.__proto__=f,s(e,c,"GeneratorFunction")),e.prototype=Object.create(y),e},e.awrap=function(e){return{__await:e}},g(x.prototype),s(x.prototype,o,(function(){return this})),e.AsyncIterator=x,e.async=function(t,n,r,a,i){void 0===i&&(i=Promise);var o=new x(l(t,n,r,a),i);return e.isGeneratorFunction(n)?o:o.next().then((function(e){return e.done?e.value:o.next()}))},g(y),s(y,c,"Generator"),s(y,i,(function(){return this})),s(y,"toString",(function(){return"[object Generator]"})),e.keys=function(e){var t=Object(e),n=[];for(var r in t)n.push(r);return n.reverse(),function e(){for(;n.length;){var r=n.pop();if(r in t)return e.value=r,e.done=!1,e}return e.done=!0,e}},e.values=k,N.prototype={constructor:N,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(E),!e)for(var t in this)"t"===t.charAt(0)&&n.call(this,t)&&!isNaN(+t.slice(1))&&(this[t]=void 0)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var t=this;function r(n,r){return o.type="throw",o.arg=e,t.next=n,r&&(t.method="next",t.arg=void 0),!!r}for(var a=this.tryEntries.length-1;a>=0;--a){var i=this.tryEntries[a],o=i.completion;if("root"===i.tryLoc)return r("end");if(i.tryLoc<=this.prev){var c=n.call(i,"catchLoc"),s=n.call(i,"finallyLoc");if(c&&s){if(this.prev<i.catchLoc)return r(i.catchLoc,!0);if(this.prev<i.finallyLoc)return r(i.finallyLoc)}else if(c){if(this.prev<i.catchLoc)return r(i.catchLoc,!0)}else{if(!s)throw new Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return r(i.finallyLoc)}}}},abrupt:function(e,t){for(var r=this.tryEntries.length-1;r>=0;--r){var a=this.tryEntries[r];if(a.tryLoc<=this.prev&&n.call(a,"finallyLoc")&&this.prev<a.finallyLoc){var i=a;break}}i&&("break"===e||"continue"===e)&&i.tryLoc<=t&&t<=i.finallyLoc&&(i=null);var o=i?i.completion:{};return o.type=e,o.arg=t,i?(this.method="next",this.next=i.finallyLoc,p):this.complete(o)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),p},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.finallyLoc===e)return this.complete(n.completion,n.afterLoc),E(n),p}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.tryLoc===e){var r=n.completion;if("throw"===r.type){var a=r.arg;E(n)}return a}}throw new Error("illegal catch attempt")},delegateYield:function(e,t,n){return this.delegate={iterator:k(e),resultName:t,nextLoc:n},"next"===this.method&&(this.arg=void 0),p}},e}function Mf(){return Af.apply(this,arguments)}function Af(){return(Af=Object(u.a)(Tf().mark((function e(){var t,n,r,a,i=arguments;return Tf().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=i.length>0&&void 0!==i[0]?i[0]:{},e.next=3,Vc.add("com.axelor.studio.db.WsRequest",t);case 3:if(!(n=e.sent)||n.ok){e.next=6;break}return e.abrupt("return",n);case 6:return r=(n||{}).data,a=void 0===r?[]:r,e.abrupt("return",a);case 8:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var Rf=n(590),Bf=Object(nl.a)({root:{display:"flex",flexDirection:"column",marginTop:5,width:"100%"},error:{borderColor:"#cc3333 !important",background:"#f0c2c2","&:focus":{boxShadow:"rgba(204,58,51, 0.2) 0px 0px 1px 2px !important",outline:"none",borderColor:"#cc3333 !important"}},label:{fontWeight:"bolder",display:"inline-block",verticalAlign:"middle",color:"#666",marginBottom:3},fieldWrapper:{position:"relative",display:"flex",flexDirection:"row",justifyContent:"center"},input:{width:"calc(100% - 35px)",padding:"3px 28px 3px 6px ",border:"1px solid #ccc","&:focus":{boxShadow:"rgba(82, 180, 21, 0.2) 0px 0px 1px 2px",outline:"none",borderColor:"rgb(82, 180, 21)"}},clearButton:{background:"transparent",border:"none",top:0,right:0,position:"absolute",height:23,width:24,overflow:"hidden",cursor:"pointer",display:"flex",alignItems:"center"},newIcon:{color:"#58B423",marginLeft:5},clear:{fontSize:"1rem"},readOnly:{borderColor:"#ccc !important",background:"#E3E3E3","&:focus":{boxShadow:"none !important",outline:"none",borderColor:"#ccc !important"}}});function Df(e){var t=e.entry,n=e.element,o=e.canRemove,c=void 0!==o&&o,l=e.rootClass,u=e.labelClass,h=(e.type,e.isLabel),f=void 0===h||h,m=e.readOnly,b=void 0!==m&&m,v=e.bpmnModeler,y=Bf(),g=t||{},x=g.label,j=g.description,w=g.name,O=g.modelProperty,E=g.set,N=g.get,k=Object(a.useState)(null),S=Object(d.a)(k,2),_=S[0],L=S[1],C=Object(a.useState)(b),P=Object(d.a)(C,2),T=P[0],M=P[1],A=Object(s.b)(),R=Object(s.c)((function(e){return e.payloadReducer.modelPayloads})),B=i.a.useCallback((function(){return n.businessObject[w]}),[n,w]),D=function(e){E?E(n,Object(Bc.a)({},O,e)):function(e){if(v){v.get("modeling").updateProperties(n,Object(Bc.a)({},w,e)),n[w]=e;var t=Object(p.a)(R);"Username"===n.businessObject.name?(t[0]={id:null,wsKey:"username",wsValue:e},A(rf(t))):"Password"===n.businessObject.name&&(t[1]={id:null,wsKey:"password",wsValue:e},A(rf(t)))}}(e)};return Object(a.useEffect)((function(){if(n){var e;if(N){var t=N();e=t&&t[O]}else e=B();L(e)}}),[n,N,B,O]),Object(r.jsxs)("div",{className:el()(y.root,l),children:[f&&Object(r.jsx)("label",{className:el()(y.label,u),children:x}),Object(r.jsxs)("div",{className:y.fieldWrapper,children:[Object(r.jsx)("input",{id:"camunda-".concat(w,"_").concat(Date()),type:"Password"===n.businessObject.name?"password":"text",readOnly:T,name:w,value:_||"",onChange:function(e){return L(e.target.value)},className:el()(y.input,b&&y.readOnly),onBlur:function(e){return D(e.target.value)}}),c&&_&&Object(r.jsx)("button",{onClick:function(){L(""),D(void 0)},className:y.clearButton,children:Object(r.jsx)(cl.a,{className:y.clear})}),T&&Object(r.jsx)(Ac.a,{className:y.newIcon,onClick:function(){return M(!T)}}),!T&&Object(r.jsx)(Rf.a,{className:y.newIcon,onClick:function(){M(!T)}}),Object(r.jsx)(gh.a,{className:y.newIcon})]}),j&&Object(r.jsx)(al,{desciption:j})]})}var Ff=n(380),If=n.n(Ff);function Vf(){Vf=function(){return e};var e={},t=Object.prototype,n=t.hasOwnProperty,r=Object.defineProperty||function(e,t,n){e[t]=n.value},a="function"==typeof Symbol?Symbol:{},i=a.iterator||"@@iterator",o=a.asyncIterator||"@@asyncIterator",c=a.toStringTag||"@@toStringTag";function s(e,t,n){return Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{s({},"")}catch(_){s=function(e,t,n){return e[t]=n}}function l(e,t,n,a){var i=t&&t.prototype instanceof d?t:d,o=Object.create(i.prototype),c=new N(a||[]);return r(o,"_invoke",{value:j(e,n,c)}),o}function u(e,t,n){try{return{type:"normal",arg:e.call(t,n)}}catch(_){return{type:"throw",arg:_}}}e.wrap=l;var p={};function d(){}function h(){}function f(){}var m={};s(m,i,(function(){return this}));var b=Object.getPrototypeOf,v=b&&b(b(k([])));v&&v!==t&&n.call(v,i)&&(m=v);var y=f.prototype=d.prototype=Object.create(m);function g(e){["next","throw","return"].forEach((function(t){s(e,t,(function(e){return this._invoke(t,e)}))}))}function x(e,t){function a(r,i,o,c){var s=u(e[r],e,i);if("throw"!==s.type){var l=s.arg,p=l.value;return p&&"object"==typeof p&&n.call(p,"__await")?t.resolve(p.__await).then((function(e){a("next",e,o,c)}),(function(e){a("throw",e,o,c)})):t.resolve(p).then((function(e){l.value=e,o(l)}),(function(e){return a("throw",e,o,c)}))}c(s.arg)}var i;r(this,"_invoke",{value:function(e,n){function r(){return new t((function(t,r){a(e,n,t,r)}))}return i=i?i.then(r,r):r()}})}function j(e,t,n){var r="suspendedStart";return function(a,i){if("executing"===r)throw new Error("Generator is already running");if("completed"===r){if("throw"===a)throw i;return S()}for(n.method=a,n.arg=i;;){var o=n.delegate;if(o){var c=w(o,n);if(c){if(c===p)continue;return c}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if("suspendedStart"===r)throw r="completed",n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);r="executing";var s=u(e,t,n);if("normal"===s.type){if(r=n.done?"completed":"suspendedYield",s.arg===p)continue;return{value:s.arg,done:n.done}}"throw"===s.type&&(r="completed",n.method="throw",n.arg=s.arg)}}}function w(e,t){var n=e.iterator[t.method];if(void 0===n){if(t.delegate=null,"throw"===t.method){if(e.iterator.return&&(t.method="return",t.arg=void 0,w(e,t),"throw"===t.method))return p;t.method="throw",t.arg=new TypeError("The iterator does not provide a 'throw' method")}return p}var r=u(n,e.iterator,t.arg);if("throw"===r.type)return t.method="throw",t.arg=r.arg,t.delegate=null,p;var a=r.arg;return a?a.done?(t[e.resultName]=a.value,t.next=e.nextLoc,"return"!==t.method&&(t.method="next",t.arg=void 0),t.delegate=null,p):a:(t.method="throw",t.arg=new TypeError("iterator result is not an object"),t.delegate=null,p)}function O(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function E(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function N(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(O,this),this.reset(!0)}function k(e){if(e){var t=e[i];if(t)return t.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var r=-1,a=function t(){for(;++r<e.length;)if(n.call(e,r))return t.value=e[r],t.done=!1,t;return t.value=void 0,t.done=!0,t};return a.next=a}}return{next:S}}function S(){return{value:void 0,done:!0}}return h.prototype=f,r(y,"constructor",{value:f,configurable:!0}),r(f,"constructor",{value:h,configurable:!0}),h.displayName=s(f,c,"GeneratorFunction"),e.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===h||"GeneratorFunction"===(t.displayName||t.name))},e.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,f):(e.__proto__=f,s(e,c,"GeneratorFunction")),e.prototype=Object.create(y),e},e.awrap=function(e){return{__await:e}},g(x.prototype),s(x.prototype,o,(function(){return this})),e.AsyncIterator=x,e.async=function(t,n,r,a,i){void 0===i&&(i=Promise);var o=new x(l(t,n,r,a),i);return e.isGeneratorFunction(n)?o:o.next().then((function(e){return e.done?e.value:o.next()}))},g(y),s(y,c,"Generator"),s(y,i,(function(){return this})),s(y,"toString",(function(){return"[object Generator]"})),e.keys=function(e){var t=Object(e),n=[];for(var r in t)n.push(r);return n.reverse(),function e(){for(;n.length;){var r=n.pop();if(r in t)return e.value=r,e.done=!1,e}return e.done=!0,e}},e.values=k,N.prototype={constructor:N,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(E),!e)for(var t in this)"t"===t.charAt(0)&&n.call(this,t)&&!isNaN(+t.slice(1))&&(this[t]=void 0)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var t=this;function r(n,r){return o.type="throw",o.arg=e,t.next=n,r&&(t.method="next",t.arg=void 0),!!r}for(var a=this.tryEntries.length-1;a>=0;--a){var i=this.tryEntries[a],o=i.completion;if("root"===i.tryLoc)return r("end");if(i.tryLoc<=this.prev){var c=n.call(i,"catchLoc"),s=n.call(i,"finallyLoc");if(c&&s){if(this.prev<i.catchLoc)return r(i.catchLoc,!0);if(this.prev<i.finallyLoc)return r(i.finallyLoc)}else if(c){if(this.prev<i.catchLoc)return r(i.catchLoc,!0)}else{if(!s)throw new Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return r(i.finallyLoc)}}}},abrupt:function(e,t){for(var r=this.tryEntries.length-1;r>=0;--r){var a=this.tryEntries[r];if(a.tryLoc<=this.prev&&n.call(a,"finallyLoc")&&this.prev<a.finallyLoc){var i=a;break}}i&&("break"===e||"continue"===e)&&i.tryLoc<=t&&t<=i.finallyLoc&&(i=null);var o=i?i.completion:{};return o.type=e,o.arg=t,i?(this.method="next",this.next=i.finallyLoc,p):this.complete(o)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),p},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.finallyLoc===e)return this.complete(n.completion,n.afterLoc),E(n),p}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.tryLoc===e){var r=n.completion;if("throw"===r.type){var a=r.arg;E(n)}return a}}throw new Error("illegal catch attempt")},delegateYield:function(e,t,n){return this.delegate={iterator:k(e),resultName:t,nextLoc:n},"next"===this.method&&(this.arg=void 0),p}},e}var Gf=Object(nl.a)({desciption:{marginTop:5,minHeight:"400px",backgroundColor:"#656565",borderRadius:"15px"},title:{backgroundColor:"#424242",color:"#676767",padding:"7px",borderTopRightRadius:"10px",borderTopLeftRadius:"10px"},checkbox:{color:"#676767",fontSize:50,"&.Mui-checked":{color:"#0275d8"},"& .MuiSvgIcon-root":{fontSize:22}},root:{display:"flex",flexDirection:"row",alignItems:"center"},success:{backgroundColor:"white",color:"green",padding:5,margin:15},error:{backgroundColor:"white",color:"red",padding:5,margin:15},btn:{display:"flex",flexDirection:"column",margin:10,backgroundColor:"#0275d8",borderColor:"#0267bf",color:"white",alignItems:"center",justifyContent:"center",textDecoration:"none","&:hover":{backgroundColor:"#025aa5",borderColor:"#014682",color:"white"}},formControlLabel:{marginLeft:"1%","&.MuiFormControlLabel-root":{color:"#676767"}},notAuth:{color:"red"}});function Wf(e){var t=e.label,n=e.element,i=e.bpmnModeler,o=e.entry,c=e.action,s=Gf(),l=Object(a.useState)(!1),p=Object(d.a)(l,2),h=p[0],m=p[1],b=Object(a.useState)(n.businessObject.isAuthenticated),v=Object(d.a)(b,2),y=v[0],g=v[1],x=(o||{}).name;return Object(r.jsxs)("div",{className:s.root,children:[!y&&Object(r.jsx)(f.a,{className:s.btn,onClick:Object(u.a)(Vf().mark((function e(){return Vf().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,c();case 2:!1===e.sent?(m(!0),setTimeout((function(){m(!1)}),3e3)):(i.get("modeling").updateProperties(n,Object(Bc.a)({},x,!0)),n.businessObject[x]=!0,g(!0));case 4:case"end":return e.stop()}}),e)}))),children:"Authentificate"}),Object(r.jsx)(ql.a,{className:s.formControlLabel,control:Object(r.jsx)(dd.a,{onClick:function(){!0===y&&(g(!1),n.businessObject[x]=!1)},className:s.checkbox}),checked:y,label:t}),h&&Object(r.jsx)("p",{className:s.notAuth,children:"Not authorized"})]})}function $f(){$f=function(){return e};var e={},t=Object.prototype,n=t.hasOwnProperty,r=Object.defineProperty||function(e,t,n){e[t]=n.value},a="function"==typeof Symbol?Symbol:{},i=a.iterator||"@@iterator",o=a.asyncIterator||"@@asyncIterator",c=a.toStringTag||"@@toStringTag";function s(e,t,n){return Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{s({},"")}catch(_){s=function(e,t,n){return e[t]=n}}function l(e,t,n,a){var i=t&&t.prototype instanceof d?t:d,o=Object.create(i.prototype),c=new N(a||[]);return r(o,"_invoke",{value:j(e,n,c)}),o}function u(e,t,n){try{return{type:"normal",arg:e.call(t,n)}}catch(_){return{type:"throw",arg:_}}}e.wrap=l;var p={};function d(){}function h(){}function f(){}var m={};s(m,i,(function(){return this}));var b=Object.getPrototypeOf,v=b&&b(b(k([])));v&&v!==t&&n.call(v,i)&&(m=v);var y=f.prototype=d.prototype=Object.create(m);function g(e){["next","throw","return"].forEach((function(t){s(e,t,(function(e){return this._invoke(t,e)}))}))}function x(e,t){function a(r,i,o,c){var s=u(e[r],e,i);if("throw"!==s.type){var l=s.arg,p=l.value;return p&&"object"==typeof p&&n.call(p,"__await")?t.resolve(p.__await).then((function(e){a("next",e,o,c)}),(function(e){a("throw",e,o,c)})):t.resolve(p).then((function(e){l.value=e,o(l)}),(function(e){return a("throw",e,o,c)}))}c(s.arg)}var i;r(this,"_invoke",{value:function(e,n){function r(){return new t((function(t,r){a(e,n,t,r)}))}return i=i?i.then(r,r):r()}})}function j(e,t,n){var r="suspendedStart";return function(a,i){if("executing"===r)throw new Error("Generator is already running");if("completed"===r){if("throw"===a)throw i;return S()}for(n.method=a,n.arg=i;;){var o=n.delegate;if(o){var c=w(o,n);if(c){if(c===p)continue;return c}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if("suspendedStart"===r)throw r="completed",n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);r="executing";var s=u(e,t,n);if("normal"===s.type){if(r=n.done?"completed":"suspendedYield",s.arg===p)continue;return{value:s.arg,done:n.done}}"throw"===s.type&&(r="completed",n.method="throw",n.arg=s.arg)}}}function w(e,t){var n=e.iterator[t.method];if(void 0===n){if(t.delegate=null,"throw"===t.method){if(e.iterator.return&&(t.method="return",t.arg=void 0,w(e,t),"throw"===t.method))return p;t.method="throw",t.arg=new TypeError("The iterator does not provide a 'throw' method")}return p}var r=u(n,e.iterator,t.arg);if("throw"===r.type)return t.method="throw",t.arg=r.arg,t.delegate=null,p;var a=r.arg;return a?a.done?(t[e.resultName]=a.value,t.next=e.nextLoc,"return"!==t.method&&(t.method="next",t.arg=void 0),t.delegate=null,p):a:(t.method="throw",t.arg=new TypeError("iterator result is not an object"),t.delegate=null,p)}function O(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function E(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function N(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(O,this),this.reset(!0)}function k(e){if(e){var t=e[i];if(t)return t.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var r=-1,a=function t(){for(;++r<e.length;)if(n.call(e,r))return t.value=e[r],t.done=!1,t;return t.value=void 0,t.done=!0,t};return a.next=a}}return{next:S}}function S(){return{value:void 0,done:!0}}return h.prototype=f,r(y,"constructor",{value:f,configurable:!0}),r(f,"constructor",{value:h,configurable:!0}),h.displayName=s(f,c,"GeneratorFunction"),e.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===h||"GeneratorFunction"===(t.displayName||t.name))},e.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,f):(e.__proto__=f,s(e,c,"GeneratorFunction")),e.prototype=Object.create(y),e},e.awrap=function(e){return{__await:e}},g(x.prototype),s(x.prototype,o,(function(){return this})),e.AsyncIterator=x,e.async=function(t,n,r,a,i){void 0===i&&(i=Promise);var o=new x(l(t,n,r,a),i);return e.isGeneratorFunction(n)?o:o.next().then((function(e){return e.done?e.value:o.next()}))},g(y),s(y,c,"Generator"),s(y,i,(function(){return this})),s(y,"toString",(function(){return"[object Generator]"})),e.keys=function(e){var t=Object(e),n=[];for(var r in t)n.push(r);return n.reverse(),function e(){for(;n.length;){var r=n.pop();if(r in t)return e.value=r,e.done=!1,e}return e.done=!0,e}},e.values=k,N.prototype={constructor:N,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(E),!e)for(var t in this)"t"===t.charAt(0)&&n.call(this,t)&&!isNaN(+t.slice(1))&&(this[t]=void 0)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var t=this;function r(n,r){return o.type="throw",o.arg=e,t.next=n,r&&(t.method="next",t.arg=void 0),!!r}for(var a=this.tryEntries.length-1;a>=0;--a){var i=this.tryEntries[a],o=i.completion;if("root"===i.tryLoc)return r("end");if(i.tryLoc<=this.prev){var c=n.call(i,"catchLoc"),s=n.call(i,"finallyLoc");if(c&&s){if(this.prev<i.catchLoc)return r(i.catchLoc,!0);if(this.prev<i.finallyLoc)return r(i.finallyLoc)}else if(c){if(this.prev<i.catchLoc)return r(i.catchLoc,!0)}else{if(!s)throw new Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return r(i.finallyLoc)}}}},abrupt:function(e,t){for(var r=this.tryEntries.length-1;r>=0;--r){var a=this.tryEntries[r];if(a.tryLoc<=this.prev&&n.call(a,"finallyLoc")&&this.prev<a.finallyLoc){var i=a;break}}i&&("break"===e||"continue"===e)&&i.tryLoc<=t&&t<=i.finallyLoc&&(i=null);var o=i?i.completion:{};return o.type=e,o.arg=t,i?(this.method="next",this.next=i.finallyLoc,p):this.complete(o)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),p},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.finallyLoc===e)return this.complete(n.completion,n.afterLoc),E(n),p}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.tryLoc===e){var r=n.completion;if("throw"===r.type){var a=r.arg;E(n)}return a}}throw new Error("illegal catch attempt")},delegateYield:function(e,t,n){return this.delegate={iterator:k(e),resultName:t,nextLoc:n},"next"===this.method&&(this.arg=void 0),p}},e}var zf=Object(nl.a)({root:{display:"flex",flexDirection:"row",alignItems:"center",width:"100%"},paperParams:{display:"flex",flexDirection:"row",marginTop:10,marginRight:10,padding:10,resize:"both",width:"90%"},inputSelect:{marginLeft:"2%",marginRight:"2%",width:"96%",marginBottom:10},line:{width:"10%"},dialogTitle:{color:"#0274d7",paddingLeft:0,paddingRight:3,display:"flex",flexDirection:"row",alignItems:"center","& #simple-dialog-title":{cursor:"pointer"}},icon:{color:"#0274d7",margin:20,fontSize:30}});function Kf(e){var t=e.deleteModelTarget,n=e.modelTarget,i=e.id,o=e.handleChange,c=zf(),s=Object(a.useState)(n.model),p=Object(d.a)(s,2),h=p[0],f=p[1],m=Object(a.useState)(n.target),b=Object(d.a)(m,2),v=b[0],y=b[1];function g(){return(g=Object(u.a)($f().mark((function e(){return $f().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",us());case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}return Object(r.jsxs)("div",{className:c.root,children:[Object(r.jsxs)(Ml.a,{variant:"outlined",className:c.paperParams,children:[Object(r.jsx)(kl,{name:"metaModal",title:"Model",placeholder:"meta modal",fetchAPI:function(){return g.apply(this,arguments)},optionLabelKey:"name",onChange:function(e){f(e),o(Object(l.a)(Object(l.a)({},n),{},{model:e}),i)},value:h,classes:{root:c.inputSelect}}),Object(r.jsx)(kl,{name:"name",title:"name",placeholder:"Target",optionLabelKey:"name",classes:{root:c.inputSelect},value:v,onChange:function(e){y(e),o(Object(l.a)(Object(l.a)({},n),{},{target:e}),i)},fetchAPI:function(){return(null===h||void 0===h?void 0:h.fullName)?function(e){return ls.apply(this,arguments)}(null===h||void 0===h?void 0:h.fullName):[]}})]}),Object(r.jsx)(gh.a,{onClick:function(){return t(i)},className:c.icon})]})}var qf=Object(Tc.a)((function(e){return{paper:{margin:e.spacing(1),width:"calc(100% - 16px)",display:"flex",height:"calc(100% - 50px)",overflow:"hidden"},dialogPaper:{maxWidth:"70%",maxHeight:"80%",resize:"both",width:"70%",height:"90%"},root:{display:"flex",flexDirection:"column",alignItems:"flex-start",height:"100%",overflow:"hidden"},save:{margin:e.spacing(1),backgroundColor:"#0275d8",borderColor:"#0267bf",color:"white","&:hover":{backgroundColor:"#025aa5",borderColor:"#014682",color:"white"}},baseModelParams:{display:"flex",flexDirection:"row",width:"100%"},modelParams:{display:"flex",flexDirection:"row",width:"90%"},addBaseModelParams:{display:"flex",flexDirection:"column",height:"100%",width:"100%"},line:{width:"10%"},dialogTitle:{color:"#0274d7",paddingLeft:0,paddingRight:3,display:"flex",flexDirection:"row",alignItems:"center","& #simple-dialog-title":{cursor:"pointer"}},scrollDiv:{overflow:"scroll",height:550}}}));var Hf=function(e){var t=e.handleClose,n=e.open,o=qf(),c=Object(s.b)(),l=Object(s.c)((function(e){return e.contextReducer.targets})),u=i.a.useState(!1),h=Object(d.a)(u,2),m=h[0],b=h[1],w=i.a.useState({alertMessage:"Add all values",alertTitle:"Error"}),O=Object(d.a)(w,1)[0],E=Object(a.useState)([]),N=Object(d.a)(E,2),k=N[0],S=N[1];Object(a.useEffect)((function(){0===(null===l||void 0===l?void 0:l.length)?S([{model:null,target:null}]):S(l)}),[l]);var _=function(){var e=!0;return k.forEach((function(t){null!=t.model&&null!=t.target||(e=!1)})),e},L=function(e){var t=k.filter((function(t,n){return n!==e}));S(t)},C=Object(a.useCallback)((function(e,t){var n=Object(p.a)(k);n[t]=e,S(n)}),[k]);return Object(r.jsxs)(v.a,{onClose:function(e,n){"backdropClick"!==n&&t()},"aria-labelledby":"simple-dialog-title",open:n,classes:{paper:o.dialogPaper},children:[Object(r.jsx)(y.a,{id:"simple-dialog-title",children:"Build Contexts"}),Object(r.jsxs)("div",{className:o.root,children:[Object(r.jsx)(Ml.a,{variant:"outlined",className:o.paper,children:Object(r.jsxs)("div",{className:o.baseModelParams,children:[Object(r.jsx)(yh,{className:o.line}),Object(r.jsxs)("div",{className:o.addBaseModelParams,children:[Object(r.jsxs)("div",{className:o.dialogTitle,children:[Object(r.jsx)(y.a,{id:"simple-dialog-title",className:o.dialogTitle,onClick:function(){S([].concat(Object(p.a)(k),[{model:null,target:null}]))},children:"Add model context"}),Object(r.jsx)(Wd.a,{})]}),Object(r.jsx)("div",{className:o.scrollDiv,children:null===k||void 0===k?void 0:k.map((function(e,t){return Object(r.jsx)(Kf,{deleteModelTarget:L,handleChange:C,id:t,modelTarget:e},t)}))})]})]})}),Object(r.jsxs)("div",{children:[Object(r.jsx)(f.a,{className:o.save,onClick:function(){_()?(c(yf(k)),t()):b(!0)},children:"OK"}),Object(r.jsx)(f.a,{className:o.save,onClick:function(){t()},style:{textTransform:"none"},children:"Cancel"})]})]}),m&&Object(r.jsxs)(v.a,{open:m,onClose:function(e,t){"backdropClick"!==t&&b(!1)},"aria-labelledby":"alert-dialog-title","aria-describedby":"alert-dialog-description",classes:{paper:o.dialog},children:[Object(r.jsx)(y.a,{id:"alert-dialog-title",children:O.alertTitle}),Object(r.jsx)(g.a,{children:Object(r.jsx)(x.a,{id:"alert-dialog-description",children:O.alertMessage})}),Object(r.jsxs)(j.a,{children:[Object(r.jsx)(f.a,{onClick:function(){b(!1)},color:"primary",autoFocus:!0,className:o.save,children:"Ok"}),Object(r.jsx)(f.a,{onClick:function(){b(!1)},color:"primary",autoFocus:!0,style:{textTransform:"none"},className:o.save,children:"Cancel"})]})]})]})};function Uf(){Uf=function(){return e};var e={},t=Object.prototype,n=t.hasOwnProperty,r=Object.defineProperty||function(e,t,n){e[t]=n.value},a="function"==typeof Symbol?Symbol:{},i=a.iterator||"@@iterator",o=a.asyncIterator||"@@asyncIterator",c=a.toStringTag||"@@toStringTag";function s(e,t,n){return Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{s({},"")}catch(_){s=function(e,t,n){return e[t]=n}}function l(e,t,n,a){var i=t&&t.prototype instanceof d?t:d,o=Object.create(i.prototype),c=new N(a||[]);return r(o,"_invoke",{value:j(e,n,c)}),o}function u(e,t,n){try{return{type:"normal",arg:e.call(t,n)}}catch(_){return{type:"throw",arg:_}}}e.wrap=l;var p={};function d(){}function h(){}function f(){}var m={};s(m,i,(function(){return this}));var b=Object.getPrototypeOf,v=b&&b(b(k([])));v&&v!==t&&n.call(v,i)&&(m=v);var y=f.prototype=d.prototype=Object.create(m);function g(e){["next","throw","return"].forEach((function(t){s(e,t,(function(e){return this._invoke(t,e)}))}))}function x(e,t){function a(r,i,o,c){var s=u(e[r],e,i);if("throw"!==s.type){var l=s.arg,p=l.value;return p&&"object"==typeof p&&n.call(p,"__await")?t.resolve(p.__await).then((function(e){a("next",e,o,c)}),(function(e){a("throw",e,o,c)})):t.resolve(p).then((function(e){l.value=e,o(l)}),(function(e){return a("throw",e,o,c)}))}c(s.arg)}var i;r(this,"_invoke",{value:function(e,n){function r(){return new t((function(t,r){a(e,n,t,r)}))}return i=i?i.then(r,r):r()}})}function j(e,t,n){var r="suspendedStart";return function(a,i){if("executing"===r)throw new Error("Generator is already running");if("completed"===r){if("throw"===a)throw i;return S()}for(n.method=a,n.arg=i;;){var o=n.delegate;if(o){var c=w(o,n);if(c){if(c===p)continue;return c}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if("suspendedStart"===r)throw r="completed",n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);r="executing";var s=u(e,t,n);if("normal"===s.type){if(r=n.done?"completed":"suspendedYield",s.arg===p)continue;return{value:s.arg,done:n.done}}"throw"===s.type&&(r="completed",n.method="throw",n.arg=s.arg)}}}function w(e,t){var n=e.iterator[t.method];if(void 0===n){if(t.delegate=null,"throw"===t.method){if(e.iterator.return&&(t.method="return",t.arg=void 0,w(e,t),"throw"===t.method))return p;t.method="throw",t.arg=new TypeError("The iterator does not provide a 'throw' method")}return p}var r=u(n,e.iterator,t.arg);if("throw"===r.type)return t.method="throw",t.arg=r.arg,t.delegate=null,p;var a=r.arg;return a?a.done?(t[e.resultName]=a.value,t.next=e.nextLoc,"return"!==t.method&&(t.method="next",t.arg=void 0),t.delegate=null,p):a:(t.method="throw",t.arg=new TypeError("iterator result is not an object"),t.delegate=null,p)}function O(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function E(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function N(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(O,this),this.reset(!0)}function k(e){if(e){var t=e[i];if(t)return t.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var r=-1,a=function t(){for(;++r<e.length;)if(n.call(e,r))return t.value=e[r],t.done=!1,t;return t.value=void 0,t.done=!0,t};return a.next=a}}return{next:S}}function S(){return{value:void 0,done:!0}}return h.prototype=f,r(y,"constructor",{value:f,configurable:!0}),r(f,"constructor",{value:h,configurable:!0}),h.displayName=s(f,c,"GeneratorFunction"),e.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===h||"GeneratorFunction"===(t.displayName||t.name))},e.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,f):(e.__proto__=f,s(e,c,"GeneratorFunction")),e.prototype=Object.create(y),e},e.awrap=function(e){return{__await:e}},g(x.prototype),s(x.prototype,o,(function(){return this})),e.AsyncIterator=x,e.async=function(t,n,r,a,i){void 0===i&&(i=Promise);var o=new x(l(t,n,r,a),i);return e.isGeneratorFunction(n)?o:o.next().then((function(e){return e.done?e.value:o.next()}))},g(y),s(y,c,"Generator"),s(y,i,(function(){return this})),s(y,"toString",(function(){return"[object Generator]"})),e.keys=function(e){var t=Object(e),n=[];for(var r in t)n.push(r);return n.reverse(),function e(){for(;n.length;){var r=n.pop();if(r in t)return e.value=r,e.done=!1,e}return e.done=!0,e}},e.values=k,N.prototype={constructor:N,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(E),!e)for(var t in this)"t"===t.charAt(0)&&n.call(this,t)&&!isNaN(+t.slice(1))&&(this[t]=void 0)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var t=this;function r(n,r){return o.type="throw",o.arg=e,t.next=n,r&&(t.method="next",t.arg=void 0),!!r}for(var a=this.tryEntries.length-1;a>=0;--a){var i=this.tryEntries[a],o=i.completion;if("root"===i.tryLoc)return r("end");if(i.tryLoc<=this.prev){var c=n.call(i,"catchLoc"),s=n.call(i,"finallyLoc");if(c&&s){if(this.prev<i.catchLoc)return r(i.catchLoc,!0);if(this.prev<i.finallyLoc)return r(i.finallyLoc)}else if(c){if(this.prev<i.catchLoc)return r(i.catchLoc,!0)}else{if(!s)throw new Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return r(i.finallyLoc)}}}},abrupt:function(e,t){for(var r=this.tryEntries.length-1;r>=0;--r){var a=this.tryEntries[r];if(a.tryLoc<=this.prev&&n.call(a,"finallyLoc")&&this.prev<a.finallyLoc){var i=a;break}}i&&("break"===e||"continue"===e)&&i.tryLoc<=t&&t<=i.finallyLoc&&(i=null);var o=i?i.completion:{};return o.type=e,o.arg=t,i?(this.method="next",this.next=i.finallyLoc,p):this.complete(o)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),p},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.finallyLoc===e)return this.complete(n.completion,n.afterLoc),E(n),p}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.tryLoc===e){var r=n.completion;if("throw"===r.type){var a=r.arg;E(n)}return a}}throw new Error("illegal catch attempt")},delegateYield:function(e,t,n){return this.delegate={iterator:k(e),resultName:t,nextLoc:n},"next"===this.method&&(this.arg=void 0),p}},e}var Yf={display:"flex",alignItems:"center",justifyContent:"center",borderLeft:"solid 1px #ddd",background:"#f0f0f0"},Jf=Object(Tc.a)((function(e){return{drawer:{width:Xf,flexShrink:0},drawerPaper:{background:"#F8F8F8",width:"100%",position:"absolute",borderLeft:"1px solid #ccc",overflow:"auto",height:"100%"},drawerContainer:{height:"100%",width:"100%"},nodeTitle:{fontSize:"120%",fontWeight:"bolder"},propertyLable:{fontSize:13,fontWeight:"bolder",margin:"10px 0px"},toolTip:{display:"flex",flexDirection:"row",width:"100%","& > p":{"@media (max-width: 20px)":{display:"none"}}},toolTipFont:{fontSize:10,flex:"none",paddingLeft:5},save:{margin:e.spacing(1),backgroundColor:"#0275d8",borderColor:"#0267bf",color:"white","&:hover":{backgroundColor:"#025aa5",borderColor:"#014682",color:"white"}},icon:{color:"green",width:"1.6em",height:"1.2em"},dialogTitle:{color:"#0274d7",paddingLeft:0,paddingRight:3,display:"flex",flexDirection:"row",alignItems:"center","& #simple-dialog-title":{cursor:"pointer"}},btnContainer:{border:"1px solid #dcdc",background:"#F8F8F8",width:"20%"},consoleHeader:{display:"flex",flexDirection:"row",marginTop:5,alignItems:"center",backgroundColor:"#424242",paddingInline:"inherit",borderRadius:"15px 15px 0px 0px"},copy:{marginLeft:"auto",backgroundColor:"#025aa5",borderColor:"#0267bf",color:"white",padding:"2",fontSize:10,"&:hover":{backgroundColor:"#0267ba",borderColor:"#014682",color:"white"}},console:{backgroundColor:"#656565",padding:10,minHeight:"40%",borderRadius:"0px 0px 15px 15px",fontWeight:"bold !important","& .json-formatter-key":{color:"#EBC456 !important",marginRight:5},"& .json-formatter-string":{color:"white !important"},"& .json-formatter-boolean":{color:"white !important"},"& .json-formatter-number":{color:"white !important"},"& .json-formatter-function":{color:"white !important"},"& .json-formatter-row":{marginBottom:8}},box:{"& > div > div > div":{borderBottom:"1px solid black"}},saveButtonText:{marginLeft:10},saveMessageAlert:{width:"100%",marginBottom:10,display:"flex",justifyContent:"space-between"},paper:{margin:e.spacing(1),width:"calc(100% - 16px)",display:"flex",height:"calc(100% - 50px)",overflow:"hidden"},dialogPaper:{maxWidth:"70%",maxHeight:"80%",resize:"both",width:"70%",height:"90%"},iconButton:{padding:0,paddingLeft:5},iconParams:{backgroundColor:"#30363D"},inputSelect:{width:"22%",marginLeft:"2%",display:"flex",alignItems:"end"},tabNav:{marginTop:20,"& .MuiTabs-indicator":{display:"none"},"& .Mui-selected":{backgroundColor:"#E3E3E3"}},messageResponseSuccess:{backgroundColor:"#D6E9DC",color:"#4f8758",padding:15,fontWeight:"bold",borderRadius:10},messageResponseError:{backgroundColor:"#D70038",color:"white",padding:15,fontWeight:"bold",borderRadius:10},tabPanel:{padding:10,backgroundColor:"rgb(248, 248, 248)",height:"100%"},tabPanelConsole:{padding:10,height:"100%",borderRadius:"15px"},tabStyle:{border:" 0.1px solid #ccc !important",borderBottom:"none",backgroundColor:"white",minHeight:10,width:"33.33%",minWidth:"33.33%"},toolbarButtons:{display:"flex",padding:"20px 20px 0px 20px",position:"relative",width:"48%"},header:{display:"flex",flexDirection:"row",width:"100%"},active:{backgroundColor:"#a3a3a3"},property:{marginBottom:"5%"}}})),Xf=480,Qf=null,Zf=null,em=null,tm=null,nm=[{name:"Request",title:"Request"},{name:"Authentification",title:"Authentification"},{name:"Connector",title:"Connector"}];var rm=function(){var e=Object(a.useState)(Xf),t=Object(d.a)(e,2),n=t[0],o=t[1],_=Object(a.useState)("100%"),L=Object(d.a)(_,2),C=L[0],P=L[1],T=Object(a.useState)(!0),M=Object(d.a)(T,2),A=M[0],R=M[1],B=Object(a.useState)(null),D=Object(d.a)(B,2),F=D[0],I=D[1],V=Object(a.useState)(1),G=Object(d.a)(V,2),W=G[0],$=G[1],z=Object(a.useState)(null),K=Object(d.a)(z,2),q=K[0],H=K[1],U=Object(a.useState)(null),Y=Object(d.a)(U,2),J=Y[0],X=Y[1],Q=Object(a.useState)(null),Z=Object(d.a)(Q,2),ee=Z[0],te=Z[1],ne=Object(a.useState)(null),re=Object(d.a)(ne,2),ae=re[0],ie=re[1],oe=Object(a.useRef)(null),ce=Object(a.useState)({open:!1,messageType:null,message:null}),se=Object(d.a)(ce,2),le=se[0],ue=se[1],pe=Object(a.useState)(!1),de=Object(d.a)(pe,2),he=de[0],fe=de[1],me=i.a.useState({state:!1,action:null,alertConfig:{alertMessage:"Current changes will be lost. Do you really want to proceed?",alertTitle:"New"}}),be=Object(d.a)(me,2),ve=be[0],ye=be[1],ge=Object(s.b)(),xe=Object(s.c)((function(e){return e.payloadReducer.queryCriteria})),je=Object(s.c)((function(e){return e.payloadReducer.modelPayloads})),we=Object(s.c)((function(e){return e.requestReducer.modelParameters})),Oe=Object(s.c)((function(e){return e.headerReducer.headers})),Ee=Jf(),Ne=function(e){document.documentElement.style.setProperty("--bpmn-container-width","".concat(e,"px")),R("0px"!==e)},ke=function(e,t){ue({open:!0,messageType:e,message:t})},Se=function(e,t){"clickaway"!==t&&ue({open:!1,messageType:null,message:null})},_e=function(e){var t=Qf.get("elementFactory"),n=Qf.get("elementRegistry"),a=Qf.get("modeling"),i=Qf.getDefinitions(),o=i&&i.rootElements&&i.rootElements[0];if(o){var l=n.get(o.id);if(l){var u=l,p=t.createParticipantShape({type:"bpmn:Participant"});return p.businessObject.name=null===e||void 0===e?void 0:e.name,p.businessObject.type=null===e||void 0===e?void 0:e.requestTypeSelect,p.businessObject.url=null===e||void 0===e?void 0:e.wsUrl,p.businessObject.idRequest=null===e||void 0===e?void 0:e.id,p.businessObject.callIf={expression:null===e||void 0===e?void 0:e.callIf},p.businessObject.repeatIf={expression:null===e||void 0===e?void 0:e.repeatIf},p.businessObject.payLoadTypeSelect=null===e||void 0===e?void 0:e.payLoadTypeSelect,p.businessObject.versionRequest=null===e||void 0===e?void 0:e.version,p.businessObject.description=null===e||void 0===e?void 0:e.description,h.a.stroke=dh["bpmn:Task"],h.a.fill=sh,p.businessObject.di.set("stroke","black"),p.businessObject.di.set("fill","white"),a.createShape(p,{x:150,y:50,width:900,height:600},u),a.splitLane(p,3),Gn(p).forEach((function(e,t){var n=Qf.get("overlays");e.businessObject.name=0===t?"Parameters":1===t?"Headers":"Payloads",n.add(e.id,{position:{bottom:e.height,left:30},html:"<div id=".concat(e.id,' style="width:').concat(e.width-30,'px"></div>')}),a&&a.updateProperties(e,{name:0===t?"Parameters":1===t?"Headers":"Payloads"}),c.a.render(Object(r.jsx)(s.a,{store:xf,children:Object(r.jsx)(bh,{type:0===t?"parameters":2===t?"payloads":"headers"})}),document.getElementById(e.id))})),p.bpmnModeler=Qf,I(p),p}}},Le=function(e){var t=tm.get("elementRegistry"),n=tm.getDefinitions(),r=n&&n.rootElements&&n.rootElements[0],a=t.get(r.id),i=tm.get("modeling");return e?i.removeElements(Object(p.a)(e)):i.removeElements(Object(p.a)(a.children)),a},Ce=function(e){var t=Zf.get("elementFactory"),n=Zf.get("elementRegistry"),r=Zf.get("modeling"),a=n.get("ProcessAction_3"),i=t.createParticipantShape({type:"bpmn:Task"});i.businessObject.name="Auth Request",i.businessObject.authRequest=(null===e||void 0===e?void 0:e.authWsRequest)?e.authWsRequest:null,r.createShape(i,{x:220,y:80,width:130,height:120},a),i.bpmnModeler=Zf,Td(i,["bpmn:Task"])&&(h.a.stroke=dh["bpmn:Task"],h.a.fill=sh,i.businessObject.di.set("stroke",dh["bpmn:Task"]),i.businessObject.di.set("fill",sh)),r.setColor(i,h.a)},Pe=function(){var e=Object(u.a)(Uf().mark((function e(t){var n,r,a,i,o,c,s,l,u,d;return Uf().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=em.get("elementFactory"),r=em.get("elementRegistry"),a=em.get("modeling"),i=r.get("ProcessAction_2"),!t){e.next=26;break}if(c=null,!((null===t||void 0===t?void 0:t.wsRequestList)&&(null===t||void 0===t||null===(o=t.wsRequestList)||void 0===o?void 0:o.length)>0)){e.next=19;break}t.wsRequestList.forEach((function(e,t){(c=n.createParticipantShape({type:"bpmn:Mapper"})).businessObject.name=e.name,c.businessObject.requestTypeSelect=e.requestTypeSelect,c.businessObject.authRequest=e,a.createShape(c,{x:220+180*t,y:80,width:130,height:120},i)})),s=Object(p.a)(i.children),l=0;case 10:if(!(l<s.length)){e.next=17;break}if(l!==s.length-1){e.next=13;break}return e.abrupt("return");case 13:a.connect(s[l],s[l+1]);case 14:l++,e.next=10;break;case 17:e.next=24;break;case 19:(u=n.createParticipantShape({type:"bpmn:Mapper"})).businessObject.name=null,u.businessObject.requestTypeSelect=null,u.businessObject.authRequest=null,a.createShape(u,{x:220,y:80,width:130,height:120},i);case 24:e.next=31;break;case 26:(d=n.createParticipantShape({type:"bpmn:Mapper"})).businessObject.name=null,d.businessObject.requestTypeSelect=null,d.businessObject.authRequest=null,a.createShape(d,{x:220,y:80,width:130,height:120},i);case 31:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),Te=function(e){var t=Zf.get("elementFactory"),n=Zf.get("elementRegistry"),r=Zf.get("modeling"),a=n.get("ProcessAction_3"),i=t.createParticipantShape({type:"bpmn:Task"}),o=t.createParticipantShape({type:"bpmn:Task"});r.createShape(i,{x:420,y:80,width:130,height:120},a),r.createShape(o,{x:620,y:80,width:130,height:120},a),i.businessObject.name="Token request",i.businessObject.authRequest=(null===e||void 0===e?void 0:e.tokenWsRequest)?e.tokenWsRequest:null,o.businessObject.name="Refresh Token request",o.businessObject.authRequest=(null===e||void 0===e?void 0:e.refreshTokenWsRequest)?e.refreshTokenWsRequest:null,Td(i,["bpmn:Task"])&&(h.a.stroke=dh["bpmn:Task"],h.a.fill=sh,i.businessObject.di.set("stroke",dh["bpmn:Task"]),i.businessObject.di.set("fill",sh)),r.setColor(i,h.a),Td(o,["bpmn:Task"])&&(h.a.stroke=dh["bpmn:Task"],h.a.fill=sh,o.businessObject.di.set("stroke",dh["bpmn:Task"]),o.businessObject.di.set("fill",sh)),r.setColor(o,h.a)},Me=function(){var e=Object(u.a)(Uf().mark((function e(){var t,n,r,a;return Uf().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if("bpmn:Mapper"!==F.type&&"bpmn:Task"!==F.type){e.next=9;break}return tm=Qf,e.next=4,is(F.businessObject.authRequest.id);case 4:t=e.sent,$(1),Re(null===t||void 0===t?void 0:t.id),e.next=16;break;case 9:if("bpmn:Process-action"!==F.type||3!==W){e.next=16;break}return tm=Zf,$(2),e.next=14,rs(null===F||void 0===F||null===(n=F.businessObject)||void 0===n||null===(r=n.defaultWsAuthenticator)||void 0===r?void 0:r.id);case 14:a=e.sent,Ye(null===a||void 0===a?void 0:a.id);case 16:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),Ae=function(){"bpmn:Mapper"===F.type||"bpmn:Task"===F.type?(tm=Qf,$(1),Ie()):"bpmn:Process-action"===F.type&&(tm=Zf,$(2),null!==tm&&tt())},Re=function(){var e=Object(u.a)(Uf().mark((function e(t){var n,r,a,i,o,c,s,l,u,d,h,f;return Uf().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,is(t,{fields:["name","id","payLoadTypeSelect","requestTypeSelect","wsConnector","payLoadWsKeyValueList","headerWsKeyValueList","version","wsUrl","description","repeatIf","callIf","parameterWsKeyValueList"]});case 2:if(s=e.sent,Le(),_e(s),(l={}).name=s.name,l.requestTypeSelect=s.requestTypeSelect,l.payLoadTypeSelect=s.payLoadTypeSelect,l.wsUrl=s.wsUrl,l.callIf=s.callIf,l.repeatIf=s.repeatIf,l.id=s.id,l.version=s.version,l.description=s.desciption,0===(null===(n=s.headerWsKeyValueList)||void 0===n?void 0:n.length)){e.next=21;break}return e.next=18,Ms(s.headerWsKeyValueList);case 18:e.t0=u=e.sent,e.next=22;break;case 21:e.t0=[];case 22:if(u=e.t0,0===(null===(r=s.payLoadWsKeyValueList)||void 0===r?void 0:r.length)){e.next=29;break}return e.next=26,Ms(s.payLoadWsKeyValueList);case 26:e.t1=d=e.sent,e.next=30;break;case 29:e.t1=[];case 30:if(d=e.t1,0===(null===(a=s.parameterWsKeyValueList)||void 0===a?void 0:a.length)){e.next=37;break}return e.next=34,Ms(s.parameterWsKeyValueList);case 34:e.t2=h=e.sent,e.next=38;break;case 37:e.t2=[];case 38:if(h=e.t2,ge(qh(u)),0!==(null===(i=d)||void 0===i?void 0:i.length)){e.next=44;break}e.t3=[],e.next=47;break;case 44:return e.next=46,Ks(d);case 46:e.t3=e.sent;case 47:f=e.t3,ge(rf(0===f.length?[]:[{model:"",payloads:f}])),ge(Fh(0!==(null===(o=h)||void 0===o?void 0:o.length)?[{id:1,model:{},parameters:Object(p.a)(h)}]:[])),l.parameterWsKeyValueList=0!==(null===(c=h)||void 0===c?void 0:c.length)?[{id:1,model:{},parameters:Object(p.a)(h)}]:[],l.payLoadWsKeyValueList=0===f.length?[]:[{model:"",payloads:f}],l.headerWsKeyValueList=u,X(l);case 54:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),Be=function(){var e=Object(u.a)(Uf().mark((function e(){var t;return Uf().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,$c(J.id);case 2:t=e.sent,H(t),ut(2);case 5:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),De=function e(t,n){var r=[];return null===t||void 0===t||t.forEach((function(t){var a,i={};if(null===t||void 0===t||null===(a=t.wsValue)||void 0===a?void 0:a.name)i={wsKey:t.wsKey?t.wsKey:null,isList:!1,id:t.id?t.id:null,version:null!=(null===t||void 0===t?void 0:t.version)?null===t||void 0===t?void 0:t.version:null,wsValue:zs(t.transformations,n,null===t||void 0===t?void 0:t.wsValue)},r.push(i);else if(t.wsValue&&!t.isList)i={wsKey:t.wsKey?t.wsKey:null,isList:!1,id:t.id?t.id:null,version:null!=(null===t||void 0===t?void 0:t.version)?null===t||void 0===t?void 0:t.version:null,wsValue:zs(t.transformations,null===n||void 0===n?void 0:n.model,null===t||void 0===t?void 0:t.wsValue)},r.push(i);else if(t.isList){var o=[];t.wsValue.forEach((function(t){o=Object(p.a)(e(t.payloads,t.model))})),i={wsKey:t.wsKey?t.wsKey:null,id:t.id?t.id:null,wsValue:null,isList:!0,subWsKeyValueList:o,version:null!=(null===t||void 0===t?void 0:t.version)?null===t||void 0===t?void 0:t.version:null},r.push(i)}else i={wsKey:t.wsKey?t.wsKey:null,id:t.id?t.id:null,wsValue:null,isList:!1,version:null!=(null===t||void 0===t?void 0:t.version)?null===t||void 0===t?void 0:t.version:null,subWsKeyValueList:e(t.payloads,t.model)},r.push(i)})),r},Fe=function(){var e=Object(u.a)(Uf().mark((function e(){var t,n,r,a,i,o,c,s,u,d,h,f;return Uf().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(c={},"bpmn:Participant"!==F.type){e.next=5;break}c=null===F||void 0===F?void 0:F.businessObject,e.next=14;break;case 5:if("bpmn:Lane"!==(null===F||void 0===F?void 0:F.type)){e.next=9;break}c=null===F||void 0===F||null===(s=F.parent)||void 0===s?void 0:s.businessObject,e.next=14;break;case 9:if("bpmn:Collaboration"!==(null===F||void 0===F?void 0:F.type)){e.next=13;break}c=F.children[0].businessObject,e.next=14;break;case 13:return e.abrupt("return");case 14:if(Ke(c)){e.next=16;break}return e.abrupt("return");case 16:return u=[],Oe.forEach((function(e){e=Object(l.a)(Object(l.a)({},e),{},{id:e.id?e.id:null}),u.push(e)})),d=[],je.forEach((function(e){d=[].concat(Object(p.a)(d),Object(p.a)(De(e.payloads,e.model)))})),"",h=[],we.forEach((function(e){e.parameters.forEach((function(t){var n,r;t=Object(l.a)(Object(l.a)({},t),{},{id:t.id?t.id:null,wsValue:zs(t.transformations,e.model,(null===(n=t.wsValue)||void 0===n?void 0:n.name)?null===(r=t.wsValue)||void 0===r?void 0:r.name:t.wsValue)}),h.push(t)}))})),f=null,e.next=26,Mf({payLoadWsKeyValueList:d,wsUrl:c.url+"",requestTypeSelect:c.type?c.type:null,name:c.name,payLoadTypeSelect:c.payLoadTypeSelect?c.payLoadTypeSelect:null,headerWsKeyValueList:u,parameterWsKeyValueList:h,description:c.description?c.description:null,callIf:(null===(t=c.callIf)||void 0===t?void 0:t.expression)?null===(n=c.callIf)||void 0===n?void 0:n.expression:null,repeatIf:(null===(r=c.repeatIf)||void 0===r?void 0:r.expression)?null===(a=c.repeatIf)||void 0===a?void 0:a.expression:null,id:(null===J||void 0===J?void 0:J.id)?null===J||void 0===J?void 0:J.id:null,version:null!=(null===J||void 0===J?void 0:J.version)?null===J||void 0===J?void 0:J.version:null});case 26:f=e.sent,H(f),ut(2),(null===(i=f)||void 0===i||null===(o=i.data[0])||void 0===o?void 0:o.id)&&X(f.data[0]);case 30:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),Ie=function(){Le(),ge(Fh([])),ge(rf([])),ge(qh([])),_e(),X(null)},Ve=function(){var e=null;if("bpmn:Participant"===F.type)e=null===F||void 0===F?void 0:F.businessObject;else if("bpmn:Lane"===(null===F||void 0===F?void 0:F.type)){var t;e=null===F||void 0===F||null===(t=F.parent)||void 0===t?void 0:t.businessObject}else"bpmn:Collaboration"===(null===F||void 0===F?void 0:F.type)&&(e=F.children[0].businessObject);return null!==J&&"{}"!==JSON.stringify(J)?!(e.name!==J.name||e.url!==J.wsUrl||e.type!==J.requestTypeSelect||!function(){var e,t;if((null===we||void 0===we?void 0:we.length)===((null===J||void 0===J||null===(e=J.parameterWsKeyValueList)||void 0===e?void 0:e.length)?null===J||void 0===J||null===(t=J.parameterWsKeyValueList)||void 0===t?void 0:t.length:0)){for(var n=!0,r=0;r<(null===J||void 0===J?void 0:J.parameterWsKeyValueList.length);r++){var a,i,o,c;if((null===J||void 0===J||null===(a=J.parameterWsKeyValueList[r].model)||void 0===a?void 0:a.name)!==(null===(i=we[r].model)||void 0===i?void 0:i.name)||(null===J||void 0===J||null===(o=J.parameterWsKeyValueList[r].parameters)||void 0===o?void 0:o.length)!==(null===(c=we[r].parameters)||void 0===c?void 0:c.length)){n=!1;break}for(var s=0;s<(null===J||void 0===J?void 0:J.parameterWsKeyValueList[r].parameters.length);s++)if((null===J||void 0===J?void 0:J.parameterWsKeyValueList[r].parameters[s].wsKey)!==we[r].parameters[s].wsKey||(null===J||void 0===J?void 0:J.parameterWsKeyValueList[r].parameters[s].wsValue)!==we[r].parameters[s].wsValue){n=!1;break}}return n}return!1}()||!function(){var e,t;if(J!=={}&&0!==(null===J||void 0===J||null===(e=J.headerWsKeyValueList)||void 0===e?void 0:e.length)&&(null===Oe||void 0===Oe?void 0:Oe.length)===(null===J||void 0===J||null===(t=J.headerWsKeyValueList)||void 0===t?void 0:t.length)){for(var n=!0,r=0;r<J.headerWsKeyValueList.length;r++)if(J.headerWsKeyValueList[r].wsKey!==Oe[r].wsKey||J.headerWsKeyValueList[r].wsValue!==Oe[r].wsValue){n=!1;break}return n}return 0===(null===Oe||void 0===Oe?void 0:Oe.length)}()):!(e.name||e.url||e.type||e.callIf.expression||e.repeatIf.expression||e.payLoadTypeSelect||0!==we.length||0!==je.length||0!==Oe.length)},Ge=function(){var e=!0;if(null!==ae){var t,n,r,a="bpmn:Process-action"===F.type?F:F.parent,i=a.children.filter((function(e){return Td(e,"bpmn:Mapper")}));if(a.businessObject.name===ae.name&&ae.baseUrl===a.businessObject.baseUrl&&(null===(t=a.businessObject)||void 0===t||null===(n=t.defaultWsAuthenticator)||void 0===n?void 0:n.id)===(null===(r=ae.defaultWsAuthenticator)||void 0===r?void 0:r.id)){for(var o=0;o<ae.wsRequestList.length;o++)if(ae.wsRequestList[o].id!==i[o].businessObject.authRequest.id){e=!1;break}}else e=!1}return e},We=function(){var e=Object(u.a)(Uf().mark((function e(t){var n,r;return Uf().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Ls(t,{fields:["defaultWsAuthenticator","name","id","wsRequestList","baseUrl","version","wsConnector"],related:{wsRequestList:["name","requestTypeSelect","id"]}});case 2:return n=e.sent,ie(n),r="bpmn:Process-action"===F.type?F:F.parent,Le(),r.businessObject.baseUrl=n.baseUrl,r.businessObject.name=n.name,r.businessObject.defaultWsAuthenticator=n.defaultWsAuthenticator,e.next=11,Pe(n);case 11:I(r);case 12:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),$e=function(){var e=Object(u.a)(Uf().mark((function e(){var t;return Uf().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Kc(ae.id);case 2:t=e.sent,H(t),ut(2);case 5:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),ze=function(){var e="bpmn:Process-action"===F.type?F:F.parent;return!!e.businessObject.name||(ke("error",e.businessObject.name?"":"Name is required !"),!1)},Ke=function(e){return e.name||e.url||e.type?!e.name&&!e.url||!e.name&&!e.type||!e.url&&!e.type?(ke("error",e.name||e.url?e.name||e.type?e.url||e.type?"":"Url and Type  are required !":"Name and Type  are required !":"Name and Url  are required !"),!1):!!(e.name&&e.url&&e.type)||(ke("error",e.name?e.type?e.url?"":"Url is required !":"Type is required !":"Name is  required !"),!1):(ke("error","<b>Les champs suivants sont invalides</b>: <li>Name</li>\n            <li>Url</li>\n            <li>Type</li>"),!1)},qe=function(){var e=Object(u.a)(Uf().mark((function e(){var t,n,r,a;return Uf().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n="bpmn:Process-action"===F.type?F:F.parent,ze()){e.next=3;break}return e.abrupt("return");case 3:return r=[],null===n||void 0===n||n.children.forEach((function(e){"bpmn:Mapper"===e.type&&null!=e.businessObject.authRequest&&r.push(e.businessObject.authRequest)})),e.next=7,Xc({name:n.businessObject.name,baseUrl:n.businessObject.baseUrl,defaultWsAuthenticator:n.businessObject.defaultWsAuthenticator,wsRequestList:r,id:(null===ae||void 0===ae?void 0:ae.id)?null===ae||void 0===ae?void 0:ae.id:null,version:null!=(null===ae||void 0===ae?void 0:ae.version)?null===ae||void 0===ae?void 0:ae.version:null});case 7:if(a=e.sent,H(a),ut(2),!(null===a||void 0===a||null===(t=a.data[0])||void 0===t?void 0:t.id)){e.next=13;break}return ie(a.data[0]),e.abrupt("return",null===a||void 0===a?void 0:a.data[0]);case 13:return e.abrupt("return",null);case 14:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),He=function(){var e=Object(u.a)(Uf().mark((function e(){var t;return Uf().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return(t="bpmn:Process-action"===F.type?F:F.parent).businessObject.name=null,t.businessObject.baseUrl=null,t.businessObject.defaultWsAuthenticator=null,t.businessObject.authRequest=null,Le(t.children),e.next=8,Pe();case 8:ie(null),I(t);case 10:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),Ue=function(){var e=Object(u.a)(Uf().mark((function e(t){var n,r,a,i,o;return Uf().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t){e.next=4;break}3===W&&"bpmn:Mapper"===F.type&&(em.get("modeling").updateProperties(F,{name:null,requestTypeSelect:null}),F.businessObject.requestTypeSelect=null,F.businessObject.authRequest=null),e.next=8;break;case 4:return e.next=6,is(t.id,{fields:["name","id","payLoadTypeSelect","requestTypeSelect","wsConnector","version"]});case 6:t=e.sent,3===W&&"bpmn:Mapper"===F.type&&(em.get("modeling").updateProperties(F,{name:t.name,requestTypeSelect:t.requestTypeSelect}),F.businessObject.requestTypeSelect=t.requestTypeSelect,null!=(null===(n=t)||void 0===n||null===(r=n.wsConnector)||void 0===r?void 0:r.id)&&ae&&(null===(a=t)||void 0===a||null===(i=a.wsConnector)||void 0===i?void 0:i.id)!==(null===ae||void 0===ae?void 0:ae.id)&&(F.businessObject.authRequest=Object(l.a)(Object(l.a)({},t),{},{id:null,wsConnector:null,version:null})));case 8:(o=Object.assign({},F)).businessObject=F.businessObject,o.parent=F.parent,I(o);case 12:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),Ye=function(){var e=Object(u.a)(Uf().mark((function e(t){var n,r;return Uf().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,rs(t);case 2:n=e.sent,(r=Le()).businessObject.type=null===n||void 0===n?void 0:n.authTypeSelect,r.businessObject.name=null===n||void 0===n?void 0:n.name,r.businessObject.isAuthenticated=null===n||void 0===n?void 0:n.isAuthenticated,"oauth2"===(null===n||void 0===n?void 0:n.authTypeSelect)?(Ce(n),Te(n)):Ce(n),te(n),I(r);case 10:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),Je=function(){var e=Object(u.a)(Uf().mark((function e(){var t;return Uf().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Hc(ee.id);case 2:t=e.sent,H(t),ut(2);case 5:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),Xe=function(){var e=Object(u.a)(Uf().mark((function e(t){return Uf().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:Qe()?Ye(null===t||void 0===t?void 0:t.id):ye({state:!0,data:t,action:"onChange",alertConfig:{alertMessage:"Current changes will be lost. Do you really want to proceed?",alertTitle:"New"}});case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),Qe=function(){if(null!=ee){var e="bpmn:Process-action"===F.type?F:F.parent;switch(e.businessObject.type){case"basic":return e.businessObject.type===ee.authTypeSelect&&e.children[0].businessObject.authRequest.id===ee.authWsRequest.id&&e.businessObject.name===ee.name&&e.businessObject.isAuthenticated===ee.isAuthenticated;case"oauth2":return e.businessObject.type===ee.authTypeSelect&&e.children[0].businessObject.authRequest.id===ee.authWsRequest.id&&e.businessObject.name===ee.name&&e.businessObject.isAuthenticated===ee.isAuthenticated&&e.children[1].businessObject.authRequest.id===ee.tokenWsRequest.id&&e.children[2].businessObject.authRequest.id===ee.refreshTokenWsRequest.id}}return!0},Ze=function(){var e="bpmn:Process-action"===F.type?F:F.parent;return"basic"===e.businessObject.type?!(!e.businessObject.name||!e.children[0].businessObject.authRequest)||(ke("error",e.businessObject.name||e.children[0].businessObject.authRequest?e.businessObject.name?e.children[0].businessObject.authRequest?"":"Auth request is required !":"Name is required !":"Name and auth Request are required !"),!1):!!(e.businessObject.name&&e.children[0].businessObject.authRequest&&e.children[1].businessObject.authRequest&&e.children[2].businessObject.authRequest)||(ke("error","<b>Les champs suivants sont invalides</b>: ".concat(e.businessObject.name?"":"<li>Name</li>").concat(e.children[0].businessObject.authRequest?"":"<li>auth Request</li>","\n        ").concat(e.children[1].businessObject.authRequest?"":"<li>Token request</li>").concat(e.children[2].businessObject.authRequest?"":"<li>Refresh token request</li>"," ")),!1)},et=function(){var e=Object(u.a)(Uf().mark((function e(t){var n,r,a;return Uf().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(Ze()){e.next=2;break}return e.abrupt("return");case 2:return r="bpmn:Process-action"===F.type?F:F.parent,e.next=5,Yc({name:r.businessObject.name,authWsRequest:r.children[0].businessObject.authRequest,tokenWsRequest:"basic"!==r.businessObject.type?r.children[1].businessObject.authRequest:null,refreshTokenWsRequest:"basic"!==r.businessObject.type?r.children[2].businessObject.authRequest:null,authTypeSelect:r.businessObject.type,id:(null===ee||void 0===ee?void 0:ee.id)?ee.id:null,version:null!=(null===ee||void 0===ee?void 0:ee.version)?null===ee||void 0===ee?void 0:ee.version:null,isAuthenticated:r.businessObject.isAuthenticated});case 5:if(a=e.sent,H(a),!t&&ut(2),!(null===a||void 0===a||null===(n=a.data[0])||void 0===n?void 0:n.id)){e.next=11;break}return te(null===a||void 0===a?void 0:a.data[0]),e.abrupt("return",null===a||void 0===a?void 0:a.data[0]);case 11:return e.abrupt("return",null);case 12:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),tt=function(){var e=Object(u.a)(Uf().mark((function e(){var t;return Uf().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return(t="bpmn:Process-action"===F.type?F:F.parent).businessObject.name=null,t.businessObject.type="basic",t.businessObject.isAuthenticated=!1,Le(t.children),e.next=7,Ce();case 7:te(null),I(t);case 9:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),nt=[{name:"New",icon:Object(r.jsx)(Fd.a,{className:Ee.icon,style:{color:"green"}}),tooltipText:"New",onClick:function(){var e=Object(u.a)(Uf().mark((function e(){return Uf().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:e.t0=W,e.next=1===e.t0?3:3===e.t0?10:2===e.t0?12:14;break;case 3:if(!0!==Ve()){e.next=7;break}Ie(),e.next=9;break;case 7:return ye({state:!0,action:"new",alertConfig:{alertMessage:"Current changes will be lost. Do you really want to proceed?",alertTitle:"New"}}),e.abrupt("return");case 9:return e.abrupt("break",15);case 10:return Ge()?He():ye({state:!0,action:"new",alertConfig:{alertMessage:"Current changes will be lost. Do you really want to proceed?",alertTitle:"New"}}),e.abrupt("break",15);case 12:return Qe()?tt():ye({state:!0,action:"new",alertConfig:{alertMessage:"Current changes will be lost. Do you really want to proceed?",alertTitle:"New"}}),e.abrupt("return");case 14:return e.abrupt("break",15);case 15:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()},{name:"Save",icon:Object(r.jsx)(Id.a,{className:Ee.icon,style:{color:"#4DB6AC "}}),tooltipText:"Save",onClick:function(){switch(W){case 1:return Fe();case 3:return qe();case 2:return et()}}},{name:"Delete",icon:Object(r.jsx)("i",{className:el()("fa fa-trash-o",Ee.icon),style:{fontSize:18,color:"red"}}),tooltipText:"Delete",onClick:function(){var e=Object(u.a)(Uf().mark((function e(){return Uf().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:e.t0=W,e.next=1===e.t0?3:3===e.t0?7:2===e.t0?9:11;break;case 3:if(null==J){e.next=6;break}return ye({state:!0,action:"delete",alertConfig:{alertMessage:"Are you sure you want to delete this record ?",alertTitle:"Warning"}}),e.abrupt("return");case 6:return e.abrupt("break",12);case 7:return null!=ae&&ye({state:!0,action:"delete",alertConfig:{alertMessage:"Are you sure you want to delete this record ?",alertTitle:"Warning"}}),e.abrupt("break",12);case 9:return null!=ee&&ye({state:!0,action:"delete",alertConfig:{alertMessage:"Are you sure you want to delete this record ?",alertTitle:"Warning"}}),e.abrupt("break",12);case 11:return e.abrupt("break",12);case 12:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()},{name:"Run test",icon:Object(r.jsx)(Vd.a,{className:Ee.icon,style:{color:"#007BC5"}}),tooltipText:"Run test",onClick:function(){!function(){var e,t,n,r;switch(W){case 1:var a={};if("bpmn:Participant"===F.type)a=null===F||void 0===F?void 0:F.businessObject;else if("bpmn:Lane"===(null===F||void 0===F?void 0:F.type)){var i;a=null===F||void 0===F||null===(i=F.parent)||void 0===i?void 0:i.businessObject}else{if("bpmn:Collaboration"!==(null===F||void 0===F?void 0:F.type))return;a=F.children[0].businessObject}var o=[];Oe.forEach((function(e){e=Object(l.a)(Object(l.a)({},e),{},{id:e.id?e.id:null}),o.push(e)}));var c=[];if(je.forEach((function(e){c=Object(p.a)(De(e.payloads,e.model))})),null===xe||void 0===xe?void 0:xe.expression){var s,u,d=null;c.some((function(e,t){return d=t,"data"===e.wsKey}))?c[d].subWsKeyValueList.some((function(e){return"_domain"===e.wsKey}))||c[d].subWsKeyValueList.push({wsKey:"_domain",wsValue:null===xe||void 0===xe||null===(s=xe.expression)||void 0===s?void 0:s.split(", ")[1],isList:!1,id:null}):c.push({wsKey:"data",wsValue:null,isList:!1,$version:null,subWsKeyValueList:[{wsKey:"_domain",wsValue:null===xe||void 0===xe||null===(u=xe.expression)||void 0===u?void 0:u.split(", ")[1],isList:!1,id:null}]})}var h=[];we.forEach((function(e){e.parameters.forEach((function(t){var n,r;t=Object(l.a)(Object(l.a)({},t),{},{id:t.id?t.id:null,wsValue:zs(t.transformations,e.model,(null===(n=t.wsValue)||void 0===n?void 0:n.name)?null===(r=t.wsValue)||void 0===r?void 0:r.name:t.wsValue)}),h.push(t)}))})),r={payLoadWsKeyValueList:c,wsUrl:a.url+"",requestTypeSelect:a.type,name:a.name,payLoadTypeSelect:a.payLoadTypeSelect,headerWsKeyValueList:o,parameterWsKeyValueList:h,description:a.description,callIf:null===(e=a.callIf)||void 0===e?void 0:e.expression,repeatIf:null===(t=a.repeatIf)||void 0===t?void 0:t.expression,id:(null===J||void 0===J?void 0:J.id)?null===J||void 0===J?void 0:J.id:null,version:null!=(null===J||void 0===J?void 0:J.version)?null===J||void 0===J?void 0:J.version:null},H(r),ut(2);break;case 3:n="bpmn:Process-action"===F.type?F:F.parent;var f=[];n.children.forEach((function(e){"bpmn:Mapper"===e.type&&f.push(e.businessObject.authRequest)})),r={name:n.businessObject.name,baseUrl:n.businessObject.baseUrl,defaultWsAuthenticator:n.businessObject.defaultWsAuthenticator,wsRequestList:f,id:(null===ae||void 0===ae?void 0:ae.id)?null===ae||void 0===ae?void 0:ae.id:null,version:null!=(null===ae||void 0===ae?void 0:ae.version)?null===ae||void 0===ae?void 0:ae.version:null},H(r),ut(2);break;case 2:r={name:(n="bpmn:Process-action"===F.type?F:F.parent).businessObject.name,authWsRequest:n.children[0].businessObject.authRequest,tokenWsRequest:"basic"!==n.businessObject.type?n.children[1].businessObject.authRequest:null,refreshTokenWsRequest:"basic"!==n.businessObject.type?n.children[2].businessObject.authRequest:null,authTypeSelect:n.businessObject.type,id:(null===ee||void 0===ee?void 0:ee.id)?ee.id:null,version:null!=(null===ee||void 0===ee?void 0:ee.version)?null===ee||void 0===ee?void 0:ee.version:null,isAuthenticated:n.businessObject.isAuthenticated},H(r),ut(2)}}()}},{name:"Parametres",icon:Object(r.jsx)(Gd.a,{className:Ee.icon,style:{color:"black"}}),tooltipText:"Context",onClick:function(){fe(!0)}}],rt=Object(a.useCallback)((function(){var e=(1===W?Dd:3===W?wf:jf).find((function(e){return e.type===(F&&F.type)}));return e?e.properties?e.properties:void 0:[]}),[F]),at=function(){switch(W){case 1:if("true"===(null===F||void 0===F?void 0:F.businessObject.classic))c.a.render(Object(r.jsx)(s.a,{store:xf,children:Object(r.jsx)(bh,{type:"payloads"})}),document.getElementById(F.children[2].id));else if("true"===(null===F||void 0===F?void 0:F.businessObject.auth)){ge(rf([{id:1,wsKey:"username",wsValue:""},{id:2,wsKey:"password",wsValue:""}]));var e=Qf.get("elementFactory"),t=Qf.get("modeling"),n=e.createParticipantShape({type:"bpmn:Task"}),a=e.createParticipantShape({type:"bpmn:Task"});n.businessObject.name="Username",a.businessObject.name="Password",t.createShape(n,{x:F.children[2].x+190,y:F.children[2].y+45,width:130,height:120},F),h.a.stroke="#009688",h.a.fill="#B2DFDB",n.businessObject.di.set("stroke",dh["bpmn:Task"]),n.businessObject.di.set("fill",sh),t.createShape(a,{x:F.children[2].x+390,y:F.children[2].y+45,width:130,height:120},F),h.a.stroke="#009688",h.a.fill="#B2DFDB",a.businessObject.di.set("stroke",dh["bpmn:Task"]),a.businessObject.di.set("fill",sh),t.setColor(n,h.a),t.setColor(a,h.a)}break;case 2:"oauth2"===(null===F||void 0===F?void 0:F.businessObject.type)?(Te(),I(F)):Le([F.children[1],F.children[2]])}},it=function(){var e=Object(u.a)(Uf().mark((function e(){var t,n,r,a,i,o,c,s,l,u,p,d;return Uf().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=null,null!==ee&&Qe()){e.next=9;break}return e.next=4,et(!0);case 4:if(t=e.sent){e.next=7;break}return e.abrupt("return",!1);case 7:e.next=10;break;case 9:t=ee;case 10:return n={model:"com.axelor.studio.db.WsAuthenticator",action:"action-studio-ws-authenticator-authenticate",data:{context:t}},e.next=13,Zc(n);case 13:if(0!==(null===(r=e.sent)||void 0===r?void 0:r.status)){e.next=24;break}if(!(null===r||void 0===r||null===(a=r.data[0])||void 0===a?void 0:a.view)){e.next=19;break}window.open(null===(i=r.data[0])||void 0===i||null===(o=i.view)||void 0===o||null===(c=o.views[0])||void 0===c?void 0:c.name,null===(s=r.data[0])||void 0===s||null===(l=s.view)||void 0===l||null===(u=l.params)||void 0===u?void 0:u.target),e.next=24;break;case 19:return e.next=21,rs(null===(p=t)||void 0===p?void 0:p.id);case 21:return d=e.sent,te(d),e.abrupt("return",null===d||void 0===d?void 0:d.isAuthenticated);case 24:return e.abrupt("return",!1);case 25:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),ot=function(e){var t,n;if(e||!e.widget)switch(e.widget){case"expression":return Object(r.jsx)(uf,{entry:e,element:F,bpmnModeler:tm});case"textField":return Object(r.jsx)(ll,{entry:e,bpmnModeler:tm,element:F,canRemove:!0,readOnly:e.readOnly});case"textBox":return Object(r.jsx)(ol,{entry:e,bpmnModeler:tm,element:F});case"button":return Object(r.jsx)(f.a,{entry:e,bpmnModeler:tm,element:F,className:Ee.save,children:"Authentificated"});case"selectBox":return Object(r.jsx)(pl,{onChange:at,entry:e,element:F,bpmnModeler:tm});case"authentificationAction":return Object(r.jsx)(Wf,{bpmnModeler:tm,element:F,requestAuth:ee,entry:e,action:it,label:"Authentificated"});case"authField":return Object(r.jsx)(Ef,{entry:e,bpmnModeler:tm,element:F});case"testConnector":return Object(r.jsx)(Pf,{entry:e,bpmnModeler:tm,element:F,connector:ae});case"checkbox":return Object(r.jsx)(hl,{entry:e,element:F,bpmnModeler:tm});case"checkBoxs":return Object(r.jsx)(mf,{entry:e,element:F,bpmnModeler:tm,onChange:at});case"many-to-one":return Object(r.jsxs)("div",{className:Ee.header,children:[Object(r.jsx)(yl,{entry:e,element:F,bpmnModeler:tm,onChange:Ue}),Object(r.jsx)(Wd.a,{className:Ee.icon,style:{marginTop:"auto",marginBottom:4},onClick:Ae}),Object(r.jsx)(Ac.a,{className:Ee.icon,style:{marginTop:"auto",marginBottom:4},onClick:Me})]});case"scriptBox":return Object(r.jsx)(xd,{entry:e,element:F,bpmnModeler:tm,bpmnFactory:tm&&tm.get("bpmnFactory"),readOnly:null===(t=F.businessObject[e.name])||void 0===t||null===(n=t.expression)||void 0===n?void 0:n.value});case"textFieldMapper":return Object(r.jsx)(Df,{entry:e,element:F,bpmnModeler:tm,bpmnFactory:tm&&tm.get("bpmnFactory")});case"parameterTable":return Object(r.jsx)(Bd,{entry:e,element:F,bpmnModeler:tm,bpmnFactory:tm&&tm.get("bpmnFactory")});default:return Object(r.jsx)(ol,{entry:e,element:F,bpmnModeler:tm})}},ct=Object(a.useState)(0),st=Object(d.a)(ct,2),lt=st[0],ut=st[1];function pt(e){return{id:"simple-tab-".concat(e),"aria-controls":"simple-tabpanel-".concat(e)}}var dt=Object(a.useCallback)(function(){var e=Object(u.a)(Uf().mark((function e(t){var n,r;return Uf().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:e.t0=W,e.next=1===e.t0?3:3===e.t0?7:2===e.t0?11:15;break;case 3:return n=Qf.get("canvas"),"bpmn:Collaboration"===(r=n.getRootElement()).type?I(r.children[0]):Qf.importXML(t,(function(e){if(e)return console.error("could not import BPMN 2.0 diagram",e);var t=Qf.get("canvas");t.zoom("fit-viewport");var n=t.getRootElement();I(n),_e()})),e.abrupt("break",16);case 7:return n=em.get("canvas"),"bpmn:Process-action"===(r=n.getRootElement()).type?I(r):em.importXML(t,(function(e){if(e)return console.error("could not import BPMN 2.0 diagram",e);var t=em.get("canvas");t.zoom("fit-viewport");var n=t.getRootElement();Pe(),I(n)})),e.abrupt("break",16);case 11:return n=Zf.get("canvas"),"bpmn:Process-action"===(r=n.getRootElement()).type?I(r):Zf.importXML(t,(function(e){if(e)return console.error("could not import BPMN 2.0 diagram",e);var t=Zf.get("canvas");t.zoom("fit-viewport");var n=t.getRootElement();n.businessObject.type="basic",n.businessObject.isAuthenticated=!1,Ce(),I(n)})),e.abrupt("break",16);case 15:return e.abrupt("return");case 16:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),[W]),ht=i.a.useCallback(function(){var e=Object(u.a)(Uf().mark((function e(t){return Uf().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:1===W&&dt('<?xml version="1.0" encoding="UTF-8" ?>\n<process-actions \n  xmlns:xs="http://www.w3.org/2001/XMLSchema-instance" \n  xs:schemaLocation="http://www.omg.org/spec/BPMN/20100524/MODEL BPMN20.xsd"\n  xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"\n  xmlns="http://www.omg.org/spec/BPMN/20100524/MODEL" \n  xmlns:bpmndi="http://www.omg.org/spec/BPMN/20100524/DI" \n  xmlns:dc="http://www.omg.org/spec/DD/20100524/DC" \n  xmlns:di="http://www.omg.org/spec/DD/20100524/DI" \n  id="sample-diagram" targetNamespace="http://bpmn.io/schema/bpmn">\n  <process-action id="ProcessAction_1">\n  </process-action>\n  <bpmndi:BPMNDiagram id="BPMNDiagram_1">\n    <bpmndi:BPMNPlane id="BPMNPlane_1" bpmnElement="Process_1">\n    </bpmndi:BPMNPlane>\n  </bpmndi:BPMNDiagram>\n</process-actions>'),3===W&&dt('<?xml version="1.0" encoding="UTF-8" ?>\n<process-actions \n  xmlns:xs="http://www.w3.org/2001/XMLSchema-instance" \n  xs:schemaLocation="http://www.omg.org/spec/BPMN/20100524/MODEL BPMN20.xsd"\n  xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"\n  xmlns="http://www.omg.org/spec/BPMN/20100524/MODEL" \n  xmlns:bpmndi="http://www.omg.org/spec/BPMN/20100524/DI" \n  xmlns:dc="http://www.omg.org/spec/DD/20100524/DC" \n  xmlns:di="http://www.omg.org/spec/DD/20100524/DI" \n  id="sample-diagram" targetNamespace="http://bpmn.io/schema/bpmn">\n  <process-action id="ProcessAction_2">\n  </process-action>\n  <bpmndi:BPMNDiagram id="BPMNDiagram_2">\n    <bpmndi:BPMNPlane id="BPMNPlane_2" bpmnElement="Process_2">\n    </bpmndi:BPMNPlane>\n  </bpmndi:BPMNDiagram>\n</process-actions>'),2===W&&dt('<?xml version="1.0" encoding="UTF-8" ?>\n<process-actions \n  xmlns:xs="http://www.w3.org/2001/XMLSchema-instance" \n  xs:schemaLocation="http://www.omg.org/spec/BPMN/20100524/MODEL BPMN20.xsd"\n  xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"\n  xmlns="http://www.omg.org/spec/BPMN/20100524/MODEL" \n  xmlns:bpmndi="http://www.omg.org/spec/BPMN/20100524/DI" \n  xmlns:dc="http://www.omg.org/spec/DD/20100524/DC" \n  xmlns:di="http://www.omg.org/spec/DD/20100524/DI" \n  id="sample-diagram" targetNamespace="http://bpmn.io/schema/bpmn">\n  <process-action id="ProcessAction_3">\n  </process-action>\n  <bpmndi:BPMNDiagram id="BPMNDiagram_3">\n    <bpmndi:BPMNPlane id="BPMNPlane_3" bpmnElement="Process_3">\n    </bpmndi:BPMNPlane>\n  </bpmndi:BPMNDiagram>\n</process-actions>');case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),[W,dt]);Object(a.useEffect)((function(){switch(W){case 1:Qf||(Qf=new Cc({container:"#bpmnview",additionalModules:[Nd]})),ht(),tm=Qf;break;case 3:em||(em=new Cc({container:"#bpmnview2",additionalModules:[Cd]})),tm=em,ht();break;case 2:Zf||(Zf=new Cc({container:"#bpmnview3",additionalModules:[Nd]})),tm=Zf,ht();break;default:return}}),[ht,W]);var ft=Object(a.useCallback)((function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(!e.businessObject||!e.businessObject.di||!e.businessObject.di.stroke&&!e.businessObject.di.fill||t){var n=tm.get("modeling"),r={};Td(e,["bpmn:Mapper"])?(r.stroke=dh["bpmn:Task"],r.fill=sh):r.stroke=dh[e.type],n.setColor(e,r),3===W&&"bpmn:Mapper"===e.type&&n.resizeShape(e,{x:e.x,y:e.y-20,width:130,height:120})}}),[W]);return Object(a.useEffect)((function(){var e;(oe.current=new If.a(null!=q?q:"No data",1/0,{hoverPreviewEnabled:!1,hoverPreviewArrayCount:100,hoverPreviewFieldCount:5,theme:"dark",animateOpen:!0,animateClose:!0,useToJSON:!0}),2===lt)&&(null!=document.getElementById("console")&&(document.getElementById("console").innerHTML=""),null===(e=document.getElementById("console"))||void 0===e||e.appendChild(oe.current.render()))}),[q,lt]),Object(a.useEffect)((function(){switch(W){case 1:tm=Qf,document.getElementById("bpmnview2").style.display="none",document.getElementById("bpmnview3").style.display="none",document.getElementById("bpmnview").style.display="block";break;case 3:tm=em,document.getElementById("bpmnview").style.display="none",document.getElementById("bpmnview3").style.display="none",document.getElementById("bpmnview2").style.display="block";break;case 2:tm=Zf,document.getElementById("bpmnview").style.display="none",document.getElementById("bpmnview2").style.display="none",document.getElementById("bpmnview3").style.display="block"}tm.on("element.click",(function(e){I(e.element),ut(0)})),tm.on("commandStack.shape.create.postExecuted",(function(e){ft(e&&e.context&&e.context.shape)})),tm.on("shape.changed",(function(e){I(e.element)})),tm.on("resize.end",1500,(function(e){if(Td(e.shape,"bpmn:Participant")||Td(e.shape,"bpmn:Lane")){(Td(e.shape,"bpmn:Participant")?e.shape:e.shape.parent).children.forEach((function(t){document.getElementById(t.id).style.width="".concat(document.getElementById(t.id).getBoundingClientRect().width+e.dx,"px")}))}})),tm.on("shape.removed",(function(){var e=tm.get("elementRegistry"),t=tm.getDefinitions(),n=t&&t.rootElements&&t.rootElements[0];if(n){var r=e.get(n.id);r&&I(r)}}))}),[W,ft]),Object(r.jsxs)("div",{id:"container",children:[Object(r.jsxs)("div",{id:"bpmncontainer",children:[he&&Object(r.jsx)(Hf,{open:he,handleClose:function(){fe(!1)}}),Object(r.jsxs)("div",{id:"bpmnview",children:[Object(r.jsxs)("div",{className:Ee.header,children:[Object(r.jsx)("div",{className:Ee.toolbarButtons,children:nt.map((function(e){return Object(r.jsx)("div",{className:Ee.btnContainer,children:Object(r.jsx)(m.a,{title:e.tooltipText,className:Ee.toolTip,children:Object(r.jsxs)("div",{className:"Parametres"===e.tooltipText?[Ee.toolTip,Ee.active]:Ee.toolTip,children:[Object(r.jsx)(b.a,{fontSize:"large",onClick:e.onClick,className:Ee.iconButton,children:e.icon}),Object(r.jsx)("p",{className:Ee.toolTipFont,children:e.tooltipText})]})})},e.name)}))}),Object(r.jsx)(kl,{name:"name",title:"Model",placeholder:"Model",optionLabelKey:"name",className:Ee.inputSelect,options:nm,value:nm[0],onChange:function(e){switch(e.name){case"Connector":$(3);break;case"Authentification":$(2);break;default:return}}}),Object(r.jsx)(kl,{name:"name",title:"target",placeholder:"Target Request",optionLabelKey:"name",className:Ee.inputSelect,value:J,fetchAPI:Ns,onChange:function(e){!function(e){!0===Ve()?Re(null===e||void 0===e?void 0:e.id):ye({state:!0,action:"onChange",data:e,alertConfig:{alertMessage:"Current changes will be lost. Do you really want to proceed?",alertTitle:"New"}})}(e)}})]}),1===W&&ve.state&&Object(r.jsxs)(v.a,{open:ve.state,onClose:function(e,t){"backdropClick"!==t&&ye(!1)},"aria-labelledby":"alert-dialog-title","aria-describedby":"alert-dialog-description",classes:{paper:Ee.dialog},children:[Object(r.jsx)(y.a,{id:"alert-dialog-title",children:ve.alertConfig.alertTitle}),Object(r.jsx)(g.a,{children:Object(r.jsx)(x.a,{id:"alert-dialog-description",children:ve.alertConfig.alertMessage})}),Object(r.jsxs)(j.a,{children:[Object(r.jsx)(f.a,{onClick:function(){var e;switch(ve.action){case"new":Ie();break;case"delete":Ie(),Be();break;case"onChange":Re(null===ve||void 0===ve||null===(e=ve.data)||void 0===e?void 0:e.id)}ye(Object(l.a)(Object(l.a)({},ve),{},{state:!1}))},color:"primary",autoFocus:!0,className:Ee.save,children:"Ok"}),Object(r.jsx)(f.a,{onClick:function(){ye(!1)},color:"primary",autoFocus:!0,style:{textTransform:"none"},className:Ee.save,children:"Cancel"})]})]})]}),Object(r.jsxs)("div",{id:"bpmnview3",children:[Object(r.jsxs)("div",{className:Ee.header,children:[Object(r.jsx)("div",{className:Ee.toolbarButtons,children:nt.map((function(e){return Object(r.jsx)("div",{className:Ee.btnContainer,children:Object(r.jsx)(m.a,{title:e.tooltipText,className:Ee.toolTip,children:Object(r.jsxs)("div",{className:"Parametres"===e.tooltipText?[Ee.toolTip,Ee.active]:Ee.toolTip,children:[Object(r.jsx)(b.a,{fontSize:"large",onClick:e.onClick,className:Ee.iconButton,children:e.icon}),Object(r.jsx)("p",{className:Ee.toolTipFont,children:e.tooltipText})]})})},e.name)}))}),Object(r.jsx)(kl,{name:"name",title:"Model",placeholder:"Model",optionLabelKey:"name",className:Ee.inputSelect,options:nm,value:nm[1],onChange:function(e){switch(e.name){case"Request":$(1);break;case"Connector":$(3);break;default:return}}}),Object(r.jsx)(kl,{name:"name",title:"target",placeholder:"Target Request",optionLabelKey:"name",className:Ee.inputSelect,value:ee,fetchAPI:Ps,onChange:function(e){Xe(e)}})]}),2===W&&ve.state&&Object(r.jsxs)(v.a,{open:ve.state,onClose:function(e,t){"backdropClick"!==t&&ye(!1)},"aria-labelledby":"alert-dialog-title","aria-describedby":"alert-dialog-description",classes:{paper:Ee.dialog},children:[Object(r.jsx)(y.a,{id:"alert-dialog-title",children:ve.alertConfig.alertTitle}),Object(r.jsx)(g.a,{children:Object(r.jsx)(x.a,{id:"alert-dialog-description",children:ve.alertConfig.alertMessage})}),Object(r.jsxs)(j.a,{children:[Object(r.jsx)(f.a,{onClick:function(){switch(ve.action){case"new":tt();break;case"delete":tt(),Je();break;case"onChange":Ye(ve.data.id)}ye(Object(l.a)(Object(l.a)({},ve),{},{state:!1}))},color:"primary",autoFocus:!0,className:Ee.save,children:"Ok"}),Object(r.jsx)(f.a,{onClick:function(){ye(!1)},color:"primary",autoFocus:!0,style:{textTransform:"none"},className:Ee.save,children:"Cancel"})]})]})]}),Object(r.jsxs)("div",{id:"bpmnview2",children:[Object(r.jsxs)("div",{className:Ee.header,children:[Object(r.jsx)("div",{className:Ee.toolbarButtons,children:nt.map((function(e){return Object(r.jsx)("div",{className:Ee.btnContainer,children:Object(r.jsx)(m.a,{title:e.tooltipText,className:Ee.toolTip,children:Object(r.jsxs)("div",{className:"Parametres"===e.tooltipText?[Ee.toolTip,Ee.active]:Ee.toolTip,children:[Object(r.jsx)(b.a,{fontSize:"large",onClick:e.onClick,className:Ee.iconButton,children:e.icon}),Object(r.jsx)("p",{className:Ee.toolTipFont,children:e.tooltipText})]})})},e.name)}))}),Object(r.jsx)(kl,{name:"name",title:"Model",placeholder:"Model",optionLabelKey:"name",className:Ee.inputSelect,options:nm,value:nm[2],onChange:function(e){switch(e.name){case"Authentification":$(2);break;case"Request":$(1);break;default:return}}}),Object(r.jsx)(kl,{name:"name",title:"target",placeholder:"Target Request",optionLabelKey:"name",className:Ee.inputSelect,value:ae,fetchAPI:Ss,onChange:function(e){!function(e){Ge()?We(null===e||void 0===e?void 0:e.id):ye({state:!0,data:e,action:"onChange",alertConfig:{alertMessage:"Current changes will be lost. Do you really want to proceed?",alertTitle:"New"}})}(e)}})]}),3===W&&ve.state&&Object(r.jsxs)(v.a,{open:ve.state,onClose:function(e,t){"backdropClick"!==t&&ye(!1)},"aria-labelledby":"alert-dialog-title","aria-describedby":"alert-dialog-description",classes:{paper:Ee.dialog},children:[Object(r.jsx)(y.a,{id:"alert-dialog-title",children:ve.alertConfig.alertTitle}),Object(r.jsx)(g.a,{children:Object(r.jsx)(x.a,{id:"alert-dialog-description",children:ve.alertConfig.alertMessage})}),Object(r.jsxs)(j.a,{children:[Object(r.jsx)(f.a,{onClick:function(){var e;switch(ve.action){case"new":He();break;case"delete":He(),$e();break;case"onChange":We(null===(e=ve.data)||void 0===e?void 0:e.id)}ye(Object(l.a)(Object(l.a)({},ve),{},{state:!1}))},color:"primary",autoFocus:!0,className:Ee.save,children:"Ok"}),Object(r.jsx)(f.a,{onClick:function(){ye(!1)},color:"primary",autoFocus:!0,style:{textTransform:"none"},className:Ee.save,children:"Cancel"})]})]})]})]}),Object(r.jsxs)("div",{children:[Object(r.jsxs)(S.a,{style:Yf,size:{width:n,height:C},onResizeStop:function(e,t,r,a){o((function(e){return e+a.width})),P(C+a.height),Ne(n+a.width)},maxWidth:window.innerWidth-150,children:[Object(r.jsx)(w.a,{variant:"persistent",anchor:"right",open:A,style:{width:Xf},classes:{paper:Ee.drawerPaper},id:"drawer",children:Object(r.jsx)("div",{className:Ee.drawerContainer,children:Object(r.jsxs)(pf.a,{value:lt.toString(),children:[Object(r.jsx)(O.a,{className:Ee.box,children:Object(r.jsxs)(E.a,{value:lt,onChange:function(e,t){ut(t)},"aria-label":"basic tabs example",className:Ee.tabNav,children:[Object(r.jsx)(N.a,Object(l.a)({className:Ee.tabStyle,label:"Generality"},pt(0))),Object(r.jsx)(N.a,Object(l.a)({className:Ee.tabStyle,label:"Description"},pt(1))),Object(r.jsx)(N.a,Object(l.a)({className:Ee.tabStyle,label:"Consol"},pt(2)))]})}),Object(r.jsx)(df.a,{className:Ee.tabPanel,value:"0",index:0,children:rt().map((function(e,t){return Object(r.jsx)("div",{className:Ee.property,children:ot(e)},t)}))}),Object(r.jsx)(df.a,{className:Ee.tabPanel,value:"1",index:1,children:Object(r.jsx)(al,{desciption:"Description",element:F})}),Object(r.jsxs)(df.a,{className:Ee.tabPanelConsole,value:"2",index:2,children:[q&&null==(null===q||void 0===q?void 0:q.ok)&&0===(null===q||void 0===q?void 0:q.status)&&Object(r.jsx)("div",{className:Ee.messageResponseSuccess,children:"Success, everything run Successfully"}),(!1===(null===q||void 0===q?void 0:q.ok)||-1===(null===q||void 0===q?void 0:q.status))&&Object(r.jsx)("div",{className:Ee.messageResponseError,children:"Error , something went wrong !"}),Object(r.jsxs)("div",{className:Ee.consoleHeader,children:[Object(r.jsx)("h3",{style:{color:"white",margin:0,padding:10},children:"Result"}),Object(r.jsx)(f.a,{className:Ee.copy,title:"Copy result as Json",children:"Copy"})]}),Object(r.jsx)("div",{id:"console",className:Ee.console})]})]})})}),Object(r.jsx)("div",{className:"bpmn-property-toggle",onClick:function(){o((function(e){return 0===e?Xf:0})),Ne(0===n?Xf:0)},children:"Properties panel"})]}),Object(r.jsx)("div",{className:"properties-panel-parent",id:"js-properties-panel"})]}),le.open&&Object(r.jsx)(k.a,{open:le.open,autoHideDuration:3e3,onClose:Se,children:Object(r.jsx)(hf.a,{elevation:6,variant:"filled",onClose:Se,className:"snackbarAlert",style:{alignItems:"flex-start"},severity:le.messageType,children:Object(r.jsx)("div",{dangerouslySetInnerHTML:{__html:le.message}})})})]})};var am=function(){return Object(r.jsx)("div",{className:"App",children:Object(r.jsx)(s.a,{store:xf,children:Object(r.jsx)(rm,{})})})};n(485);c.a.render(Object(r.jsx)(am,{}),document.getElementById("root"))}},[[486,1,2]]]);
//# sourceMappingURL=main.75b6b491.chunk.js.map